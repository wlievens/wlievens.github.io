"use strict";(self.webpackChunkknossos_frontend=self.webpackChunkknossos_frontend||[]).push([[179],{6304:(wt,Me,H)=>{H.d(Me,{Dh:()=>Pe,GT:()=>ue,cc:()=>Le,hO:()=>Ge,on:()=>K,pX:()=>ce,xv:()=>we});var d=H(5879),W=H(7142),F=H(8186);wt=H.hmd(wt);const ne=["ngOnDestroy"],ce=(He,kt,yt,se={})=>new Proxy(He,{get:(Se,de)=>yt.runOutsideAngular(()=>{var be;if(He[de])return!(null===(be=se?.spy)||void 0===be)&&be.get&&se.spy.get(de,He[de]),He[de];if(ne.indexOf(de)>-1)return()=>{};const Ve=kt.toPromise().then(re=>{const ct=re&&re[de];return"function"==typeof ct?ct.bind(re):ct&&ct.then?ct.then(Ze=>yt.run(()=>Ze)):yt.run(()=>ct)});return new Proxy(()=>{},{get:(re,ct)=>Ve[ct],apply:(re,ct,Ze)=>Ve.then(un=>{var Oi;const Sr=un&&un(...Ze);return!(null===(Oi=se?.spy)||void 0===Oi)&&Oi.apply&&se.spy.apply(de,Ze,Sr),Sr})})})}),ue=(He,kt)=>{kt.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(se=>{Object.defineProperty(He.prototype,se,Object.getOwnPropertyDescriptor(yt.prototype||yt,se))})})};class Ie{constructor(kt){return kt}}const Pe=new d.OlP("angularfire2.app.options"),we=new d.OlP("angularfire2.app.name");function K(He,kt,yt){const Se="object"==typeof yt&&yt||{};Se.name=Se.name||"string"==typeof yt&&yt||"[DEFAULT]";const be=W.Z.apps.filter(Ve=>Ve&&Ve.name===Se.name)[0]||kt.runOutsideAngular(()=>W.Z.initializeApp(He,Se));try{JSON.stringify(He)!==JSON.stringify(be.options)&&Z("error",`${be.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(be)}const Z=(He,...kt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[He](...kt)},ae={provide:Ie,useFactory:K,deps:[Pe,d.R0b,[new d.FiY,we]]};let Ge=(()=>{class He{constructor(yt){W.Z.registerVersion("angularfire",F.q4.full,"core"),W.Z.registerVersion("angularfire",F.q4.full,"app-compat"),W.Z.registerVersion("angular",d.q4F.full,yt.toString())}static initializeApp(yt,se){return{ngModule:He,providers:[{provide:Pe,useValue:yt},{provide:we,useValue:se}]}}}return He.\u0275fac=function(yt){return new(yt||He)(d.LFG(d.Lbi))},He.\u0275mod=d.oAB({type:He}),He.\u0275inj=d.cJS({providers:[ae]}),He})();function Le(He,kt,yt,se,Se){const[,de,be]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===He)||[];if(de)return function nt(He,kt){try{return He.toString()===kt.toString()}catch{return He===kt}}(Se,be)||(it("error",`${kt} was already initialized on the ${yt} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),it("warn",{is:Se,was:be})),de;{const Ve=se();return globalThis.\u0275AngularfireInstanceCache.push([He,Ve,Se]),Ve}}const Ue=!!wt.hot,it=(He,...kt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[He](...kt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(wt,Me,H)=>{H.d(Me,{q4:()=>wa,iC:()=>Tf,fc:()=>Ca,HU:()=>xa,vb:()=>X_,JM:()=>If,u3:()=>Af});var d=H(5879),W=H(3182),F=H(5861),ne=H(534),ce=H(9058),ue=H(4537),Ie=H(7879);const Pe=(C,S)=>S.some(k=>C instanceof k);let we,K;const Ge=new WeakMap,Le=new WeakMap,nt=new WeakMap,Ue=new WeakMap,it=new WeakMap;let yt={get(C,S,k){if(C instanceof IDBTransaction){if("done"===S)return Le.get(C);if("objectStoreNames"===S)return C.objectStoreNames||nt.get(C);if("store"===S)return k.objectStoreNames[1]?void 0:k.objectStore(k.objectStoreNames[0])}return be(C[S])},set:(C,S,k)=>(C[S]=k,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function de(C){return"function"==typeof C?function Se(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply(Ve(this),S),be(Ge.get(this))}:function(...S){return be(C.apply(Ve(this),S))}:function(S,...k){const j=C.call(Ve(this),S,...k);return nt.set(j,S.sort?S.sort():[S]),be(j)}}(C):(C instanceof IDBTransaction&&function kt(C){if(Le.has(C))return;const S=new Promise((k,j)=>{const X=()=>{C.removeEventListener("complete",te),C.removeEventListener("error",ye),C.removeEventListener("abort",ye)},te=()=>{k(),X()},ye=()=>{j(C.error||new DOMException("AbortError","AbortError")),X()};C.addEventListener("complete",te),C.addEventListener("error",ye),C.addEventListener("abort",ye)});Le.set(C,S)}(C),Pe(C,function Z(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,yt):C)}function be(C){if(C instanceof IDBRequest)return function He(C){const S=new Promise((k,j)=>{const X=()=>{C.removeEventListener("success",te),C.removeEventListener("error",ye)},te=()=>{k(be(C.result)),X()},ye=()=>{j(C.error),X()};C.addEventListener("success",te),C.addEventListener("error",ye)});return S.then(k=>{k instanceof IDBCursor&&Ge.set(k,C)}).catch(()=>{}),it.set(S,C),S}(C);if(Ue.has(C))return Ue.get(C);const S=de(C);return S!==C&&(Ue.set(C,S),it.set(S,C)),S}const Ve=C=>it.get(C),Ze=["get","getKey","getAll","getAllKeys","count"],un=["put","add","delete","clear"],Oi=new Map;function Sr(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(Oi.get(S))return Oi.get(S);const k=S.replace(/FromIndex$/,""),j=S!==k,X=un.includes(k);if(!(k in(j?IDBIndex:IDBObjectStore).prototype)||!X&&!Ze.includes(k))return;const te=function(){var ye=(0,F.Z)(function*(st,...Je){const bt=this.transaction(st,X?"readwrite":"readonly");let jt=bt.store;return j&&(jt=jt.index(Je.shift())),(yield Promise.all([jt[k](...Je),X&&bt.done]))[0]});return function(Je){return ye.apply(this,arguments)}}();return Oi.set(S,te),te}!function se(C){yt=C(yt)}(C=>({...C,get:(S,k,j)=>Sr(S,k)||C.get(S,k,j),has:(S,k)=>!!Sr(S,k)||C.has(S,k)}));const ps="@firebase/installations",pe="0.6.4",De=1e4,Re=`w:${pe}`,ze="FIS_v2",Qe="https://firebaseinstallations.googleapis.com/v1",Ke=36e5,ut=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Dt(C){return C instanceof ce.ZR&&C.code.includes("request-failed")}function gn({projectId:C}){return`${Qe}/projects/${C}/installations`}function Sn(C){return{token:C.token,requestStatus:2,expiresIn:to(C.expiresIn),creationTime:Date.now()}}function ti(C,S){return hn.apply(this,arguments)}function hn(){return(hn=(0,F.Z)(function*(C,S){const j=(yield S.json()).error;return ut.create("request-failed",{requestName:C,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Ni({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function wi(C){return ci.apply(this,arguments)}function ci(){return(ci=(0,F.Z)(function*(C){const S=yield C();return S.status>=500&&S.status<600?C():S})).apply(this,arguments)}function to(C){return Number(C.replace("s","000"))}function rr(){return(rr=(0,F.Z)(function*({appConfig:C,heartbeatServiceProvider:S},{fid:k}){const j=gn(C),X=Ni(C),te=S.getImmediate({optional:!0});if(te){const bt=yield te.getHeartbeatsHeader();bt&&X.append("x-firebase-client",bt)}const st={method:"POST",headers:X,body:JSON.stringify({fid:k,authVersion:ze,appId:C.appId,sdkVersion:Re})},Je=yield wi(()=>fetch(j,st));if(Je.ok){const bt=yield Je.json();return{fid:bt.fid||k,registrationStatus:2,refreshToken:bt.refreshToken,authToken:Sn(bt.authToken)}}throw yield ti("Create Installation",Je)})).apply(this,arguments)}function di(C){return new Promise(S=>{setTimeout(S,C)})}const Zo=/^[cdef][\w-]{21}$/,rt="";function xt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const k=function At(C){return function Ar(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Zo.test(k)?k:rt}catch{return rt}}function cn(C){return`${C.appName}!${C.appId}`}const Mi=new Map;function jr(C,S){const k=cn(C);Fo(k,S),function Dn(C,S){const k=function Gt(){return!vr&&"BroadcastChannel"in self&&(vr=new BroadcastChannel("[Firebase] FID Change"),vr.onmessage=C=>{Fo(C.data.key,C.data.fid)}),vr}();k&&k.postMessage({key:C,fid:S}),function Kn(){0===Mi.size&&vr&&(vr.close(),vr=null)}()}(k,S)}function Fo(C,S){const k=Mi.get(C);if(k)for(const j of k)j(S)}let vr=null;const bo="firebase-installations-database",Qo=1,or="firebase-installations-store";let ui=null;function Bn(){return ui||(ui=function re(C,S,{blocked:k,upgrade:j,blocking:X,terminated:te}={}){const ye=indexedDB.open(C,S),st=be(ye);return j&&ye.addEventListener("upgradeneeded",Je=>{j(be(ye.result),Je.oldVersion,Je.newVersion,be(ye.transaction))}),k&&ye.addEventListener("blocked",()=>k()),st.then(Je=>{te&&Je.addEventListener("close",()=>te()),X&&Je.addEventListener("versionchange",()=>X())}).catch(()=>{}),st}(bo,Qo,{upgrade:(C,S)=>{0===S&&C.createObjectStore(or)}})),ui}function Ei(C,S){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,F.Z)(function*(C,S){const k=cn(C),X=(yield Bn()).transaction(or,"readwrite"),te=X.objectStore(or),ye=yield te.get(k);return yield te.put(S,k),yield X.done,(!ye||ye.fid!==S.fid)&&jr(C,S.fid),S})).apply(this,arguments)}function ki(C){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,F.Z)(function*(C){const S=cn(C),j=(yield Bn()).transaction(or,"readwrite");yield j.objectStore(or).delete(S),yield j.done})).apply(this,arguments)}function Mr(C,S){return dn.apply(this,arguments)}function dn(){return(dn=(0,F.Z)(function*(C,S){const k=cn(C),X=(yield Bn()).transaction(or,"readwrite"),te=X.objectStore(or),ye=yield te.get(k),st=S(ye);return void 0===st?yield te.delete(k):yield te.put(st,k),yield X.done,st&&(!ye||ye.fid!==st.fid)&&jr(C,st.fid),st})).apply(this,arguments)}function Y(C){return q.apply(this,arguments)}function q(){return q=(0,F.Z)(function*(C){let S;const k=yield Mr(C.appConfig,j=>{const X=function B(C){return Tt(C||{fid:xt(),registrationStatus:0})}(j),te=function z(C,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ut.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function N(C,S){return ie.apply(this,arguments)}(C,k);return{installationEntry:k,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Ee(C)}:{installationEntry:S}}(C,X);return S=te.registrationPromise,te.installationEntry});return k.fid===rt?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}}),q.apply(this,arguments)}function ie(){return ie=(0,F.Z)(function*(C,S){try{const k=yield function vo(C,S){return rr.apply(this,arguments)}(C,S);return Ei(C.appConfig,k)}catch(k){throw Dt(k)&&409===k.customData.serverCode?yield ki(C.appConfig):yield Ei(C.appConfig,{fid:S.fid,registrationStatus:0}),k}}),ie.apply(this,arguments)}function Ee(C){return tt.apply(this,arguments)}function tt(){return(tt=(0,F.Z)(function*(C){let S=yield Mt(C.appConfig);for(;1===S.registrationStatus;)yield di(100),S=yield Mt(C.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:j}=yield Y(C);return j||k}return S})).apply(this,arguments)}function Mt(C){return Mr(C,S=>{if(!S)throw ut.create("installation-not-found");return Tt(S)})}function Tt(C){return function Et(C){return 1===C.registrationStatus&&C.registrationTime+De<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Rn(){return(Rn=(0,F.Z)(function*({appConfig:C,heartbeatServiceProvider:S},k){const j=function Yt(C,{fid:S}){return`${gn(C)}/${S}/authTokens:generate`}(C,k),X=function Ai(C,{refreshToken:S}){const k=Ni(C);return k.append("Authorization",function oa(C){return`${ze} ${C}`}(S)),k}(C,k),te=S.getImmediate({optional:!0});if(te){const bt=yield te.getHeartbeatsHeader();bt&&X.append("x-firebase-client",bt)}const st={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:Re,appId:C.appId}})},Je=yield wi(()=>fetch(j,st));if(Je.ok)return Sn(yield Je.json());throw yield ti("Generate Auth Token",Je)})).apply(this,arguments)}function Wi(C){return sr.apply(this,arguments)}function sr(){return sr=(0,F.Z)(function*(C,S=!1){let k;const j=yield Mr(C.appConfig,te=>{if(!tn(te))throw ut.create("not-registered");const ye=te.authToken;if(!S&&function _n(C){return 2===C.requestStatus&&!function qi(C){const S=Date.now();return S<C.creationTime||C.creationTime+C.expiresIn<S+Ke}(C)}(ye))return te;if(1===ye.requestStatus)return k=function ve(C,S){return le.apply(this,arguments)}(C,S),te;{if(!navigator.onLine)throw ut.create("app-offline");const st=function hi(C){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:S})}(te);return k=function Ct(C,S){return zt.apply(this,arguments)}(C,st),st}});return k?yield k:j.authToken}),sr.apply(this,arguments)}function le(){return(le=(0,F.Z)(function*(C,S){let k=yield We(C.appConfig);for(;1===k.authToken.requestStatus;)yield di(100),k=yield We(C.appConfig);const j=k.authToken;return 0===j.requestStatus?Wi(C,S):j})).apply(this,arguments)}function We(C){return Mr(C,S=>{if(!tn(S))throw ut.create("not-registered");return function Ns(C){return 1===C.requestStatus&&C.requestTime+De<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function zt(){return zt=(0,F.Z)(function*(C,S){try{const k=yield function Vt(C,S){return Rn.apply(this,arguments)}(C,S),j=Object.assign(Object.assign({},S),{authToken:k});return yield Ei(C.appConfig,j),k}catch(k){if(!Dt(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Ei(C.appConfig,j)}else yield ki(C.appConfig);throw k}}),zt.apply(this,arguments)}function tn(C){return void 0!==C&&2===C.registrationStatus}function Ml(){return(Ml=(0,F.Z)(function*(C){const S=C,{installationEntry:k,registrationPromise:j}=yield Y(S);return j?j.catch(console.error):Wi(S).catch(console.error),k.fid})).apply(this,arguments)}function br(){return br=(0,F.Z)(function*(C,S=!1){const k=C;return yield function Fs(C){return sa.apply(this,arguments)}(k),(yield Wi(k,S)).token}),br.apply(this,arguments)}function sa(){return(sa=(0,F.Z)(function*(C){const{registrationPromise:S}=yield Y(C);S&&(yield S)})).apply(this,arguments)}function aa(C){return ut.create("missing-app-config-values",{valueName:C})}const Rc="installations",kl=C=>{const S=C.getProvider("app").getImmediate(),k=function kc(C){if(!C||!C.options)throw aa("App Configuration");if(!C.name)throw aa("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!C.options[k])throw aa(k);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,ne._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Rl=C=>{const S=C.getProvider("app").getImmediate(),k=(0,ne._getProvider)(S,Rc).getImmediate();return{getId:()=>function $a(C){return Ml.apply(this,arguments)}(k),getToken:X=>function Yh(C){return br.apply(this,arguments)}(k,X)}};(function eu(){(0,ne._registerComponent)(new ue.wA(Rc,kl,"PUBLIC")),(0,ne._registerComponent)(new ue.wA("installations-internal",Rl,"PRIVATE"))})(),(0,ne.registerVersion)(ps,pe),(0,ne.registerVersion)(ps,pe,"esm2017");const Pl="@firebase/remote-config",An=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fl{constructor(S,k,j,X){this.client=S,this.storage=k,this.storageCache=j,this.logger=X}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-k,X=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var k=this;return(0,F.Z)(function*(){const[j,X]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(X&&k.isCachedDataFresh(S.cacheMaxAgeMillis,j))return X;S.eTag=X&&X.eTag;const te=yield k.client.fetch(S),ye=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&ye.push(k.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(ye),te})()}}function Nc(C=navigator){return C.languages&&C.languages[0]||C.language}class Ls{constructor(S,k,j,X,te,ye){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=j,this.projectId=X,this.apiKey=te,this.appId=ye}fetch(S){var k=this;return(0,F.Z)(function*(){const[j,X]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),ye=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,st={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Je={sdk_version:k.sdkVersion,app_instance_id:j,app_instance_id_token:X,app_id:k.appId,language_code:Nc()},bt={method:"POST",headers:st,body:JSON.stringify(Je)},jt=fetch(ye,bt),Bt=new Promise((so,$o)=>{S.signal.addEventListener(()=>{const ll=new Error("The operation was aborted.");ll.name="AbortError",$o(ll)})});let Vi;try{yield Promise.race([jt,Bt]),Vi=yield jt}catch(so){let $o="fetch-client-network";throw"AbortError"===so?.name&&($o="fetch-timeout"),An.create($o,{originalErrorMessage:so?.message})}let Xi=Vi.status;const oo=Vi.headers.get("ETag")||void 0;let Lu,jo;if(200===Vi.status){let so;try{so=yield Vi.json()}catch($o){throw An.create("fetch-client-parse",{originalErrorMessage:$o?.message})}Lu=so.entries,jo=so.state}if("INSTANCE_STATE_UNSPECIFIED"===jo?Xi=500:"NO_CHANGE"===jo?Xi=304:("NO_TEMPLATE"===jo||"EMPTY_CONFIG"===jo)&&(Lu={}),304!==Xi&&200!==Xi)throw An.create("fetch-status",{httpStatus:Xi});return{status:Xi,eTag:oo,config:Lu}})()}}class da{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,F.Z)(function*(){const j=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:j}){var X=this;return(0,F.Z)(function*(){yield function Qn(C,S){return new Promise((k,j)=>{const X=Math.max(S-Date.now(),0),te=setTimeout(k,X);C.addEventListener(()=>{clearTimeout(te),j(An.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const te=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),te}catch(te){if(!function Fc(C){if(!(C instanceof ce.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(te))throw te;const ye={throttleEndTimeMillis:Date.now()+(0,ce.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(ye),X.attemptFetch(S,ye)}})()}}class Lc{constructor(S,k,j,X,te){this.app=S,this._client=k,this._storageCache=j,this._storage=X,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function lr(C,S){const k=C.target.error||void 0;return An.create(S,{originalErrorMessage:k&&k?.message})}const Pr="app_namespace_store";class xp{constructor(S,k,j,X=function vn(){return new Promise((C,S)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=j=>{S(lr(j,"storage-open"))},k.onsuccess=j=>{C(j.target.result)},k.onupgradeneeded=j=>{0===j.oldVersion&&j.target.result.createObjectStore(Pr,{keyPath:"compositeKey"})}}catch(k){S(An.create("storage-open",{originalErrorMessage:k?.message}))}})}()){this.appId=S,this.appName=k,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,F.Z)(function*(){const j=yield k.openDbPromise;return new Promise((X,te)=>{const st=j.transaction([Pr],"readonly").objectStore(Pr),Je=k.createCompositeKey(S);try{const bt=st.get(Je);bt.onerror=jt=>{te(lr(jt,"storage-get"))},bt.onsuccess=jt=>{const Bt=jt.target.result;X(Bt?Bt.value:void 0)}}catch(bt){te(An.create("storage-get",{originalErrorMessage:bt?.message}))}})})()}set(S,k){var j=this;return(0,F.Z)(function*(){const X=yield j.openDbPromise;return new Promise((te,ye)=>{const Je=X.transaction([Pr],"readwrite").objectStore(Pr),bt=j.createCompositeKey(S);try{const jt=Je.put({compositeKey:bt,value:k});jt.onerror=Bt=>{ye(lr(Bt,"storage-set"))},jt.onsuccess=()=>{te()}}catch(jt){ye(An.create("storage-set",{originalErrorMessage:jt?.message}))}})})()}delete(S){var k=this;return(0,F.Z)(function*(){const j=yield k.openDbPromise;return new Promise((X,te)=>{const st=j.transaction([Pr],"readwrite").objectStore(Pr),Je=k.createCompositeKey(S);try{const bt=st.delete(Je);bt.onerror=jt=>{te(lr(jt,"storage-delete"))},bt.onsuccess=()=>{X()}}catch(bt){te(An.create("storage-delete",{originalErrorMessage:bt?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Xo{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,F.Z)(function*(){const k=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),te=yield k;te&&(S.lastFetchStatus=te);const ye=yield j;ye&&(S.lastSuccessfulFetchTimestampMillis=ye);const st=yield X;st&&(S.activeConfig=st)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function qa(){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,F.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function ua(){(0,ne._registerComponent)(new ue.wA("remote-config",function C(S,{instanceIdentifier:k}){const j=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw An.create("registration-window");if(!(0,ce.hl)())throw An.create("indexed-db-unavailable");const{projectId:te,apiKey:ye,appId:st}=j.options;if(!te)throw An.create("registration-project-id");if(!ye)throw An.create("registration-api-key");if(!st)throw An.create("registration-app-id");const Je=new xp(st,j.name,k=k||"firebase"),bt=new Xo(Je),jt=new Ie.Yd(Pl);jt.logLevel=Ie.in.ERROR;const Bt=new Ls(X,ne.SDK_VERSION,k,te,ye,st),Vi=new da(Bt,Je),Xi=new Fl(Vi,Je,bt,jt),oo=new Lc(j,Xi,bt,Je,jt);return function Wt(C){const S=(0,ce.m9)(C);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(oo),oo},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(Pl,"0.4.4"),(0,ne.registerVersion)(Pl,"0.4.4","esm2017")}();const wr=(C,S)=>S.some(k=>C instanceof k);let Ll,xr;const Bo=new WeakMap,Us=new WeakMap,Vn=new WeakMap,Ya=new WeakMap,Xh=new WeakMap;let ru={get(C,S,k){if(C instanceof IDBTransaction){if("done"===S)return Us.get(C);if("objectStoreNames"===S)return C.objectStoreNames||Vn.get(C);if("store"===S)return k.objectStoreNames[1]?void 0:k.objectStore(k.objectStoreNames[0])}return Jo(C[S])},set:(C,S,k)=>(C[S]=k,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function Jh(C){return"function"==typeof C?function G_(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function tu(){return xr||(xr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply(ou(this),S),Jo(Bo.get(this))}:function(...S){return Jo(C.apply(ou(this),S))}:function(S,...k){const j=C.call(ou(this),S,...k);return Vn.set(j,S.sort?S.sort():[S]),Jo(j)}}(C):(C instanceof IDBTransaction&&function iu(C){if(Us.has(C))return;const S=new Promise((k,j)=>{const X=()=>{C.removeEventListener("complete",te),C.removeEventListener("error",ye),C.removeEventListener("abort",ye)},te=()=>{k(),X()},ye=()=>{j(C.error||new DOMException("AbortError","AbortError")),X()};C.addEventListener("complete",te),C.addEventListener("error",ye),C.addEventListener("abort",ye)});Us.set(C,S)}(C),wr(C,function Er(){return Ll||(Ll=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,ru):C)}function Jo(C){if(C instanceof IDBRequest)return function nu(C){const S=new Promise((k,j)=>{const X=()=>{C.removeEventListener("success",te),C.removeEventListener("error",ye)},te=()=>{k(Jo(C.result)),X()},ye=()=>{j(C.error),X()};C.addEventListener("success",te),C.addEventListener("error",ye)});return S.then(k=>{k instanceof IDBCursor&&Bo.set(k,C)}).catch(()=>{}),Xh.set(S,C),S}(C);if(Ya.has(C))return Ya.get(C);const S=Jh(C);return S!==C&&(Ya.set(C,S),Xh.set(S,C)),S}const ou=C=>Xh.get(C);function su(C,S,{blocked:k,upgrade:j,blocking:X,terminated:te}={}){const ye=indexedDB.open(C,S),st=Jo(ye);return j&&ye.addEventListener("upgradeneeded",Je=>{j(Jo(ye.result),Je.oldVersion,Je.newVersion,Jo(ye.transaction))}),k&&ye.addEventListener("blocked",()=>k()),st.then(Je=>{te&&Je.addEventListener("close",()=>te()),X&&Je.addEventListener("versionchange",()=>X())}).catch(()=>{}),st}function Bc(C,{blocked:S}={}){const k=indexedDB.deleteDatabase(C);return S&&k.addEventListener("blocked",()=>S()),Jo(k).then(()=>{})}const Cp=["get","getKey","getAll","getAllKeys","count"],ef=["put","add","delete","clear"],tf=new Map;function nf(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(tf.get(S))return tf.get(S);const k=S.replace(/FromIndex$/,""),j=S!==k,X=ef.includes(k);if(!(k in(j?IDBIndex:IDBObjectStore).prototype)||!X&&!Cp.includes(k))return;const te=function(){var ye=(0,F.Z)(function*(st,...Je){const bt=this.transaction(st,X?"readwrite":"readonly");let jt=bt.store;return j&&(jt=jt.index(Je.shift())),(yield Promise.all([jt[k](...Je),X&&bt.done]))[0]});return function(Je){return ye.apply(this,arguments)}}();return tf.set(S,te),te}!function Ep(C){ru=C(ru)}(C=>({...C,get:(S,k,j)=>nf(S,k)||C.get(S,k,j),has:(S,k)=>!!nf(S,k)||C.has(S,k)}));const au="/firebase-messaging-sw.js",rf="/firebase-cloud-messaging-push-scope",Vc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",lu="https://fcmregistrations.googleapis.com/v1",Dp="google.c.a.c_id",fi="google.c.a.c_l",o0="google.c.a.ts";var Vs=(()=>((Vs=Vs||{}).PUSH_RECEIVED="push-received",Vs.NOTIFICATION_CLICKED="notification-clicked",Vs))();function Gr(C){const S=new Uint8Array(C);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cu(C){const k=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(k),X=new Uint8Array(j.length);for(let te=0;te<j.length;++te)X[te]=j.charCodeAt(te);return X}const Ul="fcm_token_details_db",Bl=5,Ip="fcm_token_object_Store";function Hc(){return Hc=(0,F.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Ul))return null;let S=null;return(yield su(Ul,Bl,{upgrade:(j=(0,F.Z)(function*(X,te,ye,st){var Je;if(te<2||!X.objectStoreNames.contains(Ip))return;const bt=st.objectStore(Ip),jt=yield bt.index("fcmSenderId").get(C);if(yield bt.clear(),jt)if(2===te){const Bt=jt;if(!Bt.auth||!Bt.p256dh||!Bt.endpoint)return;S={token:Bt.fcmToken,createTime:null!==(Je=Bt.createTime)&&void 0!==Je?Je:Date.now(),subscriptionOptions:{auth:Bt.auth,p256dh:Bt.p256dh,endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:"string"==typeof Bt.vapidKey?Bt.vapidKey:Gr(Bt.vapidKey)}}}else if(3===te){const Bt=jt;S={token:Bt.fcmToken,createTime:Bt.createTime,subscriptionOptions:{auth:Gr(Bt.auth),p256dh:Gr(Bt.p256dh),endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:Gr(Bt.vapidKey)}}}else if(4===te){const Bt=jt;S={token:Bt.fcmToken,createTime:Bt.createTime,subscriptionOptions:{auth:Gr(Bt.auth),p256dh:Gr(Bt.p256dh),endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:Gr(Bt.vapidKey)}}}}),function(te,ye,st,Je){return j.apply(this,arguments)})})).close(),yield Bc(Ul),yield Bc("fcm_vapid_details_db"),yield Bc("undefined"),function wo(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:S}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var j}),Hc.apply(this,arguments)}const zc="firebase-messaging-database",mi=1,ro="firebase-messaging-store";let du=null;function jc(){return du||(du=su(zc,mi,{upgrade:(C,S)=>{0===S&&C.createObjectStore(ro)}})),du}function fa(C){return ma.apply(this,arguments)}function ma(){return ma=(0,F.Z)(function*(C){const S=af(C),j=yield(yield jc()).transaction(ro).objectStore(ro).get(S);if(j)return j;{const X=yield function Tp(C){return Hc.apply(this,arguments)}(C.appConfig.senderId);if(X)return yield $c(C,X),X}}),ma.apply(this,arguments)}function $c(C,S){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,F.Z)(function*(C,S){const k=af(C),X=(yield jc()).transaction(ro,"readwrite");return yield X.objectStore(ro).put(S,k),yield X.done,S})).apply(this,arguments)}function Hs(){return(Hs=(0,F.Z)(function*(C){const S=af(C),j=(yield jc()).transaction(ro,"readwrite");yield j.objectStore(ro).delete(S),yield j.done})).apply(this,arguments)}function af({appConfig:C}){return C.appId}const Yi=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function s0(C,S){return hu.apply(this,arguments)}function hu(){return(hu=(0,F.Z)(function*(C,S){const k=yield Za(C),j=mu(S),X={method:"POST",headers:k,body:JSON.stringify(j)};let te;try{te=yield(yield fetch(Gc(C.appConfig),X)).json()}catch(ye){throw Yi.create("token-subscribe-failed",{errorInfo:ye?.toString()})}if(te.error)throw Yi.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw Yi.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Vl(){return(Vl=(0,F.Z)(function*(C,S){const k=yield Za(C),j=mu(S.subscriptionOptions),X={method:"PATCH",headers:k,body:JSON.stringify(j)};let te;try{te=yield(yield fetch(`${Gc(C.appConfig)}/${S.token}`,X)).json()}catch(ye){throw Yi.create("token-update-failed",{errorInfo:ye?.toString()})}if(te.error)throw Yi.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw Yi.create("token-update-no-token");return te.token})).apply(this,arguments)}function Ap(C,S){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,F.Z)(function*(C,S){const j={method:"DELETE",headers:yield Za(C)};try{const te=yield(yield fetch(`${Gc(C.appConfig)}/${S}`,j)).json();if(te.error)throw Yi.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(X){throw Yi.create("token-unsubscribe-failed",{errorInfo:X?.toString()})}})).apply(this,arguments)}function Gc({projectId:C}){return`${lu}/projects/${C}/registrations`}function Za(C){return fu.apply(this,arguments)}function fu(){return(fu=(0,F.Z)(function*({appConfig:C,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function mu({p256dh:C,auth:S,endpoint:k,vapidKey:j}){const X={web:{endpoint:k,auth:S,p256dh:C}};return j!==Vc&&(X.web.applicationPubKey=j),X}const Mp=6048e5;function lf(){return lf=(0,F.Z)(function*(C){const S=yield function Wc(C,S){return Qa.apply(this,arguments)}(C.swRegistration,C.vapidKey),k={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:S.endpoint,auth:Gr(S.getKey("auth")),p256dh:Gr(S.getKey("p256dh"))},j=yield fa(C.firebaseDependencies);if(j){if(function Cr(C,S){return S.vapidKey===C.vapidKey&&S.endpoint===C.endpoint&&S.auth===C.auth&&S.p256dh===C.p256dh}(j.subscriptionOptions,k))return Date.now()>=j.createTime+Mp?function Vo(C,S){return yu.apply(this,arguments)}(C,{token:j.token,createTime:Date.now(),subscriptionOptions:k}):j.token;try{yield Ap(C.firebaseDependencies,j.token)}catch(X){console.warn(X)}return pa(C.firebaseDependencies,k)}return pa(C.firebaseDependencies,k)}),lf.apply(this,arguments)}function _u(){return _u=(0,F.Z)(function*(C){const S=yield fa(C.firebaseDependencies);S&&(yield Ap(C.firebaseDependencies,S.token),yield function sf(C){return Hs.apply(this,arguments)}(C.firebaseDependencies));const k=yield C.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()}),_u.apply(this,arguments)}function yu(){return yu=(0,F.Z)(function*(C,S){try{const k=yield function q_(C,S){return Vl.apply(this,arguments)}(C.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield $c(C.firebaseDependencies,j),k}catch(k){throw yield function gu(C){return _u.apply(this,arguments)}(C),k}}),yu.apply(this,arguments)}function pa(C,S){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,F.Z)(function*(C,S){const j={token:yield s0(C,S),createTime:Date.now(),subscriptionOptions:S};return yield $c(C,j),j.token})).apply(this,arguments)}function Qa(){return(Qa=(0,F.Z)(function*(C,S){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cu(S)})})).apply(this,arguments)}function Xa(C){const S={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function cf(C,S){if(!S.notification)return;C.notification={};const k=S.notification.title;k&&(C.notification.title=k);const j=S.notification.body;j&&(C.notification.body=j);const X=S.notification.image;X&&(C.notification.image=X);const te=S.notification.icon;te&&(C.notification.icon=te)}(S,C),function zs(C,S){S.data&&(C.data=S.data)}(S,C),function xo(C,S){var k,j,X,te,ye;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;C.fcmOptions={};const st=null!==(X=null===(j=S.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(te=S.notification)||void 0===te?void 0:te.click_action;st&&(C.fcmOptions.link=st);const Je=null===(ye=S.fcmOptions)||void 0===ye?void 0:ye.analytics_label;Je&&(C.fcmOptions.analyticsLabel=Je)}(S,C),S}function df(C,S){const k=[];for(let j=0;j<C.length;j++)k.push(C.charAt(j)),j<S.length&&k.push(S.charAt(j));return k.join("")}function es(C){return Yi.create("missing-app-config-values",{valueName:C})}df("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),df("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hf{constructor(S,k,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function uf(C){if(!C||!C.options)throw es("App Configuration Object");if(!C.name)throw es("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=C;for(const j of S)if(!k[j])throw es(j);return{appName:C.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:k,analyticsProvider:j}}_delete(){return Promise.resolve()}}function qc(){return(qc=(0,F.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(au,{scope:rf}),C.swRegistration.update().catch(()=>{})}catch(S){throw Yi.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function Eo(){return(Eo=(0,F.Z)(function*(C,S){if(!S&&!C.swRegistration&&(yield function vu(C){return qc.apply(this,arguments)}(C)),S||!C.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Yi.create("invalid-sw-registration");C.swRegistration=S}})).apply(this,arguments)}function Ut(){return(Ut=(0,F.Z)(function*(C,S){S?C.vapidKey=S:C.vapidKey||(C.vapidKey=Vc)})).apply(this,arguments)}function ff(){return ff=(0,F.Z)(function*(C,S){if(!navigator)throw Yi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yi.create("permission-blocked");return yield function Kc(C,S){return Ut.apply(this,arguments)}(C,S?.vapidKey),yield function Ja(C,S){return Eo.apply(this,arguments)}(C,S?.serviceWorkerRegistration),function pu(C){return lf.apply(this,arguments)}(C)}),ff.apply(this,arguments)}function wu(){return(wu=(0,F.Z)(function*(C,S,k){const j=function Rp(C){switch(C){case Vs.NOTIFICATION_CLICKED:return"notification_open";case Vs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:k[Dp],message_name:k[fi],message_time:k[o0],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Co(){return Co=(0,F.Z)(function*(C,S){const k=S.data;if(!k.isFirebaseMessaging)return;C.onMessageHandler&&k.messageType===Vs.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Xa(k)):C.onMessageHandler.next(Xa(k)));const j=k.data;(function kp(C){return"object"==typeof C&&!!C&&Dp in C})(j)&&"1"===j["google.c.a.e"]&&(yield function K_(C,S,k){return wu.apply(this,arguments)}(C,k.messageType,j))}),Co.apply(this,arguments)}const Yc="@firebase/messaging",Pp=C=>{const S=new hf(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function zl(C,S){return Co.apply(this,arguments)}(S,k)),S},mf=C=>{const S=C.getProvider("messaging").getImmediate();return{getToken:j=>function bu(C,S){return ff.apply(this,arguments)}(S,j)}};function Oe(){return fn.apply(this,arguments)}function fn(){return(fn=(0,F.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Op(){(0,ne._registerComponent)(new ue.wA("messaging",Pp,"PUBLIC")),(0,ne._registerComponent)(new ue.wA("messaging-internal",mf,"PRIVATE")),(0,ne.registerVersion)(Yc,"0.12.4"),(0,ne.registerVersion)(Yc,"0.12.4","esm2017")}();const Eu="analytics",pf="firebase_id",gf="origin",cr=6e4,ts="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xc="https://www.googletagmanager.com/gtag/js",Xn=new Ie.Yd("@firebase/analytics"),Li=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Jc(C){if(!C.startsWith(Xc)){const S=Li.create("invalid-gtag-resource",{gtagURL:C});return Xn.warn(S.message),""}return C}function $l(C){return Promise.all(C.map(S=>S.catch(k=>k)))}function js(){return(js=(0,F.Z)(function*(C,S,k,j,X,te){const ye=j[X];try{if(ye)yield S[ye];else{const Je=(yield $l(k)).find(bt=>bt.measurementId===X);Je&&(yield S[Je.appId])}}catch(st){Xn.error(st)}C("config",X,te)})).apply(this,arguments)}function el(){return(el=(0,F.Z)(function*(C,S,k,j,X){try{let te=[];if(X&&X.send_to){let ye=X.send_to;Array.isArray(ye)||(ye=[ye]);const st=yield $l(k);for(const Je of ye){const bt=st.find(Bt=>Bt.measurementId===Je),jt=bt&&S[bt.appId];if(!jt){te=[];break}te.push(jt)}}0===te.length&&(te=Object.values(S)),yield Promise.all(te),C("event",j,X||{})}catch(te){Xn.error(te)}})).apply(this,arguments)}const Y_=30,bf=new class vf{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Z_(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Gs(){return(Gs=(0,F.Z)(function*(C){var S;const{appId:k,apiKey:j}=C,X={method:"GET",headers:Z_(j)},te=ts.replace("{app-id}",k),ye=yield fetch(te,X);if(200!==ye.status&&304!==ye.status){let st="";try{const Je=yield ye.json();null!==(S=Je.error)&&void 0!==S&&S.message&&(st=Je.error.message)}catch{}throw Li.create("config-fetch-failed",{httpStatus:ye.status,responseMessage:st})}return ye.json()})).apply(this,arguments)}function Du(){return(Du=(0,F.Z)(function*(C,S=bf,k){const{appId:j,apiKey:X,measurementId:te}=C.options;if(!j)throw Li.create("no-app-id");if(!X){if(te)return{measurementId:te,appId:j};throw Li.create("no-api-key")}const ye=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},st=new Su;return setTimeout((0,F.Z)(function*(){st.abort()}),void 0!==k?k:cr),Lp({appId:j,apiKey:X,measurementId:te},ye,st,S)})).apply(this,arguments)}function Lp(C,S,k){return tl.apply(this,arguments)}function tl(){return tl=(0,F.Z)(function*(C,{throttleEndTimeMillis:S,backoffCount:k},j,X=bf){var te;const{appId:ye,measurementId:st}=C;try{yield function Iu(C,S){return new Promise((k,j)=>{const X=Math.max(S-Date.now(),0),te=setTimeout(k,X);C.addEventListener(()=>{clearTimeout(te),j(Li.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(j,S)}catch(Je){if(st)return Xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${Je?.message}]`),{appId:ye,measurementId:st};throw Je}try{const Je=yield function Wr(C){return Gs.apply(this,arguments)}(C);return X.deleteThrottleMetadata(ye),Je}catch(Je){const bt=Je;if(!function Tu(C){if(!(C instanceof ce.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(bt)){if(X.deleteThrottleMetadata(ye),st)return Xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:ye,measurementId:st};throw Je}const jt=503===Number(null===(te=bt?.customData)||void 0===te?void 0:te.httpStatus)?(0,ce.$s)(k,X.intervalMillis,Y_):(0,ce.$s)(k,X.intervalMillis),Bt={throttleEndTimeMillis:Date.now()+jt,backoffCount:k+1};return X.setThrottleMetadata(ye,Bt),Xn.debug(`Calling attemptFetch again in ${jt} millis`),Lp(C,Bt,j,X)}}),tl.apply(this,arguments)}class Su{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Wl,il;function wf(){return(wf=(0,F.Z)(function*(C,S,k,j,X){if(X&&X.global)C("event",k,j);else{const te=yield S;C("event",k,Object.assign(Object.assign({},j),{send_to:te}))}})).apply(this,arguments)}function Kl(){return(Kl=(0,F.Z)(function*(){if(!(0,ce.hl)())return Xn.warn(Li.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(C){return Xn.warn(Li.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function ya(){return ya=(0,F.Z)(function*(C,S,k,j,X,te,ye){var st;const Je=function jn(C){return Du.apply(this,arguments)}(C);Je.then(Xi=>{k[Xi.measurementId]=Xi.appId,C.options.measurementId&&Xi.measurementId!==C.options.measurementId&&Xn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Xi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xi=>Xn.error(Xi)),S.push(Je);const bt=function Up(){return Kl.apply(this,arguments)}().then(Xi=>{if(Xi)return j.getId()}),[jt,Bt]=yield Promise.all([Je,bt]);(function Cu(C){const S=window.document.getElementsByTagName("script");for(const k of Object.values(S))if(k.src&&k.src.includes(Xc)&&k.src.includes(C))return k;return null})(te)||function _f(C,S){const k=function ed(C,S){let k;return window.trustedTypes&&(k=window.trustedTypes.createPolicy(C,S)),k}("firebase-js-sdk-policy",{createScriptURL:Jc}),j=document.createElement("script"),X=`${Xc}?l=${C}&id=${S}`;j.src=k?k?.createScriptURL(X):X,j.async=!0,document.head.appendChild(j)}(te,jt.measurementId),il&&(X("consent","default",il),function _a(C){il=C}(void 0)),X("js",new Date);const Vi=null!==(st=ye?.config)&&void 0!==st?st:{};return Vi[gf]="firebase",Vi.update=!0,null!=Bt&&(Vi[pf]=Bt),X("config",jt.measurementId,Vi),Wl&&(X("set",Wl),function ku(C){Wl=C}(void 0)),jt.measurementId}),ya.apply(this,arguments)}class Ru{constructor(S){this.app=S}_delete(){return delete Do[this.app.options.appId],Promise.resolve()}}let Do={},xf=[];const sd={};let Ui,Ht,va="dataLayer",mt=!1;function ba(C,S,k){!function rn(){const C=[];if((0,ce.ru)()&&C.push("This is a browser extension environment."),(0,ce.zI)()||C.push("Cookies are not available."),C.length>0){const S=C.map((j,X)=>`(${X+1}) ${j}`).join(" "),k=Li.create("invalid-analytics-context",{errorInfo:S});Xn.warn(k.message)}}();const j=C.options.appId;if(!j)throw Li.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Li.create("no-api-key");Xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Do[j])throw Li.create("already-exists",{id:j});if(!mt){!function Gl(C){let S=[];Array.isArray(window[C])?S=window[C]:window[C]=S}(va);const{wrappedGtag:te,gtagCore:ye}=function id(C,S,k,j,X){let te=function(...ye){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(te=window[X]),window[X]=function nd(C,S,k,j){function te(){return te=(0,F.Z)(function*(ye,...st){try{if("event"===ye){const[Je,bt]=st;yield function $s(C,S,k,j,X){return el.apply(this,arguments)}(C,S,k,Je,bt)}else if("config"===ye){const[Je,bt]=st;yield function td(C,S,k,j,X,te){return js.apply(this,arguments)}(C,S,k,j,Je,bt)}else if("consent"===ye){const[Je]=st;C("consent","update",Je)}else if("get"===ye){const[Je,bt,jt]=st;C("get",Je,bt,jt)}else if("set"===ye){const[Je]=st;C("set",Je)}else C(ye,...st)}catch(Je){Xn.error(Je)}}),te.apply(this,arguments)}return function X(ye){return te.apply(this,arguments)}}(te,C,S,k),{gtagCore:te,wrappedGtag:window[X]}}(Do,xf,sd,va,"gtag");Ht=te,Ui=ye,mt=!0}return Do[j]=function Q_(C,S,k,j,X,te,ye){return ya.apply(this,arguments)}(C,xf,sd,S,Ui,va,k),new Ru(C)}function _t(){return bs.apply(this,arguments)}function bs(){return(bs=(0,F.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const Nr="@firebase/analytics";!function Zl(){(0,ne._registerComponent)(new ue.wA(Eu,(S,{options:k})=>ba(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ne._registerComponent)(new ue.wA("analytics-internal",function C(S){try{const k=S.getProvider(Eu).getImmediate();return{logEvent:(j,X,te)=>function Cn(C,S,k,j){C=(0,ce.m9)(C),function ga(C,S,k,j,X){return wf.apply(this,arguments)}(Ht,Do[C.app.options.appId],S,k,j).catch(X=>Xn.error(X))}(k,j,X,te)}}catch(k){throw Li.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ne.registerVersion)(Nr,"0.10.0"),(0,ne.registerVersion)(Nr,"0.10.0","esm2017")}();var sl=H(1954),Ho=H(2631);const Df=new class qr extends Ho.v{}(class Ql extends sl.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,k,j):(S.flush(this),0)}});var xe=H(6321),$n=H(5592),Qi=H(9397),V=H(3093),Kr=H(5137);const wa=new d.GfV("7.6.1"),ws="__angularfire_symbol__analyticsIsSupportedValue",Ou="__angularfire_symbol__analyticsIsSupported",Gn="__angularfire_symbol__remoteConfigIsSupportedValue",Nu="__angularfire_symbol__remoteConfigIsSupported",Jl="__angularfire_symbol__messagingIsSupportedValue",ec="__angularfire_symbol__messagingIsSupported";function If(C,S,k){if(S){if(1===S.length)return S[0];const te=S.filter(ye=>ye.app===k);if(1===te.length)return te[0]}return k.container.getProvider(C).getImmediate({optional:!0})}globalThis[Ou]||(globalThis[Ou]=_t().then(C=>globalThis[ws]=C).catch(()=>globalThis[ws]=!1)),globalThis[ec]||(globalThis[ec]=Oe().then(C=>globalThis[Jl]=C).catch(()=>globalThis[Jl]=!1)),globalThis[Nu]||(globalThis[Nu]=qa().then(C=>globalThis[Gn]=C).catch(()=>globalThis[Gn]=!1));const X_=(C,S)=>{const k=S?[S]:(0,W.C6)(),j=[];return k.forEach(X=>{X.container.getProvider(C).instances.forEach(ye=>{j.includes(ye)||j.push(ye)})}),j};function ei(){}class Fu{constructor(S,k=Df){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,j){const X=this.zone;return this.delegate.schedule(function(ye){X.runGuarded(()=>{S.apply(this,[ye])})},k,j)}}class Ti{constructor(S){this.zone=S,this.task=null}call(S,k){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ei,{},ei,ei)),k.pipe((0,Qi.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xa=(()=>{class C{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Fu(Zone.current)),this.insideAngular=k.run(()=>new Fu(Zone.current,xe.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(k){return new(k||C)(d.LFG(d.R0b))},C.\u0275prov=d.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Ri(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function zo(C){return Ri().ngZone.run(()=>C())}function Ca(C){return C.pipe((0,V.Q)(Ri().outsideAngular))}function Tf(C){return Ri(),function J_(C){return function(k){return(k=k.lift(new Ti(C.ngZone))).pipe((0,Kr.R)(C.outsideAngular),(0,V.Q)(C.insideAngular))}}(Ri())(C)}const Sf=(C,S)=>function(){const j=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),zo(()=>C.apply(void 0,j))},Af=(C,S)=>function(){let k;const j=arguments;for(let te=0;te<arguments.length;te++)"function"==typeof j[te]&&(S&&(k||(k=zo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ei,{},ei,ei)))),j[te]=Sf(j[te],k));const X=function Ea(C){return Ri().ngZone.runOutsideAngular(()=>C())}(()=>C.apply(this,j));if(!S){if(X instanceof $n.y){const te=Ri();return X.pipe((0,Kr.R)(te.outsideAngular),(0,V.Q)(te.insideAngular))}return zo(()=>X)}return X instanceof $n.y?X.pipe(Tf):X instanceof Promise?zo(()=>new Promise((te,ye)=>X.then(st=>zo(()=>te(st)),st=>zo(()=>ye(st))))):"function"==typeof X&&k?function(){return setTimeout(()=>{k&&"scheduled"===k.state&&k.invoke()},10),X.apply(this,arguments)}:zo(()=>X)}},6878:(wt,Me,H)=>{H.d(Me,{$:()=>au,A:()=>Z,D:()=>Le,I:()=>Zh,J:()=>kl,L:()=>Ft,N:()=>Mr,P:()=>Q_,Q:()=>xp,R:()=>Au,U:()=>ha,V:()=>qa,W:()=>Ka,X:()=>io,Y:()=>Er,Z:()=>tu,_:()=>Xh,a:()=>Fi,a0:()=>Vc,a1:()=>Dp,a2:()=>W_,a3:()=>Ip,a4:()=>Hc,a5:()=>zc,a6:()=>ro,a7:()=>jc,a8:()=>ma,a9:()=>Sp,aA:()=>re,aB:()=>Ou,aC:()=>ki,aD:()=>dn,aE:()=>Qi,aF:()=>Ii,aG:()=>Zi,aH:()=>Ci,aL:()=>Or,aO:()=>Ll,aa:()=>sf,ab:()=>af,ac:()=>uu,ad:()=>q_,ae:()=>Ap,af:()=>Gc,ai:()=>Mp,aj:()=>lf,ak:()=>gu,an:()=>G_,ao:()=>cf,aq:()=>Ut,ar:()=>Yc,as:()=>Ze,at:()=>Tt,au:()=>Ee,av:()=>se,aw:()=>Bt,ax:()=>ec,ay:()=>Et,az:()=>Se,b:()=>xu,c:()=>Ht,d:()=>ba,e:()=>Bi,f:()=>Nr,g:()=>qr,h:()=>sl,i:()=>yf,j:()=>xe,k:()=>jo,l:()=>vs,m:()=>ll,p:()=>Pe,r:()=>Mu,s:()=>qt,u:()=>Up});var d=H(5861),W=H(9058),F=H(534),ne=H(7582),ce=H(7879),ue=H(4537);const Pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Le=function ae(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},nt=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),He=new ce.Yd("@firebase/auth");function yt(x,..._){He.logLevel<=ce.in.ERROR&&He.error(`Auth (${F.SDK_VERSION}): ${x}`,..._)}function se(x,..._){throw Ve(x,..._)}function Se(x,..._){return Ve(x,..._)}function de(x,_,v){const D=Object.assign(Object.assign({},nt()),{[_]:v});return new W.LL("auth","Firebase",D).create(_,{appName:x.name})}function be(x,_,v){if(!(_ instanceof v))throw v.name!==_.constructor.name&&se(x,"argument-error"),de(x,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(x,..._){if("string"!=typeof x){const v=_[0],D=[..._.slice(1)];return D[0]&&(D[0].appName=x.name),x._errorFactory.create(v,...D)}return Ue.create(x,..._)}function re(x,_,...v){if(!x)throw Ve(_,...v)}function ct(x){const _="INTERNAL ASSERTION FAILED: "+x;throw yt(_),new Error(_)}function Ze(x,_){x||ct(_)}function un(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.href)||""}function Oi(){return"http:"===Sr()||"https:"===Sr()}function Sr(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.protocol)||null}class De{constructor(_,v){this.shortDelay=_,this.longDelay=v,Ze(v>_,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function ps(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Oi()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Re(x,_){Ze(x.emulator,"Emulator should always be set here");const{url:v}=x.emulator;return _?`${v}${_.startsWith("/")?_.slice(1):_}`:v}class ze{static initialize(_,v,D){this.fetchImpl=_,v&&(this.headersImpl=v),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ke=new De(3e4,6e4);function at(x,_){return x.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:x.tenantId}):_}function pt(x,_,v,D){return qn.apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(x,_,v,D,R={}){return ut(x,R,(0,d.Z)(function*(){let L={},ee={};D&&("GET"===_?ee=D:L={body:JSON.stringify(D)});const _e=(0,W.xO)(Object.assign({key:x.config.apiKey},ee)).slice(1),Ye=yield x._getAdditionalHeaders();return Ye["Content-Type"]="application/json",x.languageCode&&(Ye["X-Firebase-Locale"]=x.languageCode),ze.fetch()(ti(x,x.config.apiHost,v,_e),Object.assign({method:_,headers:Ye,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function ut(x,_,v){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(x,_,v){x._canInitEmulator=!1;const D=Object.assign(Object.assign({},Qe),_);try{const R=new hn(x),L=yield Promise.race([v(),R.promise]);R.clearNetworkTimeout();const ee=yield L.json();if("needConfirmation"in ee)throw Ni(x,"account-exists-with-different-credential",ee);if(L.ok&&!("errorMessage"in ee))return ee;{const _e=L.ok?ee.errorMessage:ee.error.message,[Ye,lt]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw Ni(x,"credential-already-in-use",ee);if("EMAIL_EXISTS"===Ye)throw Ni(x,"email-already-in-use",ee);if("USER_DISABLED"===Ye)throw Ni(x,"user-disabled",ee);const Rt=D[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(lt)throw de(x,Rt,lt);se(x,Rt)}}catch(R){if(R instanceof W.ZR)throw R;se(x,"network-request-failed",{message:String(R)})}})).apply(this,arguments)}function gn(x,_,v,D){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,d.Z)(function*(x,_,v,D,R={}){const L=yield pt(x,_,v,D,R);return"mfaPendingCredential"in L&&se(x,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function ti(x,_,v,D){const R=`${_}${v}?${D}`;return x.config.emulator?Re(x.config,R):`${x.config.apiScheme}://${R}`}class hn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((v,D)=>{this.timer=setTimeout(()=>D(Se(this.auth,"network-request-failed")),Ke.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ni(x,_,v){const D={appName:x.name};v.email&&(D.email=v.email),v.phoneNumber&&(D.phoneNumber=v.phoneNumber);const R=Se(x,_,D);return R.customData._tokenResponse=v,R}function wi(){return(wi=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function rr(x){if(x)try{const _=new Date(Number(x));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function Zo(){return(Zo=(0,d.Z)(function*(x,_=!1){const v=(0,W.m9)(x),D=yield v.getIdToken(_),R=xt(D);re(R&&R.exp&&R.auth_time&&R.iat,v.auth,"internal-error");const L="object"==typeof R.firebase?R.firebase:void 0,ee=L?.sign_in_provider;return{claims:R,token:D,authTime:rr(rt(R.auth_time)),issuedAtTime:rr(rt(R.iat)),expirationTime:rr(rt(R.exp)),signInProvider:ee||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function rt(x){return 1e3*Number(x)}function xt(x){const[_,v,D]=x.split(".");if(void 0===_||void 0===v||void 0===D)return yt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,W.tV)(v);return R?JSON.parse(R):(yt("Failed to decode base64 JWT payload"),null)}catch(R){return yt("Caught error parsing JWT payload as JSON",R?.toString()),null}}function cn(x,_){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,d.Z)(function*(x,_,v=!1){if(v)return _;try{return yield _}catch(D){throw D instanceof W.ZR&&function jr({code:x}){return"auth/user-disabled"===x||"auth/user-token-expired"===x}(D)&&x.auth.currentUser===x&&(yield x.auth.signOut()),D}})).apply(this,arguments)}class on{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var v;if(_){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const R=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(_=!1){var v=this;if(!this.isRunning)return;const D=this.getInterval(_);this.timerId=setTimeout((0,d.Z)(function*(){yield v.iteration()}),D)}iteration(){var _=this;return(0,d.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&_.schedule(!0))}_.schedule()})()}}class xi{constructor(_,v){this.createdAt=_,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=rr(this.lastLoginAt),this.creationTime=rr(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fo(x){return Dn.apply(this,arguments)}function Dn(){return Dn=(0,d.Z)(function*(x){var _;const v=x.auth,D=yield x.getIdToken(),R=yield cn(x,function oa(x,_){return vo.apply(this,arguments)}(v,{idToken:D}));re(R?.users.length,v,"internal-error");const L=R.users[0];x._notifyReloadListener(L);const ee=null!==(_=L.providerUserInfo)&&void 0!==_&&_.length?function bo(x){return x.map(_=>{var{providerId:v}=_,D=(0,ne._T)(_,["providerId"]);return{providerId:v,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}(L.providerUserInfo):[],_e=function Kn(x,_){return[...x.filter(D=>!_.some(R=>R.providerId===D.providerId)),..._]}(x.providerData,ee),Rt=!!x.isAnonymous&&!(x.email&&L.passwordHash||_e?.length),bn={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:_e,metadata:new xi(L.createdAt,L.lastLoginAt),isAnonymous:Rt};Object.assign(x,bn)}),Dn.apply(this,arguments)}function Gt(){return(Gt=(0,d.Z)(function*(x){const _=(0,W.m9)(x);yield Fo(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(x,_){const v=yield ut(x,{},(0,d.Z)(function*(){const D=(0,W.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:R,apiKey:L}=x.config,ee=ti(x,R,"/v1/token",`key=${L}`),_e=yield x._getAdditionalHeaders();return _e["Content-Type"]="application/x-www-form-urlencoded",ze.fetch()(ee,{method:"POST",headers:_e,body:D})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){re(_.idToken,"internal-error"),re(typeof _.idToken<"u","internal-error"),re(typeof _.refreshToken<"u","internal-error");const v="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function At(x){const _=xt(x);return re(_,"internal-error"),re(typeof _.exp<"u","internal-error"),re(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,v)}getToken(_,v=!1){var D=this;return(0,d.Z)(function*(){return re(!D.accessToken||D.refreshToken,_,"user-token-expired"),v||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(_,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,v){var D=this;return(0,d.Z)(function*(){const{accessToken:R,refreshToken:L,expiresIn:ee}=yield function Qo(x,_){return or.apply(this,arguments)}(_,v);D.updateTokensAndExpiration(R,L,Number(ee))})()}updateTokensAndExpiration(_,v,D){this.refreshToken=v||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(_,v){const{refreshToken:D,accessToken:R,expirationTime:L}=v,ee=new ui;return D&&(re("string"==typeof D,"internal-error",{appName:_}),ee.refreshToken=D),R&&(re("string"==typeof R,"internal-error",{appName:_}),ee.accessToken=R),L&&(re("number"==typeof L,"internal-error",{appName:_}),ee.expirationTime=L),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new ui,this.toJSON())}_performRefresh(){return ct("not implemented")}}function Bn(x,_){re("string"==typeof x||typeof x>"u","internal-error",{appName:_})}class Ei{constructor(_){var{uid:v,auth:D,stsTokenManager:R}=_,L=(0,ne._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new on(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=D,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new xi(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(_){var v=this;return(0,d.Z)(function*(){const D=yield cn(v,v.stsTokenManager.getToken(v.auth,_));return re(D,v.auth,"internal-error"),v.accessToken!==D&&(v.accessToken=D,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),D})()}getIdTokenResult(_){return function Ar(x){return Zo.apply(this,arguments)}(this,_)}reload(){return function vr(x){return Gt.apply(this,arguments)}(this)}_assign(_){this!==_&&(re(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(v=>Object.assign({},v)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const v=new Ei(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(_){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,v=!1){var D=this;return(0,d.Z)(function*(){let R=!1;_.idToken&&_.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(_),R=!0),v&&(yield Fo(D)),yield D.auth._persistUserIfCurrent(D),R&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var _=this;return(0,d.Z)(function*(){const v=yield _.getIdToken();return yield cn(_,function Ai(x,_){return wi.apply(this,arguments)}(_.auth,{idToken:v})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,v){var D,R,L,ee,_e,Ye,lt,Rt;const bn=null!==(D=v.displayName)&&void 0!==D?D:void 0,dr=null!==(R=v.email)&&void 0!==R?R:void 0,cl=null!==(L=v.phoneNumber)&&void 0!==L?L:void 0,Of=null!==(ee=v.photoURL)&&void 0!==ee?ee:void 0,Hp=null!==(_e=v.tenantId)&&void 0!==_e?_e:void 0,iy=null!==(Ye=v._redirectEventId)&&void 0!==Ye?Ye:void 0,c0=null!==(lt=v.createdAt)&&void 0!==lt?lt:void 0,ry=null!==(Rt=v.lastLoginAt)&&void 0!==Rt?Rt:void 0,{uid:ic,emailVerified:Bu,isAnonymous:Nf,providerData:Vu,stsTokenManager:Ff}=v;re(ic&&Ff,_,"internal-error");const Hu=ui.fromJSON(this.name,Ff);re("string"==typeof ic,_,"internal-error"),Bn(bn,_.name),Bn(dr,_.name),re("boolean"==typeof Bu,_,"internal-error"),re("boolean"==typeof Nf,_,"internal-error"),Bn(cl,_.name),Bn(Of,_.name),Bn(Hp,_.name),Bn(iy,_.name),Bn(c0,_.name),Bn(ry,_.name);const Lf=new Ei({uid:ic,auth:_,email:dr,emailVerified:Bu,displayName:bn,isAnonymous:Nf,photoURL:Of,phoneNumber:cl,tenantId:Hp,stsTokenManager:Hu,createdAt:c0,lastLoginAt:ry});return Vu&&Array.isArray(Vu)&&(Lf.providerData=Vu.map(d0=>Object.assign({},d0))),iy&&(Lf._redirectEventId=iy),Lf}static _fromIdTokenResponse(_,v,D=!1){return(0,d.Z)(function*(){const R=new ui;R.updateFromServerResponse(v);const L=new Ei({uid:v.localId,auth:_,stsTokenManager:R,isAnonymous:D});return yield Fo(L),L})()}}const Yn=new Map;function ki(x){Ze(x instanceof Function,"Expected a class definition");let _=Yn.get(x);return _?(Ze(_ instanceof x,"Instance stored in cache mismatched with class"),_):(_=new x,Yn.set(x,_),_)}const Mr=(()=>{class x{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(v,D){var R=this;return(0,d.Z)(function*(){R.storage[v]=D})()}_get(v){var D=this;return(0,d.Z)(function*(){const R=D.storage[v];return void 0===R?null:R})()}_remove(v){var D=this;return(0,d.Z)(function*(){delete D.storage[v]})()}_addListener(v,D){}_removeListener(v,D){}}return x.type="NONE",x})();function dn(x,_,v){return`firebase:${x}:${_}:${v}`}class Y{constructor(_,v,D){this.persistence=_,this.auth=v,this.userKey=D;const{config:R,name:L}=this.auth;this.fullUserKey=dn(this.userKey,R.apiKey,L),this.fullPersistenceKey=dn("persistence",R.apiKey,L),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,d.Z)(function*(){const v=yield _.persistence._get(_.fullUserKey);return v?Ei._fromJSON(_.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var v=this;return(0,d.Z)(function*(){if(v.persistence===_)return;const D=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=_,D?v.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,v,D="authUser"){return(0,d.Z)(function*(){if(!v.length)return new Y(ki(Mr),_,D);const R=(yield Promise.all(v.map(function(){var lt=(0,d.Z)(function*(Rt){if(yield Rt._isAvailable())return Rt});return function(Rt){return lt.apply(this,arguments)}}()))).filter(lt=>lt);let L=R[0]||ki(Mr);const ee=dn(D,_.config.apiKey,_.name);let _e=null;for(const lt of v)try{const Rt=yield lt._get(ee);if(Rt){const bn=Ei._fromJSON(_,Rt);lt!==L&&(_e=bn),L=lt;break}}catch{}const Ye=R.filter(lt=>lt._shouldAllowMigration);return L._shouldAllowMigration&&Ye.length?(L=Ye[0],_e&&(yield L._set(ee,_e.toJSON())),yield Promise.all(v.map(function(){var lt=(0,d.Z)(function*(Rt){if(Rt!==L)try{yield Rt._remove(ee)}catch{}});return function(Rt){return lt.apply(this,arguments)}}())),new Y(L,_,D)):new Y(L,_,D)})()}}function q(x){const _=x.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(ie(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(B(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(tt(_))return"Blackberry";if(Mt(_))return"Webos";if(z(_))return"Safari";if((_.includes("chrome/")||N(_))&&!_.includes("edge/"))return"Chrome";if(Ee(_))return"Android";{const D=x.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function B(x=(0,W.z$)()){return/firefox\//i.test(x)}function z(x=(0,W.z$)()){const _=x.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function N(x=(0,W.z$)()){return/crios\//i.test(x)}function ie(x=(0,W.z$)()){return/iemobile/i.test(x)}function Ee(x=(0,W.z$)()){return/android/i.test(x)}function tt(x=(0,W.z$)()){return/blackberry/i.test(x)}function Mt(x=(0,W.z$)()){return/webos/i.test(x)}function Tt(x=(0,W.z$)()){return/iphone|ipad|ipod/i.test(x)||/macintosh/i.test(x)&&/mobile/i.test(x)}function Et(x=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(x)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(x)}function Yt(x=(0,W.z$)()){return Tt(x)||Ee(x)||Mt(x)||tt(x)||/windows phone/i.test(x)||ie(x)}function sr(x,_=[]){let v;switch(x){case"Browser":v=q((0,W.z$)());break;case"Worker":v=`${q((0,W.z$)())}-${x}`;break;default:v=x}const D=_.length?_.join(","):"FirebaseCore-web";return`${v}/JsCore/${F.SDK_VERSION}/${D}`}function le(){return(le=(0,d.Z)(function*(x){return(yield pt(x,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function We(x,_){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,d.Z)(function*(x,_){return pt(x,"GET","/v2/recaptchaConfig",at(x,_))})).apply(this,arguments)}function zt(x){return void 0!==x&&void 0!==x.getResponse}function tn(x){return void 0!==x&&void 0!==x.enterprise}class _n{constructor(_){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===_.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=_.recaptchaKey.split("/")[3],this.emailPasswordEnabled=_.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function hi(x){return new Promise((_,v)=>{const D=document.createElement("script");D.setAttribute("src",x),D.onload=_,D.onerror=R=>{const L=Se("internal-error");L.customData=R,v(L)},D.type="text/javascript",D.charset="UTF-8",function qi(){var x,_;return null!==(_=null===(x=document.getElementsByTagName("head"))||void 0===x?void 0:x[0])&&void 0!==_?_:document}().appendChild(D)})}function Ns(x){return`__${x}${Math.floor(1e6*Math.random())}`}class br{constructor(_){this.type="recaptcha-enterprise",this.auth=Ci(_)}verify(_="verify",v=!1){var D=this;return(0,d.Z)(function*(){function L(){return L=(0,d.Z)(function*(_e){if(!v){if(null==_e.tenantId&&null!=_e._agentRecaptchaConfig)return _e._agentRecaptchaConfig.siteKey;if(null!=_e.tenantId&&void 0!==_e._tenantRecaptchaConfigs[_e.tenantId])return _e._tenantRecaptchaConfigs[_e.tenantId].siteKey}return new Promise(function(){var Ye=(0,d.Z)(function*(lt,Rt){We(_e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(bn=>{if(void 0!==bn.recaptchaKey){const dr=new _n(bn);return null==_e.tenantId?_e._agentRecaptchaConfig=dr:_e._tenantRecaptchaConfigs[_e.tenantId]=dr,lt(dr.siteKey)}Rt(new Error("recaptcha Enterprise site key undefined"))}).catch(bn=>{Rt(bn)})});return function(lt,Rt){return Ye.apply(this,arguments)}}())}),L.apply(this,arguments)}function ee(_e,Ye,lt){const Rt=window.grecaptcha;tn(Rt)?Rt.enterprise.ready(()=>{Rt.enterprise.execute(_e,{action:_}).then(bn=>{Ye(bn)}).catch(()=>{Ye("NO_RECAPTCHA")})}):lt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((_e,Ye)=>{(function R(_e){return L.apply(this,arguments)})(D.auth).then(lt=>{if(!v&&tn(window.grecaptcha))ee(lt,_e,Ye);else{if(typeof window>"u")return void Ye(new Error("RecaptchaVerifier is only supported in browser"));hi("https://www.google.com/recaptcha/enterprise.js?render="+lt).then(()=>{ee(lt,_e,Ye)}).catch(Rt=>{Ye(Rt)})}}).catch(lt=>{Ye(lt)})})})()}}function Fs(x,_,v){return sa.apply(this,arguments)}function sa(){return(sa=(0,d.Z)(function*(x,_,v,D=!1){const R=new br(x);let L;try{L=yield R.verify(v)}catch{L=yield R.verify(v,!0)}const ee=Object.assign({},_);return Object.assign(ee,D?{captchaResp:L}:{captchaResponse:L}),Object.assign(ee,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ee,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ee})).apply(this,arguments)}class vp{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,v){const D=L=>new Promise((ee,_e)=>{try{ee(_(L))}catch(Ye){_e(Ye)}});D.onAbort=v,this.queue.push(D);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(_){var v=this;return(0,d.Z)(function*(){if(v.auth.currentUser===_)return;const D=[];try{for(const R of v.queue)yield R(_),R.onAbort&&D.push(R.onAbort)}catch(R){D.reverse();for(const L of D)try{L()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:R?.message})}})()}}class gs{constructor(_,v,D,R){this.app=_,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=D,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j_(this),this.idTokenSubscription=new j_(this),this.beforeStateQueue=new vp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(_,v){var D=this;return v&&(this._popupRedirectResolver=ki(v)),this._initializationPromise=this.queue((0,d.Z)(function*(){var R,L;if(!D._deleted&&(D.persistenceManager=yield Y.create(D,_),!D._deleted)){if(null!==(R=D._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(v),D.lastNotifiedUid=(null===(L=D.currentUser)||void 0===L?void 0:L.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,d.Z)(function*(){if(_._deleted)return;const v=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||v){if(_.currentUser&&v&&_.currentUser.uid===v.uid)return _._currentUser._assign(v),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(v,!0)}})()}initializeCurrentUser(_){var v=this;return(0,d.Z)(function*(){var D;const R=yield v.assertedPersistence.getCurrentUser();let L=R,ee=!1;if(_&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const _e=null===(D=v.redirectUser)||void 0===D?void 0:D._redirectEventId,Ye=L?._redirectEventId,lt=yield v.tryRedirectSignIn(_);(!_e||_e===Ye)&&lt?.user&&(L=lt.user,ee=!0)}if(!L)return v.directlySetCurrentUser(null);if(!L._redirectEventId){if(ee)try{yield v.beforeStateQueue.runMiddleware(L)}catch(_e){L=R,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(_e))}return L?v.reloadAndSetCurrentUserOrClear(L):v.directlySetCurrentUser(null)}return re(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===L._redirectEventId?v.directlySetCurrentUser(L):v.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(_){var v=this;return(0,d.Z)(function*(){let D=null;try{D=yield v._popupRedirectResolver._completeRedirectFn(v,_,!0)}catch{yield v._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(_){var v=this;return(0,d.Z)(function*(){try{yield Fo(_)}catch(D){if("auth/network-request-failed"!==D?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function pe(){if(typeof navigator>"u")return null;const x=navigator;return x.languages&&x.languages[0]||x.language||null}()}_delete(){var _=this;return(0,d.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var v=this;return(0,d.Z)(function*(){const D=_?(0,W.m9)(_):null;return D&&re(D.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(D&&D._clone(v))})()}_updateCurrentUser(_,v=!1){var D=this;return(0,d.Z)(function*(){if(!D._deleted)return _&&re(D.tenantId===_.tenantId,D,"tenant-id-mismatch"),v||(yield D.beforeStateQueue.runMiddleware(_)),D.queue((0,d.Z)(function*(){yield D.directlySetCurrentUser(_),D.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,d.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var v=this;return this.queue((0,d.Z)(function*(){yield v.assertedPersistence.setPersistence(ki(_))}))}initializeRecaptchaConfig(){var _=this;return(0,d.Z)(function*(){const v=yield We(_,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),D=new _n(v);null==_.tenantId?_._agentRecaptchaConfig=D:_._tenantRecaptchaConfigs[_.tenantId]=D,D.emailPasswordEnabled&&new br(_).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new W.LL("auth","Firebase",_())}onAuthStateChanged(_,v,D){return this.registerStateListener(this.authStateSubscription,_,v,D)}beforeAuthStateChanged(_,v){return this.beforeStateQueue.pushCallback(_,v)}onIdTokenChanged(_,v,D){return this.registerStateListener(this.idTokenSubscription,_,v,D)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,v){var D=this;return(0,d.Z)(function*(){const R=yield D.getOrInitRedirectPersistenceManager(v);return null===_?R.removeCurrentUser():R.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var v=this;return(0,d.Z)(function*(){if(!v.redirectPersistenceManager){const D=_&&ki(_)||v._popupRedirectResolver;re(D,v,"argument-error"),v.redirectPersistenceManager=yield Y.create(v,[ki(D._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(_){var v=this;return(0,d.Z)(function*(){var D,R;return v._isInitialized&&(yield v.queue((0,d.Z)(function*(){}))),(null===(D=v._currentUser)||void 0===D?void 0:D._redirectEventId)===_?v._currentUser:(null===(R=v.redirectUser)||void 0===R?void 0:R._redirectEventId)===_?v.redirectUser:null})()}_persistUserIfCurrent(_){var v=this;return(0,d.Z)(function*(){if(_===v.currentUser)return v.queue((0,d.Z)(function*(){return v.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(v=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,v,D,R){if(this._deleted)return()=>{};const L="function"==typeof v?v:v.next.bind(v),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return re(ee,this,"internal-error"),ee.then(()=>L(this.currentUser)),"function"==typeof v?_.addObserver(v,D,R):_.addObserver(v)}directlySetCurrentUser(_){var v=this;return(0,d.Z)(function*(){v.currentUser&&v.currentUser!==_&&v._currentUser._stopProactiveRefresh(),_&&v.isProactiveRefreshEnabled&&_._startProactiveRefresh(),v.currentUser=_,_?yield v.assertedPersistence.setCurrentUser(_):yield v.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=sr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,d.Z)(function*(){var v;const D={"X-Client-Version":_.clientVersion};_.app.options.appId&&(D["X-Firebase-gmpid"]=_.app.options.appId);const R=yield null===(v=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();R&&(D["X-Firebase-Client"]=R);const L=yield _._getAppCheckToken();return L&&(D["X-Firebase-AppCheck"]=L),D})()}_getAppCheckToken(){var _=this;return(0,d.Z)(function*(){var v;const D=yield null===(v=_.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return D?.error&&function kt(x,..._){He.logLevel<=ce.in.WARN&&He.warn(`Auth (${F.SDK_VERSION}): ${x}`,..._)}(`Error while retrieving App Check token: ${D.error}`),D?.token})()}}function Ci(x){return(0,W.m9)(x)}class j_{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,W.ne)(v=>this.observer=v)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zh(x,_,v){const D=Ci(x);re(D._canInitEmulator,D,"emulator-config-failed"),re(/^https?:\/\//.test(_),D,"invalid-emulator-scheme");const R=!!v?.disableWarnings,L=kc(_),{host:ee,port:_e}=function aa(x){const _=kc(x),v=/(\/\/)?([^?#/]+)/.exec(x.substr(_.length));if(!v)return{host:"",port:null};const D=v[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(D);if(R){const L=R[1];return{host:L,port:Rc(D.substr(L.length+1))}}{const[L,ee]=D.split(":");return{host:L,port:Rc(ee)}}}(_);D.config.emulator={url:`${L}//${ee}${null===_e?"":`:${_e}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:ee,port:_e,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function bp(){function x(){const _=document.createElement("p"),v=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",x):x())}()}function kc(x){const _=x.indexOf(":");return _<0?"":x.substr(0,_+1)}function Rc(x){if(!x)return null;const _=Number(x);return isNaN(_)?null:_}class kl{constructor(_,v){this.providerId=_,this.signInMethod=v}toJSON(){return ct("not implemented")}_getIdTokenResponse(_){return ct("not implemented")}_linkToIdToken(_,v){return ct("not implemented")}_getReauthenticationResolver(_){return ct("not implemented")}}function Rl(x,_){return eu.apply(this,arguments)}function eu(){return(eu=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:resetPassword",at(x,_))})).apply(this,arguments)}function Pl(x,_){return la.apply(this,arguments)}function la(){return(la=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:update",at(x,_))})).apply(this,arguments)}function Ki(x,_){return An.apply(this,arguments)}function An(){return(An=(0,d.Z)(function*(x,_){return gn(x,"POST","/v1/accounts:signInWithPassword",at(x,_))})).apply(this,arguments)}function _s(x,_){return kr.apply(this,arguments)}function kr(){return(kr=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:sendOobCode",at(x,_))})).apply(this,arguments)}function Ol(){return(Ol=(0,d.Z)(function*(x,_){return _s(x,_)})).apply(this,arguments)}function Ga(x,_){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,d.Z)(function*(x,_){return _s(x,_)})).apply(this,arguments)}function Qh(x,_){return Di.apply(this,arguments)}function Di(){return(Di=(0,d.Z)(function*(x,_){return _s(x,_)})).apply(this,arguments)}function Wt(){return(Wt=(0,d.Z)(function*(x,_){return _s(x,_)})).apply(this,arguments)}function Rr(){return(Rr=(0,d.Z)(function*(x,_){return gn(x,"POST","/v1/accounts:signInWithEmailLink",at(x,_))})).apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(x,_){return gn(x,"POST","/v1/accounts:signInWithEmailLink",at(x,_))})).apply(this,arguments)}class ys extends kl{constructor(_,v,D,R=null){super("password",D),this._email=_,this._password=v,this._tenantId=R}static _fromEmailAndPassword(_,v){return new ys(_,v,"password")}static _fromEmailAndCode(_,v,D=null){return new ys(_,v,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(_){var v=this;return(0,d.Z)(function*(){var D;switch(v.signInMethod){case"password":const R={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=_._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const L=yield Fs(_,R,"signInWithPassword");return Ki(_,L)}return Ki(_,R).catch(function(){var L=(0,d.Z)(function*(ee){if("auth/missing-recaptcha-token"===ee.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const _e=yield Fs(_,R,"signInWithPassword");return Ki(_,_e)}return Promise.reject(ee)});return function(ee){return L.apply(this,arguments)}}());case"emailLink":return function ni(x,_){return Rr.apply(this,arguments)}(_,{email:v._email,oobCode:v._password});default:se(_,"internal-error")}})()}_linkToIdToken(_,v){var D=this;return(0,d.Z)(function*(){switch(D.signInMethod){case"password":return Pl(_,{idToken:v,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Oc(x,_){return ar.apply(this,arguments)}(_,{idToken:v,email:D._email,oobCode:D._password});default:se(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Nn(x,_){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,d.Z)(function*(x,_){return gn(x,"POST","/v1/accounts:signInWithIdp",at(x,_))})).apply(this,arguments)}class Ft extends kl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const v=new Ft(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(v.idToken=_.idToken),_.accessToken&&(v.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(v.nonce=_.nonce),_.pendingToken&&(v.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(v.accessToken=_.oauthToken,v.secret=_.oauthTokenSecret):se("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:D,signInMethod:R}=v,L=(0,ne._T)(v,["providerId","signInMethod"]);if(!D||!R)return null;const ee=new Ft(D,R);return ee.idToken=L.idToken||void 0,ee.accessToken=L.accessToken||void 0,ee.secret=L.secret,ee.nonce=L.nonce,ee.pendingToken=L.pendingToken||null,ee}_getIdTokenResponse(_){return Nn(_,this.buildRequest())}_linkToIdToken(_,v){const D=this.buildRequest();return D.idToken=v,Nn(_,D)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Nn(_,v)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),_.postBody=(0,W.xO)(v)}return _}}function Nc(){return(Nc=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:sendVerificationCode",at(x,_))})).apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(x,_){return gn(x,"POST","/v1/accounts:signInWithPhoneNumber",at(x,_))})).apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(x,_){const v=yield gn(x,"POST","/v1/accounts:signInWithPhoneNumber",at(x,_));if(v.temporaryProof)throw Ni(x,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const $r={USER_NOT_FOUND:"user-not-found"};function Lc(){return(Lc=(0,d.Z)(function*(x,_){return gn(x,"POST","/v1/accounts:signInWithPhoneNumber",at(x,Object.assign(Object.assign({},_),{operation:"REAUTH"})),$r)})).apply(this,arguments)}class lr extends kl{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,v){return new lr({verificationId:_,verificationCode:v})}static _fromTokenResponse(_,v){return new lr({phoneNumber:_,temporaryProof:v})}_getIdTokenResponse(_){return function Ls(x,_){return Qn.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,v){return function Fc(x,_){return da.apply(this,arguments)}(_,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Wa(x,_){return Lc.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:v,verificationId:D,verificationCode:R}=this.params;return _&&v?{temporaryProof:_,phoneNumber:v}:{sessionInfo:D,code:R}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:v,verificationCode:D,phoneNumber:R,temporaryProof:L}=_;return D||v||R||L?new lr({verificationId:v,verificationCode:D,phoneNumber:R,temporaryProof:L}):null}}class Uo{constructor(_){var v,D,R,L,ee,_e;const Ye=(0,W.zd)((0,W.pd)(_)),lt=null!==(v=Ye.apiKey)&&void 0!==v?v:null,Rt=null!==(D=Ye.oobCode)&&void 0!==D?D:null,bn=function Pr(x){switch(x){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=Ye.mode)&&void 0!==R?R:null);re(lt&&Rt&&bn,"argument-error"),this.apiKey=lt,this.operation=bn,this.code=Rt,this.continueUrl=null!==(L=Ye.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(ee=Ye.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(_e=Ye.tenantId)&&void 0!==_e?_e:null}static parseLink(_){const v=function Uc(x){const _=(0,W.zd)((0,W.pd)(x)).link,v=_?(0,W.zd)((0,W.pd)(_)).deep_link_id:null,D=(0,W.zd)((0,W.pd)(x)).deep_link_id;return(D?(0,W.zd)((0,W.pd)(D)).link:null)||D||v||_||x}(_);try{return new Uo(v)}catch{return null}}}let xp=(()=>{class x{constructor(){this.providerId=x.PROVIDER_ID}static credential(v,D){return ys._fromEmailAndPassword(v,D)}static credentialWithLink(v,D){const R=Uo.parseLink(D);return re(R,"argument-error"),ys._fromEmailAndCode(v,R.code,R.tenantId)}}return x.PROVIDER_ID="password",x.EMAIL_PASSWORD_SIGN_IN_METHOD="password",x.EMAIL_LINK_SIGN_IN_METHOD="emailLink",x})();class Xo{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class ua extends Xo{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class io extends ua{static credentialFromJSON(_){const v="string"==typeof _?JSON.parse(_):_;return re("providerId"in v&&"signInMethod"in v,"argument-error"),Ft._fromParams(v)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return re(_.idToken||_.accessToken,"argument-error"),Ft._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return io.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return io.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:v,oauthAccessToken:D,oauthTokenSecret:R,pendingToken:L,nonce:ee,providerId:_e}=_;if(!D&&!R&&!v&&!L||!_e)return null;try{return new io(_e)._credential({idToken:v,accessToken:D,nonce:ee,pendingToken:L})}catch{return null}}}let ha=(()=>{class x extends ua{constructor(){super("facebook.com")}static credential(v){return Ft._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return x.credential(v.oauthAccessToken)}catch{return null}}}return x.FACEBOOK_SIGN_IN_METHOD="facebook.com",x.PROVIDER_ID="facebook.com",x})(),qa=(()=>{class x extends ua{constructor(){super("google.com"),this.addScope("profile")}static credential(v,D){return Ft._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:D})}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:D,oauthAccessToken:R}=v;if(!D&&!R)return null;try{return x.credential(D,R)}catch{return null}}}return x.GOOGLE_SIGN_IN_METHOD="google.com",x.PROVIDER_ID="google.com",x})(),Ka=(()=>{class x extends ua{constructor(){super("github.com")}static credential(v){return Ft._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return x.credential(v.oauthAccessToken)}catch{return null}}}return x.GITHUB_SIGN_IN_METHOD="github.com",x.PROVIDER_ID="github.com",x})();class Ll extends kl{constructor(_,v){super(_,_),this.pendingToken=v}_getIdTokenResponse(_){return Nn(_,this.buildRequest())}_linkToIdToken(_,v){const D=this.buildRequest();return D.idToken=v,Nn(_,D)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Nn(_,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:D,signInMethod:R,pendingToken:L}=v;return D&&R&&L&&D===R?new Ll(D,L):null}static _create(_,v){return new Ll(_,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Er extends Xo{constructor(_){re(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Er.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Er.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const v=Ll.fromJSON(_);return re(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:v,providerId:D}=_;if(!v||!D)return null;try{return Ll._create(D,v)}catch{return null}}}let tu=(()=>{class x extends ua{constructor(){super("twitter.com")}static credential(v,D){return Ft._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:D})}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:D,oauthTokenSecret:R}=v;if(!D||!R)return null;try{return x.credential(D,R)}catch{return null}}}return x.TWITTER_SIGN_IN_METHOD="twitter.com",x.PROVIDER_ID="twitter.com",x})();function Bo(x,_){return Us.apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(x,_){return gn(x,"POST","/v1/accounts:signUp",at(x,_))})).apply(this,arguments)}class Vn{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,v,D,R=!1){return(0,d.Z)(function*(){const L=yield Ei._fromIdTokenResponse(_,D,R),ee=Ya(D);return new Vn({user:L,providerId:ee,_tokenResponse:D,operationType:v})})()}static _forOperation(_,v,D){return(0,d.Z)(function*(){yield _._updateTokensIfNecessary(D,!0);const R=Ya(D);return new Vn({user:_,providerId:R,_tokenResponse:D,operationType:v})})()}}function Ya(x){return x.providerId?x.providerId:"phoneNumber"in x?"phone":null}function Xh(x){return nu.apply(this,arguments)}function nu(){return(nu=(0,d.Z)(function*(x){var _;const v=Ci(x);if(yield v._initializationPromise,null!==(_=v.currentUser)&&void 0!==_&&_.isAnonymous)return new Vn({user:v.currentUser,providerId:null,operationType:"signIn"});const D=yield Bo(v,{returnSecureToken:!0}),R=yield Vn._fromIdTokenResponse(v,"signIn",D,!0);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}class iu extends W.ZR{constructor(_,v,D,R){var L;super(v.code,v.message),this.operationType=D,this.user=R,Object.setPrototypeOf(this,iu.prototype),this.customData={appName:_.name,tenantId:null!==(L=_.tenantId)&&void 0!==L?L:void 0,_serverResponse:v.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(_,v,D,R){return new iu(_,v,D,R)}}function ru(x,_,v,D){return("reauthenticate"===_?v._getReauthenticationResolver(x):v._getIdTokenResponse(x)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?iu._fromErrorAndOperation(x,L,_,D):L})}function Ep(x){return new Set(x.map(({providerId:_})=>_).filter(_=>!!_))}function G_(x,_){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,d.Z)(function*(x,_){const v=(0,W.m9)(x);yield su(!0,v,_);const{providerUserInfo:D}=yield function ci(x,_){return to.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[_]}),R=Ep(D||[]);return v.providerData=v.providerData.filter(L=>R.has(L.providerId)),R.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),Jh.apply(this,arguments)}function Jo(x,_){return ou.apply(this,arguments)}function ou(){return(ou=(0,d.Z)(function*(x,_,v=!1){const D=yield cn(x,_._linkToIdToken(x.auth,yield x.getIdToken()),v);return Vn._forOperation(x,"link",D)})).apply(this,arguments)}function su(x,_,v){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,d.Z)(function*(x,_,v){yield Fo(_);const R=!1===x?"provider-already-linked":"no-such-provider";re(Ep(_.providerData).has(v)===x,_.auth,R)})).apply(this,arguments)}function Cp(x,_){return ef.apply(this,arguments)}function ef(){return(ef=(0,d.Z)(function*(x,_,v=!1){const{auth:D}=x,R="reauthenticate";try{const L=yield cn(x,ru(D,R,_,x),v);re(L.idToken,D,"internal-error");const ee=xt(L.idToken);re(ee,D,"internal-error");const{sub:_e}=ee;return re(x.uid===_e,D,"user-mismatch"),Vn._forOperation(x,R,L)}catch(L){throw"auth/user-not-found"===L?.code&&se(D,"user-mismatch"),L}})).apply(this,arguments)}function tf(x,_){return nf.apply(this,arguments)}function nf(){return(nf=(0,d.Z)(function*(x,_,v=!1){const D="signIn",R=yield ru(x,D,_),L=yield Vn._fromIdTokenResponse(x,D,R);return v||(yield x._updateCurrentUser(L.user)),L})).apply(this,arguments)}function au(x,_){return rf.apply(this,arguments)}function rf(){return(rf=(0,d.Z)(function*(x,_){return tf(Ci(x),_)})).apply(this,arguments)}function Vc(x,_){return lu.apply(this,arguments)}function lu(){return(lu=(0,d.Z)(function*(x,_){const v=(0,W.m9)(x);return yield su(!1,v,_.providerId),Jo(v,_)})).apply(this,arguments)}function Dp(x,_){return fi.apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(x,_){return Cp((0,W.m9)(x),_)})).apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(x,_){return gn(x,"POST","/v1/accounts:signInWithCustomToken",at(x,_))})).apply(this,arguments)}function W_(x,_){return Vs.apply(this,arguments)}function Vs(){return Vs=(0,d.Z)(function*(x,_){const v=Ci(x),D=yield function o0(x,_){return Bs.apply(this,arguments)}(v,{token:_,returnSecureToken:!0}),R=yield Vn._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(R.user),R}),Vs.apply(this,arguments)}class Gr{constructor(_,v){this.factorId=_,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(_,v){return"phoneInfo"in v?cu._fromServerResponse(_,v):"totpInfo"in v?Ul._fromServerResponse(_,v):se(_,"internal-error")}}class cu extends Gr{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,v){return new cu(v)}}class Ul extends Gr{constructor(_){super("totp",_)}static _fromServerResponse(_,v){return new Ul(v)}}function Bl(x,_,v){var D;re((null===(D=v.url)||void 0===D?void 0:D.length)>0,x,"invalid-continue-uri"),re(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,x,"invalid-dynamic-link-domain"),_.continueUrl=v.url,_.dynamicLinkDomain=v.dynamicLinkDomain,_.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(re(v.iOS.bundleId.length>0,x,"missing-ios-bundle-id"),_.iOSBundleId=v.iOS.bundleId),v.android&&(re(v.android.packageName.length>0,x,"missing-android-pkg-name"),_.androidInstallApp=v.android.installApp,_.androidMinimumVersionCode=v.android.minimumVersion,_.androidPackageName=v.android.packageName)}function Ip(x,_,v){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,d.Z)(function*(x,_,v){var D;const R=Ci(x),L={requestType:"PASSWORD_RESET",email:_,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=R._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const ee=yield Fs(R,L,"getOobCode",!0);v&&Bl(R,ee,v),yield Ga(R,ee)}else v&&Bl(R,L,v),yield Ga(R,L).catch(function(){var ee=(0,d.Z)(function*(_e){if("auth/missing-recaptcha-token"!==_e.code)return Promise.reject(_e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ye=yield Fs(R,L,"getOobCode",!0);v&&Bl(R,Ye,v),yield Ga(R,Ye)}});return function(_e){return ee.apply(this,arguments)}}())}),Tp.apply(this,arguments)}function Hc(x,_,v){return wo.apply(this,arguments)}function wo(){return(wo=(0,d.Z)(function*(x,_,v){yield Rl((0,W.m9)(x),{oobCode:_,newPassword:v})})).apply(this,arguments)}function zc(x,_){return mi.apply(this,arguments)}function mi(){return mi=(0,d.Z)(function*(x,_){yield function wp(x,_){return Zt.apply(this,arguments)}((0,W.m9)(x),{oobCode:_})}),mi.apply(this,arguments)}function ro(x,_){return du.apply(this,arguments)}function du(){return(du=(0,d.Z)(function*(x,_){const v=(0,W.m9)(x),D=yield Rl(v,{oobCode:_}),R=D.requestType;switch(re(R,v,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(D.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(D.mfaInfo,v,"internal-error");default:re(D.email,v,"internal-error")}let L=null;return D.mfaInfo&&(L=Gr._fromServerResponse(Ci(v),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:L},operation:R}})).apply(this,arguments)}function jc(x,_){return fa.apply(this,arguments)}function fa(){return(fa=(0,d.Z)(function*(x,_){const{data:v}=yield ro((0,W.m9)(x),_);return v.email})).apply(this,arguments)}function ma(x,_,v){return $c.apply(this,arguments)}function $c(){return $c=(0,d.Z)(function*(x,_,v){var D;const R=Ci(x),L={returnSecureToken:!0,email:_,password:v,clientType:"CLIENT_TYPE_WEB"};let ee;if(null!==(D=R._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const lt=yield Fs(R,L,"signUpPassword");ee=Bo(R,lt)}else ee=Bo(R,L).catch(function(){var lt=(0,d.Z)(function*(Rt){if("auth/missing-recaptcha-token"===Rt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const bn=yield Fs(R,L,"signUpPassword");return Bo(R,bn)}return Promise.reject(Rt)});return function(Rt){return lt.apply(this,arguments)}}());const _e=yield ee.catch(lt=>Promise.reject(lt)),Ye=yield Vn._fromIdTokenResponse(R,"signIn",_e);return yield R._updateCurrentUser(Ye.user),Ye}),$c.apply(this,arguments)}function Sp(x,_,v){return au((0,W.m9)(x),xp.credential(_,v))}function sf(x,_,v){return Hs.apply(this,arguments)}function Hs(){return Hs=(0,d.Z)(function*(x,_,v){var D;const R=Ci(x),L={requestType:"EMAIL_SIGNIN",email:_,clientType:"CLIENT_TYPE_WEB"};function ee(_e,Ye){re(Ye.handleCodeInApp,R,"argument-error"),Ye&&Bl(R,_e,Ye)}if(null!==(D=R._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const _e=yield Fs(R,L,"getOobCode",!0);ee(_e,v),yield Qh(R,_e)}else ee(L,v),yield Qh(R,L).catch(function(){var _e=(0,d.Z)(function*(Ye){if("auth/missing-recaptcha-token"!==Ye.code)return Promise.reject(Ye);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const lt=yield Fs(R,L,"getOobCode",!0);ee(lt,v),yield Qh(R,lt)}});return function(Ye){return _e.apply(this,arguments)}}())}),Hs.apply(this,arguments)}function af(x,_){const v=Uo.parseLink(_);return"EMAIL_SIGNIN"===v?.operation}function uu(x,_,v){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(x,_,v){const D=(0,W.m9)(x),R=xp.credentialWithLink(_,v||un());return re(R._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),au(D,R)})).apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:createAuthUri",at(x,_))})).apply(this,arguments)}function q_(x,_){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,d.Z)(function*(x,_){const D={identifier:_,continueUri:Oi()?un():"http://localhost"},{signinMethods:R}=yield function s0(x,_){return hu.apply(this,arguments)}((0,W.m9)(x),D);return R||[]}),Vl.apply(this,arguments)}function Ap(x,_){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,d.Z)(function*(x,_){const v=(0,W.m9)(x),R={requestType:"VERIFY_EMAIL",idToken:yield x.getIdToken()};_&&Bl(v.auth,R,_);const{email:L}=yield function Pc(x,_){return Ol.apply(this,arguments)}(v.auth,R);L!==x.email&&(yield x.reload())}),Hl.apply(this,arguments)}function Gc(x,_,v){return Za.apply(this,arguments)}function Za(){return Za=(0,d.Z)(function*(x,_,v){const D=(0,W.m9)(x),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield x.getIdToken(),newEmail:_};v&&Bl(D.auth,L,v);const{email:ee}=yield function ft(x,_){return Wt.apply(this,arguments)}(D.auth,L);ee!==x.email&&(yield x.reload())}),Za.apply(this,arguments)}function mu(){return(mu=(0,d.Z)(function*(x,_){return pt(x,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Mp(x,_){return pu.apply(this,arguments)}function pu(){return pu=(0,d.Z)(function*(x,{displayName:_,photoURL:v}){if(void 0===_&&void 0===v)return;const D=(0,W.m9)(x),L={idToken:yield D.getIdToken(),displayName:_,photoUrl:v,returnSecureToken:!0},ee=yield cn(D,function fu(x,_){return mu.apply(this,arguments)}(D.auth,L));D.displayName=ee.displayName||null,D.photoURL=ee.photoUrl||null;const _e=D.providerData.find(({providerId:Ye})=>"password"===Ye);_e&&(_e.displayName=D.displayName,_e.photoURL=D.photoURL),yield D._updateTokensIfNecessary(ee)}),pu.apply(this,arguments)}function lf(x,_){return _u((0,W.m9)(x),_,null)}function gu(x,_){return _u((0,W.m9)(x),null,_)}function _u(x,_,v){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(x,_,v){const{auth:D}=x,L={idToken:yield x.getIdToken(),returnSecureToken:!0};_&&(L.email=_),v&&(L.password=v);const ee=yield cn(x,Pl(D,L));yield x._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class pa{constructor(_,v,D={}){this.isNewUser=_,this.providerId=v,this.profile=D}}class Fn extends pa{constructor(_,v,D,R){super(_,v,D),this.username=R}}class Wc extends pa{constructor(_,v){super(_,"facebook.com",v)}}class Qa extends Fn{constructor(_,v){super(_,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class Cr extends pa{constructor(_,v){super(_,"google.com",v)}}class Xa extends Fn{constructor(_,v,D){super(_,"twitter.com",v,D)}}function cf(x){const{user:_,_tokenResponse:v}=x;return _.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function yu(x){var _,v;if(!x)return null;const{providerId:D}=x,R=x.rawUserInfo?JSON.parse(x.rawUserInfo):{},L=x.isNewUser||"identitytoolkit#SignupNewUserResponse"===x.kind;if(!D&&x?.idToken){const ee=null===(v=null===(_=xt(x.idToken))||void 0===_?void 0:_.firebase)||void 0===v?void 0:v.sign_in_provider;if(ee)return new pa(L,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!D)return null;switch(D){case"facebook.com":return new Wc(L,R);case"github.com":return new Qa(L,R);case"google.com":return new Cr(L,R);case"twitter.com":return new Xa(L,R,x.screenName||null);case"custom":case"anonymous":return new pa(L,null);default:return new pa(L,D,R)}}(v)}class Eo{constructor(_,v,D){this.type=_,this.credential=v,this.auth=D}static _fromIdtoken(_,v){return new Eo("enroll",_,v)}static _fromMfaPendingCredential(_){return new Eo("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var v,D;if(_?.multiFactorSession){if(null!==(v=_.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Eo._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(D=_.multiFactorSession)&&void 0!==D&&D.idToken)return Eo._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Kc{constructor(_,v,D){this.session=_,this.hints=v,this.signInResolver=D}static _fromError(_,v){const D=Ci(_),R=v.customData._serverResponse,L=(R.mfaInfo||[]).map(_e=>Gr._fromServerResponse(D,_e));re(R.mfaPendingCredential,D,"internal-error");const ee=Eo._fromMfaPendingCredential(R.mfaPendingCredential);return new Kc(ee,L,function(){var _e=(0,d.Z)(function*(Ye){const lt=yield Ye._process(D,ee);delete R.mfaInfo,delete R.mfaPendingCredential;const Rt=Object.assign(Object.assign({},R),{idToken:lt.idToken,refreshToken:lt.refreshToken});switch(v.operationType){case"signIn":const bn=yield Vn._fromIdTokenResponse(D,v.operationType,Rt);return yield D._updateCurrentUser(bn.user),bn;case"reauthenticate":return re(v.user,D,"internal-error"),Vn._forOperation(v.user,v.operationType,Rt);default:se(D,"internal-error")}});return function(Ye){return _e.apply(this,arguments)}}())}resolveSignIn(_){var v=this;return(0,d.Z)(function*(){return v.signInResolver(_)})()}}function Ut(x,_){var v;const D=(0,W.m9)(x),R=_;return re(_.customData.operationType,D,"argument-error"),re(null===(v=R.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,D,"argument-error"),Kc._fromError(D,R)}class zl{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(D=>Gr._fromServerResponse(_.auth,D)))})}static _fromUser(_){return new zl(_)}getSession(){var _=this;return(0,d.Z)(function*(){return Eo._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,v){var D=this;return(0,d.Z)(function*(){const R=_,L=yield D.getSession(),ee=yield cn(D.user,R._process(D.user.auth,L,v));return yield D.user._updateTokensIfNecessary(ee),D.user.reload()})()}unenroll(_){var v=this;return(0,d.Z)(function*(){const D="string"==typeof _?_:_.uid,R=yield v.user.getIdToken();try{const L=yield cn(v.user,function Rp(x,_){return pt(x,"POST","/v2/accounts/mfaEnrollment:withdraw",at(x,_))}(v.user.auth,{idToken:R,mfaEnrollmentId:D}));v.enrolledFactors=v.enrolledFactors.filter(({uid:ee})=>ee!==D),yield v.user._updateTokensIfNecessary(L),yield v.user.reload()}catch(L){throw L}})()}}const Co=new WeakMap;function Yc(x){const _=(0,W.m9)(x);return Co.has(_)||Co.set(_,zl._fromUser(_)),Co.get(_)}const jl="__sak";class Pp{constructor(_,v){this.storageRetriever=_,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(jl,"1"),this.storage.removeItem(jl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,v){return this.storage.setItem(_,JSON.stringify(v)),Promise.resolve()}_get(_){const v=this.storage.getItem(_);return Promise.resolve(v?JSON.parse(v):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const xu=(()=>{class x extends Pp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,D)=>this.onStorageEvent(v,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function mf(){const x=(0,W.z$)();return z(x)||Tt(x)}()&&function Wi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const D of Object.keys(this.listeners)){const R=this.storage.getItem(D),L=this.localCache[D];R!==L&&v(D,L,R)}}onStorageEvent(v,D=!1){if(!v.key)return void this.forAllChangedKeys((_e,Ye,lt)=>{this.notifyListeners(_e,lt)});const R=v.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(R);if(v.newValue!==_e)null!==v.newValue?this.storage.setItem(R,v.newValue):this.storage.removeItem(R);else if(this.localCache[R]===v.newValue&&!D)return}const L=()=>{const _e=this.storage.getItem(R);!D&&this.localCache[R]===_e||this.notifyListeners(R,_e)},ee=this.storage.getItem(R);!function Rn(){return(0,W.w1)()&&10===document.documentMode}()||ee===v.newValue||v.newValue===v.oldValue?L():setTimeout(L,10)}notifyListeners(v,D){this.localCache[v]=D;const R=this.listeners[v];if(R)for(const L of Array.from(R))L(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,D,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:D,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,D){var R=()=>super._set,L=this;return(0,d.Z)(function*(){yield R().call(L,v,D),L.localCache[v]=JSON.stringify(D)})()}_get(v){var D=()=>super._get,R=this;return(0,d.Z)(function*(){const L=yield D().call(R,v);return R.localCache[v]=JSON.stringify(L),L})()}_remove(v){var D=()=>super._remove,R=this;return(0,d.Z)(function*(){yield D().call(R,v),delete R.localCache[v]})()}}return x.type="LOCAL",x})(),Fi=(()=>{class x extends Pp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,D){}_removeListener(v,D){}}return x.type="SESSION",x})();let Qc=(()=>{class x{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const D=this.receivers.find(L=>L.isListeningto(v));if(D)return D;const R=new x(v);return this.receivers.push(R),R}isListeningto(v){return this.eventTarget===v}handleEvent(v){var D=this;return(0,d.Z)(function*(){const R=v,{eventId:L,eventType:ee,data:_e}=R.data,Ye=D.handlersMap[ee];if(!Ye?.size)return;R.ports[0].postMessage({status:"ack",eventId:L,eventType:ee});const lt=Array.from(Ye).map(function(){var bn=(0,d.Z)(function*(dr){return dr(R.origin,_e)});return function(dr){return bn.apply(this,arguments)}}()),Rt=yield function Np(x){return Promise.all(x.map(function(){var _=(0,d.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(D){return{fulfilled:!1,reason:D}}});return function(v){return _.apply(this,arguments)}}()))}(lt);R.ports[0].postMessage({status:"done",eventId:L,eventType:ee,response:Rt})})()}_subscribe(v,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(D)}_unsubscribe(v,D){this.handlersMap[v]&&D&&this.handlersMap[v].delete(D),(!D||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return x.receivers=[],x})();function Or(x="",_=10){let v="";for(let D=0;D<_;D++)v+=Math.floor(10*Math.random());return x+v}class Fp{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,v,D=50){var R=this;return(0,d.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let ee,_e;return new Promise((Ye,lt)=>{const Rt=Or("",20);L.port1.start();const bn=setTimeout(()=>{lt(new Error("unsupported_event"))},D);_e={messageChannel:L,onMessage(dr){const cl=dr;if(cl.data.eventId===Rt)switch(cl.data.status){case"ack":clearTimeout(bn),ee=setTimeout(()=>{lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),Ye(cl.data.response);break;default:clearTimeout(bn),clearTimeout(ee),lt(new Error("invalid_response"))}}},R.handlers.add(_e),L.port1.addEventListener("message",_e.onMessage),R.target.postMessage({eventType:_,eventId:Rt,data:v},[L.port2])}).finally(()=>{_e&&R.removeMessageHandler(_e)})})()}}function pi(){return window}function pf(){return typeof pi().WorkerGlobalScope<"u"&&"function"==typeof pi().importScripts}function cr(){return(cr=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Xn="firebaseLocalStorageDb",Li="firebaseLocalStorage",Jc="fbase_key";class $l{constructor(_){this.request=_}toPromise(){return new Promise((_,v)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function ed(x,_){return x.transaction([Li],_?"readwrite":"readonly").objectStore(Li)}function Gl(){const x=indexedDB.open(Xn,1);return new Promise((_,v)=>{x.addEventListener("error",()=>{v(x.error)}),x.addEventListener("upgradeneeded",()=>{const D=x.result;try{D.createObjectStore(Li,{keyPath:Jc})}catch(R){v(R)}}),x.addEventListener("success",(0,d.Z)(function*(){const D=x.result;D.objectStoreNames.contains(Li)?_(D):(D.close(),yield function _f(){const x=indexedDB.deleteDatabase(Xn);return new $l(x).toPromise()}(),_(yield Gl()))}))})}function td(x,_,v){return js.apply(this,arguments)}function js(){return(js=(0,d.Z)(function*(x,_,v){const D=ed(x,!0).put({[Jc]:_,value:v});return new $l(D).toPromise()})).apply(this,arguments)}function el(){return(el=(0,d.Z)(function*(x,_){const v=ed(x,!1).get(_),D=yield new $l(v).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function nd(x,_){const v=ed(x,!0).delete(_);return new $l(v).toPromise()}const yf=(()=>{class x{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,d.Z)(function*(){return v.db||(v.db=yield Gl()),v.db})()}_withRetries(v){var D=this;return(0,d.Z)(function*(){let R=0;for(;;)try{const L=yield D._openDb();return yield v(L)}catch(L){if(R++>3)throw L;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,d.Z)(function*(){return pf()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,d.Z)(function*(){v.receiver=Qc._getInstance(function Xc(){return pf()?self:null}()),v.receiver._subscribe("keyChanged",function(){var D=(0,d.Z)(function*(R,L){return{keyProcessed:(yield v._poll()).includes(L.key)}});return function(R,L){return D.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var D=(0,d.Z)(function*(R,L){return["keyChanged"]});return function(R,L){return D.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,d.Z)(function*(){var D,R;if(v.activeServiceWorker=yield function gf(){return cr.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Fp(v.activeServiceWorker);const L=yield v.sender._send("ping",{},800);L&&null!==(D=L[0])&&void 0!==D&&D.fulfilled&&null!==(R=L[0])&&void 0!==R&&R.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var D=this;return(0,d.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function ts(){var x;return(null===(x=navigator?.serviceWorker)||void 0===x?void 0:x.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:v},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Gl();return yield td(v,jl,"1"),yield nd(v,jl),!0}catch{}return!1})()}_withPendingWrite(v){var D=this;return(0,d.Z)(function*(){D.pendingWrites++;try{yield v()}finally{D.pendingWrites--}})()}_set(v,D){var R=this;return(0,d.Z)(function*(){return R._withPendingWrite((0,d.Z)(function*(){return yield R._withRetries(L=>td(L,v,D)),R.localCache[v]=D,R.notifyServiceWorker(v)}))})()}_get(v){var D=this;return(0,d.Z)(function*(){const R=yield D._withRetries(L=>function $s(x,_){return el.apply(this,arguments)}(L,v));return D.localCache[v]=R,R})()}_remove(v){var D=this;return(0,d.Z)(function*(){return D._withPendingWrite((0,d.Z)(function*(){return yield D._withRetries(R=>nd(R,v)),delete D.localCache[v],D.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,d.Z)(function*(){const D=yield v._withRetries(ee=>{const _e=ed(ee,!1).getAll();return new $l(_e).toPromise()});if(!D)return[];if(0!==v.pendingWrites)return[];const R=[],L=new Set;for(const{fbase_key:ee,value:_e}of D)L.add(ee),JSON.stringify(v.localCache[ee])!==JSON.stringify(_e)&&(v.notifyListeners(ee,_e),R.push(ee));for(const ee of Object.keys(v.localCache))v.localCache[ee]&&!L.has(ee)&&(v.notifyListeners(ee,null),R.push(ee));return R})()}notifyListeners(v,D){this.localCache[v]=D;const R=this.listeners[v];if(R)for(const L of Array.from(R))L(D)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return x.type="LOCAL",x})(),jn=1e12;class Du{constructor(_){this.auth=_,this.counter=jn,this._widgets=new Map}render(_,v){const D=this.counter;return this._widgets.set(D,new Lp(_,this.auth.name,v||{})),this.counter++,D}reset(_){var v;const D=_||jn;null===(v=this._widgets.get(D))||void 0===v||v.delete(),this._widgets.delete(D)}getResponse(_){var v;return(null===(v=this._widgets.get(_||jn))||void 0===v?void 0:v.getResponse())||""}execute(_){var v=this;return(0,d.Z)(function*(){var D;return null===(D=v._widgets.get(_||jn))||void 0===D||D.execute(),""})()}}class Lp{constructor(_,v,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof _?document.getElementById(_):_;re(R,"argument-error",{appName:v}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function tl(x){const _=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<x;D++)_.push(v.charAt(Math.floor(62*Math.random())));return _.join("")}(50);const{callback:_,"expired-callback":v}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Iu=Ns("rcb"),Tu=new De(3e4,6e4);class Wl{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=pi().grecaptcha)||void 0===_||!_.render)}load(_,v=""){return re(function ga(x){return x.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(x)}(v),_,"argument-error"),this.shouldResolveImmediately(v)&&zt(pi().grecaptcha)?Promise.resolve(pi().grecaptcha):new Promise((D,R)=>{const L=pi().setTimeout(()=>{R(Se(_,"network-request-failed"))},Tu.get());pi()[Iu]=()=>{pi().clearTimeout(L),delete pi()[Iu];const _e=pi().grecaptcha;if(!_e||!zt(_e))return void R(Se(_,"internal-error"));const Ye=_e.render;_e.render=(lt,Rt)=>{const bn=Ye(lt,Rt);return this.counter++,bn},this.hostLanguage=v,D(_e)},hi(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:Iu,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(L),R(Se(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var v;return!(null===(v=pi().grecaptcha)||void 0===v||!v.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wf{load(_){return(0,d.Z)(function*(){return new Du(_)})()}clearedOneInstance(){}}const rd="recaptcha",ql={theme:"light",type:"image"};class Au{constructor(_,v=Object.assign({},ql),D){this.parameters=v,this.type=rd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ci(D),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof _?document.getElementById(_):_;re(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wf:new Wl,this.validateStartingState()}verify(){var _=this;return(0,d.Z)(function*(){_.assertNotDestroyed();const v=yield _.render(),D=_.getAssertedRecaptcha();return D.getResponse(v)||new Promise(L=>{const ee=_e=>{_e&&(_.tokenChangeListeners.delete(ee),L(_e))};_.tokenChangeListeners.add(ee),_.isInvisible&&D.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return v=>{if(this.tokenChangeListeners.forEach(D=>D(v)),"function"==typeof _)_(v);else if("string"==typeof _){const D=pi()[_];"function"==typeof D&&D(v)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,d.Z)(function*(){if(yield _.init(),!_.widgetId){let v=_.container;if(!_.isInvisible){const D=document.createElement("div");v.appendChild(D),v=D}_.widgetId=_.getAssertedRecaptcha().render(v,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,d.Z)(function*(){re(Oi()&&!pf(),_.auth,"internal-error"),yield function od(){let x=null;return new Promise(_=>{"complete"!==document.readyState?(x=()=>_(),window.addEventListener("load",x)):_()}).catch(_=>{throw x&&window.removeEventListener("load",x),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const v=yield function ve(x){return le.apply(this,arguments)}(_.auth);re(v,_.auth,"internal-error"),_.parameters.sitekey=v})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class is{constructor(_,v){this.verificationId=_,this.onConfirmation=v}confirm(_){const v=lr._fromVerification(this.verificationId,_);return this.onConfirmation(v)}}function qt(x,_,v){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,d.Z)(function*(x,_,v){const D=Ci(x),R=yield _a(D,_,(0,W.m9)(v));return new is(R,L=>au(D,L))})).apply(this,arguments)}function vs(x,_,v){return nl.apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(x,_,v){const D=(0,W.m9)(x);yield su(!1,D,"phone");const R=yield _a(D.auth,_,(0,W.m9)(v));return new is(R,L=>Vc(D,L))})).apply(this,arguments)}function Mu(x,_,v){return il.apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(x,_,v){const D=(0,W.m9)(x),R=yield _a(D.auth,_,(0,W.m9)(v));return new is(R,L=>Dp(D,L))})).apply(this,arguments)}function _a(x,_,v){return ku.apply(this,arguments)}function ku(){return ku=(0,d.Z)(function*(x,_,v){var D;const R=yield v.verify();try{let L;if(re("string"==typeof R,x,"argument-error"),re(v.type===rd,x,"argument-error"),L="string"==typeof _?{phoneNumber:_}:_,"session"in L){const ee=L.session;if("phoneNumber"in L)return re("enroll"===ee.type,x,"internal-error"),(yield function bu(x,_){return pt(x,"POST","/v2/accounts/mfaEnrollment:start",at(x,_))}(x,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{re("signin"===ee.type,x,"internal-error");const _e=(null===(D=L.multiFactorHint)||void 0===D?void 0:D.uid)||L.multiFactorUid;return re(_e,x,"missing-multi-factor-info"),(yield function vf(x,_){return pt(x,"POST","/v2/accounts/mfaSignIn:start",at(x,_))}(x,{mfaPendingCredential:ee.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield function Fl(x,_){return Nc.apply(this,arguments)}(x,{phoneNumber:L.phoneNumber,recaptchaToken:R});return ee}}finally{v._reset()}}),ku.apply(this,arguments)}function Up(x,_){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,d.Z)(function*(x,_){yield Jo((0,W.m9)(x),_)})).apply(this,arguments)}let Q_=(()=>{class x{constructor(v){this.providerId=x.PROVIDER_ID,this.auth=Ci(v)}verifyPhoneNumber(v,D){return _a(this.auth,v,(0,W.m9)(D))}static credential(v,D){return lr._fromVerification(v,D)}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:D,temporaryProof:R}=v;return D&&R?lr._fromTokenResponse(D,R):null}}return x.PROVIDER_ID="phone",x.PHONE_SIGN_IN_METHOD="phone",x})();function ya(x,_){return _?ki(_):(re(x._popupRedirectResolver,x,"argument-error"),x._popupRedirectResolver)}class Ru extends kl{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Nn(_,this._buildIdpRequest())}_linkToIdToken(_,v){return Nn(_,this._buildIdpRequest(v))}_getReauthenticationResolver(_){return Nn(_,this._buildIdpRequest())}_buildIdpRequest(_){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(v.idToken=_),v}}function Do(x){return tf(x.auth,new Ru(x),x.bypassAuthState)}function xf(x){const{auth:_,user:v}=x;return re(v,_,"internal-error"),Cp(v,new Ru(x),x.bypassAuthState)}function sd(x){return va.apply(this,arguments)}function va(){return(va=(0,d.Z)(function*(x){const{auth:_,user:v}=x;return re(v,_,"internal-error"),Jo(v,new Ru(x),x.bypassAuthState)})).apply(this,arguments)}class Yl{constructor(_,v,D,R,L=!1){this.auth=_,this.resolver=D,this.user=R,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var _=this;return new Promise(function(){var v=(0,d.Z)(function*(D,R){_.pendingPromise={resolve:D,reject:R};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(L){_.reject(L)}});return function(D,R){return v.apply(this,arguments)}}())}onAuthEvent(_){var v=this;return(0,d.Z)(function*(){const{urlResponse:D,sessionId:R,postBody:L,tenantId:ee,error:_e,type:Ye}=_;if(_e)return void v.reject(_e);const lt={auth:v.auth,requestUri:D,sessionId:R,tenantId:ee||void 0,postBody:L||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(Ye)(lt))}catch(Rt){v.reject(Rt)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return Do;case"linkViaPopup":case"linkViaRedirect":return sd;case"reauthViaPopup":case"reauthViaRedirect":return xf;default:se(this.auth,"internal-error")}}resolve(_){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ui=new De(2e3,1e4);function Ht(x,_,v){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(x,_,v){const D=Ci(x);be(x,_,Xo);const R=ya(D,v);return new Jn(D,"signInViaPopup",_,R).executeNotNull()})).apply(this,arguments)}function Bi(x,_,v){return rn.apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(x,_,v){const D=(0,W.m9)(x);be(D.auth,_,Xo);const R=ya(D.auth,v);return new Jn(D.auth,"reauthViaPopup",_,R,D).executeNotNull()})).apply(this,arguments)}function ba(x,_,v){return qs.apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(x,_,v){const D=(0,W.m9)(x);be(D.auth,_,Xo);const R=ya(D.auth,v);return new Jn(D.auth,"linkViaPopup",_,R,D).executeNotNull()})).apply(this,arguments)}let Jn=(()=>{class x extends Yl{constructor(v,D,R,L,ee){super(v,D,L,ee),this.provider=R,this.authWindow=null,this.pollId=null,x.currentPopupAction&&x.currentPopupAction.cancel(),x.currentPopupAction=this}executeNotNull(){var v=this;return(0,d.Z)(function*(){const D=yield v.execute();return re(D,v.auth,"internal-error"),D})()}onExecution(){var v=this;return(0,d.Z)(function*(){Ze(1===v.filter.length,"Popup operations only handle one event");const D=Or();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],D),v.authWindow.associatedEvent=D,v.resolver._originValidation(v.auth).catch(R=>{v.reject(R)}),v.resolver._isIframeWebStorageSupported(v.auth,R=>{R||v.reject(Se(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,x.currentPopupAction=null}pollUserCancellation(){const v=()=>{var D,R;this.pollId=null!==(R=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,Ui.get())};v()}}return x.currentPopupAction=null,x})();const _t="pendingRedirect",bs=new Map;class Ef extends Yl{constructor(_,v,D=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,D),this.eventId=null}execute(){var _=()=>super.execute,v=this;return(0,d.Z)(function*(){let D=bs.get(v.auth._key());if(!D){try{const L=(yield function Cf(x,_){return Ks.apply(this,arguments)}(v.resolver,v.auth))?yield _().call(v):null;D=()=>Promise.resolve(L)}catch(R){D=()=>Promise.reject(R)}bs.set(v.auth._key(),D)}return v.bypassAuthState||bs.set(v.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(_){var v=()=>super.onAuthEvent,D=this;return(0,d.Z)(function*(){if("signInViaRedirect"===_.type)return v().call(D,_);if("unknown"!==_.type){if(_.eventId){const R=yield D.auth._redirectUserForId(_.eventId);if(R)return D.user=R,v().call(D,_);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Ks(){return(Ks=(0,d.Z)(function*(x,_){const v=Dr(_),D=Cn(x);if(!(yield D._isAvailable()))return!1;const R="true"===(yield D._get(v));return yield D._remove(v),R})).apply(this,arguments)}function Pu(x,_){return rl.apply(this,arguments)}function rl(){return(rl=(0,d.Z)(function*(x,_){return Cn(x)._set(Dr(_),"true")})).apply(this,arguments)}function Zi(){bs.clear()}function Ii(x,_){bs.set(x._key(),_)}function Cn(x){return ki(x._redirectPersistence)}function Dr(x){return dn(_t,x.config.apiKey,x.name)}function Nr(x,_,v){return function ol(x,_,v){return Zl.apply(this,arguments)}(x,_,v)}function Zl(){return(Zl=(0,d.Z)(function*(x,_,v){const D=Ci(x);be(x,_,Xo),yield D._initializationPromise;const R=ya(D,v);return yield Pu(R,D),R._openRedirect(D,_,"signInViaRedirect")})).apply(this,arguments)}function sl(x,_,v){return function Ql(x,_,v){return Ho.apply(this,arguments)}(x,_,v)}function Ho(){return(Ho=(0,d.Z)(function*(x,_,v){const D=(0,W.m9)(x);be(D.auth,_,Xo),yield D.auth._initializationPromise;const R=ya(D.auth,v);yield Pu(R,D.auth);const L=yield Kr(D);return R._openRedirect(D.auth,_,"reauthViaRedirect",L)})).apply(this,arguments)}function qr(x,_,v){return function Df(x,_,v){return Xl.apply(this,arguments)}(x,_,v)}function Xl(){return(Xl=(0,d.Z)(function*(x,_,v){const D=(0,W.m9)(x);be(D.auth,_,Xo),yield D.auth._initializationPromise;const R=ya(D.auth,v);yield su(!1,D,_.providerId),yield Pu(R,D.auth);const L=yield Kr(D);return R._openRedirect(D.auth,_,"linkViaRedirect",L)})).apply(this,arguments)}function xe(x,_){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(x,_){return yield Ci(x)._initializationPromise,Qi(x,_,!1)})).apply(this,arguments)}function Qi(x,_){return V.apply(this,arguments)}function V(){return(V=(0,d.Z)(function*(x,_,v=!1){const D=Ci(x),R=ya(D,_),ee=yield new Ef(D,R,v).execute();return ee&&!v&&(delete ee.user._redirectEventId,yield D._persistUserIfCurrent(ee.user),yield D._setRedirectUser(null,_)),ee})).apply(this,arguments)}function Kr(x){return wa.apply(this,arguments)}function wa(){return(wa=(0,d.Z)(function*(x){const _=Or(`${x.uid}:::`);return x._redirectEventId=_,yield x.auth._setRedirectUser(x),yield x.auth._persistUserIfCurrent(x),_})).apply(this,arguments)}class Ou{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let v=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(_,D)&&(v=!0,this.sendToConsumer(_,D),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function Jl(x){switch(x.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nu(x);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=_,v=!0)),v}sendToConsumer(_,v){var D;if(_.error&&!Nu(_)){const R=(null===(D=_.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";v.onError(Se(this.auth,R))}else v.onAuthEvent(_)}isEventForConsumer(_,v){const D=null===v.eventId||!!_.eventId&&_.eventId===v.eventId;return v.filter.includes(_.type)&&D}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gn(_))}saveEventToCache(_){this.cachedEventUids.add(Gn(_)),this.lastProcessedEventTime=Date.now()}}function Gn(x){return[x.type,x.eventId,x.sessionId,x.tenantId].filter(_=>_).join("-")}function Nu({type:x,error:_}){return"unknown"===x&&"auth/no-auth-event"===_?.code}function ec(x){return ad.apply(this,arguments)}function ad(){return(ad=(0,d.Z)(function*(x,_={}){return pt(x,"GET","/v1/projects",_)})).apply(this,arguments)}const a0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l0=/^https?/;function If(){return(If=(0,d.Z)(function*(x){if(x.config.emulator)return;const{authorizedDomains:_}=yield ec(x);for(const v of _)try{if(X_(v))return}catch{}se(x,"unauthorized-domain")})).apply(this,arguments)}function X_(x){const _=un(),{protocol:v,hostname:D}=new URL(_);if(x.startsWith("chrome-extension://")){const ee=new URL(x);return""===ee.hostname&&""===D?"chrome-extension:"===v&&x.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===v&&ee.hostname===D}if(!l0.test(v))return!1;if(a0.test(x))return D===x;const R=x.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(D)}const ei=new De(3e4,6e4);function Fu(){const x=pi().___jsl;if(x?.H)for(const _ of Object.keys(x.H))if(x.H[_].r=x.H[_].r||[],x.H[_].L=x.H[_].L||[],x.H[_].r=[...x.H[_].L],x.CP)for(let v=0;v<x.CP.length;v++)x.CP[v]=null}let xa=null;const Ea=new De(5e3,15e3),zo="__/auth/iframe",Ca="emulator/auth/iframe",al={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J_(x){const _=x.config;re(_.authDomain,x,"auth-domain-config-required");const v=_.emulator?Re(_,Ca):`https://${x.config.authDomain}/${zo}`,D={apiKey:_.apiKey,appName:x.name,v:F.SDK_VERSION},R=Tf.get(x.config.apiHost);R&&(D.eid=R);const L=x._getFrameworks();return L.length&&(D.fw=L.join(",")),`${v}?${(0,W.xO)(D).slice(1)}`}function Af(){return Af=(0,d.Z)(function*(x){const _=yield function Ri(x){return xa=xa||function Ti(x){return new Promise((_,v)=>{var D,R,L;function ee(){Fu(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{Fu(),v(Se(x,"network-request-failed"))},timeout:ei.get()})}if(null!==(R=null===(D=pi().gapi)||void 0===D?void 0:D.iframes)&&void 0!==R&&R.Iframe)_(gapi.iframes.getContext());else{if(null===(L=pi().gapi)||void 0===L||!L.load){const _e=Ns("iframefcb");return pi()[_e]=()=>{gapi.load?ee():v(Se(x,"network-request-failed"))},hi(`https://apis.google.com/js/api.js?onload=${_e}`).catch(Ye=>v(Ye))}ee()}}).catch(_=>{throw xa=null,_})}(x),xa}(x),v=pi().gapi;return re(v,x,"internal-error"),_.open({where:document.body,url:J_(x),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:al,dontclear:!0},D=>new Promise(function(){var R=(0,d.Z)(function*(L,ee){yield D.restyle({setHideOnLeave:!1});const _e=Se(x,"network-request-failed"),Ye=pi().setTimeout(()=>{ee(_e)},Ea.get());function lt(){pi().clearTimeout(Ye),L(D)}D.ping(lt).then(lt,()=>{ee(_e)})});return function(L,ee){return R.apply(this,arguments)}}()))}),Af.apply(this,arguments)}const C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class te{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Je="__/auth/handler",bt="emulator/auth/handler",jt=encodeURIComponent("fac");function Bt(x,_,v,D,R,L){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,d.Z)(function*(x,_,v,D,R,L){re(x.config.authDomain,x,"auth-domain-config-required"),re(x.config.apiKey,x,"invalid-api-key");const ee={apiKey:x.config.apiKey,appName:x.name,authType:v,redirectUrl:D,v:F.SDK_VERSION,eventId:R};if(_ instanceof Xo){_.setDefaultLanguage(x.languageCode),ee.providerId=_.providerId||"",(0,W.xb)(_.getCustomParameters())||(ee.customParameters=JSON.stringify(_.getCustomParameters()));for(const[Rt,bn]of Object.entries(L||{}))ee[Rt]=bn}if(_ instanceof ua){const Rt=_.getScopes().filter(bn=>""!==bn);Rt.length>0&&(ee.scopes=Rt.join(","))}x.tenantId&&(ee.tid=x.tenantId);const _e=ee;for(const Rt of Object.keys(_e))void 0===_e[Rt]&&delete _e[Rt];const Ye=yield x._getAppCheckToken(),lt=Ye?`#${jt}=${encodeURIComponent(Ye)}`:"";return`${function Xi({config:x}){return x.emulator?Re(x,bt):`https://${x.authDomain}/${Je}`}(x)}?${(0,W.xO)(_e).slice(1)}${lt}`})).apply(this,arguments)}const oo="webStorageSupport",jo=class Lu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fi,this._completeRedirectFn=Qi,this._overrideRedirectResult=Ii}_openPopup(_,v,D,R){var L=this;return(0,d.Z)(function*(){var ee;Ze(null===(ee=L.eventManagers[_._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const _e=yield Bt(_,v,D,un(),R);return function ye(x,_,v,D=500,R=600){const L=Math.max((window.screen.availHeight-R)/2,0).toString(),ee=Math.max((window.screen.availWidth-D)/2,0).toString();let _e="";const Ye=Object.assign(Object.assign({},C),{width:D.toString(),height:R.toString(),top:L,left:ee}),lt=(0,W.z$)().toLowerCase();v&&(_e=N(lt)?"_blank":v),B(lt)&&(_=_||"http://localhost",Ye.scrollbars="yes");const Rt=Object.entries(Ye).reduce((dr,[cl,Of])=>`${dr}${cl}=${Of},`,"");if(function Vt(x=(0,W.z$)()){var _;return Tt(x)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(lt)&&"_self"!==_e)return function st(x,_){const v=document.createElement("a");v.href=x,v.target=_;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(D)}(_||"",_e),new te(null);const bn=window.open(_||"",_e,Rt);re(bn,x,"popup-blocked");try{bn.focus()}catch{}return new te(bn)}(_,_e,Or())})()}_openRedirect(_,v,D,R){var L=this;return(0,d.Z)(function*(){return yield L._originValidation(_),function Eu(x){pi().location.href=x}(yield Bt(_,v,D,un(),R)),new Promise(()=>{})})()}_initialize(_){const v=_._key();if(this.eventManagers[v]){const{manager:R,promise:L}=this.eventManagers[v];return R?Promise.resolve(R):(Ze(L,"If manager is not set, promise should be"),L)}const D=this.initAndGetManager(_);return this.eventManagers[v]={promise:D},D.catch(()=>{delete this.eventManagers[v]}),D}initAndGetManager(_){var v=this;return(0,d.Z)(function*(){const D=yield function Sf(x){return Af.apply(this,arguments)}(_),R=new Ou(_);return D.register("authEvent",L=>(re(L?.authEvent,_,"invalid-auth-event"),{status:R.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[_._key()]={manager:R},v.iframes[_._key()]=D,R})()}_isIframeWebStorageSupported(_,v){this.iframes[_._key()].send(oo,{type:oo},R=>{var L;const ee=null===(L=R?.[0])||void 0===L?void 0:L[oo];void 0!==ee&&v(!!ee),se(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const v=_._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function tc(x){return If.apply(this,arguments)}(_)),this.originValidationPromises[v]}get _shouldInitProactively(){return Yt()||z()||Tt()}};class so{constructor(_){this.factorId=_}_process(_,v,D){switch(v.type){case"enroll":return this._finalizeEnroll(_,v.credential,D);case"signin":return this._finalizeSignIn(_,v.credential);default:return ct("unexpected MultiFactorSessionType")}}}class $o extends so{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new $o(_)}_finalizeEnroll(_,v,D){return function ff(x,_){return pt(x,"POST","/v2/accounts/mfaEnrollment:finalize",at(x,_))}(_,{idToken:v,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,v){return function bf(x,_){return pt(x,"POST","/v2/accounts/mfaSignIn:finalize",at(x,_))}(_,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ll=(()=>{class x{constructor(){}static assertion(v){return $o._fromCredential(v)}}return x.FACTOR_ID="phone",x})();var nc="@firebase/auth";class Rf{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var v=this;return(0,d.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const v=this.auth.onIdTokenChanged(D=>{_(D?.stsTokenManager.accessToken||null)});this.internalListeners.set(_,v),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const v=this.internalListeners.get(_);v&&(this.internalListeners.delete(_),v(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,W.Pz)("authIdTokenMaxAge"),function Bp(x){(0,F._registerComponent)(new ue.wA("auth",(_,{options:v})=>{const D=_.getProvider("app").getImmediate(),R=_.getProvider("heartbeat"),L=_.getProvider("app-check-internal"),{apiKey:ee,authDomain:_e}=D.options;re(ee&&!ee.includes(":"),"invalid-api-key",{appName:D.name});const Ye={apiKey:ee,authDomain:_e,clientPlatform:x,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sr(x)},lt=new gs(D,R,L,Ye);return function $_(x,_){const v=_?.persistence||[],D=(Array.isArray(v)?v:[v]).map(ki);_?.errorMap&&x._updateErrorMap(_.errorMap),x._initializeWithPersistence(D,_?.popupRedirectResolver)}(lt,v),lt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,v,D)=>{_.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new ue.wA("auth-internal",_=>{const v=Ci(_.getProvider("auth").getImmediate());return new Rf(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(nc,"0.23.2",function ey(x){switch(x){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(x)),(0,F.registerVersion)(nc,"0.23.2","esm2017")}("Browser")},9058:(wt,Me,H)=>{H.d(Me,{$s:()=>ki,BH:()=>de,DV:()=>to,Dv:()=>Fo,G6:()=>Re,GJ:()=>wi,L:()=>we,LL:()=>qn,P0:()=>yt,Pz:()=>Se,Sg:()=>be,UG:()=>ct,UI:()=>vo,US:()=>ue,Wj:()=>Gt,Wl:()=>Sn,Yr:()=>De,ZB:()=>ae,ZR:()=>pt,aH:()=>se,b$:()=>Oi,cI:()=>gn,dS:()=>bo,eu:()=>Qe,g5:()=>F,gK:()=>Dn,gQ:()=>At,h$:()=>Pe,hl:()=>ze,hu:()=>W,jU:()=>Ze,lb:()=>Kn,m9:()=>dn,ne:()=>cn,p$:()=>Z,pd:()=>xt,r3:()=>ci,ru:()=>un,tV:()=>K,uI:()=>re,ug:()=>Qo,vZ:()=>rr,w1:()=>ps,w9:()=>Ai,xO:()=>Zo,xb:()=>oa,z$:()=>Ve,zI:()=>Ke,zd:()=>rt});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},W=function(Y,q){if(!Y)throw F(q)},F=function(Y){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Y)},ne=function(Y){const q=[];let B=0;for(let z=0;z<Y.length;z++){let N=Y.charCodeAt(z);N<128?q[B++]=N:N<2048?(q[B++]=N>>6|192,q[B++]=63&N|128):55296==(64512&N)&&z+1<Y.length&&56320==(64512&Y.charCodeAt(z+1))?(N=65536+((1023&N)<<10)+(1023&Y.charCodeAt(++z)),q[B++]=N>>18|240,q[B++]=N>>12&63|128,q[B++]=N>>6&63|128,q[B++]=63&N|128):(q[B++]=N>>12|224,q[B++]=N>>6&63|128,q[B++]=63&N|128)}return q},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,q){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let N=0;N<Y.length;N+=3){const ie=Y[N],Ee=N+1<Y.length,tt=Ee?Y[N+1]:0,Mt=N+2<Y.length,Tt=Mt?Y[N+2]:0;let Rn=(15&tt)<<2|Tt>>6,Yt=63&Tt;Mt||(Yt=64,Ee||(Rn=64)),z.push(B[ie>>2],B[(3&ie)<<4|tt>>4],B[Rn],B[Yt])}return z.join("")},encodeString(Y,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(Y):this.encodeByteArray(ne(Y),q)},decodeString(Y,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(Y):function(Y){const q=[];let B=0,z=0;for(;B<Y.length;){const N=Y[B++];if(N<128)q[z++]=String.fromCharCode(N);else if(N>191&&N<224){const ie=Y[B++];q[z++]=String.fromCharCode((31&N)<<6|63&ie)}else if(N>239&&N<365){const Mt=((7&N)<<18|(63&Y[B++])<<12|(63&Y[B++])<<6|63&Y[B++])-65536;q[z++]=String.fromCharCode(55296+(Mt>>10)),q[z++]=String.fromCharCode(56320+(1023&Mt))}else{const ie=Y[B++],Ee=Y[B++];q[z++]=String.fromCharCode((15&N)<<12|(63&ie)<<6|63&Ee)}}return q.join("")}(this.decodeStringToByteArray(Y,q))},decodeStringToByteArray(Y,q){this.init_();const B=q?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let N=0;N<Y.length;){const ie=B[Y.charAt(N++)],tt=N<Y.length?B[Y.charAt(N)]:0;++N;const Tt=N<Y.length?B[Y.charAt(N)]:64;++N;const Vt=N<Y.length?B[Y.charAt(N)]:64;if(++N,null==ie||null==tt||null==Tt||null==Vt)throw new Ie;z.push(ie<<2|tt>>4),64!==Tt&&(z.push(tt<<4&240|Tt>>2),64!==Vt&&z.push(Tt<<6&192|Vt))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}};class Ie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pe=function(Y){const q=ne(Y);return ue.encodeByteArray(q,!0)},we=function(Y){return Pe(Y).replace(/\./g,"")},K=function(Y){try{return ue.decodeString(Y,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function Z(Y){return ae(void 0,Y)}function ae(Y,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return q}for(const B in q)!q.hasOwnProperty(B)||!Ge(B)||(Y[B]=ae(Y[B],q[B]));return Y}function Ge(Y){return"__proto__"!==Y}const He=()=>{try{return function Le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Y=process.env.__FIREBASE_DEFAULTS__;return Y?JSON.parse(Y):void 0})()||(()=>{if(typeof document>"u")return;let Y;try{Y=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=Y&&K(Y[1]);return q&&JSON.parse(q)})()}catch(Y){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Y}`)}},yt=Y=>{const q=(Y=>{var q,B;return null===(B=null===(q=He())||void 0===q?void 0:q.emulatorHosts)||void 0===B?void 0:B[Y]})(Y);if(!q)return;const B=q.lastIndexOf(":");if(B<=0||B+1===q.length)throw new Error(`Invalid host ${q} with no separate hostname and port!`);const z=parseInt(q.substring(B+1),10);return"["===q[0]?[q.substring(1,B-1),z]:[q.substring(0,B),z]},se=()=>{var Y;return null===(Y=He())||void 0===Y?void 0:Y.config},Se=Y=>{var q;return null===(q=He())||void 0===q?void 0:q[`_${Y}`]};class de{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,B)=>{this.resolve=q,this.reject=B})}wrapCallback(q){return(B,z)=>{B?this.reject(B):this.resolve(z),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(B):q(B,z))}}}function be(Y,q){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=q||"demo-project",N=Y.iat||0,ie=Y.sub||Y.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ee=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:N,exp:N+3600,auth_time:N,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(Ee)),""].join(".")}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ct(){var Y;const q=null===(Y=He())||void 0===Y?void 0:Y.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ze(){return"object"==typeof self&&self.self===self}function un(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function Oi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ps(){const Y=Ve();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function De(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function Re(){return!ct()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){try{return"object"==typeof indexedDB}catch{return!1}}function Qe(){return new Promise((Y,q)=>{try{let B=!0;const z="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(z);N.onsuccess=()=>{N.result.close(),B||self.indexedDB.deleteDatabase(z),Y(!0)},N.onupgradeneeded=()=>{B=!1},N.onerror=()=>{var ie;q((null===(ie=N.error)||void 0===ie?void 0:ie.message)||"")}}catch(B){q(B)}})}function Ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pt extends Error{constructor(q,B,z){super(B),this.code=q,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qn.prototype.create)}}class qn{constructor(q,B,z){this.service=q,this.serviceName=B,this.errors=z}create(q,...B){const z=B[0]||{},N=`${this.service}/${q}`,ie=this.errors[q],Ee=ie?function ut(Y,q){return Y.replace(Dt,(B,z)=>{const N=q[z];return null!=N?String(N):`<${z}?>`})}(ie,z):"Error";return new pt(N,`${this.serviceName}: ${Ee} (${N}).`,z)}}const Dt=/\{\$([^}]+)}/g;function gn(Y){return JSON.parse(Y)}function Sn(Y){return JSON.stringify(Y)}const ti=function(Y){let q={},B={},z={},N="";try{const ie=Y.split(".");q=gn(K(ie[0])||""),B=gn(K(ie[1])||""),N=ie[2],z=B.d||{},delete B.d}catch{}return{header:q,claims:B,data:z,signature:N}},Ai=function(Y){const B=ti(Y).claims;return!!B&&"object"==typeof B&&B.hasOwnProperty("iat")},wi=function(Y){const q=ti(Y).claims;return"object"==typeof q&&!0===q.admin};function ci(Y,q){return Object.prototype.hasOwnProperty.call(Y,q)}function to(Y,q){if(Object.prototype.hasOwnProperty.call(Y,q))return Y[q]}function oa(Y){for(const q in Y)if(Object.prototype.hasOwnProperty.call(Y,q))return!1;return!0}function vo(Y,q,B){const z={};for(const N in Y)Object.prototype.hasOwnProperty.call(Y,N)&&(z[N]=q.call(B,Y[N],N,Y));return z}function rr(Y,q){if(Y===q)return!0;const B=Object.keys(Y),z=Object.keys(q);for(const N of B){if(!z.includes(N))return!1;const ie=Y[N],Ee=q[N];if(di(ie)&&di(Ee)){if(!rr(ie,Ee))return!1}else if(ie!==Ee)return!1}for(const N of z)if(!B.includes(N))return!1;return!0}function di(Y){return null!==Y&&"object"==typeof Y}function Zo(Y){const q=[];for(const[B,z]of Object.entries(Y))Array.isArray(z)?z.forEach(N=>{q.push(encodeURIComponent(B)+"="+encodeURIComponent(N))}):q.push(encodeURIComponent(B)+"="+encodeURIComponent(z));return q.length?"&"+q.join("&"):""}function rt(Y){const q={};return Y.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[N,ie]=z.split("=");q[decodeURIComponent(N)]=decodeURIComponent(ie)}}),q}function xt(Y){const q=Y.indexOf("?");if(!q)return"";const B=Y.indexOf("#",q);return Y.substring(q,B>0?B:void 0)}class At{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,B){B||(B=0);const z=this.W_;if("string"==typeof q)for(let Vt=0;Vt<16;Vt++)z[Vt]=q.charCodeAt(B)<<24|q.charCodeAt(B+1)<<16|q.charCodeAt(B+2)<<8|q.charCodeAt(B+3),B+=4;else for(let Vt=0;Vt<16;Vt++)z[Vt]=q[B]<<24|q[B+1]<<16|q[B+2]<<8|q[B+3],B+=4;for(let Vt=16;Vt<80;Vt++){const Rn=z[Vt-3]^z[Vt-8]^z[Vt-14]^z[Vt-16];z[Vt]=4294967295&(Rn<<1|Rn>>>31)}let Tt,Et,N=this.chain_[0],ie=this.chain_[1],Ee=this.chain_[2],tt=this.chain_[3],Mt=this.chain_[4];for(let Vt=0;Vt<80;Vt++){Vt<40?Vt<20?(Tt=tt^ie&(Ee^tt),Et=1518500249):(Tt=ie^Ee^tt,Et=1859775393):Vt<60?(Tt=ie&Ee|tt&(ie|Ee),Et=2400959708):(Tt=ie^Ee^tt,Et=3395469782);const Rn=(N<<5|N>>>27)+Tt+Mt+Et+z[Vt]&4294967295;Mt=tt,tt=Ee,Ee=4294967295&(ie<<30|ie>>>2),ie=N,N=Rn}this.chain_[0]=this.chain_[0]+N&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+Ee&4294967295,this.chain_[3]=this.chain_[3]+tt&4294967295,this.chain_[4]=this.chain_[4]+Mt&4294967295}update(q,B){if(null==q)return;void 0===B&&(B=q.length);const z=B-this.blockSize;let N=0;const ie=this.buf_;let Ee=this.inbuf_;for(;N<B;){if(0===Ee)for(;N<=z;)this.compress_(q,N),N+=this.blockSize;if("string"==typeof q){for(;N<B;)if(ie[Ee]=q.charCodeAt(N),++Ee,++N,Ee===this.blockSize){this.compress_(ie),Ee=0;break}}else for(;N<B;)if(ie[Ee]=q[N],++Ee,++N,Ee===this.blockSize){this.compress_(ie),Ee=0;break}}this.inbuf_=Ee,this.total_+=B}digest(){const q=[];let B=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let N=this.blockSize-1;N>=56;N--)this.buf_[N]=255&B,B/=256;this.compress_(this.buf_);let z=0;for(let N=0;N<5;N++)for(let ie=24;ie>=0;ie-=8)q[z]=this.chain_[N]>>ie&255,++z;return q}}function cn(Y,q){const B=new Mi(Y,q);return B.subscribe.bind(B)}class Mi{constructor(q,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{q(this)}).catch(z=>{this.error(z)})}next(q){this.forEachObserver(B=>{B.next(q)})}error(q){this.forEachObserver(B=>{B.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,B,z){let N;if(void 0===q&&void 0===B&&void 0===z)throw new Error("Missing Observer.");N=function on(Y,q){if("object"!=typeof Y||null===Y)return!1;for(const B of q)if(B in Y&&"function"==typeof Y[B])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:B,complete:z},void 0===N.next&&(N.next=xi),void 0===N.error&&(N.error=xi),void 0===N.complete&&(N.complete=xi);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch{}}),this.observers.push(N),ie}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,q)}sendOne(q,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{B(this.observers[q])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xi(){}const Fo=function(Y,q,B,z){let N;if(z<q?N="at least "+q:z>B&&(N=0===B?"none":"no more than "+B),N)throw new Error(Y+" failed: Was called with "+z+(1===z?" argument.":" arguments.")+" Expects "+N+".")};function Dn(Y,q){return`${Y} failed: ${q} argument `}function Gt(Y,q,B,z){if((!z||B)&&"function"!=typeof B)throw new Error(Dn(Y,q)+"must be a valid function.")}function Kn(Y,q,B,z){if((!z||B)&&("object"!=typeof B||null===B))throw new Error(Dn(Y,q)+"must be a valid context object.")}const bo=function(Y){const q=[];let B=0;for(let z=0;z<Y.length;z++){let N=Y.charCodeAt(z);if(N>=55296&&N<=56319){const ie=N-55296;z++,W(z<Y.length,"Surrogate pair missing trail surrogate."),N=65536+(ie<<10)+(Y.charCodeAt(z)-56320)}N<128?q[B++]=N:N<2048?(q[B++]=N>>6|192,q[B++]=63&N|128):N<65536?(q[B++]=N>>12|224,q[B++]=N>>6&63|128,q[B++]=63&N|128):(q[B++]=N>>18|240,q[B++]=N>>12&63|128,q[B++]=N>>6&63|128,q[B++]=63&N|128)}return q},Qo=function(Y){let q=0;for(let B=0;B<Y.length;B++){const z=Y.charCodeAt(B);z<128?q++:z<2048?q+=2:z>=55296&&z<=56319?(q+=4,B++):q+=3}return q},ui=1e3,Bn=2,Ei=144e5,Yn=.5;function ki(Y,q=ui,B=Bn){const z=q*Math.pow(B,Y),N=Math.round(Yn*z*(Math.random()-.5)*2);return Math.min(Ei,z+N)}function dn(Y){return Y&&Y._delegate?Y._delegate:Y}},4081:(wt,Me,H)=>{var d=H(5879);let W=null;function F(){return W}class ce{}const ue=new d.OlP("DocumentToken");let Ie=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(we)},providedIn:"platform"}),i})();const Pe=new d.OlP("Location Initialized");let we=(()=>{class i extends Ie{constructor(){super(),this._doc=(0,d.f3M)(ue),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(e){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){this._history.pushState(e,r,o)}replaceState(e,r,o){this._history.replaceState(e,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return new i},providedIn:"platform"}),i})();function K(i,n){if(0==i.length)return n;if(0==n.length)return i;let e=0;return i.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?i+n.substring(1):1==e?i+n:i+"/"+n}function Z(i){const n=i.match(/#|\?|$/),e=n&&n.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function ae(i){return i&&"?"!==i[0]?"?"+i:i}let Ge=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(nt)},providedIn:"root"}),i})();const Le=new d.OlP("appBaseHref");let nt=(()=>{class i extends Ge{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return K(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+ae(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,s){const c=this.prepareExternalUrl(o+ae(s));this._platformLocation.pushState(e,r,c)}replaceState(e,r,o,s){const c=this.prepareExternalUrl(o+ae(s));this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Ie),d.LFG(Le,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ue=(()=>{class i extends Ge{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=K(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,s){let c=this.prepareExternalUrl(o+ae(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,r,c)}replaceState(e,r,o,s){let c=this.prepareExternalUrl(o+ae(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Ie),d.LFG(Le,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),it=(()=>{class i{constructor(e){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function se(i){if(new RegExp("^(https?:)?//").test(i)){const[,e]=i.split(/\/\/[^\/]+/);return e}return i}(Z(yt(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+ae(r))}normalize(e){return i.stripTrailingSlash(function kt(i,n){if(!i||!n.startsWith(i))return n;const e=n.substring(i.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,yt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ae(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ae(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r,complete:o})}}return i.normalizeQueryParams=ae,i.joinWithSlash=K,i.stripTrailingSlash=Z,i.\u0275fac=function(e){return new(e||i)(d.LFG(Ge))},i.\u0275prov=d.Yz7({token:i,factory:function(){return function He(){return new it((0,d.LFG)(Ge))}()},providedIn:"root"}),i})();function yt(i){return i.replace(/\/index.html$/,"")}const Ml=/\s+/,Yh=[];let br=(()=>{class i{constructor(e,r,o,s){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=o,this._renderer=s,this.initialClasses=Yh,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Ml):Yh}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Ml):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Ml).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class vp{constructor(n,e,r,o){this.$implicit=n,this.ngForOf=e,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gs=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,o){this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((o,s,c)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new vp(o.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,c),Ci(h,o)}});for(let o=0,s=r.length;o<s;o++){const h=r.get(o).context;h.index=o,h.count=s,h.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{Ci(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,r){return!0}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function Ci(i,n){i.context.$implicit=n.item}let no=(()=>{class i{constructor(e,r){this._viewContainer=e,this._context=new $_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Zh("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Zh("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class $_{constructor(){this.$implicit=null,this.ngIf=null}}function Zh(i,n){if(n&&!n.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,d.AaK)(n)}'.`)}class kc{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let aa=(()=>{class i{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const r of this._defaultViews)r.enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),Rc=(()=>{class i{constructor(e,r,o){this.ngSwitch=o,o._addCase(),this._view=new kc(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(aa,9))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),la=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:o,ngTemplateOutletContext:s,ngTemplateOutletInjector:c}=this;this._viewRef=r.createEmbeddedView(o,s,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[d.TTD]}),i})();class Ki{createSubscription(n,e){return(0,d.rg0)(()=>n.subscribe({next:e,error:r=>{throw r}}))}dispose(n){(0,d.rg0)(()=>n.unsubscribe())}}class An{createSubscription(n,e){return n.then(e,r=>{throw r})}dispose(n){}}const _s=new An,kr=new Ki;let Pc=(()=>{class i{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if((0,d.QGY)(e))return _s;if((0,d.F4k)(e))return kr;throw function Zt(i,n){return new d.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.sBO,16))},i.\u0275pipe=d.Yjl({name:"async",type:i,pure:!1,standalone:!0}),i})(),$r=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const Wa="browser";function Uo(i){return"server"===i}let ua=(()=>{class i{}return i.\u0275prov=(0,d.Yz7)({token:i,providedIn:"root",factory:()=>new io((0,d.LFG)(ue),window)}),i})();class io{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function qa(i,n){const e=i.getElementById(n)||i.getElementsByName(n)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&"function"==typeof i.body.attachShadow){const r=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const s=o.shadowRoot;if(s){const c=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],o-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=ha(this.window.history)||ha(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ha(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Qa extends ce{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Cr extends Qa{static makeCurrent(){!function ne(i){W||(W=i)}(new Cr)}onAndCancel(n,e,r){return n.addEventListener(e,r),()=>{n.removeEventListener(e,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function cf(){return Xa=Xa||document.querySelector("base"),Xa?Xa.getAttribute("href"):null}();return null==e?null:function xo(i){zs=zs||document.createElement("a"),zs.setAttribute("href",i);const n=zs.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){Xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function $a(i,n){n=encodeURIComponent(n);for(const e of i.split(";")){const r=e.indexOf("="),[o,s]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===n)return decodeURIComponent(s)}return null}(document.cookie,n)}}let zs,Xa=null,df=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const uf=new d.OlP("EventManagerPlugins");let es=(()=>{class i{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o){return this._findPluginFor(r).addEventListener(e,r,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(s=>s.supports(e)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(e,r),r}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(uf),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class hf{constructor(n){this._doc=n}}const vu="ng-app-id";let qc=(()=>{class i{constructor(e,r,o,s={}){this.doc=e,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Uo(s),this.resetHostNodes()}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.elements?.forEach(o=>o.remove()),r.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${vu}="${this.appId}"]`);if(e?.length){const r=new Map;return e.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(e,r){const o=this.styleRef;if(o.has(e)){const s=o.get(e);return s.usage+=r,s.usage}return o.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){const o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===e)return o.delete(r),s.removeAttribute(vu),s;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(vu,this.appId),c}}addStyleToHost(e,r){const o=this.getStyleElement(e,r);e.appendChild(o);const s=this.styleRef,c=s.get(r)?.elements;c?c.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(ue),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const Ja={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Eo=/%COMP%/g,K_=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function zl(i,n){return n.map(e=>e.replace(Eo,i))}let Co=(()=>{class i{constructor(e,r,o,s,c,h,p,y=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=s,this.doc=c,this.platformId=h,this.ngZone=p,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=Uo(h),this.defaultRenderer=new Yc(e,c,p,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const o=this.getOrCreateRenderer(e,r);return o instanceof fn?o.applyToHost(e):o instanceof Oe&&o.applyStyles(),o}getOrCreateRenderer(e,r){const o=this.rendererByCompId;let s=o.get(r.id);if(!s){const c=this.doc,h=this.ngZone,p=this.eventManager,y=this.sharedStylesHost,w=this.removeStylesOnCompDestory,I=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:s=new fn(p,y,r,this.appId,w,c,h,I);break;case d.ifc.ShadowDom:return new Op(p,y,e,r,c,h,this.nonce,I);default:s=new Oe(p,y,r,w,c,h,I)}s.onDestroy=()=>o.delete(r.id),o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(es),d.LFG(qc),d.LFG(d.AFp),d.LFG(K_),d.LFG(ue),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class Yc{constructor(n,e,r,o){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(Ja[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(mf(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(mf(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new d.vHH(5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,o){if(o){e=o+":"+e;const s=Ja[o];s?n.setAttributeNS(s,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){const o=Ja[r];o?n.removeAttributeNS(o,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,o){o&(d.JOm.DashCase|d.JOm.Important)?n.style.setProperty(e,r,o&d.JOm.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&d.JOm.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n[e]=r}setValue(n,e){n.nodeValue=e}listen(n,e,r){if("string"==typeof n&&!(n=F().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(r))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function mf(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Op extends Yc{constructor(n,e,r,o,s,c,h,p){super(n,s,c,p),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=zl(o.id,o.styles);for(const w of y){const I=document.createElement("style");h&&I.setAttribute("nonce",h),I.textContent=w,this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Oe extends Yc{constructor(n,e,r,o,s,c,h,p){super(n,s,c,h),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=p?zl(p,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class fn extends Oe{constructor(n,e,r,o,s,c,h,p){const y=o+"-"+r.id;super(n,e,r,s,c,h,p,y),this.contentAttr=function wu(i){return"_ngcontent-%COMP%".replace(Eo,i)}(y),this.hostAttr=function Rp(i){return"_nghost-%COMP%".replace(Eo,i)}(y)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}}let xu=(()=>{class i extends hf{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o){return e.addEventListener(r,o,!1),()=>this.removeEventListener(e,r,o)}removeEventListener(e,r,o){return e.removeEventListener(r,o)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(ue))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const Zc=["alt","control","meta","shift"],Fi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Np={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Qc=(()=>{class i extends hf{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,r,o){const s=i.parseEventName(r),c=i.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const r=e.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const s=i._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),Zc.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),c+=y+".")}),c+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=o,p.fullKey=c,p}static matchEventFullKeyCode(e,r){let o=Fi[e.key]||e.key,s="";return r.indexOf("code.")>-1&&(o=e.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Zc.forEach(c=>{c!==o&&(0,Np[c])(e)&&(s+=c+".")}),s+=o,s===r)}static eventCallback(e,r,o){return s=>{i.matchEventFullKeyCode(s,e)&&o.runGuarded(()=>r(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(ue))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const Xc=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Wa},{provide:d.g9A,useValue:function pf(){Cr.makeCurrent()},multi:!0},{provide:ue,useFactory:function cr(){return(0,d.RDi)(document),document},deps:[]}]),Xn=new d.OlP(""),ns=[{provide:d.rWj,useClass:class kp{addToWindow(n){d.dqk.getAngularTestability=(r,o=!0)=>{const s=n.findTestabilityInTree(r,o);if(null==s)throw new d.vHH(5103,!1);return s},d.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let s=o.length,c=!1;const h=function(p){c=c||p,s--,0==s&&r(c)};o.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(n,e,r){return null==e?null:n.getTestability(e)??(r?F().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Li=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function gf(){return new d.qLn},deps:[]},{provide:uf,useClass:xu,multi:!0,deps:[ue,d.R0b,d.Lbi]},{provide:uf,useClass:Qc,multi:!0,deps:[ue]},Co,qc,es,{provide:d.FYo,useExisting:Co},{provide:class wr{},useClass:df,deps:[]},[]];let Jc=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:d.AFp,useValue:e.appId}]}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Xn,12))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[...Li,...ns],imports:[$r,d.hGG]}),i})(),td=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(ue))},i.\u0275prov=d.Yz7({token:i,factory:function(e){let r=null;return r=e?new e:function Gl(){return new td((0,d.LFG)(ue))}(),r},providedIn:"root"}),i})();typeof window<"u"&&window;let tl=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(e){let r=null;return r=e?new(e||i):d.LFG(Tu),r},providedIn:"root"}),i})(),Tu=(()=>{class i extends tl{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new d.vHH(5200,!1);case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new d.vHH(5201,!1);default:throw new d.vHH(5202,!1)}}bypassSecurityTrustHtml(e){return(0,d.JVY)(e)}bypassSecurityTrustStyle(e){return(0,d.L6k)(e)}bypassSecurityTrustScript(e){return(0,d.eBb)(e)}bypassSecurityTrustUrl(e){return(0,d.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,d.pB0)(e)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(ue))},i.\u0275prov=d.Yz7({token:i,factory:function(e){let r=null;return r=e?new e:function Iu(i){return new Tu(i.get(ue))}(d.LFG(d.zs3)),r},providedIn:"root"}),i})();var is=H(3182),qt=H(8186);class Ws{constructor(n){return n}}class vs{constructor(){return(0,is.C6)()}}const il=new d.OlP("angularfire2._apps"),_a={provide:Ws,useFactory:function Mu(i){return i&&1===i.length?i[0]:new Ws((0,is.Mq)())},deps:[[new d.FiY,il]]},ku={provide:vs,deps:[[new d.FiY,il]]};function Up(i){return(n,e)=>{const r=n.runOutsideAngular(()=>i(e));return new Ws(r)}}let Kl=(()=>{class i{constructor(e){(0,is.KN)("angularfire",qt.q4.full,"core"),(0,is.KN)("angularfire",qt.q4.full,"app"),(0,is.KN)("angular",d.q4F.full,e.toString())}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.Lbi))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[_a,ku]}),i})();function Q_(i,...n){return{ngModule:Kl,providers:[{provide:il,useFactory:Up(i),multi:!0,deps:[d.R0b,d.zs3,qt.HU,...n]}]}}const xf=(0,qt.u3)(is.ZF,!0);var Ui=H(6304),Ht=H(8645),mt=H(2096),Bi=H(5592),rn=H(2459),ba=H(3019),qs=H(3093),Jn=H(4664),_t=H(7398),bs=H(4552);class Ef extends Ht.x{constructor(n=1/0,e=1/0,r=bs.l){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:s,_windowTime:c}=this;e||(r.push(n),!o&&r.push(s.now()+c)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:o}=this,s=o.slice();for(let c=0;c<s.length&&!n.closed;c+=r?1:2)n.next(s[c]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:o}=this,s=(o?1:2)*n;if(n<1/0&&s<r.length&&r.splice(0,r.length-s),!o){const c=e.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var Cf=H(3020);function Ks(i,n,e){let r,o=!1;return i&&"object"==typeof i?({bufferSize:r=1/0,windowTime:n=1/0,refCount:o=!1,scheduler:e}=i):r=i??1/0,(0,Cf.B)({connector:()=>new Ef(r,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const rl=(0,H(2306).d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});var Zi=H(9360),Ii=H(8251);function Cn(i,n){return(0,Zi.e)((e,r)=>{let o=0;e.subscribe((0,Ii.x)(r,s=>i.call(n,s,o++)&&r.next(s)))})}var Dr=H(6232);function Nr(i){return i<=0?()=>Dr.E:(0,Zi.e)((n,e)=>{let r=0;n.subscribe((0,Ii.x)(e,o=>{++r<=i&&(e.next(o),i<=r&&e.complete())}))})}function ol(i){return(0,Zi.e)((n,e)=>{let r=!1;n.subscribe((0,Ii.x)(e,o=>{r=!0,e.next(o)},()=>{r||e.next(i),e.complete()}))})}function Zl(i=sl){return(0,Zi.e)((n,e)=>{let r=!1;n.subscribe((0,Ii.x)(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(i())))})}function sl(){return new rl}var Ql=H(2737);function Ho(i,n){const e=arguments.length>=2;return r=>r.pipe(i?Cn((o,s)=>i(o,s,r)):Ql.y,Nr(1),e?ol(n):Zl(()=>new rl))}var qr=H(4674);function Df(i,n){return(0,qr.m)(n)?(0,Jn.w)(()=>i,n):(0,Jn.w)(()=>i)}var Xl=H(5137),xe=H(5861),$n=H(534),Qi=H(4537),V=H(9058),Kr=H(7879);const wa=new Map,ws={activated:!1,tokenObservers:[]},Ou={initialized:!1,enabled:!1};function Gn(i){return wa.get(i)||Object.assign({},ws)}function Jl(){return Ou}const ec="https://content-firebaseappcheck.googleapis.com/v1",l0="exchangeDebugToken",tc={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class X_{constructor(n,e,r,o,s){if(this.operation=n,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=o,o>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(n){var e=this;return(0,xe.Z)(function*(){e.stop();try{e.pending=new V.BH,yield function ei(i){return new Promise(n=>{setTimeout(n,i)})}(e.getNextRun(n)),e.pending.resolve(),yield e.pending.promise,e.pending=new V.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(n){if(n)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Ti=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ri(i){if(!Gn(i).activated)throw Ti.create("use-before-activation",{appName:i.name})}function Ca(i,n){return al.apply(this,arguments)}function al(){return(al=(0,xe.Z)(function*({url:i,body:n},e){const r={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){const I=yield o.getHeartbeatsHeader();I&&(r["X-Firebase-Client"]=I)}const s={method:"POST",body:JSON.stringify(n),headers:r};let c,h;try{c=yield fetch(i,s)}catch(I){throw Ti.create("fetch-network-error",{originalErrorMessage:I?.message})}if(200!==c.status)throw Ti.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(I){throw Ti.create("fetch-parse-error",{originalErrorMessage:I?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),w=Date.now();return{token:h.token,expireTimeMillis:w+y,issuedAtTimeMillis:w}})).apply(this,arguments)}function Sf(i,n){const{projectId:e,appId:r,apiKey:o}=i.options;return{url:`${ec}/projects/${e}/apps/${r}:${l0}?key=${o}`,body:{debug_token:n}}}const Af="firebase-app-check-database",C=1,S="firebase-app-check-store";let j=null;function jt(){return(jt=(0,xe.Z)(function*(i,n){const r=(yield function X(){return j||(j=new Promise((i,n)=>{try{const e=indexedDB.open(Af,C);e.onsuccess=r=>{i(r.target.result)},e.onerror=r=>{var o;n(Ti.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},e.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(S,{keyPath:"compositeKey"})}}catch(e){n(Ti.create("storage-open",{originalErrorMessage:e?.message}))}}),j)}()).transaction(S,"readwrite"),s=r.objectStore(S).put({compositeKey:i,value:n});return new Promise((c,h)=>{s.onsuccess=p=>{c()},r.onerror=p=>{var y;h(Ti.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const oo=new Kr.Yd("@firebase/app-check");function so(i,n){return(0,V.hl)()?function ye(i,n){return function bt(i,n){return jt.apply(this,arguments)}(function Xi(i){return`${i.options.appId}-${i.name}`}(i),n)}(i,n).catch(e=>{oo.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Uu(){return Jl().enabled}function ld(){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,xe.Z)(function*(){const i=Jl();if(i.enabled&&i.token)return i.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const nc={error:"UNKNOWN_ERROR"};function cd(i){return V.US.encodeString(JSON.stringify(i),!1)}function Rf(i){return ey.apply(this,arguments)}function ey(){return(ey=(0,xe.Z)(function*(i,n=!1){const e=i.app;Ri(e);const r=Gn(e);let s,o=r.token;if(o&&!_(o)&&(r.token=void 0,o=void 0),!o){const p=yield r.cachedTokenPromise;p&&(_(p)?o=p:yield so(e,void 0))}if(!n&&o&&_(o))return{token:o.token};let h,c=!1;if(Uu()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ca(Sf(e,yield ld()),i.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const p=yield r.exchangeTokenPromise;return yield so(e,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),o=yield Gn(e).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?oo.warn(p.message):oo.error(p),s=p}return o?s?h=_(o)?{token:o.token,internalError:s}:v(s):(h={token:o.token},r.token=o,yield so(e,o)):h=v(s),c&&function x(i,n){const e=Gn(i).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=n.error?r.error(n.error):r.next(n)}catch{}}(e,h),h})).apply(this,arguments)}function Bp(i){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,xe.Z)(function*(i){const n=i.app;Ri(n);const{provider:e}=Gn(n);if(Uu()){const r=yield ld(),{token:o}=yield Ca(Sf(n,r),i.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield e.getToken();return{token:r}}})).apply(this,arguments)}function Pf(i,n){const e=Gn(i),r=e.tokenObservers.filter(o=>o.next!==n);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=r}function ny(i){const{app:n}=i,e=Gn(n);let r=e.tokenRefresher;r||(r=function KC(i){const{app:n}=i;return new X_((0,xe.Z)(function*(){let r;if(r=Gn(n).token?yield Rf(i,!0):yield Rf(i),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const e=Gn(n);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},tc.RETRIAL_MIN_WAIT,tc.RETRIAL_MAX_WAIT)}(i),e.tokenRefresher=r),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function _(i){return i.expireTimeMillis-Date.now()>0}function v(i){return{token:cd(nc),error:i}}class D{constructor(n,e){this.app=n,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:n}=Gn(this.app);for(const e of n)Pf(this.app,e.next);return Promise.resolve()}}const YC="app-check-internal";!function ZC(){(0,$n._registerComponent)(new Qi.wA("app-check",i=>function R(i,n){return new D(i,n)}(i.getProvider("app").getImmediate(),i.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,n,e)=>{i.getProvider(YC).initialize()})),(0,$n._registerComponent)(new Qi.wA(YC,i=>function L(i){return{getToken:n=>Rf(i,n),getLimitedUseToken:()=>Bp(i),addTokenListener:n=>function ty(i,n,e,r){const{app:o}=i,s=Gn(o);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:r,type:n}],s.token&&_(s.token)){const h=s.token;Promise.resolve().then(()=>{e({token:h.token}),ny(i)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ny(i))}(i,"INTERNAL",n),removeTokenListener:n=>Pf(i.app,n)}}(i.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$n.registerVersion)("@firebase/app-check","0.8.0")}();class Bf{constructor(){return(0,qt.vb)("app-check")}}typeof window<"u"&&window;var jp=H(7142);const ay=new d.OlP("angularfire2.auth.use-emulator"),m0=new d.OlP("angularfire2.auth.settings"),p0=new d.OlP("angularfire2.auth.tenant-id"),$p=new d.OlP("angularfire2.auth.langugage-code"),Gp=new d.OlP("angularfire2.auth.use-device-language"),g0=new d.OlP("angularfire.auth.persistence"),zu=(i,n,e,r,o,s,c,h)=>(0,Ui.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const p=n.runOutsideAngular(()=>i.auth());if(e&&p.useEmulator(...e),r&&(p.tenantId=r),p.languageCode=o,s&&p.useDeviceLanguage(),c)for(const[y,w]of Object.entries(c))p.settings[y]=w;return h&&p.setPersistence(h),p},[e,r,o,s,c,h]);let Wp=(()=>{class i{constructor(e,r,o,s,c,h,p,y,w,I,A,P){const U=new Ht.x,G=(0,mt.of)(void 0).pipe((0,qs.Q)(c.outsideAngular),(0,Jn.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,6365)))),(0,_t.U)(()=>(0,Ui.on)(e,s,r)),(0,_t.U)(Q=>zu(Q,s,h,y,w,I,p,A)),Ks({bufferSize:1,refCount:!1}));if(Uo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,mt.of)(null);else{G.pipe(Ho()).subscribe();const me=G.pipe((0,Jn.w)(Te=>Te.getRedirectResult().then(Fe=>Fe,()=>null)),qt.iC,Ks({bufferSize:1,refCount:!1})),Ce=G.pipe((0,Jn.w)(Te=>new Bi.y(Fe=>({unsubscribe:s.runOutsideAngular(()=>Te.onAuthStateChanged(qe=>Fe.next(qe),qe=>Fe.error(qe),()=>Fe.complete()))})))),fe=G.pipe((0,Jn.w)(Te=>new Bi.y(Fe=>({unsubscribe:s.runOutsideAngular(()=>Te.onIdTokenChanged(qe=>Fe.next(qe),qe=>Fe.error(qe),()=>Fe.complete()))}))));this.authState=me.pipe(Df(Ce),(0,Xl.R)(c.outsideAngular),(0,qs.Q)(c.insideAngular)),this.user=me.pipe(Df(fe),(0,Xl.R)(c.outsideAngular),(0,qs.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Jn.w)(Te=>Te?(0,rn.D)(Te.getIdToken()):(0,mt.of)(null))),this.idTokenResult=this.user.pipe((0,Jn.w)(Te=>Te?(0,rn.D)(Te.getIdTokenResult()):(0,mt.of)(null))),this.credential=(0,ba.T)(me,U,this.authState.pipe(Cn(Te=>!Te))).pipe((0,_t.U)(Te=>Te?.user?Te:null),(0,Xl.R)(c.outsideAngular),(0,qs.Q)(c.insideAngular))}return(0,Ui.pX)(this,G,s,{spy:{apply:(Q,me,Ce)=>{(Q.startsWith("signIn")||Q.startsWith("createUser"))&&Ce.then(fe=>U.next(fe))}}})}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Ui.Dh),d.LFG(Ui.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qt.HU),d.LFG(ay,8),d.LFG(m0,8),d.LFG(p0,8),d.LFG($p,8),d.LFG(Gp,8),d.LFG(g0,8),d.LFG(Bf,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Rk=(()=>{class i{constructor(){jp.Z.registerVersion("angularfire",qt.q4.full,"auth-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[Wp]}),i})();var Vf=H(6321);function ju(i,n){return(0,Zi.e)(function JC(i,n,e,r,o){return(s,c)=>{let h=e,p=n,y=0;s.subscribe((0,Ii.x)(c,w=>{const I=y++;p=h?i(p,w,I):(h=!0,w),r&&c.next(p)},o&&(()=>{h&&c.next(p),c.complete()})))}}(i,n,arguments.length>=2,!0))}var dl=H(3997),Da=H(4829),ly=H(2420),dd=H(9940);H(6365);var _0=H(3106);const eD="@firebase/database";let y0="";function v0(i){y0=i}class b0{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,e){null==e?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,V.Wl)(e))}get(n){const e=this.domStorage_.getItem(this.prefixedName_(n));return null==e?null:(0,V.cI)(e)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class nD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,e){null==e?delete this.cache_[n]:this.cache_[n]=e}get(n){return(0,V.r3)(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const dy=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const n=window[i];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new b0(n)}}catch{}return new nD},$u=dy("localStorage"),w0=dy("sessionStorage"),ud=new Kr.Yd("@firebase/database"),x0=function(){let i=1;return function(){return i++}}(),hd=function(i){const n=(0,V.dS)(i),e=new V.gQ;e.update(n);const r=e.digest();return V.US.encodeByteArray(r)},Hf=function(...i){let n="";for(let e=0;e<i.length;e++){const r=i[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=Hf.apply(null,r):n+="object"==typeof r?(0,V.Wl)(r):r,n+=" "}return n};let fd=null,iD=!0;const Ok=function(i,n){(0,V.hu)(!n||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(ud.logLevel=Kr.in.VERBOSE,fd=ud.log.bind(ud),n&&w0.set("logging_enabled",!0)):"function"==typeof i?fd=i:(fd=null,w0.remove("logging_enabled"))},ur=function(...i){if(!0===iD&&(iD=!1,null===fd&&!0===w0.get("logging_enabled")&&Ok(!0)),fd){const n=Hf.apply(null,i);fd(n)}},qp=function(i){return function(...n){ur(i,...n)}},uy=function(...i){const n="FIREBASE INTERNAL ERROR: "+Hf(...i);ud.error(n)},Ia=function(...i){const n=`FIREBASE FATAL ERROR: ${Hf(...i)}`;throw ud.error(n),new Error(n)},ao=function(...i){const n="FIREBASE WARNING: "+Hf(...i);ud.warn(n)},Kp=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},Ys="[MIN_NAME]",ul="[MAX_NAME]",oc=function(i,n){if(i===n)return 0;if(i===Ys||n===ul)return-1;if(n===Ys||i===ul)return 1;{const e=py(i),r=py(n);return null!==e?null!==r?e-r==0?i.length-n.length:e-r:-1:null!==r?1:i<n?-1:1}},fy=function(i,n){return i===n?0:i<n?-1:1},zf=function(i,n){if(n&&i in n)return n[i];throw new Error("Missing required key ("+i+") in object: "+(0,V.Wl)(n))},Yp=function(i){if("object"!=typeof i||null===i)return(0,V.Wl)(i);const n=[];for(const r in i)n.push(r);n.sort();let e="{";for(let r=0;r<n.length;r++)0!==r&&(e+=","),e+=(0,V.Wl)(n[r]),e+=":",e+=Yp(i[n[r]]);return e+="}",e},jf=function(i,n){const e=i.length;if(e<=n)return[i];const r=[];for(let o=0;o<e;o+=n)r.push(i.substring(o,o+n>e?e:o+n));return r};function Yr(i,n){for(const e in i)i.hasOwnProperty(e)&&n(e,i[e])}const C0=function(i){(0,V.hu)(!Kp(i),"Invalid JSON number");const r=1023;let o,s,c,h,p;0===i?(s=0,c=0,o=1/i==-1/0?1:0):(o=i<0,(i=Math.abs(i))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(i)/Math.LN2),r),s=h+r,c=Math.round(i*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(i/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(o?1:0),y.reverse();const w=y.join("");let I="";for(p=0;p<64;p+=8){let A=parseInt(w.substr(p,8),2).toString(16);1===A.length&&(A="0"+A),I+=A}return I.toLowerCase()},rD=new RegExp("^-?(0*)\\d{1,10}$"),py=function(i){if(rD.test(i)){const n=Number(i);if(n>=-2147483648&&n<=2147483647)return n}return null},Ta=function(i){try{i()}catch(n){setTimeout(()=>{throw ao("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},Zp=function(i,n){const e=setTimeout(i,n);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class kL{constructor(n,e){this.appName_=n,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(r=>this.appCheck=r)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(e,r):e(null)},0)})}addTokenChangeListener(n){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(n))}notifyForInvalidToken(){ao(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Bk{constructor(n,e,r){this.appName_=n,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(e=>e&&"auth/token-not-initialized"===e.code?(ur("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(e,r):e(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(e=>e.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(e=>e.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ao(n)}}let Gu=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const I0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sD="websocket",aD="long_polling";class A0{constructor(n,e,r,o,s=!1,c="",h=!1,p=!1){this.secure=e,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$u.get("host:"+n)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&$u.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function hl(i,n,e){let r;if((0,V.hu)("string"==typeof n,"typeof type must == string"),(0,V.hu)("object"==typeof e,"typeof params must == object"),n===sD)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(n!==aD)throw new Error("Unknown connection type: "+n);r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function Vk(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(e.ns=i.namespace);const o=[];return Yr(e,(s,c)=>{o.push(s+"="+c)}),r+o.join("&")}class Gf{constructor(){this.counters_={}}incrementCounter(n,e=1){(0,V.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=e}get(){return(0,V.p$)(this.counters_)}}const M0={},k0={};function R0(i){const n=i.toString();return M0[n]||(M0[n]=new Gf),M0[n]}class zk{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,e){this.closeAfterResponse=n,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,e){for(this.pendingResponses[n]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Ta(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Wu{constructor(n,e,r,o,s,c,h){this.connId=n,this.repoInfo=e,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qp(n),this.stats_=R0(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),hl(e,aD,p))}open(n,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new zk(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,V.Yr)()||"complete"===document.readyState)i();else{let n=!1;const e=function(){document.body?n||(n=!0,i()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pD((...s)=>{const[c,h,p,y,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&I0.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wu.forceAllow_=!0}static forceDisallow(){Wu.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!Wu.forceAllow_&&(Wu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const e=(0,V.Wl)(n);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,V.h$)(e),o=jf(r,1840);for(let s=0;s<o.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[s]),this.curSegmentNum++}addDisconnectPingFrame(n,e){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=n,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const e=(0,V.Wl)(n).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class pD{constructor(n,e,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=n,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=x0(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=pD.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){ur("frame writing exception"),h.stack&&ur(h.stack),ur(h)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||ur("No IE domain setting required")}catch{const r=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,e){for(this.myID=n,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;let e=this.urlFn(n),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(n,e,r){this.pendingSegs.push({seg:n,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(n,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(n,()=>{clearTimeout(o),r()})}addTag(n,e){(0,V.Yr)()?this.doNodeLongPoll(n,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=n,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{ur("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let yy=null;typeof MozWebSocket<"u"?yy=MozWebSocket:typeof WebSocket<"u"&&(yy=WebSocket);let Wf=(()=>{class i{constructor(e,r,o,s,c,h,p){this.connId=e,this.applicationId=o,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qp(this.connId),this.stats_=R0(r),this.connURL=i.connectionURL_(r,h,p,s,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,o,s,c){const h={v:"5"};return!(0,V.Yr)()&&typeof location<"u"&&location.hostname&&I0.test(location.hostname)&&(h.r="f"),r&&(h.s=r),o&&(h.ls=o),s&&(h.ac=s),c&&(h.p=c),hl(e,sD,h)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$u.set("previous_websocket_failure",!0);try{let o;if((0,V.Yr)()){o={headers:{"User-Agent":`Firebase/5/${y0}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(o.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(o.proxy={origin:h})}this.mySock=new yy(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const s=o.message||o.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const s=o.message||o.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&null!==yy&&!i.forceDisallow_}static previouslyFailed(){return $u.isInMemoryStorage||!0===$u.get("previous_websocket_failure")}markConnectionHealthy(){$u.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,V.cI)(r);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const r=(0,V.Wl)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=jf(r,16384);o.length>1&&this.sendString_(String(o.length));for(let s=0;s<o.length;s++)this.sendString_(o[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),_D=(()=>{class i{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Wu,Wf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=Wf&&Wf.isAvailable();let o=r&&!Wf.previouslyFailed();if(e.webSocketOnly&&(r||ao("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Wf];else{const s=this.transports_=[];for(const c of i.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return i.globalTransportInitialized_=!1,i})();class B0{constructor(n,e,r,o,s,c,h,p,y,w){this.id=n,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qp("c:"+this.id+":"),this.transportManager_=new _D(e),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const o=n.healthyTimeout||0;o>0&&(this.healthyTimeout_=Zp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return e=>{n===this.conn_?this.onConnectionLost_(e):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return e=>{2!==this.state_&&(n===this.rx_?this.onPrimaryMessageReceived_(e):n===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(n){this.sendData_({t:"d",d:n})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if("t"in n){const e=n.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const e=zf("t",n),r=zf("d",n);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const e=zf("t",n),r=zf("d",n);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const e=zf("t",n);if("d"in n){const r=n.d;if("h"===e){const o=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?uy("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uy("Unknown control packet command: "+e)}}onHandshake_(n){const e=n.ts,r=n.v,o=n.h;this.sessionId=n.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&ao("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),Zp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,e){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($u.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Zk{put(n,e,r,o){}merge(n,e,r,o){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,e,r){}onDisconnectMerge(n,e,r){}onDisconnectCancel(n,e){}reportStats(n){}}class Qk{constructor(n){this.allowedEvents_=n,this.listeners_={},(0,V.hu)(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...e){if(Array.isArray(this.listeners_[n])){const r=[...this.listeners_[n]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)}}on(n,e,r){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:e,context:r});const o=this.getInitialEvent(n);o&&e.apply(r,o)}off(n,e,r){this.validateEventType_(n);const o=this.listeners_[n]||[];for(let s=0;s<o.length;s++)if(o[s].callback===e&&(!r||r===o[s].context))return void o.splice(s,1)}validateEventType_(n){(0,V.hu)(this.allowedEvents_.find(e=>e===n),"Unknown event: "+n)}}class pd extends Qk{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pd}getInitialEvent(n){return(0,V.hu)("online"===n,"Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}class Ln{constructor(n,e){if(void 0===e){this.pieces_=n.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=e}toString(){let n="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(n+="/"+this.pieces_[e]);return n||"/"}}function Mn(){return new Ln("")}function mn(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function ac(i){return i.pieces_.length-i.pieceNum_}function ii(i){let n=i.pieceNum_;return n<i.pieces_.length&&n++,new Ln(i.pieces_,n)}function by(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function qu(i,n=0){return i.pieces_.slice(i.pieceNum_+n)}function Xk(i){if(i.pieceNum_>=i.pieces_.length)return null;const n=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)n.push(i.pieces_[e]);return new Ln(n,0)}function gi(i,n){const e=[];for(let r=i.pieceNum_;r<i.pieces_.length;r++)e.push(i.pieces_[r]);if(n instanceof Ln)for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);else{const r=n.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&e.push(r[o])}return new Ln(e,0)}function yn(i){return i.pieceNum_>=i.pieces_.length}function lo(i,n){const e=mn(i),r=mn(n);if(null===e)return n;if(e===r)return lo(ii(i),ii(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+i+")")}function DD(i,n){const e=qu(i,0),r=qu(n,0);for(let o=0;o<e.length&&o<r.length;o++){const s=oc(e[o],r[o]);if(0!==s)return s}return e.length===r.length?0:e.length<r.length?-1:1}function wy(i,n){if(ac(i)!==ac(n))return!1;for(let e=i.pieceNum_,r=n.pieceNum_;e<=i.pieces_.length;e++,r++)if(i.pieces_[e]!==n.pieces_[r])return!1;return!0}function Zr(i,n){let e=i.pieceNum_,r=n.pieceNum_;if(ac(i)>ac(n))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==n.pieces_[r])return!1;++e,++r}return!0}class Jk{constructor(n,e){this.errorPrefix_=e,this.parts_=qu(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,V.ug)(this.parts_[r]);ID(this)}}function ID(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+lc(i))}function lc(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class Kf extends Qk{constructor(){let n,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[n];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Kf}getInitialEvent(n){return(0,V.hu)("visible"===n,"Unknown event type: "+n),[this.visible_]}}const Sa=1e3;let Yf,Yu=(()=>{class i extends Zk{constructor(e,r,o,s,c,h,p,y){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=i.nextPersistentConnectionId_++,this.log_=qp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sa,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Kf.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&pd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,o){const s=++this.requestNumber_,c={r:s,a:e,b:r};this.log_((0,V.Wl)(c)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[s]=o)}get(e){this.initConnection_();const r=new V.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(e,r,o,s){this.initConnection_();const c=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:e,tag:o};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(e){const r=e.query,o=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+o+" for "+s);const c={p:o};e.tag&&(c.q=r._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const y=p.d,w=p.s;i.warnOnListenWarnings_(y,r),(this.listens.get(o)&&this.listens.get(o).get(s))===e&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(o,s),e.onComplete&&e.onComplete(w,y))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,V.r3)(e,"w")){const o=(0,V.DV)(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ao(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,V.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,V.w9)(e)?"auth":"gauth",o={cred:e};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,s=>{const c=s.s,h=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,o=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(e,r){const o=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+s),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,s)&&this.connected_&&this.sendUnlisten_(o,s,e._queryObject,r)}sendUnlisten_(e,r,o,s){this.log_("Unlisten on "+e+" for "+r);const c={p:e};s&&(c.q=o,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:o})}onDisconnectMerge(e,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:o})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,o,s){const c={p:r,d:o};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(e,r,o,s){this.putInternal("p",e,r,o,s)}merge(e,r,o,s){this.putInternal("m",e,r,o,s)}putInternal(e,r,o,s,c){this.initConnection_();const h={p:r,d:o};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:e,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,V.Wl)(e));const r=e.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):uy("Unrecognized action received from server: "+(0,V.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Sa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Sa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,xe.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),o=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+i.nextConnectionId_++,h=e.lastSessionId;let p=!1,y=null;const w=function(){y?y.close():(p=!0,s())};e.realtime_={close:w,sendRequest:function(P){(0,V.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const A=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,U]=yield Promise.all([e.authTokenProvider_.getToken(A),e.appCheckTokenProvider_.getToken(A)]);p?ur("getToken() completed but was canceled"):(ur("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=U&&U.token,y=new B0(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,o,s,G=>{ao(G+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(P){e.log_("Failed to get token: "+P),p||(e.repoInfo_.nodeAdmin&&ao(P),w())}}})()}interrupt(e){ur("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ur("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Sa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let o;o=r?r.map(c=>Yp(c)).join("$"):"default";const s=this.removeListen_(e,o);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,r){const o=new Ln(e).toString();let s;if(this.listens.has(o)){const c=this.listens.get(o);s=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else s=void 0;return s}onAuthRevoked_(e,r){ur("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){ur("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,V.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+y0.replace(/\./g,"-")]=1,(0,V.uI)()?e["framework.cordova"]=1:(0,V.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=pd.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&e}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class wn{constructor(n,e){this.name=n,this.node=e}static Wrap(n,e){return new wn(n,e)}}class Cy{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,e){const r=new wn(Ys,n),o=new wn(Ys,e);return 0!==this.compare(r,o)}minPost(){return wn.MIN}}class z0 extends Cy{static get __EMPTY_NODE(){return Yf}static set __EMPTY_NODE(n){Yf=n}compare(n,e){return oc(n.name,e.name)}isDefinedOn(n){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,e){return!1}minPost(){return wn.MIN}maxPost(){return new wn(ul,Yf)}makePost(n,e){return(0,V.hu)("string"==typeof n,"KeyIndex indexValue must always be a string."),new wn(n,Yf)}toString(){return".key"}}const fl=new z0;class eg{constructor(n,e,r,o,s=null){this.isReverse_=o,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!n.isEmpty();)if(c=e?r(n.key,e):1,o&&(c*=-1),c<0)n=this.isReverse_?n.left:n.right;else{if(0===c){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,n=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}let SD,Es=(()=>{class i{constructor(e,r,o,s,c){this.key=e,this.value=r,this.color=o??i.RED,this.left=s??rs.EMPTY_NODE,this.right=c??rs.EMPTY_NODE}copy(e,r,o,s,c){return new i(e??this.key,r??this.value,o??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,o){let s=this;const c=o(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,r,o),null):0===c?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,o)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return rs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let o,s;if(o=this,r(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(e,o.key)){if(o.right.isEmpty())return rs.EMPTY_NODE;s=o.right.min_(),o=o.copy(s.key,s.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class rs{constructor(n,e=rs.EMPTY_NODE){this.comparator_=n,this.root_=e}insert(n,e){return new rs(this.comparator_,this.root_.insert(n,e,this.comparator_).copy(null,null,Es.BLACK,null,null))}remove(n){return new rs(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Es.BLACK,null,null))}get(n){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(n,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(n){let e,r=this.root_,o=null;for(;!r.isEmpty();){if(e=this.comparator_(n,r.key),0===e){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new eg(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,e){return new eg(this.root_,n,this.comparator_,!1,e)}getReverseIteratorFrom(n,e){return new eg(this.root_,n,this.comparator_,!0,e)}getReverseIterator(n){return new eg(this.root_,null,this.comparator_,!0,n)}}function n1(i,n){return oc(i.name,n.name)}function j0(i,n){return oc(i,n)}rs.EMPTY_NODE=new class PL{copy(n,e,r,o,s){return this}insert(n,e,r){return new Es(n,e,null)}remove(n,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tg=function(i){return"number"==typeof i?"number:"+C0(i):"string:"+i},AD=function(i){if(i.isLeafNode()){const n=i.val();(0,V.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,V.r3)(n,".sv"),"Priority must be a string or number.")}else(0,V.hu)(i===SD||i.isEmpty(),"priority of unexpected type.");(0,V.hu)(i===SD||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Dy,Zf,Iy,gd=(()=>{class i{constructor(e,r=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AD(this.priorityNode_)}static set __childrenNodeConstructor(e){Dy=e}static get __childrenNodeConstructor(){return Dy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return yn(e)?this:".priority"===mn(e)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const o=mn(e);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,V.hu)(".priority"!==o||1===ac(e),".priority must be the last token in a path"),this.updateImmediateChild(o,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(ii(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+tg(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?C0(this.value_):this.value_,this.lazyHash_=hd(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:((0,V.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,o=typeof this.value_,s=i.VALUE_TYPE_ORDER.indexOf(r),c=i.VALUE_TYPE_ORDER.indexOf(o);return(0,V.hu)(s>=0,"Unknown leaf type: "+r),(0,V.hu)(c>=0,"Unknown leaf type: "+o),s===c?"object"===o?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Hn=new class Ty extends Cy{compare(n,e){const r=n.node.getPriority(),o=e.node.getPriority(),s=r.compareTo(o);return 0===s?oc(n.name,e.name):s}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,e){return!n.getPriority().equals(e.getPriority())}minPost(){return wn.MIN}maxPost(){return new wn(ul,new gd("[PRIORITY-POST]",Iy))}makePost(n,e){const r=Zf(n);return new wn(e,new gd("[PRIORITY-POST]",r))}toString(){return".priority"}},MD=Math.log(2);class G0{constructor(n){this.count=parseInt(Math.log(n+1)/MD,10),this.current_=this.count-1;const o=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=n+1&o}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Zu=function(i,n,e,r){i.sort(n);const o=function(p,y){const w=y-p;let I,A;if(0===w)return null;if(1===w)return I=i[p],A=e?e(I):I,new Es(A,I.node,Es.BLACK,null,null);{const P=parseInt(w/2,10)+p,U=o(p,P),G=o(P+1,y);return I=i[P],A=e?e(I):I,new Es(A,I.node,Es.BLACK,U,G)}},h=function(p){let y=null,w=null,I=i.length;const A=function(U,G){const Q=I-U,me=I;I-=U;const Ce=o(Q+1,me),fe=i[Q],Te=e?e(fe):fe;P(new Es(Te,fe.node,G,null,Ce))},P=function(U){y?(y.left=U,y=U):(w=U,y=U)};for(let U=0;U<p.count;++U){const G=p.nextBitIsOne(),Q=Math.pow(2,p.count-(U+1));G?A(Q,Es.BLACK):(A(Q,Es.BLACK),A(Q,Es.RED))}return w}(new G0(i.length));return new rs(r||n,h)};let kD;const _d={};class Aa{constructor(n,e){this.indexes_=n,this.indexSet_=e}static get Default(){return(0,V.hu)(_d&&Hn,"ChildrenNode.ts has not been loaded"),kD=kD||new Aa({".priority":_d},{".priority":Hn}),kD}get(n){const e=(0,V.DV)(this.indexes_,n);if(!e)throw new Error("No index defined for "+n);return e instanceof rs?e:null}hasIndex(n){return(0,V.r3)(this.indexSet_,n.toString())}addIndex(n,e){(0,V.hu)(n!==fl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const s=e.getIterator(wn.Wrap);let h,c=s.getNext();for(;c;)o=o||n.isDefinedOn(c.node),r.push(c),c=s.getNext();h=o?Zu(r,n.getCompare()):_d;const p=n.toString(),y=Object.assign({},this.indexSet_);y[p]=n;const w=Object.assign({},this.indexes_);return w[p]=h,new Aa(w,y)}addToIndexes(n,e){const r=(0,V.UI)(this.indexes_,(o,s)=>{const c=(0,V.DV)(this.indexSet_,s);if((0,V.hu)(c,"Missing index implementation for "+s),o===_d){if(c.isDefinedOn(n.node)){const h=[],p=e.getIterator(wn.Wrap);let y=p.getNext();for(;y;)y.name!==n.name&&h.push(y),y=p.getNext();return h.push(n),Zu(h,c.getCompare())}return _d}{const h=e.get(n.name);let p=o;return h&&(p=p.remove(new wn(n.name,h))),p.insert(n,n.node)}});return new Aa(r,this.indexSet_)}removeFromIndexes(n,e){const r=(0,V.UI)(this.indexes_,o=>{if(o===_d)return o;{const s=e.get(n.name);return s?o.remove(new wn(n.name,s)):o}});return new Aa(r,this.indexSet_)}}let Qf,sn=(()=>{class i{constructor(e,r,o){this.children_=e,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&AD(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Qf||(Qf=new i(new rs(j0),null,Aa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qf}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?Qf:r}}getChild(e){const r=mn(e);return null===r?this:this.getImmediateChild(r).getChild(ii(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,V.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const o=new wn(e,r);let s,c;r.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(o,this.children_)):(s=this.children_.insert(e,r),c=this.indexMap_.addToIndexes(o,this.children_));const h=s.isEmpty()?Qf:this.priorityNode_;return new i(s,h,c)}}updateChild(e,r){const o=mn(e);if(null===o)return r;{(0,V.hu)(".priority"!==mn(e)||1===ac(e),".priority must be the last token in a path");const s=this.getImmediateChild(o).updateChild(ii(e),r);return this.updateImmediateChild(o,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let o=0,s=0,c=!0;if(this.forEachChild(Hn,(h,p)=>{r[h]=p.val(e),o++,c&&i.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!e&&c&&s<2*o){const h=[];for(const p in r)h[p]=r[p];return h}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+tg(this.getPriority().val())+":"),this.forEachChild(Hn,(r,o)=>{const s=o.hash();""!==s&&(e+=":"+r+":"+s)}),this.lazyHash_=""===e?"":hd(e)}return this.lazyHash_}getPredecessorChildName(e,r,o){const s=this.resolveIndex_(o);if(s){const c=s.getPredecessorKey(new wn(e,r));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new wn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new wn(r,this.children_.get(r)):null}forEachChild(e,r){const o=this.resolveIndex_(e);return o?o.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,wn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,wn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xf?-1:0}withIndex(e){if(e===fl||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===fl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Hn),s=r.getIterator(Hn);let c=o.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=o.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(e){return e===fl?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const Xf=new class r1 extends sn{constructor(){super(new rs(j0),sn.EMPTY_NODE,Aa.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return sn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(wn,{MIN:{value:new wn(Ys,sn.EMPTY_NODE)},MAX:{value:new wn(ul,Xf)}}),z0.__EMPTY_NODE=sn.EMPTY_NODE,gd.__childrenNodeConstructor=sn,function OL(i){SD=i}(Xf),function ng(i){Iy=i}(Xf);const RD=!0;function Hi(i,n=null){if(null===i)return sn.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(n=i[".priority"]),(0,V.hu)(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new gd(i,Hi(n));if(i instanceof Array||!RD){let e=sn.EMPTY_NODE;return Yr(i,(r,o)=>{if((0,V.r3)(i,r)&&"."!==r.substring(0,1)){const s=Hi(o);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(r,s))}}),e.updatePriority(Hi(n))}{const e=[];let r=!1;if(Yr(i,(c,h)=>{if("."!==c.substring(0,1)){const p=Hi(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),e.push(new wn(c,p)))}}),0===e.length)return sn.EMPTY_NODE;const s=Zu(e,n1,c=>c.name,j0);if(r){const c=Zu(e,Hn.getCompare());return new sn(s,Hi(n),new Aa({".priority":c},{".priority":Hn}))}return new sn(s,Hi(n),Aa.Default)}}!function $0(i){Zf=i}(Hi);class W0 extends Cy{constructor(n){super(),this.indexPath_=n,(0,V.hu)(!yn(n)&&".priority"!==mn(n),"Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,e){const r=this.extractChild(n.node),o=this.extractChild(e.node),s=r.compareTo(o);return 0===s?oc(n.name,e.name):s}makePost(n,e){const r=Hi(n),o=sn.EMPTY_NODE.updateChild(this.indexPath_,r);return new wn(e,o)}maxPost(){const n=sn.EMPTY_NODE.updateChild(this.indexPath_,Xf);return new wn(ul,n)}toString(){return qu(this.indexPath_,0).join("/")}}const q0=new class NL extends Cy{compare(n,e){const r=n.node.compareTo(e.node);return 0===r?oc(n.name,e.name):r}isDefinedOn(n){return!0}indexedValueChanged(n,e){return!n.equals(e)}minPost(){return wn.MIN}maxPost(){return wn.MAX}makePost(n,e){const r=Hi(n);return new wn(e,r)}toString(){return".value"}};function Sy(i){return{type:"value",snapshotNode:i}}function yd(i,n){return{type:"child_added",snapshotNode:n,childName:i}}function ig(i,n){return{type:"child_removed",snapshotNode:n,childName:i}}function Jf(i,n,e){return{type:"child_changed",snapshotNode:n,childName:i,oldSnap:e}}class em{constructor(n){this.index_=n}updateChild(n,e,r,o,s,c){(0,V.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=n.getImmediateChild(e);return h.getChild(o).equals(r.getChild(o))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?n.hasChild(e)?c.trackChildChange(ig(e,h)):(0,V.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(yd(e,r)):c.trackChildChange(Jf(e,r,h))),n.isLeafNode()&&r.isEmpty())?n:n.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(n,e,r){return null!=r&&(n.isLeafNode()||n.forEachChild(Hn,(o,s)=>{e.hasChild(o)||r.trackChildChange(ig(o,s))}),e.isLeafNode()||e.forEachChild(Hn,(o,s)=>{if(n.hasChild(o)){const c=n.getImmediateChild(o);c.equals(s)||r.trackChildChange(Jf(o,s,c))}else r.trackChildChange(yd(o,s))})),e.withIndex(this.index_)}updatePriority(n,e){return n.isEmpty()?sn.EMPTY_NODE:n.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class rg{constructor(n){this.indexedFilter_=new em(n.getIndex()),this.index_=n.getIndex(),this.startPost_=rg.getStartPost_(n),this.endPost_=rg.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,r=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return e&&r}updateChild(n,e,r,o,s,c){return this.matches(new wn(e,r))||(r=sn.EMPTY_NODE),this.indexedFilter_.updateChild(n,e,r,o,s,c)}updateFullNode(n,e,r){e.isLeafNode()&&(e=sn.EMPTY_NODE);let o=e.withIndex(this.index_);o=o.updatePriority(sn.EMPTY_NODE);const s=this;return e.forEachChild(Hn,(c,h)=>{s.matches(new wn(c,h))||(o=o.updateImmediateChild(c,sn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,o,r)}updatePriority(n,e){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const e=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),e)}return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const e=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),e)}return n.getIndex().maxPost()}}class PD{constructor(n){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=e=>{const r=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new rg(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,e,r,o,s,c){return this.rangedFilter_.matches(new wn(e,r))||(r=sn.EMPTY_NODE),n.getImmediateChild(e).equals(r)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,e,r,o,s,c):this.fullLimitUpdateChild_(n,e,r,s,c)}updateFullNode(n,e,r){let o;if(e.isLeafNode()||e.isEmpty())o=sn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;o=sn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;o=o.updateImmediateChild(h.name,h.node),c++}}}else{let s;o=e.withIndex(this.index_),o=o.updatePriority(sn.EMPTY_NODE),s=this.reverse_?o.getReverseIterator(this.index_):o.getIterator(this.index_);let c=0;for(;s.hasNext();){const h=s.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:o=o.updateImmediateChild(h.name,sn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,o,r)}updatePriority(n,e){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,e,r,o,s){let c;if(this.reverse_){const I=this.index_.getCompare();c=(A,P)=>I(P,A)}else c=this.index_.getCompare();const h=n;(0,V.hu)(h.numChildren()===this.limit_,"");const p=new wn(e,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(h.hasChild(e)){const I=h.getImmediateChild(e);let A=o.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=A&&(A.name===e||h.hasChild(A.name));)A=o.getChildAfterChild(this.index_,A,this.reverse_);const P=null==A?1:c(A,p);if(w&&!r.isEmpty()&&P>=0)return s?.trackChildChange(Jf(e,r,I)),h.updateImmediateChild(e,r);{s?.trackChildChange(ig(e,I));const G=h.updateImmediateChild(e,sn.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(s?.trackChildChange(yd(A.name,A.node)),G.updateImmediateChild(A.name,A.node)):G}}return r.isEmpty()?n:w&&c(y,p)>=0?(null!=s&&(s.trackChildChange(ig(y.name,y.node)),s.trackChildChange(yd(e,r))),h.updateImmediateChild(e,r).updateImmediateChild(y.name,sn.EMPTY_NODE)):n}}class Ay{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ys}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ul}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Hn}copy(){const n=new Ay;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function Qu(i,n,e){const r=i.copy();return r.startSet_=!0,void 0===n&&(n=null),r.indexStartValue_=n,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function vd(i,n,e){const r=i.copy();return r.endSet_=!0,void 0===n&&(n=null),r.indexEndValue_=n,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function My(i,n){const e=i.copy();return e.index_=n,e}function Y0(i){const n={};if(i.isDefault())return n;let e;if(i.index_===Hn?e="$priority":i.index_===q0?e="$value":i.index_===fl?e="$key":((0,V.hu)(i.index_ instanceof W0,"Unrecognized index type!"),e=i.index_.toString()),n.orderBy=(0,V.Wl)(e),i.startSet_){const r=i.startAfterSet_?"startAfter":"startAt";n[r]=(0,V.Wl)(i.indexStartValue_),i.startNameSet_&&(n[r]+=","+(0,V.Wl)(i.indexStartName_))}if(i.endSet_){const r=i.endBeforeSet_?"endBefore":"endAt";n[r]=(0,V.Wl)(i.indexEndValue_),i.endNameSet_&&(n[r]+=","+(0,V.Wl)(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?n.limitToFirst=i.limit_:n.limitToLast=i.limit_),n}function ND(i){const n={};if(i.startSet_&&(n.sp=i.indexStartValue_,i.startNameSet_&&(n.sn=i.indexStartName_),n.sin=!i.startAfterSet_),i.endSet_&&(n.ep=i.indexEndValue_,i.endNameSet_&&(n.en=i.indexEndName_),n.ein=!i.endBeforeSet_),i.limitSet_){n.l=i.limit_;let e=i.viewFrom_;""===e&&(e=i.isViewFromLeft()?"l":"r"),n.vf=e}return i.index_!==Hn&&(n.i=i.index_.toString()),n}class ky extends Zk{constructor(n,e,r,o){super(),this.repoInfo_=n,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=qp("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,e){return void 0!==e?"tag$"+e:((0,V.hu)(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,e,r,o){const s=n._path.toString();this.log_("Listen called for "+s+" "+n._queryIdentifier);const c=ky.getListenId_(n,r),h={};this.listens_[c]=h;const p=Y0(n._queryParams);this.restRequest_(s+".json",p,(y,w)=>{let I=w;if(404===y&&(I=null,y=null),null===y&&this.onDataUpdate_(s,I,!1,r),(0,V.DV)(this.listens_,c)===h){let A;A=y?401===y?"permission_denied":"rest_error:"+y:"ok",o(A,null)}})}unlisten(n,e){const r=ky.getListenId_(n,e);delete this.listens_[r]}get(n){const e=Y0(n._queryParams),r=n._path.toString(),o=new V.BH;return this.restRequest_(r+".json",e,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),o.resolve(h)):o.reject(new Error(h))}),o.promise}refreshAuthToken(n){}restRequest_(n,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,s])=>{o&&o.accessToken&&(e.auth=o.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+(0,V.xO)(e);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,V.cI)(h.responseText)}catch{ao("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&ao("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class a1{constructor(){this.rootNode_=sn.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,e){this.rootNode_=this.rootNode_.updateChild(n,e)}}function sg(){return{value:null,children:new Map}}function Xu(i,n,e){if(yn(n))i.value=e,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(n,e);else{const r=mn(n);i.children.has(r)||i.children.set(r,sg()),Xu(i.children.get(r),n=ii(n),e)}}function ag(i,n){if(yn(n))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const e=i.value;return i.value=null,e.forEachChild(Hn,(r,o)=>{Xu(i,new Ln(r),o)}),ag(i,n)}}if(i.children.size>0){const e=mn(n);return n=ii(n),i.children.has(e)&&ag(i.children.get(e),n)&&i.children.delete(e),0===i.children.size}return!0}function Ju(i,n,e){null!==i.value?e(n,i.value):function FD(i,n){i.children.forEach((e,r)=>{n(r,e)})}(i,(r,o)=>{Ju(o,new Ln(n.toString()+"/"+r),e)})}class LL{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),e=Object.assign({},n);return this.last_&&Yr(this.last_,(r,o)=>{e[r]=e[r]-o}),this.last_=n,e}}class LD{constructor(n,e){this.server_=e,this.statsToReport_={},this.statsListener_=new LL(n);const r=1e4+2e4*Math.random();Zp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const n=this.statsListener_.get(),e={};let r=!1;Yr(n,(o,s)=>{s>0&&(0,V.r3)(this.statsToReport_,o)&&(e[o]=s,r=!0)}),r&&this.server_.reportStats(e),Zp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var hr=(()=>((hr=hr||{})[hr.OVERWRITE=0]="OVERWRITE",hr[hr.MERGE=1]="MERGE",hr[hr.ACK_USER_WRITE=2]="ACK_USER_WRITE",hr[hr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",hr))();function X0(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class Oy{constructor(n,e,r){this.path=n,this.affectedTree=e,this.revert=r,this.type=hr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(n){if(yn(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Ln(n));return new Oy(Mn(),e,this.revert)}}return(0,V.hu)(mn(this.path)===n,"operationForChild called for unrelated child."),new Oy(ii(this.path),this.affectedTree,this.revert)}}class lg{constructor(n,e){this.source=n,this.path=e,this.type=hr.LISTEN_COMPLETE}operationForChild(n){return yn(this.path)?new lg(this.source,Mn()):new lg(this.source,ii(this.path))}}class bd{constructor(n,e,r){this.source=n,this.path=e,this.snap=r,this.type=hr.OVERWRITE}operationForChild(n){return yn(this.path)?new bd(this.source,Mn(),this.snap.getImmediateChild(n)):new bd(this.source,ii(this.path),this.snap)}}class eh{constructor(n,e,r){this.source=n,this.path=e,this.children=r,this.type=hr.MERGE}operationForChild(n){if(yn(this.path)){const e=this.children.subtree(new Ln(n));return e.isEmpty()?null:e.value?new bd(this.source,Mn(),e.value):new eh(this.source,Mn(),e)}return(0,V.hu)(mn(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new eh(this.source,ii(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Cs{constructor(n,e,r){this.node_=n,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(yn(n))return this.isFullyInitialized()&&!this.filtered_;const e=mn(n);return this.isCompleteForChild(e)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class cc{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function Ny(i,n,e,r,o,s){const c=r.filter(h=>h.type===e);c.sort((h,p)=>function UL(i,n,e){if(null==n.childName||null==e.childName)throw(0,V.g5)("Should only compare child_ events.");const r=new wn(n.childName,n.snapshotNode),o=new wn(e.childName,e.snapshotNode);return i.index_.compare(r,o)}(i,h,p)),c.forEach(h=>{const p=function l1(i,n,e){return"value"===n.type||"child_removed"===n.type||(n.prevName=e.getPredecessorChildName(n.childName,n.snapshotNode,i.index_)),n}(i,h,s);o.forEach(y=>{y.respondsTo(h.type)&&n.push(y.createEvent(p,i.query_))})})}function J0(i,n){return{eventCache:i,serverCache:n}}function nm(i,n,e,r){return J0(new Cs(n,e,r),i.serverCache)}function ew(i,n,e,r){return J0(i.eventCache,new Cs(n,e,r))}function tw(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function wd(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let im;class ri{constructor(n,e=(()=>(im||(im=new rs(fy)),im))()){this.value=n,this.children=e}static fromObject(n){let e=new ri(null);return Yr(n,(r,o)=>{e=e.set(new Ln(r),o)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,e){if(null!=this.value&&e(this.value))return{path:Mn(),value:this.value};if(yn(n))return null;{const r=mn(n),o=this.children.get(r);if(null!==o){const s=o.findRootMostMatchingPathAndValue(ii(n),e);return null!=s?{path:gi(new Ln(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(yn(n))return this;{const e=mn(n),r=this.children.get(e);return null!==r?r.subtree(ii(n)):new ri(null)}}set(n,e){if(yn(n))return new ri(e,this.children);{const r=mn(n),s=(this.children.get(r)||new ri(null)).set(ii(n),e),c=this.children.insert(r,s);return new ri(this.value,c)}}remove(n){if(yn(n))return this.children.isEmpty()?new ri(null):new ri(null,this.children);{const e=mn(n),r=this.children.get(e);if(r){const o=r.remove(ii(n));let s;return s=o.isEmpty()?this.children.remove(e):this.children.insert(e,o),null===this.value&&s.isEmpty()?new ri(null):new ri(this.value,s)}return this}}get(n){if(yn(n))return this.value;{const e=mn(n),r=this.children.get(e);return r?r.get(ii(n)):null}}setTree(n,e){if(yn(n))return e;{const r=mn(n),s=(this.children.get(r)||new ri(null)).setTree(ii(n),e);let c;return c=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new ri(this.value,c)}}fold(n){return this.fold_(Mn(),n)}fold_(n,e){const r={};return this.children.inorderTraversal((o,s)=>{r[o]=s.fold_(gi(n,o),e)}),e(n,this.value,r)}findOnPath(n,e){return this.findOnPath_(n,Mn(),e)}findOnPath_(n,e,r){const o=!!this.value&&r(e,this.value);if(o)return o;if(yn(n))return null;{const s=mn(n),c=this.children.get(s);return c?c.findOnPath_(ii(n),gi(e,s),r):null}}foreachOnPath(n,e){return this.foreachOnPath_(n,Mn(),e)}foreachOnPath_(n,e,r){if(yn(n))return this;{this.value&&r(e,this.value);const o=mn(n),s=this.children.get(o);return s?s.foreachOnPath_(ii(n),gi(e,o),r):new ri(null)}}foreach(n){this.foreach_(Mn(),n)}foreach_(n,e){this.children.inorderTraversal((r,o)=>{o.foreach_(gi(n,r),e)}),this.value&&e(n,this.value)}foreachChild(n){this.children.inorderTraversal((e,r)=>{r.value&&n(e,r.value)})}}class Zs{constructor(n){this.writeTree_=n}static empty(){return new Zs(new ri(null))}}function Qt(i,n,e){if(yn(n))return new Zs(new ri(e));{const r=i.writeTree_.findRootMostValueAndPath(n);if(null!=r){const o=r.path;let s=r.value;const c=lo(o,n);return s=s.updateChild(c,e),new Zs(i.writeTree_.set(o,s))}{const o=new ri(e),s=i.writeTree_.setTree(n,o);return new Zs(s)}}}function Fy(i,n,e){let r=i;return Yr(e,(o,s)=>{r=Qt(r,gi(n,o),s)}),r}function nw(i,n){if(yn(n))return Zs.empty();{const e=i.writeTree_.setTree(n,new ri(null));return new Zs(e)}}function VD(i,n){return null!=th(i,n)}function th(i,n){const e=i.writeTree_.findRootMostValueAndPath(n);return null!=e?i.writeTree_.get(e.path).getChild(lo(e.path,n)):null}function iw(i){const n=[],e=i.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Hn,(r,o)=>{n.push(new wn(r,o))}):i.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&n.push(new wn(r,o.value))}),n}function xd(i,n){if(yn(n))return i;{const e=th(i,n);return new Zs(null!=e?new ri(e):i.writeTree_.subtree(n))}}function rw(i){return i.writeTree_.isEmpty()}function nh(i,n){return HD(Mn(),i.writeTree_,n)}function HD(i,n,e){if(null!=n.value)return e.updateChild(i,n.value);{let r=null;return n.children.inorderTraversal((o,s)=>{".priority"===o?((0,V.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):e=HD(gi(i,o),s,e)}),!e.getChild(i).isEmpty()&&null!==r&&(e=e.updateChild(gi(i,".priority"),r)),e}}function cg(i,n){return dw(n,i)}function jD(i,n){if(i.snap)return Zr(i.path,n);for(const e in i.children)if(i.children.hasOwnProperty(e)&&Zr(gi(i.path,e),n))return!0;return!1}function rm(i){return i.visible}function ow(i,n,e){let r=Zs.empty();for(let o=0;o<i.length;++o){const s=i[o];if(n(s)){const c=s.path;let h;if(s.snap)Zr(e,c)?(h=lo(e,c),r=Qt(r,h,s.snap)):Zr(c,e)&&(h=lo(c,e),r=Qt(r,Mn(),s.snap.getChild(h)));else{if(!s.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(Zr(e,c))h=lo(e,c),r=Fy(r,h,s.children);else if(Zr(c,e))if(h=lo(c,e),yn(h))r=Fy(r,Mn(),s.children);else{const p=(0,V.DV)(s.children,mn(h));if(p){const y=p.getChild(ii(h));r=Qt(r,Mn(),y)}}}}}return r}function $D(i,n,e,r,o){if(r||o){const s=xd(i.visibleWrites,n);return!o&&rw(s)?e:o||null!=e||VD(s,Mn())?nh(ow(i.allWrites,function(y){return(y.visible||o)&&(!r||!~r.indexOf(y.writeId))&&(Zr(y.path,n)||Zr(n,y.path))},n),e||sn.EMPTY_NODE):null}{const s=th(i.visibleWrites,n);if(null!=s)return s;{const c=xd(i.visibleWrites,n);return rw(c)?e:null!=e||VD(c,Mn())?nh(c,e||sn.EMPTY_NODE):null}}}function sm(i,n,e,r){return $D(i.writeTree,i.treePath,n,e,r)}function ug(i,n){return function Ly(i,n,e){let r=sn.EMPTY_NODE;const o=th(i.visibleWrites,n);if(o)return o.isLeafNode()||o.forEachChild(Hn,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(e){const s=xd(i.visibleWrites,n);return e.forEachChild(Hn,(c,h)=>{const p=nh(xd(s,new Ln(c)),h);r=r.updateImmediateChild(c,p)}),iw(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return iw(xd(i.visibleWrites,n)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(i.writeTree,i.treePath,n)}function lw(i,n,e,r){return function om(i,n,e,r,o){(0,V.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const s=gi(n,e);if(VD(i.visibleWrites,s))return null;{const c=xd(i.visibleWrites,s);return rw(c)?o.getChild(e):nh(c,o.getChild(e))}}(i.writeTree,i.treePath,n,e,r)}function am(i,n){return function dg(i,n){return th(i.visibleWrites,n)}(i.writeTree,gi(i.treePath,n))}function cw(i,n,e){return function sw(i,n,e,r){const o=gi(n,e),s=th(i.visibleWrites,o);return null!=s?s:r.isCompleteForChild(e)?nh(xd(i.visibleWrites,o),r.getNode().getImmediateChild(e)):null}(i.writeTree,i.treePath,n,e)}function WD(i,n){return dw(gi(i.treePath,n),i.writeTree)}function dw(i,n){return{treePath:i,writeTree:n}}class h1{constructor(){this.changeMap=new Map}trackChildChange(n){const e=n.type,r=n.childName;(0,V.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const s=o.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(r,Jf(r,n.snapshotNode,o.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(r,ig(r,o.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(r,yd(r,n.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,V.g5)("Illegal combination of changes: "+n+" occurred after "+o);this.changeMap.set(r,Jf(r,n.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,n)}getChanges(){return Array.from(this.changeMap.values())}}const qD=new class f1{getCompleteChild(n){return null}getChildAfterChild(n,e,r){return null}};class uw{constructor(n,e,r=null){this.writes_=n,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(n){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(n))return e.getNode().getImmediateChild(n);{const r=null!=this.optCompleteServerCache_?new Cs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cw(this.writes_,n,r)}}getChildAfterChild(n,e,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wd(this.viewCache_),s=function u1(i,n,e,r,o,s){return function GD(i,n,e,r,o,s,c){let h;const p=xd(i.visibleWrites,n),y=th(p,Mn());if(null!=y)h=y;else{if(null==e)return[];h=nh(p,e)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const w=[],I=c.getCompare(),A=s?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let P=A.getNext();for(;P&&w.length<o;)0!==I(P,r)&&w.push(P),P=A.getNext();return w}}(i.writeTree,i.treePath,n,e,r,o,s)}(this.writes_,o,e,1,r,n);return 0===s.length?null:s[0]}}function os(i,n,e,r,o,s){const c=n.eventCache;if(null!=am(r,e))return n;{let h,p;if(yn(e))if((0,V.hu)(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const y=wd(n),I=ug(r,y instanceof sn?y:sn.EMPTY_NODE);h=i.filter.updateFullNode(n.eventCache.getNode(),I,s)}else{const y=sm(r,wd(n));h=i.filter.updateFullNode(n.eventCache.getNode(),y,s)}else{const y=mn(e);if(".priority"===y){(0,V.hu)(1===ac(e),"Can't have a priority with additional path components");const w=c.getNode();p=n.serverCache.getNode();const I=lw(r,e,w,p);h=null!=I?i.filter.updatePriority(w,I):c.getNode()}else{const w=ii(e);let I;if(c.isCompleteForChild(y)){p=n.serverCache.getNode();const A=lw(r,e,c.getNode(),p);I=null!=A?c.getNode().getImmediateChild(y).updateChild(w,A):c.getNode().getImmediateChild(y)}else I=cw(r,y,n.serverCache);h=null!=I?i.filter.updateChild(c.getNode(),y,I,w,o,s):c.getNode()}}return nm(n,h,c.isFullyInitialized()||yn(e),i.filter.filtersNodes())}}function Uy(i,n,e,r,o,s,c,h){const p=n.serverCache;let y;const w=c?i.filter:i.filter.getIndexedFilter();if(yn(e))y=w.updateFullNode(p.getNode(),r,null);else if(w.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(e,r);y=w.updateFullNode(p.getNode(),P,null)}else{const P=mn(e);if(!p.isCompleteForPath(e)&&ac(e)>1)return n;const U=ii(e),Q=p.getNode().getImmediateChild(P).updateChild(U,r);y=".priority"===P?w.updatePriority(p.getNode(),Q):w.updateChild(p.getNode(),P,Q,U,qD,null)}const I=ew(n,y,p.isFullyInitialized()||yn(e),w.filtersNodes());return os(i,I,e,o,new uw(o,I,s),h)}function hw(i,n,e,r,o,s,c){const h=n.eventCache;let p,y;const w=new uw(o,n,s);if(yn(e))y=i.filter.updateFullNode(n.eventCache.getNode(),r,c),p=nm(n,y,!0,i.filter.filtersNodes());else{const I=mn(e);if(".priority"===I)y=i.filter.updatePriority(n.eventCache.getNode(),r),p=nm(n,y,h.isFullyInitialized(),h.isFiltered());else{const A=ii(e),P=h.getNode().getImmediateChild(I);let U;if(yn(A))U=r;else{const G=w.getCompleteChild(I);U=null!=G?".priority"===by(A)&&G.getChild(Xk(A)).isEmpty()?G:G.updateChild(A,r):sn.EMPTY_NODE}p=P.equals(U)?n:nm(n,i.filter.updateChild(h.getNode(),I,U,A,w,c),h.isFullyInitialized(),i.filter.filtersNodes())}}return p}function g1(i,n){return i.eventCache.isCompleteForChild(n)}function mw(i,n,e){return e.foreach((r,o)=>{n=n.updateChild(r,o)}),n}function pw(i,n,e,r,o,s,c,h){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let y,p=n;y=yn(e)?r:new ri(null).setTree(e,r);const w=n.serverCache.getNode();return y.children.inorderTraversal((I,A)=>{if(w.hasChild(I)){const U=mw(0,n.serverCache.getNode().getImmediateChild(I),A);p=Uy(i,p,new Ln(I),U,o,s,c,h)}}),y.children.inorderTraversal((I,A)=>{const P=!n.serverCache.isCompleteForChild(I)&&null===A.value;if(!w.hasChild(I)&&!P){const G=mw(0,n.serverCache.getNode().getImmediateChild(I),A);p=Uy(i,p,new Ln(I),G,o,s,c,h)}}),p}class v1{constructor(n,e){this.query_=n,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new em(r.getIndex()),s=function OD(i){return i.loadsAllData()?new em(i.getIndex()):i.hasLimit()?new PD(i):new rg(i)}(r);this.processor_=function KD(i){return{filter:i}}(s);const c=e.serverCache,h=e.eventCache,p=o.updateFullNode(sn.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(sn.EMPTY_NODE,h.getNode(),null),w=new Cs(p,c.isFullyInitialized(),o.filtersNodes()),I=new Cs(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=J0(I,w),this.eventGenerator_=new cc(this.query_)}get query(){return this.query_}}function w1(i,n){const e=wd(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!yn(n)&&!e.getImmediateChild(mn(n)).isEmpty())?e.getChild(n):null}function QD(i){return 0===i.eventRegistrations_.length}function XD(i,n,e){const r=[];if(e){(0,V.hu)(null==n,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,o);c&&r.push(c)})}if(n){let o=[];for(let s=0;s<i.eventRegistrations_.length;++s){const c=i.eventRegistrations_[s];if(c.matches(n)){if(n.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(s+1));break}}else o.push(c)}i.eventRegistrations_=o}else i.eventRegistrations_=[];return r}function JD(i,n,e,r){n.type===hr.MERGE&&null!==n.source.queryId&&((0,V.hu)(wd(i.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(tw(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,s=function m1(i,n,e,r,o){const s=new h1;let c,h;if(e.type===hr.OVERWRITE){const y=e;y.source.fromUser?c=hw(i,n,y.path,y.snap,r,o,s):((0,V.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||n.serverCache.isFiltered()&&!yn(y.path),c=Uy(i,n,y.path,y.snap,r,o,h,s))}else if(e.type===hr.MERGE){const y=e;y.source.fromUser?c=function fw(i,n,e,r,o,s,c){let h=n;return r.foreach((p,y)=>{const w=gi(e,p);g1(n,mn(w))&&(h=hw(i,h,w,y,o,s,c))}),r.foreach((p,y)=>{const w=gi(e,p);g1(n,mn(w))||(h=hw(i,h,w,y,o,s,c))}),h}(i,n,y.path,y.children,r,o,s):((0,V.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||n.serverCache.isFiltered(),c=pw(i,n,y.path,y.children,r,o,h,s))}else if(e.type===hr.ACK_USER_WRITE){const y=e;c=y.revert?function ZD(i,n,e,r,o,s){let c;if(null!=am(r,e))return n;{const h=new uw(r,n,o),p=n.eventCache.getNode();let y;if(yn(e)||".priority"===mn(e)){let w;if(n.serverCache.isFullyInitialized())w=sm(r,wd(n));else{const I=n.serverCache.getNode();(0,V.hu)(I instanceof sn,"serverChildren would be complete if leaf node"),w=ug(r,I)}y=i.filter.updateFullNode(p,w,s)}else{const w=mn(e);let I=cw(r,w,n.serverCache);null==I&&n.serverCache.isCompleteForChild(w)&&(I=p.getImmediateChild(w)),y=null!=I?i.filter.updateChild(p,w,I,ii(e),h,s):n.eventCache.getNode().hasChild(w)?i.filter.updateChild(p,w,sn.EMPTY_NODE,ii(e),h,s):p,y.isEmpty()&&n.serverCache.isFullyInitialized()&&(c=sm(r,wd(n)),c.isLeafNode()&&(y=i.filter.updateFullNode(y,c,s)))}return c=n.serverCache.isFullyInitialized()||null!=am(r,Mn()),nm(n,y,c,i.filter.filtersNodes())}}(i,n,y.path,r,o,s):function _1(i,n,e,r,o,s,c){if(null!=am(o,e))return n;const h=n.serverCache.isFiltered(),p=n.serverCache;if(null!=r.value){if(yn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return Uy(i,n,e,p.getNode().getChild(e),o,s,h,c);if(yn(e)){let y=new ri(null);return p.getNode().forEachChild(fl,(w,I)=>{y=y.set(new Ln(w),I)}),pw(i,n,e,y,o,s,h,c)}return n}{let y=new ri(null);return r.foreach((w,I)=>{const A=gi(e,w);p.isCompleteForPath(A)&&(y=y.set(w,p.getNode().getChild(A)))}),pw(i,n,e,y,o,s,h,c)}}(i,n,y.path,y.affectedTree,r,o,s)}else{if(e.type!==hr.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+e.type);c=function y1(i,n,e,r,o){const s=n.serverCache;return os(i,ew(n,s.getNode(),s.isFullyInitialized()||yn(e),s.isFiltered()),e,r,qD,o)}(i,n,e.path,r,s)}const p=s.getChanges();return function p1(i,n,e){const r=n.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=tw(i);(e.length>0||!i.eventCache.isFullyInitialized()||o&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&e.push(Sy(tw(n)))}}(n,c,p),{viewCache:c,changes:p}}(i.processor_,o,n,e,r);return function YD(i,n){(0,V.hu)(n.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(n.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,s.viewCache),(0,V.hu)(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=s.viewCache,By(i,s.changes,s.viewCache.eventCache.getNode(),null)}function By(i,n,e,r){return function UD(i,n,e,r){const o=[],s=[];return n.forEach(c=>{"child_changed"===c.type&&i.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function K0(i,n){return{type:"child_moved",snapshotNode:n,childName:i}}(c.childName,c.snapshotNode))}),Ny(i,o,"child_removed",n,r,e),Ny(i,o,"child_added",n,r,e),Ny(i,o,"child_moved",s,r,e),Ny(i,o,"child_changed",n,r,e),Ny(i,o,"value",n,r,e),o}(i.eventGenerator_,n,e,r?[r]:i.eventRegistrations_)}let Vy,$y;class _w{constructor(){this.views=new Map}}function lm(i,n,e,r){const o=n.source.queryId;if(null!==o){const s=i.views.get(o);return(0,V.hu)(null!=s,"SyncTree gave us an op for an invalid query."),JD(s,n,e,r)}{let s=[];for(const c of i.views.values())s=s.concat(JD(c,n,e,r));return s}}function Hy(i,n,e,r,o){const c=i.views.get(n._queryIdentifier);if(!c){let h=sm(e,o?r:null),p=!1;h?p=!0:r instanceof sn?(h=ug(e,r),p=!1):(h=sn.EMPTY_NODE,p=!1);const y=J0(new Cs(h,p,!1),new Cs(r,o,!1));return new v1(n,y)}return c}function yw(i){const n=[];for(const e of i.views.values())e.query._queryParams.loadsAllData()||n.push(e);return n}function dc(i,n){let e=null;for(const r of i.views.values())e=e||w1(r,n);return e}function vw(i,n){return n._queryParams.loadsAllData()?jy(i):i.views.get(n._queryIdentifier)}function zy(i,n){return null!=vw(i,n)}function Io(i){return null!=jy(i)}function jy(i){for(const n of i.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let D1=1;class iI{constructor(n){this.listenProvider_=n,this.syncPointTree_=new ri(null),this.pendingWriteTree_=function aw(){return{visibleWrites:Zs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function rI(i,n,e,r,o){return function c1(i,n,e,r,o){(0,V.hu)(r>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),i.allWrites.push({path:n,snap:e,writeId:r,visible:o}),o&&(i.visibleWrites=Qt(i.visibleWrites,n,e)),i.lastWriteId=r}(i.pendingWriteTree_,n,e,r,o),o?ih(i,new bd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,e)):[]}function Cd(i,n,e=!1){const r=function BL(i,n){for(let e=0;e<i.allWrites.length;e++){const r=i.allWrites[e];if(r.writeId===n)return r}return null}(i.pendingWriteTree_,n);if(function zD(i,n){const e=i.allWrites.findIndex(h=>h.writeId===n);(0,V.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=i.allWrites[e];i.allWrites.splice(e,1);let o=r.visible,s=!1,c=i.allWrites.length-1;for(;o&&c>=0;){const h=i.allWrites[c];h.visible&&(c>=e&&jD(h,r.path)?o=!1:Zr(r.path,h.path)&&(s=!0)),c--}return!!o&&(s?(function Ed(i){i.visibleWrites=ow(i.allWrites,rm,Mn()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(r.snap?i.visibleWrites=nw(i.visibleWrites,r.path):Yr(r.children,p=>{i.visibleWrites=nw(i.visibleWrites,gi(r.path,p))}),!0))}(i.pendingWriteTree_,n)){let s=new ri(null);return null!=r.snap?s=s.set(Mn(),!0):Yr(r.children,c=>{s=s.set(new Ln(c),!0)}),ih(i,new Oy(r.path,s,e))}return[]}function Dd(i,n,e){return ih(i,new bd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,e))}function Wy(i,n,e,r,o=!1){const s=n._path,c=i.syncPointTree_.get(s);let h=[];if(c&&("default"===n._queryIdentifier||zy(c,n))){const p=function nI(i,n,e,r){const o=n._queryIdentifier,s=[];let c=[];const h=Io(i);if("default"===o)for(const[p,y]of i.views.entries())c=c.concat(XD(y,e,r)),QD(y)&&(i.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=i.views.get(o);p&&(c=c.concat(XD(p,e,r)),QD(p)&&(i.views.delete(o),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Io(i)&&s.push(new(function eI(){return(0,V.hu)(Vy,"Reference.ts has not been loaded"),Vy}())(n._repo,n._path)),{removed:s,events:c}}(c,n,e,r);(function tI(i){return 0===i.views.size})(c)&&(i.syncPointTree_=i.syncPointTree_.remove(s));const y=p.removed;if(h=p.events,!o){const w=-1!==y.findIndex(A=>A._queryParams.loadsAllData()),I=i.syncPointTree_.findOnPath(s,(A,P)=>Io(P));if(w&&!I){const A=i.syncPointTree_.subtree(s);if(!A.isEmpty()){const P=function zL(i){return i.fold((n,e,r)=>{if(e&&Io(e))return[jy(e)];{let o=[];return e&&(o=yw(e)),Yr(r,(s,c)=>{o=o.concat(c)}),o}})}(A);for(let U=0;U<P.length;++U){const G=P[U],Q=G.query,me=Ew(i,G);i.listenProvider_.startListening(fg(Q),dm(i,Q),me.hashFn,me.onComplete)}}}!I&&y.length>0&&!r&&(w?i.listenProvider_.stopListening(fg(n),null):y.forEach(A=>{const P=i.queryToTagMap.get(Ky(A));i.listenProvider_.stopListening(fg(A),P)}))}!function I1(i,n){for(let e=0;e<n.length;++e){const r=n[e];if(!r._queryParams.loadsAllData()){const o=Ky(r),s=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(s)}}}(i,y)}return h}function ww(i,n,e,r){const o=Cw(i,r);if(null!=o){const s=rh(o),c=s.path,h=s.queryId,p=lo(c,n);return Dw(i,c,new bd(X0(h),p,e))}return[]}function xw(i,n,e,r=!1){const o=n._path;let s=null,c=!1;i.syncPointTree_.foreachOnPath(o,(A,P)=>{const U=lo(A,o);s=s||dc(P,U),c=c||Io(P)});let p,h=i.syncPointTree_.get(o);h?(c=c||Io(h),s=s||dc(h,Mn())):(h=new _w,i.syncPointTree_=i.syncPointTree_.set(o,h)),null!=s?p=!0:(p=!1,s=sn.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((P,U)=>{const G=dc(U,Mn());G&&(s=s.updateImmediateChild(P,G))}));const y=zy(h,n);if(!y&&!n._queryParams.loadsAllData()){const A=Ky(n);(0,V.hu)(!i.queryToTagMap.has(A),"View does not exist, but we have a tag");const P=function T1(){return D1++}();i.queryToTagMap.set(A,P),i.tagToQueryMap.set(P,A)}let I=function VL(i,n,e,r,o,s){const c=Hy(i,n,r,o,s);return i.views.has(n._queryIdentifier)||i.views.set(n._queryIdentifier,c),function x1(i,n){i.eventRegistrations_.push(n)}(c,e),function ml(i,n){const e=i.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Hn,(s,c)=>{r.push(yd(s,c))}),e.isFullyInitialized()&&r.push(Sy(e.getNode())),By(i,r,e.getNode(),n)}(c,e)}(h,n,e,cg(i.pendingWriteTree_,o),s,p);if(!y&&!c&&!r){const A=vw(h,n);I=I.concat(function S1(i,n,e){const r=n._path,o=dm(i,n),s=Ew(i,e),c=i.listenProvider_.startListening(fg(n),o,s.hashFn,s.onComplete),h=i.syncPointTree_.subtree(r);if(o)(0,V.hu)(!Io(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,w,I)=>{if(!yn(y)&&w&&Io(w))return[jy(w).query];{let A=[];return w&&(A=A.concat(yw(w).map(P=>P.query))),Yr(I,(P,U)=>{A=A.concat(U)}),A}});for(let y=0;y<p.length;++y){const w=p[y];i.listenProvider_.stopListening(fg(w),dm(i,w))}}return c}(i,n,A))}return I}function qy(i,n,e){const o=i.pendingWriteTree_,s=i.syncPointTree_.findOnPath(n,(c,h)=>{const y=dc(h,lo(c,n));if(y)return y});return $D(o,n,s,e,!0)}function ih(i,n){return cm(n,i.syncPointTree_,null,cg(i.pendingWriteTree_,Mn()))}function cm(i,n,e,r){if(yn(i.path))return lI(i,n,e,r);{const o=n.get(Mn());null==e&&null!=o&&(e=dc(o,Mn()));let s=[];const c=mn(i.path),h=i.operationForChild(c),p=n.children.get(c);if(p&&h){const y=e?e.getImmediateChild(c):null,w=WD(r,c);s=s.concat(cm(h,p,y,w))}return o&&(s=s.concat(lm(o,i,r,e))),s}}function lI(i,n,e,r){const o=n.get(Mn());null==e&&null!=o&&(e=dc(o,Mn()));let s=[];return n.children.inorderTraversal((c,h)=>{const p=e?e.getImmediateChild(c):null,y=WD(r,c),w=i.operationForChild(c);w&&(s=s.concat(lI(w,h,p,y)))}),o&&(s=s.concat(lm(o,i,r,e))),s}function Ew(i,n){const e=n.query,r=dm(i,e);return{hashFn:()=>(function b1(i){return i.viewCache_.serverCache.getNode()}(n)||sn.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function HL(i,n,e){const r=Cw(i,e);if(r){const o=rh(r),s=o.path,c=o.queryId,h=lo(s,n);return Dw(i,s,new lg(X0(c),h))}return[]}(i,e._path,r):function Gy(i,n){return ih(i,new lg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(i,e._path);{const s=function Lk(i,n){let e="Unknown Error";"too_big"===i?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?e="Client doesn't have permission to access the desired data.":"unavailable"===i&&(e="The service is unavailable");const r=new Error(i+" at "+n._path.toString()+": "+e);return r.code=i.toUpperCase(),r}(o,e);return Wy(i,e,null,s)}}}}function dm(i,n){const e=Ky(n);return i.queryToTagMap.get(e)}function Ky(i){return i._path.toString()+"$"+i._queryIdentifier}function Cw(i,n){return i.tagToQueryMap.get(n)}function rh(i){const n=i.indexOf("$");return(0,V.hu)(-1!==n&&n<i.length-1,"Bad queryKey."),{queryId:i.substr(n+1),path:new Ln(i.substr(0,n))}}function Dw(i,n,e){const r=i.syncPointTree_.get(n);return(0,V.hu)(r,"Missing sync point for query tag that we're tracking"),lm(r,e,cg(i.pendingWriteTree_,n),null)}function fg(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(function C1(){return(0,V.hu)($y,"Reference.ts has not been loaded"),$y}())(i._repo,i._path):i}class Iw{constructor(n){this.node_=n}getImmediateChild(n){const e=this.node_.getImmediateChild(n);return new Iw(e)}node(){return this.node_}}class Tw{constructor(n,e){this.syncTree_=n,this.path_=e}getImmediateChild(n){const e=gi(this.path_,n);return new Tw(this.syncTree_,e)}node(){return qy(this.syncTree_,this.path_)}}const A1=function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i},Sw=function(i,n,e){return i&&"object"==typeof i?((0,V.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?Aw(i[".sv"],n,e):"object"==typeof i[".sv"]?M1(i[".sv"],n):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},Aw=function(i,n,e){if("timestamp"===i)return e.timestamp;(0,V.hu)(!1,"Unexpected server value: "+i)},M1=function(i,n,e){i.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const r=i.increment;"number"!=typeof r&&(0,V.hu)(!1,"Unexpected increment value: "+r);const o=n.node();if((0,V.hu)(null!==o&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},mg=function(i,n,e,r){return kw(n,new Tw(e,i),r)},Mw=function(i,n,e){return kw(i,new Iw(n),e)};function kw(i,n,e){const r=i.getPriority().val(),o=Sw(r,n.getImmediateChild(".priority"),e);let s;if(i.isLeafNode()){const c=i,h=Sw(c.getValue(),n,e);return h!==c.getValue()||o!==c.getPriority().val()?new gd(h,Hi(o)):i}{const c=i;return s=c,o!==c.getPriority().val()&&(s=s.updatePriority(new gd(o))),c.forEachChild(Hn,(h,p)=>{const y=kw(p,n.getImmediateChild(h),e);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class Rw{constructor(n="",e=null,r={children:{},childCount:0}){this.name=n,this.parent=e,this.node=r}}function Yy(i,n){let e=n instanceof Ln?n:new Ln(n),r=i,o=mn(e);for(;null!==o;){const s=(0,V.DV)(r.node.children,o)||{children:{},childCount:0};r=new Rw(o,r,s),e=ii(e),o=mn(e)}return r}function oh(i){return i.node.value}function Pw(i,n){i.node.value=n,Zy(i)}function cI(i){return i.node.childCount>0}function pg(i,n){Yr(i.node.children,(e,r)=>{n(new Rw(e,i,r))})}function uI(i,n,e,r){e&&!r&&n(i),pg(i,o=>{uI(o,n,!0,r)}),e&&r&&n(i)}function um(i){return new Ln(null===i.parent?i.name:um(i.parent)+"/"+i.name)}function Zy(i){null!==i.parent&&function $L(i,n,e){const r=function dI(i){return void 0===oh(i)&&!cI(i)}(e),o=(0,V.r3)(i.node.children,n);r&&o?(delete i.node.children[n],i.node.childCount--,Zy(i)):!r&&!o&&(i.node.children[n]=e.node,i.node.childCount++,Zy(i))}(i.parent,i.name,i)}const Qy=/[\[\].#$\/\u0000-\u001F\u007F]/,k1=/[\[\].#$\u0000-\u001F\u007F]/,Ow=10485760,hm=function(i){return"string"==typeof i&&0!==i.length&&!Qy.test(i)},hI=function(i){return"string"==typeof i&&0!==i.length&&!k1.test(i)},uc=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!Kp(i)||i&&"object"==typeof i&&(0,V.r3)(i,".sv")},Si=function(i,n,e,r){r&&void 0===n||Ma((0,V.gK)(i,"value"),n,e)},Ma=function(i,n,e){const r=e instanceof Ln?new Jk(e,i):e;if(void 0===n)throw new Error(i+"contains undefined "+lc(r));if("function"==typeof n)throw new Error(i+"contains a function "+lc(r)+" with contents = "+n.toString());if(Kp(n))throw new Error(i+"contains "+n.toString()+" "+lc(r));if("string"==typeof n&&n.length>Ow/3&&(0,V.ug)(n)>Ow)throw new Error(i+"contains a string greater than "+Ow+" utf8 bytes "+lc(r)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let o=!1,s=!1;if(Yr(n,(c,h)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!hm(c)))throw new Error(i+" contains an invalid key ("+c+") "+lc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function V0(i,n){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(n),i.byteLength_+=(0,V.ug)(n),ID(i)})(r,c),Ma(i,h,r),function xy(i){const n=i.parts_.pop();i.byteLength_-=(0,V.ug)(n),i.parts_.length>0&&(i.byteLength_-=1)}(r)}),o&&s)throw new Error(i+' contains ".value" child '+lc(r)+" in addition to actual children.")}},Ds=function(i,n,e,r){if(r&&void 0===n)return;const o=(0,V.gK)(i,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");const s=[];Yr(n,(c,h)=>{const p=new Ln(c);if(Ma(o,h,gi(e,p)),".priority"===by(p)&&!uc(h))throw new Error(o+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(i,n){let e,r;for(e=0;e<n.length;e++){r=n[e];const s=qu(r);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!hm(s[c]))throw new Error(i+"contains an invalid key ("+s[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(DD);let o=null;for(e=0;e<n.length;e++){if(r=n[e],null!==o&&Zr(o,r))throw new Error(i+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,s)},gg=function(i,n,e){if(!e||void 0!==n){if(Kp(n))throw new Error((0,V.gK)(i,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!uc(n))throw new Error((0,V.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gl=function(i,n,e,r){if(!(r&&void 0===e||hm(e)))throw new Error((0,V.gK)(i,n)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},_l=function(i,n,e,r){if(!(r&&void 0===e||hI(e)))throw new Error((0,V.gK)(i,n)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fm=function(i,n,e,r){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),_l(i,n,e,r)},co=function(i,n){if(".info"===mn(n))throw new Error(i+" failed = Can't modify data under /.info/")},sh=function(i,n){const e=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!hm(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==e.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),hI(i)}(e))throw new Error((0,V.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class mm{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hc(i,n){let e=null;for(let r=0;r<n.length;r++){const o=n[r],s=o.getPath();null!==e&&!wy(s,e.path)&&(i.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(o)}e&&i.eventLists_.push(e)}function ah(i,n,e){hc(i,e),Nw(i,r=>wy(r,n))}function Qr(i,n,e){hc(i,e),Nw(i,r=>Zr(r,n)||Zr(n,r))}function Nw(i,n){i.recursionDepth_++;let e=!0;for(let r=0;r<i.eventLists_.length;r++){const o=i.eventLists_[r];o&&(n(o.path)?(fI(i.eventLists_[r]),i.eventLists_[r]=null):e=!1)}e&&(i.eventLists_=[]),i.recursionDepth_--}function fI(i){for(let n=0;n<i.events.length;n++){const e=i.events[n];if(null!==e){i.events[n]=null;const r=e.getEventRunner();fd&&ur("event: "+e.toString()),Ta(r)}}}const Fw="repo_interrupt",mI=25;class pI{constructor(n,e,r,o){this.repoInfo_=n,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mm,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sg(),this.transactionQueueTree_=new Rw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Lw(i){const e=i.infoData_.getNode(new Ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function pm(i){return A1({timestamp:Lw(i)})}function Uw(i,n,e,r,o){i.dataUpdateCount++;const s=new Ln(n);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(n,e):e;let c=[];if(o)if(r){const p=(0,V.UI)(e,y=>Hi(y));c=function sI(i,n,e,r){const o=Cw(i,r);if(o){const s=rh(o),c=s.path,h=s.queryId,p=lo(c,n),y=ri.fromObject(e);return Dw(i,c,new eh(X0(h),p,y))}return[]}(i.serverSyncTree_,s,p,o)}else{const p=Hi(e);c=ww(i.serverSyncTree_,s,p,o)}else if(r){const p=(0,V.UI)(e,y=>Hi(y));c=function hg(i,n,e){const r=ri.fromObject(e);return ih(i,new eh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,r))}(i.serverSyncTree_,s,p)}else{const p=Hi(e);c=Dd(i.serverSyncTree_,s,p)}let h=s;c.length>0&&(h=gm(i,s)),Qr(i.eventQueue_,h,c)}function Jy(i,n){_I(i,"connected",n),!1===n&&function O1(i){ch(i,"onDisconnectEvents");const n=pm(i),e=sg();Ju(i.onDisconnect_,Mn(),(o,s)=>{const c=mg(o,s,i.serverSyncTree_,n);Xu(e,o,c)});let r=[];Ju(e,Mn(),(o,s)=>{r=r.concat(Dd(i.serverSyncTree_,o,s));const c=wI(i,o);gm(i,c)}),i.onDisconnect_=sg(),Qr(i.eventQueue_,Mn(),r)}(i)}function _I(i,n,e){const r=new Ln("/.info/"+n),o=Hi(e);i.infoData_.updateSnapshot(r,o);const s=Dd(i.infoSyncTree_,r,o);Qr(i.eventQueue_,r,s)}function Bw(i){return i.nextWriteId_++}function Vw(i,n,e,r,o){ch(i,"set",{path:n.toString(),value:e,priority:r});const s=pm(i),c=Hi(e,r),h=qy(i.serverSyncTree_,n),p=Mw(c,h,s),y=Bw(i),w=rI(i.serverSyncTree_,n,p,y,!0);hc(i.eventQueue_,w),i.server_.put(n.toString(),c.val(!0),(A,P)=>{const U="ok"===A;U||ao("set at "+n+" failed: "+A);const G=Cd(i.serverSyncTree_,y,!U);Qr(i.eventQueue_,n,G),Qs(0,o,A,P)});const I=wI(i,n);gm(i,I),Qr(i.eventQueue_,I,[])}function WL(i,n,e){i.server_.onDisconnectCancel(n.toString(),(r,o)=>{"ok"===r&&ag(i.onDisconnect_,n),Qs(0,e,r,o)})}function yI(i,n,e,r){const o=Hi(e);i.server_.onDisconnectPut(n.toString(),o.val(!0),(s,c)=>{"ok"===s&&Xu(i.onDisconnect_,n,o),Qs(0,r,s,c)})}function lh(i,n,e){let r;r=".info"===mn(n._path)?Wy(i.infoSyncTree_,n,e):Wy(i.serverSyncTree_,n,e),ah(i.eventQueue_,n._path,r)}function ev(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Fw)}function ch(i,...n){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),ur(e,...n)}function Qs(i,n,e,r){n&&Ta(()=>{if("ok"===e)n(null);else{const o=(e||"error").toUpperCase();let s=o;r&&(s+=": "+r);const c=new Error(s);c.code=o,n(c)}})}function zw(i,n,e){return qy(i.serverSyncTree_,n,e)||sn.EMPTY_NODE}function Id(i,n=i.transactionQueueTree_){if(n||dh(i,n),oh(n)){const e=nv(i,n);(0,V.hu)(e.length>0,"Sending zero length transaction queue"),e.every(o=>0===o.status)&&function L1(i,n,e){const r=e.map(y=>y.currentWriteId),o=zw(i,n,r);let s=o;const c=o.hash();for(let y=0;y<e.length;y++){const w=e[y];(0,V.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const I=lo(n,w.path);s=s.updateChild(I,w.currentOutputSnapshotRaw)}const h=s.val(!0),p=n;i.server_.put(p.toString(),h,y=>{ch(i,"transaction put response",{path:p.toString(),status:y});let w=[];if("ok"===y){const I=[];for(let A=0;A<e.length;A++)e[A].status=2,w=w.concat(Cd(i.serverSyncTree_,e[A].currentWriteId)),e[A].onComplete&&I.push(()=>e[A].onComplete(null,!0,e[A].currentOutputSnapshotResolved)),e[A].unwatcher();dh(i,Yy(i.transactionQueueTree_,n)),Id(i,i.transactionQueueTree_),Qr(i.eventQueue_,n,w);for(let A=0;A<I.length;A++)Ta(I[A])}else{if("datastale"===y)for(let I=0;I<e.length;I++)e[I].status=3===e[I].status?4:0;else{ao("transaction at "+p.toString()+" failed: "+y);for(let I=0;I<e.length;I++)e[I].status=4,e[I].abortReason=y}gm(i,n)}},c)}(i,um(n),e)}else cI(n)&&pg(n,e=>{Id(i,e)})}function gm(i,n){const e=bI(i,n),r=um(e);return function U1(i,n,e){if(0===n.length)return;const r=[];let o=[];const c=n.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<n.length;h++){const p=n[h],y=lo(e,p.path);let I,w=!1;if((0,V.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,I=p.abortReason,o=o.concat(Cd(i.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=mI)w=!0,I="maxretry",o=o.concat(Cd(i.serverSyncTree_,p.currentWriteId,!0));else{const A=zw(i,p.path,c);p.currentInputSnapshot=A;const P=n[h].update(A.val());if(void 0!==P){Ma("transaction failed: Data returned ",P,p.path);let U=Hi(P);"object"==typeof P&&null!=P&&(0,V.r3)(P,".priority")||(U=U.updatePriority(A.getPriority()));const Q=p.currentWriteId,me=pm(i),Ce=Mw(U,A,me);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=Ce,p.currentWriteId=Bw(i),c.splice(c.indexOf(Q),1),o=o.concat(rI(i.serverSyncTree_,p.path,Ce,p.currentWriteId,p.applyLocally)),o=o.concat(Cd(i.serverSyncTree_,Q,!0))}else w=!0,I="nodata",o=o.concat(Cd(i.serverSyncTree_,p.currentWriteId,!0))}Qr(i.eventQueue_,e,o),o=[],w&&(n[h].status=2,setTimeout(n[h].unwatcher,Math.floor(0)),n[h].onComplete&&r.push("nodata"===I?()=>n[h].onComplete(null,!1,n[h].currentInputSnapshot):()=>n[h].onComplete(new Error(I),!1,null)))}dh(i,i.transactionQueueTree_);for(let h=0;h<r.length;h++)Ta(r[h]);Id(i,i.transactionQueueTree_)}(i,nv(i,e),r),r}function bI(i,n){let e,r=i.transactionQueueTree_;for(e=mn(n);null!==e&&void 0===oh(r);)r=Yy(r,e),e=mn(n=ii(n));return r}function nv(i,n){const e=[];return _g(i,n,e),e.sort((r,o)=>r.order-o.order),e}function _g(i,n,e){const r=oh(n);if(r)for(let o=0;o<r.length;o++)e.push(r[o]);pg(n,o=>{_g(i,o,e)})}function dh(i,n){const e=oh(n);if(e){let r=0;for(let o=0;o<e.length;o++)2!==e[o].status&&(e[r]=e[o],r++);e.length=r,Pw(n,e.length>0?e:void 0)}pg(n,r=>{dh(i,r)})}function wI(i,n){const e=um(bI(i,n)),r=Yy(i.transactionQueueTree_,n);return function jL(i,n,e){let r=e?i:i.parent;for(;null!==r;){if(n(r))return!0;r=r.parent}}(r,o=>{jw(i,o)}),jw(i,r),uI(r,o=>{jw(i,o)}),e}function jw(i,n){const e=oh(n);if(e){const r=[];let o=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,V.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,V.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),o=o.concat(Cd(i.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&r.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Pw(n,void 0):e.length=s+1,Qr(i.eventQueue_,um(n),o);for(let c=0;c<r.length;c++)Ta(r[c])}}const Gw=function(i,n){const e=xI(i),r=e.namespace;return"firebase.com"===e.domain&&Ia(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&Ia("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ao("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new A0(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,n,"",r!==e.subdomain),path:new Ln(e.pathString)}},xI=function(i){let n="",e="",r="",o="",s="",c=!0,h="https",p=443;if("string"==typeof i){let y=i.indexOf("//");y>=0&&(h=i.substring(0,y-1),i=i.substring(y+2));let w=i.indexOf("/");-1===w&&(w=i.length);let I=i.indexOf("?");-1===I&&(I=i.length),n=i.substring(0,Math.min(w,I)),w<I&&(o=function B1(i){let n="";const e=i.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let o=e[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}n+="/"+o}return n}(i.substring(w,I)));const A=function $w(i){const n={};"?"===i.charAt(0)&&(i=i.substring(1));for(const e of i.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ao(`Invalid query segment '${e}' in query '${i}'`)}return n}(i.substring(Math.min(i.length,I)));y=n.indexOf(":"),y>=0?(c="https"===h||"wss"===h,p=parseInt(n.substring(y+1),10)):y=n.length;const P=n.slice(0,y);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const U=n.indexOf(".");r=n.substring(0,U).toLowerCase(),e=n.substring(U+1),s=r}"ns"in A&&(s=A.ns)}return{host:n,port:p,domain:e,subdomain:r,secure:c,scheme:h,pathString:o,namespace:s}},EI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",V1=function(){let i=0;const n=[];return function(e){const r=e===i;let o;i=e;const s=new Array(8);for(o=7;o>=0;o--)s[o]=EI.charAt(e%64),e=Math.floor(e/64);(0,V.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(r){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=EI.charAt(n[o]);return(0,V.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class Ww{constructor(n,e,r,o){this.eventType=n,this.eventRegistration=e,this.snapshot=r,this.prevName=o}getPath(){const n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Wl)(this.snapshot.exportVal())}}class qw{constructor(n,e,r){this.eventRegistration=n,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class iv{constructor(n,e){this.snapshotCallback=n,this.cancelCallback=e}onValue(n,e){this.snapshotCallback.call(null,n,e)}onCancel(n){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class CI{constructor(n,e){this._repo=n,this._path=e}cancel(){const n=new V.BH;return WL(this._repo,this._path,n.wrapCallback(()=>{})),n.promise}remove(){co("OnDisconnect.remove",this._path);const n=new V.BH;return yI(this._repo,this._path,null,n.wrapCallback(()=>{})),n.promise}set(n){co("OnDisconnect.set",this._path),Si("OnDisconnect.set",n,this._path,!1);const e=new V.BH;return yI(this._repo,this._path,n,e.wrapCallback(()=>{})),e.promise}setWithPriority(n,e){co("OnDisconnect.setWithPriority",this._path),Si("OnDisconnect.setWithPriority",n,this._path,!1),gg("OnDisconnect.setWithPriority",e,!1);const r=new V.BH;return function N1(i,n,e,r,o){const s=Hi(e,r);i.server_.onDisconnectPut(n.toString(),s.val(!0),(c,h)=>{"ok"===c&&Xu(i.onDisconnect_,n,s),Qs(0,o,c,h)})}(this._repo,this._path,n,e,r.wrapCallback(()=>{})),r.promise}update(n){co("OnDisconnect.update",this._path),Ds("OnDisconnect.update",n,this._path,!1);const e=new V.BH;return function F1(i,n,e,r){if((0,V.xb)(e))return ur("onDisconnect().update() called with empty data.  Don't do anything."),void Qs(0,r,"ok",void 0);i.server_.onDisconnectMerge(n.toString(),e,(o,s)=>{"ok"===o&&Yr(e,(c,h)=>{const p=Hi(h);Xu(i.onDisconnect_,gi(n,c),p)}),Qs(0,r,o,s)})}(this._repo,this._path,n,e.wrapCallback(()=>{})),e.promise}}class ss{constructor(n,e,r,o){this._repo=n,this._path=e,this._queryParams=r,this._orderByCalled=o}get key(){return yn(this._path)?null:by(this._path)}get ref(){return new as(this._repo,this._path)}get _queryIdentifier(){const n=ND(this._queryParams),e=Yp(n);return"{}"===e?"default":e}get _queryObject(){return ND(this._queryParams)}isEqual(n){if(!((n=(0,V.m9)(n))instanceof ss))return!1;const e=this._repo===n._repo,r=wy(this._path,n._path);return e&&r&&this._queryIdentifier===n._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function CD(i){let n="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)""!==i.pieces_[e]&&(n+="/"+encodeURIComponent(String(i.pieces_[e])));return n||"/"}(this._path)}}function rv(i,n){if(!0===i._orderByCalled)throw new Error(n+": You can't combine multiple orderBy calls.")}function fc(i){let n=null,e=null;if(i.hasStart()&&(n=i.getIndexStartValue()),i.hasEnd()&&(e=i.getIndexEndValue()),i.getIndex()===fl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==Ys)throw new Error(r);if("string"!=typeof n)throw new Error(o)}if(i.hasEnd()){if(i.getIndexEndName()!==ul)throw new Error(r);if("string"!=typeof e)throw new Error(o)}}else if(i.getIndex()===Hn){if(null!=n&&!uc(n)||null!=e&&!uc(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(i.getIndex()instanceof W0||i.getIndex()===q0,"unknown index type."),null!=n&&"object"==typeof n||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _m(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class as extends ss{constructor(n,e){super(n,e,new Ay,!1)}get parent(){const n=Xk(this._path);return null===n?null:new as(this._repo,n)}get root(){let n=this;for(;null!==n.parent;)n=n.parent;return n}}class uh{constructor(n,e,r){this._node=n,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const e=new Ln(n),r=mc(this.ref,n);return new uh(this._node.getChild(e),r,Hn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>n(new uh(o,mc(this.ref,r),Hn)))}hasChild(n){const e=new Ln(n);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yg(i,n){return(i=(0,V.m9)(i))._checkNotDeleted("ref"),void 0!==n?mc(i._root,n):i._root}function vg(i,n){(i=(0,V.m9)(i))._checkNotDeleted("refFromURL");const e=Gw(n,i._repo.repoInfo_.nodeAdmin);sh("refFromURL",e);const r=e.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&r.host!==i._repo.repoInfo_.host&&Ia("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+i._repo.repoInfo_.host+")"),yg(i,e.path.toString())}function mc(i,n){return null===mn((i=(0,V.m9)(i))._path)?fm("child","path",n,!1):_l("child","path",n,!1),new as(i._repo,gi(i._path,n))}function Kw(i,n){i=(0,V.m9)(i),co("set",i._path),Si("set",n,i._path,!1);const e=new V.BH;return Vw(i._repo,i._path,n,null,e.wrapCallback(()=>{})),e.promise}function Yw(i,n){Ds("update",n,i._path,!1);const e=new V.BH;return function GL(i,n,e,r){ch(i,"update",{path:n.toString(),value:e});let o=!0;const s=pm(i),c={};if(Yr(e,(h,p)=>{o=!1,c[h]=mg(gi(n,h),Hi(p),i.serverSyncTree_,s)}),o)ur("update() called with empty data.  Don't do anything."),Qs(0,r,"ok",void 0);else{const h=Bw(i),p=function oI(i,n,e,r){!function d1(i,n,e,r){(0,V.hu)(r>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:n,children:e,writeId:r,visible:!0}),i.visibleWrites=Fy(i.visibleWrites,n,e),i.lastWriteId=r}(i.pendingWriteTree_,n,e,r);const o=ri.fromObject(e);return ih(i,new eh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,o))}(i.serverSyncTree_,n,c,h);hc(i.eventQueue_,p),i.server_.merge(n.toString(),e,(y,w)=>{const I="ok"===y;I||ao("update at "+n+" failed: "+y);const A=Cd(i.serverSyncTree_,h,!I),P=A.length>0?gm(i,n):n;Qr(i.eventQueue_,P,A),Qs(0,r,y,w)}),Yr(e,y=>{const w=wI(i,gi(n,y));gm(i,w)}),Qr(i.eventQueue_,n,[])}}(i._repo,i._path,n,e.wrapCallback(()=>{})),e.promise}function DI(i){i=(0,V.m9)(i);const n=new iv(()=>{}),e=new bg(n);return function P1(i,n,e){const r=function aI(i,n){const e=n._path;let r=null;i.syncPointTree_.foreachOnPath(e,(y,w)=>{const I=lo(y,e);r=r||dc(w,I)});let o=i.syncPointTree_.get(e);o?r=r||dc(o,Mn()):(o=new _w,i.syncPointTree_=i.syncPointTree_.set(e,o));const s=null!=r,c=s?new Cs(r,!0,!1):null;return function gw(i){return tw(i.viewCache_)}(Hy(o,n,cg(i.pendingWriteTree_,n._path),s?c.getNode():sn.EMPTY_NODE,s))}(i.serverSyncTree_,n);return null!=r?Promise.resolve(r):i.server_.get(n).then(o=>{const s=Hi(o).withIndex(n._queryParams.getIndex());let c;if(xw(i.serverSyncTree_,n,e,!0),n._queryParams.loadsAllData())c=Dd(i.serverSyncTree_,n._path,s);else{const h=dm(i.serverSyncTree_,n);c=ww(i.serverSyncTree_,n._path,s,h)}return Qr(i.eventQueue_,n._path,c),Wy(i.serverSyncTree_,n,e,null,!0),s},o=>(ch(i,"get for query "+(0,V.Wl)(n)+" failed: "+o),Promise.reject(new Error(o))))}(i._repo,i,e).then(r=>new uh(r,new as(i._repo,i._path),i._queryParams.getIndex()))}class bg{constructor(n){this.callbackContext=n}respondsTo(n){return"value"===n}createEvent(n,e){const r=e._queryParams.getIndex();return new Ww("value",this,new uh(n.snapshotNode,new as(e._repo,e._path),r))}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,e){return this.callbackContext.hasCancelCallback?new qw(this,n,e):null}matches(n){return n instanceof bg&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class av{constructor(n,e){this.eventType=n,this.callbackContext=e}respondsTo(n){let e="children_added"===n?"child_added":n;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(n,e){return this.callbackContext.hasCancelCallback?new qw(this,n,e):null}createEvent(n,e){(0,V.hu)(null!=n.childName,"Child events should have a childName.");const r=mc(new as(e._repo,e._path),n.childName),o=e._queryParams.getIndex();return new Ww(n.type,this,new uh(n.snapshotNode,r,o),n.prevName)}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof av&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ym(i,n,e,r,o){let s;if("object"==typeof r&&(s=void 0,o=r),"function"==typeof r&&(s=r),o&&o.onlyOnce){const p=e,y=(w,I)=>{lh(i._repo,i,h),p(w,I)};y.userCallback=e.userCallback,y.context=e.context,e=y}const c=new iv(e,s||void 0),h="value"===n?new bg(c):new av(n,c);return function Hw(i,n,e){let r;r=".info"===mn(n._path)?xw(i.infoSyncTree_,n,e):xw(i.serverSyncTree_,n,e),ah(i.eventQueue_,n._path,r)}(i._repo,i,h),()=>lh(i._repo,i,h)}function wg(i,n,e,r){return ym(i,"value",n,e,r)}function Zw(i,n,e,r){return ym(i,"child_added",n,e,r)}function lv(i,n,e,r){return ym(i,"child_changed",n,e,r)}function cv(i,n,e,r){return ym(i,"child_moved",n,e,r)}function II(i,n,e,r){return ym(i,"child_removed",n,e,r)}function Qw(i,n,e){let r=null;const o=e?new iv(e):null;"value"===n?r=new bg(o):n&&(r=new av(n,o)),lh(i._repo,i,r)}class Xs{}class Xw extends Xs{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){Si("endAt",this._value,n._path,!0);const e=vd(n._queryParams,this._value,this._key);if(_m(e),fc(e),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ss(n._repo,n._path,e,n._orderByCalled)}}class $1 extends Xs{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){Si("endBefore",this._value,n._path,!1);const e=function og(i,n,e){let r;return r=vd(i,n,i.index_===fl||e?e:Ys),r.endBeforeSet_=!0,r}(n._queryParams,this._value,this._key);if(_m(e),fc(e),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ss(n._repo,n._path,e,n._orderByCalled)}}class Jw extends Xs{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){Si("startAt",this._value,n._path,!0);const e=Qu(n._queryParams,this._value,this._key);if(_m(e),fc(e),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ss(n._repo,n._path,e,n._orderByCalled)}}class ex extends Xs{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){Si("startAfter",this._value,n._path,!1);const e=function s1(i,n,e){let r;return r=Qu(i,n,i.index_===fl||e?e:ul),r.startAfterSet_=!0,r}(n._queryParams,this._value,this._key);if(_m(e),fc(e),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ss(n._repo,n._path,e,n._orderByCalled)}}class kI extends Xs{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ss(n._repo,n._path,function FL(i,n){const e=i.copy();return e.limitSet_=!0,e.limit_=n,e.viewFrom_="l",e}(n._queryParams,this._limit),n._orderByCalled)}}class PI extends Xs{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ss(n._repo,n._path,function o1(i,n){const e=i.copy();return e.limitSet_=!0,e.limit_=n,e.viewFrom_="r",e}(n._queryParams,this._limit),n._orderByCalled)}}class NI extends Xs{constructor(n){super(),this._path=n}_apply(n){rv(n,"orderByChild");const e=new Ln(this._path);if(yn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new W0(e),o=My(n._queryParams,r);return fc(o),new ss(n._repo,n._path,o,!0)}}class LI extends Xs{_apply(n){rv(n,"orderByKey");const e=My(n._queryParams,fl);return fc(e),new ss(n._repo,n._path,e,!0)}}class Td extends Xs{_apply(n){rv(n,"orderByPriority");const e=My(n._queryParams,Hn);return fc(e),new ss(n._repo,n._path,e,!0)}}class W1 extends Xs{_apply(n){rv(n,"orderByValue");const e=My(n._queryParams,q0);return fc(e),new ss(n._repo,n._path,e,!0)}}class hh extends Xs{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){if(Si("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xw(this._value,this._key)._apply(new Jw(this._value,this._key)._apply(n))}}function ka(i,...n){let e=(0,V.m9)(i);for(const r of n)e=r._apply(e);return e}(function E1(i){(0,V.hu)(!Vy,"__referenceConstructor has already been defined"),Vy=i})(as),function bw(i){(0,V.hu)(!$y,"__referenceConstructor has already been defined"),$y=i}(as);const UI={};function BI(i,n,e,r,o){let s=r||i.options.databaseURL;void 0===s&&(i.options.projectId||Ia("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ur("Using default host for project ",i.options.projectId),s=`${i.options.projectId}-default-rtdb.firebaseio.com`);let p,y,c=Gw(s,o),h=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,c=Gw(s,o),h=c.repoInfo):p=!c.repoInfo.secure;const w=o&&p?new Gu(Gu.OWNER):new Bk(i.name,i.options,n);sh("Invalid Firebase Database URL",c),yn(c.path)||Ia("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function Y1(i,n,e,r){let o=UI[n.name];o||(o={},UI[n.name]=o);let s=o[i.toURLString()];return s&&Ia("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new pI(i,false,e,r),o[i.toURLString()]=s,s}(h,i,w,new kL(i.name,e));return new HI(I,i)}class HI{constructor(n,e){this._repoInternal=n,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function gI(i,n,e){if(i.stats_=R0(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new ky(i.repoInfo_,(r,o,s,c)=>{Uw(i,r,o,s,c)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>Jy(i,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Wl)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new Yu(i.repoInfo_,n,(r,o,s,c)=>{Uw(i,r,o,s,c)},r=>{Jy(i,r)},r=>{!function R1(i,n){Yr(n,(e,r)=>{_I(i,e,r)})}(i,r)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(r=>{i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(r=>{i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=function Hk(i,n){const e=i.toString();return k0[e]||(k0[e]=n()),k0[e]}(i.repoInfo_,()=>new LD(i.stats_,i.server_)),i.infoData_=new a1,i.infoSyncTree_=new iI({startListening:(r,o,s,c)=>{let h=[];const p=i.infoData_.getNode(r._path);return p.isEmpty()||(h=Dd(i.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),_I(i,"connected",!1),i.serverSyncTree_=new iI({startListening:(r,o,s,c)=>(i.server_.listen(r,s,o,(h,p)=>{const y=c(h,p);Qr(i.eventQueue_,r._path,y)}),[]),stopListening:(r,o)=>{i.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new as(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function VI(i,n){const e=UI[n];(!e||e[i.key]!==i)&&Ia(`Database ${n}(${i.repoInfo_}) has already been deleted.`),ev(i),delete e[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){null===this._rootInternal&&Ia("Cannot call "+n+" on a deleted database.")}}function zI(){_D.IS_TRANSPORT_INITIALIZED&&ao("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Z1(){zI(),Wu.forceDisallow()}function jI(){zI(),Wf.forceDisallow(),Wu.forceAllow()}function Q1(i,n){Ok(i,n)}const GI={".sv":"timestamp"};class KL{constructor(n,e){this.committed=n,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Yu.prototype.simpleListen=function(i,n){this.sendRequest("q",{p:i},n)},Yu.prototype.echo=function(i,n){this.sendRequest("echo",{d:i},n)},function X1(i){v0($n.SDK_VERSION),(0,$n._registerComponent)(new Qi.wA("database",(n,{instanceIdentifier:e})=>BI(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(eD,"0.14.4",i),(0,$n.registerVersion)(eD,"0.14.4","esm2017")}();const yl=new Kr.Yd("@firebase/database-compat"),Js=function(i){yl.warn("FIREBASE WARNING: "+i)};class YI{constructor(n){this._delegate=n}cancel(n){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",n,!0);const e=this._delegate.cancel();return n&&e.then(()=>n(null),r=>n(r)),e}remove(n){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",n,!0);const e=this._delegate.remove();return n&&e.then(()=>n(null),r=>n(r)),e}set(n,e){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(n);return e&&r.then(()=>e(null),o=>e(o)),r}setWithPriority(n,e,r){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(n,e);return r&&o.then(()=>r(null),s=>r(s)),o}update(n,e){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){const o={};for(let s=0;s<n.length;++s)o[""+s]=n[s];n=o,Js("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(n);return e&&r.then(()=>e(null),o=>e(o)),r}}class nR{constructor(n,e){this.committed=n,this.snapshot=e}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Sd{constructor(n,e){this._database=n,this._delegate=e}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(n){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),_l("DataSnapshot.child","path",n,!1),new Sd(this._database,this._delegate.child(n))}hasChild(n){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),_l("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(n){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(e=>n(new Sd(this._database,e)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new Is(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class uo{constructor(n,e){this.database=n,this._delegate=e}on(n,e,r,o){var s;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",e,!1);const c=uo.getCancelAndContextArgs_("Query.on",r,o),h=(y,w)=>{e.call(c.context,new Sd(this.database,y),w)};h.userCallback=e,h.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(n){case"value":return wg(this._delegate,h,p),e;case"child_added":return Zw(this._delegate,h,p),e;case"child_removed":return II(this._delegate,h,p),e;case"child_changed":return lv(this._delegate,h,p),e;case"child_moved":return cv(this._delegate,h,p),e;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(n,e,r){if((0,V.Dv)("Query.off",0,3,arguments.length),function(i,n,e){if(void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,n),(0,V.Wj)("Query.off","callback",e,!0),(0,V.lb)("Query.off","context",r,!0),e){const o=()=>{};o.userCallback=e,o.context=r,Qw(this._delegate,n,o)}else Qw(this._delegate,n)}get(){return DI(this._delegate).then(n=>new Sd(this.database,n))}once(n,e,r,o){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",e,!0);const s=uo.getCancelAndContextArgs_("Query.once",r,o),c=new V.BH,h=(y,w)=>{const I=new Sd(this.database,y);e&&e.call(s.context,I,w),c.resolve(I)};h.userCallback=e,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(n){case"value":wg(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":Zw(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":II(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":lv(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":cv(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(n){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new uo(this.database,ka(this._delegate,function RI(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new kI(i)}(n)))}limitToLast(n){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new uo(this.database,ka(this._delegate,function OI(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new PI(i)}(n)))}orderByChild(n){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new uo(this.database,ka(this._delegate,function FI(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return _l("orderByChild","path",i,!1),new NI(i)}(n)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new uo(this.database,ka(this._delegate,function dv(){return new LI}()))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new uo(this.database,ka(this._delegate,function G1(){return new Td}()))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new uo(this.database,ka(this._delegate,function tx(){return new W1}()))}startAt(n=null,e){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new uo(this.database,ka(this._delegate,function AI(i=null,n){return gl("startAt","key",n,!0),new Jw(i,n)}(n,e)))}startAfter(n=null,e){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new uo(this.database,ka(this._delegate,function MI(i,n){return gl("startAfter","key",n,!0),new ex(i,n)}(n,e)))}endAt(n=null,e){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new uo(this.database,ka(this._delegate,function TI(i,n){return gl("endAt","key",n,!0),new Xw(i,n)}(n,e)))}endBefore(n=null,e){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new uo(this.database,ka(this._delegate,function SI(i,n){return gl("endBefore","key",n,!0),new $1(i,n)}(n,e)))}equalTo(n,e){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new uo(this.database,ka(this._delegate,function nx(i,n){return gl("equalTo","key",n,!0),new hh(i,n)}(n,e)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(n){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof uo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(n._delegate)}static getCancelAndContextArgs_(n,e,r){const o={cancel:void 0,context:void 0};if(e&&r)o.cancel=e,(0,V.Wj)(n,"cancel",o.cancel,!0),o.context=r,(0,V.lb)(n,"context",o.context,!0);else if(e)if("object"==typeof e&&null!==e)o.context=e;else{if("function"!=typeof e)throw new Error((0,V.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=e}return o}get ref(){return new Is(this.database,new as(this._delegate._repo,this._delegate._path))}}class Is extends uo{constructor(n,e){super(n,new ss(e._repo,e._path,new Ay,!1)),this.database=n,this._delegate=e}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(n){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof n&&(n=String(n)),new Is(this.database,mc(this._delegate,n))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const n=this._delegate.parent;return n?new Is(this.database,n):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new Is(this.database,this._delegate.root)}set(n,e){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",e,!0);const r=Kw(this._delegate,n);return e&&r.then(()=>e(null),o=>e(o)),r}update(n,e){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(n)){const o={};for(let s=0;s<n.length;++s)o[""+s]=n[s];n=o,Js("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}co("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",e,!0);const r=Yw(this._delegate,n);return e&&r.then(()=>e(null),o=>e(o)),r}setWithPriority(n,e,r){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function sv(i,n,e){if(co("setWithPriority",i._path),Si("setWithPriority",n,i._path,!1),gg("setWithPriority",e,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const r=new V.BH;return Vw(i._repo,i._path,n,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,n,e);return r&&o.then(()=>r(null),s=>r(s)),o}remove(n){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",n,!0);const e=function j1(i){return co("remove",i._path),Kw(i,null)}(this._delegate);return n&&e.then(()=>n(null),r=>n(r)),e}transaction(n,e,r){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",n,!1),(0,V.Wj)("Reference.transaction","onComplete",e,!0),function(i,n,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function ox(i,n,e){var r;if(i=(0,V.m9)(i),co("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const o=null===(r=e?.applyLocally)||void 0===r||r,s=new V.BH,h=wg(i,()=>{});return function vI(i,n,e,r,o,s){ch(i,"transaction on "+n);const c={path:n,update:e,onComplete:r,status:null,order:x0(),applyLocally:s,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=zw(i,n,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Ma("transaction failed: Data returned ",p,c.path),c.status=0;const y=Yy(i.transactionQueueTree_,n),w=oh(y)||[];let I;w.push(c),Pw(y,w),"object"==typeof p&&null!==p&&(0,V.r3)(p,".priority")?(I=(0,V.DV)(p,".priority"),(0,V.hu)(uc(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(qy(i.serverSyncTree_,n)||sn.EMPTY_NODE).getPriority().val();const A=pm(i),P=Hi(p,I),U=Mw(P,h,A);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=U,c.currentWriteId=Bw(i);const G=rI(i.serverSyncTree_,n,U,c.currentWriteId,c.applyLocally);Qr(i.eventQueue_,n,G),Id(i,i.transactionQueueTree_)}}(i._repo,i._path,n,(p,y,w)=>{let I=null;p?s.reject(p):(I=new uh(w,new as(i._repo,i._path),Hn),s.resolve(new KL(y,I)))},h,o),s.promise}(this._delegate,n,{applyLocally:r}).then(s=>new nR(s.committed,new Sd(this.database,s.snapshot)));return e&&o.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),o}setPriority(n,e){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",e,!0);const r=function ov(i,n){i=(0,V.m9)(i),co("setPriority",i._path),gg("setPriority",n,!1);const e=new V.BH;return Vw(i._repo,gi(i._path,".priority"),n,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,n);return e&&r.then(()=>e(null),o=>e(o)),r}push(n,e){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",e,!0);const r=function z1(i,n){i=(0,V.m9)(i),co("push",i._path),Si("push",n,i._path,!0);const e=Lw(i._repo),r=V1(e),o=mc(i,r),s=mc(i,r);let c;return c=null!=n?Kw(s,n).then(()=>s):Promise.resolve(s),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,n),o=r.then(c=>new Is(this.database,c));e&&o.then(()=>e(null),c=>e(c));const s=new Is(this.database,r);return s.then=o.then.bind(o),s.catch=o.catch.bind(o,void 0),s}onDisconnect(){return co("Reference.onDisconnect",this._delegate._path),new YI(new CI(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class fh{constructor(n,e){this._delegate=n,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Z1,forceLongPolling:jI}}useEmulator(n,e,r={}){!function rx(i,n,e,r={}){(i=(0,V.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&Ia("Cannot call useEmulator() after instance has already been initialized.");const o=i._repoInternal;let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Ia('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Gu(Gu.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,V.Sg)(r.mockUserToken,i.app.options.projectId);s=new Gu(c)}!function K1(i,n,e,r){i.repoInfo_=new A0(`${n}:${e}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),r&&(i.authTokenProvider_=r)}(o,n,e,s)}(this._delegate,n,e,r)}ref(n){if((0,V.Dv)("database.ref",0,1,arguments.length),n instanceof Is){const e=vg(this._delegate,n.toString());return new Is(this,e)}{const e=yg(this._delegate,n);return new Is(this,e)}}refFromURL(n){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const r=vg(this._delegate,n);return new Is(this,r)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function $I(i){(i=(0,V.m9)(i))._checkNotDeleted("goOffline"),ev(i._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function vm(i){(i=(0,V.m9)(i))._checkNotDeleted("goOnline"),function tv(i){i.persistentConnection_&&i.persistentConnection_.resume(Fw)}(i._repo)}(this._delegate)}}fh.ServerValue={TIMESTAMP:function J1(){return GI}(),increment:i=>function WI(i){return{".sv":{increment:i}}}(i)};var iR=Object.freeze({__proto__:null,initStandalone:function xg({app:i,url:n,version:e,customAuthImpl:r,namespace:o,nodeAdmin:s=!1}){v0(e);const c=new Qi.zt("auth-internal",new Qi.H0("database-standalone"));return c.setComponent(new Qi.wA("auth-internal",()=>r,"PRIVATE")),{instance:new fh(BI(i,c,void 0,n,s),i),namespace:o}}});const ZI=fh.ServerValue;function sx(i){return null==i}function Eg(i){return"function"==typeof i.set}function XI(i,n){return Eg(n)?n:i.ref(n)}function ax(i,n){if(function oR(i){return"string"==typeof i}(i))return n.stringCase();if(Eg(i))return n.firebaseCase();if(function QI(i){return"function"==typeof i.exportVal}(i))return n.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function bm(i,n,e="on",r=Vf.z){return new Bi.y(o=>{let s=null;return s=i[e](n,(c,h)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:h})}),"once"===e&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===e?{unsubscribe(){null!=s&&i.off(n,s)}}:{unsubscribe(){}}}).pipe((0,_t.U)(o=>{const{snapshot:s,prevKey:c}=o;let h=null;return s.exists()&&(h=s.key),{type:n,payload:s,prevKey:c,key:h}}),(0,Cf.B)())}function eT(i,n){const e=i.length;for(let r=0;r<e;r++)if(i[r].payload.key===n)return r;return-1}function lx(i,n){const{payload:e,prevKey:r,key:o}=n,s=eT(i,o),c=function sR(i,n){if(sx(n))return 0;{const e=eT(i,n);return-1===e?i.length:e+1}}(i,r);switch(n.type){case"value":if(n.payload&&n.payload.exists()){let h=null;n.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,i=[...i,y],!1})}return i;case"child_added":if(s>-1){const h=i[s-1];(h&&h.key||null)!==r&&(i=i.filter(p=>p.payload.key!==e.key)).splice(c,0,n)}else{if(null==r)return[n,...i];(i=i.slice()).splice(c,0,n)}return i;case"child_removed":return i.filter(h=>h.payload.key!==e.key);case"child_changed":return i.map(h=>h.payload.key===o?n:h);case"child_moved":if(s>-1){const h=i.splice(s,1)[0];return(i=i.slice()).splice(c,0,h),i}return i;default:return i}}function Cg(i){return(sx(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function uv(i,n,e){return function JI(i,n,e){return bm(i,"value","once",e).pipe((0,Jn.w)(r=>{const o=[(0,mt.of)(r)];return n.forEach(s=>o.push(bm(i,s,"on",e))),(0,ba.T)(...o).pipe(ju(lx,[]))}),(0,dl.x)())}(i,n=Cg(n),e)}function cx(i,n,e){const r=(n=Cg(n)).map(o=>bm(i,o,"on",e));return(0,ba.T)(...r)}function dx(i,n){return function(r,o){return ax(r,{stringCase:()=>i.child(r)[n](o),firebaseCase:()=>r[n](o),snapshotCase:()=>r.ref[n](o)})}}function rT(i){return function(e){return e?ax(e,{stringCase:()=>i.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):i.remove()}}function sT(i,n){return function(){return bm(i,"value","on",n)}}!function rR(i){i.INTERNAL.registerComponent(new Qi.wA("database-compat",(n,{instanceIdentifier:e})=>{const r=n.getProvider("app-compat").getImmediate(),o=n.getProvider("database").getImmediate({identifier:e});return new fh(o,r)},"PUBLIC").setServiceProps({Reference:Is,Query:uo,Database:fh,DataSnapshot:Sd,enableLogging:Q1,INTERNAL:iR,ServerValue:ZI}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.3.4")}(_0.Z);const lR=new d.OlP("angularfire2.realtimeDatabaseURL"),cR=new d.OlP("angularfire2.database.use-emulator");let dR=(()=>{class i{constructor(e,r,o,s,c,h,p,y,w,I,A,P,U,G,Q){this.schedulers=h;const me=p,Ce=(0,Ui.on)(e,c,r);y&&zu(Ce,c,w,A,P,U,I,G),this.database=(0,Ui.cc)(`${Ce.name}.database.${o}`,"AngularFireDatabase",Ce.name,()=>{const fe=c.runOutsideAngular(()=>Ce.database(o||void 0));return me&&fe.useEmulator(...me),fe},[me])}list(e,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>XI(this.database,e));let s=o;return r&&(s=r(o)),function oT(i,n){const e=n.schedulers.outsideAngular,r=n.schedulers.ngZone.run(()=>i.ref);return{query:i,update:dx(r,"update"),set:dx(r,"set"),push:o=>r.push(o),remove:rT(r),snapshotChanges:o=>uv(i,o,e).pipe(qt.iC),stateChanges:o=>cx(i,o,e).pipe(qt.iC),auditTrail:o=>function tT(i,n,e){return function iT(i,n,e){return function nT(i,n){return bm(i,"value","on",n).pipe((0,_t.U)(e=>{let r;return e.payload.forEach(o=>(r=o.key,!1)),{data:e,lastKeyToLoad:r}}))}(i,e).pipe(function cy(...i){const n=(0,dd.jO)(i);return(0,Zi.e)((e,r)=>{const o=i.length,s=new Array(o);let c=i.map(()=>!1),h=!1;for(let p=0;p<o;p++)(0,Da.Xf)(i[p]).subscribe((0,Ii.x)(r,y=>{s[p]=y,!h&&!c[p]&&(c[p]=!0,(h=c.every(Ql.y))&&(c=null))},ly.Z));e.subscribe((0,Ii.x)(r,p=>{if(h){const y=[p,...s];r.next(n?n(...y):y)}}))})}(n),(0,_t.U)(([o,s])=>{const c=o.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),function Pk(i){return(0,Zi.e)((n,e)=>{let r=!1,o=0;n.subscribe((0,Ii.x)(e,s=>(r||(r=!i(s,o++)))&&e.next(s)))})}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,_t.U)(o=>o.actions))}(i,cx(i,n).pipe(ju((o,s)=>[...o,s],[])),e)}(i,o,e).pipe(qt.iC),valueChanges:(o,s)=>uv(i,o,e).pipe((0,_t.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),qt.iC)}}(s,this)}object(e){return function aR(i,n){return{query:i,snapshotChanges:()=>sT(i,n.schedulers.outsideAngular)().pipe(qt.iC),update:e=>i.ref.update(e),set:e=>i.ref.set(e),remove:()=>i.ref.remove(),valueChanges:()=>sT(i,n.schedulers.outsideAngular)().pipe(qt.iC,(0,_t.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>XI(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Ui.Dh),d.LFG(Ui.xv,8),d.LFG(lR,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qt.HU),d.LFG(cR,8),d.LFG(Wp,8),d.LFG(ay,8),d.LFG(m0,8),d.LFG(p0,8),d.LFG($p,8),d.LFG(Gp,8),d.LFG(g0,8),d.LFG(Bf,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),uR=(()=>{class i{constructor(){jp.Z.registerVersion("angularfire",qt.q4.full,"rtdb-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[dR]}),i})();var Dg=H(7537);function hv(...i){return function hR(){return(0,Dg.J)(1)}()((0,rn.D)(i,(0,dd.yG)(i)))}function gc(...i){const n=(0,dd.yG)(i);return(0,Zi.e)((e,r)=>{(n?hv(i,e,n):hv(i,e)).subscribe(r)})}function ux(){return(0,Zi.e)((i,n)=>{let e,r=!1;i.subscribe((0,Ii.x)(n,o=>{const s=e;e=o,r&&n.next([s,o]),r=!0}))})}var gt,fR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pa={},hx=hx||{},nn=fR||self;function fv(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function Ig(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var mv="closure_uid_"+(1e9*Math.random()>>>0),lT=0;function cT(i,n,e){return i.call.apply(i.bind,arguments)}function dT(i,n,e){if(!i)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),i.apply(n,o)}}return function(){return i.apply(n,arguments)}}function ho(i,n,e){return(ho=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cT:dT).apply(null,arguments)}function Tg(i,n){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),i.apply(this,r)}}function Lr(i,n){function e(){}e.prototype=n.prototype,i.$=n.prototype,i.prototype=new e,i.prototype.constructor=i,i.ac=function(r,o,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return n.prototype[o].apply(r,c)}}function _c(){this.s=this.s,this.o=this.o}_c.prototype.s=!1,_c.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function aT(i){Object.prototype.hasOwnProperty.call(i,mv)&&i[mv]||(i[mv]=++lT)}(this)},_c.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pv=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let e=0;e<i.length;e++)if(e in i&&i[e]===n)return e;return-1};function yc(i){const n=i.length;if(0<n){const e=Array(n);for(let r=0;r<n;r++)e[r]=i[r];return e}return[]}function uT(i,n){for(let e=1;e<arguments.length;e++){const r=arguments[e];if(fv(r)){const o=i.length||0,s=r.length||0;i.length=o+s;for(let c=0;c<s;c++)i[o+c]=r[c]}else i.push(r)}}function To(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}To.prototype.h=function(){this.defaultPrevented=!0};var wm=function(){if(!nn.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{nn.addEventListener("test",()=>{},n),nn.removeEventListener("test",()=>{},n)}catch{}return i}();function gv(i){return/^[\s\xa0]*$/.test(i)}function xm(){var i=nn.navigator;return i&&(i=i.userAgent)?i:""}function vc(i){return-1!=xm().indexOf(i)}function _v(i){return _v[" "](i),i}_v[" "]=function(){};var Cm,i,YL=vc("Opera"),Lt=vc("Trident")||vc("MSIE"),fT=vc("Edge"),mx=fT||Lt,mT=vc("Gecko")&&!(-1!=xm().toLowerCase().indexOf("webkit")&&!vc("Edge"))&&!(vc("Trident")||vc("MSIE"))&&!vc("Edge"),Em=-1!=xm().toLowerCase().indexOf("webkit")&&!vc("Edge");function pT(){var i=nn.document;return i?i.documentMode:void 0}e:{var Dm="",Pi=(i=xm(),mT?/rv:([^\);]+)(\)|;)/.exec(i):fT?/Edge\/([\d\.]+)/.exec(i):Lt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Em?/WebKit\/(\S+)/.exec(i):YL?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Pi&&(Dm=Pi?Pi[1]:""),Lt){var gT=pT();if(null!=gT&&gT>parseFloat(Dm)){Cm=String(gT);break e}}Cm=Dm}var mR=nn.document&&Lt&&(pT()||parseInt(Cm,10))||void 0;function Im(i,n){if(To.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var e=this.type=i.type,r=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(mT){e:{try{_v(n.nodeName);var o=!0;break e}catch{}o=!1}o||(n=null)}}else"mouseover"==e?n=i.fromElement:"mouseout"==e&&(n=i.toElement);this.relatedTarget=n,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:_T[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Im.$.h.call(this)}}Lr(Im,To);var _T={2:"touch",3:"pen",4:"mouse"};Im.prototype.h=function(){Im.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Tm="closure_listenable_"+(1e6*Math.random()|0),yT=0;function pR(i,n,e,r,o){this.listener=i,this.proxy=null,this.src=n,this.type=e,this.capture=!!r,this.la=o,this.key=++yT,this.fa=this.ia=!1}function vv(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function gx(i,n,e){for(const r in i)n.call(e,i[r],r,i)}function vT(i){const n={};for(const e in i)n[e]=i[e];return n}const bT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wT(i,n){let e,r;for(let o=1;o<arguments.length;o++){for(e in r=arguments[o],r)i[e]=r[e];for(let s=0;s<bT.length;s++)e=bT[s],Object.prototype.hasOwnProperty.call(r,e)&&(i[e]=r[e])}}function mh(i){this.src=i,this.g={},this.h=0}function bv(i,n){var e=n.type;if(e in i.g){var s,r=i.g[e],o=pv(r,n);(s=0<=o)&&Array.prototype.splice.call(r,o,1),s&&(vv(n),0==i.g[e].length&&(delete i.g[e],i.h--))}}function wv(i,n,e,r){for(var o=0;o<i.length;++o){var s=i[o];if(!s.fa&&s.listener==n&&s.capture==!!e&&s.la==r)return o}return-1}mh.prototype.add=function(i,n,e,r,o){var s=i.toString();(i=this.g[s])||(i=this.g[s]=[],this.h++);var c=wv(i,n,r,o);return-1<c?(n=i[c],e||(n.ia=!1)):((n=new pR(n,this.src,s,!!r,o)).ia=e,i.push(n)),n};var xv="closure_lm_"+(1e6*Math.random()|0),_x={};function Sm(i,n,e,r,o){if(r&&r.once)return xT(i,n,e,r,o);if(Array.isArray(n)){for(var s=0;s<n.length;s++)Sm(i,n[s],e,r,o);return null}return e=bx(e),i&&i[Tm]?i.O(n,e,Ig(r)?!!r.capture:!!r,o):Am(i,n,e,!1,r,o)}function Am(i,n,e,r,o,s){if(!n)throw Error("Invalid event type");var c=Ig(o)?!!o.capture:!!o,h=vx(i);if(h||(i[xv]=h=new mh(i)),(e=h.add(n,e,r,c,s)).proxy)return e;if(r=function gR(){const n=CT;return function i(e){return n.call(i.src,i.listener,e)}}(),e.proxy=r,r.src=i,r.listener=e,i.addEventListener)wm||(o=c),void 0===o&&(o=!1),i.addEventListener(n.toString(),r,o);else if(i.attachEvent)i.attachEvent(yx(n.toString()),r);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(r)}return e}function xT(i,n,e,r,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)xT(i,n[s],e,r,o);return null}return e=bx(e),i&&i[Tm]?i.P(n,e,Ig(r)?!!r.capture:!!r,o):Am(i,n,e,!0,r,o)}function ET(i,n,e,r,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)ET(i,n[s],e,r,o);else r=Ig(r)?!!r.capture:!!r,e=bx(e),i&&i[Tm]?(i=i.i,(n=String(n).toString())in i.g&&-1<(e=wv(s=i.g[n],e,r,o))&&(vv(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete i.g[n],i.h--))):i&&(i=vx(i))&&(n=i.g[n.toString()],i=-1,n&&(i=wv(n,e,r,o)),(e=-1<i?n[i]:null)&&Ev(e))}function Ev(i){if("number"!=typeof i&&i&&!i.fa){var n=i.src;if(n&&n[Tm])bv(n.i,i);else{var e=i.type,r=i.proxy;n.removeEventListener?n.removeEventListener(e,r,i.capture):n.detachEvent?n.detachEvent(yx(e),r):n.addListener&&n.removeListener&&n.removeListener(r),(e=vx(n))?(bv(e,i),0==e.h&&(e.src=null,n[xv]=null)):vv(i)}}}function yx(i){return i in _x?_x[i]:_x[i]="on"+i}function CT(i,n){if(i.fa)i=!0;else{n=new Im(n,this);var e=i.listener,r=i.la||i.src;i.ia&&Ev(i),i=e.call(r,n)}return i}function vx(i){return(i=i[xv])instanceof mh?i:null}var Cv="__closure_events_fn_"+(1e9*Math.random()>>>0);function bx(i){return"function"==typeof i?i:(i[Cv]||(i[Cv]=function(n){return i.handleEvent(n)}),i[Cv])}function Xr(){_c.call(this),this.i=new mh(this),this.S=this,this.J=null}function So(i,n){var e,r=i.J;if(r)for(e=[];r;r=r.J)e.push(r);if(i=i.S,r=n.type||n,"string"==typeof n)n=new To(n,i);else if(n instanceof To)n.target=n.target||i;else{var o=n;wT(n=new To(r,i),o)}if(o=!0,e)for(var s=e.length-1;0<=s;s--){var c=n.g=e[s];o=wx(c,r,!0,n)&&o}if(o=wx(c=n.g=i,r,!0,n)&&o,o=wx(c,r,!1,n)&&o,e)for(s=0;s<e.length;s++)o=wx(c=n.g=e[s],r,!1,n)&&o}function wx(i,n,e,r){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var o=!0,s=0;s<n.length;++s){var c=n[s];if(c&&!c.fa&&c.capture==e){var h=c.listener,p=c.la||c.src;c.ia&&bv(i.i,c),o=!1!==h.call(p,r)&&o}}return o&&!r.defaultPrevented}Lr(Xr,_c),Xr.prototype[Tm]=!0,Xr.prototype.removeEventListener=function(i,n,e,r){ET(this,i,n,e,r)},Xr.prototype.N=function(){if(Xr.$.N.call(this),this.i){var n,i=this.i;for(n in i.g){for(var e=i.g[n],r=0;r<e.length;r++)vv(e[r]);delete i.g[n],i.h--}}this.J=null},Xr.prototype.O=function(i,n,e,r){return this.i.add(String(i),n,!1,e,r)},Xr.prototype.P=function(i,n,e,r){return this.i.add(String(i),n,!0,e,r)};var DT=nn.JSON.stringify;function IT(){var i=xx;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var TT=new class ZL{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new _R,i=>i.reset());class _R{constructor(){this.next=this.g=this.h=null}set(n,e){this.h=n,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ST(i){var n=1;i=i.split(":");const e=[];for(;0<n&&i.length;)e.push(i.shift()),n--;return i.length&&e.push(i.join(":")),e}function Ag(i){nn.setTimeout(()=>{throw i},0)}let Mg,kg=!1,xx=new class Dv{constructor(){this.h=this.g=null}add(n,e){const r=TT.get();r.set(n,e),this.h?this.h.next=r:this.g=r,this.h=r}},AT=()=>{const i=nn.Promise.resolve(void 0);Mg=()=>{i.then(QL)}};var QL=()=>{for(var i;i=IT();){try{i.h.call(i.g)}catch(e){Ag(e)}var n=TT;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}kg=!1};function Iv(i,n){Xr.call(this),this.h=i||1,this.g=n||nn,this.j=ho(this.qb,this),this.l=Date.now()}function Tv(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ex(i,n,e){if("function"==typeof i)e&&(i=ho(i,e));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=ho(i.handleEvent,i)}return 2147483647<Number(n)?-1:nn.setTimeout(i,n||0)}function MT(i){i.g=Ex(()=>{i.g=null,i.i&&(i.i=!1,MT(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}Lr(Iv,Xr),(gt=Iv.prototype).ga=!1,gt.T=null,gt.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),So(this,"tick"),this.ga&&(Tv(this),this.start()))}},gt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.N=function(){Iv.$.N.call(this),Tv(this),delete this.g};class Rg extends _c{constructor(n,e){super(),this.m=n,this.j=e,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:MT(this)}N(){super.N(),this.g&&(nn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pg(i){_c.call(this),this.h=i,this.g={}}Lr(Pg,_c);var Cx=[];function kT(i,n,e,r){Array.isArray(e)||(e&&(Cx[0]=e.toString()),e=Cx);for(var o=0;o<e.length;o++){var s=Sm(n,e[o],r||i.handleEvent,!1,i.h||i);if(!s)break;i.g[s.key]=s}}function Dx(i){gx(i.g,function(n,e){this.g.hasOwnProperty(e)&&Ev(n)},i),i.g={}}function Sv(){this.g=!0}function Ad(i,n,e,r){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function PT(i,n){if(!i.g)return n;if(!n)return null;try{var e=JSON.parse(n);if(e)for(i=0;i<e.length;i++)if(Array.isArray(e[i])){var r=e[i];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var s=o[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<o.length;c++)o[c]=""}}}return DT(e)}catch{return n}}(i,e)+(r?" "+r:"")})}Pg.prototype.N=function(){Pg.$.N.call(this),Dx(this)},Pg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sv.prototype.Ea=function(){this.g=!1},Sv.prototype.info=function(){};var Md={},OT=null;function Av(){return OT=OT||new Xr}function NT(i){To.call(this,Md.Ta,i)}function ph(i){const n=Av();So(n,new NT(n))}function FT(i,n){To.call(this,Md.STAT_EVENT,i),this.stat=n}function Ao(i){const n=Av();So(n,new FT(n,i))}function LT(i,n){To.call(this,Md.Ua,i),this.size=n}function Og(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return nn.setTimeout(function(){i()},n)}Md.Ta="serverreachability",Lr(NT,To),Md.STAT_EVENT="statevent",Lr(FT,To),Md.Ua="timingevent",Lr(LT,To);var Mv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},UT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ix(){}function VT(){}Ix.prototype.h=null;var Tx,Ng={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function kv(){To.call(this,"d")}function Rv(){To.call(this,"c")}function Pv(){}function Mm(i,n,e,r){this.l=i,this.j=n,this.m=e,this.W=r||1,this.U=new Pg(this),this.P=bR,this.V=new Iv(i=mx?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new HT}function HT(){this.i=null,this.g="",this.h=!1}Lr(kv,To),Lr(Rv,To),Lr(Pv,Ix),Pv.prototype.g=function(){return new XMLHttpRequest},Pv.prototype.i=function(){return{}},Tx=new Pv;var bR=45e3,Sx={},km={};function Fg(i,n,e){i.L=1,i.v=Bg(bc(n)),i.s=e,i.S=!0,Ax(i,null)}function Ax(i,n){i.G=Date.now(),gh(i),i.A=bc(i.v);var e=i.A,r=i.W;Array.isArray(r)||(r=[String(r)]),ZT(e.i,"t",r),i.C=0,e=i.l.J,i.h=new HT,i.g=zv(i.l,e?n:null,!i.s),0<i.O&&(i.M=new Rg(ho(i.Pa,i,i.g),i.O)),kT(i.U,i.g,"readystatechange",i.nb),n=i.I?vT(i.I):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,n)):(i.u="GET",i.g.ha(i.A,i.u,null,n)),ph(),function RT(i,n,e,r,o,s){i.info(function(){if(i.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var w=y[0];y=y[1];var I=w.split("_");c=2<=I.length&&"type"==I[1]?c+(w+"=")+y+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+n+"\n"+e+"\n"+c})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Ov(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function zT(i,n,e){let o,r=!0;for(;!i.J&&i.C<e.length;){if(o=wR(i,e),o==km){4==n&&(i.o=4,Ao(14),r=!1),Ad(i.j,i.m,null,"[Incomplete Response]");break}if(o==Sx){i.o=4,Ao(15),Ad(i.j,i.m,e,"[Invalid Chunk]"),r=!1;break}Ad(i.j,i.m,o,null),Mx(i,o)}Ov(i)&&o!=km&&o!=Sx&&(i.h.g="",i.C=0),4!=n||0!=e.length||i.h.h||(i.o=1,Ao(16),r=!1),i.i=i.i&&r,r?0<e.length&&!i.ba&&(i.ba=!0,(n=i.l).g==i&&n.ca&&!n.M&&(n.l.info("Great, no buffering proxy detected. Bytes received: "+e.length),Yg(n),n.M=!0,Ao(11))):(Ad(i.j,i.m,e,"[Invalid Chunked Response]"),kd(i),vl(i))}function wR(i,n){var e=i.C,r=n.indexOf("\n",e);return-1==r?km:(e=Number(n.substring(e,r)),isNaN(e)?Sx:(r+=1)+e>n.length?km:(n=n.slice(r,r+e),i.C=r+e,n))}function gh(i){i.Y=Date.now()+i.P,jT(i,i.P)}function jT(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Og(ho(i.lb,i),n)}function Lg(i){i.B&&(nn.clearTimeout(i.B),i.B=null)}function vl(i){0==i.l.H||i.J||Hx(i.l,i)}function kd(i){Lg(i);var n=i.M;n&&"function"==typeof n.sa&&n.sa(),i.M=null,Tv(i.V),Dx(i.U),i.g&&(n=i.g,i.g=null,n.abort(),n.sa())}function Mx(i,n){try{var e=i.l;if(0!=e.H&&(e.g==i||Px(e.i,i)))if(!i.K&&Px(e.i,i)&&3==e.H){try{var r=e.Ja.g.parse(n)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<i.G))break e;Vv(e),Wg(e)}Bv(e),Ao(18)}}else e.Fa=o[1],0<e.Fa-e.V&&37500>o[2]&&e.G&&0==e.A&&!e.v&&(e.v=Og(ho(e.ib,e),6e3));if(1>=nS(e.i)&&e.oa){try{e.oa()}catch{}e.oa=void 0}}else vh(e,11)}else if((i.K||e.g==i)&&Vv(e),!gv(n))for(o=e.Ja.g.parse(n),n=0;n<o.length;n++){let y=o[n];if(e.V=y[0],y=y[1],2==e.H)if("c"==y[0]){e.K=y[1],e.pa=y[2];const w=y[3];null!=w&&(e.ra=w,e.l.info("VER="+e.ra));const I=y[4];null!=I&&(e.Ga=I,e.l.info("SVER="+e.Ga));const A=y[5];null!=A&&"number"==typeof A&&0<A&&(e.L=r=1.5*A,e.l.info("backChannelRequestTimeoutMs_="+r)),r=e;const P=i.g;if(P){const U=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=r.i;s.g||-1==U.indexOf("spdy")&&-1==U.indexOf("quic")&&-1==U.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ox(s,s.h),s.h=null))}if(r.F){const G=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;G&&(r.Da=G,_i(r.I,r.F,G))}}e.H=3,e.h&&e.h.Ba(),e.ca&&(e.S=Date.now()-i.G,e.l.info("Handshake RTT: "+e.S+"ms"));var c=i;if((r=e).wa=Hv(r,r.J?r.pa:null,r.Y),c.K){iS(r.i,c);var h=c,p=r.L;p&&h.setTimeout(p),h.B&&(Lg(h),gh(h)),r.g=c}else Bx(r);0<e.j.length&&Uv(e)}else"stop"!=y[0]&&"close"!=y[0]||vh(e,7);else 3==e.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?vh(e,7):Ux(e):"noop"!=y[0]&&e.h&&e.h.Aa(y),e.A=0)}ph()}catch{}}function Nv(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(fv(i)||"string"==typeof i)Array.prototype.forEach.call(i,n,void 0);else for(var e=function kx(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(fv(i)||"string"==typeof i){var n=[];i=i.length;for(var e=0;e<i;e++)n.push(e);return n}n=[],e=0;for(const r in i)n[e++]=r;return n}}}(i),r=function XL(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(fv(i)){for(var n=[],e=i.length,r=0;r<e;r++)n.push(i[r]);return n}for(r in n=[],e=0,i)n[e++]=i[r];return n}(i),o=r.length,s=0;s<o;s++)n.call(void 0,r[s],e&&e[s],i)}(gt=Mm.prototype).setTimeout=function(i){this.P=i},gt.nb=function(i){i=i.target;const n=this.M;n&&3==wl(i)?n.l():this.Pa(i)},gt.Pa=function(i){try{if(i==this.g)e:{const w=wl(this.g);var n=this.g.Ia();if(this.g.da(),!(3>w)&&(3!=w||mx||this.g&&(this.h.h||this.g.ja()||Gg(this.g)))){this.J||4!=w||7==n||ph(),Lg(this);var e=this.g.da();this.ca=e;t:if(Ov(this)){var r=Gg(this.g);i="";var o=r.length,s=4==wl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){kd(this),vl(this);var c="";break t}this.h.i=new nn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,i+=this.h.i.decode(r[n],{stream:s&&n==o-1});r.splice(0,o),this.h.g+=i,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==e,function yR(i,n,e,r,o,s,c){i.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+n+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.W,w,e),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gv(h)){var y=h;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,Ao(12),kd(this),vl(this);break e}Ad(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mx(this,e)}this.S?(zT(this,w,c),mx&&this.i&&3==w&&(kT(this.U,this.V,"tick",this.mb),this.V.start())):(Ad(this.j,this.m,c,null),Mx(this,c)),4==w&&kd(this),this.i&&!this.J&&(4==w?Hx(this.l,this):(this.i=!1,gh(this)))}else(function uS(i){const n={};i=(i.g&&2<=wl(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<i.length;r++){if(gv(i[r]))continue;var e=ST(i[r]);const o=e[0];if("string"!=typeof(e=e[1]))continue;e=e.trim();const s=n[o]||[];n[o]=s,s.push(e)}!function Sg(i,n){for(const e in i)n.call(void 0,i[e],e,i)}(n,function(r){return r.join(", ")})})(this.g),400==e&&0<c.indexOf("Unknown SID")?(this.o=3,Ao(12)):(this.o=0,Ao(13)),kd(this),vl(this)}}}catch{}},gt.mb=function(){if(this.g){var i=wl(this.g),n=this.g.ja();this.C<n.length&&(Lg(this),zT(this,i,n),this.i&&4!=i&&gh(this))}},gt.cancel=function(){this.J=!0,kd(this)},gt.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function vR(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.L&&(ph(),Ao(17)),kd(this),this.o=2,vl(this)):jT(this,this.Y-i)};var $T=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rd(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Rd){this.h=i.h,Ug(this,i.j),this.s=i.s,this.g=i.g,Rm(this,i.m),this.l=i.l;var n=i.i,e=new Hg;e.i=n.i,n.g&&(e.g=new Map(n.g),e.h=n.h),Rx(this,e),this.o=i.o}else i&&(n=String(i).match($T))?(this.h=!1,Ug(this,n[1]||"",!0),this.s=Pm(n[2]||""),this.g=Pm(n[3]||"",!0),Rm(this,n[4]),this.l=Pm(n[5]||"",!0),Rx(this,n[6]||"",!0),this.o=Pm(n[7]||"")):(this.h=!1,this.i=new Hg(null,this.h))}function bc(i){return new Rd(i)}function Ug(i,n,e){i.j=e?Pm(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function Rm(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function Rx(i,n,e){n instanceof Hg?(i.i=n,function QT(i,n){n&&!i.j&&(Pd(i),i.i=null,i.g.forEach(function(e,r){var o=r.toLowerCase();r!=o&&(CR(this,r),ZT(this,o,e))},i)),i.j=n}(i.i,i.h)):(e||(n=Vg(n,JL)),i.i=new Hg(n,i.h))}function _i(i,n,e){i.i.set(n,e)}function Bg(i){return _i(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Pm(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Vg(i,n,e){return"string"==typeof i?(i=encodeURI(i).replace(n,xR),e&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function xR(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Rd.prototype.toString=function(){var i=[],n=this.j;n&&i.push(Vg(n,WT,!0),":");var e=this.g;return(e||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(Vg(n,WT,!0),"@"),i.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&i.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&i.push("/"),i.push(Vg(e,"/"==e.charAt(0)?qT:ER,!0))),(e=this.i.toString())&&i.push("?",e),(e=this.o)&&i.push("#",Vg(e,KT)),i.join("")};var WT=/[#\/\?@]/g,ER=/[#\?:]/g,qT=/[#\?]/g,JL=/[#\?@]/g,KT=/#/g;function Hg(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function Pd(i){i.g||(i.g=new Map,i.h=0,i.i&&function GT(i,n){if(i){i=i.split("&");for(var e=0;e<i.length;e++){var r=i[e].indexOf("="),o=null;if(0<=r){var s=i[e].substring(0,r);o=i[e].substring(r+1)}else s=i[e];n(s,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(i.i,function(n,e){i.add(decodeURIComponent(n.replace(/\+/g," ")),e)}))}function CR(i,n){Pd(i),n=_h(i,n),i.g.has(n)&&(i.i=null,i.h-=i.g.get(n).length,i.g.delete(n))}function YT(i,n){return Pd(i),n=_h(i,n),i.g.has(n)}function ZT(i,n,e){CR(i,n),0<e.length&&(i.i=null,i.g.set(_h(i,n),yc(e)),i.h+=e.length)}function _h(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function JT(i){this.l=i||eS,i=nn.PerformanceNavigationTiming?0<(i=nn.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(nn.g&&nn.g.Ka&&nn.g.Ka()&&nn.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=Hg.prototype).add=function(i,n){Pd(this),this.i=null,i=_h(this,i);var e=this.g.get(i);return e||this.g.set(i,e=[]),e.push(n),this.h+=1,this},gt.forEach=function(i,n){Pd(this),this.g.forEach(function(e,r){e.forEach(function(o){i.call(n,o,r,this)},this)},this)},gt.ta=function(){Pd(this);const i=Array.from(this.g.values()),n=Array.from(this.g.keys()),e=[];for(let r=0;r<n.length;r++){const o=i[r];for(let s=0;s<o.length;s++)e.push(n[r])}return e},gt.Z=function(i){Pd(this);let n=[];if("string"==typeof i)YT(this,i)&&(n=n.concat(this.g.get(_h(this,i))));else{i=Array.from(this.g.values());for(let e=0;e<i.length;e++)n=n.concat(i[e])}return n},gt.set=function(i,n){return Pd(this),this.i=null,YT(this,i=_h(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},gt.get=function(i,n){return i&&0<(i=this.Z(i)).length?String(i[0]):n},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],n=Array.from(this.g.keys());for(var e=0;e<n.length;e++){var r=n[e];const s=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var o=s;""!==c[r]&&(o+="="+encodeURIComponent(String(c[r]))),i.push(o)}}return this.i=i.join("&")};var eS=10;function tS(i){return!!i.h||!!i.g&&i.g.size>=i.j}function nS(i){return i.h?1:i.g?i.g.size:0}function Px(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function Ox(i,n){i.g?i.g.add(n):i.h=n}function iS(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function Om(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const e of i.g.values())n=n.concat(e.F);return n}return yc(i.i)}JT.prototype.cancel=function(){if(this.i=Om(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var rS=class{stringify(i){return nn.JSON.stringify(i,void 0)}parse(i){return nn.JSON.parse(i,void 0)}};function oS(){this.g=new rS}function sS(i,n,e){const r=e||"";try{Nv(i,function(o,s){let c=o;Ig(o)&&(c=DT(o)),n.push(r+s+"="+encodeURIComponent(c))})}catch(o){throw n.push(r+"type="+encodeURIComponent("_badmap")),o}}function zg(i,n,e,r,o){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,o(r)}catch{}}function Nm(i){this.l=i.fc||null,this.j=i.ob||!1}function Fv(i,n){Xr.call(this),this.F=i,this.u=n,this.m=void 0,this.readyState=lS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lr(Nm,Ix),Nm.prototype.g=function(){return new Fv(this.l,this.j)},Nm.prototype.i=function(i){return function(){return i}}({}),Lr(Fv,Xr);var lS=0;function Nx(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function jg(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Fm(i)}function Fm(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(gt=Fv.prototype).open=function(i,n){if(this.readyState!=lS)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,Fm(this)},gt.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.F||nn).fetch(new Request(this.B,n)).then(this.$a.bind(this),this.ka.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jg(this)),this.readyState=lS},gt.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Fm(this)),this.g&&(this.readyState=3,Fm(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof nn.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nx(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},gt.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?jg(this):Fm(this),3==this.readyState&&Nx(this)}},gt.Za=function(i){this.g&&(this.response=this.responseText=i,jg(this))},gt.Ya=function(i){this.g&&(this.response=i,jg(this))},gt.ka=function(){this.g&&jg(this)},gt.setRequestHeader=function(i,n){this.v.append(i,n)},gt.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var e=n.next();!e.done;)i.push((e=e.value)[0]+": "+e[1]),e=n.next();return i.join("\r\n")},Object.defineProperty(Fv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var DR=nn.JSON.parse;function er(i){Xr.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Lm,this.L=this.M=!1}Lr(er,Xr);var Lm="",IR=/^https?$/i,Fx=["POST","PUT"];function cS(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,$g(i),Lv(i)}function $g(i){i.F||(i.F=!0,So(i,"complete"),So(i,"error"))}function Um(i){if(i.h&&typeof hx<"u"&&(!i.C[1]||4!=wl(i)||2!=i.da()))if(i.v&&4==wl(i))Ex(i.La,0,i);else if(So(i,"readystatechange"),4==wl(i)){i.h=!1;try{const c=i.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var e;if(!(e=n)){var r;if(r=0===c){var o=String(i.I).match($T)[1]||null;!o&&nn.self&&nn.self.location&&(o=nn.self.location.protocol.slice(0,-1)),r=!IR.test(o?o.toLowerCase():"")}e=r}if(e)So(i,"complete"),So(i,"success");else{i.m=6;try{var s=2<wl(i)?i.g.statusText:""}catch{s=""}i.j=s+" ["+i.da()+"]",$g(i)}}finally{Lv(i)}}}function Lv(i,n){if(i.g){dS(i);const e=i.g,r=i.C[0]?()=>{}:null;i.g=null,i.C=null,n||So(i,"ready");try{e.onreadystatechange=r}catch{}}}function dS(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(nn.clearTimeout(i.A),i.A=null)}function wl(i){return i.g?i.g.readyState:0}function Gg(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Lm:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function hS(i){let n="";return gx(i,function(e,r){n+=r,n+=":",n+=e,n+="\r\n"}),n}function Lx(i,n,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=hS(e),"string"==typeof i?null!=e&&encodeURIComponent(String(e)):_i(i,n,e))}function yh(i,n,e){return e&&e.internalChannelParams&&e.internalChannelParams[i]||n}function fS(i){this.Ga=0,this.j=[],this.l=new Sv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yh("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yh("baseRetryDelayMs",5e3,i),this.hb=yh("retryDelaySeedMs",1e4,i),this.eb=yh("forwardChannelMaxRetries",2,i),this.xa=yh("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new JT(i&&i.concurrentRequestLimit),this.Ja=new oS,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ux(i){if(mS(i),3==i.H){var n=i.W++,e=bc(i.I);if(_i(e,"SID",i.K),_i(e,"RID",n),_i(e,"TYPE","terminate"),Kg(i,e),(n=new Mm(i,i.l,n)).L=2,n.v=Bg(bc(e)),e=!1,nn.navigator&&nn.navigator.sendBeacon)try{e=nn.navigator.sendBeacon(n.v.toString(),"")}catch{}!e&&nn.Image&&((new Image).src=n.v,e=!0),e||(n.g=zv(n.l,null),n.g.ha(n.v)),n.G=Date.now(),gh(n)}_S(i)}function Wg(i){i.g&&(Yg(i),i.g.cancel(),i.g=null)}function mS(i){Wg(i),i.u&&(nn.clearTimeout(i.u),i.u=null),Vv(i),i.i.cancel(),i.m&&("number"==typeof i.m&&nn.clearTimeout(i.m),i.m=null)}function Uv(i){if(!tS(i.i)&&!i.m){i.m=!0;var n=i.Na;Mg||AT(),kg||(Mg(),kg=!0),xx.add(n,i),i.C=0}}function qg(i,n){var e;e=n?n.m:i.W++;const r=bc(i.I);_i(r,"SID",i.K),_i(r,"RID",e),_i(r,"AID",i.V),Kg(i,r),i.o&&i.s&&Lx(r,i.o,i.s),e=new Mm(i,i.l,e,i.C+1),null===i.o&&(e.I=i.s),n&&(i.j=n.F.concat(i.j)),n=gS(i,e,1e3),e.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Ox(i.i,e),Fg(e,r,n)}function Kg(i,n){i.na&&gx(i.na,function(e,r){_i(n,r,e)}),i.h&&Nv({},function(e,r){_i(n,r,e)})}function gS(i,n,e){e=Math.min(i.j.length,e);var r=i.h?ho(i.h.Va,i.h,i):null;e:{var o=i.j;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=o[0].g,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<e;p++){let y=o[p].g;const w=o[p].map;if(y-=s,0>y)s=Math.max(0,o[p].g-100),h=!1;else try{sS(w,c,"req"+y+"_")}catch{r&&r(w)}}if(h){r=c.join("&");break e}}}return i=i.j.splice(0,e),n.F=i,r}function Bx(i){if(!i.g&&!i.u){i.ba=1;var n=i.Ma;Mg||AT(),kg||(Mg(),kg=!0),xx.add(n,i),i.A=0}}function Bv(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Og(ho(i.Ma,i),zx(i,i.A)),i.A++,0))}function Yg(i){null!=i.B&&(nn.clearTimeout(i.B),i.B=null)}function Vx(i){i.g=new Mm(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var n=bc(i.wa);_i(n,"RID","rpc"),_i(n,"SID",i.K),_i(n,"AID",i.V),_i(n,"CI",i.G?"0":"1"),!i.G&&i.qa&&_i(n,"TO",i.qa),_i(n,"TYPE","xmlhttp"),Kg(i,n),i.o&&i.s&&Lx(n,i.o,i.s),i.L&&i.g.setTimeout(i.L);var e=i.g;i=i.pa,e.L=1,e.v=Bg(bc(n)),e.s=null,e.S=!0,Ax(e,i)}function Vv(i){null!=i.v&&(nn.clearTimeout(i.v),i.v=null)}function Hx(i,n){var e=null;if(i.g==n){Vv(i),Yg(i),i.g=null;var r=2}else{if(!Px(i.i,n))return;e=n.F,iS(i.i,n),r=1}if(0!=i.H)if(n.i)if(1==r){e=n.s?n.s.length:0,n=Date.now()-n.G;var o=i.C;So(r=Av(),new LT(r,e)),Uv(i)}else Bx(i);else if(3==(o=n.o)||0==o&&0<n.ca||!(1==r&&function pS(i,n){return!(nS(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=n.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Og(ho(i.Na,i,n),zx(i,i.C)),i.C++,0)))}(i,n)||2==r&&Bv(i)))switch(e&&0<e.length&&(n=i.i,n.i=n.i.concat(e)),o){case 1:vh(i,5);break;case 4:vh(i,10);break;case 3:vh(i,6);break;default:vh(i,2)}}function zx(i,n){let e=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(e*=2),e*n}function vh(i,n){if(i.l.info("Error code "+n),2==n){var e=null;i.h&&(e=null);var r=ho(i.pb,i);e||(e=new Rd("//www.google.com/images/cleardot.gif"),nn.location&&"http"==nn.location.protocol||Ug(e,"https"),Bg(e)),function aS(i,n){const e=new Sv;if(nn.Image){const r=new Image;r.onload=Tg(zg,e,r,"TestLoadImage: loaded",!0,n),r.onerror=Tg(zg,e,r,"TestLoadImage: error",!1,n),r.onabort=Tg(zg,e,r,"TestLoadImage: abort",!1,n),r.ontimeout=Tg(zg,e,r,"TestLoadImage: timeout",!1,n),nn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=i}else n(!1)}(e.toString(),r)}else Ao(2);i.H=0,i.h&&i.h.za(n),_S(i),mS(i)}function _S(i){if(i.H=0,i.ma=[],i.h){const n=Om(i.i);(0!=n.length||0!=i.j.length)&&(uT(i.ma,n),uT(i.ma,i.j),i.i.i.length=0,yc(i.j),i.j.length=0),i.h.ya()}}function Hv(i,n,e){var r=e instanceof Rd?bc(e):new Rd(e);if(""!=r.g)n&&(r.g=n+"."+r.g),Rm(r,r.m);else{var o=nn.location;r=o.protocol,n=n?n+"."+o.hostname:o.hostname,o=+o.port;var s=new Rd(null);r&&Ug(s,r),n&&(s.g=n),o&&Rm(s,o),e&&(s.l=e),r=s}return n=i.Da,(e=i.F)&&n&&_i(r,e,n),_i(r,"VER",i.ra),Kg(i,r),r}function zv(i,n,e){if(n&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new er(e&&i.Ha&&!i.va?new Nm({ob:!0}):i.va)).Oa(i.J),n}function jx(){}function Bm(){if(Lt&&!(10<=Number(mR)))throw Error("Environmental error: no available transport.")}function Wo(i,n){Xr.call(this),this.g=new fS(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.Ca&&(i?i["X-WebChannel-Client-Profile"]=n.Ca:i={"X-WebChannel-Client-Profile":n.Ca}),this.g.U=i,(i=n&&n.cc)&&!gv(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!gv(n)&&(this.g.F=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new Vm(this)}function yS(i){kv.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var n=i.__sm__;if(n){e:{for(const e in n){i=e;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function vS(){Rv.call(this),this.status=1}function Vm(i){this.g=i}function ea(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Zg(i,n,e){e||(e=0);var r=Array(16);if("string"==typeof n)for(var o=0;16>o;++o)r[o]=n.charCodeAt(e++)|n.charCodeAt(e++)<<8|n.charCodeAt(e++)<<16|n.charCodeAt(e++)<<24;else for(o=0;16>o;++o)r[o]=n[e++]|n[e++]<<8|n[e++]<<16|n[e++]<<24;var s=i.g[3],c=(n=i.g[0])+(s^(e=i.g[1])&((o=i.g[2])^s))+r[0]+3614090360&4294967295;c=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=e+(c<<7&4294967295|c>>>25))+((c=s+(o^n&(e^o))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=o+(e^s&(n^e))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=e+(n^o&(s^n))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=n+(s^e&(o^s))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=s+(o^n&(e^o))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=o+(e^s&(n^e))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=e+(n^o&(s^n))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=n+(s^e&(o^s))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=s+(o^n&(e^o))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=o+(e^s&(n^e))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=e+(n^o&(s^n))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=n+(s^e&(o^s))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=s+(o^n&(e^o))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=o+(e^s&(n^e))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=e+(n^o&(s^n))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=n+(o^s&(e^o))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^o&(n^e))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=o+(n^e&(s^n))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^n&(o^s))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=n+(o^s&(e^o))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^o&(n^e))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=o+(n^e&(s^n))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^n&(o^s))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=n+(o^s&(e^o))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^o&(n^e))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=o+(n^e&(s^n))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^n&(o^s))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=n+(o^s&(e^o))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^o&(n^e))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=o+(n^e&(s^n))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^n&(o^s))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=n+(e^o^s)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=s+(n^e^o)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=o+(s^n^e)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=e+(o^s^n)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=n+(e^o^s)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=s+(n^e^o)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=o+(s^n^e)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=e+(o^s^n)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=n+(e^o^s)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=s+(n^e^o)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=o+(s^n^e)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=e+(o^s^n)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=n+(e^o^s)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=s+(n^e^o)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=o+(s^n^e)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=e+(o^s^n)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=n+(o^(e|~s))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(n|~o))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=o+(n^(s|~e))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(o|~n))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=n+(o^(e|~s))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(n|~o))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=o+(n^(s|~e))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(o|~n))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=n+(o^(e|~s))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(n|~o))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=o+(n^(s|~e))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(o|~n))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((s=(n=e+((c=n+(o^(e|~s))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(n|~o))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((o=s+((c=o+(n^(s|~e))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~n))+r[9]+3951481745&4294967295,i.g[0]=i.g[0]+n&4294967295,i.g[1]=i.g[1]+(o+(c<<21&4294967295|c>>>11))&4294967295,i.g[2]=i.g[2]+o&4294967295,i.g[3]=i.g[3]+s&4294967295}function zn(i,n){this.h=n;for(var e=[],r=!0,o=i.length-1;0<=o;o--){var s=0|i[o];r&&s==n||(e[o]=s,r=!1)}this.g=e}(gt=er.prototype).Oa=function(i){this.M=i},gt.ha=function(i,n,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);n=n?n.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Tx.g(),this.C=function BT(i){return i.h||(i.h=i.i())}(this.u?this.u:Tx),this.g.onreadystatechange=ho(this.La,this);try{this.G=!0,this.g.open(n,String(i),!0),this.G=!1}catch(s){return void cS(this,s)}if(i=e||"",e=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)e.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())e.set(s,r.get(s))}r=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),o=nn.FormData&&i instanceof nn.FormData,!(0<=pv(Fx,n))||r||o||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dS(this),0<this.B&&((this.L=function bl(i){return Lt&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ho(this.ua,this)):this.A=Ex(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(s){cS(this,s)}},gt.ua=function(){typeof hx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,So(this,"timeout"),this.abort(8))},gt.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,So(this,"complete"),So(this,"abort"),Lv(this))},gt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lv(this,!0)),er.$.N.call(this)},gt.La=function(){this.s||(this.G||this.v||this.l?Um(this):this.kb())},gt.kb=function(){Um(this)},gt.isActive=function(){return!!this.g},gt.da=function(){try{return 2<wl(this)?this.g.status:-1}catch{return-1}},gt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},gt.Wa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),DR(n)}},gt.Ia=function(){return this.m},gt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=fS.prototype).ra=8,gt.H=1,gt.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const o=new Mm(this,this.l,i);let s=this.s;if(this.U&&(s?(s=vT(s),wT(s,this.U)):s=this.U),null!==this.o||this.O||(o.I=s,s=null),this.P)e:{for(var n=0,e=0;e<this.j.length;e++){var r=this.j[e];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(n+=r)){n=e;break e}if(4096===n||e===this.j.length-1){n=e+1;break e}}n=1e3}else n=1e3;n=gS(this,o,n),_i(e=bc(this.I),"RID",i),_i(e,"CVER",22),this.F&&_i(e,"X-HTTP-Session-Id",this.F),Kg(this,e),s&&(this.O?n="headers="+encodeURIComponent(String(hS(s)))+"&"+n:this.o&&Lx(e,this.o,s)),Ox(this.i,o),this.bb&&_i(e,"TYPE","init"),this.P?(_i(e,"$req",n),_i(e,"SID","null"),o.aa=!0,Fg(o,e,null)):Fg(o,e,n),this.H=2}}else 3==this.H&&(i?qg(this,i):0==this.j.length||tS(this.i)||qg(this))},gt.Ma=function(){if(this.u=null,Vx(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Og(ho(this.jb,this),i)}},gt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ao(10),Wg(this),Vx(this))},gt.ib=function(){null!=this.v&&(this.v=null,Wg(this),Bv(this),Ao(19))},gt.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Ao(2)):(this.l.info("Failed to ping google.com"),Ao(1))},gt.isActive=function(){return!!this.h&&this.h.isActive(this)},(gt=jx.prototype).Ba=function(){},gt.Aa=function(){},gt.za=function(){},gt.ya=function(){},gt.isActive=function(){return!0},gt.Va=function(){},Bm.prototype.g=function(i,n){return new Wo(i,n)},Lr(Wo,Xr),Wo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,n=this.l,e=this.h||void 0;Ao(0),i.Y=n,i.na=e||{},i.G=i.aa,i.I=Hv(i,null,i.Y),Uv(i)},Wo.prototype.close=function(){Ux(this.g)},Wo.prototype.u=function(i){var n=this.g;if("string"==typeof i){var e={};e.__data__=i,i=e}else this.v&&((e={}).__data__=DT(i),i=e);n.j.push(new class{constructor(i,n){this.g=i,this.map=n}}(n.fb++,i)),3==n.H&&Uv(n)},Wo.prototype.N=function(){this.g.h=null,delete this.j,Ux(this.g),delete this.g,Wo.$.N.call(this)},Lr(yS,kv),Lr(vS,Rv),Lr(Vm,jx),Vm.prototype.Ba=function(){So(this.g,"a")},Vm.prototype.Aa=function(i){So(this.g,new yS(i))},Vm.prototype.za=function(i){So(this.g,new vS)},Vm.prototype.ya=function(){So(this.g,"b")},Lr(ea,function TR(){this.blockSize=-1}),ea.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ea.prototype.j=function(i,n){void 0===n&&(n=i.length);for(var e=n-this.blockSize,r=this.m,o=this.h,s=0;s<n;){if(0==o)for(;s<=e;)Zg(this,i,s),s+=this.blockSize;if("string"==typeof i){for(;s<n;)if(r[o++]=i.charCodeAt(s++),o==this.blockSize){Zg(this,r),o=0;break}}else for(;s<n;)if(r[o++]=i[s++],o==this.blockSize){Zg(this,r),o=0;break}}this.h=o,this.i+=n},ea.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var n=1;n<i.length-8;++n)i[n]=0;var e=8*this.i;for(n=i.length-8;n<i.length;++n)i[n]=255&e,e/=256;for(this.j(i),i=Array(16),n=e=0;4>n;++n)for(var r=0;32>r;r+=8)i[e++]=this.g[n]>>>r&255;return i};var bS={};function jv(i){return-128<=i&&128>i?function hT(i,n){var e=bS;return Object.prototype.hasOwnProperty.call(e,i)?e[i]:e[i]=n(i)}(i,function(n){return new zn([0|n],0>n?-1:0)}):new zn([0|i],0>i?-1:0)}function Oa(i){if(isNaN(i)||!isFinite(i))return bh;if(0>i)return tr(Oa(-i));for(var n=[],e=1,r=0;i>=e;r++)n[r]=i/e|0,e*=$v;return new zn(n,0)}var $v=4294967296,bh=jv(0),$x=jv(1),Gx=jv(16777216);function xl(i){if(0!=i.h)return!1;for(var n=0;n<i.g.length;n++)if(0!=i.g[n])return!1;return!0}function yi(i){return-1==i.h}function tr(i){for(var n=i.g.length,e=[],r=0;r<n;r++)e[r]=~i.g[r];return new zn(e,~i.h).add($x)}function Gv(i,n){return i.add(tr(n))}function Wv(i,n){for(;(65535&i[n])!=i[n];)i[n+1]+=i[n]>>>16,i[n]&=65535,n++}function qv(i,n){this.g=i,this.h=n}function Wx(i,n){if(xl(n))throw Error("division by zero");if(xl(i))return new qv(bh,bh);if(yi(i))return n=Wx(tr(i),n),new qv(tr(n.g),tr(n.h));if(yi(n))return n=Wx(i,tr(n)),new qv(tr(n.g),n.h);if(30<i.g.length){if(yi(i)||yi(n))throw Error("slowDivide_ only works with positive integers.");for(var e=$x,r=n;0>=r.X(i);)e=qx(e),r=qx(r);var o=Od(e,1),s=Od(r,1);for(r=Od(r,2),e=Od(e,2);!xl(r);){var c=s.add(r);0>=c.X(i)&&(o=o.add(e),s=c),r=Od(r,1),e=Od(e,1)}return n=Gv(i,o.R(n)),new qv(o,n)}for(o=bh;0<=i.X(n);){for(e=Math.max(1,Math.floor(i.ea()/n.ea())),r=48>=(r=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,r-48),c=(s=Oa(e)).R(n);yi(c)||0<c.X(i);)c=(s=Oa(e-=r)).R(n);xl(s)&&(s=$x),o=o.add(s),i=Gv(i,c)}return new qv(o,i)}function qx(i){for(var n=i.g.length+1,e=[],r=0;r<n;r++)e[r]=i.D(r)<<1|i.D(r-1)>>>31;return new zn(e,i.h)}function Od(i,n){var e=n>>5;n%=32;for(var r=i.g.length-e,o=[],s=0;s<r;s++)o[s]=0<n?i.D(s+e)>>>n|i.D(s+e+1)<<32-n:i.D(s+e);return new zn(o,i.h)}(gt=zn.prototype).ea=function(){if(yi(this))return-tr(this).ea();for(var i=0,n=1,e=0;e<this.g.length;e++){var r=this.D(e);i+=(0<=r?r:$v+r)*n,n*=$v}return i},gt.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(xl(this))return"0";if(yi(this))return"-"+tr(this).toString(i);for(var n=Oa(Math.pow(i,6)),e=this,r="";;){var o=Wx(e,n).g,s=((0<(e=Gv(e,o.R(n))).g.length?e.g[0]:e.h)>>>0).toString(i);if(xl(e=o))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},gt.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},gt.X=function(i){return yi(i=Gv(this,i))?-1:xl(i)?0:1},gt.abs=function(){return yi(this)?tr(this):this},gt.add=function(i){for(var n=Math.max(this.g.length,i.g.length),e=[],r=0,o=0;o<=n;o++){var s=r+(65535&this.D(o))+(65535&i.D(o)),c=(s>>>16)+(this.D(o)>>>16)+(i.D(o)>>>16);r=c>>>16,e[o]=(c&=65535)<<16|(s&=65535)}return new zn(e,-2147483648&e[e.length-1]?-1:0)},gt.R=function(i){if(xl(this)||xl(i))return bh;if(yi(this))return yi(i)?tr(this).R(tr(i)):tr(tr(this).R(i));if(yi(i))return tr(this.R(tr(i)));if(0>this.X(Gx)&&0>i.X(Gx))return Oa(this.ea()*i.ea());for(var n=this.g.length+i.g.length,e=[],r=0;r<2*n;r++)e[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<i.g.length;o++){var s=this.D(r)>>>16,c=65535&this.D(r),h=i.D(o)>>>16,p=65535&i.D(o);e[2*r+2*o]+=c*p,Wv(e,2*r+2*o),e[2*r+2*o+1]+=s*p,Wv(e,2*r+2*o+1),e[2*r+2*o+1]+=c*h,Wv(e,2*r+2*o+1),e[2*r+2*o+2]+=s*h,Wv(e,2*r+2*o+2)}for(r=0;r<n;r++)e[r]=e[2*r+1]<<16|e[2*r];for(r=n;r<2*n;r++)e[r]=0;return new zn(e,0)},gt.gb=function(i){return Wx(this,i).h},gt.and=function(i){for(var n=Math.max(this.g.length,i.g.length),e=[],r=0;r<n;r++)e[r]=this.D(r)&i.D(r);return new zn(e,this.h&i.h)},gt.or=function(i){for(var n=Math.max(this.g.length,i.g.length),e=[],r=0;r<n;r++)e[r]=this.D(r)|i.D(r);return new zn(e,this.h|i.h)},gt.xor=function(i){for(var n=Math.max(this.g.length,i.g.length),e=[],r=0;r<n;r++)e[r]=this.D(r)^i.D(r);return new zn(e,this.h^i.h)},Bm.prototype.createWebChannel=Bm.prototype.g,Wo.prototype.send=Wo.prototype.u,Wo.prototype.open=Wo.prototype.m,Wo.prototype.close=Wo.prototype.close,Mv.NO_ERROR=0,Mv.TIMEOUT=8,Mv.HTTP_ERROR=6,UT.COMPLETE="complete",VT.EventType=Ng,Ng.OPEN="a",Ng.CLOSE="b",Ng.ERROR="c",Ng.MESSAGE="d",Xr.prototype.listen=Xr.prototype.O,er.prototype.listenOnce=er.prototype.P,er.prototype.getLastError=er.prototype.Sa,er.prototype.getLastErrorCode=er.prototype.Ia,er.prototype.getStatus=er.prototype.da,er.prototype.getResponseJson=er.prototype.Wa,er.prototype.getResponseText=er.prototype.ja,er.prototype.send=er.prototype.ha,er.prototype.setWithCredentials=er.prototype.Oa,ea.prototype.digest=ea.prototype.l,ea.prototype.reset=ea.prototype.reset,ea.prototype.update=ea.prototype.j,zn.prototype.add=zn.prototype.add,zn.prototype.multiply=zn.prototype.R,zn.prototype.modulo=zn.prototype.gb,zn.prototype.compare=zn.prototype.X,zn.prototype.toNumber=zn.prototype.ea,zn.prototype.toString=zn.prototype.toString,zn.prototype.getBits=zn.prototype.D,zn.fromNumber=Oa,zn.fromString=function wS(i,n){if(0==i.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==i.charAt(0))return tr(wS(i.substring(1),n));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=Oa(Math.pow(n,8)),r=bh,o=0;o<i.length;o+=8){var s=Math.min(8,i.length-o),c=parseInt(i.substring(o,o+s),n);8>s?(s=Oa(Math.pow(n,s)),r=r.R(s).add(Oa(c))):r=(r=r.R(e)).add(Oa(c))}return r};var Qg=Pa.createWebChannelTransport=function(){return new Bm},SR=Pa.getStatEventTarget=function(){return Av()},Xg=Pa.ErrorCode=Mv,AR=Pa.EventType=UT,xS=Pa.Event=Md,ES=Pa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},MR=Pa.FetchXmlHttpFactory=Nm,Kv=Pa.WebChannel=VT,Kx=Pa.XhrIo=er,CS=Pa.Md5=ea,Hm=Pa.Integer=zn;const Jg="@firebase/firestore";class Ir{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let e_="9.23.0";const wc=new Kr.Yd("@firebase/firestore");function Yx(){return wc.logLevel}function je(i,...n){if(wc.logLevel<=Kr.in.DEBUG){const e=n.map(t_);wc.debug(`Firestore (${e_}): ${i}`,...e)}}function fr(i,...n){if(wc.logLevel<=Kr.in.ERROR){const e=n.map(t_);wc.error(`Firestore (${e_}): ${i}`,...e)}}function Ts(i,...n){if(wc.logLevel<=Kr.in.WARN){const e=n.map(t_);wc.warn(`Firestore (${e_}): ${i}`,...e)}}function t_(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function vt(i="Unexpected state"){const n=`FIRESTORE (${e_}) INTERNAL ASSERTION FAILED: `+i;throw fr(n),new Error(n)}function Pt(i,n){i||vt()}function ht(i,n){return i}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends V.ZR{constructor(n,e){super(n,e),this.code=n,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((n,e)=>{this.resolve=n,this.reject=e})}}class Zx{constructor(n,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${n}`)}}class kR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,e){n.enqueueRetryable(()=>e(Ir.UNAUTHENTICATED))}shutdown(){}}class IS{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,e){this.changeListener=e,n.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class TS{constructor(n){this.t=n,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,e){var r=this;let o=this.i;const s=y=>this.i!==o?(o=this.i,e(y)):Promise.resolve();let c=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Tr,n.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=c;n.enqueueRetryable((0,xe.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Tr)}},0),h()}getToken(){const n=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==n?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new Zx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return Pt(null===n||"string"==typeof n),new Ir(n)}}class RR{constructor(n,e,r){this.h=n,this.l=e,this.m=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const n=this.p();return n&&this.g.set("Authorization",n),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class PR{constructor(n,e,r){this.h=n,this.l=e,this.m=r}getToken(){return Promise.resolve(new RR(this.h,this.l,this.m))}start(n,e){n.enqueueRetryable(()=>e(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qx{constructor(n){this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OR{constructor(n){this.I=n,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(n,e){const r=s=>{null!=s.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.T;return this.T=s.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{n.enqueueRetryable(()=>r(s))};const o=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>o(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?o(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const n=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(n).then(e=>e?(Pt("string"==typeof e.token),this.T=e.token,new Qx(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function SS(i){const n=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(e);else for(let r=0;r<i;r++)e[r]=Math.floor(256*Math.random());return e}class Xx{static A(){const e=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=SS(40);for(let s=0;s<o.length;++s)r.length<20&&o[s]<e&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[s]%62))}return r}}function Xt(i,n){return i<n?-1:i>n?1:0}function zm(i,n,e){return i.length===n.length&&i.every((r,o)=>e(r,n[o]))}function AS(i){return i+"\0"}class zi{constructor(n,e){if(this.seconds=n,this.nanoseconds=e,e<0)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(n<-62135596800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return zi.fromMillis(Date.now())}static fromDate(n){return zi.fromMillis(n.getTime())}static fromMillis(n){const e=Math.floor(n/1e3),r=Math.floor(1e6*(n-1e3*e));return new zi(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Xt(this.nanoseconds,n.nanoseconds):Xt(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(n){this.timestamp=n}static fromTimestamp(n){return new Ot(n)}static min(){return new Ot(new zi(0,0))}static max(){return new Ot(new zi(253402300799,999999999))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yv{constructor(n,e,r){void 0===e?e=0:e>n.length&&vt(),void 0===r?r=n.length-e:r>n.length-e&&vt(),this.segments=n,this.offset=e,this.len=r}get length(){return this.len}isEqual(n){return 0===Yv.comparator(this,n)}child(n){const e=this.segments.slice(this.offset,this.limit());return n instanceof Yv?n.forEach(r=>{e.push(r)}):e.push(n),this.construct(e)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==n.get(e))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==n.get(e))return!1;return!0}forEach(n){for(let e=this.offset,r=this.limit();e<r;e++)n(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,e){const r=Math.min(n.length,e.length);for(let o=0;o<r;o++){const s=n.get(o),c=e.get(o);if(s<c)return-1;if(s>c)return 1}return n.length<e.length?-1:n.length>e.length?1:0}}class kn extends Yv{construct(n,e,r){return new kn(n,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const e=[];for(const r of n){if(r.indexOf("//")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(o=>o.length>0))}return new kn(e)}static emptyPath(){return new kn([])}}const t2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mr extends Yv{construct(n,e,r){return new mr(n,e,r)}static isValidIdentifier(n){return t2.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mr.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mr(["__name__"])}static fromServerFormat(n){const e=[];let r="",o=0;const s=()=>{if(0===r.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<n.length;){const h=n[o];if("\\"===h){if(o+1===n.length)throw new Be(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const p=n[o+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Be(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);r+=p,o+=2}else"`"===h?(c=!c,o++):"."!==h||c?(r+=h,o++):(s(),o++)}if(s(),c)throw new Be(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new mr(e)}static emptyPath(){return new mr([])}}class dt{constructor(n){this.path=n}static fromPath(n){return new dt(kn.fromString(n))}static fromName(n){return new dt(kn.fromString(n).popFirst(5))}static empty(){return new dt(kn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(n){return null!==n&&0===kn.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,e){return kn.comparator(n.path,e.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new dt(new kn(n.slice()))}}class Jx{constructor(n,e,r,o){this.indexId=n,this.collectionGroup=e,this.fields=r,this.indexState=o}}function MS(i){return i.fields.find(n=>2===n.kind)}function jm(i){return i.fields.filter(n=>2!==n.kind)}Jx.UNKNOWN_ID=-1;class n_{constructor(n,e){this.fieldPath=n,this.kind=e}}class $m{constructor(n,e){this.sequenceNumber=n,this.offset=e}static empty(){return new $m(0,Ss.min())}}function kS(i,n){const e=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ot.fromTimestamp(1e9===r?new zi(e+1,0):new zi(e,r));return new Ss(o,dt.empty(),n)}function i_(i){return new Ss(i.readTime,i.key,-1)}class Ss{constructor(n,e,r){this.readTime=n,this.documentKey=e,this.largestBatchId=r}static min(){return new Ss(Ot.min(),dt.empty(),-1)}static max(){return new Ss(Ot.max(),dt.empty(),-1)}}function RS(i,n){let e=i.readTime.compareTo(n.readTime);return 0!==e?e:(e=dt.comparator(i.documentKey,n.documentKey),0!==e?e:Xt(i.largestBatchId,n.largestBatchId))}const FR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}function xc(i){return tE.apply(this,arguments)}function tE(){return tE=(0,xe.Z)(function*(i){if(i.code!==ge.FAILED_PRECONDITION||i.message!==FR)throw i;je("LocalStore","Unexpectedly lost primary lease")}),tE.apply(this,arguments)}class he{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(n){return this.next(void 0,n)}next(n,e){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(n,this.result):new he((r,o)=>{this.nextCallback=s=>{this.wrapSuccess(n,s).next(r,o)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,o)}})}toPromise(){return new Promise((n,e)=>{this.next(n,e)})}wrapUserFunction(n){try{const e=n();return e instanceof he?e:he.resolve(e)}catch(e){return he.reject(e)}}wrapSuccess(n,e){return n?this.wrapUserFunction(()=>n(e)):he.resolve(e)}wrapFailure(n,e){return n?this.wrapUserFunction(()=>n(e)):he.reject(e)}static resolve(n){return new he((e,r)=>{e(n)})}static reject(n){return new he((e,r)=>{r(n)})}static waitFor(n){return new he((e,r)=>{let o=0,s=0,c=!1;n.forEach(h=>{++o,h.next(()=>{++s,c&&s===o&&e()},p=>r(p))}),c=!0,s===o&&e()})}static or(n){let e=he.resolve(!1);for(const r of n)e=e.next(o=>o?he.resolve(o):r());return e}static forEach(n,e){const r=[];return n.forEach((o,s)=>{r.push(e.call(this,o,s))}),this.waitFor(r)}static mapArray(n,e){return new he((r,o)=>{const s=n.length,c=new Array(s);let h=0;for(let p=0;p<s;p++){const y=p;e(n[y]).next(w=>{c[y]=w,++h,h===s&&r(c)},w=>o(w))}})}static doWhile(n,e){return new he((r,o)=>{const s=()=>{!0===n()?e().next(()=>{s()},o):r()};s()})}}class Zv{constructor(n,e){this.action=n,this.transaction=e,this.aborted=!1,this.v=new Tr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new Gm(n,e.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=r_(r.target.error);this.v.reject(new Gm(n,o))}}static open(n,e,r,o){try{return new Zv(e,n.transaction(o,r))}catch(s){throw new Gm(e,s)}}get R(){return this.v.promise}abort(n){n&&this.v.reject(n),this.aborted||(je("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const n=this.transaction;this.aborted||"function"!=typeof n.commit||n.commit()}store(n){const e=this.transaction.objectStore(n);return new r2(e)}}class El{constructor(n,e,r){this.name=n,this.version=e,this.V=r,12.2===El.S((0,V.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return je("SimpleDb","Removing database:",n),fo(window.indexedDB.deleteDatabase(n)).toPromise()}static D(){if(!(0,V.hl)())return!1;if(El.C())return!0;const n=(0,V.z$)(),e=El.S(n),r=0<e&&e<10,o=El.N(n),s=0<o&&o<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||r||s)}static C(){var n;return typeof process<"u"&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.k)}static M(n,e){return n.store(e)}static S(n){const e=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(n){const e=n.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(n){var e=this;return(0,xe.Z)(function*(){return e.db||(je("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,o)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{o(new Gm(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;o("VersionError"===h.name?new Be(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Be(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Gm(n,h))},s.onupgradeneeded=c=>{je("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.V.O(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{je("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=r=>e.F(r)),e.db})()}B(n){this.F=n,this.db&&(this.db.onversionchange=e=>n(e))}runTransaction(n,e,r,o){var s=this;return(0,xe.Z)(function*(){const c="readonly"===e;let h=0;for(;;){++h;try{s.db=yield s.$(n);const p=Zv.open(s.db,n,c?"readonly":"readwrite",r),y=o(p).next(w=>(p.P(),w)).catch(w=>(p.abort(w),he.reject(w))).toPromise();return y.catch(()=>{}),yield p.R,y}catch(p){const y=p,w="FirebaseError"!==y.name&&h<3;if(je("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),s.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class UR{constructor(n){this.L=n,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(n){this.L=n}done(){this.q=!0}G(n){this.U=n}delete(){return fo(this.L.delete())}}class Gm extends Be{constructor(n,e){super(ge.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Ec(i){return"IndexedDbTransactionError"===i.name}class r2{constructor(n){this.store=n}put(n,e){let r;return void 0!==e?(je("SimpleDb","PUT",this.store.name,n,e),r=this.store.put(e,n)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",n),r=this.store.put(n)),fo(r)}add(n){return je("SimpleDb","ADD",this.store.name,n,n),fo(this.store.add(n))}get(n){return fo(this.store.get(n)).next(e=>(void 0===e&&(e=null),je("SimpleDb","GET",this.store.name,n,e),e))}delete(n){return je("SimpleDb","DELETE",this.store.name,n),fo(this.store.delete(n))}count(){return je("SimpleDb","COUNT",this.store.name),fo(this.store.count())}j(n,e){const r=this.options(n,e);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),s=[];return this.W(o,(c,h)=>{s.push(h)}).next(()=>s)}{const o=this.store.getAll(r.range);return new he((s,c)=>{o.onerror=h=>{c(h.target.error)},o.onsuccess=h=>{s(h.target.result)}})}}H(n,e){const r=this.store.getAll(n,null===e?void 0:e);return new he((o,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}J(n,e){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(n,e);r.Y=!1;const o=this.cursor(r);return this.W(o,(s,c,h)=>h.delete())}X(n,e){let r;e?r=n:(r={},e=n);const o=this.cursor(r);return this.W(o,e)}Z(n){const e=this.cursor({});return new he((r,o)=>{e.onerror=s=>{const c=r_(s.target.error);o(c)},e.onsuccess=s=>{const c=s.target.result;c?n(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}W(n,e){const r=[];return new he((o,s)=>{n.onerror=c=>{s(c.target.error)},n.onsuccess=c=>{const h=c.target.result;if(!h)return void o();const p=new UR(h),y=e(h.primaryKey,h.value,p);if(y instanceof he){const w=y.catch(I=>(p.done(),he.reject(I)));r.push(w)}p.isDone?o():null===p.K?h.continue():h.continue(p.K)}}).next(()=>he.waitFor(r))}options(n,e){let r;return void 0!==n&&("string"==typeof n?r=n:e=n),{index:r,range:e}}cursor(n){let e="next";if(n.reverse&&(e="prev"),n.index){const r=this.store.index(n.index);return n.Y?r.openKeyCursor(n.range,e):r.openCursor(n.range,e)}return this.store.openCursor(n.range,e)}}function fo(i){return new he((n,e)=>{i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{const o=r_(r.target.error);e(o)}})}let PS=!1;function r_(i){const n=El.S((0,V.z$)());if(n>=12.2&&n<13){const e="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(e)>=0){const r=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PS||(PS=!0,setTimeout(()=>{throw r},0)),r}}return i}class OS{constructor(n,e){this.asyncQueue=n,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(n){var e=this;je("IndexBackiller",`Scheduled in ${n}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",n,(0,xe.Z)(function*(){e.task=null;try{je("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(r){Ec(r)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield xc(r)}yield e.et(6e4)}))}}class BR{constructor(n,e){this.localStore=n,this.persistence=e}nt(n=50){var e=this;return(0,xe.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>e.st(r,n))})()}st(n,e){const r=new Set;let o=e,s=!0;return he.doWhile(()=>!0===s&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(n).next(c=>{if(null!==c&&!r.has(c))return je("IndexBackiller",`Processing collection: ${c}`),this.it(n,c,o).next(h=>{o-=h,r.add(c)});s=!1})).next(()=>e-o)}it(n,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(n,e).next(o=>this.localStore.localDocuments.getNextDocuments(n,e,o,r).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(n,c).next(()=>this.rt(o,s)).next(h=>(je("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(n,e,h))).next(()=>c.size)}))}rt(n,e){let r=n;return e.changes.forEach((o,s)=>{const c=i_(s);RS(c,r)>0&&(r=c)}),new Ss(r.readTime,r.documentKey,Math.max(e.batchId,n.largestBatchId))}}let ta=(()=>{class i{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return i.ct=-1,i})();function Ur(i){return null==i}function o_(i){return 0===i&&1/i==-1/0}function Qv(i){return"number"==typeof i&&Number.isInteger(i)&&!o_(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Mo(i){let n="";for(let e=0;e<i.length;e++)n.length>0&&(n=Xv(n)),n=VR(i.get(e),n);return Xv(n)}function VR(i,n){let e=n;const r=i.length;for(let o=0;o<r;o++){const s=i.charAt(o);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function Xv(i){return i+"\x01\x01"}function Na(i){const n=i.length;if(Pt(n>=2),2===n)return Pt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),kn.emptyPath();const e=n-2,r=[];let o="";for(let s=0;s<n;){const c=i.indexOf("\x01",s);switch((c<0||c>e)&&vt(),i.charAt(c+1)){case"\x01":const h=i.substring(s,c);let p;0===o.length?p=h:(o+=h,p=o,o=""),r.push(p);break;case"\x10":o+=i.substring(s,c),o+="\0";break;case"\x11":o+=i.substring(s,c+1);break;default:vt()}s=c+2}return new kn(r)}const nE=["userId","batchId"];function Jv(i,n){return[i,Mo(n)]}function iE(i,n,e){return[i,Mo(n),e]}const NS={},FS=["prefixPath","collectionGroup","readTime","documentId"],LS=["prefixPath","collectionGroup","documentId"],HR=["collectionGroup","readTime","prefixPath","documentId"],US=["canonicalId","targetId"],zR=["targetId","path"],rE=["path","targetId"],Nd=["collectionId","parent"],BS=["indexId","uid"],oE=["uid","sequenceNumber"],sE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jR=["indexId","uid","orderedDocumentKey"],o2=["userId","collectionPath","documentId"],VS=["userId","collectionPath","largestBatchId"],$R=["userId","collectionGroup","largestBatchId"],HS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],GR=[...HS,"documentOverlays"],zS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aE=zS,s2=[...aE,"indexConfiguration","indexState","indexEntries"];class eb extends LR{constructor(n,e){super(),this.ht=n,this.currentSequenceNumber=e}}function Jr(i,n){const e=ht(i);return El.M(e.ht,n)}function lE(i){let n=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&n++;return n}function wh(i,n){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&n(e,i[e])}function tb(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class oi{constructor(n,e){this.comparator=n,this.root=e||mo.EMPTY}insert(n,e){return new oi(this.comparator,this.root.insert(n,e,this.comparator).copy(null,null,mo.BLACK,null,null))}remove(n){return new oi(this.comparator,this.root.remove(n,this.comparator).copy(null,null,mo.BLACK,null,null))}get(n){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(n,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(n){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(n,r.key);if(0===o)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((e,r)=>(n(e,r),!1))}toString(){const n=[];return this.inorderTraversal((e,r)=>(n.push(`${e}:${r}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new s_(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new s_(this.root,n,this.comparator,!1)}getReverseIterator(){return new s_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new s_(this.root,n,this.comparator,!0)}}class s_{constructor(n,e,r,o){this.isReverse=o,this.nodeStack=[];let s=1;for(;!n.isEmpty();)if(s=e?r(n.key,e):1,e&&o&&(s*=-1),s<0)n=this.isReverse?n.left:n.right;else{if(0===s){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const e={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class mo{constructor(n,e,r,o,s){this.key=n,this.value=e,this.color=r??mo.RED,this.left=o??mo.EMPTY,this.right=s??mo.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,e,r,o,s){return new mo(n??this.key,e??this.value,r??this.color,o??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,e,r){let o=this;const s=r(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,e,r),null):0===s?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(n,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return mo.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,e){let r,o=this;if(e(n,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(n,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===e(n,o.key)){if(o.right.isEmpty())return mo.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(n,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,mo.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,mo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,e)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const n=this.left.check();if(n!==this.right.check())throw vt();return n+(this.isRed()?0:1)}}mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1,mo.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(i,n,e,r,o){return this}insert(i,n,e){return new mo(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vi{constructor(n){this.comparator=n,this.data=new oi(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((e,r)=>(n(e),!1))}forEachInRange(n,e){const r=this.data.getIteratorFrom(n[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,n[1])>=0)return;e(o.key)}}forEachWhile(n,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!n(r.getNext().key))return}firstAfterOrEqual(n){const e=this.data.getIteratorFrom(n);return e.hasNext()?e.getNext().key:null}getIterator(){return new cE(this.data.getIterator())}getIteratorFrom(n){return new cE(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let e=this;return e.size<n.size&&(e=n,n=this),n.forEach(r=>{e=e.add(r)}),e}isEqual(n){if(!(n instanceof vi)||this.size!==n.size)return!1;const e=this.data.getIterator(),r=n.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,s=r.getNext().key;if(0!==this.comparator(o,s))return!1}return!0}toArray(){const n=[];return this.forEach(e=>{n.push(e)}),n}toString(){const n=[];return this.forEach(e=>n.push(e)),"SortedSet("+n.toString()+")"}copy(n){const e=new vi(this.comparator);return e.data=n,e}}class cE{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fa(i){return i.hasNext()?i.getNext():void 0}class po{constructor(n){this.fields=n,n.sort(mr.comparator)}static empty(){return new po([])}unionWith(n){let e=new vi(mr.comparator);for(const r of this.fields)e=e.add(r);for(const r of n)e=e.add(r);return new po(e.toArray())}covers(n){for(const e of this.fields)if(e.isPrefixOf(n))return!0;return!1}isEqual(n){return zm(this.fields,n.fields,(e,r)=>e.isEqual(r))}}class dE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Br{constructor(n){this.binaryString=n}static fromBase64String(n){const e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dE("Invalid base64 string: "+o):o}}(n);return new Br(e)}static fromUint8Array(n){const e=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(n);return new Br(e)}[Symbol.iterator](){let n=0;return{next:()=>n<this.binaryString.length?{value:this.binaryString.charCodeAt(n++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const e=new Uint8Array(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Xt(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const WR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xh(i){if(Pt(!!i),"string"==typeof i){let n=0;const e=WR.exec(i);if(Pt(!!e),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),n=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:n}}return{seconds:ji(i.seconds),nanos:ji(i.nanos)}}function ji(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Cc(i){return"string"==typeof i?Br.fromBase64String(i):Br.fromUint8Array(i)}function nb(i){var n,e;return"server_timestamp"===(null===(e=((null===(n=i?.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function uE(i){const n=i.mapValue.fields.__previous_value__;return nb(n)?uE(n):n}function ib(i){const n=xh(i.mapValue.fields.__local_write_time__.timestampValue);return new zi(n.seconds,n.nanos)}class a2{constructor(n,e,r,o,s,c,h,p,y){this.databaseId=n,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=y}}class Dc{constructor(n,e){this.projectId=n,this.database=e||"(default)"}static empty(){return new Dc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Dc&&n.projectId===this.projectId&&n.database===this.database}}const Fd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rb={nullValue:"NULL_VALUE"};function Ld(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?nb(i)?4:$S(i)?9007199254740991:10:vt()}function Ic(i,n){if(i===n)return!0;const e=Ld(i);if(e!==Ld(n))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return ib(i).isEqual(ib(n));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const s=xh(r.timestampValue),c=xh(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return o=n,Cc(i.bytesValue).isEqual(Cc(o.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(r,o){return ji(r.geoPointValue.latitude)===ji(o.geoPointValue.latitude)&&ji(r.geoPointValue.longitude)===ji(o.geoPointValue.longitude)}(i,n);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ji(r.integerValue)===ji(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const s=ji(r.doubleValue),c=ji(o.doubleValue);return s===c?o_(s)===o_(c):isNaN(s)&&isNaN(c)}return!1}(i,n);case 9:return zm(i.arrayValue.values||[],n.arrayValue.values||[],Ic);case 10:return function(r,o){const s=r.mapValue.fields||{},c=o.mapValue.fields||{};if(lE(s)!==lE(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!Ic(s[h],c[h])))return!1;return!0}(i,n);default:return vt()}var o}function ob(i,n){return void 0!==(i.values||[]).find(e=>Ic(e,n))}function Eh(i,n){if(i===n)return 0;const e=Ld(i),r=Ld(n);if(e!==r)return Xt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Xt(i.booleanValue,n.booleanValue);case 2:return function(o,s){const c=ji(o.integerValue||o.doubleValue),h=ji(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(i,n);case 3:return qR(i.timestampValue,n.timestampValue);case 4:return qR(ib(i),ib(n));case 5:return Xt(i.stringValue,n.stringValue);case 6:return function(o,s){const c=Cc(o),h=Cc(s);return c.compareTo(h)}(i.bytesValue,n.bytesValue);case 7:return function(o,s){const c=o.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Xt(c[p],h[p]);if(0!==y)return y}return Xt(c.length,h.length)}(i.referenceValue,n.referenceValue);case 8:return function(o,s){const c=Xt(ji(o.latitude),ji(s.latitude));return 0!==c?c:Xt(ji(o.longitude),ji(s.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(o,s){const c=o.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const y=Eh(c[p],h[p]);if(y)return y}return Xt(c.length,h.length)}(i.arrayValue,n.arrayValue);case 10:return function(o,s){if(o===Fd.mapValue&&s===Fd.mapValue)return 0;if(o===Fd.mapValue)return 1;if(s===Fd.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let w=0;w<h.length&&w<y.length;++w){const I=Xt(h[w],y[w]);if(0!==I)return I;const A=Eh(c[h[w]],p[y[w]]);if(0!==A)return A}return Xt(h.length,y.length)}(i.mapValue,n.mapValue);default:throw vt()}}function qR(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return Xt(i,n);const e=xh(i),r=xh(n),o=Xt(e.seconds,r.seconds);return 0!==o?o:Xt(e.nanos,r.nanos)}function a_(i){return hE(i)}function hE(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(r){const o=xh(r);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Cc(i.bytesValue).toBase64():"referenceValue"in i?dt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(r){let o="[",s=!0;for(const c of r.values||[])s?s=!1:o+=",",o+=hE(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(r){const o=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const h of o)c?c=!1:s+=",",s+=`${h}:${hE(r.fields[h])}`;return s+"}"}(i.mapValue):vt();var n}function Dh(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function fE(i){return!!i&&"integerValue"in i}function Wm(i){return!!i&&"arrayValue"in i}function Ud(i){return!!i&&"nullValue"in i}function mE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function qm(i){return!!i&&"mapValue"in i}function Ih(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return wh(i.mapValue.fields,(e,r)=>n.mapValue.fields[e]=Ih(r)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)n.arrayValue.values[e]=Ih(i.arrayValue.values[e]);return n}return Object.assign({},i)}function $S(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function pE(i){return"nullValue"in i?rb:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Dh(Dc.empty(),dt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:vt()}function gE(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Dh(Dc.empty(),dt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Fd:vt()}function l_(i,n){const e=Eh(i.value,n.value);return 0!==e?e:i.inclusive&&!n.inclusive?-1:!i.inclusive&&n.inclusive?1:0}function KR(i,n){const e=Eh(i.value,n.value);return 0!==e?e:i.inclusive&&!n.inclusive?1:!i.inclusive&&n.inclusive?-1:0}class ko{constructor(n){this.value=n}static empty(){return new ko({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let e=this.value;for(let r=0;r<n.length-1;++r)if(e=(e.mapValue.fields||{})[n.get(r)],!qm(e))return null;return e=(e.mapValue.fields||{})[n.lastSegment()],e||null}}set(n,e){this.getFieldsMap(n.popLast())[n.lastSegment()]=Ih(e)}setAll(n){let e=mr.emptyPath(),r={},o=[];n.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,r,o),r={},o=[],e=h.popLast()}c?r[h.lastSegment()]=Ih(c):o.push(h.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,o)}delete(n){const e=this.field(n.popLast());qm(e)&&e.mapValue.fields&&delete e.mapValue.fields[n.lastSegment()]}isEqual(n){return Ic(this.value,n.value)}getFieldsMap(n){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<n.length;++r){let o=e.mapValue.fields[n.get(r)];qm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[n.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(n,e,r){wh(e,(o,s)=>n[o]=s);for(const o of r)delete n[o]}clone(){return new ko(Ih(this.value))}}function YR(i){const n=[];return wh(i.fields,(e,r)=>{const o=new mr([e]);if(qm(r)){const s=YR(r.mapValue).fields;if(0===s.length)n.push(o);else for(const c of s)n.push(o.child(c))}else n.push(o)}),new po(n)}class bi{constructor(n,e,r,o,s,c,h){this.key=n,this.documentType=e,this.version=r,this.readTime=o,this.createTime=s,this.data=c,this.documentState=h}static newInvalidDocument(n){return new bi(n,0,Ot.min(),Ot.min(),Ot.min(),ko.empty(),0)}static newFoundDocument(n,e,r,o){return new bi(n,1,e,Ot.min(),r,o,0)}static newNoDocument(n,e){return new bi(n,2,e,Ot.min(),Ot.min(),ko.empty(),0)}static newUnknownDocument(n,e){return new bi(n,3,e,Ot.min(),Ot.min(),ko.empty(),2)}convertToFoundDocument(n,e){return!this.createTime.isEqual(Ot.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=n),this.version=n,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=ko.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=ko.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(n){return this.readTime=n,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof bi&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}mutableCopy(){return new bi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bd{constructor(n,e){this.position=n,this.inclusive=e}}function GS(i,n,e){let r=0;for(let o=0;o<i.position.length;o++){const s=n[o],c=i.position[o];if(r=s.field.isKeyField()?dt.comparator(dt.fromName(c.referenceValue),e.key):Eh(c,e.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function WS(i,n){if(null===i)return null===n;if(null===n||i.inclusive!==n.inclusive||i.position.length!==n.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!Ic(i.position[e],n.position[e]))return!1;return!0}class Km{constructor(n,e="asc"){this.field=n,this.dir=e}}function qS(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}class _E{}class xn extends _E{constructor(n,e,r){super(),this.field=n,this.op=e,this.value=r}static create(n,e,r){return n.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(n,e,r):new l2(n,e,r):"array-contains"===e?new XR(n,r):"in"===e?new QS(n,r):"not-in"===e?new XS(n,r):"array-contains-any"===e?new JS(n,r):new xn(n,e,r)}static createKeyFieldInFilter(n,e,r){return"in"===e?new c2(n,r):new QR(n,r)}matches(n){const e=n.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Eh(e,this.value)):null!==e&&Ld(this.value)===Ld(e)&&this.matchesComparison(Eh(e,this.value))}matchesComparison(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Wn extends _E{constructor(n,e){super(),this.filters=n,this.op=e,this.lt=null}static create(n,e){return new Wn(n,e)}matches(n){return Ym(this)?void 0===this.filters.find(e=>!e.matches(n)):void 0!==this.filters.find(e=>e.matches(n))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((n,e)=>n.concat(e.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const n=this.ft(e=>e.isInequality());return null!==n?n.field:null}ft(n){for(const e of this.getFlattenedFilters())if(n(e))return e;return null}}function Ym(i){return"and"===i.op}function sb(i){return"or"===i.op}function c_(i){return ZR(i)&&Ym(i)}function ZR(i){for(const n of i.filters)if(n instanceof Wn)return!1;return!0}function ab(i){if(i instanceof xn)return i.field.canonicalString()+i.op.toString()+a_(i.value);if(c_(i))return i.filters.map(n=>ab(n)).join(",");{const n=i.filters.map(e=>ab(e)).join(",");return`${i.op}(${n})`}}function lb(i,n){return i instanceof xn?(e=i,(r=n)instanceof xn&&e.op===r.op&&e.field.isEqual(r.field)&&Ic(e.value,r.value)):i instanceof Wn?function(e,r){return r instanceof Wn&&e.op===r.op&&e.filters.length===r.filters.length&&e.filters.reduce((o,s,c)=>o&&lb(s,r.filters[c]),!0)}(i,n):void vt();var e,r}function KS(i,n){const e=i.filters.concat(n);return Wn.create(e,i.op)}function YS(i){return i instanceof xn?`${(n=i).field.canonicalString()} ${n.op} ${a_(n.value)}`:i instanceof Wn?function(n){return n.op.toString()+" {"+n.getFilters().map(YS).join(" ,")+"}"}(i):"Filter";var n}class l2 extends xn{constructor(n,e,r){super(n,e,r),this.key=dt.fromName(r.referenceValue)}matches(n){const e=dt.comparator(n.key,this.key);return this.matchesComparison(e)}}class c2 extends xn{constructor(n,e){super(n,"in",e),this.keys=ZS(0,e)}matches(n){return this.keys.some(e=>e.isEqual(n.key))}}class QR extends xn{constructor(n,e){super(n,"not-in",e),this.keys=ZS(0,e)}matches(n){return!this.keys.some(e=>e.isEqual(n.key))}}function ZS(i,n){var e;return((null===(e=n.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>dt.fromName(r.referenceValue))}class XR extends xn{constructor(n,e){super(n,"array-contains",e)}matches(n){const e=n.data.field(this.field);return Wm(e)&&ob(e.arrayValue,this.value)}}class QS extends xn{constructor(n,e){super(n,"in",e)}matches(n){const e=n.data.field(this.field);return null!==e&&ob(this.value.arrayValue,e)}}class XS extends xn{constructor(n,e){super(n,"not-in",e)}matches(n){if(ob(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=n.data.field(this.field);return null!==e&&!ob(this.value.arrayValue,e)}}class JS extends xn{constructor(n,e){super(n,"array-contains-any",e)}matches(n){const e=n.data.field(this.field);return!(!Wm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>ob(this.value.arrayValue,r))}}class d2{constructor(n,e=null,r=[],o=[],s=null,c=null,h=null){this.path=n,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=s,this.startAt=c,this.endAt=h,this.dt=null}}function yE(i,n=null,e=[],r=[],o=null,s=null,c=null){return new d2(i,n,e,r,o,s,c)}function Tc(i){const n=ht(i);if(null===n.dt){let e=n.path.canonicalString();null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(r=>ab(r)).join(","),e+="|ob:",e+=n.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ur(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(r=>a_(r)).join(",")),n.endAt&&(e+="|ub:",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(r=>a_(r)).join(",")),n.dt=e}return n.dt}function Zm(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!qS(i.orderBy[e],n.orderBy[e]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!lb(i.filters[e],n.filters[e]))return!1;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!WS(i.startAt,n.startAt)&&WS(i.endAt,n.endAt)}function d_(i){return dt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function cb(i,n){return i.filters.filter(e=>e instanceof xn&&e.field.isEqual(n))}function db(i,n,e){let r=rb,o=!0;for(const s of cb(i,n)){let c=rb,h=!0;switch(s.op){case"<":case"<=":c=pE(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=rb}l_({value:r,inclusive:o},{value:c,inclusive:h})<0&&(r=c,o=h)}if(null!==e)for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(n)){const c=e.position[s];l_({value:r,inclusive:o},{value:c,inclusive:e.inclusive})<0&&(r=c,o=e.inclusive);break}return{value:r,inclusive:o}}function eA(i,n,e){let r=Fd,o=!0;for(const s of cb(i,n)){let c=Fd,h=!0;switch(s.op){case">=":case">":c=gE(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=Fd}KR({value:r,inclusive:o},{value:c,inclusive:h})>0&&(r=c,o=h)}if(null!==e)for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(n)){const c=e.position[s];KR({value:r,inclusive:o},{value:c,inclusive:e.inclusive})>0&&(r=c,o=e.inclusive);break}return{value:r,inclusive:o}}class Sc{constructor(n,e=null,r=[],o=[],s=null,c="F",h=null,p=null){this.path=n,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this.wt=null,this._t=null}}function vE(i,n,e,r,o,s,c,h){return new Sc(i,n,e,r,o,s,c,h)}function Th(i){return new Sc(i)}function JR(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function bE(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Sh(i){for(const n of i.filters){const e=n.getFirstInequalityField();if(null!==e)return e}return null}function tA(i){return null!==i.collectionGroup}function Ah(i){const n=ht(i);if(null===n.wt){n.wt=[];const e=Sh(n),r=bE(n);if(null!==e&&null===r)e.isKeyField()||n.wt.push(new Km(e)),n.wt.push(new Km(mr.keyField(),"asc"));else{let o=!1;for(const s of n.explicitOrderBy)n.wt.push(s),s.field.isKeyField()&&(o=!0);if(!o){const s=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.wt.push(new Km(mr.keyField(),s))}}}return n.wt}function ls(i){const n=ht(i);if(!n._t)if("F"===n.limitType)n._t=yE(n.path,n.collectionGroup,Ah(n),n.filters,n.limit,n.startAt,n.endAt);else{const e=[];for(const s of Ah(n))e.push(new Km(s.field,"desc"===s.dir?"asc":"desc"));const r=n.endAt?new Bd(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Bd(n.startAt.position,n.startAt.inclusive):null;n._t=yE(n.path,n.collectionGroup,e,n.filters,n.limit,r,o)}return n._t}function nA(i,n){n.getFirstInequalityField(),Sh(i);const e=i.filters.concat([n]);return new Sc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function ub(i,n,e){return new Sc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,e,i.startAt,i.endAt)}function hb(i,n){return Zm(ls(i),ls(n))&&i.limitType===n.limitType}function eP(i){return`${Tc(ls(i))}|lt:${i.limitType}`}function iA(i){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(r=>YS(r)).join(", ")}]`),Ur(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(r=>a_(r)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(r=>a_(r)).join(",")),`Target(${e})`}(ls(i))}; limitType=${i.limitType})`}function fb(i,n){return n.isFoundDocument()&&function(e,r){const o=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(o):dt.isDocumentKey(e.path)?e.path.isEqual(o):e.path.isImmediateParentOf(o)}(i,n)&&function(e,r){for(const o of Ah(e))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(i,n)&&function(e,r){for(const o of e.filters)if(!o.matches(r))return!1;return!0}(i,n)&&(r=n,!((e=i).startAt&&!function(o,s,c){const h=GS(o,s,c);return o.inclusive?h<=0:h<0}(e.startAt,Ah(e),r)||e.endAt&&!function(o,s,c){const h=GS(o,s,c);return o.inclusive?h>=0:h>0}(e.endAt,Ah(e),r)));var e,r}function tP(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function rA(i){return(n,e)=>{let r=!1;for(const o of Ah(i)){const s=u2(o,n,e);if(0!==s)return s;r=r||o.field.isKeyField()}return 0}}function u2(i,n,e){const r=i.field.isKeyField()?dt.comparator(n.key,e.key):function(o,s,c){const h=s.data.field(o),p=c.data.field(o);return null!==h&&null!==p?Eh(h,p):vt()}(i.field,n,e);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}class Vd{constructor(n,e){this.mapKeyFn=n,this.equalsFn=e,this.inner={},this.innerSize=0}get(n){const e=this.mapKeyFn(n),r=this.inner[e];if(void 0!==r)for(const[o,s]of r)if(this.equalsFn(o,n))return s}has(n){return void 0!==this.get(n)}set(n,e){const r=this.mapKeyFn(n),o=this.inner[r];if(void 0===o)return this.inner[r]=[[n,e]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],n))return void(o[s]=[n,e]);o.push([n,e]),this.innerSize++}delete(n){const e=this.mapKeyFn(n),r=this.inner[e];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],n))return 1===r.length?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(n){wh(this.inner,(e,r)=>{for(const[o,s]of r)n(o,s)})}isEmpty(){return tb(this.inner)}size(){return this.innerSize}}const h2=new oi(dt.comparator);function As(){return h2}const nP=new oi(dt.comparator);function u_(...i){let n=nP;for(const e of i)n=n.insert(e.key,e);return n}function iP(i){let n=nP;return i.forEach((e,r)=>n=n.insert(e,r.overlayedDocument)),n}function a(){return u()}function l(){return u()}function u(){return new Vd(i=>i.toString(),(i,n)=>i.isEqual(n))}const f=new oi(dt.comparator),m=new vi(dt.comparator);function g(...i){let n=m;for(const e of i)n=n.add(e);return n}const b=new vi(Xt);function E(){return b}function T(i,n){if(i.useProto3Json){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:o_(n)?"-0":n}}function M(i){return{integerValue:""+i}}function O(i,n){return Qv(n)?M(n):T(i,n)}class ${constructor(){this._=void 0}}function J(i,n,e){return i instanceof $e?function(r,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&nb(o)&&(o=uE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(e,n):i instanceof ot?St(i,n):i instanceof ke?Jt(i,n):function(r,o){const s=Ae(r,o),c=En(s)+En(r.gt);return fE(s)&&fE(r.gt)?M(c):T(r.serializer,c)}(i,n)}function oe(i,n,e){return i instanceof ot?St(i,n):i instanceof ke?Jt(i,n):e}function Ae(i,n){return i instanceof an?fE(e=n)||(r=e)&&"doubleValue"in r?n:{integerValue:0}:null;var r,e}class $e extends ${}class ot extends ${constructor(n){super(),this.elements=n}}function St(i,n){const e=go(n);for(const r of i.elements)e.some(o=>Ic(o,r))||e.push(r);return{arrayValue:{values:e}}}class ke extends ${constructor(n){super(),this.elements=n}}function Jt(i,n){let e=go(n);for(const r of i.elements)e=e.filter(o=>!Ic(o,r));return{arrayValue:{values:e}}}class an extends ${constructor(n,e){super(),this.serializer=n,this.gt=e}}function En(i){return ji(i.integerValue||i.doubleValue)}function go(i){return Wm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Hd{constructor(n,e){this.field=n,this.transform=e}}class oP{constructor(n,e){this.version=n,this.transformResults=e}}class nr{constructor(n,e){this.updateTime=n,this.exists=e}static none(){return new nr}static exists(n){return new nr(void 0,n)}static updateTime(n){return new nr(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function oA(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class sA{}function f2(i,n){if(!i.hasLocalMutations||n&&0===n.fields.length)return null;if(null===n)return i.isNoDocument()?new pb(i.key,nr.none()):new mb(i.key,i.data,nr.none());{const e=i.data,r=ko.empty();let o=new vi(mr.comparator);for(let s of n.fields)if(!o.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?r.delete(s):r.set(s,c),o=o.add(s)}return new Mh(i.key,r,new po(o.toArray()),nr.none())}}function hj(i,n,e){i instanceof mb?function(r,o,s){const c=r.value.clone(),h=g2(r.fieldTransforms,o,s.transformResults);c.setAll(h),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(i,n,e):i instanceof Mh?function(r,o,s){if(!oA(r.precondition,o))return void o.convertToUnknownDocument(s.version);const c=g2(r.fieldTransforms,o,s.transformResults),h=o.data;h.setAll(p2(r)),h.setAll(c),o.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(i,n,e):n.convertToNoDocument(e.version).setHasCommittedMutations()}function wE(i,n,e,r){return i instanceof mb?function(o,s,c,h){if(!oA(o.precondition,s))return c;const p=o.value.clone(),y=_2(o.fieldTransforms,h,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(i,n,e,r):i instanceof Mh?function(o,s,c,h){if(!oA(o.precondition,s))return c;const p=_2(o.fieldTransforms,h,s),y=s.data;return y.setAll(p2(o)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===c?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(i,n,e,r):(c=e,oA(i.precondition,s=n)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function fj(i,n){let e=null;for(const r of i.fieldTransforms){const o=n.data.field(r.field),s=Ae(r.transform,o||null);null!=s&&(null===e&&(e=ko.empty()),e.set(r.field,s))}return e||null}function m2(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(r=n.fieldTransforms,!!(void 0===(e=i.fieldTransforms)&&void 0===r||e&&r&&zm(e,r,(o,s)=>function rP(i,n){return i.field.isEqual(n.field)&&(r=n.transform,(e=i.transform)instanceof ot&&r instanceof ot||e instanceof ke&&r instanceof ke?zm(e.elements,r.elements,Ic):e instanceof an&&r instanceof an?Ic(e.gt,r.gt):e instanceof $e&&r instanceof $e);var e,r}(o,s))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var e,r}class mb extends sA{constructor(n,e,r,o=[]){super(),this.key=n,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Mh extends sA{constructor(n,e,r,o,s=[]){super(),this.key=n,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function p2(i){const n=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=i.data.field(e);n.set(e,r)}}),n}function g2(i,n,e){const r=new Map;Pt(i.length===e.length);for(let o=0;o<e.length;o++){const s=i[o],c=s.transform,h=n.data.field(s.field);r.set(s.field,oe(c,h,e[o]))}return r}function _2(i,n,e){const r=new Map;for(const o of i){const s=o.transform,c=e.data.field(o.field);r.set(o.field,J(s,c,n))}return r}class pb extends sA{constructor(n,e){super(),this.key=n,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sP extends sA{constructor(n,e){super(),this.key=n,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aP{constructor(n,e,r,o){this.batchId=n,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(n,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const s=this.mutations[o];s.key.isEqual(n.key)&&hj(s,n,r[o])}}applyToLocalView(n,e){for(const r of this.baseMutations)r.key.isEqual(n.key)&&(e=wE(r,n,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(n.key)&&(e=wE(r,n,e,this.localWriteTime));return e}applyToLocalDocumentSet(n,e){const r=l();return this.mutations.forEach(o=>{const s=n.get(o.key),c=s.overlayedDocument;let h=this.applyToLocalView(c,s.mutatedFields);h=e.has(o.key)?null:h;const p=f2(c,h);null!==p&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((n,e)=>n.add(e.key),g())}isEqual(n){return this.batchId===n.batchId&&zm(this.mutations,n.mutations,(e,r)=>m2(e,r))&&zm(this.baseMutations,n.baseMutations,(e,r)=>m2(e,r))}}class lP{constructor(n,e,r,o){this.batch=n,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(n,e,r){Pt(n.mutations.length===r.length);let o=f;const s=n.mutations;for(let c=0;c<s.length;c++)o=o.insert(s[c].key,r[c].version);return new lP(n,e,r,o)}}class cP{constructor(n,e){this.largestBatchId=n,this.mutation=e}getKey(){return this.mutation.key}isEqual(n){return null!==n&&this.mutation===n.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pj{constructor(n,e){this.count=n,this.unchangedNames=e}}var eo,On;function y2(i){switch(i){default:return vt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function v2(i){if(void 0===i)return fr("GRPC error has no .code"),ge.UNKNOWN;switch(i){case eo.OK:return ge.OK;case eo.CANCELLED:return ge.CANCELLED;case eo.UNKNOWN:return ge.UNKNOWN;case eo.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case eo.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case eo.INTERNAL:return ge.INTERNAL;case eo.UNAVAILABLE:return ge.UNAVAILABLE;case eo.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case eo.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case eo.NOT_FOUND:return ge.NOT_FOUND;case eo.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case eo.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case eo.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case eo.ABORTED:return ge.ABORTED;case eo.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case eo.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case eo.DATA_LOSS:return ge.DATA_LOSS;default:return vt()}}(On=eo||(eo={}))[On.OK=0]="OK",On[On.CANCELLED=1]="CANCELLED",On[On.UNKNOWN=2]="UNKNOWN",On[On.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",On[On.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",On[On.NOT_FOUND=5]="NOT_FOUND",On[On.ALREADY_EXISTS=6]="ALREADY_EXISTS",On[On.PERMISSION_DENIED=7]="PERMISSION_DENIED",On[On.UNAUTHENTICATED=16]="UNAUTHENTICATED",On[On.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",On[On.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",On[On.ABORTED=10]="ABORTED",On[On.OUT_OF_RANGE=11]="OUT_OF_RANGE",On[On.UNIMPLEMENTED=12]="UNIMPLEMENTED",On[On.INTERNAL=13]="INTERNAL",On[On.UNAVAILABLE=14]="UNAVAILABLE",On[On.DATA_LOSS=15]="DATA_LOSS";class dP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return aA}static getOrCreateInstance(){return null===aA&&(aA=new dP),aA}onExistenceFilterMismatch(n){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,n),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(n){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(n))}}let aA=null;function b2(){return new TextEncoder}const gj=new Hm([4294967295,4294967295],0);function w2(i){const n=b2().encode(i),e=new CS;return e.update(n),new Uint8Array(e.digest())}function x2(i){const n=new DataView(i.buffer),e=n.getUint32(0,!0),r=n.getUint32(4,!0),o=n.getUint32(8,!0),s=n.getUint32(12,!0);return[new Hm([e,r],0),new Hm([o,s],0)]}class uP{constructor(n,e,r){if(this.bitmap=n,this.padding=e,this.hashCount=r,e<0||e>=8)throw new xE(`Invalid padding: ${e}`);if(r<0)throw new xE(`Invalid hash count: ${r}`);if(n.length>0&&0===this.hashCount)throw new xE(`Invalid hash count: ${r}`);if(0===n.length&&0!==e)throw new xE(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*n.length-e,this.Tt=Hm.fromNumber(this.It)}Et(n,e,r){let o=n.add(e.multiply(Hm.fromNumber(r)));return 1===o.compare(gj)&&(o=new Hm([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(n){return 0!=(this.bitmap[Math.floor(n/8)]&1<<n%8)}vt(n){if(0===this.It)return!1;const e=w2(n),[r,o]=x2(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(r,o,s);if(!this.At(c))return!1}return!0}static create(n,e,r){const o=n%8==0?0:8-n%8,s=new Uint8Array(Math.ceil(n/8)),c=new uP(s,o,e);return r.forEach(h=>c.insert(h)),c}insert(n){if(0===this.It)return;const e=w2(n),[r,o]=x2(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(r,o,s);this.Rt(c)}}Rt(n){const e=Math.floor(n/8);this.bitmap[e]|=1<<n%8}}class xE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class EE{constructor(n,e,r,o,s){this.snapshotVersion=n,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(n,e,r){const o=new Map;return o.set(n,CE.createSynthesizedTargetChangeForCurrentChange(n,e,r)),new EE(Ot.min(),o,new oi(Xt),As(),g())}}class CE{constructor(n,e,r,o,s){this.resumeToken=n,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(n,e,r){return new CE(r,e,g(),g(),g())}}class lA{constructor(n,e,r,o){this.Pt=n,this.removedTargetIds=e,this.key=r,this.bt=o}}class E2{constructor(n,e){this.targetId=n,this.Vt=e}}class C2{constructor(n,e,r=Br.EMPTY_BYTE_STRING,o=null){this.state=n,this.targetIds=e,this.resumeToken=r,this.cause=o}}class D2{constructor(){this.St=0,this.Dt=T2(),this.Ct=Br.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(n){n.approximateByteSize()>0&&(this.Nt=!0,this.Ct=n)}Ot(){let n=g(),e=g(),r=g();return this.Dt.forEach((o,s)=>{switch(s){case 0:n=n.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:vt()}}),new CE(this.Ct,this.xt,n,e,r)}Ft(){this.Nt=!1,this.Dt=T2()}Bt(n,e){this.Nt=!0,this.Dt=this.Dt.insert(n,e)}Lt(n){this.Nt=!0,this.Dt=this.Dt.remove(n)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class _j{constructor(n){this.Gt=n,this.Qt=new Map,this.jt=As(),this.zt=I2(),this.Wt=new oi(Xt)}Ht(n){for(const e of n.Pt)n.bt&&n.bt.isFoundDocument()?this.Jt(e,n.bt):this.Yt(e,n.key,n.bt);for(const e of n.removedTargetIds)this.Yt(e,n.key,n.bt)}Xt(n){this.forEachTarget(n,e=>{const r=this.Zt(e);switch(n.state){case 0:this.te(e)&&r.$t(n.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(n.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(e);break;case 3:this.te(e)&&(r.Kt(),r.$t(n.resumeToken));break;case 4:this.te(e)&&(this.ee(e),r.$t(n.resumeToken));break;default:vt()}})}forEachTarget(n,e){n.targetIds.length>0?n.targetIds.forEach(e):this.Qt.forEach((r,o)=>{this.te(o)&&e(o)})}ne(n){var e;const r=n.targetId,o=n.Vt.count,s=this.se(r);if(s){const c=s.target;if(d_(c))if(0===o){const h=new dt(c.path);this.Yt(r,h,bi.newNoDocument(h,Ot.min()))}else Pt(1===o);else{const h=this.ie(r);if(h!==o){const p=this.re(n,h);0!==p&&(this.ee(r),this.Wt=this.Wt.insert(r,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(e=dP.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(y,w,I){var A,P,U,G,Q,me;const Ce={localCacheCount:w,existenceFilterCount:I.count},fe=I.unchangedNames;return fe&&(Ce.bloomFilter={applied:0===y,hashCount:null!==(A=fe?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(G=null===(U=null===(P=fe?.bits)||void 0===P?void 0:P.bitmap)||void 0===U?void 0:U.length)&&void 0!==G?G:0,padding:null!==(me=null===(Q=fe?.bits)||void 0===Q?void 0:Q.padding)&&void 0!==me?me:0}),Ce}(p,h,n.Vt))}}}}re(n,e){const{unchangedNames:r,count:o}=n.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=r;let p,y;try{p=Cc(s).toUint8Array()}catch(w){if(w instanceof dE)return Ts("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw w}try{y=new uP(p,c,h)}catch(w){return Ts(w instanceof xE?"BloomFilter error: ":"Applying bloom filter failed: ",w),1}return 0===y.It?1:o!==e-this.oe(n.targetId,y)?2:0}oe(n,e){const r=this.Gt.getRemoteKeysForTarget(n);let o=0;return r.forEach(s=>{const c=this.Gt.ue(),h=`projects/${c.projectId}/databases/${c.database}/documents/${s.path.canonicalString()}`;e.vt(h)||(this.Yt(n,s,null),o++)}),o}ce(n){const e=new Map;this.Qt.forEach((s,c)=>{const h=this.se(c);if(h){if(s.current&&d_(h.target)){const p=new dt(h.target.path);null!==this.jt.get(p)||this.ae(c,p)||this.Yt(c,p,bi.newNoDocument(p,n))}s.Mt&&(e.set(c,s.Ot()),s.Ft())}});let r=g();this.zt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const y=this.se(p);return!y||"TargetPurposeLimboResolution"===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.jt.forEach((s,c)=>c.setReadTime(n));const o=new EE(n,e,this.Wt,this.jt,r);return this.jt=As(),this.zt=I2(),this.Wt=new oi(Xt),o}Jt(n,e){if(!this.te(n))return;const r=this.ae(n,e.key)?2:0;this.Zt(n).Bt(e.key,r),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(n))}Yt(n,e,r){if(!this.te(n))return;const o=this.Zt(n);this.ae(n,e)?o.Bt(e,1):o.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(n)),r&&(this.jt=this.jt.insert(e,r))}removeTarget(n){this.Qt.delete(n)}ie(n){const e=this.Zt(n).Ot();return this.Gt.getRemoteKeysForTarget(n).size+e.addedDocuments.size-e.removedDocuments.size}qt(n){this.Zt(n).qt()}Zt(n){let e=this.Qt.get(n);return e||(e=new D2,this.Qt.set(n,e)),e}he(n){let e=this.zt.get(n);return e||(e=new vi(Xt),this.zt=this.zt.insert(n,e)),e}te(n){const e=null!==this.se(n);return e||je("WatchChangeAggregator","Detected inactive target",n),e}se(n){const e=this.Qt.get(n);return e&&e.kt?null:this.Gt.le(n)}ee(n){this.Qt.set(n,new D2),this.Gt.getRemoteKeysForTarget(n).forEach(e=>{this.Yt(n,e,null)})}ae(n,e){return this.Gt.getRemoteKeysForTarget(n).has(e)}}function I2(){return new oi(dt.comparator)}function T2(){return new oi(dt.comparator)}const yj={asc:"ASCENDING",desc:"DESCENDING"},vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bj={and:"AND",or:"OR"};class wj{constructor(n,e){this.databaseId=n,this.useProto3Json=e}}function hP(i,n){return i.useProto3Json||Ur(n)?n:{value:n}}function gb(i,n){return i.useProto3Json?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function S2(i,n){return i.useProto3Json?n.toBase64():n.toUint8Array()}function xj(i,n){return gb(i,n.toTimestamp())}function Vr(i){return Pt(!!i),Ot.fromTimestamp(function(n){const e=xh(n);return new zi(e.seconds,e.nanos)}(i))}function fP(i,n){return(e=i,new kn(["projects",e.projectId,"databases",e.database])).child("documents").child(n).canonicalString();var e}function A2(i){const n=kn.fromString(i);return Pt(U2(n)),n}function DE(i,n){return fP(i.databaseId,n.path)}function zd(i,n){const e=A2(n);if(e.get(1)!==i.databaseId.projectId)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new dt(k2(e))}function mP(i,n){return fP(i.databaseId,n)}function M2(i){const n=A2(i);return 4===n.length?kn.emptyPath():k2(n)}function IE(i){return new kn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function k2(i){return Pt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function R2(i,n,e){return{name:DE(i,n),fields:e.value.mapValue.fields}}function P2(i,n,e){const r=zd(i,n.name),o=Vr(n.updateTime),s=n.createTime?Vr(n.createTime):Ot.min(),c=new ko({mapValue:{fields:n.fields}}),h=bi.newFoundDocument(r,o,s,c);return e&&h.setHasCommittedMutations(),e?h.setHasCommittedMutations():h}function TE(i,n){let e;if(n instanceof mb)e={update:R2(i,n.key,n.value)};else if(n instanceof pb)e={delete:DE(i,n.key)};else if(n instanceof Mh)e={update:R2(i,n.key,n.data),updateMask:Mj(n.fieldMask)};else{if(!(n instanceof sP))return vt();e={verify:DE(i,n.key)}}return n.fieldTransforms.length>0&&(e.updateTransforms=n.fieldTransforms.map(r=>function(o,s){const c=s.transform;if(c instanceof $e)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ot)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ke)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof an)return{fieldPath:s.field.canonicalString(),increment:c.gt};throw vt()}(0,r))),n.precondition.isNone||(e.currentDocument=void 0!==(o=n.precondition).updateTime?{updateTime:xj(i,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:vt()),e;var o}function pP(i,n){const e=n.currentDocument?void 0!==(o=n.currentDocument).updateTime?nr.updateTime(Vr(o.updateTime)):void 0!==o.exists?nr.exists(o.exists):nr.none():nr.none(),r=n.updateTransforms?n.updateTransforms.map(o=>function(s,c){let h=null;"setToServerValue"in c?(Pt("REQUEST_TIME"===c.setToServerValue),h=new $e):"appendMissingElements"in c?h=new ot(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new ke(c.removeAllFromArray.values||[]):"increment"in c?h=new an(s,c.increment):vt();const p=mr.fromServerFormat(c.fieldPath);return new Hd(p,h)}(i,o)):[];var o;if(n.update){const o=zd(i,n.update.name),s=new ko({mapValue:{fields:n.update.fields}});if(n.updateMask){const c=new po((n.updateMask.fieldPaths||[]).map(y=>mr.fromServerFormat(y)));return new Mh(o,s,c,e,r)}return new mb(o,s,e,r)}if(n.delete){const o=zd(i,n.delete);return new pb(o,e)}if(n.verify){const o=zd(i,n.verify);return new sP(o,e)}return vt()}function O2(i,n){return{documents:[mP(i,n.path)]}}function gP(i,n){const e={structuredQuery:{}},r=n.path;null!==n.collectionGroup?(e.parent=mP(i,r),e.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(e.parent=mP(i,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(p){if(0!==p.length)return L2(Wn.create(p,"and"))}(n.filters);o&&(e.structuredQuery.where=o);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:Qm((w=y).field),direction:Tj(w.dir)};var w})}(n.orderBy);s&&(e.structuredQuery.orderBy=s);const c=hP(i,n.limit);var h,p;return null!==c&&(e.structuredQuery.limit=c),n.startAt&&(e.structuredQuery.startAt={before:(h=n.startAt).inclusive,values:h.position}),n.endAt&&(e.structuredQuery.endAt={before:!(p=n.endAt).inclusive,values:p.position}),e}function N2(i){let n=M2(i.parent);const e=i.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){Pt(1===r);const w=e.from[0];w.allDescendants?o=w.collectionId:n=n.child(w.collectionId)}let s=[];e.where&&(s=function(w){const I=F2(w);return I instanceof Wn&&c_(I)?I.getFilters():[I]}(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(w=>{return new Km(_b((I=w).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let h=null;e.limit&&(h=function(w){let I;return I="object"==typeof w?w.value:w,Ur(I)?null:I}(e.limit));let p=null;var w;e.startAt&&(p=new Bd((w=e.startAt).values||[],!!w.before));let y=null;return e.endAt&&(y=function(w){return new Bd(w.values||[],!w.before)}(e.endAt)),vE(n,o,c,s,h,"F",p,y)}function F2(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const e=_b(n.unaryFilter.field);return xn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=_b(n.unaryFilter.field);return xn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_b(n.unaryFilter.field);return xn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=_b(n.unaryFilter.field);return xn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(i):void 0!==i.fieldFilter?xn.create(_b((n=i).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Wn.create(n.compositeFilter.filters.map(e=>F2(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return vt()}}(n.compositeFilter.op))}(i):vt();var n}function Tj(i){return yj[i]}function Sj(i){return vj[i]}function Aj(i){return bj[i]}function Qm(i){return{fieldPath:i.canonicalString()}}function _b(i){return mr.fromServerFormat(i.fieldPath)}function L2(i){return i instanceof xn?function(n){if("=="===n.op){if(mE(n.value))return{unaryFilter:{field:Qm(n.field),op:"IS_NAN"}};if(Ud(n.value))return{unaryFilter:{field:Qm(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(mE(n.value))return{unaryFilter:{field:Qm(n.field),op:"IS_NOT_NAN"}};if(Ud(n.value))return{unaryFilter:{field:Qm(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qm(n.field),op:Sj(n.op),value:n.value}}}(i):i instanceof Wn?function(n){const e=n.getFilters().map(r=>L2(r));return 1===e.length?e[0]:{compositeFilter:{op:Aj(n.op),filters:e}}}(i):vt()}function Mj(i){const n=[];return i.fields.forEach(e=>n.push(e.canonicalString())),{fieldPaths:n}}function U2(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class kh{constructor(n,e,r,o,s=Ot.min(),c=Ot.min(),h=Br.EMPTY_BYTE_STRING,p=null){this.target=n,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(n){return new kh(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(n,e){return new kh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,n,null)}withExpectedCount(n){return new kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,n)}withLastLimboFreeSnapshotVersion(n){return new kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken,this.expectedCount)}}class B2{constructor(n){this.fe=n}}function V2(i,n){const e=n.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:cA(n.readTime),hasCommittedMutations:n.hasCommittedMutations};if(n.isFoundDocument())r.document={name:DE(o=i.fe,(s=n).key),fields:s.data.value.mapValue.fields,updateTime:gb(o,s.version.toTimestamp()),createTime:gb(o,s.createTime.toTimestamp())};else if(n.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:h_(n.version)};else{if(!n.isUnknownDocument())return vt();r.unknownDocument={path:e.path.toArray(),version:h_(n.version)}}var o,s;return r}function cA(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function h_(i){const n=i.toTimestamp();return{seconds:n.seconds,nanoseconds:n.nanoseconds}}function f_(i){const n=new zi(i.seconds,i.nanoseconds);return Ot.fromTimestamp(n)}function m_(i,n){const e=(n.baseMutations||[]).map(s=>pP(i.fe,s));for(let s=0;s<n.mutations.length-1;++s)s+1<n.mutations.length&&void 0!==n.mutations[s+1].transform&&(n.mutations[s].updateTransforms=n.mutations[s+1].transform.fieldTransforms,n.mutations.splice(s+1,1),++s);const r=n.mutations.map(s=>pP(i.fe,s)),o=zi.fromMillis(n.localWriteTimeMs);return new aP(n.batchId,o,e,r)}function SE(i){const n=f_(i.readTime),e=void 0!==i.lastLimboFreeSnapshotVersion?f_(i.lastLimboFreeSnapshotVersion):Ot.min();let r;var o;return void 0!==i.query.documents?(Pt(1===(o=i.query).documents.length),r=ls(Th(M2(o.documents[0])))):r=ls(N2(i.query)),new kh(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,n,e,Br.fromBase64String(i.resumeToken))}function H2(i,n){const e=h_(n.snapshotVersion),r=h_(n.lastLimboFreeSnapshotVersion);let o;o=d_(n.target)?O2(i.fe,n.target):gP(i.fe,n.target);const s=n.resumeToken.toBase64();return{targetId:n.targetId,canonicalId:Tc(n.target),readTime:e,resumeToken:s,lastListenSequenceNumber:n.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function _P(i){const n=N2({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ub(n,n.limit,"L"):n}function yP(i,n){return new cP(n.largestBatchId,pP(i.fe,n.overlayMutation))}function z2(i,n){const e=n.path.lastSegment();return[i,Mo(n.path.popLast()),e]}function j2(i,n,e,r){return{indexId:i,uid:n.uid||"",sequenceNumber:e,readTime:h_(r.readTime),documentKey:Mo(r.documentKey.path),largestBatchId:r.largestBatchId}}class Rj{getBundleMetadata(n,e){return $2(n).get(e).next(r=>{if(r)return{id:(o=r).bundleId,createTime:f_(o.createTime),version:o.version};var o})}saveBundleMetadata(n,e){return $2(n).put({bundleId:(r=e).id,createTime:h_(Vr(r.createTime)),version:r.version});var r}getNamedQuery(n,e){return G2(n).get(e).next(r=>{if(r)return{name:(o=r).name,query:_P(o.bundledQuery),readTime:f_(o.readTime)};var o})}saveNamedQuery(n,e){return G2(n).put({name:(r=e).name,readTime:h_(Vr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function $2(i){return Jr(i,"bundles")}function G2(i){return Jr(i,"namedQueries")}class dA{constructor(n,e){this.serializer=n,this.userId=e}static de(n,e){return new dA(n,e.uid||"")}getOverlay(n,e){return AE(n).get(z2(this.userId,e)).next(r=>r?yP(this.serializer,r):null)}getOverlays(n,e){const r=a();return he.forEach(e,o=>this.getOverlay(n,o).next(s=>{null!==s&&r.set(o,s)})).next(()=>r)}saveOverlays(n,e,r){const o=[];return r.forEach((s,c)=>{const h=new cP(e,c);o.push(this.we(n,h))}),he.waitFor(o)}removeOverlaysForBatchId(n,e,r){const o=new Set;e.forEach(c=>o.add(Mo(c.getCollectionPath())));const s=[];return o.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(AE(n).J("collectionPathOverlayIndex",h))}),he.waitFor(s)}getOverlaysForCollection(n,e,r){const o=a(),s=Mo(e),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return AE(n).j("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const y=yP(this.serializer,p);o.set(y.getKey(),y)}return o})}getOverlaysForCollectionGroup(n,e,r,o){const s=a();let c;const h=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return AE(n).X({index:"collectionGroupOverlayIndex",range:h},(p,y,w)=>{const I=yP(this.serializer,y);s.size()<o||I.largestBatchId===c?(s.set(I.getKey(),I),c=I.largestBatchId):w.done()}).next(()=>s)}we(n,e){return AE(n).put(function(r,o,s){const[c,h,p]=z2(o,s.mutation.key);return{userId:o,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:TE(r.fe,s.mutation)}}(this.serializer,this.userId,e))}}function AE(i){return Jr(i,"documentOverlays")}class p_{constructor(){}_e(n,e){this.me(n,e),e.ge()}me(n,e){if("nullValue"in n)this.ye(e,5);else if("booleanValue"in n)this.ye(e,10),e.pe(n.booleanValue?1:0);else if("integerValue"in n)this.ye(e,15),e.pe(ji(n.integerValue));else if("doubleValue"in n){const r=ji(n.doubleValue);isNaN(r)?this.ye(e,13):(this.ye(e,15),o_(r)?e.pe(0):e.pe(r))}else if("timestampValue"in n){const r=n.timestampValue;this.ye(e,20),"string"==typeof r?e.Ie(r):(e.Ie(`${r.seconds||""}`),e.pe(r.nanos||0))}else if("stringValue"in n)this.Te(n.stringValue,e),this.Ee(e);else if("bytesValue"in n)this.ye(e,30),e.Ae(Cc(n.bytesValue)),this.Ee(e);else if("referenceValue"in n)this.ve(n.referenceValue,e);else if("geoPointValue"in n){const r=n.geoPointValue;this.ye(e,45),e.pe(r.latitude||0),e.pe(r.longitude||0)}else"mapValue"in n?$S(n)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(n.mapValue,e),this.Ee(e)):"arrayValue"in n?(this.Pe(n.arrayValue,e),this.Ee(e)):vt()}Te(n,e){this.ye(e,25),this.be(n,e)}be(n,e){e.Ie(n)}Re(n,e){const r=n.fields||{};this.ye(e,55);for(const o of Object.keys(r))this.Te(o,e),this.me(r[o],e)}Pe(n,e){const r=n.values||[];this.ye(e,50);for(const o of r)this.me(o,e)}ve(n,e){this.ye(e,37),dt.fromName(n).path.forEach(r=>{this.ye(e,60),this.be(r,e)})}ye(n,e){n.pe(e)}Ee(n){n.pe(2)}}function Pj(i){if(0===i)return 8;let n=0;return!(i>>4)&&(n+=4,i<<=4),!(i>>6)&&(n+=2,i<<=2),!(i>>7)&&(n+=1),n}function W2(i){const n=64-function(e){let r=0;for(let o=0;o<8;++o){const s=Pj(255&e[o]);if(r+=s,8!==s)break}return r}(i);return Math.ceil(n/8)}p_.Ve=new p_;class Oj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(n){const e=n[Symbol.iterator]();let r=e.next();for(;!r.done;)this.De(r.value),r=e.next();this.Ce()}xe(n){const e=n[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ne(r.value),r=e.next();this.ke()}Me(n){for(const e of n){const r=e.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=e.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(n){for(const e of n){const r=e.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=e.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(n){const e=this.Fe(n),r=W2(e);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}Le(n){const e=this.Fe(n),r=W2(e);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(n){this.Be(n.length),this.buffer.set(n,this.position),this.position+=n.length}Qe(){return this.buffer.slice(0,this.position)}Fe(n){const e=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(n),r=0!=(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}De(n){const e=255&n;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(n){const e=255&n;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(n)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(n){this.Be(1),this.buffer[this.position++]=n}Ge(n){this.Be(1),this.buffer[this.position++]=~n}Be(n){const e=n+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Nj{constructor(n){this.je=n}Ae(n){this.je.Se(n)}Ie(n){this.je.Me(n)}pe(n){this.je.Oe(n)}ge(){this.je.qe()}}class Fj{constructor(n){this.je=n}Ae(n){this.je.xe(n)}Ie(n){this.je.$e(n)}pe(n){this.je.Le(n)}ge(){this.je.Ke()}}class ME{constructor(){this.je=new Oj,this.ze=new Nj(this.je),this.We=new Fj(this.je)}seed(n){this.je.seed(n)}He(n){return 0===n?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class g_{constructor(n,e,r,o){this.indexId=n,this.documentKey=e,this.arrayValue=r,this.directionalValue=o}Je(){const n=this.directionalValue.length,e=0===n||255===this.directionalValue[n-1]?n+1:n,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==n?r.set([0],this.directionalValue.length):++r[r.length-1],new g_(this.indexId,this.documentKey,this.arrayValue,r)}}function Xm(i,n){let e=i.indexId-n.indexId;return 0!==e?e:(e=q2(i.arrayValue,n.arrayValue),0!==e?e:(e=q2(i.directionalValue,n.directionalValue),0!==e?e:dt.comparator(i.documentKey,n.documentKey)))}function q2(i,n){for(let e=0;e<i.length&&e<n.length;++e){const r=i[e]-n[e];if(0!==r)return r}return i.length-n.length}class Lj{constructor(n){this.collectionId=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment(),this.Ye=n.orderBy,this.Xe=[];for(const e of n.filters){const r=e;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(n){Pt(n.collectionGroup===this.collectionId);const e=MS(n);if(void 0!==e&&!this.en(e))return!1;const r=jm(n);let o=new Set,s=0,c=0;for(;s<r.length&&this.en(r[s]);++s)o=o.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const h=r[s];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[c++],h))return!1}++s}for(;s<r.length;++s)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[s]))return!1;return!0}en(n){for(const e of this.Xe)if(this.nn(e,n))return!0;return!1}nn(n,e){return!(void 0===n||!n.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===n.op||"array-contains-any"===n.op)}sn(n,e){return!!n.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===n.dir||1===e.kind&&"desc"===n.dir)}}function K2(i){var n,e;if(Pt(i instanceof xn||i instanceof Wn),i instanceof xn){if(i instanceof QS){const o=(null===(e=null===(n=i.value.arrayValue)||void 0===n?void 0:n.values)||void 0===e?void 0:e.map(s=>xn.create(i.field,"==",s)))||[];return Wn.create(o,"or")}return i}const r=i.filters.map(o=>K2(o));return Wn.create(r,i.op)}function Uj(i){if(0===i.getFilters().length)return[];const n=wP(K2(i));return Pt(Y2(n)),vP(n)||bP(n)?[n]:n.getFilters()}function vP(i){return i instanceof xn}function bP(i){return i instanceof Wn&&c_(i)}function Y2(i){return vP(i)||bP(i)||function(n){if(n instanceof Wn&&sb(n)){for(const e of n.getFilters())if(!vP(e)&&!bP(e))return!1;return!0}return!1}(i)}function wP(i){if(Pt(i instanceof xn||i instanceof Wn),i instanceof xn)return i;if(1===i.filters.length)return wP(i.filters[0]);const n=i.filters.map(r=>wP(r));let e=Wn.create(n,i.op);return e=uA(e),Y2(e)?e:(Pt(e instanceof Wn),Pt(Ym(e)),Pt(e.filters.length>1),e.filters.reduce((r,o)=>xP(r,o)))}function xP(i,n){let e;return Pt(i instanceof xn||i instanceof Wn),Pt(n instanceof xn||n instanceof Wn),e=i instanceof xn?n instanceof xn?Wn.create([i,n],"and"):Z2(i,n):n instanceof xn?Z2(n,i):function(r,o){if(Pt(r.filters.length>0&&o.filters.length>0),Ym(r)&&Ym(o))return KS(r,o.getFilters());const s=sb(r)?r:o,c=sb(r)?o:r,h=s.filters.map(p=>xP(p,c));return Wn.create(h,"or")}(i,n),uA(e)}function Z2(i,n){if(Ym(n))return KS(n,i.getFilters());{const e=n.filters.map(r=>xP(i,r));return Wn.create(e,"or")}}function uA(i){if(Pt(i instanceof xn||i instanceof Wn),i instanceof xn)return i;const n=i.getFilters();if(1===n.length)return uA(n[0]);if(ZR(i))return i;const e=n.map(o=>uA(o)),r=[];return e.forEach(o=>{o instanceof xn?r.push(o):o instanceof Wn&&(o.op===i.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:Wn.create(r,i.op)}class Bj{constructor(){this.rn=new EP}addToCollectionParentIndex(n,e){return this.rn.add(e),he.resolve()}getCollectionParents(n,e){return he.resolve(this.rn.getEntries(e))}addFieldIndex(n,e){return he.resolve()}deleteFieldIndex(n,e){return he.resolve()}getDocumentsMatchingTarget(n,e){return he.resolve(null)}getIndexType(n,e){return he.resolve(0)}getFieldIndexes(n,e){return he.resolve([])}getNextCollectionGroupToUpdate(n){return he.resolve(null)}getMinOffset(n,e){return he.resolve(Ss.min())}getMinOffsetFromCollectionGroup(n,e){return he.resolve(Ss.min())}updateCollectionGroup(n,e,r){return he.resolve()}updateIndexEntries(n,e){return he.resolve()}}class EP{constructor(){this.index={}}add(n){const e=n.lastSegment(),r=n.popLast(),o=this.index[e]||new vi(kn.comparator),s=!o.has(r);return this.index[e]=o.add(r),s}has(n){const e=n.lastSegment(),r=n.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(n){return(this.index[n]||new vi(kn.comparator)).toArray()}}const hA=new Uint8Array(0);class Vj{constructor(n,e){this.user=n,this.databaseId=e,this.on=new EP,this.un=new Vd(r=>Tc(r),(r,o)=>Zm(r,o)),this.uid=n.uid||""}addToCollectionParentIndex(n,e){if(!this.on.has(e)){const r=e.lastSegment(),o=e.popLast();n.addOnCommittedListener(()=>{this.on.add(e)});const s={collectionId:r,parent:Mo(o)};return Q2(n).put(s)}return he.resolve()}getCollectionParents(n,e){const r=[],o=IDBKeyRange.bound([e,""],[AS(e),""],!1,!0);return Q2(n).j(o).next(s=>{for(const c of s){if(c.collectionId!==e)break;r.push(Na(c.parent))}return r})}addFieldIndex(n,e){const r=fA(n),o={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete o.indexId;const s=r.add(o);if(e.indexState){const c=RE(n);return s.next(h=>{c.put(j2(h,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(n,e){const r=fA(n),o=RE(n),s=kE(n);return r.delete(e.indexId).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(n,e){const r=kE(n);let o=!0;const s=new Map;return he.forEach(this.cn(e),c=>this.an(n,c).next(h=>{o&&(o=!!h),s.set(c,h)})).next(()=>{if(o){let c=g();const h=[];return he.forEach(s,(p,y)=>{var w;je("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(fe=>`${fe.fieldPath}:${fe.kind}`).join(",")}`} to execute ${Tc(e)}`);const I=function(fe,Te){const Fe=MS(Te);if(void 0===Fe)return null;for(const qe of cb(fe,Fe.fieldPath))switch(qe.op){case"array-contains-any":return qe.value.arrayValue.values||[];case"array-contains":return[qe.value]}return null}(y,p),A=function(fe,Te){const Fe=new Map;for(const qe of jm(Te))for(const Xe of cb(fe,qe.fieldPath))switch(Xe.op){case"==":case"in":Fe.set(qe.fieldPath.canonicalString(),Xe.value);break;case"not-in":case"!=":return Fe.set(qe.fieldPath.canonicalString(),Xe.value),Array.from(Fe.values())}return null}(y,p),P=function(fe,Te){const Fe=[];let qe=!0;for(const Xe of jm(Te)){const It=0===Xe.kind?db(fe,Xe.fieldPath,fe.startAt):eA(fe,Xe.fieldPath,fe.startAt);Fe.push(It.value),qe&&(qe=It.inclusive)}return new Bd(Fe,qe)}(y,p),U=function(fe,Te){const Fe=[];let qe=!0;for(const Xe of jm(Te)){const It=0===Xe.kind?eA(fe,Xe.fieldPath,fe.endAt):db(fe,Xe.fieldPath,fe.endAt);Fe.push(It.value),qe&&(qe=It.inclusive)}return new Bd(Fe,qe)}(y,p),G=this.hn(p,y,P),Q=this.hn(p,y,U),me=this.ln(p,y,A),Ce=this.fn(p.indexId,I,G,P.inclusive,Q,U.inclusive,me);return he.forEach(Ce,fe=>r.H(fe,e.limit).next(Te=>{Te.forEach(Fe=>{const qe=dt.fromSegments(Fe.documentKey);c.has(qe)||(c=c.add(qe),h.push(qe))})}))}).next(()=>h)}return he.resolve(null)})}cn(n){let e=this.un.get(n);return e||(e=0===n.filters.length?[n]:Uj(Wn.create(n.filters,"and")).map(r=>yE(n.path,n.collectionGroup,n.orderBy,r.getFilters(),n.limit,n.startAt,n.endAt)),this.un.set(n,e),e)}fn(n,e,r,o,s,c,h){const p=(null!=e?e.length:1)*Math.max(r.length,s.length),y=p/(null!=e?e.length:1),w=[];for(let I=0;I<p;++I){const A=e?this.dn(e[I/y]):hA,P=this.wn(n,A,r[I%y],o),U=this._n(n,A,s[I%y],c),G=h.map(Q=>this.wn(n,A,Q,!0));w.push(...this.createRange(P,U,G))}return w}wn(n,e,r,o){const s=new g_(n,dt.empty(),e,r);return o?s:s.Je()}_n(n,e,r,o){const s=new g_(n,dt.empty(),e,r);return o?s.Je():s}an(n,e){const r=new Lj(e),o=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(n,o).next(s=>{let c=null;for(const h of s)r.tn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(n,e){let r=2;const o=this.cn(e);return he.forEach(o,s=>this.an(n,s).next(c=>{c?0!==r&&c.fields.length<function(h){let p=new vi(mr.comparator),y=!1;for(const w of h.filters)for(const I of w.getFlattenedFilters())I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?y=!0:p=p.add(I.field));for(const w of h.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(y?1:0)}(s)&&(r=1):r=0})).next(()=>null!==e.limit&&o.length>1&&2===r?1:r)}mn(n,e){const r=new ME;for(const o of jm(n)){const s=e.data.field(o.fieldPath);if(null==s)return null;const c=r.He(o.kind);p_.Ve._e(s,c)}return r.Qe()}dn(n){const e=new ME;return p_.Ve._e(n,e.He(0)),e.Qe()}gn(n,e){const r=new ME;return p_.Ve._e(Dh(this.databaseId,e),r.He(function(o){const s=jm(o);return 0===s.length?0:s[s.length-1].kind}(n))),r.Qe()}ln(n,e,r){if(null===r)return[];let o=[];o.push(new ME);let s=0;for(const c of jm(n)){const h=r[s++];for(const p of o)if(this.yn(e,c.fieldPath)&&Wm(h))o=this.pn(o,c,h);else{const y=p.He(c.kind);p_.Ve._e(h,y)}}return this.In(o)}hn(n,e,r){return this.ln(n,e,r.position)}In(n){const e=[];for(let r=0;r<n.length;++r)e[r]=n[r].Qe();return e}pn(n,e,r){const o=[...n],s=[];for(const c of r.arrayValue.values||[])for(const h of o){const p=new ME;p.seed(h.Qe()),p_.Ve._e(c,p.He(e.kind)),s.push(p)}return s}yn(n,e){return!!n.filters.find(r=>r instanceof xn&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(n,e){const r=fA(n),o=RE(n);return(e?r.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.j()).next(s=>{const c=[];return he.forEach(s,h=>o.get([h.indexId,this.uid]).next(p=>{c.push(function(y,w){const I=w?new $m(w.sequenceNumber,new Ss(f_(w.readTime),new dt(Na(w.documentKey)),w.largestBatchId)):$m.empty(),A=y.fields.map(([P,U])=>new n_(mr.fromServerFormat(P),U));return new Jx(y.indexId,y.collectionGroup,A,I)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(n){return this.getFieldIndexes(n).next(e=>0===e.length?null:(e.sort((r,o)=>{const s=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==s?s:Xt(r.collectionGroup,o.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(n,e,r){const o=fA(n),s=RE(n);return this.Tn(n).next(c=>o.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>he.forEach(h,p=>s.put(j2(p.indexId,this.user,c,r)))))}updateIndexEntries(n,e){const r=new Map;return he.forEach(e,(o,s)=>{const c=r.get(o.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(n,o.collectionGroup)).next(h=>(r.set(o.collectionGroup,h),he.forEach(h,p=>this.En(n,o,p).next(y=>{const w=this.An(s,p);return y.isEqual(w)?he.resolve():this.vn(n,s,p,y,w)}))))})}Rn(n,e,r,o){return kE(n).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,e.key),documentKey:e.key.path.toArray()})}Pn(n,e,r,o){return kE(n).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,e.key),e.key.path.toArray()])}En(n,e,r){const o=kE(n);let s=new vi(Xm);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,e)])},(c,h)=>{s=s.add(new g_(r.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>s)}An(n,e){let r=new vi(Xm);const o=this.mn(e,n);if(null==o)return r;const s=MS(e);if(null!=s){const c=n.data.field(s.fieldPath);if(Wm(c))for(const h of c.arrayValue.values||[])r=r.add(new g_(e.indexId,n.key,this.dn(h),o))}else r=r.add(new g_(e.indexId,n.key,hA,o));return r}vn(n,e,r,o,s){je("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(h,p,y,w,I){const A=h.getIterator(),P=p.getIterator();let U=Fa(A),G=Fa(P);for(;U||G;){let Q=!1,me=!1;if(U&&G){const Ce=y(U,G);Ce<0?me=!0:Ce>0&&(Q=!0)}else null!=U?me=!0:Q=!0;Q?(w(G),G=Fa(P)):me?(I(U),U=Fa(A)):(U=Fa(A),G=Fa(P))}}(o,s,Xm,h=>{c.push(this.Rn(n,e,r,h))},h=>{c.push(this.Pn(n,e,r,h))}),he.waitFor(c)}Tn(n){let e=1;return RE(n).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,s)=>{s.done(),e=o.sequenceNumber+1}).next(()=>e)}createRange(n,e,r){r=r.sort((c,h)=>Xm(c,h)).filter((c,h,p)=>!h||0!==Xm(c,p[h-1]));const o=[];o.push(n);for(const c of r){const h=Xm(c,n),p=Xm(c,e);if(0===h)o[0]=n.Je();else if(h>0&&p<0)o.push(c),o.push(c.Je());else if(p>0)break}o.push(e);const s=[];for(let c=0;c<o.length;c+=2){if(this.bn(o[c],o[c+1]))return[];s.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,hA,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,hA,[]]))}return s}bn(n,e){return Xm(n,e)>0}getMinOffsetFromCollectionGroup(n,e){return this.getFieldIndexes(n,e).next(X2)}getMinOffset(n,e){return he.mapArray(this.cn(e),r=>this.an(n,r).next(o=>o||vt())).next(X2)}}function Q2(i){return Jr(i,"collectionParents")}function kE(i){return Jr(i,"indexEntries")}function fA(i){return Jr(i,"indexConfiguration")}function RE(i){return Jr(i,"indexState")}function X2(i){Pt(0!==i.length);let n=i[0].indexState.offset,e=n.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;RS(o,n)<0&&(n=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new Ss(n.readTime,n.documentKey,e)}const J2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cs{constructor(n,e,r){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(n){return new cs(n,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eU(i,n,e){const r=i.store("mutations"),o=i.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let h=0;const p=r.X({range:c},(w,I,A)=>(h++,A.delete()));s.push(p.next(()=>{Pt(1===h)}));const y=[];for(const w of e.mutations){const I=iE(n,w.key.path,e.batchId);s.push(o.delete(I)),y.push(w.key)}return he.waitFor(s).next(()=>y)}function mA(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw vt();n=i.noDocument}return JSON.stringify(n).length}cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs(41943040,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);class pA{constructor(n,e,r,o){this.userId=n,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(n,e,r,o){Pt(""!==n.uid);const s=n.isAuthenticated()?n.uid:"";return new pA(s,e,r,o)}checkEmpty(n){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jm(n).X({index:"userMutationsIndex",range:r},(o,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(n,e,r,o){const s=yb(n),c=Jm(n);return c.add({}).next(h=>{Pt("number"==typeof h);const p=new aP(h,e,r,o),y=function(A,P,U){const G=U.baseMutations.map(me=>TE(A.fe,me)),Q=U.mutations.map(me=>TE(A.fe,me));return{userId:P,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:G,mutations:Q}}(this.serializer,this.userId,p),w=[];let I=new vi((A,P)=>Xt(A.canonicalString(),P.canonicalString()));for(const A of o){const P=iE(this.userId,A.key.path,h);I=I.add(A.key.path.popLast()),w.push(c.put(y)),w.push(s.put(P,NS))}return I.forEach(A=>{w.push(this.indexManager.addToCollectionParentIndex(n,A))}),n.addOnCommittedListener(()=>{this.Vn[h]=p.keys()}),he.waitFor(w).next(()=>p)})}lookupMutationBatch(n,e){return Jm(n).get(e).next(r=>r?(Pt(r.userId===this.userId),m_(this.serializer,r)):null)}Sn(n,e){return this.Vn[e]?he.resolve(this.Vn[e]):this.lookupMutationBatch(n,e).next(r=>{if(r){const o=r.keys();return this.Vn[e]=o,o}return null})}getNextMutationBatchAfterBatchId(n,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Jm(n).X({index:"userMutationsIndex",range:o},(c,h,p)=>{h.userId===this.userId&&(Pt(h.batchId>=r),s=m_(this.serializer,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(n){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Jm(n).X({index:"userMutationsIndex",range:e,reverse:!0},(o,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(n){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jm(n).j("userMutationsIndex",e).next(r=>r.map(o=>m_(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(n,e){const r=Jv(this.userId,e.path),o=IDBKeyRange.lowerBound(r),s=[];return yb(n).X({range:o},(c,h,p)=>{const[y,w,I]=c,A=Na(w);if(y===this.userId&&e.path.isEqual(A))return Jm(n).get(I).next(P=>{if(!P)throw vt();Pt(P.userId===this.userId),s.push(m_(this.serializer,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(n,e){let r=new vi(Xt);const o=[];return e.forEach(s=>{const c=Jv(this.userId,s.path),h=IDBKeyRange.lowerBound(c),p=yb(n).X({range:h},(y,w,I)=>{const[A,P,U]=y,G=Na(P);A===this.userId&&s.path.isEqual(G)?r=r.add(U):I.done()});o.push(p)}),he.waitFor(o).next(()=>this.Dn(n,r))}getAllMutationBatchesAffectingQuery(n,e){const r=e.path,o=r.length+1,s=Jv(this.userId,r),c=IDBKeyRange.lowerBound(s);let h=new vi(Xt);return yb(n).X({range:c},(p,y,w)=>{const[I,A,P]=p,U=Na(A);I===this.userId&&r.isPrefixOf(U)?U.length===o&&(h=h.add(P)):w.done()}).next(()=>this.Dn(n,h))}Dn(n,e){const r=[],o=[];return e.forEach(s=>{o.push(Jm(n).get(s).next(c=>{if(null===c)throw vt();Pt(c.userId===this.userId),r.push(m_(this.serializer,c))}))}),he.waitFor(o).next(()=>r)}removeMutationBatch(n,e){return eU(n.ht,this.userId,e).next(r=>(n.addOnCommittedListener(()=>{this.Cn(e.batchId)}),he.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(n,o))))}Cn(n){delete this.Vn[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(e=>{if(!e)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return yb(n).X({range:r},(s,c,h)=>{if(s[0]===this.userId){const p=Na(s[1]);o.push(p)}else h.done()}).next(()=>{Pt(0===o.length)})})}containsKey(n,e){return tU(n,this.userId,e)}xn(n){return nU(n).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tU(i,n,e){const r=Jv(n,e.path),o=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return yb(i).X({range:s,Y:!0},(h,p,y)=>{const[w,I,A]=h;w===n&&I===o&&(c=!0),y.done()}).next(()=>c)}function Jm(i){return Jr(i,"mutations")}function yb(i){return Jr(i,"documentMutations")}function nU(i){return Jr(i,"mutationQueues")}class __{constructor(n){this.Nn=n}next(){return this.Nn+=2,this.Nn}static kn(){return new __(0)}static Mn(){return new __(-1)}}class Hj{constructor(n,e){this.referenceDelegate=n,this.serializer=e}allocateTargetId(n){return this.$n(n).next(e=>{const r=new __(e.highestTargetId);return e.highestTargetId=r.next(),this.On(n,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.$n(n).next(e=>Ot.fromTimestamp(new zi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.$n(n).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(n,e,r){return this.$n(n).next(o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.On(n,o)))}addTargetData(n,e){return this.Fn(n,e).next(()=>this.$n(n).next(r=>(r.targetCount+=1,this.Bn(e,r),this.On(n,r))))}updateTargetData(n,e){return this.Fn(n,e)}removeTargetData(n,e){return this.removeMatchingKeysForTargetId(n,e.targetId).next(()=>vb(n).delete(e.targetId)).next(()=>this.$n(n)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.On(n,r)))}removeTargets(n,e,r){let o=0;const s=[];return vb(n).X((c,h)=>{const p=SE(h);p.sequenceNumber<=e&&null===r.get(p.targetId)&&(o++,s.push(this.removeTargetData(n,p)))}).next(()=>he.waitFor(s)).next(()=>o)}forEachTarget(n,e){return vb(n).X((r,o)=>{const s=SE(o);e(s)})}$n(n){return iU(n).get("targetGlobalKey").next(e=>(Pt(null!==e),e))}On(n,e){return iU(n).put("targetGlobalKey",e)}Fn(n,e){return vb(n).put(H2(this.serializer,e))}Bn(n,e){let r=!1;return n.targetId>e.highestTargetId&&(e.highestTargetId=n.targetId,r=!0),n.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=n.sequenceNumber,r=!0),r}getTargetCount(n){return this.$n(n).next(e=>e.targetCount)}getTargetData(n,e){const r=Tc(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return vb(n).X({range:o,index:"queryTargetsIndex"},(c,h,p)=>{const y=SE(h);Zm(e,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(n,e,r){const o=[],s=ep(n);return e.forEach(c=>{const h=Mo(c.path);o.push(s.put({targetId:r,path:h})),o.push(this.referenceDelegate.addReference(n,r,c))}),he.waitFor(o)}removeMatchingKeys(n,e,r){const o=ep(n);return he.forEach(e,s=>{const c=Mo(s.path);return he.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(n,r,s)])})}removeMatchingKeysForTargetId(n,e){const r=ep(n),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(n,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=ep(n);let s=g();return o.X({range:r,Y:!0},(c,h,p)=>{const y=Na(c[1]),w=new dt(y);s=s.add(w)}).next(()=>s)}containsKey(n,e){const r=Mo(e.path),o=IDBKeyRange.bound([r],[AS(r)],!1,!0);let s=0;return ep(n).X({index:"documentTargetsIndex",Y:!0,range:o},([c,h],p,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}le(n,e){return vb(n).get(e).next(r=>r?SE(r):null)}}function vb(i){return Jr(i,"targets")}function iU(i){return Jr(i,"targetGlobal")}function ep(i){return Jr(i,"targetDocuments")}function rU([i,n],[e,r]){const o=Xt(i,e);return 0===o?Xt(n,r):o}class zj{constructor(n){this.Ln=n,this.buffer=new vi(rU),this.qn=0}Un(){return++this.qn}Kn(n){const e=[n,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();rU(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class oU{constructor(n,e,r){this.garbageCollector=n,this.asyncQueue=e,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(n){var e=this;je("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,xe.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(r){Ec(r)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield xc(r)}yield e.Qn(3e5)}))}}class jj{constructor(n,e){this.jn=n,this.params=e}calculateTargetCount(n,e){return this.jn.zn(n).next(r=>Math.floor(e/100*r))}nthSequenceNumber(n,e){if(0===e)return he.resolve(ta.ct);const r=new zj(e);return this.jn.forEachTarget(n,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(n,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(n,e,r){return this.jn.removeTargets(n,e,r)}removeOrphanedDocuments(n,e){return this.jn.removeOrphanedDocuments(n,e)}collect(n,e){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(J2)):this.getCacheSize(n).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J2):this.Hn(n,e))}getCacheSize(n){return this.jn.getCacheSize(n)}Hn(n,e){let r,o,s,c,h,p,y;const w=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,c=Date.now(),this.nthSequenceNumber(n,o))).next(I=>(r=I,h=Date.now(),this.removeTargets(n,r,e))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(n,r))).next(I=>(y=Date.now(),Yx()<=Kr.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${o} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${I} documents in `+(y-p)+`ms\nTotal Duration: ${y-w}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:I})))}}class $j{constructor(n,e){this.db=n,this.garbageCollector=function sU(i,n){return new jj(i,n)}(this,e)}zn(n){const e=this.Jn(n);return this.db.getTargetCache().getTargetCount(n).next(r=>e.next(o=>r+o))}Jn(n){let e=0;return this.Wn(n,r=>{e++}).next(()=>e)}forEachTarget(n,e){return this.db.getTargetCache().forEachTarget(n,e)}Wn(n,e){return this.Yn(n,(r,o)=>e(o))}addReference(n,e,r){return gA(n,r)}removeReference(n,e,r){return gA(n,r)}removeTargets(n,e,r){return this.db.getTargetCache().removeTargets(n,e,r)}markPotentiallyOrphaned(n,e){return gA(n,e)}Xn(n,e){return function(r,o){let s=!1;return nU(r).Z(c=>tU(r,c,o).next(h=>(h&&(s=!0),he.resolve(!h)))).next(()=>s)}(n,e)}removeOrphanedDocuments(n,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let s=0;return this.Yn(n,(c,h)=>{if(h<=e){const p=this.Xn(n,c).next(y=>{if(!y)return s++,r.getEntry(n,c).next(()=>(r.removeEntry(c,Ot.min()),ep(n).delete([0,Mo(c.path)])))});o.push(p)}}).next(()=>he.waitFor(o)).next(()=>r.apply(n)).next(()=>s)}removeTarget(n,e){const r=e.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,r)}updateLimboDocument(n,e){return gA(n,e)}Yn(n,e){const r=ep(n);let o,s=ta.ct;return r.X({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:y})=>{0===c?(s!==ta.ct&&e(new dt(Na(o)),s),s=y,o=p):s=ta.ct}).next(()=>{s!==ta.ct&&e(new dt(Na(o)),s)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function gA(i,n){return ep(i).put((r=i.currentSequenceNumber,{targetId:0,path:Mo(n.path),sequenceNumber:r}));var r}class aU{constructor(){this.changes=new Vd(n=>n.toString(),(n,e)=>n.isEqual(e)),this.changesApplied=!1}addEntry(n){this.assertNotApplied(),this.changes.set(n.key,n)}removeEntry(n,e){this.assertNotApplied(),this.changes.set(n,bi.newInvalidDocument(n).setReadTime(e))}getEntry(n,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?he.resolve(r):this.getFromCache(n,e)}getEntries(n,e){return this.getAllFromCache(n,e)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class Gj{constructor(n){this.serializer=n}setIndexManager(n){this.indexManager=n}addEntry(n,e,r){return y_(n).put(r)}removeEntry(n,e,r){return y_(n).delete(function(o,s){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],cA(s),c[c.length-1]]}(e,r))}updateMetadata(n,e){return this.getMetadata(n).next(r=>(r.byteSize+=e,this.Zn(n,r)))}getEntry(n,e){let r=bi.newInvalidDocument(e);return y_(n).X({index:"documentKeyIndex",range:IDBKeyRange.only(PE(e))},(o,s)=>{r=this.ts(e,s)}).next(()=>r)}es(n,e){let r={size:0,document:bi.newInvalidDocument(e)};return y_(n).X({index:"documentKeyIndex",range:IDBKeyRange.only(PE(e))},(o,s)=>{r={document:this.ts(e,s),size:mA(s)}}).next(()=>r)}getEntries(n,e){let r=As();return this.ns(n,e,(o,s)=>{const c=this.ts(o,s);r=r.insert(o,c)}).next(()=>r)}ss(n,e){let r=As(),o=new oi(dt.comparator);return this.ns(n,e,(s,c)=>{const h=this.ts(s,c);r=r.insert(s,h),o=o.insert(s,mA(c))}).next(()=>({documents:r,rs:o}))}ns(n,e,r){if(e.isEmpty())return he.resolve();let o=new vi(uU);e.forEach(p=>o=o.add(p));const s=IDBKeyRange.bound(PE(o.first()),PE(o.last())),c=o.getIterator();let h=c.getNext();return y_(n).X({index:"documentKeyIndex",range:s},(p,y,w)=>{const I=dt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&uU(h,I)<0;)r(h,null),h=c.getNext();h&&h.isEqual(I)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?w.G(PE(h)):w.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(n,e,r,o){const s=e.path,c=[s.popLast().toArray(),s.lastSegment(),cA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return y_(n).j(IDBKeyRange.bound(c,h,!0)).next(p=>{let y=As();for(const w of p){const I=this.ts(dt.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);I.isFoundDocument()&&(fb(e,I)||o.has(I.key))&&(y=y.insert(I.key,I))}return y})}getAllFromCollectionGroup(n,e,r,o){let s=As();const c=dU(e,r),h=dU(e,Ss.max());return y_(n).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,y,w)=>{const I=this.ts(dt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(I.key,I),s.size===o&&w.done()}).next(()=>s)}newChangeBuffer(n){return new Wj(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(e=>e.byteSize)}getMetadata(n){return cU(n).get("remoteDocumentGlobalKey").next(e=>(Pt(!!e),e))}Zn(n,e){return cU(n).put("remoteDocumentGlobalKey",e)}ts(n,e){if(e){const r=function kj(i,n){let e;if(n.document)e=P2(i.fe,n.document,!!n.hasCommittedMutations);else if(n.noDocument){const r=dt.fromSegments(n.noDocument.path),o=f_(n.noDocument.readTime);e=bi.newNoDocument(r,o),n.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!n.unknownDocument)return vt();{const r=dt.fromSegments(n.unknownDocument.path),o=f_(n.unknownDocument.version);e=bi.newUnknownDocument(r,o)}}return n.readTime&&e.setReadTime(function(r){const o=new zi(r[0],r[1]);return Ot.fromTimestamp(o)}(n.readTime)),e}(this.serializer,e);if(!r.isNoDocument()||!r.version.isEqual(Ot.min()))return r}return bi.newInvalidDocument(n)}}function lU(i){return new Gj(i)}class Wj extends aU{constructor(n,e){super(),this.os=n,this.trackRemovals=e,this.us=new Vd(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(n){const e=[];let r=0,o=new vi((s,c)=>Xt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.us.get(s);if(e.push(this.os.removeEntry(n,s,h.readTime)),c.isValidDocument()){const p=V2(this.os.serializer,c);o=o.add(s.path.popLast());const y=mA(p);r+=y-h.size,e.push(this.os.addEntry(n,s,p))}else if(r-=h.size,this.trackRemovals){const p=V2(this.os.serializer,c.convertToNoDocument(Ot.min()));e.push(this.os.addEntry(n,s,p))}}),o.forEach(s=>{e.push(this.os.indexManager.addToCollectionParentIndex(n,s))}),e.push(this.os.updateMetadata(n,r)),he.waitFor(e)}getFromCache(n,e){return this.os.es(n,e).next(r=>(this.us.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(n,e){return this.os.ss(n,e).next(({documents:r,rs:o})=>(o.forEach((s,c)=>{this.us.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function cU(i){return Jr(i,"remoteDocumentGlobal")}function y_(i){return Jr(i,"remoteDocumentsV14")}function PE(i){const n=i.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],n[n.length-1]]}function dU(i,n){const e=n.documentKey.path.toArray();return[i,cA(n.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function uU(i,n){const e=i.path.toArray(),r=n.path.toArray();let o=0;for(let s=0;s<e.length-2&&s<r.length-2;++s)if(o=Xt(e[s],r[s]),o)return o;return o=Xt(e.length,r.length),o||(o=Xt(e[e.length-2],r[r.length-2]),o||Xt(e[e.length-1],r[r.length-1]))}class qj{constructor(n,e){this.overlayedDocument=n,this.mutatedFields=e}}class hU{constructor(n,e,r,o){this.remoteDocumentCache=n,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(n,e){let r=null;return this.documentOverlayCache.getOverlay(n,e).next(o=>(r=o,this.remoteDocumentCache.getEntry(n,e))).next(o=>(null!==r&&wE(r.mutation,o,po.empty(),zi.now()),o))}getDocuments(n,e){return this.remoteDocumentCache.getEntries(n,e).next(r=>this.getLocalViewOfDocuments(n,r,g()).next(()=>r))}getLocalViewOfDocuments(n,e,r=g()){const o=a();return this.populateOverlays(n,o,e).next(()=>this.computeViews(n,e,o,r).next(s=>{let c=u_();return s.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(n,e){const r=a();return this.populateOverlays(n,r,e).next(()=>this.computeViews(n,e,r,g()))}populateOverlays(n,e,r){const o=[];return r.forEach(s=>{e.has(s)||o.push(s)}),this.documentOverlayCache.getOverlays(n,o).next(s=>{s.forEach((c,h)=>{e.set(c,h)})})}computeViews(n,e,r,o){let s=As();const c=u(),h=u();return e.forEach((p,y)=>{const w=r.get(y.key);o.has(y.key)&&(void 0===w||w.mutation instanceof Mh)?s=s.insert(y.key,y):void 0!==w?(c.set(y.key,w.mutation.getFieldMask()),wE(w.mutation,y,w.mutation.getFieldMask(),zi.now())):c.set(y.key,po.empty())}),this.recalculateAndSaveOverlays(n,s).next(p=>(p.forEach((y,w)=>c.set(y,w)),e.forEach((y,w)=>{var I;return h.set(y,new qj(w,null!==(I=c.get(y))&&void 0!==I?I:null))}),h))}recalculateAndSaveOverlays(n,e){const r=u();let o=new oi((c,h)=>c-h),s=g();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(n,e).next(c=>{for(const h of c)h.keys().forEach(p=>{const y=e.get(p);if(null===y)return;let w=r.get(p)||po.empty();w=h.applyToLocalView(y,w),r.set(p,w);const I=(o.get(h.batchId)||g()).add(p);o=o.insert(h.batchId,I)})}).next(()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,w=p.value,I=l();w.forEach(A=>{if(!s.has(A)){const P=f2(e.get(A),r.get(A));null!==P&&I.set(A,P),s=s.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(n,y,I))}return he.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(n,e){return this.remoteDocumentCache.getEntries(n,e).next(r=>this.recalculateAndSaveOverlays(n,r))}getDocumentsMatchingQuery(n,e,r){return dt.isDocumentKey((o=e).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(n,e.path):tA(e)?this.getDocumentsMatchingCollectionGroupQuery(n,e,r):this.getDocumentsMatchingCollectionQuery(n,e,r);var o}getNextDocuments(n,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(n,e,r,o).next(s=>{const c=o-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(n,e,r.largestBatchId,o-s.size):he.resolve(a());let h=-1,p=s;return c.next(y=>he.forEach(y,(w,I)=>(h<I.largestBatchId&&(h=I.largestBatchId),s.get(w)?he.resolve():this.remoteDocumentCache.getEntry(n,w).next(A=>{p=p.insert(w,A)}))).next(()=>this.populateOverlays(n,y,s)).next(()=>this.computeViews(n,p,y,g())).next(w=>({batchId:h,changes:iP(w)})))})}getDocumentsMatchingDocumentQuery(n,e){return this.getDocument(n,new dt(e)).next(r=>{let o=u_();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(n,e,r){const o=e.collectionGroup;let s=u_();return this.indexManager.getCollectionParents(n,o).next(c=>he.forEach(c,h=>{const p=(y=e,w=h.child(o),new Sc(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(n,p,r).next(y=>{y.forEach((w,I)=>{s=s.insert(w,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(n,e,r){let o;return this.documentOverlayCache.getOverlaysForCollection(n,e.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(n,e,r,o))).next(s=>{o.forEach((h,p)=>{const y=p.getKey();null===s.get(y)&&(s=s.insert(y,bi.newInvalidDocument(y)))});let c=u_();return s.forEach((h,p)=>{const y=o.get(h);void 0!==y&&wE(y.mutation,p,po.empty(),zi.now()),fb(e,p)&&(c=c.insert(h,p))}),c})}}class Kj{constructor(n){this.serializer=n,this.cs=new Map,this.hs=new Map}getBundleMetadata(n,e){return he.resolve(this.cs.get(e))}saveBundleMetadata(n,e){var r;return this.cs.set(e.id,{id:(r=e).id,version:r.version,createTime:Vr(r.createTime)}),he.resolve()}getNamedQuery(n,e){return he.resolve(this.hs.get(e))}saveNamedQuery(n,e){return this.hs.set(e.name,{name:(r=e).name,query:_P(r.bundledQuery),readTime:Vr(r.readTime)}),he.resolve();var r}}class Yj{constructor(){this.overlays=new oi(dt.comparator),this.ls=new Map}getOverlay(n,e){return he.resolve(this.overlays.get(e))}getOverlays(n,e){const r=a();return he.forEach(e,o=>this.getOverlay(n,o).next(s=>{null!==s&&r.set(o,s)})).next(()=>r)}saveOverlays(n,e,r){return r.forEach((o,s)=>{this.we(n,e,s)}),he.resolve()}removeOverlaysForBatchId(n,e,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),he.resolve()}getOverlaysForCollection(n,e,r){const o=a(),s=e.length+1,c=new dt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&o.set(p.getKey(),p)}return he.resolve(o)}getOverlaysForCollectionGroup(n,e,r,o){let s=new oi((y,w)=>y-w);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>r){let w=s.get(y.largestBatchId);null===w&&(w=a(),s=s.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const h=a(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,w)=>h.set(y,w)),!(h.size()>=o)););return he.resolve(h)}we(n,e,r){const o=this.overlays.get(r.key);if(null!==o){const c=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new cP(e,r));let s=this.ls.get(e);void 0===s&&(s=g(),this.ls.set(e,s)),this.ls.set(e,s.add(r.key))}}class CP{constructor(){this.fs=new vi(Ro.ds),this.ws=new vi(Ro._s)}isEmpty(){return this.fs.isEmpty()}addReference(n,e){const r=new Ro(n,e);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(n,e){n.forEach(r=>this.addReference(r,e))}removeReference(n,e){this.ys(new Ro(n,e))}ps(n,e){n.forEach(r=>this.removeReference(r,e))}Is(n){const e=new dt(new kn([])),r=new Ro(e,n),o=new Ro(e,n+1),s=[];return this.ws.forEachInRange([r,o],c=>{this.ys(c),s.push(c.key)}),s}Ts(){this.fs.forEach(n=>this.ys(n))}ys(n){this.fs=this.fs.delete(n),this.ws=this.ws.delete(n)}Es(n){const e=new dt(new kn([])),r=new Ro(e,n),o=new Ro(e,n+1);let s=g();return this.ws.forEachInRange([r,o],c=>{s=s.add(c.key)}),s}containsKey(n){const e=new Ro(n,0),r=this.fs.firstAfterOrEqual(e);return null!==r&&n.isEqual(r.key)}}class Ro{constructor(n,e){this.key=n,this.As=e}static ds(n,e){return dt.comparator(n.key,e.key)||Xt(n.As,e.As)}static _s(n,e){return Xt(n.As,e.As)||dt.comparator(n.key,e.key)}}class Zj{constructor(n,e){this.indexManager=n,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new vi(Ro.ds)}checkEmpty(n){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(n,e,r,o){const s=this.vs;this.vs++;const c=new aP(s,e,r,o);this.mutationQueue.push(c);for(const h of o)this.Rs=this.Rs.add(new Ro(h.key,s)),this.indexManager.addToCollectionParentIndex(n,h.key.path.popLast());return he.resolve(c)}lookupMutationBatch(n,e){return he.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(n,e){const o=this.bs(e+1),s=o<0?0:o;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(n){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(n,e){const r=new Ro(e,0),o=new Ro(e,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,o],c=>{const h=this.Ps(c.As);s.push(h)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(n,e){let r=new vi(Xt);return e.forEach(o=>{const s=new Ro(o,0),c=new Ro(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,c],h=>{r=r.add(h.As)})}),he.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(n,e){const r=e.path,o=r.length+1;let s=r;dt.isDocumentKey(s)||(s=s.child(""));const c=new Ro(new dt(s),0);let h=new vi(Xt);return this.Rs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(h=h.add(p.As)),!0)},c),he.resolve(this.Vs(h))}Vs(n){const e=[];return n.forEach(r=>{const o=this.Ps(r);null!==o&&e.push(o)}),e}removeMutationBatch(n,e){Pt(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return he.forEach(e.mutations,o=>{const s=new Ro(o.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(n,o.key)}).next(()=>{this.Rs=r})}Cn(n){}containsKey(n,e){const r=new Ro(e,0),o=this.Rs.firstAfterOrEqual(r);return he.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(n){return he.resolve()}Ss(n,e){return this.bs(n)}bs(n){return 0===this.mutationQueue.length?0:n-this.mutationQueue[0].batchId}Ps(n){const e=this.bs(n);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Qj{constructor(n){this.Ds=n,this.docs=new oi(dt.comparator),this.size=0}setIndexManager(n){this.indexManager=n}addEntry(n,e){const r=e.key,o=this.docs.get(r),s=o?o.size:0,c=this.Ds(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(n,r.path.popLast())}removeEntry(n){const e=this.docs.get(n);e&&(this.docs=this.docs.remove(n),this.size-=e.size)}getEntry(n,e){const r=this.docs.get(e);return he.resolve(r?r.document.mutableCopy():bi.newInvalidDocument(e))}getEntries(n,e){let r=As();return e.forEach(o=>{const s=this.docs.get(o);r=r.insert(o,s?s.document.mutableCopy():bi.newInvalidDocument(o))}),he.resolve(r)}getDocumentsMatchingQuery(n,e,r,o){let s=As();const c=e.path,h=new dt(c.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||RS(i_(w),r)<=0||(o.has(w.key)||fb(e,w))&&(s=s.insert(w.key,w.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(n,e,r,o){vt()}Cs(n,e){return he.forEach(this.docs,r=>e(r))}newChangeBuffer(n){return new Xj(this)}getSize(n){return he.resolve(this.size)}}class Xj extends aU{constructor(n){super(),this.os=n}applyChanges(n){const e=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?e.push(this.os.addEntry(n,o)):this.os.removeEntry(r)}),he.waitFor(e)}getFromCache(n,e){return this.os.getEntry(n,e)}getAllFromCache(n,e){return this.os.getEntries(n,e)}}class Jj{constructor(n){this.persistence=n,this.xs=new Vd(e=>Tc(e),Zm),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Ns=0,this.ks=new CP,this.targetCount=0,this.Ms=__.kn()}forEachTarget(n,e){return this.xs.forEach((r,o)=>e(o)),he.resolve()}getLastRemoteSnapshotVersion(n){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return he.resolve(this.Ns)}allocateTargetId(n){return this.highestTargetId=this.Ms.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(n,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.Ns&&(this.Ns=e),he.resolve()}Fn(n){this.xs.set(n.target,n);const e=n.targetId;e>this.highestTargetId&&(this.Ms=new __(e),this.highestTargetId=e),n.sequenceNumber>this.Ns&&(this.Ns=n.sequenceNumber)}addTargetData(n,e){return this.Fn(e),this.targetCount+=1,he.resolve()}updateTargetData(n,e){return this.Fn(e),he.resolve()}removeTargetData(n,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,he.resolve()}removeTargets(n,e,r){let o=0;const s=[];return this.xs.forEach((c,h)=>{h.sequenceNumber<=e&&null===r.get(h.targetId)&&(this.xs.delete(c),s.push(this.removeMatchingKeysForTargetId(n,h.targetId)),o++)}),he.waitFor(s).next(()=>o)}getTargetCount(n){return he.resolve(this.targetCount)}getTargetData(n,e){const r=this.xs.get(e)||null;return he.resolve(r)}addMatchingKeys(n,e,r){return this.ks.gs(e,r),he.resolve()}removeMatchingKeys(n,e,r){this.ks.ps(e,r);const o=this.persistence.referenceDelegate,s=[];return o&&e.forEach(c=>{s.push(o.markPotentiallyOrphaned(n,c))}),he.waitFor(s)}removeMatchingKeysForTargetId(n,e){return this.ks.Is(e),he.resolve()}getMatchingKeysForTargetId(n,e){const r=this.ks.Es(e);return he.resolve(r)}containsKey(n,e){return he.resolve(this.ks.containsKey(e))}}class DP{constructor(n,e){this.$s={},this.overlays={},this.Os=new ta(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=n(this),this.Bs=new Jj(this),this.indexManager=new Bj,this.remoteDocumentCache=new Qj(r=>this.referenceDelegate.Ls(r)),this.serializer=new B2(e),this.qs=new Kj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(n){return this.indexManager}getDocumentOverlayCache(n){let e=this.overlays[n.toKey()];return e||(e=new Yj,this.overlays[n.toKey()]=e),e}getMutationQueue(n,e){let r=this.$s[n.toKey()];return r||(r=new Zj(e,this.referenceDelegate),this.$s[n.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(n,e,r){je("MemoryPersistence","Starting transaction:",n);const o=new e5(this.Os.next());return this.referenceDelegate.Us(),r(o).next(s=>this.referenceDelegate.Ks(o).next(()=>s)).toPromise().then(s=>(o.raiseOnCommittedEvent(),s))}Gs(n,e){return he.or(Object.values(this.$s).map(r=>()=>r.containsKey(n,e)))}}class e5 extends LR{constructor(n){super(),this.currentSequenceNumber=n}}class _A{constructor(n){this.persistence=n,this.Qs=new CP,this.js=null}static zs(n){return new _A(n)}get Ws(){if(this.js)return this.js;throw vt()}addReference(n,e,r){return this.Qs.addReference(r,e),this.Ws.delete(r.toString()),he.resolve()}removeReference(n,e,r){return this.Qs.removeReference(r,e),this.Ws.add(r.toString()),he.resolve()}markPotentiallyOrphaned(n,e){return this.Ws.add(e.toString()),he.resolve()}removeTarget(n,e){this.Qs.Is(e.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(n,e.targetId).next(o=>{o.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(n,e))}Us(){this.js=new Set}Ks(n){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ws,r=>{const o=dt.fromPath(r);return this.Hs(n,o).next(s=>{s||e.removeEntry(o,Ot.min())})}).next(()=>(this.js=null,e.apply(n)))}updateLimboDocument(n,e){return this.Hs(n,e).next(r=>{r?this.Ws.delete(e.toString()):this.Ws.add(e.toString())})}Ls(n){return 0}Hs(n,e){return he.or([()=>he.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(n,e),()=>this.persistence.Gs(n,e)])}}class t5{constructor(n){this.serializer=n}O(n,e,r,o){const s=new Zv("createOrUpgrade",e);var h;r<1&&o>=1&&(n.createObjectStore("owner"),(h=n).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nE,{unique:!0}),h.createObjectStore("documentMutations"),fU(n),function(h){h.createObjectStore("remoteDocuments")}(n));let c=he.resolve();return r<3&&o>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(n),fU(n)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").j().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nE,{unique:!0});const w=p.store("mutations"),I=y.map(A=>w.put(A));return he.waitFor(I)})}(n,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(n)})),r<5&&o>=5&&(c=c.next(()=>this.Ys(s))),r<6&&o>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(n),this.Xs(s)))),r<7&&o>=7&&(c=c.next(()=>this.Zs(s))),r<8&&o>=8&&(c=c.next(()=>this.ti(n,s))),r<9&&o>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(n)})),r<10&&o>=10&&(c=c.next(()=>this.ei(s))),r<11&&o>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(n),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(n)})),r<12&&o>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:o2});p.createIndex("collectionPathOverlayIndex",VS,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",$R,{unique:!1})}(n)})),r<13&&o>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:FS});p.createIndex("documentKeyIndex",LS),p.createIndex("collectionGroupIndex",HR)}(n)).next(()=>this.ni(n,s)).next(()=>n.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>this.si(n,s))),r<15&&o>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:BS}).createIndex("sequenceNumberIndex",oE,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:sE}).createIndex("documentKeyIndex",jR,{unique:!1})}(n))),c}Xs(n){let e=0;return n.store("remoteDocuments").X((r,o)=>{e+=mA(o)}).next(()=>{const r={byteSize:e};return n.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(n){const e=n.store("mutationQueues"),r=n.store("mutations");return e.j().next(o=>he.forEach(o,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(h=>he.forEach(h,p=>{Pt(p.userId===s.userId);const y=m_(this.serializer,p);return eU(n,s.userId,y).next(()=>{})}))}))}Zs(n){const e=n.store("targetDocuments"),r=n.store("remoteDocuments");return n.store("targetGlobal").get("targetGlobalKey").next(o=>{const s=[];return r.X((c,h)=>{const p=new kn(c),y=[0,Mo(p)];s.push(e.get(y).next(w=>w?he.resolve():e.put({targetId:0,path:Mo(p),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>he.waitFor(s))})}ti(n,e){n.createObjectStore("collectionParents",{keyPath:Nd});const r=e.store("collectionParents"),o=new EP,s=c=>{if(o.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:Mo(p)})}};return e.store("remoteDocuments").X({Y:!0},(c,h)=>{const p=new kn(c);return s(p.popLast())}).next(()=>e.store("documentMutations").X({Y:!0},([c,h,p],y)=>{const w=Na(h);return s(w.popLast())}))}ei(n){const e=n.store("targets");return e.X((r,o)=>{const s=SE(o),c=H2(this.serializer,s);return e.put(c)})}ni(n,e){const r=e.store("remoteDocuments"),o=[];return r.X((s,c)=>{const h=e.store("remoteDocumentsV14"),p=(y=c,y.document?new dt(kn.fromString(y.document.name).popFirst(5)):y.noDocument?dt.fromSegments(y.noDocument.path):y.unknownDocument?dt.fromSegments(y.unknownDocument.path):vt()).path.toArray();var y;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(h.put(w))}).next(()=>he.waitFor(o))}si(n,e){const r=e.store("mutations"),o=lU(this.serializer),s=new DP(_A.zs,this.serializer.fe);return r.j().next(c=>{const h=new Map;return c.forEach(p=>{var y;let w=null!==(y=h.get(p.userId))&&void 0!==y?y:g();m_(this.serializer,p).keys().forEach(I=>w=w.add(I)),h.set(p.userId,w)}),he.forEach(h,(p,y)=>{const w=new Ir(y),I=dA.de(this.serializer,w),A=s.getIndexManager(w),P=pA.de(w,this.serializer,A,s.referenceDelegate);return new hU(o,P,I,A).recalculateAndSaveOverlaysForDocumentKeys(new eb(e,ta.ct),p).next()})})}}function fU(i){i.createObjectStore("targetDocuments",{keyPath:zR}).createIndex("documentTargetsIndex",rE,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",US,{unique:!0}),i.createObjectStore("targetGlobal")}const IP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class TP{constructor(n,e,r,o,s,c,h,p,y,w,I=15){if(this.allowTabSynchronization=n,this.persistenceKey=e,this.clientId=r,this.ii=s,this.window=c,this.document=h,this.ri=y,this.oi=w,this.ui=I,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!TP.D())throw new Be(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $j(this,o),this.di=e+"main",this.serializer=new B2(p),this.wi=new El(this.di,this.ui,new t5(this.serializer)),this.Bs=new Hj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lU(this.serializer),this.qs=new Rj,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===w&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,IP);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.Bs.getHighestSequenceNumber(n))}).then(n=>{this.Os=new ta(n,this.ri)}).then(()=>{this.Fs=!0}).catch(n=>(this.wi&&this.wi.close(),Promise.reject(n)))}Ii(n){var e=this;return this.fi=function(){var r=(0,xe.Z)(function*(o){if(e.started)return n(o)});return function(o){return r.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.wi.B(function(){var e=(0,xe.Z)(function*(r){null===r.newVersion&&(yield n())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(n){var e=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.ii.enqueueAndForget((0,xe.Z)(function*(){e.started&&(yield e.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>vA(n).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(n).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(n)).next(e=>this.isPrimary&&!e?this.Ai(n).next(()=>!1):!!e&&this.vi(n).next(()=>!0))).catch(n=>{if(Ec(n))return je("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.ii.enqueueRetryable(()=>this.fi(n)),this.isPrimary=n})}Ti(n){return OE(n).get("owner").next(e=>he.resolve(this.Ri(e)))}Pi(n){return vA(n).delete(this.clientId)}bi(){var n=this;return(0,xe.Z)(function*(){if(n.isPrimary&&!n.Vi(n.li,18e5)){n.li=Date.now();const e=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Jr(r,"clientMetadata");return o.j().next(s=>{const c=n.Si(s,18e5),h=s.filter(p=>-1===c.indexOf(p));return he.forEach(h,p=>o.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(n._i)for(const r of e)n._i.removeItem(n.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(n){return!!n&&n.ownerId===this.clientId}Ei(n){return this.oi?he.resolve(!0):OE(n).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,IP);return!1}}return!(!this.networkEnabled||!this.inForeground)||vA(n).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(e=>(this.isPrimary!==e&&je("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var n=this;return(0,xe.Z)(function*(){n.Fs=!1,n.xi(),n.hi&&(n.hi.cancel(),n.hi=null),n.Ni(),n.ki(),yield n.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new eb(e,ta.ct);return n.Ai(r).next(()=>n.Pi(r))}),n.wi.close(),n.Mi()})()}Si(n,e){return n.filter(r=>this.Vi(r.updateTimeMs,e)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",n=>vA(n).j().next(e=>this.Si(e,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(n,e){return pA.de(n,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(n){return new Vj(n,this.serializer.fe.databaseId)}getDocumentOverlayCache(n){return dA.de(this.serializer,n)}getBundleCache(){return this.qs}runTransaction(n,e,r){je("IndexedDbPersistence","Starting transaction:",n);const o="readonly"===e?"readonly":"readwrite",s=15===(c=this.ui)?s2:14===c?aE:13===c?zS:12===c?GR:11===c?HS:void vt();var c;let h;return this.wi.runTransaction(n,o,s,p=>(h=new eb(p,this.Os?this.Os.next():ta.ct),"readwrite-primary"===e?this.Ti(h).next(y=>!!y||this.Ei(h)).next(y=>{if(!y)throw fr(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Be(ge.FAILED_PRECONDITION,FR);return r(h)}).next(y=>this.vi(h).next(()=>y)):this.Oi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Oi(n){return OE(n).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Be(ge.FAILED_PRECONDITION,IP)})}vi(n){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return OE(n).put("owner",e)}static D(){return El.D()}Ai(n){const e=OE(n);return e.get("owner").next(r=>this.Ri(r)?(je("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):he.resolve())}Vi(n,e){const r=Date.now();return!(n<r-e||n>r&&(fr(`Detected an update time that is in the future: ${n} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,V.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(n){var e;try{const r=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(n)));return je("IndexedDbPersistence",`Client '${n}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(n){fr("Failed to set zombie client id.",n)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function OE(i){return Jr(i,"owner")}function vA(i){return Jr(i,"clientMetadata")}function SP(i,n){let e=i.projectId;return i.isDefaultDatabase||(e+="."+i.database),"firestore/"+n+"/"+e+"/"}class AP{constructor(n,e,r,o){this.targetId=n,this.fromCache=e,this.Fi=r,this.Bi=o}static Li(n,e){let r=g(),o=g();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}return new AP(n,e.fromCache,r,o)}}class mU{constructor(){this.qi=!1}initialize(n,e){this.Ui=n,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(n,e,r,o){return this.Ki(n,e).next(s=>s||this.Gi(n,e,o,r)).next(s=>s||this.Qi(n,e))}Ki(n,e){if(JR(e))return he.resolve(null);let r=ls(e);return this.indexManager.getIndexType(n,r).next(o=>0===o?null:(null!==e.limit&&1===o&&(e=ub(e,null,"F"),r=ls(e)),this.indexManager.getDocumentsMatchingTarget(n,r).next(s=>{const c=g(...s);return this.Ui.getDocuments(n,c).next(h=>this.indexManager.getMinOffset(n,r).next(p=>{const y=this.ji(e,h);return this.zi(e,y,c,p.readTime)?this.Ki(n,ub(e,null,"F")):this.Wi(n,y,e,p)}))})))}Gi(n,e,r,o){return JR(e)||o.isEqual(Ot.min())?this.Qi(n,e):this.Ui.getDocuments(n,r).next(s=>{const c=this.ji(e,s);return this.zi(e,c,r,o)?this.Qi(n,e):(Yx()<=Kr.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),iA(e)),this.Wi(n,c,e,kS(o,-1)))})}ji(n,e){let r=new vi(rA(n));return e.forEach((o,s)=>{fb(n,s)&&(r=r.add(s))}),r}zi(n,e,r,o){if(null===n.limit)return!1;if(r.size!==e.size)return!0;const s="F"===n.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)}Qi(n,e){return Yx()<=Kr.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",iA(e)),this.Ui.getDocumentsMatchingQuery(n,e,Ss.min())}Wi(n,e,r,o){return this.Ui.getDocumentsMatchingQuery(n,r,o).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class n5{constructor(n,e,r,o){this.persistence=n,this.Hi=e,this.serializer=o,this.Ji=new oi(Xt),this.Yi=new Vd(s=>Tc(s),Zm),this.Xi=new Map,this.Zi=n.getRemoteDocumentCache(),this.Bs=n.getTargetCache(),this.qs=n.getBundleCache(),this.tr(r)}tr(n){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(n),this.indexManager=this.persistence.getIndexManager(n),this.mutationQueue=this.persistence.getMutationQueue(n,this.indexManager),this.localDocuments=new hU(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>n.collect(e,this.Ji))}}function pU(i,n,e,r){return new n5(i,n,e,r)}function gU(i,n){return MP.apply(this,arguments)}function MP(){return MP=(0,xe.Z)(function*(i,n){const e=ht(i);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next(s=>(o=s,e.tr(n),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const c=[],h=[];let p=g();for(const y of o){c.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of s){h.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return e.localDocuments.getDocuments(r,p).next(y=>({er:y,removedBatchIds:c,addedBatchIds:h}))})})}),MP.apply(this,arguments)}function _U(i){const n=ht(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",e=>n.Bs.getLastRemoteSnapshotVersion(e))}function yU(i,n,e){let r=g(),o=g();return e.forEach(s=>r=r.add(s)),n.getEntries(i,r).next(s=>{let c=As();return e.forEach((h,p)=>{const y=s.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Ot.min())?(n.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(n.addEntry(p),c=c.insert(h,p)):je("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{nr:c,sr:o}})}function s5(i,n){const e=ht(i);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===n&&(n=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,n)))}function bb(i,n){const e=ht(i);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return e.Bs.getTargetData(r,n).next(s=>s?(o=s,he.resolve(o)):e.Bs.allocateTargetId(r).next(c=>(o=new kh(n,c,"TargetPurposeListen",r.currentSequenceNumber),e.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=e.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ji=e.Ji.insert(r.targetId,r),e.Yi.set(n,r.targetId)),r})}function wb(i,n,e){return kP.apply(this,arguments)}function kP(){return kP=(0,xe.Z)(function*(i,n,e){const r=ht(i),o=r.Ji.get(n),s=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ec(c))throw c;je("LocalStore",`Failed to update sequence numbers for target ${n}: ${c}`)}r.Ji=r.Ji.remove(n),r.Yi.delete(o.target)}),kP.apply(this,arguments)}function bA(i,n,e){const r=ht(i);let o=Ot.min(),s=g();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,y){const w=ht(h),I=w.Yi.get(y);return void 0!==I?he.resolve(w.Ji.get(I)):w.Bs.getTargetData(p,y)}(r,c,ls(n)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,n,e?o:Ot.min(),e?s:g())).next(h=>(wU(r,tP(n),h),{documents:h,ir:s})))}function vU(i,n){const e=ht(i),r=ht(e.Bs),o=e.Ji.get(n);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",s=>r.le(s,n).next(c=>c?c.target:null))}function bU(i,n){const e=ht(i),r=e.Xi.get(n)||Ot.min();return e.persistence.runTransaction("Get new document changes","readonly",o=>e.Zi.getAllFromCollectionGroup(o,n,kS(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(wU(e,n,o),o))}function wU(i,n,e){let r=i.Xi.get(n)||Ot.min();e.forEach((o,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),i.Xi.set(n,r)}function RP(){return RP=(0,xe.Z)(function*(i,n,e,r){const o=ht(i);let s=g(),c=As();for(const y of e){const w=n.rr(y.metadata.name);y.document&&(s=s.add(w));const I=n.ur(y);I.setReadTime(n.cr(y.metadata.readTime)),c=c.insert(w,I)}const h=o.Zi.newChangeBuffer({trackRemovals:!0}),p=yield bb(o,(y=r,ls(Th(kn.fromString(`__bundle__/docs/${y}`)))));var y;return o.persistence.runTransaction("Apply bundle documents","readwrite",y=>yU(y,h,c).next(w=>(h.apply(y),w)).next(w=>o.Bs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>o.Bs.addMatchingKeys(y,s,p.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(y,w.nr,w.sr)).next(()=>w.nr)))}),RP.apply(this,arguments)}function l5(i,n){return PP.apply(this,arguments)}function PP(){return PP=(0,xe.Z)(function*(i,n,e=g()){const r=yield bb(i,ls(_P(n.bundledQuery))),o=ht(i);return o.persistence.runTransaction("Save named query","readwrite",s=>{const c=Vr(n.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.qs.saveNamedQuery(s,n);const h=r.withResumeToken(Br.EMPTY_BYTE_STRING,c);return o.Ji=o.Ji.insert(h.targetId,h),o.Bs.updateTargetData(s,h).next(()=>o.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>o.Bs.addMatchingKeys(s,e,r.targetId)).next(()=>o.qs.saveNamedQuery(s,n))})}),PP.apply(this,arguments)}function xU(i,n){return`firestore_clients_${i}_${n}`}function EU(i,n,e){let r=`firestore_mutations_${i}_${e}`;return n.isAuthenticated()&&(r+=`_${n.uid}`),r}function OP(i,n){return`firestore_targets_${i}_${n}`}class wA{constructor(n,e,r,o){this.user=n,this.batchId=e,this.state=r,this.error=o}static ar(n,e,r){const o=JSON.parse(r);let s,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(s=new Be(o.error.code,o.error.message))),c?new wA(n,e,o.state,s):(fr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}hr(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class NE{constructor(n,e,r){this.targetId=n,this.state=e,this.error=r}static ar(n,e){const r=JSON.parse(e);let o,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(o=new Be(r.error.code,r.error.message))),s?new NE(n,r.state,o):(fr("SharedClientState",`Failed to parse target state for ID '${n}': ${e}`),null)}hr(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class xA{constructor(n,e){this.clientId=n,this.activeTargetIds=e}static ar(n,e){const r=JSON.parse(e);let o="object"==typeof r&&r.activeTargetIds instanceof Array,s=E();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=Qv(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return o?new xA(n,s):(fr("SharedClientState",`Failed to parse client data for instance '${n}': ${e}`),null)}}class NP{constructor(n,e){this.clientId=n,this.onlineState=e}static ar(n){const e=JSON.parse(n);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new NP(e.clientId,e.onlineState):(fr("SharedClientState",`Failed to parse online state: ${n}`),null)}}class FP{constructor(){this.activeTargetIds=E()}lr(n){this.activeTargetIds=this.activeTargetIds.add(n)}dr(n){this.activeTargetIds=this.activeTargetIds.delete(n)}hr(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class LP{constructor(n,e,r,o,s){this.window=n,this.ii=e,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new oi(Xt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=xU(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new FP),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,xe.Z)(function*(){const e=yield n.syncEngine.$i();for(const o of e){if(o===n.wr)continue;const s=n.getItem(xU(n.persistenceKey,o));if(s){const c=xA.ar(o,s);c&&(n.gr=n.gr.insert(c.clientId,c))}}n.Pr();const r=n.storage.getItem(n.vr);if(r){const o=n.br(r);o&&n.Vr(o)}for(const o of n.yr)n.mr(o);n.yr=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Ir,JSON.stringify(n))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(n){let e=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(n)&&(e=!0)}),e}addPendingMutation(n){this.Dr(n,"pending")}updateMutationState(n,e,r){this.Dr(n,e,r),this.Cr(n)}addLocalQueryTarget(n){let e="not-current";if(this.isActiveQueryTarget(n)){const r=this.storage.getItem(OP(this.persistenceKey,n));if(r){const o=NE.ar(n,r);o&&(e=o.state)}}return this.Nr.lr(n),this.Pr(),e}removeLocalQueryTarget(n){this.Nr.dr(n),this.Pr()}isLocalQueryTarget(n){return this.Nr.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(OP(this.persistenceKey,n))}updateQueryState(n,e,r){this.kr(n,e,r)}handleUserChange(n,e,r){e.forEach(o=>{this.Cr(o)}),this.currentUser=n,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(n){this.Mr(n)}notifyBundleLoaded(n){this.$r(n)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(n){const e=this.storage.getItem(n);return je("SharedClientState","READ",n,e),e}setItem(n,e){je("SharedClientState","SET",n,e),this.storage.setItem(n,e)}removeItem(n){je("SharedClientState","REMOVE",n),this.storage.removeItem(n)}mr(n){var e=this;const r=n;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,xe.Z)(function*(){if(e.started){if(null!==r.key)if(e.Tr.test(r.key)){if(null==r.newValue){const o=e.Or(r.key);return e.Fr(o,null)}{const o=e.Br(r.key,r.newValue);if(o)return e.Fr(o.clientId,o)}}else if(e.Er.test(r.key)){if(null!==r.newValue){const o=e.Lr(r.key,r.newValue);if(o)return e.qr(o)}}else if(e.Ar.test(r.key)){if(null!==r.newValue){const o=e.Ur(r.key,r.newValue);if(o)return e.Kr(o)}}else if(r.key===e.vr){if(null!==r.newValue){const o=e.br(r.newValue);if(o)return e.Vr(o)}}else if(r.key===e.Ir){const o=function(s){let c=ta.ct;if(null!=s)try{const h=JSON.parse(s);Pt("number"==typeof h),c=h}catch(h){fr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);o!==ta.ct&&e.sequenceNumberHandler(o)}else if(r.key===e.Rr){const o=e.Gr(r.newValue);yield Promise.all(o.map(s=>e.syncEngine.Qr(s)))}}else e.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(n,e,r){const o=new wA(this.currentUser,n,e,r),s=EU(this.persistenceKey,this.currentUser,n);this.setItem(s,o.hr())}Cr(n){const e=EU(this.persistenceKey,this.currentUser,n);this.removeItem(e)}Mr(n){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:n}))}kr(n,e,r){const o=OP(this.persistenceKey,n),s=new NE(n,e,r);this.setItem(o,s.hr())}$r(n){const e=JSON.stringify(Array.from(n));this.setItem(this.Rr,e)}Or(n){const e=this.Tr.exec(n);return e?e[1]:null}Br(n,e){const r=this.Or(n);return xA.ar(r,e)}Lr(n,e){const r=this.Er.exec(n),o=Number(r[1]);return wA.ar(new Ir(void 0!==r[2]?r[2]:null),o,e)}Ur(n,e){const r=this.Ar.exec(n),o=Number(r[1]);return NE.ar(o,e)}br(n){return NP.ar(n)}Gr(n){return JSON.parse(n)}qr(n){var e=this;return(0,xe.Z)(function*(){if(n.user.uid===e.currentUser.uid)return e.syncEngine.jr(n.batchId,n.state,n.error);je("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}Kr(n){return this.syncEngine.zr(n.targetId,n.state,n.error)}Fr(n,e){const r=e?this.gr.insert(n,e):this.gr.remove(n),o=this.Sr(this.gr),s=this.Sr(r),c=[],h=[];return s.forEach(p=>{o.has(p)||c.push(p)}),o.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Wr(c,h).then(()=>{this.gr=r})}Vr(n){this.gr.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}Sr(n){let e=E();return n.forEach((r,o)=>{e=e.unionWith(o.activeTargetIds)}),e}}class CU{constructor(){this.Hr=new FP,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,e,r){}addLocalQueryTarget(n){return this.Hr.lr(n),this.Jr[n]||"not-current"}updateQueryState(n,e,r){this.Jr[n]=e}removeLocalQueryTarget(n){this.Hr.dr(n)}isLocalQueryTarget(n){return this.Hr.activeTargetIds.has(n)}clearQueryState(n){delete this.Jr[n]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(n){return this.Hr.activeTargetIds.has(n)}start(){return this.Hr=new FP,Promise.resolve()}handleUserChange(n,e,r){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(n){}}class c5{Yr(n){}shutdown(){}}class DU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(n){this.so.push(n)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.so)n(0)}no(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.so)n(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let EA=null;function UP(){return null===EA?EA=268435456+Math.round(2147483648*Math.random()):EA++,"0x"+EA.toString(16)}const d5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u5{constructor(n){this.ro=n.ro,this.oo=n.oo}uo(n){this.co=n}ao(n){this.ho=n}onMessage(n){this.lo=n}close(){this.oo()}send(n){this.ro(n)}fo(){this.co()}wo(n){this.ho(n)}_o(n){this.lo(n)}}const ds="WebChannelConnection";class h5 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.mo=(n.ssl?"https":"http")+"://"+n.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(n,e,r,o,s){const c=UP(),h=this.To(n,e);je("RestConnection",`Sending RPC '${n}' ${c}:`,h,r);const p={};return this.Eo(p,o,s),this.Ao(n,h,p,r).then(y=>(je("RestConnection",`Received RPC '${n}' ${c}: `,y),y),y=>{throw Ts("RestConnection",`RPC '${n}' ${c} failed with error: `,y,"url: ",h,"request:",r),y})}vo(n,e,r,o,s,c){return this.Io(n,e,r,o,s)}Eo(n,e,r){n["X-Goog-Api-Client"]="gl-js/ fire/"+e_,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}To(n,e){return`${this.mo}/v1/${e}:${d5[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams,this.longPollingOptions=n.longPollingOptions}Ao(n,e,r,o){const s=UP();return new Promise((c,h)=>{const p=new Kx;p.setWithCredentials(!0),p.listenOnce(AR.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Xg.NO_ERROR:const w=p.getResponseJson();je(ds,`XHR for RPC '${n}' ${s} received:`,JSON.stringify(w)),c(w);break;case Xg.TIMEOUT:je(ds,`RPC '${n}' ${s} timed out`),h(new Be(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Xg.HTTP_ERROR:const I=p.getStatus();if(je(ds,`RPC '${n}' ${s} failed with status:`,I,"response text:",p.getResponseText()),I>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const P=A?.error;if(P&&P.status&&P.message){const U=function(G){const Q=G.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Q)>=0?Q:ge.UNKNOWN}(P.status);h(new Be(U,P.message))}else h(new Be(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Be(ge.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{je(ds,`RPC '${n}' ${s} completed.`)}});const y=JSON.stringify(o);je(ds,`RPC '${n}' ${s} sending request:`,o),p.send(e,"POST",y,r,15)})}Ro(n,e,r){const o=UP(),s=[this.mo,"/","google.firestore.v1.Firestore","/",n,"/channel"],c=Qg(),h=SR(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.xmlHttpFactory=new MR({})),this.Eo(p.initMessageHeaders,e,r),p.encodeInitMessageHeaders=!0;const w=s.join("");je(ds,`Creating RPC '${n}' stream ${o}: ${w}`,p);const I=c.createWebChannel(w,p);let A=!1,P=!1;const U=new u5({ro:Q=>{P?je(ds,`Not sending because RPC '${n}' stream ${o} is closed:`,Q):(A||(je(ds,`Opening RPC '${n}' stream ${o} transport.`),I.open(),A=!0),je(ds,`RPC '${n}' stream ${o} sending:`,Q),I.send(Q))},oo:()=>I.close()}),G=(Q,me,Ce)=>{Q.listen(me,fe=>{try{Ce(fe)}catch(Te){setTimeout(()=>{throw Te},0)}})};return G(I,Kv.EventType.OPEN,()=>{P||je(ds,`RPC '${n}' stream ${o} transport opened.`)}),G(I,Kv.EventType.CLOSE,()=>{P||(P=!0,je(ds,`RPC '${n}' stream ${o} transport closed`),U.wo())}),G(I,Kv.EventType.ERROR,Q=>{P||(P=!0,Ts(ds,`RPC '${n}' stream ${o} transport errored:`,Q),U.wo(new Be(ge.UNAVAILABLE,"The operation could not be completed")))}),G(I,Kv.EventType.MESSAGE,Q=>{var me;if(!P){const Ce=Q.data[0];Pt(!!Ce);const Te=Ce.error||(null===(me=Ce[0])||void 0===me?void 0:me.error);if(Te){je(ds,`RPC '${n}' stream ${o} received error:`,Te);const Fe=Te.status;let qe=function(It){const ln=eo[It];if(void 0!==ln)return v2(ln)}(Fe),Xe=Te.message;void 0===qe&&(qe=ge.INTERNAL,Xe="Unknown error status: "+Fe+" with message "+Te.message),P=!0,U.wo(new Be(qe,Xe)),I.close()}else je(ds,`RPC '${n}' stream ${o} received:`,Ce),U._o(Ce)}}),G(h,xS.STAT_EVENT,Q=>{Q.stat===ES.PROXY?je(ds,`RPC '${n}' stream ${o} detected buffering proxy`):Q.stat===ES.NOPROXY&&je(ds,`RPC '${n}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{U.fo()},0),U}}function IU(){return typeof window<"u"?window:null}function CA(){return typeof document<"u"?document:null}function FE(i){return new wj(i,!0)}class BP{constructor(n,e,r=1e3,o=1.5,s=6e4){this.ii=n,this.timerId=e,this.Po=r,this.bo=o,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(n){this.cancel();const e=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,e-r);o>0&&je("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),n())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class TU{constructor(n,e,r,o,s,c,h,p){this.ii=n,this.$o=r,this.Oo=o,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new BP(n,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var n=this;return(0,xe.Z)(function*(){n.Uo()&&(yield n.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(n){this.Ho(),this.stream.send(n)}zo(){var n=this;return(0,xe.Z)(function*(){if(n.Ko())return n.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(n,e){var r=this;return(0,xe.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==n?r.qo.reset():e&&e.code===ge.RESOURCE_EXHAUSTED?(fr(e.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):e&&e.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=n,yield r.listener.ao(e)})()}Yo(){}auth(){this.state=1;const n=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===e&&this.Zo(r,o)},r=>{n(()=>{const o=new Be(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(n,e){const r=this.Xo(this.Fo);this.stream=this.eu(n,e),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var n=this;this.state=5,this.qo.No((0,xe.Z)(function*(){n.state=0,n.start()}))}tu(n){return je("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(4,n)}Xo(n){return e=>{this.ii.enqueueAndForget(()=>this.Fo===n?e():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f5 extends TU{constructor(n,e,r,o,s,c){super(n,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=s}eu(n,e){return this.connection.Ro("Listen",n,e)}onMessage(n){this.qo.reset();const e=function Cj(i,n){let e;if("targetChange"in n){const r="NO_CHANGE"===(p=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:vt(),o=n.targetChange.targetIds||[],s=function(p,y){return p.useProto3Json?(Pt(void 0===y||"string"==typeof y),Br.fromBase64String(y||"")):(Pt(void 0===y||y instanceof Uint8Array),Br.fromUint8Array(y||new Uint8Array))}(i,n.targetChange.resumeToken),c=n.targetChange.cause,h=c&&function(p){const y=void 0===p.code?ge.UNKNOWN:v2(p.code);return new Be(y,p.message||"")}(c);e=new C2(r,o,s,h||null)}else if("documentChange"in n){const r=n.documentChange,o=zd(i,r.document.name),s=Vr(r.document.updateTime),c=r.document.createTime?Vr(r.document.createTime):Ot.min(),h=new ko({mapValue:{fields:r.document.fields}}),p=bi.newFoundDocument(o,s,c,h);e=new lA(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in n){const r=n.documentDelete,o=zd(i,r.document),s=r.readTime?Vr(r.readTime):Ot.min(),c=bi.newNoDocument(o,s);e=new lA([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in n){const r=n.documentRemove,o=zd(i,r.document);e=new lA([],r.removedTargetIds||[],o,null)}else{if(!("filter"in n))return vt();{const r=n.filter,{count:o=0,unchangedNames:s}=r,c=new pj(o,s);e=new E2(r.targetId,c)}}var p;return e}(this.serializer,n),r=function(o){if(!("targetChange"in o))return Ot.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ot.min():s.readTime?Vr(s.readTime):Ot.min()}(n);return this.listener.nu(e,r)}su(n){const e={};e.database=IE(this.serializer),e.addTarget=function(o,s){let c;const h=s.target;if(c=d_(h)?{documents:O2(o,h)}:{query:gP(o,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=S2(o,s.resumeToken);const p=hP(o,s.expectedCount);null!==p&&(c.expectedCount=p)}else if(s.snapshotVersion.compareTo(Ot.min())>0){c.readTime=gb(o,s.snapshotVersion.toTimestamp());const p=hP(o,s.expectedCount);null!==p&&(c.expectedCount=p)}return c}(this.serializer,n);const r=function Ij(i,n){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(n.purpose);return null==e?null:{"goog-listen-tags":e}}(0,n);r&&(e.labels=r),this.Wo(e)}iu(n){const e={};e.database=IE(this.serializer),e.removeTarget=n,this.Wo(e)}}class m5 extends TU{constructor(n,e,r,o,s,c){super(n,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(n,e){return this.connection.Ro("Write",n,e)}onMessage(n){if(Pt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.ru){this.qo.reset();const e=function Dj(i,n){return i&&i.length>0?(Pt(void 0!==n),i.map(e=>function(r,o){let s=Vr(r.updateTime?r.updateTime:o);return s.isEqual(Ot.min())&&(s=Vr(o)),new oP(s,r.transformResults||[])}(e,n))):[]}(n.writeResults,n.commitTime),r=Vr(n.commitTime);return this.listener.cu(r,e)}return Pt(!n.writeResults||0===n.writeResults.length),this.ru=!0,this.listener.au()}hu(){const n={};n.database=IE(this.serializer),this.Wo(n)}uu(n){const e={streamToken:this.lastStreamToken,writes:n.map(r=>TE(this.serializer,r))};this.Wo(e)}}class p5 extends class{}{constructor(n,e,r,o){super(),this.authCredentials=n,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(n,e,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Io(n,e,r,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(ge.UNKNOWN,o.toString())})}vo(n,e,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.vo(n,e,r,s,c,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(ge.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class _5{constructor(n,e){this.asyncQueue=n,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(n){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.yu("Offline")))}set(n){this.Tu(),this.wu=0,"Online"===n&&(this.mu=!1),this.yu(n)}yu(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}pu(n){const e=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(fr(e),this.mu=!1):je("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class y5{constructor(n,e,r,o,s){var c=this;this.localStore=n,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(h=>{r.enqueueAndForget((0,xe.Z)(function*(){var p;tp(c)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,xe.Z)(function*(y){const w=ht(y);w.vu.add(4),yield xb(w),w.bu.set("Unknown"),w.vu.delete(4),yield LE(w)}),function(y){return p.apply(this,arguments)})(c))}))}),this.bu=new _5(r,o)}}function LE(i){return HP.apply(this,arguments)}function HP(){return HP=(0,xe.Z)(function*(i){if(tp(i))for(const n of i.Ru)yield n(!0)}),HP.apply(this,arguments)}function xb(i){return zP.apply(this,arguments)}function zP(){return zP=(0,xe.Z)(function*(i){for(const n of i.Ru)yield n(!1)}),zP.apply(this,arguments)}function DA(i,n){const e=ht(i);e.Au.has(n.targetId)||(e.Au.set(n.targetId,n),GP(e)?$P(e):Cb(e).Ko()&&jP(e,n))}function UE(i,n){const e=ht(i),r=Cb(e);e.Au.delete(n),r.Ko()&&SU(e,n),0===e.Au.size&&(r.Ko()?r.jo():tp(e)&&e.bu.set("Unknown"))}function jP(i,n){if(i.Vu.qt(n.targetId),n.resumeToken.approximateByteSize()>0||n.snapshotVersion.compareTo(Ot.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(n.targetId).size;n=n.withExpectedCount(e)}Cb(i).su(n)}function SU(i,n){i.Vu.qt(n),Cb(i).iu(n)}function $P(i){i.Vu=new _j({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),le:n=>i.Au.get(n)||null,ue:()=>i.datastore.serializer.databaseId}),Cb(i).start(),i.bu.gu()}function GP(i){return tp(i)&&!Cb(i).Uo()&&i.Au.size>0}function tp(i){return 0===ht(i).vu.size}function AU(i){i.Vu=void 0}function v5(i){return WP.apply(this,arguments)}function WP(){return WP=(0,xe.Z)(function*(i){i.Au.forEach((n,e)=>{jP(i,n)})}),WP.apply(this,arguments)}function b5(i,n){return qP.apply(this,arguments)}function qP(){return qP=(0,xe.Z)(function*(i,n){AU(i),GP(i)?(i.bu.Iu(n),$P(i)):i.bu.set("Unknown")}),qP.apply(this,arguments)}function w5(i,n,e){return KP.apply(this,arguments)}function KP(){return KP=(0,xe.Z)(function*(i,n,e){if(i.bu.set("Online"),n instanceof C2&&2===n.state&&n.cause)try{yield(r=(0,xe.Z)(function*(o,s){const c=s.cause;for(const h of s.targetIds)o.Au.has(h)&&(yield o.remoteSyncer.rejectListen(h,c),o.Au.delete(h),o.Vu.removeTarget(h))}),function(o,s){return r.apply(this,arguments)})(i,n)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),r),yield IA(i,r)}else if(n instanceof lA?i.Vu.Ht(n):n instanceof E2?i.Vu.ne(n):i.Vu.Xt(n),!e.isEqual(Ot.min()))try{const r=yield _U(i.localStore);e.compareTo(r)>=0&&(yield function(o,s){const c=o.Vu.ce(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=o.Au.get(p);y&&o.Au.set(p,y.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach((h,p)=>{const y=o.Au.get(h);if(!y)return;o.Au.set(h,y.withResumeToken(Br.EMPTY_BYTE_STRING,y.snapshotVersion)),SU(o,h);const w=new kh(y.target,h,p,y.sequenceNumber);jP(o,w)}),o.remoteSyncer.applyRemoteEvent(c)}(i,e))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield IA(i,r)}var r}),KP.apply(this,arguments)}function IA(i,n,e){return YP.apply(this,arguments)}function YP(){return YP=(0,xe.Z)(function*(i,n,e){if(!Ec(n))throw n;i.vu.add(1),yield xb(i),i.bu.set("Offline"),e||(e=()=>_U(i.localStore)),i.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield e(),i.vu.delete(1),yield LE(i)}))}),YP.apply(this,arguments)}function MU(i,n){return n().catch(e=>IA(i,e,n))}function Eb(i){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,xe.Z)(function*(i){const n=ht(i),e=np(n);let r=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;for(;x5(n);)try{const o=yield s5(n.localStore,r);if(null===o){0===n.Eu.length&&e.jo();break}r=o.batchId,E5(n,o)}catch(o){yield IA(n,o)}kU(n)&&RU(n)}),ZP.apply(this,arguments)}function x5(i){return tp(i)&&i.Eu.length<10}function E5(i,n){i.Eu.push(n);const e=np(i);e.Ko()&&e.ou&&e.uu(n.mutations)}function kU(i){return tp(i)&&!np(i).Uo()&&i.Eu.length>0}function RU(i){np(i).start()}function C5(i){return QP.apply(this,arguments)}function QP(){return QP=(0,xe.Z)(function*(i){np(i).hu()}),QP.apply(this,arguments)}function D5(i){return XP.apply(this,arguments)}function XP(){return XP=(0,xe.Z)(function*(i){const n=np(i);for(const e of i.Eu)n.uu(e.mutations)}),XP.apply(this,arguments)}function I5(i,n,e){return JP.apply(this,arguments)}function JP(){return JP=(0,xe.Z)(function*(i,n,e){const r=i.Eu.shift(),o=lP.from(r,n,e);yield MU(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),yield Eb(i)}),JP.apply(this,arguments)}function T5(i,n){return eO.apply(this,arguments)}function eO(){return eO=(0,xe.Z)(function*(i,n){var e;n&&np(i).ou&&(yield(e=(0,xe.Z)(function*(r,o){if(y2(s=o.code)&&s!==ge.ABORTED){const c=r.Eu.shift();np(r).Qo(),yield MU(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield Eb(r)}var s}),function(r,o){return e.apply(this,arguments)})(i,n)),kU(i)&&RU(i)}),eO.apply(this,arguments)}function PU(i,n){return tO.apply(this,arguments)}function tO(){return tO=(0,xe.Z)(function*(i,n){const e=ht(i);e.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=tp(e);e.vu.add(3),yield xb(e),r&&e.bu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(n),e.vu.delete(3),yield LE(e)}),tO.apply(this,arguments)}function nO(i,n){return iO.apply(this,arguments)}function iO(){return iO=(0,xe.Z)(function*(i,n){const e=ht(i);n?(e.vu.delete(2),yield LE(e)):n||(e.vu.add(2),yield xb(e),e.bu.set("Unknown"))}),iO.apply(this,arguments)}function Cb(i){return i.Su||(i.Su=function(n,e,r){const o=ht(n);return o.fu(),new f5(e,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(i.datastore,i.asyncQueue,{uo:v5.bind(null,i),ao:b5.bind(null,i),nu:w5.bind(null,i)}),i.Ru.push(function(){var n=(0,xe.Z)(function*(e){e?(i.Su.Qo(),GP(i)?$P(i):i.bu.set("Unknown")):(yield i.Su.stop(),AU(i))});return function(e){return n.apply(this,arguments)}}())),i.Su}function np(i){return i.Du||(i.Du=function(n,e,r){const o=ht(n);return o.fu(),new m5(e,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(i.datastore,i.asyncQueue,{uo:C5.bind(null,i),ao:T5.bind(null,i),au:D5.bind(null,i),cu:I5.bind(null,i)}),i.Ru.push(function(){var n=(0,xe.Z)(function*(e){e?(i.Du.Qo(),yield Eb(i)):(yield i.Du.stop(),i.Eu.length>0&&(je("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(e){return n.apply(this,arguments)}}())),i.Du}class rO{constructor(n,e,r,o,s){this.asyncQueue=n,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=s,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(n,e,r,o,s){const c=Date.now()+r,h=new rO(n,e,c,o,s);return h.start(r),h}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(ge.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Db(i,n){if(fr("AsyncQueue",`${n}: ${i}`),Ec(i))return new Be(ge.UNAVAILABLE,`${n}: ${i}`);throw i}class Ib{constructor(n){this.comparator=n?(e,r)=>n(e,r)||dt.comparator(e.key,r.key):(e,r)=>dt.comparator(e.key,r.key),this.keyedMap=u_(),this.sortedSet=new oi(this.comparator)}static emptySet(n){return new Ib(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const e=this.keyedMap.get(n);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((e,r)=>(n(e),!1))}add(n){const e=this.delete(n.key);return e.copy(e.keyedMap.insert(n.key,n),e.sortedSet.insert(n,null))}delete(n){const e=this.get(n);return e?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(e)):this}isEqual(n){if(!(n instanceof Ib)||this.size!==n.size)return!1;const e=this.sortedSet.getIterator(),r=n.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,s=r.getNext().key;if(!o.isEqual(s))return!1}return!0}toString(){const n=[];return this.forEach(e=>{n.push(e.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,e){const r=new Ib;return r.comparator=this.comparator,r.keyedMap=n,r.sortedSet=e,r}}class OU{constructor(){this.Cu=new oi(dt.comparator)}track(n){const e=n.doc.key,r=this.Cu.get(e);r?0!==n.type&&3===r.type?this.Cu=this.Cu.insert(e,n):3===n.type&&1!==r.type?this.Cu=this.Cu.insert(e,{type:r.type,doc:n.doc}):2===n.type&&2===r.type?this.Cu=this.Cu.insert(e,{type:2,doc:n.doc}):2===n.type&&0===r.type?this.Cu=this.Cu.insert(e,{type:0,doc:n.doc}):1===n.type&&0===r.type?this.Cu=this.Cu.remove(e):1===n.type&&2===r.type?this.Cu=this.Cu.insert(e,{type:1,doc:r.doc}):0===n.type&&1===r.type?this.Cu=this.Cu.insert(e,{type:2,doc:n.doc}):vt():this.Cu=this.Cu.insert(e,n)}xu(){const n=[];return this.Cu.inorderTraversal((e,r)=>{n.push(r)}),n}}class Tb{constructor(n,e,r,o,s,c,h,p,y){this.query=n,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(n,e,r,o,s){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new Tb(n,e,Ib.emptySet(e),c,r,o,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.hasCachedResults===n.hasCachedResults&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&hb(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const e=this.docChanges,r=n.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}class S5{constructor(){this.Nu=void 0,this.listeners=[]}}class A5{constructor(){this.queries=new Vd(n=>eP(n),hb),this.onlineState="Unknown",this.ku=new Set}}function oO(i,n){return sO.apply(this,arguments)}function sO(){return sO=(0,xe.Z)(function*(i,n){const e=ht(i),r=n.query;let o=!1,s=e.queries.get(r);if(s||(o=!0,s=new S5),o)try{s.Nu=yield e.onListen(r)}catch(c){const h=Db(c,`Initialization of query '${iA(n.query)}' failed`);return void n.onError(h)}e.queries.set(r,s),s.listeners.push(n),n.Mu(e.onlineState),s.Nu&&n.$u(s.Nu)&&cO(e)}),sO.apply(this,arguments)}function aO(i,n){return lO.apply(this,arguments)}function lO(){return lO=(0,xe.Z)(function*(i,n){const e=ht(i),r=n.query;let o=!1;const s=e.queries.get(r);if(s){const c=s.listeners.indexOf(n);c>=0&&(s.listeners.splice(c,1),o=0===s.listeners.length)}if(o)return e.queries.delete(r),e.onUnlisten(r)}),lO.apply(this,arguments)}function M5(i,n){const e=ht(i);let r=!1;for(const o of n){const c=e.queries.get(o.query);if(c){for(const h of c.listeners)h.$u(o)&&(r=!0);c.Nu=o}}r&&cO(e)}function k5(i,n,e){const r=ht(i),o=r.queries.get(n);if(o)for(const s of o.listeners)s.onError(e);r.queries.delete(n)}function cO(i){i.ku.forEach(n=>{n.next()})}class dO{constructor(n,e,r){this.query=n,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(n){if(!this.options.includeMetadataChanges){const r=[];for(const o of n.docChanges)3!==o.type&&r.push(o);n=new Tb(n.query,n.docs,n.oldDocs,r,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0,n.hasCachedResults)}let e=!1;return this.Fu?this.Lu(n)&&(this.Ou.next(n),e=!0):this.qu(n,this.onlineState)&&(this.Uu(n),e=!0),this.Bu=n,e}onError(n){this.Ou.error(n)}Mu(n){this.onlineState=n;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,n)&&(this.Uu(this.Bu),e=!0),e}qu(n,e){return!n.fromCache||(!this.options.Ku||!("Offline"!==e))&&(!n.docs.isEmpty()||n.hasCachedResults||"Offline"===e)}Lu(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(n){n=Tb.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache,n.hasCachedResults),this.Fu=!0,this.Ou.next(n)}}class R5{constructor(n,e){this.Gu=n,this.byteLength=e}Qu(){return"metadata"in this.Gu}}class NU{constructor(n){this.serializer=n}rr(n){return zd(this.serializer,n)}ur(n){return n.metadata.exists?P2(this.serializer,n.document,!1):bi.newNoDocument(this.rr(n.metadata.name),this.cr(n.metadata.readTime))}cr(n){return Vr(n)}}class P5{constructor(n,e,r){this.ju=n,this.localStore=e,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=FU(n)}zu(n){this.progress.bytesLoaded+=n.byteLength;let e=this.progress.documentsLoaded;if(n.Gu.namedQuery)this.queries.push(n.Gu.namedQuery);else if(n.Gu.documentMetadata){this.documents.push({metadata:n.Gu.documentMetadata}),n.Gu.documentMetadata.exists||++e;const r=kn.fromString(n.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else n.Gu.document&&(this.documents[this.documents.length-1].document=n.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(n){const e=new Map,r=new NU(this.serializer);for(const o of n)if(o.metadata.queries){const s=r.rr(o.metadata.name);for(const c of o.metadata.queries){const h=(e.get(c)||g()).add(s);e.set(c,h)}}return e}complete(){var n=this;return(0,xe.Z)(function*(){const e=yield function a5(i,n,e,r){return RP.apply(this,arguments)}(n.localStore,new NU(n.serializer),n.documents,n.ju.id),r=n.Wu(n.documents);for(const o of n.queries)yield l5(n.localStore,o,r.get(o.name));return n.progress.taskState="Success",{progress:n.progress,Hu:n.collectionGroups,Ju:e}})()}}function FU(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class LU{constructor(n){this.key=n}}class UU{constructor(n){this.key=n}}class BU{constructor(n,e){this.query=n,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=g(),this.mutatedKeys=g(),this.tc=rA(n),this.ec=new Ib(this.tc)}get nc(){return this.Yu}sc(n,e){const r=e?e.ic:new OU,o=e?e.ec:this.ec;let s=e?e.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,y="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(n.inorderTraversal((w,I)=>{const A=o.get(w),P=fb(this.query,I)?I:null,U=!!A&&this.mutatedKeys.has(A.key),G=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let Q=!1;A&&P?A.data.isEqual(P.data)?U!==G&&(r.track({type:3,doc:P}),Q=!0):this.rc(A,P)||(r.track({type:2,doc:P}),Q=!0,(p&&this.tc(P,p)>0||y&&this.tc(P,y)<0)&&(h=!0)):!A&&P?(r.track({type:0,doc:P}),Q=!0):A&&!P&&(r.track({type:1,doc:A}),Q=!0,(p||y)&&(h=!0)),Q&&(P?(c=c.add(P),s=G?s.add(w):s.delete(w)):(c=c.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{ec:c,ic:r,zi:h,mutatedKeys:s}}rc(n,e){return n.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(n,e,r){const o=this.ec;this.ec=n.ec,this.mutatedKeys=n.mutatedKeys;const s=n.ic.xu();s.sort((y,w)=>function(I,A){const P=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return P(I)-P(A)}(y.type,w.type)||this.tc(y.doc,w.doc)),this.oc(r);const c=e?this.uc():[],h=0===this.Zu.size&&this.current?1:0,p=h!==this.Xu;return this.Xu=h,0!==s.length||p?{snapshot:new Tb(this.query,n.ec,o,s,n.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({ec:this.ec,ic:new OU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(n){return!this.Yu.has(n)&&!!this.ec.has(n)&&!this.ec.get(n).hasLocalMutations}oc(n){n&&(n.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),n.modifiedDocuments.forEach(e=>{}),n.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=n.current)}uc(){if(!this.current)return[];const n=this.Zu;this.Zu=g(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const e=[];return n.forEach(r=>{this.Zu.has(r)||e.push(new UU(r))}),this.Zu.forEach(r=>{n.has(r)||e.push(new LU(r))}),e}hc(n){this.Yu=n.ir,this.Zu=g();const e=this.sc(n.documents);return this.applyChanges(e,!0)}lc(){return Tb.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class O5{constructor(n,e,r){this.query=n,this.targetId=e,this.view=r}}class N5{constructor(n){this.key=n,this.fc=!1}}class F5{constructor(n,e,r,o,s,c){this.localStore=n,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Vd(h=>eP(h),hb),this._c=new Map,this.mc=new Set,this.gc=new oi(dt.comparator),this.yc=new Map,this.Ic=new CP,this.Tc={},this.Ec=new Map,this.Ac=__.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function L5(i,n){return uO.apply(this,arguments)}function uO(){return uO=(0,xe.Z)(function*(i,n){const e=OO(i);let r,o;const s=e.wc.get(n);if(s)r=s.targetId,e.sharedClientState.addLocalQueryTarget(r),o=s.view.lc();else{const c=yield bb(e.localStore,ls(n)),h=e.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield hO(e,n,r,"current"===h,c.resumeToken),e.isPrimaryClient&&DA(e.remoteStore,c)}return o}),uO.apply(this,arguments)}function hO(i,n,e,r,o){return fO.apply(this,arguments)}function fO(){return fO=(0,xe.Z)(function*(i,n,e,r,o){i.Rc=(I,A,P)=>{return(U=(0,xe.Z)(function*(G,Q,me,Ce){let fe=Q.view.sc(me);fe.zi&&(fe=yield bA(G.localStore,Q.query,!1).then(({documents:qe})=>Q.view.sc(qe,fe)));const Te=Ce&&Ce.targetChanges.get(Q.targetId),Fe=Q.view.applyChanges(fe,G.isPrimaryClient,Te);return EO(G,Q.targetId,Fe.cc),Fe.snapshot}),function(G,Q,me,Ce){return U.apply(this,arguments)})(i,I,A,P);var U};const s=yield bA(i.localStore,n,!0),c=new BU(n,s.ir),h=c.sc(s.documents),p=CE.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==i.onlineState,o),y=c.applyChanges(h,i.isPrimaryClient,p);EO(i,e,y.cc);const w=new O5(n,e,c);return i.wc.set(n,w),i._c.has(e)?i._c.get(e).push(n):i._c.set(e,[n]),y.snapshot}),fO.apply(this,arguments)}function U5(i,n){return mO.apply(this,arguments)}function mO(){return mO=(0,xe.Z)(function*(i,n){const e=ht(i),r=e.wc.get(n),o=e._c.get(r.targetId);if(o.length>1)return e._c.set(r.targetId,o.filter(s=>!hb(s,n))),void e.wc.delete(n);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wb(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),UE(e.remoteStore,r.targetId),Sb(e,r.targetId)}).catch(xc))):(Sb(e,r.targetId),yield wb(e.localStore,r.targetId,!0))}),mO.apply(this,arguments)}function pO(){return pO=(0,xe.Z)(function*(i,n,e){const r=NO(i);try{const o=yield function(s,c){const h=ht(s),p=zi.now(),y=c.reduce((A,P)=>A.add(P.key),g());let w,I;return h.persistence.runTransaction("Locally write mutations","readwrite",A=>{let P=As(),U=g();return h.Zi.getEntries(A,y).next(G=>{P=G,P.forEach((Q,me)=>{me.isValidDocument()||(U=U.add(Q))})}).next(()=>h.localDocuments.getOverlayedDocuments(A,P)).next(G=>{w=G;const Q=[];for(const me of c){const Ce=fj(me,w.get(me.key).overlayedDocument);null!=Ce&&Q.push(new Mh(me.key,Ce,YR(Ce.value.mapValue),nr.exists(!0)))}return h.mutationQueue.addMutationBatch(A,p,Q,c)}).next(G=>{I=G;const Q=G.applyToLocalDocumentSet(w,U);return h.documentOverlayCache.saveOverlays(A,G.batchId,Q)})}).then(()=>({batchId:I.batchId,changes:iP(w)}))}(r.localStore,n);r.sharedClientState.addPendingMutation(o.batchId),function(s,c,h){let p=s.Tc[s.currentUser.toKey()];p||(p=new oi(Xt)),p=p.insert(c,h),s.Tc[s.currentUser.toKey()]=p}(r,o.batchId,e),yield Rh(r,o.changes),yield Eb(r.remoteStore)}catch(o){const s=Db(o,"Failed to persist write");e.reject(s)}}),pO.apply(this,arguments)}function VU(i,n){return gO.apply(this,arguments)}function gO(){return gO=(0,xe.Z)(function*(i,n){const e=ht(i);try{const r=yield function o5(i,n){const e=ht(i),r=n.snapshotVersion;let o=e.Ji;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Zi.newChangeBuffer({trackRemovals:!0});o=e.Ji;const h=[];n.targetChanges.forEach((w,I)=>{const A=o.get(I);if(!A)return;h.push(e.Bs.removeMatchingKeys(s,w.removedDocuments,I).next(()=>e.Bs.addMatchingKeys(s,w.addedDocuments,I)));let P=A.withSequenceNumber(s.currentSequenceNumber);var U,G,Q;null!==n.targetMismatches.get(I)?P=P.withResumeToken(Br.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),o=o.insert(I,P),G=P,Q=w,(0===(U=A).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&h.push(e.Bs.updateTargetData(s,P))});let p=As(),y=g();if(n.documentUpdates.forEach(w=>{n.resolvedLimboDocuments.has(w)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(s,w))}),h.push(yU(s,c,n.documentUpdates).next(w=>{p=w.nr,y=w.sr})),!r.isEqual(Ot.min())){const w=e.Bs.getLastRemoteSnapshotVersion(s).next(I=>e.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(w)}return he.waitFor(h).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(e.Ji=o,s))}(e.localStore,n);n.targetChanges.forEach((o,s)=>{const c=e.yc.get(s);c&&(Pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.fc=!0:o.modifiedDocuments.size>0?Pt(c.fc):o.removedDocuments.size>0&&(Pt(c.fc),c.fc=!1))}),yield Rh(e,r,n)}catch(r){yield xc(r)}}),gO.apply(this,arguments)}function HU(i,n,e){const r=ht(i);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const o=[];r.wc.forEach((s,c)=>{const h=c.view.Mu(n);h.snapshot&&o.push(h.snapshot)}),function(s,c){const h=ht(s);h.onlineState=c;let p=!1;h.queries.forEach((y,w)=>{for(const I of w.listeners)I.Mu(c)&&(p=!0)}),p&&cO(h)}(r.eventManager,n),o.length&&r.dc.nu(o),r.onlineState=n,r.isPrimaryClient&&r.sharedClientState.setOnlineState(n)}}function V5(i,n,e){return _O.apply(this,arguments)}function _O(){return _O=(0,xe.Z)(function*(i,n,e){const r=ht(i);r.sharedClientState.updateQueryState(n,"rejected",e);const o=r.yc.get(n),s=o&&o.key;if(s){let c=new oi(dt.comparator);c=c.insert(s,bi.newNoDocument(s,Ot.min()));const h=g().add(s),p=new EE(Ot.min(),new Map,new oi(Xt),c,h);yield VU(r,p),r.gc=r.gc.remove(s),r.yc.delete(n),CO(r)}else yield wb(r.localStore,n,!1).then(()=>Sb(r,n,e)).catch(xc)}),_O.apply(this,arguments)}function H5(i,n){return yO.apply(this,arguments)}function yO(){return yO=(0,xe.Z)(function*(i,n){const e=ht(i),r=n.batch.batchId;try{const o=yield function r5(i,n){const e=ht(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=n.batch.keys(),s=e.Zi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,y){const w=p.batch,I=w.keys();let A=he.resolve();return I.forEach(P=>{A=A.next(()=>y.getEntry(h,P)).next(U=>{const G=p.docVersions.get(P);Pt(null!==G),U.version.compareTo(G)<0&&(w.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),y.addEntry(U)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(h,w))}(e,r,n,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,n.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=g();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(n))).next(()=>e.localDocuments.getDocuments(r,o))})}(e.localStore,n);xO(e,r,null),wO(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield Rh(e,o)}catch(o){yield xc(o)}}),yO.apply(this,arguments)}function z5(i,n,e){return vO.apply(this,arguments)}function vO(){return vO=(0,xe.Z)(function*(i,n,e){const r=ht(i);try{const o=yield function(s,c){const h=ht(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,c).next(w=>(Pt(null!==w),y=w.keys(),h.mutationQueue.removeMutationBatch(p,w))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(r.localStore,n);xO(r,n,e),wO(r,n),r.sharedClientState.updateMutationState(n,"rejected",e),yield Rh(r,o)}catch(o){yield xc(o)}}),vO.apply(this,arguments)}function bO(){return bO=(0,xe.Z)(function*(i,n){const e=ht(i);tp(e.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=ht(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===r)return void n.resolve();const o=e.Ec.get(r)||[];o.push(n),e.Ec.set(r,o)}catch(r){const o=Db(r,"Initialization of waitForPendingWrites() operation failed");n.reject(o)}}),bO.apply(this,arguments)}function wO(i,n){(i.Ec.get(n)||[]).forEach(e=>{e.resolve()}),i.Ec.delete(n)}function xO(i,n,e){const r=ht(i);let o=r.Tc[r.currentUser.toKey()];if(o){const s=o.get(n);s&&(e?s.reject(e):s.resolve(),o=o.remove(n)),r.Tc[r.currentUser.toKey()]=o}}function Sb(i,n,e=null){i.sharedClientState.removeLocalQueryTarget(n);for(const r of i._c.get(n))i.wc.delete(r),e&&i.dc.Pc(r,e);i._c.delete(n),i.isPrimaryClient&&i.Ic.Is(n).forEach(r=>{i.Ic.containsKey(r)||zU(i,r)})}function zU(i,n){i.mc.delete(n.path.canonicalString());const e=i.gc.get(n);null!==e&&(UE(i.remoteStore,e),i.gc=i.gc.remove(n),i.yc.delete(e),CO(i))}function EO(i,n,e){for(const r of e)r instanceof LU?(i.Ic.addReference(r.key,n),$5(i,r)):r instanceof UU?(je("SyncEngine","Document no longer in limbo: "+r.key),i.Ic.removeReference(r.key,n),i.Ic.containsKey(r.key)||zU(i,r.key)):vt()}function $5(i,n){const e=n.key,r=e.path.canonicalString();i.gc.get(e)||i.mc.has(r)||(je("SyncEngine","New document in limbo: "+e),i.mc.add(r),CO(i))}function CO(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const n=i.mc.values().next().value;i.mc.delete(n);const e=new dt(kn.fromString(n)),r=i.Ac.next();i.yc.set(r,new N5(e)),i.gc=i.gc.insert(e,r),DA(i.remoteStore,new kh(ls(Th(e.path)),r,"TargetPurposeLimboResolution",ta.ct))}}function Rh(i,n,e){return DO.apply(this,arguments)}function DO(){return DO=(0,xe.Z)(function*(i,n,e){const r=ht(i),o=[],s=[],c=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,p)=>{c.push(r.Rc(p,n,e).then(y=>{if((y||e)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){o.push(y);const w=AP.Li(p.targetId,y);s.push(w)}}))}),yield Promise.all(c),r.dc.nu(o),yield(h=(0,xe.Z)(function*(p,y){const w=ht(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>he.forEach(y,A=>he.forEach(A.Fi,P=>w.persistence.referenceDelegate.addReference(I,A.targetId,P)).next(()=>he.forEach(A.Bi,P=>w.persistence.referenceDelegate.removeReference(I,A.targetId,P)))))}catch(I){if(!Ec(I))throw I;je("LocalStore","Failed to update sequence numbers: "+I)}for(const I of y){const A=I.targetId;if(!I.fromCache){const P=w.Ji.get(A),G=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);w.Ji=w.Ji.insert(A,G)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,s))}),DO.apply(this,arguments)}function G5(i,n){return IO.apply(this,arguments)}function IO(){return IO=(0,xe.Z)(function*(i,n){const e=ht(i);if(!e.currentUser.isEqual(n)){je("SyncEngine","User change. New user:",n.toKey());const r=yield gU(e.localStore,n);e.currentUser=n,(o=e).Ec.forEach(c=>{c.forEach(h=>{h.reject(new Be(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),e.sharedClientState.handleUserChange(n,r.removedBatchIds,r.addedBatchIds),yield Rh(e,r.er)}var o}),IO.apply(this,arguments)}function W5(i,n){const e=ht(i),r=e.yc.get(n);if(r&&r.fc)return g().add(r.key);{let o=g();const s=e._c.get(n);if(!s)return o;for(const c of s){const h=e.wc.get(c);o=o.unionWith(h.view.nc)}return o}}function q5(i,n){return TO.apply(this,arguments)}function TO(){return TO=(0,xe.Z)(function*(i,n){const e=ht(i),r=yield bA(e.localStore,n.query,!0),o=n.view.hc(r);return e.isPrimaryClient&&EO(e,n.targetId,o.cc),o}),TO.apply(this,arguments)}function K5(i,n){return SO.apply(this,arguments)}function SO(){return SO=(0,xe.Z)(function*(i,n){const e=ht(i);return bU(e.localStore,n).then(r=>Rh(e,r))}),SO.apply(this,arguments)}function Y5(i,n,e,r){return AO.apply(this,arguments)}function AO(){return AO=(0,xe.Z)(function*(i,n,e,r){const o=ht(i),s=yield function(c,h){const p=ht(c),y=ht(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.Sn(w,h).next(I=>I?p.localDocuments.getDocuments(w,I):he.resolve(null)))}(o.localStore,n);var h;null!==s?("pending"===e?yield Eb(o.remoteStore):"acknowledged"===e||"rejected"===e?(xO(o,n,r||null),wO(o,n),h=n,ht(ht(o.localStore).mutationQueue).Cn(h)):vt(),yield Rh(o,s)):je("SyncEngine","Cannot apply mutation batch with id: "+n)}),AO.apply(this,arguments)}function MO(){return MO=(0,xe.Z)(function*(i,n){const e=ht(i);if(OO(e),NO(e),!0===n&&!0!==e.vc){const r=e.sharedClientState.getAllActiveQueryTargets(),o=yield jU(e,r.toArray());e.vc=!0,yield nO(e.remoteStore,!0);for(const s of o)DA(e.remoteStore,s)}else if(!1===n&&!1!==e.vc){const r=[];let o=Promise.resolve();e._c.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(Sb(e,c),wb(e.localStore,c,!0))),UE(e.remoteStore,c)}),yield o,yield jU(e,r),function(s){const c=ht(s);c.yc.forEach((h,p)=>{UE(c.remoteStore,p)}),c.Ic.Ts(),c.yc=new Map,c.gc=new oi(dt.comparator)}(e),e.vc=!1,yield nO(e.remoteStore,!1)}}),MO.apply(this,arguments)}function jU(i,n,e){return kO.apply(this,arguments)}function kO(){return kO=(0,xe.Z)(function*(i,n,e){const r=ht(i),o=[],s=[];for(const c of n){let h;const p=r._c.get(c);if(p&&0!==p.length){h=yield bb(r.localStore,ls(p[0]));for(const y of p){const w=r.wc.get(y),I=yield q5(r,w);I.snapshot&&s.push(I.snapshot)}}else{const y=yield vU(r.localStore,c);h=yield bb(r.localStore,y),yield hO(r,$U(y),c,!1,h.resumeToken)}o.push(h)}return r.dc.nu(s),o}),kO.apply(this,arguments)}function $U(i){return vE(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Q5(i){const n=ht(i);return ht(ht(n.localStore).persistence).$i()}function X5(i,n,e,r){return RO.apply(this,arguments)}function RO(){return RO=(0,xe.Z)(function*(i,n,e,r){const o=ht(i);if(o.vc)return void je("SyncEngine","Ignoring unexpected query state notification.");const s=o._c.get(n);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield bU(o.localStore,tP(s[0])),h=EE.createSynthesizedRemoteEventForCurrentChange(n,"current"===e,Br.EMPTY_BYTE_STRING);yield Rh(o,c,h);break}case"rejected":yield wb(o.localStore,n,!0),Sb(o,n,r);break;default:vt()}}),RO.apply(this,arguments)}function J5(i,n,e){return PO.apply(this,arguments)}function PO(){return PO=(0,xe.Z)(function*(i,n,e){const r=OO(i);if(r.vc){for(const o of n){if(r._c.has(o)){je("SyncEngine","Adding an already active target "+o);continue}const s=yield vU(r.localStore,o),c=yield bb(r.localStore,s);yield hO(r,$U(s),c.targetId,!1,c.resumeToken),DA(r.remoteStore,c)}for(const o of e)r._c.has(o)&&(yield wb(r.localStore,o,!1).then(()=>{UE(r.remoteStore,o),Sb(r,o)}).catch(xc))}}),PO.apply(this,arguments)}function OO(i){const n=ht(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=VU.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=W5.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=V5.bind(null,n),n.dc.nu=M5.bind(null,n.eventManager),n.dc.Pc=k5.bind(null,n.eventManager),n}function NO(i){const n=ht(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=H5.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=z5.bind(null,n),n}class BE{constructor(){this.synchronizeTabs=!1}initialize(n){var e=this;return(0,xe.Z)(function*(){e.serializer=FE(n.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(n),e.persistence=e.createPersistence(n),yield e.persistence.start(),e.localStore=e.createLocalStore(n),e.gcScheduler=e.createGarbageCollectionScheduler(n,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(n,e.localStore)})()}createGarbageCollectionScheduler(n,e){return null}createIndexBackfillerScheduler(n,e){return null}createLocalStore(n){return pU(this.persistence,new mU,n.initialUser,this.serializer)}createPersistence(n){return new DP(_A.zs,this.serializer)}createSharedClientState(n){return new CU}terminate(){var n=this;return(0,xe.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class FO extends BE{constructor(n,e,r){super(),this.Vc=n,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(n){var e=()=>super.initialize,r=this;return(0,xe.Z)(function*(){yield e().call(r,n),yield r.Vc.initialize(r,n),yield NO(r.Vc.syncEngine),yield Eb(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(n){return pU(this.persistence,new mU,n.initialUser,this.serializer)}createGarbageCollectionScheduler(n,e){return new oU(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue,e)}createIndexBackfillerScheduler(n,e){const r=new BR(e,this.persistence);return new OS(n.asyncQueue,r)}createPersistence(n){const e=SP(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?cs.withCacheSize(this.cacheSizeBytes):cs.DEFAULT;return new TP(this.synchronizeTabs,e,n.clientId,r,n.asyncQueue,IU(),CA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(n){return new CU}}class GU extends FO{constructor(n,e){super(n,e,!1),this.Vc=n,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(n){var e=()=>super.initialize,r=this;return(0,xe.Z)(function*(){yield e().call(r,n);const o=r.Vc.syncEngine;r.sharedClientState instanceof LP&&(r.sharedClientState.syncEngine={jr:Y5.bind(null,o),zr:X5.bind(null,o),Wr:J5.bind(null,o),$i:Q5.bind(null,o),Qr:K5.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,xe.Z)(function*(c){yield function Z5(i,n){return MO.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}createSharedClientState(n){const e=IU();if(!LP.D(e))throw new Be(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=SP(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new LP(e,n.asyncQueue,r,n.clientId,n.initialUser)}}class Ab{initialize(n,e){var r=this;return(0,xe.Z)(function*(){r.localStore||(r.localStore=n.localStore,r.sharedClientState=n.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!n.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>HU(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=G5.bind(null,r.syncEngine),yield nO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(n){return new A5}createDatastore(n){const e=FE(n.databaseInfo.databaseId),r=new h5(n.databaseInfo);return new p5(n.authCredentials,n.appCheckCredentials,r,e)}createRemoteStore(n){return e=this.localStore,r=this.datastore,o=n.asyncQueue,s=h=>HU(this.syncEngine,h,0),c=DU.D()?new DU:new c5,new y5(e,r,o,s,c);var e,r,o,s,c}createSyncEngine(n,e){return function(r,o,s,c,h,p,y){const w=new F5(r,o,s,c,h,p);return y&&(w.vc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,e)}terminate(){return(n=(0,xe.Z)(function*(e){const r=ht(e);je("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield xb(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(e){return n.apply(this,arguments)})(this.remoteStore);var n}}function WU(i,n=10240){let e=0;return{read:()=>(0,xe.Z)(function*(){if(e<i.byteLength){const r={value:i.slice(e,e+n),done:!1};return e+=n,r}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class TA{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Sc(this.observer.next,n)}error(n){this.observer.error?this.Sc(this.observer.error,n):fr("Uncaught Error in snapshot listener:",n.toString())}Dc(){this.muted=!0}Sc(n,e){this.muted||setTimeout(()=>{this.muted||n(e)},0)}}class n${constructor(n,e){this.Cc=n,this.serializer=e,this.metadata=new Tr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var n=this;return(0,xe.Z)(function*(){return n.metadata.promise})()}bc(){var n=this;return(0,xe.Z)(function*(){return yield n.getMetadata(),n.Nc()})()}Nc(){var n=this;return(0,xe.Z)(function*(){const e=yield n.kc();if(null===e)return null;const r=n.xc.decode(e),o=Number(r);isNaN(o)&&n.Mc(`length string (${r}) is not valid number`);const s=yield n.$c(o);return new R5(JSON.parse(s),e.length+o)})()}Oc(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}kc(){var n=this;return(0,xe.Z)(function*(){for(;n.Oc()<0&&!(yield n.Fc()););if(0===n.buffer.length)return null;const e=n.Oc();e<0&&n.Mc("Reached the end of bundle when a length string is expected.");const r=n.buffer.slice(0,e);return n.buffer=n.buffer.slice(e),r})()}$c(n){var e=this;return(0,xe.Z)(function*(){for(;e.buffer.length<n;)(yield e.Fc())&&e.Mc("Reached the end of bundle when more is expected.");const r=e.xc.decode(e.buffer.slice(0,n));return e.buffer=e.buffer.slice(n),r})()}Mc(n){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${n}`)}Fc(){var n=this;return(0,xe.Z)(function*(){const e=yield n.Cc.read();if(!e.done){const r=new Uint8Array(n.buffer.length+e.value.length);r.set(n.buffer),r.set(e.value,n.buffer.length),n.buffer=r}return e.done})()}}class i${constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Be(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,xe.Z)(function*(s,c){const h=ht(s),p=IE(h.serializer)+"/documents",y={documents:c.map(P=>DE(h.serializer,P))},w=yield h.vo("BatchGetDocuments",p,y,c.length),I=new Map;w.forEach(P=>{const U=function Ej(i,n){return"found"in n?function(e,r){Pt(!!r.found);const o=zd(e,r.found.name),s=Vr(r.found.updateTime),c=r.found.createTime?Vr(r.found.createTime):Ot.min(),h=new ko({mapValue:{fields:r.found.fields}});return bi.newFoundDocument(o,s,c,h)}(i,n):"missing"in n?function(e,r){Pt(!!r.missing),Pt(!!r.readTime);const o=zd(e,r.missing),s=Vr(r.readTime);return bi.newNoDocument(o,s)}(i,n):vt()}(h.serializer,P);I.set(U.key.toString(),U)});const A=[];return c.forEach(P=>{const U=I.get(P.toString());Pt(!!U),A.push(U)}),A}),function(s,c){return o.apply(this,arguments)})(e.datastore,n);var o;return r.forEach(o=>e.recordVersion(o)),r})()}set(n,e){this.write(e.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,e){try{this.write(e.toMutation(n,this.preconditionForUpdate(n)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(n.toString())}delete(n){this.write(new pb(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,xe.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const e=n.readVersions;var r;n.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,o)=>{const s=dt.fromPath(o);n.mutations.push(new sP(s,n.precondition(s)))}),yield(r=(0,xe.Z)(function*(o,s){const c=ht(o),h=IE(c.serializer)+"/documents",p={writes:s.map(y=>TE(c.serializer,y))};yield c.Io("Commit",h,p)}),function(o,s){return r.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let e;if(n.isFoundDocument())e=n.version;else{if(!n.isNoDocument())throw vt();e=Ot.min()}const r=this.readVersions.get(n.key.toString());if(r){if(!e.isEqual(r))throw new Be(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),e)}precondition(n){const e=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&e?e.isEqual(Ot.min())?nr.exists(!1):nr.updateTime(e):nr.none()}preconditionForUpdate(n){const e=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&e){if(e.isEqual(Ot.min()))throw new Be(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nr.updateTime(e)}return nr.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class r${constructor(n,e,r,o,s){this.asyncQueue=n,this.datastore=e,this.options=r,this.updateFunction=o,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new BP(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var n=this;this.qo.No((0,xe.Z)(function*(){const e=new i$(n.datastore),r=n.qc(e);r&&r.then(o=>{n.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{n.deferred.resolve(o)}).catch(s=>{n.Uc(s)}))}).catch(o=>{n.Uc(o)})}))}qc(n){try{const e=this.updateFunction(n);return!Ur(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(n){this.Bc>0&&this.Kc(n)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(n)}Kc(n){if("FirebaseError"===n.name){const e=n.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!y2(e)}return!1}}class o${constructor(n,e,r,o){var s=this;this.authCredentials=n,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=Ir.UNAUTHENTICATED,this.clientId=Xx.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,xe.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(je("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var n=this;return(0,xe.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,authCredentials:n.authCredentials,appCheckCredentials:n.appCheckCredentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.authCredentialListener=n}setAppCheckTokenChangeListener(n){this.appCheckCredentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{n._onlineComponents&&(yield n._onlineComponents.terminate()),n._offlineComponents&&(yield n._offlineComponents.terminate()),n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),e.resolve()}catch(r){const o=Db(r,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}function SA(i,n){return LO.apply(this,arguments)}function LO(){return LO=(0,xe.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const e=yield i.getConfiguration();yield n.initialize(e);let r=e.initialUser;i.setCredentialChangeListener(function(){var o=(0,xe.Z)(function*(s){r.isEqual(s)||(yield gU(n.localStore,s),r=s)});return function(s){return o.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=n}),LO.apply(this,arguments)}function UO(i,n){return BO.apply(this,arguments)}function BO(){return BO=(0,xe.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const e=yield VO(i);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(e,r),i.setCredentialChangeListener(o=>PU(n.remoteStore,o)),i.setAppCheckTokenChangeListener((o,s)=>PU(n.remoteStore,s)),i._onlineComponents=n}),BO.apply(this,arguments)}function qU(i){return"FirebaseError"===i.name?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function VO(i){return HO.apply(this,arguments)}function HO(){return HO=(0,xe.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield SA(i,i._uninitializedComponentsProvider._offline)}catch(n){const e=n;if(!qU(e))throw e;Ts("Error using user provided cache. Falling back to memory cache: "+e),yield SA(i,new BE)}}else je("FirestoreClient","Using default OfflineComponentProvider"),yield SA(i,new BE);return i._offlineComponents}),HO.apply(this,arguments)}function AA(i){return zO.apply(this,arguments)}function zO(){return zO=(0,xe.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(je("FirestoreClient","Using user provided OnlineComponentProvider"),yield UO(i,i._uninitializedComponentsProvider._online)):(je("FirestoreClient","Using default OnlineComponentProvider"),yield UO(i,new Ab))),i._onlineComponents}),zO.apply(this,arguments)}function KU(i){return VO(i).then(n=>n.persistence)}function MA(i){return VO(i).then(n=>n.localStore)}function YU(i){return AA(i).then(n=>n.remoteStore)}function jO(i){return AA(i).then(n=>n.syncEngine)}function Mb(i){return $O.apply(this,arguments)}function $O(){return $O=(0,xe.Z)(function*(i){const n=yield AA(i),e=n.eventManager;return e.onListen=L5.bind(null,n.syncEngine),e.onUnlisten=U5.bind(null,n.syncEngine),e}),$O.apply(this,arguments)}function QU(i,n,e={}){const r=new Tr;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(o,s,c,h,p){const y=new TA({next:I=>{s.enqueueAndForget(()=>aO(o,w));const A=I.docs.has(c);!A&&I.fromCache?p.reject(new Be(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&I.fromCache&&h&&"server"===h.source?p.reject(new Be(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new dO(Th(c.path),y,{includeMetadataChanges:!0,Ku:!0});return oO(o,w)}(yield Mb(i),i.asyncQueue,n,e,r)})),r.promise}function XU(i,n,e={}){const r=new Tr;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(o,s,c,h,p){const y=new TA({next:I=>{s.enqueueAndForget(()=>aO(o,w)),I.fromCache&&"server"===h.source?p.reject(new Be(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new dO(c,y,{includeMetadataChanges:!0,Ku:!0});return oO(o,w)}(yield Mb(i),i.asyncQueue,n,e,r)})),r.promise}function JU(i){const n={};return void 0!==i.timeoutSeconds&&(n.timeoutSeconds=i.timeoutSeconds),n}const eB=new Map;function GO(i,n,e){if(!e)throw new Be(ge.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function tB(i,n,e,r){if(!0===n&&!0===r)throw new Be(ge.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function nB(i){if(!dt.isDocumentKey(i))throw new Be(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function iB(i){if(dt.isDocumentKey(i))throw new Be(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function kA(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(e=i).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var e;return"function"==typeof i?"a function":vt()}function In(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new Be(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=kA(i);throw new Be(ge.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${e}`)}}return i}function rB(i,n){if(n<=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class oB{constructor(n){var e,r;if(void 0===n.host){if(void 0!==n.ssl)throw new Be(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(e=n.ssl)||void 0===e||e;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.cache=n.localCache,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new Be(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}tB("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==n.experimentalAutoDetectLongPolling&&!n.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=JU(null!==(r=n.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Be(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Be(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Be(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!n.useFetchStreams}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===n.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class VE{constructor(n,e,r,o){this._authCredentials=n,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Be(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oB(n),void 0!==n.credentials&&(this._authCredentials=function(e){if(!e)return new kR;switch(e.type){case"firstParty":return new PR(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Be(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const e=eB.get(n);e&&(je("ComponentProvider","Removing Datastore"),eB.delete(n),e.terminate())}(this),Promise.resolve()}}function sB(i,n,e,r={}){var o;const s=(i=In(i,VE))._getSettings(),c=`${n}:${e}`;if("firestore.googleapis.com"!==s.host&&s.host!==c&&Ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:c,ssl:!1})),r.mockUserToken){let h,p;if("string"==typeof r.mockUserToken)h=r.mockUserToken,p=Ir.MOCK_USER;else{h=(0,V.Sg)(r.mockUserToken,null===(o=i._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Be(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ir(y)}i._authCredentials=new IS(new Zx(h,p))}}class $i{constructor(n,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jd(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new $i(this.firestore,n,this._key)}}class qo{constructor(n,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=n}withConverter(n){return new qo(this.firestore,n,this._query)}}class jd extends qo{constructor(n,e,r){super(n,e,Th(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new $i(this.firestore,null,new dt(n))}withConverter(n){return new jd(this.firestore,n,this._path)}}function aB(i,n,...e){if(i=(0,V.m9)(i),GO("collection","path",n),i instanceof VE){const r=kn.fromString(n,...e);return iB(r),new jd(i,null,r)}{if(!(i instanceof $i||i instanceof jd))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(kn.fromString(n,...e));return iB(r),new jd(i.firestore,null,r)}}function RA(i,n,...e){if(i=(0,V.m9)(i),1===arguments.length&&(n=Xx.A()),GO("doc","path",n),i instanceof VE){const r=kn.fromString(n,...e);return nB(r),new $i(i,null,new dt(r))}{if(!(i instanceof $i||i instanceof jd))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(kn.fromString(n,...e));return nB(r),new $i(i.firestore,i instanceof jd?i.converter:null,new dt(r))}}function lB(i,n){return i=(0,V.m9)(i),n=(0,V.m9)(n),(i instanceof $i||i instanceof jd)&&(n instanceof $i||n instanceof jd)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function WO(i,n){return i=(0,V.m9)(i),n=(0,V.m9)(n),i instanceof qo&&n instanceof qo&&i.firestore===n.firestore&&hb(i._query,n._query)&&i.converter===n.converter}class p${constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new BP(this,"async_queue_retry"),this.Xc=()=>{const e=CA();e&&je("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const n=CA();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Zc(),this.ta(n)}enterRestrictedMode(n){if(!this.jc){this.jc=!0,this.Jc=n||!1;const e=CA();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(n){if(this.Zc(),this.jc)return new Promise(()=>{});const e=new Tr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(n().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.Qc.push(n),this.ea()))}ea(){var n=this;return(0,xe.Z)(function*(){if(0!==n.Qc.length){try{yield n.Qc[0](),n.Qc.shift(),n.qo.reset()}catch(e){if(!Ec(e))throw e;je("AsyncQueue","Operation failed with retryable error: "+e)}n.Qc.length>0&&n.qo.No(()=>n.ea())}})()}ta(n){const e=this.Gc.then(()=>(this.Hc=!0,n().catch(r=>{throw this.Wc=r,this.Hc=!1,fr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=e,e}enqueueAfterDelay(n,e,r){this.Zc(),this.Yc.indexOf(n)>-1&&(e=0);const o=rO.createAndSchedule(this,n,e,r,s=>this.na(s));return this.zc.push(o),o}Zc(){this.Wc&&vt()}verifyOperationInProgress(){}sa(){var n=this;return(0,xe.Z)(function*(){let e;do{e=n.Gc,yield e}while(e!==n.Gc)})()}ia(n){for(const e of this.zc)if(e.timerId===n)return!0;return!1}ra(n){return this.sa().then(()=>{this.zc.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.zc)if(e.skipDelay(),"all"!==n&&e.timerId===n)break;return this.sa()})}oa(n){this.Yc.push(n)}na(n){const e=this.zc.indexOf(n);this.zc.splice(e,1)}}function qO(i){return function(n,e){if("object"!=typeof n||null===n)return!1;const r=n;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(i)}class g${constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,e,r){this._progressObserver={next:n,error:e,complete:r}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,e){return this._taskCompletionResolver.promise.then(n,e)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class Gi extends VE{constructor(n,e,r,o){super(n,e,r,o),this.type="firestore",this._queue=new p$,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cB(this),this._firestoreClient.terminate()}}function y$(i,n){const e="object"==typeof i?i:(0,$n.getApp)(),r="string"==typeof i?i:n||"(default)",o=(0,$n._getProvider)(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const s=(0,V.P0)("firestore");s&&sB(o,...s)}return o}function Hr(i){return i._firestoreClient||cB(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function cB(i){var n,e,r;const o=i._freezeSettings(),s=(h=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new a2(i._databaseId,h,i._persistenceKey,(y=o).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,JU(y.experimentalLongPollingOptions),y.useFetchStreams));var h,y;i._firestoreClient=new o$(i._authCredentials,i._appCheckCredentials,i._queue,s),null!==(e=o.cache)&&void 0!==e&&e._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function dB(i,n,e){const r=new Tr;return i.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield SA(i,e),yield UO(i,n),r.resolve()}catch(o){const s=o;if(!qU(s))throw s;Ts("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function uB(i){if(i._initialized||i._terminated)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $d{constructor(n){this._byteString=n}static fromBase64String(n){try{return new $d(Br.fromBase64String(n))}catch(e){throw new Be(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(n){return new $d(Br.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class Ph{constructor(...n){for(let e=0;e<n.length;++e)if(0===n[e].length)throw new Be(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mr(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class v_{constructor(n){this._methodName=n}}class PA{constructor(n,e){if(!isFinite(n)||n<-90||n>90)throw new Be(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(e)||e<-180||e>180)throw new Be(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=n,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Xt(this._lat,n._lat)||Xt(this._long,n._long)}}const S$=/^__.*__$/;class A${constructor(n,e,r){this.data=n,this.fieldMask=e,this.fieldTransforms=r}toMutation(n,e){return null!==this.fieldMask?new Mh(n,this.data,this.fieldMask,e,this.fieldTransforms):new mb(n,this.data,e,this.fieldTransforms)}}class hB{constructor(n,e,r){this.data=n,this.fieldMask=e,this.fieldTransforms=r}toMutation(n,e){return new Mh(n,this.data,this.fieldMask,e,this.fieldTransforms)}}function fB(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class OA{constructor(n,e,r,o,s,c){this.settings=n,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(n){return new OA(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(n){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(n),o=this.aa({path:r,la:!1});return o.fa(n),o}da(n){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(n),o=this.aa({path:r,la:!1});return o.ua(),o}wa(n){return this.aa({path:void 0,la:!0})}_a(n){return LA(n,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(n){return void 0!==this.fieldMask.find(e=>n.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>n.isPrefixOf(e.field))}ua(){if(this.path)for(let n=0;n<this.path.length;n++)this.fa(this.path.get(n))}fa(n){if(0===n.length)throw this._a("Document fields must not be empty");if(fB(this.ca)&&S$.test(n))throw this._a('Document fields cannot begin and end with "__"')}}class M${constructor(n,e,r){this.databaseId=n,this.ignoreUndefinedProperties=e,this.serializer=r||FE(n)}ya(n,e,r,o=!1){return new OA({ca:n,methodName:e,ga:r,path:mr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function b_(i){const n=i._freezeSettings(),e=FE(i._databaseId);return new M$(i._databaseId,!!n.ignoreUndefinedProperties,e)}function NA(i,n,e,r,o,s={}){const c=i.ya(s.merge||s.mergeFields?2:0,n,e,o);QO("Data must be an object, but it was:",c,r);const h=gB(r,c);let p,y;if(s.merge)p=new po(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const w=[];for(const I of s.mergeFields){const A=jE(n,I,e);if(!c.contains(A))throw new Be(ge.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);yB(w,A)||w.push(A)}p=new po(w),y=c.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,y=c.fieldTransforms;return new A$(new ko(h),p,y)}class zE extends v_{_toFieldTransform(n){if(2!==n.ca)throw n._a(1===n.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof zE}}function mB(i,n,e){return new OA({ca:3,ga:n.settings.ga,methodName:i._methodName,la:e},n.databaseId,n.serializer,n.ignoreUndefinedProperties)}class KO extends v_{_toFieldTransform(n){return new Hd(n.path,new $e)}isEqual(n){return n instanceof KO}}class k$ extends v_{constructor(n,e){super(n),this.pa=e}_toFieldTransform(n){const e=mB(this,n,!0),r=this.pa.map(s=>w_(s,e)),o=new ot(r);return new Hd(n.path,o)}isEqual(n){return this===n}}class R$ extends v_{constructor(n,e){super(n),this.pa=e}_toFieldTransform(n){const e=mB(this,n,!0),r=this.pa.map(s=>w_(s,e)),o=new ke(r);return new Hd(n.path,o)}isEqual(n){return this===n}}class P$ extends v_{constructor(n,e){super(n),this.Ia=e}_toFieldTransform(n){const e=new an(n.serializer,O(n.serializer,this.Ia));return new Hd(n.path,e)}isEqual(n){return this===n}}function YO(i,n,e,r){const o=i.ya(1,n,e);QO("Data must be an object, but it was:",o,r);const s=[],c=ko.empty();wh(r,(p,y)=>{const w=FA(n,p,e);y=(0,V.m9)(y);const I=o.da(w);if(y instanceof zE)s.push(w);else{const A=w_(y,I);null!=A&&(s.push(w),c.set(w,A))}});const h=new po(s);return new hB(c,h,o.fieldTransforms)}function ZO(i,n,e,r,o,s){const c=i.ya(1,n,e),h=[jE(n,r,e)],p=[o];if(s.length%2!=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)h.push(jE(n,s[A])),p.push(s[A+1]);const y=[],w=ko.empty();for(let A=h.length-1;A>=0;--A)if(!yB(y,h[A])){const P=h[A];let U=p[A];U=(0,V.m9)(U);const G=c.da(P);if(U instanceof zE)y.push(P);else{const Q=w_(U,G);null!=Q&&(y.push(P),w.set(P,Q))}}const I=new po(y);return new hB(w,I,c.fieldTransforms)}function pB(i,n,e,r=!1){return w_(e,i.ya(r?4:3,n))}function w_(i,n){if(_B(i=(0,V.m9)(i)))return QO("Unsupported field value:",n,i),gB(i,n);if(i instanceof v_)return function(e,r){if(!fB(r.ca))throw r._a(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${e._methodName}() is not currently supported inside arrays`);const o=e._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.la&&4!==n.ca)throw n._a("Nested arrays are not supported");return function(e,r){const o=[];let s=0;for(const c of e){let h=w_(c,r.wa(s));null==h&&(h={nullValue:"NULL_VALUE"}),o.push(h),s++}return{arrayValue:{values:o}}}(i,n)}return function(e,r){if(null===(e=(0,V.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return O(r.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const o=zi.fromDate(e);return{timestampValue:gb(r.serializer,o)}}if(e instanceof zi){const o=new zi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gb(r.serializer,o)}}if(e instanceof PA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $d)return{bytesValue:S2(r.serializer,e._byteString)};if(e instanceof $i){const o=r.databaseId,s=e.firestore._databaseId;if(!s.isEqual(o))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fP(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r._a(`Unsupported field value: ${kA(e)}`)}(i,n)}function gB(i,n){const e={};return tb(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):wh(i,(r,o)=>{const s=w_(o,n.ha(r));null!=s&&(e[r]=s)}),{mapValue:{fields:e}}}function _B(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof zi||i instanceof PA||i instanceof $d||i instanceof $i||i instanceof v_)}function QO(i,n,e){if(!_B(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=kA(e);throw n._a("an object"===r?i+" a custom object":i+" "+r)}var r}function jE(i,n,e){if((n=(0,V.m9)(n))instanceof Ph)return n._internalPath;if("string"==typeof n)return FA(i,n);throw LA("Field path arguments must be of type string or ",i,!1,void 0,e)}const O$=new RegExp("[~\\*/\\[\\]]");function FA(i,n,e){if(n.search(O$)>=0)throw LA(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new Ph(...n.split("."))._internalPath}catch{throw LA(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function LA(i,n,e,r,o){const s=r&&!r.isEmpty(),c=void 0!==o;let h=`Function ${n}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new Be(ge.INVALID_ARGUMENT,h+i+p)}function yB(i,n){return i.some(e=>e.isEqual(n))}class $E{constructor(n,e,r,o,s){this._firestore=n,this._userDataWriter=e,this._key=r,this._document=o,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $i(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new N$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const e=this._document.data.field(UA("DocumentSnapshot.get",n));if(null!==e)return this._userDataWriter.convertValue(e)}}}class N$ extends $E{data(){return super.data()}}function UA(i,n){return"string"==typeof n?FA(i,n):n instanceof Ph?n._internalPath:n._delegate._internalPath}function vB(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Be(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XO{}class GE extends XO{}function ip(i,n,...e){let r=[];n instanceof XO&&r.push(n),r=r.concat(e),function(o){const s=o.filter(h=>h instanceof kb).length,c=o.filter(h=>h instanceof WE).length;if(s>1||s>0&&c>0)throw new Be(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)i=o._apply(i);return i}class WE extends GE{constructor(n,e,r){super(),this._field=n,this._op=e,this._value=r,this.type="where"}static _create(n,e,r){return new WE(n,e,r)}_apply(n){const e=this._parse(n);return EB(n._query,e),new qo(n.firestore,n.converter,nA(n._query,e))}_parse(n){const e=b_(n.firestore);return function(o,s,c,h,p,y,w){let I;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){xB(w,y);const A=[];for(const P of w)A.push(wB(h,o,P));I={arrayValue:{values:A}}}else I=wB(h,o,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||xB(w,y),I=pB(c,"where",w,"in"===y||"not-in"===y);return xn.create(p,y,I)}(n._query,0,e,n.firestore._databaseId,this._field,this._op,this._value)}}class kb extends XO{constructor(n,e){super(),this.type=n,this._queryConstraints=e}static _create(n,e){return new kb(n,e)}_parse(n){const e=this._queryConstraints.map(r=>r._parse(n)).filter(r=>r.getFilters().length>0);return 1===e.length?e[0]:Wn.create(e,this._getOperator())}_apply(n){const e=this._parse(n);return 0===e.getFilters().length?n:(function(r,o){let s=r;const c=o.getFlattenedFilters();for(const h of c)EB(s,h),s=nA(s,h)}(n._query,e),new qo(n.firestore,n.converter,nA(n._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class JO extends GE{constructor(n,e){super(),this._field=n,this._direction=e,this.type="orderBy"}static _create(n,e){return new JO(n,e)}_apply(n){const e=function(r,o,s){if(null!==r.startAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Km(o,s);return function(h,p){if(null===bE(h)){const y=Sh(h);null!==y&&CB(0,y,p.field)}}(r,c),c}(n._query,this._field,this._direction);return new qo(n.firestore,n.converter,function(r,o){const s=r.explicitOrderBy.concat([o]);return new Sc(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(n._query,e))}}class BA extends GE{constructor(n,e,r){super(),this.type=n,this._limit=e,this._limitType=r}static _create(n,e,r){return new BA(n,e,r)}_apply(n){return new qo(n.firestore,n.converter,ub(n._query,this._limit,this._limitType))}}class VA extends GE{constructor(n,e,r){super(),this.type=n,this._docOrFields=e,this._inclusive=r}static _create(n,e,r){return new VA(n,e,r)}_apply(n){const e=bB(n,this.type,this._docOrFields,this._inclusive);return new qo(n.firestore,n.converter,(o=e,new Sc((r=n._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class HA extends GE{constructor(n,e,r){super(),this.type=n,this._docOrFields=e,this._inclusive=r}static _create(n,e,r){return new HA(n,e,r)}_apply(n){const e=bB(n,this.type,this._docOrFields,this._inclusive);return new qo(n.firestore,n.converter,(o=e,new Sc((r=n._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function bB(i,n,e,r){if(e[0]=(0,V.m9)(e[0]),e[0]instanceof $E)return function(o,s,c,h,p){if(!h)throw new Be(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const w of Ah(o))if(w.field.isKeyField())y.push(Dh(s,h.key));else{const I=h.data.field(w.field);if(nb(I))throw new Be(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const A=w.field.canonicalString();throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(I)}return new Bd(y,p)}(i._query,i.firestore._databaseId,n,e[0]._document,r);{const o=b_(i.firestore);return function(s,c,h,p,y,w){const I=s.explicitOrderBy;if(y.length>I.length)throw new Be(ge.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let P=0;P<y.length;P++){const U=y[P];if(I[P].field.isKeyField()){if("string"!=typeof U)throw new Be(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!tA(s)&&-1!==U.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const G=s.path.child(kn.fromString(U));if(!dt.isDocumentKey(G))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${G}' is not because it contains an odd number of segments.`);const Q=new dt(G);A.push(Dh(c,Q))}else{const G=pB(h,p,U);A.push(G)}}return new Bd(A,w)}(i._query,i.firestore._databaseId,o,n,e,r)}}function wB(i,n,e){if("string"==typeof(e=(0,V.m9)(e))){if(""===e)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tA(n)&&-1!==e.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=n.path.child(kn.fromString(e));if(!dt.isDocumentKey(r))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dh(i,new dt(r))}if(e instanceof $i)return Dh(i,e._key);throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kA(e)}.`)}function xB(i,n){if(!Array.isArray(i)||0===i.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`)}function EB(i,n){if(n.isInequality()){const r=Sh(i),o=n.field;if(null!==r&&!r.isEqual(o))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const s=bE(i);null!==s&&CB(0,o,s)}const e=function(r,o){for(const s of r)for(const c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(i.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(n.op));if(null!==e)throw new Be(ge.INVALID_ARGUMENT,e===n.op?`Invalid query. You cannot use more than one '${n.op.toString()}' filter.`:`Invalid query. You cannot use '${n.op.toString()}' filters with '${e.toString()}' filters.`)}function CB(i,n,e){if(!e.isEqual(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class eN{convertValue(n,e="none"){switch(Ld(n)){case 0:return null;case 1:return n.booleanValue;case 2:return ji(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,e);case 5:return n.stringValue;case 6:return this.convertBytes(Cc(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,e);case 10:return this.convertObject(n.mapValue,e);default:throw vt()}}convertObject(n,e){return this.convertObjectMap(n.fields,e)}convertObjectMap(n,e="none"){const r={};return wh(n,(o,s)=>{r[o]=this.convertValue(s,e)}),r}convertGeoPoint(n){return new PA(ji(n.latitude),ji(n.longitude))}convertArray(n,e){return(n.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(n,e){switch(e){case"previous":const r=uE(n);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(ib(n));default:return null}}convertTimestamp(n){const e=xh(n);return new zi(e.seconds,e.nanos)}convertDocumentKey(n,e){const r=kn.fromString(n);Pt(U2(r));const o=new Dc(r.get(1),r.get(3)),s=new dt(r.popFirst(5));return o.isEqual(e)||fr(`Document ${s} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function zA(i,n,e){let r;return r=i?e&&(e.merge||e.mergeFields)?i.toFirestore(n,e):i.toFirestore(n):n,r}class $$ extends eN{constructor(n){super(),this.firestore=n}convertBytes(n){return new $d(n)}convertReference(n){const e=this.convertDocumentKey(n,this.firestore._databaseId);return new $i(this.firestore,null,e)}}class x_{constructor(n,e){this.hasPendingWrites=n,this.fromCache=e}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Oh extends $E{constructor(n,e,r,o,s,c){super(n,e,r,o,c),this._firestore=n,this._firestoreImpl=n,this.metadata=s}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const e=new qE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,e={}){if(this._document){const r=this._document.data.field(UA("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class qE extends Oh{data(n={}){return super.data(n)}}class rp{constructor(n,e,r,o){this._firestore=n,this._userDataWriter=e,this._snapshot=o,this.metadata=new x_(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const n=[];return this.forEach(e=>n.push(e)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,e){this._snapshot.docs.forEach(r=>{n.call(e,new qE(this._firestore,this._userDataWriter,r.key,r,new x_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const e=!!n.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Be(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new qE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new x_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const h=new qE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new x_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:W$(c.type),doc:h,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function W$(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}function IB(i,n){return i instanceof Oh&&n instanceof Oh?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof rp&&n instanceof rp&&i._firestore===n._firestore&&WO(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}class op extends eN{constructor(n){super(),this.firestore=n}convertBytes(n){return new $d(n)}convertReference(n){const e=this.convertDocumentKey(n,this.firestore._databaseId);return new $i(this.firestore,null,e)}}function TB(i,n,e){i=In(i,$i);const r=In(i.firestore,Gi),o=zA(i.converter,n,e);return Rb(r,[NA(b_(r),"setDoc",i._key,o,null!==i.converter,e).toMutation(i._key,nr.none())])}function SB(i,n,e,...r){i=In(i,$i);const o=In(i.firestore,Gi),s=b_(o);let c;return c="string"==typeof(n=(0,V.m9)(n))||n instanceof Ph?ZO(s,"updateDoc",i._key,n,e,r):YO(s,"updateDoc",i._key,n),Rb(o,[c.toMutation(i._key,nr.exists(!0))])}function AB(i,...n){var e,r,o;i=(0,V.m9)(i);let s={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||qO(n[c])||(s=n[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(qO(n[c])){const I=n[c];n[c]=null===(e=I.next)||void 0===e?void 0:e.bind(I),n[c+1]=null===(r=I.error)||void 0===r?void 0:r.bind(I),n[c+2]=null===(o=I.complete)||void 0===o?void 0:o.bind(I)}let p,y,w;if(i instanceof $i)y=In(i.firestore,Gi),w=Th(i._key.path),p={next:I=>{n[c]&&n[c](tN(y,i,I))},error:n[c+1],complete:n[c+2]};else{const I=In(i,qo);y=In(I.firestore,Gi),w=I._query;const A=new op(y);p={next:P=>{n[c]&&n[c](new rp(y,A,I,P))},error:n[c+1],complete:n[c+2]},vB(i._query)}return function(I,A,P,U){const G=new TA(U),Q=new dO(A,G,P);return I.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return oO(yield Mb(I),Q)})),()=>{G.Dc(),I.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return aO(yield Mb(I),Q)}))}}(Hr(y),w,h,p)}function Rb(i,n){return function(e,r){const o=new Tr;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function B5(i,n,e){return pO.apply(this,arguments)}(yield jO(e),r,o)})),o.promise}(Hr(i),n)}function tN(i,n,e){const r=e.docs.get(n._key),o=new op(i);return new Oh(i,o,n._key,r,new x_(e.hasPendingWrites,e.fromCache),n.converter)}const d8={maxAttempts:5};class MB{constructor(n,e){this._firestore=n,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=b_(n)}set(n,e,r){this._verifyNotCommitted();const o=sp(n,this._firestore),s=zA(o.converter,e,r),c=NA(this._dataReader,"WriteBatch.set",o._key,s,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,nr.none())),this}update(n,e,r,...o){this._verifyNotCommitted();const s=sp(n,this._firestore);let c;return c="string"==typeof(e=(0,V.m9)(e))||e instanceof Ph?ZO(this._dataReader,"WriteBatch.update",s._key,e,r,o):YO(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,nr.exists(!0))),this}delete(n){this._verifyNotCommitted();const e=sp(n,this._firestore);return this._mutations=this._mutations.concat(new pb(e._key,nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sp(i,n){if((i=(0,V.m9)(i)).firestore!==n)throw new Be(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class u8 extends class{constructor(n,e){this._firestore=n,this._transaction=e,this._dataReader=b_(n)}get(n){const e=sp(n,this._firestore),r=new $$(this._firestore);return this._transaction.lookup([e._key]).then(o=>{if(!o||1!==o.length)return vt();const s=o[0];if(s.isFoundDocument())return new $E(this._firestore,r,s.key,s,e.converter);if(s.isNoDocument())return new $E(this._firestore,r,e._key,null,e.converter);throw vt()})}set(n,e,r){const o=sp(n,this._firestore),s=zA(o.converter,e,r),c=NA(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(n,e,r,...o){const s=sp(n,this._firestore);let c;return c="string"==typeof(e=(0,V.m9)(e))||e instanceof Ph?ZO(this._dataReader,"Transaction.update",s._key,e,r,o):YO(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(n){const e=sp(n,this._firestore);return this._transaction.delete(e._key),this}}{constructor(n,e){super(n,e),this._firestore=n}get(n){const e=sp(n,this._firestore),r=new op(this._firestore);return super.get(n).then(o=>new Oh(this._firestore,r,e._key,o._document,new x_(!1,!1),e.converter))}}function nN(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new Be("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function RB(){if(typeof Uint8Array>"u")throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function PB(){if(!function jS(){return typeof atob<"u"}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,n=!0){e_=$n.SDK_VERSION,(0,$n._registerComponent)(new Qi.wA("firestore",(e,{instanceIdentifier:r,options:o})=>{const s=e.getProvider("app").getImmediate(),c=new Gi(new TS(e.getProvider("auth-internal")),new OR(e.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Be(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dc(h.options.projectId,p)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(Jg,"3.13.0",i),(0,$n.registerVersion)(Jg,"3.13.0","esm2017")}();class KE{constructor(n){this._delegate=n}static fromBase64String(n){return PB(),new KE($d.fromBase64String(n))}static fromUint8Array(n){return RB(),new KE($d.fromUint8Array(n))}toBase64(){return PB(),this._delegate.toBase64()}toUint8Array(){return RB(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iN(i){return function b8(i,n){if("object"!=typeof i||null===i)return!1;const e=i;for(const r of n)if(r in e&&"function"==typeof e[r])return!0;return!1}(i,["next","error","complete"])}class w8{enableIndexedDbPersistence(n,e){return function v$(i,n){uB(i=In(i,Gi));const e=Hr(i);if(e._uninitializedComponentsProvider)throw new Be(ge.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=i._freezeSettings(),o=new Ab;return dB(e,o,new FO(o,r.cacheSizeBytes,n?.forceOwnership))}(n._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(n){return function b$(i){uB(i=In(i,Gi));const n=Hr(i);if(n._uninitializedComponentsProvider)throw new Be(ge.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=i._freezeSettings(),r=new Ab;return dB(n,r,new GU(r,e.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function w$(i){if(i._initialized&&!i._terminated)throw new Be(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Tr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield(e=(0,xe.Z)(function*(r){if(!El.D())return Promise.resolve();const o=r+"main";yield El.delete(o)}),function(r){return e.apply(this,arguments)})(SP(i._databaseId,i._persistenceKey)),n.resolve()}catch(e){n.reject(e)}var e})),n.promise}(n._delegate)}}class OB{constructor(n,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},n instanceof Dc||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const e=this._delegate._getSettings();!n.merge&&e.host!==n.host&&Ts("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},e),n)).merge,this._delegate._setSettings(n)}useEmulator(n,e,r={}){sB(this._delegate,n,e,r)}enableNetwork(){return function E$(i){return function s$(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const n=yield KU(i),e=yield YU(i);return n.setNetworkEnabled(!0),function(r){const o=ht(r);return o.vu.delete(0),LE(o)}(e)}))}(Hr(i=In(i,Gi)))}(this._delegate)}disableNetwork(){return function C$(i){return function a$(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const n=yield KU(i),e=yield YU(i);return n.setNetworkEnabled(!1),(r=(0,xe.Z)(function*(o){const s=ht(o);s.vu.add(0),yield xb(s),s.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(e);var r}))}(Hr(i=In(i,Gi)))}(this._delegate)}enablePersistence(n){let e=!1,r=!1;return n&&(e=!!n.synchronizeTabs,r=!!n.experimentalForceOwningTab,tB("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function x$(i){return function(n){const e=new Tr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function j5(i,n){return bO.apply(this,arguments)}(yield jO(n),e)})),e.promise}(Hr(i=In(i,Gi)))}(this._delegate)}onSnapshotsInSync(n){return function t8(i,n){return function d$(i,n){const e=new TA(n);return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return r=yield Mb(i),o=e,ht(r).ku.add(o),void o.next();var r,o})),()=>{e.Dc(),i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return r=yield Mb(i),o=e,void ht(r).ku.delete(o);var r,o}))}}(Hr(i=In(i,Gi)),qO(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new Pb(this,aB(this._delegate,n))}catch(e){throw Ms(e,"collection()","Firestore.collection()")}}doc(n){try{return new Cl(this,RA(this._delegate,n))}catch(e){throw Ms(e,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new ks(this,function m$(i,n){if(i=In(i,VE),GO("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qo(i,null,(e=n,new Sc(kn.emptyPath(),e)));var e}(this._delegate,n))}catch(e){throw Ms(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function h8(i,n,e){i=In(i,Gi);const r=Object.assign(Object.assign({},d8),e);return function(o){if(o.maxAttempts<1)throw new Be(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,c){const h=new Tr;return o.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const p=yield function ZU(i){return AA(i).then(n=>n.datastore)}(o);new r$(o.asyncQueue,p,c,s,h).run()})),h.promise}(Hr(i),o=>n(new u8(i,o)),r)}(this._delegate,e=>n(new NB(this,e)))}batch(){return Hr(this._delegate),new FB(new MB(this._delegate,n=>Rb(this._delegate,n)))}loadBundle(n){return function D$(i,n){const e=Hr(i=In(i,Gi)),r=new g$;return function u$(i,n,e,r){const o=function(s,c){let h;return h="string"==typeof s?b2().encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return WU(p,y);if(p instanceof ArrayBuffer)return WU(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new n$(p,c);var p}(e,FE(n));i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function e$(i,n,e){const r=ht(i);var o;(o=(0,xe.Z)(function*(s,c,h){try{const p=yield c.getMetadata();if(yield function(A,P){const U=ht(A),G=Vr(P.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",Q=>U.qs.getBundleMetadata(Q,P.id)).then(Q=>!!Q&&Q.createTime.compareTo(G)>=0)}(s.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(A=p).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);h._updateProgress(FU(p));const y=new P5(p,s.localStore,c.serializer);let w=yield c.bc();for(;w;){const A=yield y.zu(w);A&&h._updateProgress(A),w=yield c.bc()}const I=yield y.complete();return yield Rh(s,I.Ju,void 0),yield function(A,P){const U=ht(A);return U.persistence.runTransaction("Save bundle","readwrite",G=>U.qs.saveBundleMetadata(G,P))}(s.localStore,p),h._completeWith(I.progress),Promise.resolve(I.Hu)}catch(p){return Ts("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var A}),function(s,c,h){return o.apply(this,arguments)})(r,n,e).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield jO(i),o,r)}))}(e,i._databaseId,n,r),r}(this._delegate,n)}namedQuery(n){return function I$(i,n){return function h$(i,n){return i.asyncQueue.enqueue((0,xe.Z)(function*(){return function(e,r){const o=ht(e);return o.persistence.runTransaction("Get named query","readonly",s=>o.qs.getNamedQuery(s,r))}(yield MA(i),n)}))}(Hr(i=In(i,Gi)),n).then(e=>e?new qo(i,null,e.query):null)}(this._delegate,n).then(e=>e?new ks(this,e):null)}}class jA extends eN{constructor(n){super(),this.firestore=n}convertBytes(n){return new KE(new $d(n))}convertReference(n){const e=this.convertDocumentKey(n,this.firestore._databaseId);return Cl.forKey(e,this.firestore,null)}}class NB{constructor(n,e){this._firestore=n,this._delegate=e,this._userDataWriter=new jA(n)}get(n){const e=C_(n);return this._delegate.get(e).then(r=>new YE(this._firestore,new Oh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(n,e,r){const o=C_(n);return r?(nN("Transaction.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(n,e,r,...o){const s=C_(n);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,r,...o),this}delete(n){const e=C_(n);return this._delegate.delete(e),this}}class FB{constructor(n){this._delegate=n}set(n,e,r){const o=C_(n);return r?(nN("WriteBatch.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(n,e,r,...o){const s=C_(n);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,r,...o),this}delete(n){const e=C_(n);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class E_{constructor(n,e,r){this._firestore=n,this._userDataWriter=e,this._delegate=r}fromFirestore(n,e){const r=new qE(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new ZE(this._firestore,r),e??{})}toFirestore(n,e){return e?this._delegate.toFirestore(n,e):this._delegate.toFirestore(n)}static getInstance(n,e){const r=E_.INSTANCES;let o=r.get(n);o||(o=new WeakMap,r.set(n,o));let s=o.get(e);return s||(s=new E_(n,new jA(n),e),o.set(e,s)),s}}E_.INSTANCES=new WeakMap;class Cl{constructor(n,e){this.firestore=n,this._delegate=e,this._userDataWriter=new jA(n)}static forPath(n,e,r){if(n.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new Cl(e,new $i(e._delegate,r,new dt(n)))}static forKey(n,e,r){return new Cl(e,new $i(e._delegate,r,n))}get id(){return this._delegate.id}get parent(){return new Pb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new Pb(this.firestore,aB(this._delegate,n))}catch(e){throw Ms(e,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,V.m9)(n))instanceof $i&&lB(this._delegate,n)}set(n,e){e=nN("DocumentReference.set",e);try{return e?TB(this._delegate,n,e):TB(this._delegate,n)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(n,e,...r){try{return 1===arguments.length?SB(this._delegate,n):SB(this._delegate,n,e,...r)}catch(o){throw Ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function J$(i){return Rb(In(i.firestore,Gi),[new pb(i._key,nr.none())])}(this._delegate)}onSnapshot(...n){const e=LB(n),r=UB(n,o=>new YE(this.firestore,new Oh(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return AB(this._delegate,e,r)}get(n){let e;return e="cache"===n?.source?function K$(i){i=In(i,$i);const n=In(i.firestore,Gi),e=Hr(n),r=new op(n);return function l$(i,n){const e=new Tr;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(r=(0,xe.Z)(function*(o,s,c){try{const h=yield function(p,y){const w=ht(p);return w.persistence.runTransaction("read document","readonly",I=>w.localDocuments.getDocument(I,y))}(o,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Be(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Db(h,`Failed to get document '${s} from cache`);c.reject(p)}}),function(o,s,c){return r.apply(this,arguments)})(yield MA(i),n,e);var r})),e.promise}(e,i._key).then(o=>new Oh(n,r,i._key,o,new x_(null!==o&&o.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===n?.source?function Y$(i){i=In(i,$i);const n=In(i.firestore,Gi);return QU(Hr(n),i._key,{source:"server"}).then(e=>tN(n,i,e))}(this._delegate):function q$(i){i=In(i,$i);const n=In(i.firestore,Gi);return QU(Hr(n),i._key).then(e=>tN(n,i,e))}(this._delegate),e.then(r=>new YE(this.firestore,new Oh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(n){return new Cl(this.firestore,this._delegate.withConverter(n?E_.getInstance(this.firestore,n):null))}}function Ms(i,n,e){return i.message=i.message.replace(n,e),i}function LB(i){for(const n of i)if("object"==typeof n&&!iN(n))return n;return{}}function UB(i,n){var e,r;let o;return o=iN(i[0])?i[0]:iN(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:s=>{o.next&&o.next(n(s))},error:null===(e=o.error)||void 0===e?void 0:e.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class YE{constructor(n,e){this._firestore=n,this._delegate=e}get ref(){return new Cl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,e){return this._delegate.get(n,e)}isEqual(n){return IB(this._delegate,n._delegate)}}class ZE extends YE{data(n){const e=this._delegate.data(n);return function e2(i,n){i||vt()}(void 0!==e),e}}class ks{constructor(n,e){this.firestore=n,this._delegate=e,this._userDataWriter=new jA(n)}where(n,e,r){try{return new ks(this.firestore,ip(this._delegate,function F$(i,n,e){const r=n,o=UA("where",i);return WE._create(o,r,e)}(n,e,r)))}catch(o){throw Ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,e){try{return new ks(this.firestore,ip(this._delegate,function L$(i,n="asc"){const e=n,r=UA("orderBy",i);return JO._create(r,e)}(n,e)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new ks(this.firestore,ip(this._delegate,function U$(i){return rB("limit",i),BA._create("limit",i,"F")}(n)))}catch(e){throw Ms(e,"limit()","Query.limit()")}}limitToLast(n){try{return new ks(this.firestore,ip(this._delegate,function B$(i){return rB("limitToLast",i),BA._create("limitToLast",i,"L")}(n)))}catch(e){throw Ms(e,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new ks(this.firestore,ip(this._delegate,function V$(...i){return VA._create("startAt",i,!0)}(...n)))}catch(e){throw Ms(e,"startAt()","Query.startAt()")}}startAfter(...n){try{return new ks(this.firestore,ip(this._delegate,function H$(...i){return VA._create("startAfter",i,!1)}(...n)))}catch(e){throw Ms(e,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new ks(this.firestore,ip(this._delegate,function z$(...i){return HA._create("endBefore",i,!1)}(...n)))}catch(e){throw Ms(e,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new ks(this.firestore,ip(this._delegate,function j$(...i){return HA._create("endAt",i,!0)}(...n)))}catch(e){throw Ms(e,"endAt()","Query.endAt()")}}isEqual(n){return WO(this._delegate,n._delegate)}get(n){let e;return e="cache"===n?.source?function Q$(i){i=In(i,qo);const n=In(i.firestore,Gi),e=Hr(n),r=new op(n);return function c$(i,n){const e=new Tr;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(r=(0,xe.Z)(function*(o,s,c){try{const h=yield bA(o,s,!0),p=new BU(s,h.ir),y=p.sc(h.documents),w=p.applyChanges(y,!1);c.resolve(w.snapshot)}catch(h){const p=Db(h,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(o,s,c){return r.apply(this,arguments)})(yield MA(i),n,e);var r})),e.promise}(e,i._query).then(o=>new rp(n,r,i,o))}(this._delegate):"server"===n?.source?function X$(i){i=In(i,qo);const n=In(i.firestore,Gi),e=Hr(n),r=new op(n);return XU(e,i._query,{source:"server"}).then(o=>new rp(n,r,i,o))}(this._delegate):function Z$(i){i=In(i,qo);const n=In(i.firestore,Gi),e=Hr(n),r=new op(n);return vB(i._query),XU(e,i._query).then(o=>new rp(n,r,i,o))}(this._delegate),e.then(r=>new rN(this.firestore,new rp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...n){const e=LB(n),r=UB(n,o=>new rN(this.firestore,new rp(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return AB(this._delegate,e,r)}withConverter(n){return new ks(this.firestore,this._delegate.withConverter(n?E_.getInstance(this.firestore,n):null))}}class E8{constructor(n,e){this._firestore=n,this._delegate=e}get type(){return this._delegate.type}get doc(){return new ZE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rN{constructor(n,e){this._firestore=n,this._delegate=e}get query(){return new ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new ZE(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(e=>new E8(this._firestore,e))}forEach(n,e){this._delegate.forEach(r=>{n.call(e,new ZE(this._firestore,r))})}isEqual(n){return IB(this._delegate,n._delegate)}}class Pb extends ks{constructor(n,e){super(n,e),this.firestore=n,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new Cl(this.firestore,n):null}doc(n){try{return new Cl(this.firestore,void 0===n?RA(this._delegate):RA(this._delegate,n))}catch(e){throw Ms(e,"doc()","CollectionReference.doc()")}}add(n){return function e8(i,n){const e=In(i.firestore,Gi),r=RA(i),o=zA(i.converter,n);return Rb(e,[NA(b_(i.firestore),"addDoc",r._key,o,null!==i.converter,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}(this._delegate,n).then(e=>new Cl(this.firestore,e))}isEqual(n){return lB(this._delegate,n._delegate)}withConverter(n){return new Pb(this.firestore,this._delegate.withConverter(n?E_.getInstance(this.firestore,n):null))}}function C_(i){return In(i,$i)}class oN{constructor(...n){this._delegate=new Ph(...n)}static documentId(){return new oN(mr.keyField().canonicalString())}isEqual(n){return(n=(0,V.m9)(n))instanceof Ph&&this._delegate._internalPath.isEqual(n._internalPath)}}class D_{constructor(n){this._delegate=n}static serverTimestamp(){const n=function m8(){return new KO("serverTimestamp")}();return n._methodName="FieldValue.serverTimestamp",new D_(n)}static delete(){const n=function f8(){return new zE("deleteField")}();return n._methodName="FieldValue.delete",new D_(n)}static arrayUnion(...n){const e=function p8(...i){return new k$("arrayUnion",i)}(...n);return e._methodName="FieldValue.arrayUnion",new D_(e)}static arrayRemove(...n){const e=function g8(...i){return new R$("arrayRemove",i)}(...n);return e._methodName="FieldValue.arrayRemove",new D_(e)}static increment(n){const e=function _8(i){return new P$("increment",i)}(n);return e._methodName="FieldValue.increment",new D_(e)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const C8={Firestore:OB,GeoPoint:PA,Timestamp:zi,Blob:KE,Transaction:NB,WriteBatch:FB,DocumentReference:Cl,DocumentSnapshot:YE,Query:ks,QueryDocumentSnapshot:ZE,QuerySnapshot:rN,CollectionReference:Pb,FieldPath:oN,FieldValue:D_,setLogLevel:function x8(i){!function DS(i){wc.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function BB(i,n){return function T8(i,n=Vf.z){return new Bi.y(e=>{let r;return null!=n?n.schedule(()=>{r=i.onSnapshot({includeMetadataChanges:!0},e)}):r=i.onSnapshot({includeMetadataChanges:!0},e),()=>{r?.()}})}(i,n)}function sN(i,n){return BB(i,n).pipe((0,_t.U)(e=>({payload:e,type:"query"})))}function $A(i,n){return sN(i,n).pipe(gc(void 0),ux(),(0,_t.U)(([e,r])=>{const o=r.payload.docChanges(),s=o.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=o.find(w=>w.doc.ref.isEqual(c.ref)),y=e?.payload.docs.find(w=>w.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function VB(i,n,e){return $A(i,e).pipe(ju((r,o)=>function A8(i,n,e){return n.forEach(r=>{e.indexOf(r.type)>-1&&(i=function M8(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return aN(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const e=i.slice();return e.splice(n.oldIndex,1),e.splice(n.newIndex,0,n),e}return aN(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return aN(i,n.oldIndex,1)}return i}(i,r))}),i}(r,o.map(s=>s.payload),n),[]),(0,dl.x)(),(0,_t.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function aN(i,n,e,...r){const o=i.slice();return o.splice(n,e,...r),o}function HB(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}!function I8(i){(function D8(i,n){i.INTERNAL.registerComponent(new Qi.wA("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("firestore").getImmediate();return n(r,o)},"PUBLIC").setServiceProps(Object.assign({},C8)))})(i,(n,e)=>new OB(n,e,new w8)),i.registerVersion("@firebase/firestore-compat","0.3.12")}(_0.Z);class zB{constructor(n,e,r){this.ref=n,this.query=e,this.afs=r}stateChanges(n){let e=$A(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(e=e.pipe((0,_t.U)(r=>r.filter(o=>n.indexOf(o.type)>-1)))),e.pipe(gc(void 0),ux(),Cn(([r,o])=>o.length>0||!r),(0,_t.U)(([r,o])=>o),qt.iC)}auditTrail(n){return this.stateChanges(n).pipe(ju((e,r)=>[...e,...r],[]))}snapshotChanges(n){const e=HB(n);return VB(this.query,e,this.afs.schedulers.outsideAngular).pipe(qt.iC)}valueChanges(n={}){return sN(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(e=>e.payload.docs.map(r=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data())),qt.iC)}get(n){return(0,rn.D)(this.query.get(n)).pipe(qt.iC)}add(n){return this.ref.add(n)}doc(n){return new jB(this.ref.doc(n),this.afs)}}class jB{constructor(n,e){this.ref=n,this.afs=e}set(n,e){return this.ref.set(n,e)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,e){const r=this.ref.collection(n),{ref:o,query:s}=WB(r,e);return new zB(o,s,this.afs)}snapshotChanges(){return function S8(i,n){return BB(i,n).pipe(gc(void 0),ux(),(0,_t.U)(([e,r])=>r.exists?e?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qt.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:e})=>n.idField?Object.assign(Object.assign({},e.data()),{[n.idField]:e.id}):e.data()))}get(n){return(0,rn.D)(this.ref.get(n)).pipe(qt.iC)}}class k8{constructor(n,e){this.query=n,this.afs=e}stateChanges(n){return n&&0!==n.length?$A(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(e=>e.filter(r=>n.indexOf(r.type)>-1)),Cn(e=>e.length>0),qt.iC):$A(this.query,this.afs.schedulers.outsideAngular).pipe(qt.iC)}auditTrail(n){return this.stateChanges(n).pipe(ju((e,r)=>[...e,...r],[]))}snapshotChanges(n){const e=HB(n);return VB(this.query,e,this.afs.schedulers.outsideAngular).pipe(qt.iC)}valueChanges(n={}){return sN(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(o=>n.idField?Object.assign({[n.idField]:o.id},o.data()):o.data())),qt.iC)}get(n){return(0,rn.D)(this.query.get(n)).pipe(qt.iC)}}const $B=new d.OlP("angularfire2.enableFirestorePersistence"),GB=new d.OlP("angularfire2.firestore.persistenceSettings"),R8=new d.OlP("angularfire2.firestore.settings"),P8=new d.OlP("angularfire2.firestore.use-emulator");function WB(i,n=(e=>e)){return{query:n(i),ref:i}}let qB=(()=>{class i{constructor(e,r,o,s,c,h,p,y,w,I,A,P,U,G,Q,me,Ce){this.schedulers=p;const fe=(0,Ui.on)(e,h,r),Te=w;I&&zu(fe,h,A,U,G,Q,P,me),[this.firestore,this.persistenceEnabled$]=(0,Ui.cc)(`${fe.name}.firestore`,"AngularFirestore",fe.name,()=>{const Fe=h.runOutsideAngular(()=>fe.firestore());if(s&&Fe.settings(s),Te&&Fe.useEmulator(...Te),o&&!Uo(c)){const qe=()=>{try{return(0,rn.D)(Fe.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Xe){return typeof console<"u"&&console.warn(Xe),(0,mt.of)(!1)}};return[Fe,h.runOutsideAngular(qe)]}return[Fe,(0,mt.of)(!1)]},[s,Te,o])}collection(e,r){let o;o="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=WB(o,r),h=this.schedulers.ngZone.run(()=>s);return new zB(h,c,this)}collectionGroup(e,r){const o=r||(c=>c),s=this.firestore.collectionGroup(e);return new k8(o(s),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const o=this.schedulers.ngZone.run(()=>r);return new jB(o,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Ui.Dh),d.LFG(Ui.xv,8),d.LFG($B,8),d.LFG(R8,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qt.HU),d.LFG(GB,8),d.LFG(P8,8),d.LFG(Wp,8),d.LFG(ay,8),d.LFG(m0,8),d.LFG(p0,8),d.LFG($p,8),d.LFG(Gp,8),d.LFG(g0,8),d.LFG(Bf,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),O8=(()=>{class i{constructor(){jp.Z.registerVersion("angularfire",qt.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:i,providers:[{provide:$B,useValue:!0},{provide:GB,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[qB]}),i})();function QE(i,n=Vf.z){return(0,Zi.e)((e,r)=>{let o=null,s=null,c=null;const h=()=>{if(o){o.unsubscribe(),o=null;const y=s;s=null,r.next(y)}};function p(){const y=c+i,w=n.now();if(w<y)return o=this.schedule(void 0,y-w),void r.add(o);h()}e.subscribe((0,Ii.x)(r,y=>{s=y,c=n.now(),o||(o=n.schedule(p,i),r.add(o))},()=>{h(),r.complete()},void 0,()=>{s=o=null}))})}const KB="firebasestorage.googleapis.com",YB="storageBucket";class pr extends V.ZR{constructor(n,e,r=0){super(lN(n),`Firebase Storage: ${e} (${lN(n)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(n){this.status_=n}_codeEquals(n){return lN(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Kt=(()=>((Kt=Kt||{}).UNKNOWN="unknown",Kt.OBJECT_NOT_FOUND="object-not-found",Kt.BUCKET_NOT_FOUND="bucket-not-found",Kt.PROJECT_NOT_FOUND="project-not-found",Kt.QUOTA_EXCEEDED="quota-exceeded",Kt.UNAUTHENTICATED="unauthenticated",Kt.UNAUTHORIZED="unauthorized",Kt.UNAUTHORIZED_APP="unauthorized-app",Kt.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Kt.INVALID_CHECKSUM="invalid-checksum",Kt.CANCELED="canceled",Kt.INVALID_EVENT_NAME="invalid-event-name",Kt.INVALID_URL="invalid-url",Kt.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Kt.NO_DEFAULT_BUCKET="no-default-bucket",Kt.CANNOT_SLICE_BLOB="cannot-slice-blob",Kt.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Kt.NO_DOWNLOAD_URL="no-download-url",Kt.INVALID_ARGUMENT="invalid-argument",Kt.INVALID_ARGUMENT_COUNT="invalid-argument-count",Kt.APP_DELETED="app-deleted",Kt.INVALID_ROOT_OPERATION="invalid-root-operation",Kt.INVALID_FORMAT="invalid-format",Kt.INTERNAL_ERROR="internal-error",Kt.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Kt))();function lN(i){return"storage/"+i}function cN(){return new pr(Kt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ZB(){return new pr(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QB(){return new pr(Kt.CANCELED,"User canceled the upload/download.")}function XB(){return new pr(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ob(i){return new pr(Kt.INVALID_ARGUMENT,i)}function JB(){return new pr(Kt.APP_DELETED,"The Firebase app was deleted.")}function eV(i){return new pr(Kt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function XE(i,n){return new pr(Kt.INVALID_FORMAT,"String does not match format '"+i+"': "+n)}function JE(i){throw new pr(Kt.INTERNAL_ERROR,"Internal error: "+i)}class us{constructor(n,e){this.bucket=n,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,e){let r;try{r=us.makeFromUrl(n,e)}catch{return new us(n,"")}if(""===r.path)return r;throw function $8(i){return new pr(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}(n)}static makeFromUrl(n,e){let r=null;const o="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+o+"(/(.*))?$","i");function y(Te){Te.path_=decodeURIComponent(Te.path)}const I=e.replace(/[.]/g,"\\."),fe=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Te){"/"===Te.path.charAt(Te.path.length-1)&&(Te.path_=Te.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${e===KB?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Te=0;Te<fe.length;Te++){const Fe=fe[Te],qe=Fe.regex.exec(n);if(qe){let It=qe[Fe.indices.path];It||(It=""),r=new us(qe[Fe.indices.bucket],It),Fe.postModify(r);break}}if(null==r)throw function j8(i){return new pr(Kt.INVALID_URL,"Invalid URL '"+i+"'.")}(n);return r}}class Y8{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function GA(i){return"string"==typeof i||i instanceof String}function tV(i){return dN()&&i instanceof Blob}function dN(){return typeof Blob<"u"&&!(0,V.UG)()}function uN(i,n,e,r){if(r<n)throw Ob(`Invalid value for '${i}'. Expected ${n} or greater.`);if(r>e)throw Ob(`Invalid value for '${i}'. Expected ${e} or less.`)}function Nh(i,n,e){let r=n;return null==e&&(r=`https://${n}`),`${e}://${r}/v0${i}`}function nV(i){const n=encodeURIComponent;let e="?";for(const r in i)i.hasOwnProperty(r)&&(e=e+(n(r)+"=")+n(i[r])+"&");return e=e.slice(0,-1),e}var na=(()=>((na=na||{})[na.NO_ERROR=0]="NO_ERROR",na[na.NETWORK_ERROR=1]="NETWORK_ERROR",na[na.ABORT=2]="ABORT",na))();function iV(i,n){const e=i>=500&&i<600,o=-1!==[408,429].indexOf(i),s=-1!==n.indexOf(i);return e||o||s}class tG{constructor(n,e,r,o,s,c,h,p,y,w,I,A=!0){this.url_=n,this.method_=e,this.headers_=r,this.body_=o,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=I,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,U)=>{this.resolve_=P,this.reject_=U,this.start_()})}start_(){const e=(r,o)=>{const s=this.resolve_,c=this.reject_,h=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function X8(i){return void 0!==i}(p)?s():s(p)}catch(p){c(p)}else if(null!==h){const p=cN();p.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,p):p)}else c(o.canceled?this.appDelete_?JB():QB():ZB())};this.canceled_?e(0,new WA(!1,null,!0)):this.backoffId_=function Z8(i,n,e){let r=1,o=null,s=null,c=!1,h=0;function p(){return 2===h}let y=!1;function w(...Q){y||(y=!0,n.apply(null,Q))}function I(Q){o=setTimeout(()=>{o=null,i(P,p())},Q)}function A(){s&&clearTimeout(s)}function P(Q,...me){if(y)return void A();if(Q)return A(),void w.call(null,Q,...me);if(p()||c)return A(),void w.call(null,Q,...me);let fe;r<64&&(r*=2),1===h?(h=2,fe=0):fe=1e3*(r+Math.random()),I(fe)}let U=!1;function G(Q){U||(U=!0,A(),!y&&(null!==o?(Q||(h=2),clearTimeout(o),I(0)):Q||(h=1)))}return I(0),s=setTimeout(()=>{c=!0,G(!0)},e),G}((r,o)=>{if(o)return void r(!1,new WA(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===na.NO_ERROR,p=s.getStatus();if(!h||iV(p,this.additionalRetryCodes_)&&this.retry){const w=s.getErrorCode()===na.ABORT;return void r(!1,new WA(!1,null,w))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new WA(y,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function Q8(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class WA{constructor(n,e,r){this.wasSuccessCode=n,this.connection=e,this.canceled=!!r}}function lG(...i){const n=function aG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==n){const e=new n;for(let r=0;r<i.length;r++)e.append(i[r]);return e.getBlob()}if(dN())return new Blob(i);throw new pr(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const La={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hN{constructor(n,e){this.data=n,this.contentType=e||null}}function fN(i,n){switch(i){case La.RAW:return new hN(rV(n));case La.BASE64:case La.BASE64URL:return new hN(oV(i,n));case La.DATA_URL:return new hN(function hG(i){const n=new sV(i);return n.base64?oV(La.BASE64,n.rest):function uG(i){let n;try{n=decodeURIComponent(i)}catch{throw XE(La.DATA_URL,"Malformed data URL.")}return rV(n)}(n.rest)}(n),function fG(i){return new sV(i).contentType}(n))}throw cN()}function rV(i){const n=[];for(let e=0;e<i.length;e++){let r=i.charCodeAt(e);r<=127?n.push(r):r<=2047?n.push(192|r>>6,128|63&r):55296==(64512&r)?e<i.length-1&&56320==(64512&i.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&i.charCodeAt(++e),n.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):n.push(239,191,189):56320==(64512&r)?n.push(239,191,189):n.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(n)}function oV(i,n){switch(i){case La.BASE64:{const o=-1!==n.indexOf("-"),s=-1!==n.indexOf("_");if(o||s)throw XE(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case La.BASE64URL:{const o=-1!==n.indexOf("+"),s=-1!==n.indexOf("/");if(o||s)throw XE(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function dG(i){if(typeof atob>"u")throw function K8(i){return new pr(Kt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(i)}(n)}catch(o){throw o.message.includes("polyfill")?o:XE(i,"Invalid character found")}const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r}class sV{constructor(n){this.base64=!1,this.contentType=null;const e=n.match(/^data:([^,]+)?,/);if(null===e)throw XE(La.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function mG(i,n){return i.length>=n.length&&i.substring(i.length-n.length)===n}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=n.substring(n.indexOf(",")+1)}}class Gd{constructor(n,e){let r=0,o="";tV(n)?(this.data_=n,r=n.size,o=n.type):n instanceof ArrayBuffer?(e?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),r=this.data_.length):n instanceof Uint8Array&&(e?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),r=n.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(n,e){if(tV(this.data_)){const o=function cG(i,n,e){return i.webkitSlice?i.webkitSlice(n,e):i.mozSlice?i.mozSlice(n,e):i.slice?i.slice(n,e):null}(this.data_,n,e);return null===o?null:new Gd(o)}{const r=new Uint8Array(this.data_.buffer,n,e-n);return new Gd(r,!0)}}static getBlob(...n){if(dN()){const e=n.map(r=>r instanceof Gd?r.data_:r);return new Gd(lG.apply(null,e))}{const e=n.map(c=>GA(c)?fN(La.RAW,c).data:c.data_);let r=0;e.forEach(c=>{r+=c.byteLength});const o=new Uint8Array(r);let s=0;return e.forEach(c=>{for(let h=0;h<c.length;h++)o[s++]=c[h]}),new Gd(o,!0)}}uploadData(){return this.data_}}function mN(i){let n;try{n=JSON.parse(i)}catch{return null}return function eG(i){return"object"==typeof i&&!Array.isArray(i)}(n)?n:null}function aV(i){const n=i.lastIndexOf("/",i.length-2);return-1===n?i:i.slice(n+1)}function _G(i,n){return n}class Rs{constructor(n,e,r,o){this.server=n,this.local=e||n,this.writable=!!r,this.xform=o||_G}}let qA=null;function eC(){if(qA)return qA;const i=[];i.push(new Rs("bucket")),i.push(new Rs("generation")),i.push(new Rs("metageneration")),i.push(new Rs("name","fullPath",!0));const e=new Rs("name");e.xform=function n(s,c){return function yG(i){return!GA(i)||i.length<2?i:aV(i)}(c)},i.push(e);const o=new Rs("size");return o.xform=function r(s,c){return void 0!==c?Number(c):c},i.push(o),i.push(new Rs("timeCreated")),i.push(new Rs("updated")),i.push(new Rs("md5Hash",null,!0)),i.push(new Rs("cacheControl",null,!0)),i.push(new Rs("contentDisposition",null,!0)),i.push(new Rs("contentEncoding",null,!0)),i.push(new Rs("contentLanguage",null,!0)),i.push(new Rs("contentType",null,!0)),i.push(new Rs("metadata","customMetadata",!0)),qA=i,qA}function lV(i,n,e){const r=mN(n);return null===r?null:function bG(i,n,e){const r={type:"file"},o=e.length;for(let s=0;s<o;s++){const c=e[s];r[c.local]=c.xform(r,n[c.server])}return function vG(i,n){Object.defineProperty(i,"ref",{get:function e(){const s=new us(i.bucket,i.fullPath);return n._makeStorageReference(s)}})}(r,i),r}(i,r,e)}function pN(i,n){const e={},r=n.length;for(let o=0;o<r;o++){const s=n[o];s.writable&&(e[s.server]=i[s.local])}return JSON.stringify(e)}const cV="prefixes",dV="items";class Wd{constructor(n,e,r,o){this.url=n,this.method=e,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qd(i){if(!i)throw cN()}function KA(i,n){return function e(r,o){const s=lV(i,o,n);return qd(null!==s),s}}function Nb(i){return function n(e,r){let o;return o=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function H8(){return new pr(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function V8(){return new pr(Kt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function B8(i){return new pr(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===e.getStatus()?function z8(i){return new pr(Kt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}(i.path):r,o.status=e.getStatus(),o.serverResponse=r.serverResponse,o}}function tC(i){const n=Nb(i);return function e(r,o){let s=n(r,o);return 404===r.getStatus()&&(s=function U8(i){return new pr(Kt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}(i.path)),s.serverResponse=o.serverResponse,s}}function uV(i,n,e){const o=Nh(n.fullServerUrl(),i.host,i._protocol),c=i.maxOperationRetryTime,h=new Wd(o,"GET",KA(i,e),c);return h.errorHandler=tC(n),h}function IG(i,n,e,r,o){const s={};s.prefix=n.isRoot?"":n.path+"/",e&&e.length>0&&(s.delimiter=e),r&&(s.pageToken=r),o&&(s.maxResults=o);const h=Nh(n.bucketOnlyServerUrl(),i.host,i._protocol),y=i.maxOperationRetryTime,w=new Wd(h,"GET",function CG(i,n){return function e(r,o){const s=function EG(i,n,e){const r=mN(e);return null===r?null:function xG(i,n,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[cV])for(const o of e[cV]){const s=o.replace(/\/$/,""),c=i._makeStorageReference(new us(n,s));r.prefixes.push(c)}if(e[dV])for(const o of e[dV]){const s=i._makeStorageReference(new us(n,o.name));r.items.push(s)}return r}(i,n,r)}(i,n,o);return qd(null!==s),s}}(i,n.bucket),y);return w.urlParams=s,w.errorHandler=Nb(n),w}function fV(i,n,e){const r=Object.assign({},e);return r.fullPath=i.path,r.size=n.size(),r.contentType||(r.contentType=function MG(i,n){return i&&i.contentType||n&&n.type()||"application/octet-stream"}(null,n)),r}class YA{constructor(n,e,r,o){this.current=n,this.total=e,this.finalized=!!r,this.metadata=o||null}}function gN(i,n){let e=null;try{e=i.getResponseHeader("X-Goog-Upload-Status")}catch{qd(!1)}return qd(!!e&&-1!==(n||["active"]).indexOf(e)),e}const OG={STATE_CHANGED:"state_changed"},Ps={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _N(i){switch(i){case"running":case"pausing":case"canceling":return Ps.RUNNING;case"paused":return Ps.PAUSED;case"success":return Ps.SUCCESS;case"canceled":return Ps.CANCELED;default:return Ps.ERROR}}class NG{constructor(n,e,r){if(function J8(i){return"function"==typeof i}(n)||null!=e||null!=r)this.next=n,this.error=e??void 0,this.complete=r??void 0;else{const s=n;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Fb(i){return(...n)=>{Promise.resolve().then(()=>i(...n))}}let gV=null;class FG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=na.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=na.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=na.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,e,r,o){if(this.sent_)throw JE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,n,!0),void 0!==o)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw JE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw JE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw JE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw JE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class LG extends FG{initXhr(){this.xhr_.responseType="text"}}function Ac(){return gV?gV():new LG}class _V{constructor(n,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=e,this._metadata=r,this._mappings=eC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(Kt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(iV(o.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();o=ZB()}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(Kt.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,s)=>{this._resolve=o,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const n=this._transferred;return e=>this._updateProgress(n+e)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":n(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,e)=>{const r=function kG(i,n,e,r,o){const s=n.bucketOnlyServerUrl(),c=fV(n,r,o),h={name:c.fullPath},p=Nh(s,i.host,i._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},I=pN(c,e),U=new Wd(p,"POST",function P(G){let Q;gN(G);try{Q=G.getResponseHeader("X-Goog-Upload-URL")}catch{qd(!1)}return qd(GA(Q)),Q},i.maxUploadRetryTime);return U.urlParams=h,U.headers=w,U.body=I,U.errorHandler=Nb(n),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Ac,n,e);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((e,r)=>{const o=function RG(i,n,e,r){const p=new Wd(e,"POST",function s(y){const w=gN(y,["active","final"]);let I=null;try{I=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qd(!1)}I||qd(!1);const A=Number(I);return qd(!isNaN(A)),new YA(A,r.size(),"final"===w)},i.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Nb(n),p}(this._ref.storage,this._ref._location,n,this._blob),s=this._ref.storage._makeRequest(o,Ac,e,r);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,e=new YA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,s)=>{let c;try{c=function PG(i,n,e,r,o,s,c,h){const p=new YA(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function W8(){return new pr(Kt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let w=y;o>0&&(w=Math.min(w,o));const I=p.current;let P="";P=0===w?"finalize":y===w?"upload, finalize":"upload";const U={"X-Goog-Upload-Command":P,"X-Goog-Upload-Offset":`${p.current}`},G=r.slice(I,I+w);if(null===G)throw XB();const fe=new Wd(e,"POST",function Q(Te,Fe){const qe=gN(Te,["active","final"]),Xe=p.current+w,It=r.size();let ln;return ln="final"===qe?KA(n,s)(Te,Fe):null,new YA(Xe,It,"final"===qe,ln)},n.maxUploadRetryTime);return fe.headers=U,fe.body=G.uploadData(),fe.progressCallback=h||null,fe.errorHandler=Nb(i),fe}(this._ref._location,this._ref.storage,r,this._blob,n,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Ac,o,s,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,e)=>{const r=uV(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,Ac,n,e);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,e)=>{const r=function mV(i,n,e,r,o){const s=n.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let fe="";for(let Te=0;Te<2;Te++)fe+=Math.random().toString().slice(2);return fe}();c["Content-Type"]="multipart/related; boundary="+p;const y=fV(n,r,o),w=pN(y,e),P=Gd.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===P)throw XB();const U={name:y.fullPath},G=Nh(s,i.host,i._protocol),me=i.maxUploadRetryTime,Ce=new Wd(G,"POST",KA(i,e),me);return Ce.urlParams=U,Ce.headers=c,Ce.body=P.uploadData(),Ce.errorHandler=Nb(n),Ce}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Ac,n,e);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const e=this._transferred;this._transferred=n,this._transferred!==e&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=n,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=n,this._notifyObservers();break;case"canceled":this._error=QB(),this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=_N(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,e,r,o){const s=new NG(e||void 0,r||void 0,o||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(n,e){return this._promise.then(n,e)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const e=this._observers.indexOf(n);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(_N(this._state)){case Ps.SUCCESS:Fb(this._resolve.bind(null,this.snapshot))();break;case Ps.CANCELED:case Ps.ERROR:Fb(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(_N(this._state)){case Ps.RUNNING:case Ps.PAUSED:n.next&&Fb(n.next.bind(n,this.snapshot))();break;case Ps.SUCCESS:n.complete&&Fb(n.complete.bind(n))();break;default:n.error&&Fb(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class I_{constructor(n,e){this._service=n,this._location=e instanceof us?e:us.makeFromUrl(e,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,e){return new I_(n,e)}get root(){const n=new us(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aV(this._location.path)}get storage(){return this._service}get parent(){const n=function pG(i){if(0===i.length)return null;const n=i.lastIndexOf("/");return-1===n?"":i.slice(0,n)}(this._location.path);if(null===n)return null;const e=new us(this._location.bucket,n);return new I_(this._service,e)}_throwIfRoot(n){if(""===this._location.path)throw eV(n)}}function vV(i,n,e){return yN.apply(this,arguments)}function yN(){return yN=(0,xe.Z)(function*(i,n,e){const o=yield bV(i,{pageToken:e});n.prefixes.push(...o.prefixes),n.items.push(...o.items),null!=o.nextPageToken&&(yield vV(i,n,o.nextPageToken))}),yN.apply(this,arguments)}function bV(i,n){null!=n&&"number"==typeof n.maxResults&&uN("options.maxResults",1,1e3,n.maxResults);const e=n||{},r=IG(i.storage,i._location,"/",e.pageToken,e.maxResults);return i.storage.makeRequestWithTokens(r,Ac)}function YG(i){i._throwIfRoot("getDownloadURL");const n=function TG(i,n,e){const o=Nh(n.fullServerUrl(),i.host,i._protocol),c=i.maxOperationRetryTime,h=new Wd(o,"GET",function DG(i,n){return function e(r,o){const s=lV(i,o,n);return qd(null!==s),function wG(i,n,e,r){const o=mN(n);if(null===o||!GA(o.downloadTokens))return null;const s=o.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const I=i.fullPath;return Nh("/b/"+c(i.bucket)+"/o/"+c(I),e,r)+nV({alt:"media",token:y})})[0]}(s,o,i.host,i._protocol)}}(i,e),c);return h.errorHandler=tC(n),h}(i.storage,i._location,eC());return i.storage.makeRequestWithTokens(n,Ac).then(e=>{if(null===e)throw function q8(){return new pr(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function wV(i,n){const e=function gG(i,n){const e=n.split("/").filter(r=>r.length>0).join("/");return 0===i.length?e:i+"/"+e}(i._location.path,n),r=new us(i._location.bucket,e);return new I_(i.storage,r)}function xV(i,n){if(i instanceof vN){const e=i;if(null==e._bucket)throw function G8(){return new pr(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YB+"' property when initializing the app?")}();const r=new I_(e,e._bucket);return null!=n?xV(r,n):r}return void 0!==n?wV(i,n):i}function JG(i,n){if(n&&function QG(i){return/^[A-Za-z]+:\/\//.test(i)}(n)){if(i instanceof vN)return function XG(i,n){return new I_(i,n)}(i,n);throw Ob("To use ref(service, url), the first argument must be a Storage instance.")}return xV(i,n)}function EV(i,n){const e=n?.[YB];return null==e?null:us.makeFromBucketSpec(e,i)}class vN{constructor(n,e,r,o,s){this.app=n,this._authProvider=e,this._appCheckProvider=r,this._url=o,this._firebaseVersion=s,this._bucket=null,this._host=KB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?us.makeFromBucketSpec(o,this._host):EV(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?us.makeFromBucketSpec(this._url,n):EV(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){uN("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){uN("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,xe.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const e=n._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,xe.Z)(function*(){const e=n._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new I_(this,n)}_makeRequest(n,e,r,o,s=!0){if(this._deleted)return new Y8(JB());{const c=function sG(i,n,e,r,o,s,c=!0){const h=nV(i.urlParams),p=i.url+h,y=Object.assign({},i.headers);return function rG(i,n){n&&(i["X-Firebase-GMPID"]=n)}(y,n),function nG(i,n){null!==n&&n.length>0&&(i.Authorization="Firebase "+n)}(y,e),function iG(i,n){i["X-Firebase-Storage-Version"]="webjs/"+(n??"AppManager")}(y,s),function oG(i,n){null!==n&&(i["X-Firebase-AppCheck"]=n)}(y,r),new tG(p,i.method,y,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,c)}(n,this._appId,r,o,e,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(n,e){var r=this;return(0,xe.Z)(function*(){const[o,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,e,o,s).getPromise()})()}}const CV="@firebase/storage";function TV(i,n){return JG(i=(0,V.m9)(i),n)}function cW(i,{instanceIdentifier:n}){const e=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new vN(e,r,o,n,$n.SDK_VERSION)}!function dW(){(0,$n._registerComponent)(new Qi.wA("storage",cW,"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(CV,"0.11.2",""),(0,$n.registerVersion)(CV,"0.11.2","esm2017")}();class ZA{constructor(n,e,r){this._delegate=n,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class AV{constructor(n,e){this._delegate=n,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ZA(this._delegate.snapshot,this,this._ref)}then(n,e){return this._delegate.then(r=>{if(n)return n(new ZA(r,this,this._ref))},e)}on(n,e,r,o){let s;return e&&(s="function"==typeof e?c=>e(new ZA(c,this,this._ref)):{next:e.next?c=>e.next(new ZA(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(n,s,r||void 0,o||void 0)}}class MV{constructor(n,e){this._delegate=n,this._service=e}get prefixes(){return this._delegate.prefixes.map(n=>new Fh(n,this._service))}get items(){return this._delegate.items.map(n=>new Fh(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Fh{constructor(n,e){this._delegate=n,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const e=function lW(i,n){return wV(i,n)}(this._delegate,n);return new Fh(e,this.storage)}get root(){return new Fh(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new Fh(n,this.storage)}put(n,e){return this._throwIfRoot("put"),new AV(function tW(i,n,e){return function $G(i,n,e){return i._throwIfRoot("uploadBytesResumable"),new _V(i,new Gd(n),e)}(i=(0,V.m9)(i),n,e)}(this._delegate,n,e),this)}putString(n,e=La.RAW,r){this._throwIfRoot("putString");const o=fN(e,n),s=Object.assign({},r);return null==s.contentType&&null!=o.contentType&&(s.contentType=o.contentType),new AV(new _V(this._delegate,new Gd(o.data,!0),s),this)}listAll(){return function oW(i){return function WG(i){const n={prefixes:[],items:[]};return vV(i,n).then(()=>n)}(i=(0,V.m9)(i))}(this._delegate).then(n=>new MV(n,this.storage))}list(n){return function rW(i,n){return bV(i=(0,V.m9)(i),n)}(this._delegate,n||void 0).then(e=>new MV(e,this.storage))}getMetadata(){return function nW(i){return function qG(i){i._throwIfRoot("getMetadata");const n=uV(i.storage,i._location,eC());return i.storage.makeRequestWithTokens(n,Ac)}(i=(0,V.m9)(i))}(this._delegate)}updateMetadata(n){return function iW(i,n){return function KG(i,n){i._throwIfRoot("updateMetadata");const e=function SG(i,n,e,r){const s=Nh(n.fullServerUrl(),i.host,i._protocol),h=pN(e,r),y=i.maxOperationRetryTime,w=new Wd(s,"PATCH",KA(i,r),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=h,w.errorHandler=tC(n),w}(i.storage,i._location,n,eC());return i.storage.makeRequestWithTokens(e,Ac)}(i=(0,V.m9)(i),n)}(this._delegate,n)}getDownloadURL(){return function sW(i){return YG(i=(0,V.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function aW(i){return function ZG(i){i._throwIfRoot("deleteObject");const n=function AG(i,n){const r=Nh(n.fullServerUrl(),i.host,i._protocol),h=new Wd(r,"DELETE",function c(p,y){},i.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=tC(n),h}(i.storage,i._location);return i.storage.makeRequestWithTokens(n,Ac)}(i=(0,V.m9)(i))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw eV(n)}}class kV{constructor(n,e){this.app=n,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(RV(n))throw Ob("ref() expected a child path but got a URL, use refFromURL instead.");return new Fh(TV(this._delegate,n),this)}refFromURL(n){if(!RV(n))throw Ob("refFromURL() expected a full URL but got a child path, use ref() instead.");try{us.makeFromUrl(n,this._delegate.host)}catch{throw Ob("refFromUrl() expected a valid full URL but got an invalid one.")}return new Fh(TV(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,e,r={}){!function SV(i,n,e,r={}){!function eW(i,n,e,r={}){i.host=`${n}:${e}`,i._protocol="http";const{mockUserToken:o}=r;o&&(i._overrideAuthToken="string"==typeof o?o:(0,V.Sg)(o,i.app.options.projectId))}(i,n,e,r)}(this._delegate,n,e,r)}}function RV(i){return/^[A-Za-z]+:\/\//.test(i)}function mW(i,{instanceIdentifier:n}){const e=i.getProvider("app-compat").getImmediate(),r=i.getProvider("storage").getImmediate({identifier:n});return new kV(e,r)}function PV(i){const n=function gW(i){return new Bi.y(n=>{const e=c=>n.next(c);e(i.snapshot);const s=i.on("state_changed",e);return i.then(c=>{e(c),n.complete()},c=>{e(i.snapshot),(c=>{n.error(c)})(c)}),function(){s()}}).pipe(QE(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,_t.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function QA(i){return{getDownloadURL:()=>(0,mt.of)(void 0).pipe(qt.fc,(0,Jn.w)(()=>i.getDownloadURL()),qt.iC),getMetadata:()=>(0,mt.of)(void 0).pipe(qt.fc,(0,Jn.w)(()=>i.getMetadata()),qt.iC),delete:()=>(0,rn.D)(i.delete()),child:n=>QA(i.child(n)),updateMetadata:n=>(0,rn.D)(i.updateMetadata(n)),put:(n,e)=>PV(i.put(n,e)),putString:(n,e,r)=>PV(i.putString(n,e,r)),list:n=>(0,rn.D)(i.list(n)),listAll:()=>(0,rn.D)(i.listAll())}}!function pW(i){const n={TaskState:Ps,TaskEvent:OG,StringFormat:La,Storage:kV,Reference:Fh};i.INTERNAL.registerComponent(new Qi.wA("storage-compat",mW,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.3.2")}(_0.Z);const _W=new d.OlP("angularfire2.storageBucket"),yW=new d.OlP("angularfire2.storage.maxUploadRetryTime"),vW=new d.OlP("angularfire2.storage.maxOperationRetryTime"),bW=new d.OlP("angularfire2.storage.use-emulator");let wW=(()=>{class i{constructor(e,r,o,s,c,h,p,y,w,I){const A=(0,Ui.on)(e,c,r);this.storage=(0,Ui.cc)(`${A.name}.storage.${o}`,"AngularFireStorage",A.name,()=>{const P=c.runOutsideAngular(()=>A.storage(o||void 0)),U=w;return U&&P.useEmulator(...U),p&&P.setMaxUploadRetryTime(p),y&&P.setMaxOperationRetryTime(y),P},[p,y])}ref(e){return QA(this.storage.ref(e))}refFromURL(e){return QA(this.storage.refFromURL(e))}upload(e,r,o){return QA(this.storage.ref(e)).put(r,o)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Ui.Dh),d.LFG(Ui.xv,8),d.LFG(_W,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qt.HU),d.LFG(yW,8),d.LFG(vW,8),d.LFG(bW,8),d.LFG(Bf,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),xW=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})(),EW=(()=>{class i{constructor(){jp.Z.registerVersion("angularfire",qt.q4.full,"gcs-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[wW],imports:[xW]}),i})();var CW=H(6878);class NV{constructor(){return(0,qt.vb)("auth")}}class xN{constructor(n){return n}}const FV="firestore",EN=new d.OlP("angularfire2.firestore-instances");function MW(i){return(n,e)=>{const r=n.runOutsideAngular(()=>i(e));return new xN(r)}}const kW={provide:class SW{constructor(){return(0,qt.vb)(FV)}},deps:[[new d.FiY,EN]]},RW={provide:xN,useFactory:function AW(i,n){const e=(0,qt.JM)(FV,i,n);return e&&new xN(e)},deps:[[new d.FiY,EN],Ws]};let PW=(()=>{class i{constructor(){(0,is.KN)("angularfire",qt.q4.full,"fst")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[RW,kW]}),i})();function OW(i,...n){return{ngModule:PW,providers:[{provide:EN,useFactory:MW(i),multi:!0,deps:[d.R0b,d.zs3,qt.HU,vs,[new d.FiY,NV],[new d.FiY,Bf],...n]}]}}const NW=(0,qt.u3)(y$,!0),{isArray:FW}=Array,{getPrototypeOf:LW,prototype:UW,keys:BW}=Object;function LV(i){if(1===i.length){const n=i[0];if(FW(n))return{args:n,keys:null};if(function VW(i){return i&&"object"==typeof i&&LW(i)===UW}(n)){const e=BW(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:i,keys:null}}const{isArray:HW}=Array;function CN(i){return(0,_t.U)(n=>function zW(i,n){return HW(n)?i(...n):i(n)}(i,n))}function UV(i,n){return i.reduce((e,r,o)=>(e[r]=n[o],e),{})}function BV(...i){const n=(0,dd.jO)(i),{args:e,keys:r}=LV(i),o=new Bi.y(s=>{const{length:c}=e;if(!c)return void s.complete();const h=new Array(c);let p=c,y=c;for(let w=0;w<c;w++){let I=!1;(0,Da.Xf)(e[w]).subscribe((0,Ii.x)(s,A=>{I||(I=!0,y--),h[w]=A},()=>p--,void 0,()=>{(!p||!I)&&(y||s.next(r?UV(r,h):h),s.complete())}))}});return n?o.pipe(CN(n)):o}let VV=(()=>{class i{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Qsj),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i}),i})(),T_=(()=>{class i extends VV{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,features:[d.qOj]}),i})();const Dl=new d.OlP("NgValueAccessor"),$W={provide:Dl,useExisting:(0,d.Gpc)(()=>nC),multi:!0},WW=new d.OlP("CompositionEventMode");let nC=(()=>{class i extends VV{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function GW(){const i=F()?F().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(WW,8))},i.\u0275dir=d.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&d.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[d._Bn([$W]),d.qOj]}),i})();function ap(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function zV(i){return null!=i&&"number"==typeof i.length}const hs=new d.OlP("NgValidators"),lp=new d.OlP("NgAsyncValidators"),qW=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class KW{static min(n){return function jV(i){return n=>{if(ap(n.value)||ap(i))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<i?{min:{min:i,actual:n.value}}:null}}(n)}static max(n){return function $V(i){return n=>{if(ap(n.value)||ap(i))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>i?{max:{max:i,actual:n.value}}:null}}(n)}static required(n){return function GV(i){return ap(i.value)?{required:!0}:null}(n)}static requiredTrue(n){return function WV(i){return!0===i.value?null:{required:!0}}(n)}static email(n){return function qV(i){return ap(i.value)||qW.test(i.value)?null:{email:!0}}(n)}static minLength(n){return function KV(i){return n=>ap(n.value)||!zV(n.value)?null:n.value.length<i?{minlength:{requiredLength:i,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function YV(i){return n=>zV(n.value)&&n.value.length>i?{maxlength:{requiredLength:i,actualLength:n.value.length}}:null}(n)}static pattern(n){return function ZV(i){if(!i)return XA;let n,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),n=new RegExp(e)):(e=i.toString(),n=i),r=>{if(ap(r.value))return null;const o=r.value;return n.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(n)}static nullValidator(n){return null}static compose(n){return n3(n)}static composeAsync(n){return r3(n)}}function XA(i){return null}function QV(i){return null!=i}function XV(i){return(0,d.QGY)(i)?(0,rn.D)(i):i}function JV(i){let n={};return i.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function e3(i,n){return n.map(e=>e(i))}function t3(i){return i.map(n=>function YW(i){return!i.validate}(n)?n:e=>n.validate(e))}function n3(i){if(!i)return null;const n=i.filter(QV);return 0==n.length?null:function(e){return JV(e3(e,n))}}function DN(i){return null!=i?n3(t3(i)):null}function r3(i){if(!i)return null;const n=i.filter(QV);return 0==n.length?null:function(e){return BV(e3(e,n).map(XV)).pipe((0,_t.U)(JV))}}function IN(i){return null!=i?r3(t3(i)):null}function o3(i,n){return null===i?[n]:Array.isArray(i)?[...i,n]:[i,n]}function s3(i){return i._rawValidators}function a3(i){return i._rawAsyncValidators}function TN(i){return i?Array.isArray(i)?i:[i]:[]}function JA(i,n){return Array.isArray(i)?i.includes(n):i===n}function l3(i,n){const e=TN(n);return TN(i).forEach(o=>{JA(e,o)||e.push(o)}),e}function c3(i,n){return TN(n).filter(e=>!JA(i,e))}class d3{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=DN(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=IN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Os extends d3{get formDirective(){return null}get path(){return null}}class Lh extends d3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class u3{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let SN=(()=>{class i extends u3{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Lh,2))},i.\u0275dir=d.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),i})();const iC="VALID",tM="INVALID",Lb="PENDING",rC="DISABLED";function kN(i){return(nM(i)?i.validators:i)||null}function RN(i,n){return(nM(n)?n.asyncValidators:i)||null}function nM(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class p3{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===iC}get invalid(){return this.status===tM}get pending(){return this.status==Lb}get disabled(){return this.status===rC}get enabled(){return this.status!==rC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(l3(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(l3(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(c3(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(c3(n,this._rawAsyncValidators))}hasValidator(n){return JA(this._rawValidators,n)}hasAsyncValidator(n){return JA(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Lb,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=rC,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=iC,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iC||this.status===Lb)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rC:iC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Lb,this._hasOwnPendingAsyncValidator=!0;const e=XV(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(n,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?rC:this.errors?tM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lb)?Lb:this._anyControlsHaveStatus(tM)?tM:iC}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){nM(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function e9(i){return Array.isArray(i)?DN(i):i||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function t9(i){return Array.isArray(i)?IN(i):i||null}(this._rawAsyncValidators)}}class PN extends p3{constructor(n,e,r){super(kN(e),RN(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function m3(i,n,e){i._forEachChild((r,o)=>{if(void 0===e[o])throw new d.vHH(1002,"")})})(this,0,n),Object.keys(n).forEach(r=>{(function f3(i,n,e){const r=i.controls;if(!(n?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(r=>{const o=this.controls[r];o&&o.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,o)=>{r.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((o,s)=>{r=e(r,o,s)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const Ub=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>iM}),iM="always";function oC(i,n,e=iM){ON(i,n),n.valueAccessor.writeValue(i.value),(i.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(i.disabled),function r9(i,n){n.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&g3(i,n)})}(i,n),function s9(i,n){const e=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};i.registerOnChange(e),n._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,n),function o9(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&g3(i,n),"submit"!==i.updateOn&&i.markAsTouched()})}(i,n),function i9(i,n){if(n.valueAccessor.setDisabledState){const e=r=>{n.valueAccessor.setDisabledState(r)};i.registerOnDisabledChange(e),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,n)}function oM(i,n,e=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),aM(i,n),i&&(n._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function sM(i,n){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function ON(i,n){const e=s3(i);null!==n.validator?i.setValidators(o3(e,n.validator)):"function"==typeof e&&i.setValidators([e]);const r=a3(i);null!==n.asyncValidator?i.setAsyncValidators(o3(r,n.asyncValidator)):"function"==typeof r&&i.setAsyncValidators([r]);const o=()=>i.updateValueAndValidity();sM(n._rawValidators,o),sM(n._rawAsyncValidators,o)}function aM(i,n){let e=!1;if(null!==i){if(null!==n.validator){const o=s3(i);if(Array.isArray(o)&&o.length>0){const s=o.filter(c=>c!==n.validator);s.length!==o.length&&(e=!0,i.setValidators(s))}}if(null!==n.asyncValidator){const o=a3(i);if(Array.isArray(o)&&o.length>0){const s=o.filter(c=>c!==n.asyncValidator);s.length!==o.length&&(e=!0,i.setAsyncValidators(s))}}}const r=()=>{};return sM(n._rawValidators,r),sM(n._rawAsyncValidators,r),e}function g3(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function _3(i,n){ON(i,n)}function y3(i,n){i._syncPendingControls(),n.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const u9={provide:Os,useExisting:(0,d.Gpc)(()=>lM)},sC=(()=>Promise.resolve())();let lM=(()=>{class i extends Os{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new PN({},DN(e),IN(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){sC.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),oC(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){sC.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){sC.then(()=>{const r=this._findContainer(e.path),o=new PN({});_3(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){sC.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){sC.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,y3(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(hs,10),d.Y36(lp,10),d.Y36(Ub,8))},i.\u0275dir=d.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([u9]),d.qOj]}),i})();function v3(i,n){const e=i.indexOf(n);e>-1&&i.splice(e,1)}function b3(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const w3=class extends p3{constructor(n=null,e,r){super(kN(e),RN(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nM(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=b3(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){v3(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){v3(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){b3(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},m9={provide:Lh,useExisting:(0,d.Gpc)(()=>cM)},C3=(()=>Promise.resolve())();let cM=(()=>{class i extends Lh{constructor(e,r,o,s,c,h){super(),this._changeDetectorRef=c,this.callSetDisabledState=h,this.control=new w3,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function LN(i,n){if(!n)return null;let e,r,o;return Array.isArray(n),n.forEach(s=>{s.constructor===nC?e=s:function c9(i){return Object.getPrototypeOf(i.constructor)===T_}(s)?r=s:o=s}),o||r||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function FN(i,n){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){oC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){C3.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,o=0!==r&&(0,d.VuI)(r);C3.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function rM(i,n){return[...n.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Os,9),d.Y36(hs,10),d.Y36(lp,10),d.Y36(Dl,10),d.Y36(d.sBO,8),d.Y36(Ub,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([m9]),d.qOj,d.TTD]}),i})(),I3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const w9={provide:Os,useExisting:(0,d.Gpc)(()=>dM)};let jN,dM=(()=>{class i extends Os{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(aM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return oC(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){oM(e.control||null,e,!1),function d9(i,n){const e=i.indexOf(n);e>-1&&i.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,y3(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,o=this.form.get(e.path);r!==o&&(oM(r||null,e),(i=>i instanceof w3)(o)&&(oC(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);_3(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function a9(i,n){return aM(i,n)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ON(this.form,this),this._oldForm&&aM(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(hs,10),d.Y36(lp,10),d.Y36(Ub,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([w9]),d.qOj,d.TTD]}),i})(),B9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[I3]}),i})(),H9=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Ub,useValue:e.callSetDisabledState??iM}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[B9]}),i})();try{jN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{jN=!1}let Bb,zr=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Uc(i){return i===Wa}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!jN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.Lbi))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const $3=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function G3(){if(Bb)return Bb;if("object"!=typeof document||!document)return Bb=new Set($3),Bb;let i=document.createElement("input");return Bb=new Set($3.filter(n=>(i.setAttribute("type",n),i.type===n))),Bb}let aC,uM,A_,$N;function lC(i){return function z9(){if(null==aC&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>aC=!0}))}finally{aC=aC||!1}return aC}()?i:!!i.capture}function cC(){if("object"!=typeof document||!document)return 0;if(null==uM){const i=document.createElement("div"),n=i.style;i.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const e=document.createElement("div"),r=e.style;r.width="2px",r.height="1px",i.appendChild(e),document.body.appendChild(i),uM=0,0===i.scrollLeft&&(i.scrollLeft=1,uM=0===i.scrollLeft?1:2),i.remove()}return uM}function Vb(i){return i.composedPath?i.composedPath()[0]:i.target}var Uh=H(7394),ia=H(5619);function hM(i,...n){return n.length?n.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}var _o=H(9397);function Y3(i){return Cn((n,e)=>i<=e)}function gr(i){return(0,Zi.e)((n,e)=>{(0,Da.Xf)(i).subscribe((0,Ii.x)(e,()=>e.complete(),ly.Z)),!e.closed&&n.subscribe(e)})}function Tn(i){return null!=i&&"false"!=`${i}`}function Z3(i){return Array.isArray(i)?i:[i]}function Bh(i){return i instanceof d.SBq?i.nativeElement:i}var fq=H(7103);function fM(...i){const n=(0,dd.yG)(i),e=(0,dd.jO)(i),{args:r,keys:o}=LV(i);if(0===r.length)return(0,rn.D)([],n);const s=new Bi.y(function mq(i,n,e=Ql.y){return r=>{Q3(n,()=>{const{length:o}=i,s=new Array(o);let c=o,h=o;for(let p=0;p<o;p++)Q3(n,()=>{const y=(0,rn.D)(i[p],n);let w=!1;y.subscribe((0,Ii.x)(r,I=>{s[p]=I,w||(w=!0,h--),h||r.next(e(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,n,o?c=>UV(o,c):Ql.y));return e?s.pipe(CN(e)):s}function Q3(i,n,e){i?(0,fq.f)(e,i,n):n()}const X3=new Set;let M_,pq=(()=>{class i{constructor(e,r){this._platform=e,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_q}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function gq(i,n){if(!X3.has(i))try{M_||(M_=document.createElement("style"),n&&(M_.nonce=n),M_.setAttribute("type","text/css"),document.head.appendChild(M_)),M_.sheet&&(M_.sheet.insertRule(`@media ${i} {body{ }}`,0),X3.add(i))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(zr),d.LFG(d.Ojb,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _q(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let yq=(()=>{class i{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new Ht.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return J3(Z3(e)).some(o=>this._registerQuery(o).mql.matches)}observe(e){let s=fM(J3(Z3(e)).map(c=>this._registerQuery(c).observable));return s=hv(s.pipe(Nr(1)),s.pipe(Y3(1),QE(0))),s.pipe((0,_t.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),s={observable:new Bi.y(c=>{const h=p=>this._zone.run(()=>c.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(gc(r),(0,_t.U)(({matches:c})=>({query:e,matches:c})),gr(this._destroySubject)),mql:r};return this._queries.set(e,s),s}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(pq),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function J3(i){return i.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}class wq{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Ht.x,this._typeaheadSubscription=Uh.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Ht.x,this.change=new Ht.x,n instanceof d.n_E&&(this._itemChangesSubscription=n.changes.subscribe(e=>{if(this._activeItem){const o=e.toArray().indexOf(this._activeItem);o>-1&&o!==this._activeItemIndex&&(this._activeItemIndex=o)}}))}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,_o.b)(e=>this._pressedLetters.push(e)),QE(n),Cn(()=>this._pressedLetters.length>0),(0,_t.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const r=this._getItemsArray();for(let o=1;o<r.length+1;o++){const s=(this._activeItemIndex+o)%r.length,c=r[s];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){const e=this._activeItem;this.updateActiveItem(n),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){const e=n.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!n[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&o){this.setNextItemActive();break}return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&o){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&o){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&o){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&o){const s=this._activeItemIndex+this._pageUpAndDown.delta,c=this._getItemsArray().length;this._setActiveItemByIndex(s<c?s:c-1,-1);break}return;default:return void((o||hM(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const e=this._getItemsArray(),r="number"==typeof n?n:e.indexOf(n);this._activeItem=e[r]??null,this._activeItemIndex=r}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const e=this._getItemsArray();for(let r=1;r<=e.length;r++){const o=(this._activeItemIndex+n*r+e.length)%e.length;if(!this._skipPredicateFn(e[o]))return void this.setActiveItem(o)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){const r=this._getItemsArray();if(r[n]){for(;this._skipPredicateFn(r[n]);)if(!r[n+=e])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof d.n_E?this._items.toArray():this._items}}class n4 extends wq{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}}let i4=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Eq(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const r=function xq(i){try{return i.frameElement}catch{return null}}(function kq(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(r&&(-1===o4(r)||!this.isVisible(r)))return!1;let o=e.nodeName.toLowerCase(),s=o4(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function Aq(i){let n=i.nodeName.toLowerCase(),e="input"===n&&i.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===o?!!e.hasAttribute("controls")&&-1!==s:"video"===o?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,r){return function Mq(i){return!function Dq(i){return function Tq(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function Cq(i){let n=i.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(i)||function Iq(i){return function Sq(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||r4(i))}(e)&&!this.isDisabled(e)&&(r?.ignoreVisibility||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(zr))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function r4(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let n=i.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function o4(i){if(!r4(i))return null;const n=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class Rq{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,r,o,s=!1){this._element=n,this._checker=e,this._ngZone=r,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const r=this._getFirstTabbableElement(e);return r?.focus(n),!!r}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let r=0;r<e.length;r++){const o=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(o)return o}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let r=e.length-1;r>=0;r--){const o=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(o)return o}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(Nr(1)).subscribe(n)}}let Pq=(()=>{class i{constructor(e,r,o){this._checker=e,this._ngZone=r,this._document=o}create(e,r=!1){return new Rq(e,this._checker,this._ngZone,this._document,r)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(i4),d.LFG(d.R0b),d.LFG(ue))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function s4(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function a4(i){const n=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const Oq=new d.OlP("cdk-input-modality-detector-options"),Nq={ignoreKeys:[18,17,224,91,16]},Hb=lC({passive:!0,capture:!0});let Fq=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,r,o,s){this._platform=e,this._mostRecentTarget=null,this._modality=new ia.X(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(h=>h===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Vb(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(s4(c)?"keyboard":"mouse"),this._mostRecentTarget=Vb(c))},this._onTouchstart=c=>{a4(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Vb(c))},this._options={...Nq,...s},this.modalityDetected=this._modality.pipe(Y3(1)),this.modalityChanged=this.modalityDetected.pipe((0,dl.x)()),e.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Hb),o.addEventListener("mousedown",this._onMousedown,Hb),o.addEventListener("touchstart",this._onTouchstart,Hb)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Hb),document.removeEventListener("mousedown",this._onMousedown,Hb),document.removeEventListener("touchstart",this._onTouchstart,Hb))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(zr),d.LFG(d.R0b),d.LFG(ue),d.LFG(Oq,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Uq=new d.OlP("cdk-focus-monitor-default-options"),mM=lC({passive:!0,capture:!0});let pM=(()=>{class i{constructor(e,r,o,s,c){this._ngZone=e,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ht.x,this._rootNodeFocusAndBlurListener=h=>{for(let y=Vb(h);y;y=y.parentElement)"focus"===h.type?this._onFocus(h,y):this._onBlur(h,y)},this._document=s,this._detectionMode=c?.detectionMode||0}monitor(e,r=!1){const o=Bh(e);if(!this._platform.isBrowser||1!==o.nodeType)return(0,mt.of)(null);const s=function G9(i){if(function $9(){if(null==$N){const i=typeof document<"u"?document.head:null;$N=!(!i||!i.createShadowRoot&&!i.attachShadow)}return $N}()){const n=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(o)||this._getDocument(),c=this._elementInfo.get(o);if(c)return r&&(c.checkChildren=!0),c.subject;const h={checkChildren:r,subject:new Ht.x,rootNode:s};return this._elementInfo.set(o,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(e){const r=Bh(e),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(e,r,o){const s=Bh(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const o=this._elementInfo.get(r),s=Vb(e);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(e,r){const o=this._elementInfo.get(r);!o||o.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,mM),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,mM)}),this._rootNodeFocusListenerCount.set(r,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mM),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mM),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,o){this._setClasses(e,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((o,s)=>{(s===e||o.checkChildren&&s.contains(e))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!r||r===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let c=0;c<s.length;c++)if(s[c].contains(r))return!0;return!1}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.R0b),d.LFG(zr),d.LFG(Fq),d.LFG(ue,8),d.LFG(Uq,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const c4="cdk-high-contrast-black-on-white",d4="cdk-high-contrast-white-on-black",WN="cdk-high-contrast-active";let Bq=(()=>{class i{constructor(e,r){this._platform=e,this._document=r,this._breakpointSubscription=(0,d.f3M)(yq).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(e):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(WN,c4,d4),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?e.add(WN,c4):2===r&&e.add(WN,d4)}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(zr),d.LFG(ue))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Vq=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function Hq(){return(0,d.f3M)(ue)}}),zq=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let gM=(()=>{class i{constructor(e){this.value="ltr",this.change=new d.vpe,e&&(this.value=function jq(i){const n=i?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?zq.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Vq,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),_M=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const Gq=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function $q(){return!0}});let _r=(()=>{class i{constructor(e,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!function q9(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Bq),d.LFG(Gq,8),d.LFG(ue))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_M,_M]}),i})();function Wq(i){return class extends i{get disabled(){return this._disabled}set disabled(n){this._disabled=Tn(n)}constructor(...n){super(...n),this._disabled=!1}}}function qN(i,n){return class extends i{get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...e){super(...e),this.defaultColor=n,this.color=n}}}function f4(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=Tn(n)}constructor(...n){super(...n),this._disableRipple=!1}}}function qq(i,n=0){return class extends i{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?function GN(i,n=0){return function hq(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):n}(e):this.defaultTabIndex}constructor(...e){super(...e),this._tabIndex=n,this.defaultTabIndex=n}}}function Kq(i){return class extends i{updateErrorState(){const n=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==n&&(this.errorState=s,this.stateChanges.next())}constructor(...n){super(...n),this.errorState=!1}}}let Zq=(()=>{class i{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Qq{constructor(n,e,r,o=!1){this._renderer=n,this.element=e,this.config=r,this._animationForciblyDisabledThroughCss=o,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const m4=lC({passive:!0,capture:!0});class Xq{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=Vb(n);e&&this._events.get(n.type)?.forEach((r,o)=>{(o===e||o.contains(e))&&r.forEach(s=>s.handleEvent(n))})}}addHandler(n,e,r,o){const s=this._events.get(e);if(s){const c=s.get(r);c?c.add(o):s.set(r,new Set([o]))}else this._events.set(e,new Map([[r,new Set([o])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,m4)})}removeHandler(n,e,r){const o=this._events.get(n);if(!o)return;const s=o.get(e);s&&(s.delete(r),0===s.size&&o.delete(e),0===o.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,m4)))}}const p4={enterDuration:225,exitDuration:150},g4=lC({passive:!0,capture:!0}),_4=["mousedown","touchstart"],y4=["mouseup","mouseleave","touchend","touchcancel"];class k_{constructor(n,e,r,o){this._target=n,this._ngZone=e,this._platform=o,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=Bh(r))}fadeInRipple(n,e,r={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...p4,...r.animation};r.centered&&(n=o.left+o.width/2,e=o.top+o.height/2);const c=r.radius||function e7(i,n,e){const r=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),o=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(r*r+o*o)}(n,e,o),h=n-o.left,p=e-o.top,y=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=h-c+"px",w.style.top=p-c+"px",w.style.height=2*c+"px",w.style.width=2*c+"px",null!=r.color&&(w.style.backgroundColor=r.color),w.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(w);const I=window.getComputedStyle(w),P=I.transitionDuration,U="none"===I.transitionProperty||"0s"===P||"0s, 0s"===P||0===o.width&&0===o.height,G=new Qq(this,w,r,U);w.style.transform="scale3d(1, 1, 1)",G.state=0,r.persistent||(this._mostRecentTransientRipple=G);let Q=null;return!U&&(y||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const me=()=>this._finishRippleTransition(G),Ce=()=>this._destroyRipple(G);w.addEventListener("transitionend",me),w.addEventListener("transitioncancel",Ce),Q={onTransitionEnd:me,onTransitionCancel:Ce}}),this._activeRipples.set(G,Q),(U||!y)&&this._finishRippleTransition(G),G}fadeOutRipple(n){if(2===n.state||3===n.state)return;const e=n.element,r={...p4,...n.config.animation};e.style.transitionDuration=`${r.exitDuration}ms`,e.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=Bh(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,_4.forEach(r=>{k_._eventManager.addHandler(this._ngZone,r,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{y4.forEach(e=>{this._triggerElement.addEventListener(e,this,g4)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:r}=n.config;n.state=1,!r&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel)),n.element.remove()}_onMousedown(n){const e=s4(n),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!a4(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(_4.forEach(e=>k_._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&y4.forEach(e=>n.removeEventListener(e,this,g4)))}}k_._eventManager=new Xq;const yM=new d.OlP("mat-ripple-global-options");let v4=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,r,o,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new k_(this,r,e,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,o){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,{...this.rippleConfig,...o}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(zr),d.Y36(yM,8),d.Y36(d.QbO,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),KN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r,_r]}),i})(),t7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r]}),i})();const b4=["mat-button",""],YN=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],ZN=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],w4=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}",i7=["mat-fab",""],r7=["mat-icon-button",""],o7=["*"],x4={capture:!0},E4=["focus","click","mouseenter","touchstart"],uC="mat-button-ripple-uninitialized";let s7=(()=>{class i{constructor(){this._document=(0,d.f3M)(ue,{optional:!0}),this._animationMode=(0,d.f3M)(d.QbO,{optional:!0}),this._globalRippleOptions=(0,d.f3M)(yM,{optional:!0}),this._platform=(0,d.f3M)(zr),this._ngZone=(0,d.f3M)(d.R0b),this._onInteraction=e=>{if(e.target===this._document)return;const o=e.target.closest(`[${uC}]`);o&&(o.removeAttribute(uC),this._appendRipple(o))},this._ngZone.runOutsideAngular(()=>{for(const e of E4)this._document?.addEventListener(e,this._onInteraction,x4)})}ngOnDestroy(){for(const e of E4)this._document?.removeEventListener(e,this._onInteraction,x4)}_appendRipple(e){if(!this._document)return;const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const o=new a7(e,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);o.rippleConfig.centered=e.hasAttribute("mat-icon-button"),new k_(o,this._ngZone,r,this._platform).setupTriggerEvents(e),e.append(r)}_createMatRipple(e){if(!this._document)return;e.querySelector(".mat-mdc-button-ripple")?.remove(),e.removeAttribute(uC);const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const o=new v4(new d.SBq(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=e,e.append(r),o}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class a7{constructor(n,e,r){this._button=n,this._globalRippleOptions=e,this._setRippleConfig(e,r)}_setRippleConfig(n,e){this.rippleConfig=n||{},"NoopAnimations"===e&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const l7=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],c7=qN(Wq(f4(class{constructor(i){this._elementRef=i}})));let vM=(()=>{class i extends c7{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(e){this._ripple=e}constructor(e,r,o,s){super(e),this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=(0,d.f3M)(pM),this._rippleLoader=(0,d.f3M)(s7),this._isFab=!1;const c=e.nativeElement.classList;for(const h of l7)this._hasHostAttributes(h.selector)&&h.mdcClasses.forEach(p=>{c.add(p)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",r){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...e){return e.some(r=>this._elementRef.nativeElement.hasAttribute(r))}}return i.\u0275fac=function(e){d.$Z()},i.\u0275dir=d.lG2({type:i,features:[d.qOj,d.TTD]}),i})(),u7=(()=>{class i extends vM{constructor(e,r,o,s){super(e,r,o,s),this._haltDisabledEvents=c=>{this.disabled&&(c.preventDefault(),c.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return i.\u0275fac=function(e){d.$Z()},i.\u0275dir=d.lG2({type:i,features:[d.qOj]}),i})(),h7=(()=>{class i extends vM{constructor(e,r,o,s){super(e,r,o,s)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(zr),d.Y36(d.R0b),d.Y36(d.QbO,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(e,r){2&e&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:b4,ngContentSelectors:ZN,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(d.F$t(YN),d._UZ(0,"span",0),d.Hsn(1),d.TgZ(2,"span",1),d.Hsn(3,1),d.qZA(),d.Hsn(4,2),d._UZ(5,"span",2)(6,"span",3)),2&e&&d.ekj("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),f7=(()=>{class i extends u7{constructor(e,r,o,s){super(e,r,o,s)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(zr),d.Y36(d.R0b),d.Y36(d.QbO,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:9,hostBindings:function(e,r){2&e&&(d.uIk("disabled",r.disabled||null)("tabindex",r.disabled?-1:r.tabIndex)("aria-disabled",r.disabled.toString()),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[d.qOj],attrs:b4,ngContentSelectors:ZN,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(d.F$t(YN),d._UZ(0,"span",0),d.Hsn(1),d.TgZ(2,"span",1),d.Hsn(3,1),d.qZA(),d.Hsn(4,2),d._UZ(5,"span",2)(6,"span",3)),2&e&&d.ekj("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',w4],encapsulation:2,changeDetection:0}),i})();const m7=new d.OlP("mat-mdc-fab-default-options",{providedIn:"root",factory:C4});function C4(){return{color:"accent"}}const D4=C4();let p7=(()=>{class i extends vM{get extended(){return this._extended}set extended(e){this._extended=Tn(e)}constructor(e,r,o,s,c){super(e,r,o,s),this._options=c,this._isFab=!0,this._options=this._options||D4,this.color=this.defaultColor=this._options.color||D4.color}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(zr),d.Y36(d.R0b),d.Y36(d.QbO,8),d.Y36(m7,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["button","mat-fab",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:11,hostBindings:function(e,r){2&e&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0)("mdc-fab--extended",r.extended)("mat-mdc-extended-fab",r.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[d.qOj],attrs:i7,ngContentSelectors:ZN,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(d.F$t(YN),d._UZ(0,"span",0),d.Hsn(1),d.TgZ(2,"span",1),d.Hsn(3,1),d.qZA(),d.Hsn(4,2),d._UZ(5,"span",2)(6,"span",3)),2&e&&d.ekj("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),i})(),g7=(()=>{class i extends vM{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement),this._ripple.centered=!0),this._ripple}constructor(e,r,o,s){super(e,r,o,s)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(zr),d.Y36(d.R0b),d.Y36(d.QbO,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["button","mat-icon-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(e,r){2&e&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:r7,ngContentSelectors:o7,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(d.F$t(),d._UZ(0,"span",0),d.Hsn(1),d._UZ(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',w4],encapsulation:2,changeDetection:0}),i})(),_7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r,KN,_r]}),i})();function QN(){return(0,Zi.e)((i,n)=>{let e=null;i._refCount++;const r=(0,Ii.x)(n,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const o=i._connection,s=e;e=null,o&&(!s||o===s)&&o.unsubscribe(),n.unsubscribe()});i.subscribe(r),r.closed||(e=i.connect())})}class XN extends Bi.y{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Zi.A)(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Uh.w0;const e=this.getSubject();n.add(this.source.subscribe((0,Ii.x)(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Uh.w0.EMPTY)}return n}refCount(){return QN()(this)}}function JN(i){return i&&"function"==typeof i.connect&&!(i instanceof XN)}class I4{applyChanges(n,e,r,o,s){n.forEachOperation((c,h,p)=>{let y,w;if(null==c.previousIndex){const I=r(c,h,p);y=e.createEmbeddedView(I.templateRef,I.context,I.index),w=1}else null==p?(e.remove(h),w=3):(y=e.get(h),e.move(y,p),w=2);s&&s({context:y?.context,operation:w,record:c})})}detach(){}}class eF{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(n=!1,e,r=!0,o){this._multiple=n,this._emitChanges=r,this.compareWith=o,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Ht.x,e&&e.length&&(n?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(r=>this._markSelected(r));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(r=>this._unmarkSelected(r));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);const e=this.selected,r=new Set(n);n.forEach(s=>this._markSelected(s)),e.filter(s=>!r.has(s)).forEach(s=>this._unmarkSelected(s));const o=this._hasQueuedChanges();return this._emitChangeEvent(),o}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(n){if(this.compareWith){for(let e of this._selection)if(this.compareWith(n,e))return e;return n}return n}}let S4=(()=>{class i{constructor(){this._listeners=[]}notify(e,r){for(let o of this._listeners)o(e,r)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(r=>e!==r)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hC=new d.OlP("_ViewRepeater"),y7=["button"],v7=["*"],A4=new d.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),M4=new d.OlP("MatButtonToggleGroup"),b7={provide:Dl,useExisting:(0,d.Gpc)(()=>P4),multi:!0};let k4=0;class R4{constructor(n,e){this.source=n,this.value=e}}let P4=(()=>{class i{get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(e){this._vertical=Tn(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(r=>r.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=Tn(e),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=Tn(e),this._markButtonsForCheck()}constructor(e,r){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+k4++,this.valueChange=new d.vpe,this.change=new d.vpe,this.appearance=r&&r.appearance?r.appearance:"standard"}ngOnInit(){this._selectionModel=new eF(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(e){const r=new R4(e,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(e,r,o=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?r?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(e,o)):this._updateModelValue(e,o)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(r=>null!=e.value&&r===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(r=>this._selectValue(r))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const r=this._buttonToggles.find(o=>null!=o.value&&o.value===e);r&&(r.checked=!0,this._selectionModel.select(r))}_updateModelValue(e,r){r&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.sBO),d.Y36(A4,8))},i.\u0275dir=d.lG2({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,r,o){if(1&e&&d.Suo(o,O4,5),2&e){let s;d.iGM(s=d.CRH())&&(r._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,r){2&e&&(d.uIk("aria-disabled",r.disabled),d.ekj("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard","standard"===r.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[d._Bn([b7,{provide:M4,useExisting:i}])]}),i})();const w7=f4(class{});let O4=(()=>{class i extends w7{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const r=Tn(e);r!==this._checked&&(this._checked=r,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=Tn(e)}constructor(e,r,o,s,c,h){super(),this._changeDetectorRef=r,this._elementRef=o,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new d.vpe;const p=Number(c);this.tabIndex=p||0===p?p:null,this.buttonToggleGroup=e,this.appearance=h&&h.appearance?h.appearance:"standard"}ngOnInit(){const e=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+k4++,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector()||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new R4(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(M4,8),d.Y36(d.sBO),d.Y36(d.SBq),d.Y36(pM),d.$8M("tabindex"),d.Y36(A4,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(e,r){if(1&e&&d.Gf(y7,5),2&e){let o;d.iGM(o=d.CRH())&&(r._buttonElement=o.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,r){1&e&&d.NdJ("focus",function(){return r.focus()}),2&e&&(d.uIk("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),d.ekj("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-appearance-standard","standard"===r.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[d.qOj],ngContentSelectors:v7,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,r){if(1&e&&(d.F$t(),d.TgZ(0,"button",0,1),d.NdJ("click",function(){return r._onButtonClick()}),d.TgZ(2,"span",2),d.Hsn(3),d.qZA()(),d._UZ(4,"span",3)(5,"span",4)),2&e){const o=d.MAs(1);d.Q6J("id",r.buttonId)("disabled",r.disabled||null),d.uIk("tabindex",r.disabled?-1:r.tabIndex)("aria-pressed",r.checked)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),d.xp6(5),d.Q6J("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[v4],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),i})(),x7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r,KN,_r]}),i})(),E7=0;const tF=new d.OlP("CdkAccordion");let C7=(()=>{class i{constructor(){this._stateChanges=new Ht.x,this._openCloseAllActions=new Ht.x,this.id="cdk-accordion-"+E7++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Tn(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[d._Bn([{provide:tF,useExisting:i}]),d.TTD]}),i})(),D7=0,I7=(()=>{class i{get expanded(){return this._expanded}set expanded(e){e=Tn(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Tn(e)}constructor(e,r,o){this.accordion=e,this._changeDetectorRef=r,this._expansionDispatcher=o,this._openCloseAllSubscription=Uh.w0.EMPTY,this.closed=new d.vpe,this.opened=new d.vpe,this.destroyed=new d.vpe,this.expandedChange=new d.vpe,this.id="cdk-accordion-child-"+D7++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=o.listen((s,c)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===c&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(tF,12),d.Y36(d.sBO),d.Y36(S4))},i.\u0275dir=d.lG2({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[d._Bn([{provide:tF,useValue:void 0}])]}),i})(),T7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();class nF{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class S7 extends nF{constructor(n,e,r,o,s){super(),this.component=n,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=o,this.projectableNodes=s}}class N4 extends nF{constructor(n,e,r,o){super(),this.templateRef=n,this.viewContainerRef=e,this.context=r,this.injector=o}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class A7 extends nF{constructor(n){super(),this.element=n instanceof d.SBq?n.nativeElement:n}}class M7{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof S7?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof N4?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof A7?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}let k7=(()=>{class i extends M7{constructor(e,r,o){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new d.vpe,this.attachDomPortal=s=>{const c=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(h,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(c,h)})},this._document=o}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=r.createComponent(s,r.length,e.injector||r.injector,e.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36(ue))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[d.qOj]}),i})(),R7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();class F4{}class P7{}const Vh="*";function bM(i,n){return{type:7,name:i,definitions:n,options:{}}}function fC(i,n=null){return{type:4,styles:n,timings:i}}function L4(i,n=null){return{type:2,steps:i,options:n}}function Kd(i){return{type:6,styles:i,offset:null}}function R_(i,n,e){return{type:0,name:i,styles:n,options:e}}function mC(i,n,e=null){return{type:1,expr:i,animation:n,options:e}}function U4(i){Promise.resolve().then(i)}class pC{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){U4(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class B4{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,r=0,o=0;const s=this.players.length;0==s?U4(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++r==s&&this._onDestroy()}),c.onStart(()=>{++o==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(o)})}getPosition(){const n=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const O7=["body"];function N7(i,n){}const F7=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],L7=["mat-expansion-panel-header","*","mat-action-row"];function U7(i,n){if(1&i&&d._UZ(0,"span",2),2&i){const e=d.oxw();d.Q6J("@indicatorRotate",e._getExpandedState())}}const B7=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],V7=["mat-panel-title","mat-panel-description","*"],rF=new d.OlP("MAT_ACCORDION"),V4="225ms cubic-bezier(0.4,0.0,0.2,1)",H4={indicatorRotate:bM("indicatorRotate",[R_("collapsed, void",Kd({transform:"rotate(0deg)"})),R_("expanded",Kd({transform:"rotate(180deg)"})),mC("expanded <=> collapsed, void => collapsed",fC(V4))]),bodyExpansion:bM("bodyExpansion",[R_("collapsed, void",Kd({height:"0px",visibility:"hidden"})),R_("expanded",Kd({height:"*",visibility:"visible"})),mC("expanded <=> collapsed, void => collapsed",fC(V4))])},z4=new d.OlP("MAT_EXPANSION_PANEL");let H7=(()=>{class i{constructor(e,r){this._template=e,this._expansionPanel=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(z4,8))},i.\u0275dir=d.lG2({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),z7=0;const j4=new d.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let $4=(()=>{class i extends I7{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Tn(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,r,o,s,c,h,p){super(e,r,o),this._viewContainerRef=s,this._animationMode=h,this._hideToggle=!1,this.afterExpand=new d.vpe,this.afterCollapse=new d.vpe,this._inputChanges=new Ht.x,this._headerId="mat-expansion-panel-header-"+z7++,this._bodyAnimationDone=new Ht.x,this.accordion=e,this._document=c,this._bodyAnimationDone.pipe((0,dl.x)((y,w)=>y.fromState===w.fromState&&y.toState===w.toState)).subscribe(y=>{"void"!==y.fromState&&("expanded"===y.toState?this.afterExpand.emit():"collapsed"===y.toState&&this.afterCollapse.emit())}),p&&(this.hideToggle=p.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(gc(null),Cn(()=>this.expanded&&!this._portal),Nr(1)).subscribe(()=>{this._portal=new N4(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,r=this._body.nativeElement;return e===r||r.contains(e)}return!1}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(rF,12),d.Y36(d.sBO),d.Y36(S4),d.Y36(d.s_b),d.Y36(ue),d.Y36(d.QbO,8),d.Y36(j4,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(e,r,o){if(1&e&&d.Suo(o,H7,5),2&e){let s;d.iGM(s=d.CRH())&&(r._lazyContent=s.first)}},viewQuery:function(e,r){if(1&e&&d.Gf(O7,5),2&e){let o;d.iGM(o=d.CRH())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,r){2&e&&d.ekj("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[d._Bn([{provide:rF,useValue:void 0},{provide:z4,useExisting:i}]),d.qOj,d.TTD],ngContentSelectors:L7,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,r){1&e&&(d.F$t(F7),d.Hsn(0),d.TgZ(1,"div",0,1),d.NdJ("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),d.TgZ(3,"div",2),d.Hsn(4,1),d.YNc(5,N7,0,0,"ng-template",3),d.qZA(),d.Hsn(6,2),d.qZA()),2&e&&(d.xp6(1),d.Q6J("@bodyExpansion",r._getExpandedState())("id",r.id),d.uIk("aria-labelledby",r._headerId),d.xp6(4),d.Q6J("cdkPortalOutlet",r._portal))},dependencies:[k7],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[H4.bodyExpansion]},changeDetection:0}),i})();class j7{}const $7=qq(j7);let G4=(()=>{class i extends $7{constructor(e,r,o,s,c,h,p){super(),this.panel=e,this._element=r,this._focusMonitor=o,this._changeDetectorRef=s,this._animationMode=h,this._parentChangeSubscription=Uh.w0.EMPTY;const y=e.accordion?e.accordion._stateChanges.pipe(Cn(w=>!(!w.hideToggle&&!w.togglePosition))):Dr.E;this.tabIndex=parseInt(p||"")||0,this._parentChangeSubscription=(0,ba.T)(e.opened,e.closed,y,e._inputChanges.pipe(Cn(w=>!!(w.hideToggle||w.disabled||w.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Cn(()=>e._containsFocus())).subscribe(()=>o.focusVia(r,"program")),c&&(this.expandedHeight=c.expandedHeight,this.collapsedHeight=c.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:hM(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,r){e?this._focusMonitor.focusVia(this._element,e,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36($4,1),d.Y36(d.SBq),d.Y36(pM),d.Y36(d.sBO),d.Y36(j4,8),d.Y36(d.QbO,8),d.$8M("tabindex"))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,r){1&e&&d.NdJ("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&e&&(d.uIk("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),d.Udp("height",r._getHeaderHeight()),d.ekj("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[d.qOj],ngContentSelectors:V7,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,r){1&e&&(d.F$t(B7),d.TgZ(0,"span",0),d.Hsn(1),d.Hsn(2,1),d.Hsn(3,2),d.qZA(),d.YNc(4,U7,1,1,"span",1)),2&e&&(d.ekj("mat-content-hide-toggle",!r._showToggle()),d.xp6(4),d.Q6J("ngIf",r._showToggle()))},dependencies:[no],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[H4.indicatorRotate]},changeDetection:0}),i})(),G7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),W7=(()=>{class i extends C7{constructor(){super(...arguments),this._ownHeaders=new d.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=Tn(e)}ngAfterContentInit(){this._headers.changes.pipe(gc(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(r=>r.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new n4(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["mat-accordion"]],contentQueries:function(e,r,o){if(1&e&&d.Suo(o,G4,5),2&e){let s;d.iGM(s=d.CRH())&&(r._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mat-accordion-multi",r.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[d._Bn([{provide:rF,useExisting:i}]),d.qOj]}),i})(),q7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[$r,_r,T7,R7]}),i})();class K7{constructor(n){this._box=n,this._destroyed=new Ht.x,this._resizeSubject=new Ht.x,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new Bi.y(e=>{const r=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),r.unsubscribe(),this._elementObservables.delete(n)}}).pipe(Cn(e=>e.some(r=>r.target===n)),Ks({bufferSize:1,refCount:!0}),gr(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Y7=(()=>{class i{constructor(){this._observers=new Map,this._ngZone=(0,d.f3M)(d.R0b)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,r){const o=r?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new K7(o)),this._observers.get(o).observe(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),W4=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),q4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[W4]}),i})();const X7=["notch"],J7=["matFormFieldNotchedOutline",""],eK=["*"],tK=["textField"],nK=["iconPrefixContainer"],iK=["textPrefixContainer"];function rK(i,n){1&i&&d._UZ(0,"span",19)}function oK(i,n){if(1&i&&(d.TgZ(0,"label",17),d.Hsn(1,1),d.YNc(2,rK,1,0,"span",18),d.qZA()),2&i){const e=d.oxw(2);d.Q6J("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),d.uIk("for",e._control.id)("aria-owns",e._control.id),d.xp6(2),d.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required)}}function sK(i,n){if(1&i&&d.YNc(0,oK,3,6,"label",16),2&i){const e=d.oxw();d.Q6J("ngIf",e._hasFloatingLabel())}}function aK(i,n){1&i&&d._UZ(0,"div",20)}function lK(i,n){}function cK(i,n){if(1&i&&d.YNc(0,lK,0,0,"ng-template",22),2&i){d.oxw(2);const e=d.MAs(1);d.Q6J("ngTemplateOutlet",e)}}function dK(i,n){if(1&i&&(d.TgZ(0,"div",21),d.YNc(1,cK,1,1,"ng-template",9),d.qZA()),2&i){const e=d.oxw();d.Q6J("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),d.xp6(1),d.Q6J("ngIf",!e._forceDisplayInfixLabel())}}function uK(i,n){1&i&&(d.TgZ(0,"div",23,24),d.Hsn(2,2),d.qZA())}function hK(i,n){1&i&&(d.TgZ(0,"div",25,26),d.Hsn(2,3),d.qZA())}function fK(i,n){}function mK(i,n){if(1&i&&d.YNc(0,fK,0,0,"ng-template",22),2&i){d.oxw();const e=d.MAs(1);d.Q6J("ngTemplateOutlet",e)}}function pK(i,n){1&i&&(d.TgZ(0,"div",27),d.Hsn(1,4),d.qZA())}function gK(i,n){1&i&&(d.TgZ(0,"div",28),d.Hsn(1,5),d.qZA())}function _K(i,n){1&i&&d._UZ(0,"div",29)}function yK(i,n){if(1&i&&(d.TgZ(0,"div",30),d.Hsn(1,6),d.qZA()),2&i){const e=d.oxw();d.Q6J("@transitionMessages",e._subscriptAnimationState)}}function vK(i,n){if(1&i&&(d.TgZ(0,"mat-hint",34),d._uU(1),d.qZA()),2&i){const e=d.oxw(2);d.Q6J("id",e._hintLabelId),d.xp6(1),d.Oqu(e.hintLabel)}}function bK(i,n){if(1&i&&(d.TgZ(0,"div",31),d.YNc(1,vK,2,2,"mat-hint",32),d.Hsn(2,7),d._UZ(3,"div",33),d.Hsn(4,8),d.qZA()),2&i){const e=d.oxw();d.Q6J("@transitionMessages",e._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",e.hintLabel)}}const wK=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],xK=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let wM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["mat-label"]]}),i})();const EK=new d.OlP("MatError");let CK=0,K4=(()=>{class i{constructor(){this.align="start",this.id="mat-mdc-hint-"+CK++}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,r){2&e&&(d.Ikx("id",r.id),d.uIk("align",null),d.ekj("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}}),i})();const DK=new d.OlP("MatPrefix"),Y4=new d.OlP("MatSuffix");let IK=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[d._Bn([{provide:Y4,useExisting:i}])]}),i})();const Z4=new d.OlP("FloatingLabelParent");let Q4=(()=>{class i{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,d.f3M)(Y7),this._ngZone=(0,d.f3M)(d.R0b),this._parent=(0,d.f3M)(Z4),this._resizeSubscription=new Uh.w0}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function TK(i){if(null!==i.offsetParent)return i.scrollWidth;const e=i.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const r=e.scrollWidth;return e.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}}),i})();const X4="mdc-line-ripple--active",xM="mdc-line-ripple--deactivating";let J4=(()=>{class i{constructor(e,r){this._elementRef=e,this._handleTransitionEnd=o=>{const s=this._elementRef.nativeElement.classList,c=s.contains(xM);"opacity"===o.propertyName&&c&&s.remove(X4,xM)},r.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(xM),e.add(X4)}deactivate(){this._elementRef.nativeElement.classList.add(xM)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(d.R0b))},i.\u0275dir=d.lG2({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),i})(),e6=(()=>{class i{constructor(e,r){this._elementRef=e,this._ngZone=r,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(d.R0b))},i.\u0275cmp=d.Xpm({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(e,r){if(1&e&&d.Gf(X7,5),2&e){let o;d.iGM(o=d.CRH())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:J7,ngContentSelectors:eK,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(e,r){1&e&&(d.F$t(),d._UZ(0,"div",0),d.TgZ(1,"div",1,2),d.Hsn(3),d.qZA(),d._UZ(4,"div",3))},encapsulation:2,changeDetection:0}),i})();const SK={transitionMessages:bM("transitionMessages",[R_("enter",Kd({opacity:1,transform:"translateY(0%)"})),mC("void => enter",[Kd({opacity:0,transform:"translateY(-5px)"}),fC("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let t6=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i}),i})();const n6=new d.OlP("MatFormField"),AK=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let i6=0,s6=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Tn(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,r,o,s,c,h,p,y){this._elementRef=e,this._changeDetectorRef=r,this._ngZone=o,this._dir=s,this._platform=c,this._defaults=h,this._animationMode=p,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+i6++,this._hintLabelId="mat-mdc-hint-"+i6++,this._subscriptAnimationState="",this._destroyed=new Ht.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,h&&(h.appearance&&(this.appearance=h.appearance),this._hideRequiredMarker=!!h?.hideRequiredMarker,h.color&&(this.color=h.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(gr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,ba.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(gr(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(gr(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,o=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),o&&e.push(o.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,s=r?.getBoundingClientRect().width??0,c=o?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+c}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(d.R0b),d.Y36(gM),d.Y36(zr),d.Y36(AK,8),d.Y36(d.QbO,8),d.Y36(ue))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-form-field"]],contentQueries:function(e,r,o){if(1&e&&(d.Suo(o,wM,5),d.Suo(o,wM,7),d.Suo(o,t6,5),d.Suo(o,DK,5),d.Suo(o,Y4,5),d.Suo(o,EK,5),d.Suo(o,K4,5)),2&e){let s;d.iGM(s=d.CRH())&&(r._labelChildNonStatic=s.first),d.iGM(s=d.CRH())&&(r._labelChildStatic=s.first),d.iGM(s=d.CRH())&&(r._formFieldControl=s.first),d.iGM(s=d.CRH())&&(r._prefixChildren=s),d.iGM(s=d.CRH())&&(r._suffixChildren=s),d.iGM(s=d.CRH())&&(r._errorChildren=s),d.iGM(s=d.CRH())&&(r._hintChildren=s)}},viewQuery:function(e,r){if(1&e&&(d.Gf(tK,5),d.Gf(nK,5),d.Gf(iK,5),d.Gf(Q4,5),d.Gf(e6,5),d.Gf(J4,5)),2&e){let o;d.iGM(o=d.CRH())&&(r._textField=o.first),d.iGM(o=d.CRH())&&(r._iconPrefixContainer=o.first),d.iGM(o=d.CRH())&&(r._textPrefixContainer=o.first),d.iGM(o=d.CRH())&&(r._floatingLabel=o.first),d.iGM(o=d.CRH())&&(r._notchedOutline=o.first),d.iGM(o=d.CRH())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,r){2&e&&d.ekj("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:n6,useExisting:i},{provide:Z4,useExisting:i}])],ngContentSelectors:xK,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,r){1&e&&(d.F$t(wK),d.YNc(0,sK,1,1,"ng-template",null,0,d.W1O),d.TgZ(2,"div",1,2),d.NdJ("click",function(s){return r._control.onContainerClick(s)}),d.YNc(4,aK,1,0,"div",3),d.TgZ(5,"div",4),d.YNc(6,dK,2,2,"div",5),d.YNc(7,uK,3,0,"div",6),d.YNc(8,hK,3,0,"div",7),d.TgZ(9,"div",8),d.YNc(10,mK,1,1,"ng-template",9),d.Hsn(11),d.qZA(),d.YNc(12,pK,2,0,"div",10),d.YNc(13,gK,2,0,"div",11),d.qZA(),d.YNc(14,_K,1,0,"div",12),d.qZA(),d.TgZ(15,"div",13),d.YNc(16,yK,2,1,"div",14),d.YNc(17,bK,5,2,"div",15),d.qZA()),2&e&&(d.xp6(2),d.ekj("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),d.xp6(2),d.Q6J("ngIf",!r._hasOutline()&&!r._control.disabled),d.xp6(2),d.Q6J("ngIf",r._hasOutline()),d.xp6(1),d.Q6J("ngIf",r._hasIconPrefix),d.xp6(1),d.Q6J("ngIf",r._hasTextPrefix),d.xp6(2),d.Q6J("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),d.xp6(2),d.Q6J("ngIf",r._hasTextSuffix),d.xp6(1),d.Q6J("ngIf",r._hasIconSuffix),d.xp6(1),d.Q6J("ngIf",!r._hasOutline()),d.xp6(1),d.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),d.Q6J("ngSwitch",r._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},dependencies:[no,la,aa,Rc,K4,Q4,e6,J4],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[SK.transitionMessages]},changeDetection:0}),i})(),oF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r,$r,q4,_r]}),i})();function zb(i,n){const e=(0,qr.m)(i)?i:()=>i,r=o=>o.error(e());return new Bi.y(n?o=>n.schedule(r,0,o):r)}function cp(i){return(0,Zi.e)((n,e)=>{let s,r=null,o=!1;r=n.subscribe((0,Ii.x)(e,void 0,void 0,c=>{s=(0,Da.Xf)(i(c,cp(i)(n))),r?(r.unsubscribe(),r=null,s.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,s.subscribe(e))})}function EM(i){return(0,Zi.e)((n,e)=>{try{n.subscribe(e)}finally{e.add(i)}})}var yo=H(1631);function jb(i,n){return(0,qr.m)(n)?(0,yo.z)(i,n,1):(0,yo.z)(i,1)}class sF{}class Hh{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const o=e.slice(0,r),s=o.toLowerCase(),c=e.slice(r+1).trim();this.maybeSetNormalizedName(o,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Hh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Hh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Hh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,e);const o=("a"===n.op?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":const s=n.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const r=(Array.isArray(e)?e:[e]).map(s=>s.toString()),o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class RK{encodeKey(n){return a6(n)}encodeValue(n){return a6(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const OK=/%(\d[a-f0-9])/gi,NK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function a6(i){return encodeURIComponent(i).replace(OK,(n,e)=>NK[e]??n)}function CM(i){return`${i}`}class dp{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new RK,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function PK(i,n){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(o=>{const s=o.indexOf("="),[c,h]=-1==s?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,s)),n.decodeValue(o.slice(s+1))],p=e.get(c)||[];p.push(h),e.set(c,p)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const r=n.fromObject[e],o=Array.isArray(r)?r.map(CM):[CM(r)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(r=>{const o=n[r];Array.isArray(o)?o.forEach(s=>{e.push({param:r,value:s,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new dp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(CM(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const o=r.indexOf(CM(n.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class FK{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function l6(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function c6(i){return typeof Blob<"u"&&i instanceof Blob}function d6(i){return typeof FormData<"u"&&i instanceof FormData}class gC{constructor(n,e,r,o){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function LK(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,s=o):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Hh),this.context||(this.context=new FK),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const h=e.indexOf("?");this.urlWithParams=e+(-1===h?"?":h<e.length-1?"&":"")+c}}else this.params=new dp,this.urlWithParams=e}serializeBody(){return null===this.body?null:l6(this.body)||c6(this.body)||d6(this.body)||function UK(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof dp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||d6(this.body)?null:c6(this.body)?this.body.type||null:l6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,c=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,h=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let p=n.headers||this.headers,y=n.params||this.params;const w=n.context??this.context;return void 0!==n.setHeaders&&(p=Object.keys(n.setHeaders).reduce((I,A)=>I.set(A,n.setHeaders[A]),p)),n.setParams&&(y=Object.keys(n.setParams).reduce((I,A)=>I.set(A,n.setParams[A]),y)),new gC(e,r,s,{params:y,headers:p,context:w,reportProgress:h,responseType:o,withCredentials:c})}}var Ko=(()=>((Ko=Ko||{})[Ko.Sent=0]="Sent",Ko[Ko.UploadProgress=1]="UploadProgress",Ko[Ko.ResponseHeader=2]="ResponseHeader",Ko[Ko.DownloadProgress=3]="DownloadProgress",Ko[Ko.Response=4]="Response",Ko[Ko.User=5]="User",Ko))();class BK{constructor(n,e=200,r="OK"){this.headers=n.headers||new Hh,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class _C extends BK{constructor(n={}){super(n),this.type=Ko.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new _C({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}function lF(i,n){return{body:n,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let cF=(()=>{class i{constructor(e){this.handler=e}request(e,r,o={}){let s;if(e instanceof gC)s=e;else{let p,y;p=o.headers instanceof Hh?o.headers:new Hh(o.headers),o.params&&(y=o.params instanceof dp?o.params:new dp({fromObject:o.params})),s=new gC(e,r,void 0!==o.body?o.body:null,{headers:p,context:o.context,params:y,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const c=(0,mt.of)(s).pipe(jb(p=>this.handler.handle(p)));if(e instanceof gC||"events"===o.observe)return c;const h=c.pipe(Cn(p=>p instanceof _C));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,_t.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,_t.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,_t.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,_t.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new dp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,lF(o,r))}post(e,r,o={}){return this.request("POST",e,lF(o,r))}put(e,r,o={}){return this.request("PUT",e,lF(o,r))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(sF))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const oY=["*"];let TM;function yC(i){return function sY(){if(void 0===TM&&(TM=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(TM=i.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return TM}()?.createHTML(i)||i}function b6(i){return Error(`Unable to find icon with the name "${i}"`)}function w6(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function x6(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class N_{constructor(n,e,r){this.url=n,this.svgText=e,this.options=r}}let SM=(()=>{class i{constructor(e,r,o,s){this._httpClient=e,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(e,r,o){return this.addSvgIconInNamespace("",e,r,o)}addSvgIconLiteral(e,r,o){return this.addSvgIconLiteralInNamespace("",e,r,o)}addSvgIconInNamespace(e,r,o,s){return this._addSvgIconConfig(e,r,new N_(o,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,o,s){const c=this._sanitizer.sanitize(d.q3G.HTML,o);if(!c)throw x6(o);const h=yC(c);return this._addSvgIconConfig(e,r,new N_("",h,s))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,o){return this._addSvgIconSetConfig(e,new N_(r,null,o))}addSvgIconSetLiteralInNamespace(e,r,o){const s=this._sanitizer.sanitize(d.q3G.HTML,r);if(!s)throw x6(r);const c=yC(s);return this._addSvgIconSetConfig(e,new N_("",c,o))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,e);if(!r)throw w6(e);const o=this._cachedIconsByUrl.get(r);return o?(0,mt.of)(AM(o)):this._loadSvgIconFromConfig(new N_(e,null)).pipe((0,_o.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,_t.U)(s=>AM(s)))}getNamedSvgIcon(e,r=""){const o=E6(r,e);let s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,e),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(e,c):zb(b6(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,mt.of)(AM(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,_t.U)(r=>AM(r)))}_getSvgFromIconSetConfigs(e,r){const o=this._extractIconWithNameFromAnySet(e,r);return o?(0,mt.of)(o):BV(r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(cp(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(d.q3G.RESOURCE_URL,c.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),(0,mt.of)(null)})))).pipe((0,_t.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,r);if(!c)throw b6(e);return c}))}_extractIconWithNameFromAnySet(e,r){for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(c,e,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,_o.b)(r=>e.svgText=r),(0,_t.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,mt.of)(null):this._fetchIcon(e).pipe((0,_o.b)(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,o){const s=e.querySelector(`[id="${r}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,o);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),o);const h=this._svgElementFromString(yC("<svg></svg>"));return h.appendChild(c),this._setSvgAttributes(h,o)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(e){const r=this._svgElementFromString(yC("<svg></svg>")),o=e.attributes;for(let s=0;s<o.length;s++){const{name:c,value:h}=o[s];"id"!==c&&r.setAttribute(c,h)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){const{url:r,options:o}=e,s=o?.withCredentials??!1;if(!this._httpClient)throw function aY(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const c=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,r);if(!c)throw w6(r);const h=this._inProgressUrlFetches.get(c);if(h)return h;const p=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,_t.U)(y=>yC(y)),EM(()=>this._inProgressUrlFetches.delete(c)),(0,Cf.B)());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(e,r,o){return this._svgIconConfigs.set(E6(e,r),o),this}_addSvgIconSetConfig(e,r){const o=this._iconSetConfigs.get(e);return o?o.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let o=0;o<this._resolvers.length;o++){const s=this._resolvers[o](r,e);if(s)return cY(s)?new N_(s.url,null,s.options):new N_(s,null)}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(cF,8),d.LFG(tl),d.LFG(ue,8),d.LFG(d.qLn))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function AM(i){return i.cloneNode(!0)}function E6(i,n){return i+":"+n}function cY(i){return!(!i.url||!i.options)}const dY=qN(class{constructor(i){this._elementRef=i}}),uY=new d.OlP("MAT_ICON_DEFAULT_OPTIONS"),hY=new d.OlP("mat-icon-location",{providedIn:"root",factory:function fY(){const i=(0,d.f3M)(ue),n=i?i.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),C6=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],mY=C6.map(i=>`[${i}]`).join(", "),pY=/^url\(['"]?#(.*?)['"]?\)$/;let MM=(()=>{class i extends dY{get inline(){return this._inline}set inline(e){this._inline=Tn(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(e,r,o,s,c,h){super(e),this._iconRegistry=r,this._location=s,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Uh.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),o||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const o=e.childNodes[r];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>e.classList.remove(o)),r.forEach(o=>e.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(mY),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)C6.forEach(c=>{const h=r[s],p=h.getAttribute(c),y=p?p.match(pY):null;if(y){let w=o.get(h);w||(w=[],o.set(h,w)),w.push({name:c,value:y[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,o]=this._splitIconName(e);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(Nr(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${o}! ${s.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(SM),d.$8M("aria-hidden"),d.Y36(hY),d.Y36(d.qLn),d.Y36(uY,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,r){2&e&&(d.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),d.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[d.qOj],ngContentSelectors:oY,decls:1,vars:0,template:function(e,r){1&e&&(d.F$t(),d.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),gY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r,_r]}),i})();const D6=lC({passive:!0});let _Y=(()=>{class i{constructor(e,r){this._platform=e,this._ngZone=r,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Dr.E;const r=Bh(e),o=this._monitoredElements.get(r);if(o)return o.subject;const s=new Ht.x,c="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,D6),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,D6)}}),s}stopMonitoring(e){const r=Bh(e),o=this._monitoredElements.get(r);o&&(o.unlisten(),o.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((e,r)=>this.stopMonitoring(r))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(zr),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),yY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const vY=new d.OlP("MAT_INPUT_VALUE_ACCESSOR"),bY=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let wY=0;const xY=Kq(class{constructor(i,n,e,r){this._defaultErrorStateMatcher=i,this._parentForm=n,this._parentFormGroup=e,this.ngControl=r,this.stateChanges=new Ht.x}});let I6=(()=>{class i extends xY{get disabled(){return this._disabled}set disabled(e){this._disabled=Tn(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(KW.required)??!1}set required(e){this._required=Tn(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&G3().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Tn(e)}constructor(e,r,o,s,c,h,p,y,w,I){super(h,s,c,o),this._elementRef=e,this._platform=r,this._autofillMonitor=y,this._formField=I,this._uid="mat-input-"+wY++,this.focused=!1,this.stateChanges=new Ht.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>G3().has(U)),this._iOSKeyupListener=U=>{const G=U.target;!G.value&&0===G.selectionStart&&0===G.selectionEnd&&(G.setSelectionRange(1,1),G.setSelectionRange(0,0))};const A=this._elementRef.nativeElement,P=A.nodeName.toLowerCase();this._inputValueAccessor=p||A,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&w.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!I,this._isNativeSelect&&(this.controlType=A.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=e,e?r.setAttribute("placeholder",e):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){bY.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,r=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(zr),d.Y36(Lh,10),d.Y36(lM,8),d.Y36(dM,8),d.Y36(Zq),d.Y36(vY,10),d.Y36(_Y),d.Y36(d.R0b),d.Y36(n6,8))},i.\u0275dir=d.lG2({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,r){1&e&&d.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&e&&(d.Ikx("id",r.id)("disabled",r.disabled)("required",r.required),d.uIk("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),d.ekj("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[d._Bn([{provide:t6,useExisting:i}]),d.qOj,d.TTD]}),i})(),EY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r,oF,oF,yY,_r]}),i})(),CY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r,_r]}),i})(),eZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[q4,$r,_r,KN,t7,CY]}),i})();var tZ=H(4266);const nZ=["addListener","removeListener"],iZ=["addEventListener","removeEventListener"],rZ=["on","off"];function vC(i,n,e,r){if((0,qr.m)(e)&&(r=e,e=void 0),r)return vC(i,n,e).pipe(CN(r));const[o,s]=function aZ(i){return(0,qr.m)(i.addEventListener)&&(0,qr.m)(i.removeEventListener)}(i)?iZ.map(c=>h=>i[c](n,h,e)):function oZ(i){return(0,qr.m)(i.addListener)&&(0,qr.m)(i.removeListener)}(i)?nZ.map(k6(i,n)):function sZ(i){return(0,qr.m)(i.on)&&(0,qr.m)(i.off)}(i)?rZ.map(k6(i,n)):[];if(!o&&(0,tZ.z)(i))return(0,yo.z)(c=>vC(c,n,e))((0,Da.Xf)(i));if(!o)throw new TypeError("Invalid event target");return new Bi.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return o(h),()=>s(h)})}function k6(i,n){return e=>r=>i[e](n,r)}var R6=H(1954);const bC={schedule(i){let n=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=bC;r&&(n=r.requestAnimationFrame,e=r.cancelAnimationFrame);const o=n(s=>{e=void 0,i(s)});return new Uh.w0(()=>e?.(o))},requestAnimationFrame(...i){const{delegate:n}=bC;return(n?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:n}=bC;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0};var P6=H(2631);new class cZ extends P6.v{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let o;n=n||r.shift();do{if(o=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===e&&r.shift());if(this._active=!1,o){for(;(n=r[0])&&n.id===e&&r.shift();)n.unsubscribe();throw o}}}(class lZ extends R6.o{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,r=0){return null!==r&&r>0?super.requestAsyncId(n,e,r):(n.actions.push(this),n._scheduled||(n._scheduled=bC.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,e,r=0){var o;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,e,r);const{actions:s}=n;null!=e&&(null===(o=s[s.length-1])||void 0===o?void 0:o.id)!==e&&(bC.cancelAnimationFrame(e),n._scheduled=void 0)}});let hF,uZ=1;const kM={};function O6(i){return i in kM&&(delete kM[i],!0)}const hZ={setImmediate(i){const n=uZ++;return kM[n]=!0,hF||(hF=Promise.resolve()),hF.then(()=>O6(n)&&i()),n},clearImmediate(i){O6(i)}},{setImmediate:fZ,clearImmediate:mZ}=hZ,RM={setImmediate(...i){const{delegate:n}=RM;return(n?.setImmediate||fZ)(...i)},clearImmediate(i){const{delegate:n}=RM;return(n?.clearImmediate||mZ)(i)},delegate:void 0};new class gZ extends P6.v{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let o;n=n||r.shift();do{if(o=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===e&&r.shift());if(this._active=!1,o){for(;(n=r[0])&&n.id===e&&r.shift();)n.unsubscribe();throw o}}}(class pZ extends R6.o{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,r=0){return null!==r&&r>0?super.requestAsyncId(n,e,r):(n.actions.push(this),n._scheduled||(n._scheduled=RM.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,e,r=0){var o;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,e,r);const{actions:s}=n;null!=e&&(null===(o=s[s.length-1])||void 0===o?void 0:o.id)!==e&&(RM.clearImmediate(e),n._scheduled===e&&(n._scheduled=void 0))}});var vZ=H(671);function N6(i=0,n,e=Vf.P){let r=-1;return null!=n&&((0,vZ.K)(n)?e=n:r=n),new Bi.y(o=>{let s=function bZ(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let c=0;return e.schedule(function(){o.closed||(o.next(c++),0<=r?this.schedule(void 0,r):o.complete())},s)})}function F6(i,n=Vf.z){return function yZ(i){return(0,Zi.e)((n,e)=>{let r=!1,o=null,s=null,c=!1;const h=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const y=o;o=null,e.next(y)}c&&e.complete()},p=()=>{s=null,c&&e.complete()};n.subscribe((0,Ii.x)(e,y=>{r=!0,o=y,s||(0,Da.Xf)(i(y)).subscribe(s=(0,Ii.x)(e,h,p))},()=>{c=!0,(!r||!s||s.closed)&&e.complete()}))})}(()=>N6(i,n))}let L6=(()=>{class i{constructor(e,r,o){this._ngZone=e,this._platform=r,this._scrolled=new Ht.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Bi.y(r=>{this._globalSubscription||this._addGlobalListener();const o=e>0?this._scrolled.pipe(F6(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,mt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const o=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(Cn(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,e)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let o=Bh(r),s=e.getElementRef().nativeElement;do{if(o==s)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>vC(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.R0b),d.LFG(zr),d.LFG(ue,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),fF=(()=>{class i{constructor(e,r,o,s){this.elementRef=e,this.scrollDispatcher=r,this.ngZone=o,this.dir=s,this._destroyed=new Ht.x,this._elementScrolled=new Bi.y(c=>this.ngZone.runOutsideAngular(()=>vC(this.elementRef.nativeElement,"scroll").pipe(gr(this._destroyed)).subscribe(c)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const r=this.elementRef.nativeElement,o=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=o?e.end:e.start),null==e.right&&(e.right=o?e.start:e.end),null!=e.bottom&&(e.top=r.scrollHeight-r.clientHeight-e.bottom),o&&0!=cC()?(null!=e.left&&(e.right=r.scrollWidth-r.clientWidth-e.left),2==cC()?e.left=e.right:1==cC()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=r.scrollWidth-r.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const r=this.elementRef.nativeElement;!function j9(){if(null==A_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return A_=!1,A_;if("scrollBehavior"in document.documentElement.style)A_=!0;else{const i=Element.prototype.scrollTo;A_=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return A_}()?(null!=e.top&&(r.scrollTop=e.top),null!=e.left&&(r.scrollLeft=e.left)):r.scrollTo(e)}measureScrollOffset(e){const r="left",o="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const c=this.dir&&"rtl"==this.dir.value;return"start"==e?e=c?o:r:"end"==e&&(e=c?r:o),c&&2==cC()?e==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:c&&1==cC()?e==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(L6),d.Y36(d.R0b),d.Y36(gM,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),i})(),U6=(()=>{class i{constructor(e,r,o){this._platform=e,this._change=new Ht.x,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),o=e.documentElement,s=o.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||r.scrollY||o.scrollTop||0,left:-s.left||e.body.scrollLeft||r.scrollX||o.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(F6(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(zr),d.LFG(d.R0b),d.LFG(ue,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),PM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})(),EZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_M,PM,_M,PM]}),i})();function mF(i){return(0,_t.U)(()=>i)}const B6=["*"],CZ=["content"];function DZ(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"div",2),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o._onBackdropClicked())}),d.qZA()}if(2&i){const e=d.oxw();d.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function IZ(i,n){1&i&&(d.TgZ(0,"mat-drawer-content"),d.Hsn(1,2),d.qZA())}const TZ=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],SZ=["mat-drawer","mat-drawer-content","*"],AZ={transformDrawer:bM("transform",[R_("open, open-instant",Kd({transform:"none",visibility:"visible"})),R_("void",Kd({"box-shadow":"none",visibility:"hidden"})),mC("void => open-instant",fC("0ms")),mC("void <=> open, open-instant => void",fC("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},MZ=new d.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function kZ(){return!1}}),V6=new d.OlP("MAT_DRAWER_CONTAINER");let OM=(()=>{class i extends fF{constructor(e,r,o,s,c){super(o,s,c),this._changeDetectorRef=e,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.sBO),d.Y36((0,d.Gpc)(()=>z6)),d.Y36(d.SBq),d.Y36(L6),d.Y36(d.R0b))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-drawer-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,r){2&e&&d.Udp("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[d._Bn([{provide:fF,useExisting:i}]),d.qOj],ngContentSelectors:B6,decls:1,vars:0,template:function(e,r){1&e&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),H6=(()=>{class i{get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=Tn(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=Tn(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(Tn(e))}constructor(e,r,o,s,c,h,p,y){this._elementRef=e,this._focusTrapFactory=r,this._focusMonitor=o,this._platform=s,this._ngZone=c,this._interactivityChecker=h,this._doc=p,this._container=y,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Ht.x,this._animationEnd=new Ht.x,this._animationState="void",this.openedChange=new d.vpe(!0),this._openedStream=this.openedChange.pipe(Cn(w=>w),(0,_t.U)(()=>{})),this.openedStart=this._animationStarted.pipe(Cn(w=>w.fromState!==w.toState&&0===w.toState.indexOf("open")),mF(void 0)),this._closedStream=this.openedChange.pipe(Cn(w=>!w),(0,_t.U)(()=>{})),this.closedStart=this._animationStarted.pipe(Cn(w=>w.fromState!==w.toState&&"void"===w.toState),mF(void 0)),this._destroyed=new Ht.x,this.onPositionChanged=new d.vpe,this._modeChanged=new Ht.x,this.openedChange.subscribe(w=>{w?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{vC(this._elementRef.nativeElement,"keydown").pipe(Cn(w=>27===w.keyCode&&!this.disableClose&&!hM(w)),gr(this._destroyed)).subscribe(w=>this._ngZone.run(()=>{this.close(),w.stopPropagation(),w.preventDefault()}))}),this._animationEnd.pipe((0,dl.x)((w,I)=>w.fromState===I.fromState&&w.toState===I.toState)).subscribe(w=>{const{fromState:I,toState:A}=w;(0===A.indexOf("open")&&"void"===I||"void"===A&&0===I.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{e.removeEventListener("blur",o),e.removeEventListener("mousedown",o),e.removeAttribute("tabindex")};e.addEventListener("blur",o),e.addEventListener("mousedown",o)})),e.focus(r)}_focusByCssSelector(e,r){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,r)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,r){e&&r&&(this._openedVia=r);const o=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),o}_setOpen(e,r,o){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(o)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Nr(1)).subscribe(c=>s(c?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const r=this._elementRef.nativeElement,o=r.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,r)),o.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(Pq),d.Y36(pM),d.Y36(zr),d.Y36(d.R0b),d.Y36(i4),d.Y36(ue,8),d.Y36(V6,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-drawer"]],viewQuery:function(e,r){if(1&e&&d.Gf(CZ,5),2&e){let o;d.iGM(o=d.CRH())&&(r._content=o.first)}},hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer"],hostVars:12,hostBindings:function(e,r){1&e&&d.WFA("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),2&e&&(d.uIk("align",null),d.d8E("@transform",r._animationState),d.ekj("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:B6,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,r){1&e&&(d.F$t(),d.TgZ(0,"div",0,1),d.Hsn(2),d.qZA())},dependencies:[fF],encapsulation:2,data:{animation:[AZ.transformDrawer]},changeDetection:0}),i})(),z6=(()=>{class i{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=Tn(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:Tn(e)}get scrollable(){return this._userContent||this._content}constructor(e,r,o,s,c,h=!1,p){this._dir=e,this._element=r,this._ngZone=o,this._changeDetectorRef=s,this._animationMode=p,this._drawers=new d.n_E,this.backdropClick=new d.vpe,this._destroyed=new Ht.x,this._doCheckSubject=new Ht.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Ht.x,e&&e.change.pipe(gr(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),c.change().pipe(gr(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}ngAfterContentInit(){this._allDrawers.changes.pipe(gc(this._allDrawers),gr(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(gc(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(QE(10),gr(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const o=this._left._getWidth();e+=o,r-=o}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const o=this._right._getWidth();r+=o,e-=o}e=e||null,r=r||null,(e!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:e,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(Cn(r=>r.fromState!==r.toState),gr(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(gr(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e&&e.onPositionChanged.pipe(gr(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Nr(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(gr((0,ba.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const r=this._element.nativeElement.classList,o="mat-drawer-container-has-open";e?r.add(o):r.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(gM,8),d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(d.sBO),d.Y36(U6),d.Y36(MZ),d.Y36(d.QbO,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(e,r,o){if(1&e&&(d.Suo(o,OM,5),d.Suo(o,H6,5)),2&e){let s;d.iGM(s=d.CRH())&&(r._content=s.first),d.iGM(s=d.CRH())&&(r._allDrawers=s)}},viewQuery:function(e,r){if(1&e&&d.Gf(OM,5),2&e){let o;d.iGM(o=d.CRH())&&(r._userContent=o.first)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[d._Bn([{provide:V6,useExisting:i}])],ngContentSelectors:SZ,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,r){1&e&&(d.F$t(TZ),d.YNc(0,DZ,1,2,"div",0),d.Hsn(1),d.Hsn(2,1),d.YNc(3,IZ,2,0,"mat-drawer-content",1)),2&e&&(d.Q6J("ngIf",r.hasBackdrop),d.xp6(3),d.Q6J("ngIf",!r._content))},dependencies:[no,OM],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),i})(),RZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[$r,_r,PM,PM,_r]}),i})();function j6(i){return!!i&&(i instanceof Bi.y||(0,qr.m)(i.lift)&&(0,qr.m)(i.subscribe))}const PZ=[[["caption"]],[["colgroup"],["col"]]],OZ=["caption","colgroup, col"];function pF(i){return class extends i{get sticky(){return this._sticky}set sticky(n){const e=this._sticky;this._sticky=Tn(n),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const n=this._hasStickyChanged;return this._hasStickyChanged=!1,n}resetStickyChanged(){this._hasStickyChanged=!1}constructor(...n){super(...n),this._sticky=!1,this._hasStickyChanged=!1}}}const $b=new d.OlP("CDK_TABLE");let Gb=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkCellDef",""]]}),i})(),Wb=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkHeaderCellDef",""]]}),i})(),NM=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkFooterCellDef",""]]}),i})();class UZ{}const BZ=pF(UZ);let zh=(()=>{class i extends BZ{get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const r=this._stickyEnd;this._stickyEnd=Tn(e),this._hasStickyChanged=r!==this._stickyEnd}constructor(e){super(),this._table=e,this._stickyEnd=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return i.\u0275fac=function(e){return new(e||i)(d.Y36($b,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,r,o){if(1&e&&(d.Suo(o,Gb,5),d.Suo(o,Wb,5),d.Suo(o,NM,5)),2&e){let s;d.iGM(s=d.CRH())&&(r.cell=s.first),d.iGM(s=d.CRH())&&(r.headerCell=s.first),d.iGM(s=d.CRH())&&(r.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[d._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),d.qOj]}),i})();class gF{constructor(n,e){e.nativeElement.classList.add(...n._columnCssClassName)}}let _F=(()=>{class i extends gF{constructor(e,r){super(e,r)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(zh),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[d.qOj]}),i})(),yF=(()=>{class i extends gF{constructor(e,r){if(super(e,r),1===e._table?._elementRef.nativeElement.nodeType){const o=e._table._elementRef.nativeElement.getAttribute("role");r.nativeElement.setAttribute("role","grid"===o||"treegrid"===o?"gridcell":"cell")}}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(zh),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[d.qOj]}),i})();class G6{constructor(){this.tasks=[],this.endTasks=[]}}const vF=new d.OlP("_COALESCED_STYLE_SCHEDULER");let W6=(()=>{class i{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Ht.x}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new G6,this._getScheduleObservable().pipe(gr(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new G6;for(const r of e.tasks)r();for(const r of e.endTasks)r()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,rn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Nr(1))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),bF=(()=>{class i{constructor(e,r){this.template=e,this._differs=r}ngOnChanges(e){if(!this._columnsDiffer){const r=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof wC?e.headerCell.template:this instanceof xC?e.footerCell.template:e.cell.template}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(d.ZZ4))},i.\u0275dir=d.lG2({type:i,features:[d.TTD]}),i})();class VZ extends bF{}const HZ=pF(VZ);let wC=(()=>{class i extends HZ{constructor(e,r,o){super(e,r),this._table=o}ngOnChanges(e){super.ngOnChanges(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(d.ZZ4),d.Y36($b,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[d.qOj,d.TTD]}),i})();class zZ extends bF{}const jZ=pF(zZ);let xC=(()=>{class i extends jZ{constructor(e,r,o){super(e,r),this._table=o}ngOnChanges(e){super.ngOnChanges(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(d.ZZ4),d.Y36($b,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[d.qOj,d.TTD]}),i})(),FM=(()=>{class i extends bF{constructor(e,r,o){super(e,r),this._table=o}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(d.ZZ4),d.Y36($b,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[d.qOj]}),i})(),jh=(()=>{class i{constructor(e){this._viewContainer=e,i.mostRecentCellOutlet=this}ngOnDestroy(){i.mostRecentCellOutlet===this&&(i.mostRecentCellOutlet=null)}}return i.mostRecentCellOutlet=null,i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkCellOutlet",""]]}),i})(),wF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&d.GkF(0,0)},dependencies:[jh],encapsulation:2}),i})(),EF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&d.GkF(0,0)},dependencies:[jh],encapsulation:2}),i})(),LM=(()=>{class i{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["ng-template","cdkNoDataRow",""]]}),i})();const q6=["top","bottom","left","right"];class $Z{constructor(n,e,r,o,s=!0,c=!0,h){this._isNativeHtmlTable=n,this._stickCellCss=e,this.direction=r,this._coalescedStyleScheduler=o,this._isBrowser=s,this._needsPositionStickyOnElement=c,this._positionListener=h,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(n,e){const r=[];for(const o of n)if(o.nodeType===o.ELEMENT_NODE){r.push(o);for(let s=0;s<o.children.length;s++)r.push(o.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const o of r)this._removeStickyStyle(o,e)})}updateStickyColumns(n,e,r,o=!0){if(!n.length||!this._isBrowser||!e.some(A=>A)&&!r.some(A=>A))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=n[0],c=s.children.length,h=this._getCellWidths(s,o),p=this._getStickyStartColumnPositions(h,e),y=this._getStickyEndColumnPositions(h,r),w=e.lastIndexOf(!0),I=r.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const A="rtl"===this.direction,P=A?"right":"left",U=A?"left":"right";for(const G of n)for(let Q=0;Q<c;Q++){const me=G.children[Q];e[Q]&&this._addStickyStyle(me,P,p[Q],Q===w),r[Q]&&this._addStickyStyle(me,U,y[Q],Q===I)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===w?[]:h.slice(0,w+1).map((G,Q)=>e[Q]?G:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===I?[]:h.slice(I).map((G,Q)=>r[Q+I]?G:null).reverse()}))})}stickRows(n,e,r){if(!this._isBrowser)return;const o="bottom"===r?n.slice().reverse():n,s="bottom"===r?e.slice().reverse():e,c=[],h=[],p=[];for(let w=0,I=0;w<o.length;w++){if(!s[w])continue;c[w]=I;const A=o[w];p[w]=this._isNativeHtmlTable?Array.from(A.children):[A];const P=A.getBoundingClientRect().height;I+=P,h[w]=P}const y=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let w=0;w<o.length;w++){if(!s[w])continue;const I=c[w],A=w===y;for(const P of p[w])this._addStickyStyle(P,r,I,A)}"top"===r?this._positionListener?.stickyHeaderRowsUpdated({sizes:h,offsets:c,elements:p}):this._positionListener?.stickyFooterRowsUpdated({sizes:h,offsets:c,elements:p})})}updateStickyFooterContainer(n,e){if(!this._isNativeHtmlTable)return;const r=n.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(o=>!o)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1)})}_removeStickyStyle(n,e){for(const o of e)n.style[o]="",n.classList.remove(this._borderCellCss[o]);q6.some(o=>-1===e.indexOf(o)&&n.style[o])?n.style.zIndex=this._getCalculatedZIndex(n):(n.style.zIndex="",this._needsPositionStickyOnElement&&(n.style.position=""),n.classList.remove(this._stickCellCss))}_addStickyStyle(n,e,r,o){n.classList.add(this._stickCellCss),o&&n.classList.add(this._borderCellCss[e]),n.style[e]=`${r}px`,n.style.zIndex=this._getCalculatedZIndex(n),this._needsPositionStickyOnElement&&(n.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(n){const e={top:100,bottom:10,left:1,right:1};let r=0;for(const o of q6)n.style[o]&&(r+=e[o]);return r?`${r}`:""}_getCellWidths(n,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const r=[],o=n.children;for(let s=0;s<o.length;s++)r.push(o[s].getBoundingClientRect().width);return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(n,e){const r=[];let o=0;for(let s=0;s<n.length;s++)e[s]&&(r[s]=o,o+=n[s]);return r}_getStickyEndColumnPositions(n,e){const r=[];let o=0;for(let s=n.length;s>0;s--)e[s]&&(r[s]=o,o+=n[s]);return r}}const CF=new d.OlP("CDK_SPL");let UM=(()=>{class i{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["","rowOutlet",""]]}),i})(),BM=(()=>{class i{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["","headerRowOutlet",""]]}),i})(),VM=(()=>{class i{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["","footerRowOutlet",""]]}),i})(),HM=(()=>{class i{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["","noDataRowOutlet",""]]}),i})(),zM=(()=>{class i{get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=Tn(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=Tn(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,r,o,s,c,h,p,y,w,I,A,P){this._differs=e,this._changeDetectorRef=r,this._elementRef=o,this._dir=c,this._platform=p,this._viewRepeater=y,this._coalescedStyleScheduler=w,this._viewportRuler=I,this._stickyPositioningListener=A,this._ngZone=P,this._onDestroy=new Ht.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new d.vpe,this.viewChange=new ia.X({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=h,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(gr(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),JN(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,r,(o,s,c)=>this._getEmbeddedViewArgs(o.item,c),o=>o.item.data,o=>{1===o.operation&&o.context&&this._renderCellTemplateForItem(o.record.item.rowDef,o.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(o=>{r.get(o.currentIndex).context.$implicit=o.item.data}),this._updateNoDataRow(),this._ngZone&&d.R0b.isInAngularZone()?this._ngZone.onStable.pipe(Nr(1),gr(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),o=this._elementRef.nativeElement.querySelector("thead");o&&(o.style.display=e.length?"":"none");const s=this._headerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),o=this._elementRef.nativeElement.querySelector("tfoot");o&&(o.style.display=e.length?"":"none");const s=this._footerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),o=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...r,...o],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,c)=>{this._addStickyColumnStyles([s],this._headerRowDefs[c])}),this._rowDefs.forEach(s=>{const c=[];for(let h=0;h<r.length;h++)this._renderRows[h].rowDef===s&&c.push(r[h]);this._addStickyColumnStyles(c,s)}),o.forEach((s,c)=>{this._addStickyColumnStyles([s],this._footerRowDefs[c])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let o=0;o<this._data.length;o++){let s=this._data[o];const c=this._getRenderRowsForData(s,o,r.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let h=0;h<c.length;h++){let p=c[h];const y=this._cachedRenderRowsMap.get(p.data);y.has(p.rowDef)?y.get(p.rowDef).push(p):y.set(p.rowDef,[p]),e.push(p)}}return e}_getRenderRowsForData(e,r,o){return this._getRowDefs(e,r).map(c=>{const h=o&&o.has(c)?o.get(c):[];if(h.length){const p=h.shift();return p.dataIndex=r,p}return{data:e,rowDef:c,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),jM(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=jM(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=jM(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=jM(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(r=>!r.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(c,h)=>c||!!h.getColumnsDiff(),r=this._rowDefs.reduce(e,!1);r&&this._forceRenderDataRows();const o=this._headerRowDefs.reduce(e,!1);o&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),r||o||s}_switchDataSource(e){this._data=[],JN(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;JN(this.dataSource)?e=this.dataSource.connect(this):j6(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=(0,mt.of)(this.dataSource)),this._renderChangeSubscription=e.pipe(gr(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,r)=>this._renderRow(this._headerRowOutlet,e,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,r)=>this._renderRow(this._footerRowOutlet,e,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,r){const o=Array.from(r.columns||[]).map(h=>this._columnDefsByName.get(h)),s=o.map(h=>h.sticky),c=o.map(h=>h.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,c,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const r=[];for(let o=0;o<e.viewContainer.length;o++){const s=e.viewContainer.get(o);r.push(s.rootNodes[0])}return r}_getRowDefs(e,r){if(1==this._rowDefs.length)return[this._rowDefs[0]];let o=[];if(this.multiTemplateDataRows)o=this._rowDefs.filter(s=>!s.when||s.when(r,e));else{let s=this._rowDefs.find(c=>c.when&&c.when(r,e))||this._defaultRowDef;s&&o.push(s)}return o}_getEmbeddedViewArgs(e,r){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:r}}_renderRow(e,r,o,s={}){const c=e.viewContainer.createEmbeddedView(r.template,s,o);return this._renderCellTemplateForItem(r,s),c}_renderCellTemplateForItem(e,r){for(let o of this._getCellTemplates(e))jh.mostRecentCellOutlet&&jh.mostRecentCellOutlet._viewContainer.createEmbeddedView(o,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let r=0,o=e.length;r<o;r++){const c=e.get(r).context;c.count=o,c.first=0===r,c.last=r===o-1,c.even=r%2==0,c.odd=!c.even,this.multiTemplateDataRows?(c.dataIndex=this._renderRows[r].dataIndex,c.renderIndex=r):c.index=this._renderRows[r].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,r=>{const o=this._columnDefsByName.get(r);return e.extractCellTemplate(o)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),r=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const o of r){const s=this._document.createElement(o.tag);s.setAttribute("role","rowgroup");for(const c of o.outlets)s.appendChild(c.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(r,o)=>r||o.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new $Z(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:(0,mt.of)()).pipe(gr(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const r=0===this._rowOutlet.viewContainer.length;if(r===this._isShowingNoDataRow)return;const o=this._noDataRowOutlet.viewContainer;if(r){const s=o.createEmbeddedView(e.templateRef),c=s.rootNodes[0];1===s.rootNodes.length&&c?.nodeType===this._document.ELEMENT_NODE&&(c.setAttribute("role","row"),c.classList.add(e._contentClassName))}else o.clear();this._isShowingNoDataRow=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.ZZ4),d.Y36(d.sBO),d.Y36(d.SBq),d.$8M("role"),d.Y36(gM,8),d.Y36(ue),d.Y36(zr),d.Y36(hC),d.Y36(vF),d.Y36(U6),d.Y36(CF,12),d.Y36(d.R0b,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,r,o){if(1&e&&(d.Suo(o,LM,5),d.Suo(o,zh,5),d.Suo(o,FM,5),d.Suo(o,wC,5),d.Suo(o,xC,5)),2&e){let s;d.iGM(s=d.CRH())&&(r._noDataRow=s.first),d.iGM(s=d.CRH())&&(r._contentColumnDefs=s),d.iGM(s=d.CRH())&&(r._contentRowDefs=s),d.iGM(s=d.CRH())&&(r._contentHeaderRowDefs=s),d.iGM(s=d.CRH())&&(r._contentFooterRowDefs=s)}},viewQuery:function(e,r){if(1&e&&(d.Gf(UM,7),d.Gf(BM,7),d.Gf(VM,7),d.Gf(HM,7)),2&e){let o;d.iGM(o=d.CRH())&&(r._rowOutlet=o.first),d.iGM(o=d.CRH())&&(r._headerRowOutlet=o.first),d.iGM(o=d.CRH())&&(r._footerRowOutlet=o.first),d.iGM(o=d.CRH())&&(r._noDataRowOutlet=o.first)}},hostAttrs:["ngSkipHydration","",1,"cdk-table"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[d._Bn([{provide:$b,useExisting:i},{provide:hC,useClass:I4},{provide:vF,useClass:W6},{provide:CF,useValue:null}])],ngContentSelectors:OZ,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,r){1&e&&(d.F$t(PZ),d.Hsn(0),d.Hsn(1,1),d.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[UM,BM,VM,HM],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),i})();function jM(i,n){return i.concat(Array.from(n))}let WZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[EZ]}),i})();const qZ=[[["caption"]],[["colgroup"],["col"]]],KZ=["caption","colgroup, col"];let Y6=(()=>{class i extends zM{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}ngOnInit(){super.ngOnInit(),this._isNativeHtmlTable&&this._elementRef.nativeElement.querySelector("tbody").classList.add("mdc-data-table__content")}}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:["ngSkipHydration","",1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mdc-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],features:[d._Bn([{provide:zM,useExisting:i},{provide:$b,useExisting:i},{provide:vF,useClass:W6},{provide:hC,useClass:I4},{provide:CF,useValue:null}]),d.qOj],ngContentSelectors:KZ,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,r){1&e&&(d.F$t(qZ),d.Hsn(0),d.Hsn(1,1),d.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[UM,BM,VM,HM],styles:[".mdc-data-table{border-radius:var(--mdc-shape-medium, 4px);border-width:1px;border-style:solid}.mdc-data-table .mdc-data-table__header-cell:first-child{border-top-left-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table .mdc-data-table__header-cell:first-child,.mdc-data-table .mdc-data-table__header-cell:first-child[dir=rtl]{border-top-right-radius:var(--mdc-shape-medium, 4px);border-top-left-radius:0}.mdc-data-table .mdc-data-table__header-cell:last-child{border-top-right-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table .mdc-data-table__header-cell:last-child,.mdc-data-table .mdc-data-table__header-cell:last-child[dir=rtl]{border-top-left-radius:var(--mdc-shape-medium, 4px);border-top-right-radius:0}.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child{border-bottom-left-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child,.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child[dir=rtl]{border-bottom-right-radius:var(--mdc-shape-medium, 4px);border-bottom-left-radius:0}.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child{border-bottom-right-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child,.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child[dir=rtl]{border-bottom-left-radius:var(--mdc-shape-medium, 4px);border-bottom-right-radius:0}.mdc-data-table__cell,.mdc-data-table__header-cell{border-bottom-width:1px;border-bottom-style:solid}.mdc-data-table__pagination{border-top-width:1px;border-top-style:solid}.mdc-data-table__row:last-child .mdc-data-table__cell{border-bottom:none}.mdc-data-table__row{height:52px}.mdc-data-table__pagination{min-height:52px}.mdc-data-table__header-row{height:56px}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__cell--checkbox{width:1px}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__header-cell--checkbox{width:1px}.mdc-data-table__sort-icon-button{width:28px;height:28px;padding:2px;transform:rotate(0.0001deg);margin-left:4px;margin-right:0;opacity:0}.mdc-data-table__sort-icon-button .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:28px;height:28px;margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:28px;left:50%;width:28px;transform:translate(-50%, -50%)}[dir=rtl] .mdc-data-table__sort-icon-button,.mdc-data-table__sort-icon-button[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__header-cell--sorted-descending .mdc-data-table__sort-icon-button{transform:rotate(-180deg)}.mdc-data-table__sort-icon-button:focus,.mdc-data-table__header-cell:hover .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--sorted .mdc-data-table__sort-icon-button{opacity:1}.mdc-data-table__header-cell--with-sort{cursor:pointer}.mdc-data-table__sort-status-label{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.mdc-data-table--sticky-header .mdc-data-table__header-cell{position:sticky;top:0;z-index:1}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__pagination{box-sizing:border-box;display:flex;justify-content:flex-end}.mdc-data-table__pagination-trailing{margin-left:4px;margin-right:0;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-end}[dir=rtl] .mdc-data-table__pagination-trailing,.mdc-data-table__pagination-trailing[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__pagination-navigation{align-items:center;display:flex}.mdc-data-table__pagination-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__pagination-button .mdc-button__icon,.mdc-data-table__pagination-button .mdc-button__icon[dir=rtl]{transform:rotate(180deg)}[dir=rtl] .mdc-data-table__pagination-button,.mdc-data-table__pagination-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__pagination-total{margin-left:14px;margin-right:36px;white-space:nowrap}[dir=rtl] .mdc-data-table__pagination-total,.mdc-data-table__pagination-total[dir=rtl]{margin-left:36px;margin-right:14px}.mdc-data-table__pagination-rows-per-page{margin-left:0;margin-right:22px;align-items:center;display:inline-flex}[dir=rtl] .mdc-data-table__pagination-rows-per-page,.mdc-data-table__pagination-rows-per-page[dir=rtl]{margin-left:22px;margin-right:0}.mdc-data-table__pagination-rows-per-page-label{margin-left:0;margin-right:12px;white-space:nowrap}[dir=rtl] .mdc-data-table__pagination-rows-per-page-label,.mdc-data-table__pagination-rows-per-page-label[dir=rtl]{margin-left:12px;margin-right:0}.mdc-data-table__pagination-rows-per-page-select{min-width:var(--mdc-menu-min-width, 80px);margin:8px 0}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor{width:100%;min-width:80px}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor{height:36px}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-data-table__pagination-rows-per-page-select .mdc-select__dropdown-icon{width:20px;height:20px}.mdc-data-table__pagination-rows-per-page-select.mdc-select--outlined .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 56px)}.mdc-data-table__pagination-rows-per-page-select .mdc-list-item.mdc-list-item--with-one-line{height:36px}.mdc-data-table__progress-indicator{display:none;position:absolute;width:100%}.mdc-data-table--in-progress .mdc-data-table__progress-indicator{display:block}.mdc-data-table__scrim{background-color:var(--mdc-theme-surface, #fff);height:100%;opacity:.32;position:absolute;top:0;width:100%}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table-sticky{position:sticky !important}.mat-mdc-table{table-layout:auto;white-space:normal}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table .mat-mdc-row:hover,.mat-mdc-table .mat-mdc-footer-row:hover{background-color:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2}),i})(),DF=(()=>{class i extends Gb{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matCellDef",""]],features:[d._Bn([{provide:Gb,useExisting:i}]),d.qOj]}),i})(),IF=(()=>{class i extends Wb{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matHeaderCellDef",""]],features:[d._Bn([{provide:Wb,useExisting:i}]),d.qOj]}),i})(),TF=(()=>{class i extends zh{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[d._Bn([{provide:zh,useExisting:i},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),d.qOj]}),i})(),SF=(()=>{class i extends _F{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[d.qOj]}),i})(),AF=(()=>{class i extends yF{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[d.qOj]}),i})(),Z6=(()=>{class i extends wC{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[d._Bn([{provide:wC,useExisting:i}]),d.qOj]}),i})(),Q6=(()=>{class i extends FM{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[d._Bn([{provide:FM,useExisting:i}]),d.qOj]}),i})(),X6=(()=>{class i extends wF{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[d._Bn([{provide:wF,useExisting:i}]),d.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&d.GkF(0,0)},dependencies:[jh],encapsulation:2}),i})(),J6=(()=>{class i extends EF{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[d._Bn([{provide:EF,useExisting:i}]),d.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&d.GkF(0,0)},dependencies:[jh],encapsulation:2}),i})(),nQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r,WZ,_r]}),i})();const rQ=["*",[["mat-toolbar-row"]]],oQ=["*","mat-toolbar-row"],sQ=qN(class{constructor(i){this._elementRef=i}});let eH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),aQ=(()=>{class i extends sQ{constructor(e,r,o){super(e),this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(zr),d.Y36(ue))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-toolbar"]],contentQueries:function(e,r,o){if(1&e&&d.Suo(o,eH,5),2&e){let s;d.iGM(s=d.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,r){2&e&&d.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[d.qOj],ngContentSelectors:oQ,decls:2,vars:0,template:function(e,r){1&e&&(d.F$t(rQ),d.Hsn(0),d.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),i})(),lQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[_r,_r]}),i})();function tH(i){return new d.vHH(3e3,!1)}function up(i){switch(i.length){case 0:return new pC;case 1:return i[0];default:return new B4(i)}}function nH(i,n,e=new Map,r=new Map){const o=[],s=[];let c=-1,h=null;if(n.forEach(p=>{const y=p.get("offset"),w=y==c,I=w&&h||new Map;p.forEach((A,P)=>{let U=P,G=A;if("offset"!==P)switch(U=i.normalizePropertyName(U,o),G){case"!":G=e.get(P);break;case Vh:G=r.get(P);break;default:G=i.normalizeStyleValue(P,U,G,o)}I.set(U,G)}),w||s.push(I),h=I,c=y}),o.length)throw function kQ(i){return new d.vHH(3502,!1)}();return s}function MF(i,n,e,r){switch(n){case"start":i.onStart(()=>r(e&&kF(e,"start",i)));break;case"done":i.onDone(()=>r(e&&kF(e,"done",i)));break;case"destroy":i.onDestroy(()=>r(e&&kF(e,"destroy",i)))}}function kF(i,n,e){const s=RF(i.element,i.triggerName,i.fromState,i.toState,n||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),c=i._data;return null!=c&&(s._data=c),s}function RF(i,n,e,r,o="",s=0,c){return{element:i,triggerName:n,fromState:e,toState:r,phaseName:o,totalTime:s,disabled:!!c}}function Ua(i,n,e){let r=i.get(n);return r||i.set(n,r=e),r}function iH(i){const n=i.indexOf(":");return[i.substring(1,n),i.slice(n+1)]}const jQ=(()=>typeof document>"u"?null:document.documentElement)();function PF(i){const n=i.parentNode||i.host||null;return n===jQ?null:n}let F_=null,rH=!1;function oH(i,n){for(;n;){if(n===i)return!0;n=PF(n)}return!1}function sH(i,n,e){if(e)return Array.from(i.querySelectorAll(n));const r=i.querySelector(n);return r?[r]:[]}let aH=(()=>{class i{validateStyleProperty(e){return function GQ(i){F_||(F_=function WQ(){return typeof document<"u"?document.body:null}()||{},rH=!!F_.style&&"WebkitAppearance"in F_.style);let n=!0;return F_.style&&!function $Q(i){return"ebkit"==i.substring(1,6)}(i)&&(n=i in F_.style,!n&&rH&&(n="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in F_.style)),n}(e)}matchesElement(e,r){return!1}containsElement(e,r){return oH(e,r)}getParentElement(e){return PF(e)}query(e,r,o){return sH(e,r,o)}computeStyle(e,r,o){return o||""}animate(e,r,o,s,c,h=[],p){return new pC(o,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),OF=(()=>{class i{}return i.NOOP=new aH,i})();const qQ=1e3,NF="ng-enter",$M="ng-leave",GM="ng-trigger",WM=".ng-trigger",cH="ng-animating",FF=".ng-animating";function $h(i){if("number"==typeof i)return i;const n=i.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:LF(parseFloat(n[1]),n[2])}function LF(i,n){return"s"===n?i*qQ:i}function qM(i,n,e){return i.hasOwnProperty("duration")?i:function YQ(i,n,e){let o,s=0,c="";if("string"==typeof i){const h=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return n.push(tH()),{duration:0,delay:0,easing:""};o=LF(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=LF(parseFloat(p),h[4]));const y=h[5];y&&(c=y)}else o=i;if(!e){let h=!1,p=n.length;o<0&&(n.push(function cQ(){return new d.vHH(3100,!1)}()),h=!0),s<0&&(n.push(function dQ(){return new d.vHH(3101,!1)}()),h=!0),h&&n.splice(p,0,tH())}return{duration:o,delay:s,easing:c}}(i,n,e)}function EC(i,n={}){return Object.keys(i).forEach(e=>{n[e]=i[e]}),n}function dH(i){const n=new Map;return Object.keys(i).forEach(e=>{n.set(e,i[e])}),n}function hp(i,n=new Map,e){if(e)for(let[r,o]of e)n.set(r,o);for(let[r,o]of i)n.set(r,o);return n}function Yd(i,n,e){n.forEach((r,o)=>{const s=BF(o);e&&!e.has(o)&&e.set(o,i.style[s]),i.style[s]=r})}function L_(i,n){n.forEach((e,r)=>{const o=BF(r);i.style[o]=""})}function CC(i){return Array.isArray(i)?1==i.length?i[0]:L4(i):i}const UF=new RegExp("{{\\s*(.+?)\\s*}}","g");function hH(i){let n=[];if("string"==typeof i){let e;for(;e=UF.exec(i);)n.push(e[1]);UF.lastIndex=0}return n}function DC(i,n,e){const r=i.toString(),o=r.replace(UF,(s,c)=>{let h=n[c];return null==h&&(e.push(function hQ(i){return new d.vHH(3003,!1)}()),h=""),h.toString()});return o==r?i:o}function KM(i){const n=[];let e=i.next();for(;!e.done;)n.push(e.value),e=i.next();return n}const XQ=/-+([a-z0-9])/g;function BF(i){return i.replace(XQ,(...n)=>n[1].toUpperCase())}function Ba(i,n,e){switch(n.type){case 7:return i.visitTrigger(n,e);case 0:return i.visitState(n,e);case 1:return i.visitTransition(n,e);case 2:return i.visitSequence(n,e);case 3:return i.visitGroup(n,e);case 4:return i.visitAnimate(n,e);case 5:return i.visitKeyframes(n,e);case 6:return i.visitStyle(n,e);case 8:return i.visitReference(n,e);case 9:return i.visitAnimateChild(n,e);case 10:return i.visitAnimateRef(n,e);case 11:return i.visitQuery(n,e);case 12:return i.visitStagger(n,e);default:throw function fQ(i){return new d.vHH(3004,!1)}()}}function fH(i,n){return window.getComputedStyle(i)[n]}const YM="*";function tX(i,n){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(r=>function nX(i,n,e){if(":"==i[0]){const p=function iX(i,n){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return n.push(function TQ(i){return new d.vHH(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof p)return void n.push(p);i=p}const r=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function IQ(i){return new d.vHH(3015,!1)}()),n;const o=r[1],s=r[2],c=r[3];n.push(mH(o,c));"<"==s[0]&&!(o==YM&&c==YM)&&n.push(mH(c,o))}(r,e,n)):e.push(i),e}const ZM=new Set(["true","1"]),QM=new Set(["false","0"]);function mH(i,n){const e=ZM.has(i)||QM.has(i),r=ZM.has(n)||QM.has(n);return(o,s)=>{let c=i==YM||i==o,h=n==YM||n==s;return!c&&e&&"boolean"==typeof o&&(c=o?ZM.has(i):QM.has(i)),!h&&r&&"boolean"==typeof s&&(h=s?ZM.has(n):QM.has(n)),c&&h}}const rX=new RegExp("s*:selfs*,?","g");function VF(i,n,e,r){return new oX(i).build(n,e,r)}class oX{constructor(n){this._driver=n}build(n,e,r){const o=new lX(e);return this._resetContextStyleTimingState(o),Ba(this,CC(n),o)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let r=e.queryCount=0,o=e.depCount=0;const s=[],c=[];return"@"==n.name.charAt(0)&&e.errors.push(function pQ(){return new d.vHH(3006,!1)}()),n.definitions.forEach(h=>{if(this._resetContextStyleTimingState(e),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,s.push(this.visitState(p,e))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,e);r+=p.queryCount,o+=p.depCount,c.push(p)}else e.errors.push(function gQ(){return new d.vHH(3007,!1)}())}),{type:7,name:n.name,states:s,transitions:c,queryCount:r,depCount:o,options:null}}visitState(n,e){const r=this.visitStyle(n.styles,e),o=n.options&&n.options.params||null;if(r.containsDynamicStyles){const s=new Set,c=o||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{hH(p).forEach(y=>{c.hasOwnProperty(y)||s.add(y)})})}),s.size&&(KM(s.values()),e.errors.push(function _Q(i,n){return new d.vHH(3008,!1)}()))}return{type:0,name:n.name,style:r,options:o?{params:o}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const r=Ba(this,CC(n.animation),e);return{type:1,matchers:tX(n.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:U_(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(r=>Ba(this,r,e)),options:U_(n.options)}}visitGroup(n,e){const r=e.currentTime;let o=0;const s=n.steps.map(c=>{e.currentTime=r;const h=Ba(this,c,e);return o=Math.max(o,e.currentTime),h});return e.currentTime=o,{type:3,steps:s,options:U_(n.options)}}visitAnimate(n,e){const r=function dX(i,n){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return HF(qM(i,n).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=HF(0,0,"");return s.dynamic=!0,s.strValue=e,s}const o=qM(e,n);return HF(o.duration,o.delay,o.easing)}(n.timings,e.errors);e.currentAnimateTimings=r;let o,s=n.styles?n.styles:Kd({});if(5==s.type)o=this.visitKeyframes(s,e);else{let c=n.styles,h=!1;if(!c){h=!0;const y={};r.easing&&(y.easing=r.easing),c=Kd(y)}e.currentTime+=r.duration+r.delay;const p=this.visitStyle(c,e);p.isEmptyStep=h,o=p}return e.currentAnimateTimings=null,{type:4,timings:r,style:o,options:null}}visitStyle(n,e){const r=this._makeStyleAst(n,e);return this._validateStyleAst(r,e),r}_makeStyleAst(n,e){const r=[],o=Array.isArray(n.styles)?n.styles:[n.styles];for(let h of o)"string"==typeof h?h===Vh?r.push(h):e.errors.push(new d.vHH(3002,!1)):r.push(dH(h));let s=!1,c=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(c=h.get("easing"),h.delete("easing")),!s))for(let p of h.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:c,offset:n.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(n,e){const r=e.currentAnimateTimings;let o=e.currentTime,s=e.currentTime;r&&s>0&&(s-=r.duration+r.delay),n.styles.forEach(c=>{"string"!=typeof c&&c.forEach((h,p)=>{const y=e.collectedStyles.get(e.currentQuerySelector),w=y.get(p);let I=!0;w&&(s!=o&&s>=w.startTime&&o<=w.endTime&&(e.errors.push(function vQ(i,n,e,r,o){return new d.vHH(3010,!1)}()),I=!1),s=w.startTime),I&&y.set(p,{startTime:s,endTime:o}),e.options&&function QQ(i,n,e){const r=n.params||{},o=hH(i);o.length&&o.forEach(s=>{r.hasOwnProperty(s)||e.push(function uQ(i){return new d.vHH(3001,!1)}())})}(h,e.options,e.errors)})})}visitKeyframes(n,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function bQ(){return new d.vHH(3011,!1)}()),r;let s=0;const c=[];let h=!1,p=!1,y=0;const w=n.steps.map(me=>{const Ce=this._makeStyleAst(me,e);let fe=null!=Ce.offset?Ce.offset:function cX(i){if("string"==typeof i)return null;let n=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(Ce.styles),Te=0;return null!=fe&&(s++,Te=Ce.offset=fe),p=p||Te<0||Te>1,h=h||Te<y,y=Te,c.push(Te),Ce});p&&e.errors.push(function wQ(){return new d.vHH(3012,!1)}()),h&&e.errors.push(function xQ(){return new d.vHH(3200,!1)}());const I=n.steps.length;let A=0;s>0&&s<I?e.errors.push(function EQ(){return new d.vHH(3202,!1)}()):0==s&&(A=1/(I-1));const P=I-1,U=e.currentTime,G=e.currentAnimateTimings,Q=G.duration;return w.forEach((me,Ce)=>{const fe=A>0?Ce==P?1:A*Ce:c[Ce],Te=fe*Q;e.currentTime=U+G.delay+Te,G.duration=Te,this._validateStyleAst(me,e),me.offset=fe,r.styles.push(me)}),r}visitReference(n,e){return{type:8,animation:Ba(this,CC(n.animation),e),options:U_(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:U_(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:U_(n.options)}}visitQuery(n,e){const r=e.currentQuerySelector,o=n.options||{};e.queryCount++,e.currentQuery=n;const[s,c]=function sX(i){const n=!!i.split(/\s*,\s*/).find(e=>":self"==e);return n&&(i=i.replace(rX,"")),i=i.replace(/@\*/g,WM).replace(/@\w+/g,e=>WM+"-"+e.slice(1)).replace(/:animating/g,FF),[i,n]}(n.selector);e.currentQuerySelector=r.length?r+" "+s:s,Ua(e.collectedStyles,e.currentQuerySelector,new Map);const h=Ba(this,CC(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:s,limit:o.limit||0,optional:!!o.optional,includeSelf:c,animation:h,originalSelector:n.selector,options:U_(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function CQ(){return new d.vHH(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:qM(n.timings,e.errors,!0);return{type:12,animation:Ba(this,CC(n.animation),e),timings:r,options:null}}}class lX{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function U_(i){return i?(i=EC(i)).params&&(i.params=function aX(i){return i?EC(i):null}(i.params)):i={},i}function HF(i,n,e){return{duration:i,delay:n,easing:e}}function zF(i,n,e,r,o,s,c=null,h=!1){return{type:1,element:i,keyframes:n,preStyleProps:e,postStyleProps:r,duration:o,delay:s,totalTime:o+s,easing:c,subTimeline:h}}class XM{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const fX=new RegExp(":enter","g"),pX=new RegExp(":leave","g");function jF(i,n,e,r,o,s=new Map,c=new Map,h,p,y=[]){return(new gX).buildKeyframes(i,n,e,r,o,s,c,h,p,y)}class gX{buildKeyframes(n,e,r,o,s,c,h,p,y,w=[]){y=y||new XM;const I=new $F(n,e,y,o,s,w,[]);I.options=p;const A=p.delay?$h(p.delay):0;I.currentTimeline.delayNextStep(A),I.currentTimeline.setStyles([c],null,I.errors,p),Ba(this,r,I);const P=I.timelines.filter(U=>U.containsAnimation());if(P.length&&h.size){let U;for(let G=P.length-1;G>=0;G--){const Q=P[G];if(Q.element===e){U=Q;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([h],null,I.errors,p)}return P.length?P.map(U=>U.buildKeyframes()):[zF(e,[],[],[],0,A,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const r=e.subInstructions.get(e.element);if(r){const o=e.createSubContext(n.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(r,o,o.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=n}visitAnimateRef(n,e){const r=e.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,r),this.visitReference(n.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,r){for(const o of n){const s=o?.delay;if(s){const c="number"==typeof s?s:$h(DC(s,o?.params??{},e.errors));r.delayNextStep(c)}}}_visitSubInstructions(n,e,r){let s=e.currentTimeline.currentTime;const c=null!=r.duration?$h(r.duration):null,h=null!=r.delay?$h(r.delay):null;return 0!==c&&n.forEach(p=>{const y=e.appendInstructionToTimeline(p,c,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(n,e){e.updateOptions(n.options,!0),Ba(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const r=e.subContextCount;let o=e;const s=n.options;if(s&&(s.params||s.delay)&&(o=e.createSubContext(s),o.transformIntoNewTimeline(),null!=s.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=JM);const c=$h(s.delay);o.delayNextStep(c)}n.steps.length&&(n.steps.forEach(c=>Ba(this,c,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const r=[];let o=e.currentTimeline.currentTime;const s=n.options&&n.options.delay?$h(n.options.delay):0;n.steps.forEach(c=>{const h=e.createSubContext(n.options);s&&h.delayNextStep(s),Ba(this,c,h),o=Math.max(o,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(o),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const r=n.strValue;return qM(e.params?DC(r,e.params,e.errors):r,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const r=e.currentAnimateTimings=this._visitTiming(n.timings,e),o=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),o.snapshotCurrentStyles());const s=n.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(r.duration),this.visitStyle(s,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const r=e.currentTimeline,o=e.currentAnimateTimings;!o&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=o&&o.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(s):r.setStyles(n.styles,s,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const r=e.currentAnimateTimings,o=e.currentTimeline.duration,s=r.duration,h=e.createSubContext().currentTimeline;h.easing=r.easing,n.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,e.errors,e.options),h.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(h),e.transformIntoNewTimeline(o+s),e.previousNode=n}visitQuery(n,e){const r=e.currentTimeline.currentTime,o=n.options||{},s=o.delay?$h(o.delay):0;s&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=JM);let c=r;const h=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=h.length;let p=null;h.forEach((y,w)=>{e.currentQueryIndex=w;const I=e.createSubContext(n.options,y);s&&I.delayNextStep(s),y===e.element&&(p=I.currentTimeline),Ba(this,n.animation,I),I.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,I.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const r=e.parentContext,o=e.currentTimeline,s=n.timings,c=Math.abs(s.duration),h=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const w=e.currentTimeline;p&&w.delayNextStep(p);const I=w.currentTime;Ba(this,n.animation,e),e.previousNode=n,r.currentStaggerTime=o.currentTime-I+(o.startTime-r.currentTimeline.startTime)}}const JM={};class $F{constructor(n,e,r,o,s,c,h,p){this._driver=n,this.element=e,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=s,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=JM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new ek(this._driver,e,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const r=n;let o=this.options;null!=r.duration&&(o.duration=$h(r.duration)),null!=r.delay&&(o.delay=$h(r.delay));const s=r.params;if(s){let c=o.params;c||(c=this.options.params={}),Object.keys(s).forEach(h=>{(!e||!c.hasOwnProperty(h))&&(c[h]=DC(s[h],c,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const r=n.params={};Object.keys(e).forEach(o=>{r[o]=e[o]})}}return n}createSubContext(n=null,e,r){const o=e||this.element,s=new $F(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(n),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(n){return this.previousNode=JM,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,r){const o={duration:e??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},s=new _X(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(s),o}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,r,o,s,c){let h=[];if(o&&h.push(this.element),n.length>0){n=(n=n.replace(fX,"."+this._enterClassName)).replace(pX,"."+this._leaveClassName);let y=this._driver.query(this.element,n,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&c.push(function DQ(i){return new d.vHH(3014,!1)}()),h}}class ek{constructor(n,e,r,o){this._driver=n,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new ek(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Vh),this._currentKeyframe.set(e,Vh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,r,o){e&&this._previousKeyframe.set("easing",e);const s=o&&o.params||{},c=function yX(i,n){const e=new Map;let r;return i.forEach(o=>{if("*"===o){r=r||n.keys();for(let s of r)e.set(s,Vh)}else hp(o,e)}),e}(n,this._globalTimelineStyles);for(let[h,p]of c){const y=DC(p,s,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Vh),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,r)=>{const o=this._styleSummary.get(r);(!o||e.time>o.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((h,p)=>{const y=hp(h,new Map,this._backFill);y.forEach((w,I)=>{"!"===w?n.add(I):w===Vh&&e.add(I)}),r||y.set("offset",p/this.duration),o.push(y)});const s=n.size?KM(n.values()):[],c=e.size?KM(e.values()):[];if(r){const h=o[0],p=new Map(h);h.set("offset",0),p.set("offset",1),o=[h,p]}return zF(this.element,o,s,c,this.duration,this.startTime,this.easing,!1)}}class _X extends ek{constructor(n,e,r,o,s,c,h=!1){super(n,e,c.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=r+e,h=e/c,p=hp(n[0]);p.set("offset",0),s.push(p);const y=hp(n[0]);y.set("offset",_H(h)),s.push(y);const w=n.length-1;for(let I=1;I<=w;I++){let A=hp(n[I]);const P=A.get("offset");A.set("offset",_H((e+P*r)/c)),s.push(A)}r=c,e=0,o="",n=s}return zF(this.element,n,this.preStyleProps,this.postStyleProps,r,e,o,!0)}}function _H(i,n=3){const e=Math.pow(10,n-1);return Math.round(i*e)/e}class GF{}const vX=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class bX extends GF{normalizePropertyName(n,e){return BF(n)}normalizeStyleValue(n,e,r,o){let s="";const c=r.toString().trim();if(vX.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&o.push(function mQ(i,n){return new d.vHH(3005,!1)}())}return c+s}}function yH(i,n,e,r,o,s,c,h,p,y,w,I,A){return{type:0,element:i,triggerName:n,isRemovalTransition:o,fromState:e,fromStyles:s,toState:r,toStyles:c,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:w,totalTime:I,errors:A}}const WF={};class vH{constructor(n,e,r){this._triggerName=n,this.ast=e,this._stateStyles=r}match(n,e,r,o){return function wX(i,n,e,r,o){return i.some(s=>s(n,e,r,o))}(this.ast.matchers,n,e,r,o)}buildStyles(n,e,r){let o=this._stateStyles.get("*");return void 0!==n&&(o=this._stateStyles.get(n?.toString())||o),o?o.buildStyles(e,r):new Map}build(n,e,r,o,s,c,h,p,y,w){const I=[],A=this.ast.options&&this.ast.options.params||WF,U=this.buildStyles(r,h&&h.params||WF,I),G=p&&p.params||WF,Q=this.buildStyles(o,G,I),me=new Set,Ce=new Map,fe=new Map,Te="void"===o,Fe={params:xX(G,A),delay:this.ast.options?.delay},qe=w?[]:jF(n,e,this.ast.animation,s,c,U,Q,Fe,y,I);let Xe=0;if(qe.forEach(ln=>{Xe=Math.max(ln.duration+ln.delay,Xe)}),I.length)return yH(e,this._triggerName,r,o,Te,U,Q,[],[],Ce,fe,Xe,I);qe.forEach(ln=>{const li=ln.element,za=Ua(Ce,li,new Set);ln.preStyleProps.forEach(fs=>za.add(fs));const Oo=Ua(fe,li,new Set);ln.postStyleProps.forEach(fs=>Oo.add(fs)),li!==e&&me.add(li)});const It=KM(me.values());return yH(e,this._triggerName,r,o,Te,U,Q,qe,It,Ce,fe,Xe)}}function xX(i,n){const e=EC(n);for(const r in i)i.hasOwnProperty(r)&&null!=i[r]&&(e[r]=i[r]);return e}class EX{constructor(n,e,r){this.styles=n,this.defaultParams=e,this.normalizer=r}buildStyles(n,e){const r=new Map,o=EC(this.defaultParams);return Object.keys(n).forEach(s=>{const c=n[s];null!==c&&(o[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,h)=>{c&&(c=DC(c,o,e));const p=this.normalizer.normalizePropertyName(h,e);c=this.normalizer.normalizeStyleValue(h,p,c,e),r.set(h,c)})}),r}}class DX{constructor(n,e,r){this.name=n,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(o=>{this.states.set(o.name,new EX(o.style,o.options&&o.options.params||{},r))}),bH(this.states,"true","1"),bH(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new vH(n,o,this.states))}),this.fallbackTransition=function IX(i,n,e){return new vH(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,r,o){return this.transitionFactories.find(c=>c.match(n,e,r,o))||null}matchStyles(n,e,r){return this.fallbackTransition.buildStyles(n,e,r)}}function bH(i,n,e){i.has(n)?i.has(e)||i.set(e,i.get(n)):i.has(e)&&i.set(n,i.get(e))}const TX=new XM;class SX{constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const r=[],s=VF(this._driver,e,r,[]);if(r.length)throw function RQ(i){return new d.vHH(3503,!1)}();this._animations.set(n,s)}_buildPlayer(n,e,r){const o=n.element,s=nH(this._normalizer,n.keyframes,e,r);return this._driver.animate(o,s,n.duration,n.delay,n.easing,[],!0)}create(n,e,r={}){const o=[],s=this._animations.get(n);let c;const h=new Map;if(s?(c=jF(this._driver,e,s,NF,$M,new Map,new Map,r,TX,o),c.forEach(w=>{const I=Ua(h,w.element,new Map);w.postStyleProps.forEach(A=>I.set(A,null))})):(o.push(function PQ(){return new d.vHH(3300,!1)}()),c=[]),o.length)throw function OQ(i){return new d.vHH(3504,!1)}();h.forEach((w,I)=>{w.forEach((A,P)=>{w.set(P,this._driver.computeStyle(I,P,Vh))})});const y=up(c.map(w=>{const I=h.get(w.element);return this._buildPlayer(w,new Map,I)}));return this._playersById.set(n,y),y.onDestroy(()=>this.destroy(n)),this.players.push(y),y}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function NQ(i){return new d.vHH(3301,!1)}();return e}listen(n,e,r,o){const s=RF(e,"","","");return MF(this._getPlayer(n),r,s,o),()=>{}}command(n,e,r,o){if("register"==r)return void this.register(n,o[0]);if("create"==r)return void this.create(n,e,o[0]||{});const s=this._getPlayer(n);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n)}}}const wH="ng-animate-queued",qF="ng-animate-disabled",PX=[],xH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},OX={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Il="__ng_removed";class KF{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const r=n&&n.hasOwnProperty("value");if(this.value=function UX(i){return i??null}(r?n.value:n),r){const s=EC(n);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const r=this.options.params;Object.keys(e).forEach(o=>{null==r[o]&&(r[o]=e[o])})}}}const IC="void",YF=new KF(IC);class NX{constructor(n,e,r){this.id=n,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Tl(e,this._hostClassName)}listen(n,e,r,o){if(!this._triggers.has(e))throw function FQ(i,n){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function LQ(i){return new d.vHH(3303,!1)}();if(!function BX(i){return"start"==i||"done"==i}(r))throw function UQ(i,n){return new d.vHH(3400,!1)}();const s=Ua(this._elementListeners,n,[]),c={name:e,phase:r,callback:o};s.push(c);const h=Ua(this._engine.statesByElement,n,new Map);return h.has(e)||(Tl(n,GM),Tl(n,GM+"-"+e),h.set(e,YF)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers.has(e)||h.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function BQ(i){return new d.vHH(3401,!1)}();return e}trigger(n,e,r,o=!0){const s=this._getTrigger(e),c=new ZF(this.id,e,n);let h=this._engine.statesByElement.get(n);h||(Tl(n,GM),Tl(n,GM+"-"+e),this._engine.statesByElement.set(n,h=new Map));let p=h.get(e);const y=new KF(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h.set(e,y),p||(p=YF),y.value!==IC&&p.value===y.value){if(!function zX(i,n){const e=Object.keys(i),r=Object.keys(n);if(e.length!=r.length)return!1;for(let o=0;o<e.length;o++){const s=e[o];if(!n.hasOwnProperty(s)||i[s]!==n[s])return!1}return!0}(p.params,y.params)){const G=[],Q=s.matchStyles(p.value,p.params,G),me=s.matchStyles(y.value,y.params,G);G.length?this._engine.reportError(G):this._engine.afterFlush(()=>{L_(n,Q),Yd(n,me)})}return}const A=Ua(this._engine.playersByElement,n,[]);A.forEach(G=>{G.namespaceId==this.id&&G.triggerName==e&&G.queued&&G.destroy()});let P=s.matchTransition(p.value,y.value,n,y.params),U=!1;if(!P){if(!o)return;P=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:P,fromState:p,toState:y,player:c,isFallbackTransition:U}),U||(Tl(n,wH),c.onStart(()=>{qb(n,wH)})),c.onDone(()=>{let G=this.players.indexOf(c);G>=0&&this.players.splice(G,1);const Q=this._engine.playersByElement.get(n);if(Q){let me=Q.indexOf(c);me>=0&&Q.splice(me,1)}}),this.players.push(c),A.push(c),c}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(o=>o.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const r=this._engine.driver.query(n,WM,!0);r.forEach(o=>{if(o[Il])return;const s=this._engine.fetchNamespacesByElement(o);s.size?s.forEach(c=>c.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(n,e,r,o){const s=this._engine.statesByElement.get(n),c=new Map;if(s){const h=[];if(s.forEach((p,y)=>{if(c.set(y,p.value),this._triggers.has(y)){const w=this.trigger(n,y,IC,o);w&&h.push(w)}}),h.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,c),r&&up(h).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(e&&r){const o=new Set;e.forEach(s=>{const c=s.name;if(o.has(c))return;o.add(c);const p=this._triggers.get(c).fallbackTransition,y=r.get(c)||YF,w=new KF(IC),I=new ZF(this.id,c,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:c,transition:p,fromState:y,toState:w,player:I,isFallbackTransition:!0})})}}removeNode(n,e){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let o=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(n):[];if(s&&s.length)o=!0;else{let c=n;for(;c=c.parentNode;)if(r.statesByElement.get(c)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(n),o)r.markElementAsRemoved(this.id,n,!1,e);else{const s=n[Il];(!s||s===xH)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,e))}}insertNode(n,e){Tl(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const s=r.element,c=this._elementListeners.get(s);c&&c.forEach(h=>{if(h.name==r.triggerName){const p=RF(s,r.triggerName,r.fromState.value,r.toState.value);p._data=n,MF(r.player,h.phase,p,h.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(r)}),this._queue=[],e.sort((r,o)=>{const s=r.transition.ast.depCount,c=o.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let e=!1;return this._elementListeners.has(n)&&(e=!0),e=!!this._queue.find(r=>r.element===n)||e,e}}class FX{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,r){this.bodyNode=n,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,e){const r=new NX(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,e){const r=this._namespaceList,o=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,h=this.driver.getParentElement(e);for(;h;){const p=o.get(h);if(p){const y=r.indexOf(p);r.splice(y+1,0,n),c=!0;break}h=this.driver.getParentElement(h)}c||r.unshift(n)}else r.push(n);return o.set(e,n),n}register(n,e){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,e)),r}registerTrigger(n,e,r){let o=this._namespaceLookup[n];o&&o.register(e,r)&&this.totalAnimations++}destroy(n,e){if(!n)return;const r=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[n];const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,r=this.statesByElement.get(n);if(r)for(let o of r.values())if(o.namespaceId){const s=this._fetchNamespace(o.namespaceId);s&&e.add(s)}return e}trigger(n,e,r,o){if(tk(e)){const s=this._fetchNamespace(n);if(s)return s.trigger(e,r,o),!0}return!1}insertNode(n,e,r,o){if(!tk(e))return;const s=e[Il];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(n){const c=this._fetchNamespace(n);c&&c.insertNode(e,r)}o&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Tl(n,qF)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),qb(n,qF))}removeNode(n,e,r){if(tk(e)){const o=n?this._fetchNamespace(n):null;o?o.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r);const s=this.namespacesByHostElement.get(e);s&&s.id!==n&&s.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,r,o,s){this.collectedLeaveElements.push(e),e[Il]={namespaceId:n,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(n,e,r,o,s){return tk(e)?this._fetchNamespace(n).listen(e,r,o,s):()=>{}}_buildInstruction(n,e,r,o,s){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,o,n.fromState.options,n.toState.options,e,s)}destroyInnerAnimations(n){let e=this.driver.query(n,WM,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,FF,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return up(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Il];if(e&&e.setForRemoval){if(n[Il]=xH,e.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(qF)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Tl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,n)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?up(e).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(n){throw function VQ(i){return new d.vHH(3402,!1)}()}_flushAnimations(n,e){const r=new XM,o=[],s=new Map,c=[],h=new Map,p=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(Nt=>{w.add(Nt);const $t=this.driver.query(Nt,".ng-animate-queued",!0);for(let en=0;en<$t.length;en++)w.add($t[en])});const I=this.bodyNode,A=Array.from(this.statesByElement.keys()),P=DH(A,this.collectedEnterElements),U=new Map;let G=0;P.forEach((Nt,$t)=>{const en=NF+G++;U.set($t,en),Nt.forEach(Un=>Tl(Un,en))});const Q=[],me=new Set,Ce=new Set;for(let Nt=0;Nt<this.collectedLeaveElements.length;Nt++){const $t=this.collectedLeaveElements[Nt],en=$t[Il];en&&en.setForRemoval&&(Q.push($t),me.add($t),en.hasAnimation?this.driver.query($t,".ng-star-inserted",!0).forEach(Un=>me.add(Un)):Ce.add($t))}const fe=new Map,Te=DH(A,Array.from(me));Te.forEach((Nt,$t)=>{const en=$M+G++;fe.set($t,en),Nt.forEach(Un=>Tl(Un,en))}),n.push(()=>{P.forEach((Nt,$t)=>{const en=U.get($t);Nt.forEach(Un=>qb(Un,en))}),Te.forEach((Nt,$t)=>{const en=fe.get($t);Nt.forEach(Un=>qb(Un,en))}),Q.forEach(Nt=>{this.processLeaveNode(Nt)})});const Fe=[],qe=[];for(let Nt=this._namespaceList.length-1;Nt>=0;Nt--)this._namespaceList[Nt].drainQueuedTransitions(e).forEach(en=>{const Un=en.player,No=en.element;if(Fe.push(Un),this.collectedEnterElements.length){const ms=No[Il];if(ms&&ms.setForMove){if(ms.previousTriggersValues&&ms.previousTriggersValues.has(en.triggerName)){const z_=ms.previousTriggersValues.get(en.triggerName),Al=this.statesByElement.get(en.element);if(Al&&Al.has(en.triggerName)){const Dk=Al.get(en.triggerName);Dk.value=z_,Al.set(en.triggerName,Dk)}}return void Un.destroy()}}const Jd=!I||!this.driver.containsElement(I,No),ja=fe.get(No),yp=U.get(No),yr=this._buildInstruction(en,r,yp,ja,Jd);if(yr.errors&&yr.errors.length)return void qe.push(yr);if(Jd)return Un.onStart(()=>L_(No,yr.fromStyles)),Un.onDestroy(()=>Yd(No,yr.toStyles)),void o.push(Un);if(en.isFallbackTransition)return Un.onStart(()=>L_(No,yr.fromStyles)),Un.onDestroy(()=>Yd(No,yr.toStyles)),void o.push(Un);const uj=[];yr.timelines.forEach(ms=>{ms.stretchStartingKeyframe=!0,this.disabledNodes.has(ms.element)||uj.push(ms)}),yr.timelines=uj,r.append(No,yr.timelines),c.push({instruction:yr,player:Un,element:No}),yr.queriedElements.forEach(ms=>Ua(h,ms,[]).push(Un)),yr.preStyleProps.forEach((ms,z_)=>{if(ms.size){let Al=p.get(z_);Al||p.set(z_,Al=new Set),ms.forEach((Dk,CL)=>Al.add(CL))}}),yr.postStyleProps.forEach((ms,z_)=>{let Al=y.get(z_);Al||y.set(z_,Al=new Set),ms.forEach((Dk,CL)=>Al.add(CL))})});if(qe.length){const Nt=[];qe.forEach($t=>{Nt.push(function HQ(i,n){return new d.vHH(3505,!1)}())}),Fe.forEach($t=>$t.destroy()),this.reportError(Nt)}const Xe=new Map,It=new Map;c.forEach(Nt=>{const $t=Nt.element;r.has($t)&&(It.set($t,$t),this._beforeAnimationBuild(Nt.player.namespaceId,Nt.instruction,Xe))}),o.forEach(Nt=>{const $t=Nt.element;this._getPreviousPlayers($t,!1,Nt.namespaceId,Nt.triggerName,null).forEach(Un=>{Ua(Xe,$t,[]).push(Un),Un.destroy()})});const ln=Q.filter(Nt=>TH(Nt,p,y)),li=new Map;CH(li,this.driver,Ce,y,Vh).forEach(Nt=>{TH(Nt,p,y)&&ln.push(Nt)});const Oo=new Map;P.forEach((Nt,$t)=>{CH(Oo,this.driver,new Set(Nt),p,"!")}),ln.forEach(Nt=>{const $t=li.get(Nt),en=Oo.get(Nt);li.set(Nt,new Map([...$t?.entries()??[],...en?.entries()??[]]))});const fs=[],Xd=[],Ck={};c.forEach(Nt=>{const{element:$t,player:en,instruction:Un}=Nt;if(r.has($t)){if(w.has($t))return en.onDestroy(()=>Yd($t,Un.toStyles)),en.disabled=!0,en.overrideTotalTime(Un.totalTime),void o.push(en);let No=Ck;if(It.size>1){let ja=$t;const yp=[];for(;ja=ja.parentNode;){const yr=It.get(ja);if(yr){No=yr;break}yp.push(ja)}yp.forEach(yr=>It.set(yr,No))}const Jd=this._buildAnimation(en.namespaceId,Un,Xe,s,Oo,li);if(en.setRealPlayer(Jd),No===Ck)fs.push(en);else{const ja=this.playersByElement.get(No);ja&&ja.length&&(en.parentPlayer=up(ja)),o.push(en)}}else L_($t,Un.fromStyles),en.onDestroy(()=>Yd($t,Un.toStyles)),Xd.push(en),w.has($t)&&o.push(en)}),Xd.forEach(Nt=>{const $t=s.get(Nt.element);if($t&&$t.length){const en=up($t);Nt.setRealPlayer(en)}}),o.forEach(Nt=>{Nt.parentPlayer?Nt.syncPlayerEvents(Nt.parentPlayer):Nt.destroy()});for(let Nt=0;Nt<Q.length;Nt++){const $t=Q[Nt],en=$t[Il];if(qb($t,$M),en&&en.hasAnimation)continue;let Un=[];if(h.size){let Jd=h.get($t);Jd&&Jd.length&&Un.push(...Jd);let ja=this.driver.query($t,FF,!0);for(let yp=0;yp<ja.length;yp++){let yr=h.get(ja[yp]);yr&&yr.length&&Un.push(...yr)}}const No=Un.filter(Jd=>!Jd.destroyed);No.length?VX(this,$t,No):this.processLeaveNode($t)}return Q.length=0,fs.forEach(Nt=>{this.players.push(Nt),Nt.onDone(()=>{Nt.destroy();const $t=this.players.indexOf(Nt);this.players.splice($t,1)}),Nt.play()}),fs}elementContainsData(n,e){let r=!1;const o=e[Il];return o&&o.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(n).elementContainsData(e)||r}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,r,o,s){let c=[];if(e){const h=this.playersByQueriedElement.get(n);h&&(c=h)}else{const h=this.playersByElement.get(n);if(h){const p=!s||s==IC;h.forEach(y=>{y.queued||!p&&y.triggerName!=o||c.push(y)})}}return(r||o)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||o&&o!=h.triggerName))),c}_beforeAnimationBuild(n,e,r){const s=e.element,c=e.isRemovalTransition?void 0:n,h=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const y=p.element,w=y!==s,I=Ua(r,y,[]);this._getPreviousPlayers(y,w,c,h,e.toState).forEach(P=>{const U=P.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),P.destroy(),I.push(P)})}L_(s,e.fromStyles)}_buildAnimation(n,e,r,o,s,c){const h=e.triggerName,p=e.element,y=[],w=new Set,I=new Set,A=e.timelines.map(U=>{const G=U.element;w.add(G);const Q=G[Il];if(Q&&Q.removedBeforeQueried)return new pC(U.duration,U.delay);const me=G!==p,Ce=function HX(i){const n=[];return IH(i,n),n}((r.get(G)||PX).map(Xe=>Xe.getRealPlayer())).filter(Xe=>!!Xe.element&&Xe.element===G),fe=s.get(G),Te=c.get(G),Fe=nH(this._normalizer,U.keyframes,fe,Te),qe=this._buildPlayer(U,Fe,Ce);if(U.subTimeline&&o&&I.add(G),me){const Xe=new ZF(n,h,G);Xe.setRealPlayer(qe),y.push(Xe)}return qe});y.forEach(U=>{Ua(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function LX(i,n,e){let r=i.get(n);if(r){if(r.length){const o=r.indexOf(e);r.splice(o,1)}0==r.length&&i.delete(n)}return r}(this.playersByQueriedElement,U.element,U))}),w.forEach(U=>Tl(U,cH));const P=up(A);return P.onDestroy(()=>{w.forEach(U=>qb(U,cH)),Yd(p,e.toStyles)}),I.forEach(U=>{Ua(o,U,[]).push(P)}),P}_buildPlayer(n,e,r){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,r):new pC(n.duration,n.delay)}}class ZF{constructor(n,e,r){this.namespaceId=n,this.triggerName=e,this.element=r,this._player=new pC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,r)=>{e.forEach(o=>MF(n,r,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Ua(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function tk(i){return i&&1===i.nodeType}function EH(i,n){const e=i.style.display;return i.style.display=n??"none",e}function CH(i,n,e,r,o){const s=[];e.forEach(p=>s.push(EH(p)));const c=[];r.forEach((p,y)=>{const w=new Map;p.forEach(I=>{const A=n.computeStyle(y,I,o);w.set(I,A),(!A||0==A.length)&&(y[Il]=OX,c.push(y))}),i.set(y,w)});let h=0;return e.forEach(p=>EH(p,s[h++])),c}function DH(i,n){const e=new Map;if(i.forEach(h=>e.set(h,[])),0==n.length)return e;const o=new Set(n),s=new Map;function c(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=e.has(y)?y:o.has(y)?1:c(y),s.set(h,p),p}return n.forEach(h=>{const p=c(h);1!==p&&e.get(p).push(h)}),e}function Tl(i,n){i.classList?.add(n)}function qb(i,n){i.classList?.remove(n)}function VX(i,n,e){up(e).onDone(()=>i.processLeaveNode(n))}function IH(i,n){for(let e=0;e<i.length;e++){const r=i[e];r instanceof B4?IH(r.players,n):n.push(r)}}function TH(i,n,e){const r=e.get(i);if(!r)return!1;let o=n.get(i);return o?r.forEach(s=>o.add(s)):n.set(i,r),e.delete(i),!0}class nk{constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new FX(n,e,r),this._timelineEngine=new SX(n,e,r),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(n,e,r,o,s){const c=n+"-"+o;let h=this._triggerCache[c];if(!h){const p=[],w=VF(this._driver,s,p,[]);if(p.length)throw function MQ(i,n){return new d.vHH(3404,!1)}();h=function CX(i,n,e){return new DX(i,n,e)}(o,w,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(e,o,h)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,r,o){this._transitionEngine.insertNode(n,e,r,o)}onRemove(n,e,r){this._transitionEngine.removeNode(n,e,r)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,r,o){if("@"==r.charAt(0)){const[s,c]=iH(r);this._timelineEngine.command(s,e,c,o)}else this._transitionEngine.trigger(n,e,r,o)}listen(n,e,r,o,s){if("@"==r.charAt(0)){const[c,h]=iH(r);return this._timelineEngine.listen(c,e,h,s)}return this._transitionEngine.listen(n,e,r,o,s)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $X=(()=>{class i{constructor(e,r,o){this._element=e,this._startStyles=r,this._endStyles=o,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Yd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Yd(this._element,this._initialStyles),this._endStyles&&(Yd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(L_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(L_(this._element,this._endStyles),this._endStyles=null),Yd(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function QF(i){let n=null;return i.forEach((e,r)=>{(function GX(i){return"display"===i||"position"===i})(r)&&(n=n||new Map,n.set(r,e))}),n}class SH{constructor(n,e,r,o){this.element=n,this.keyframes=e,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(n,e,r){return n.animate(this._convertKeyframesToObject(e),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,o)=>{"offset"!==o&&n.set(o,this._finished?r:fH(this.element,o))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class WX{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return oH(n,e)}getParentElement(n){return PF(n)}query(n,e,r){return sH(n,e,r)}computeStyle(n,e,r){return window.getComputedStyle(n)[e]}animate(n,e,r,o,s,c=[]){const p={duration:r,delay:o,fill:0==o?"both":"forwards"};s&&(p.easing=s);const y=new Map,w=c.filter(P=>P instanceof SH);(function JQ(i,n){return 0===i||0===n})(r,o)&&w.forEach(P=>{P.currentSnapshot.forEach((U,G)=>y.set(G,U))});let I=function ZQ(i){return i.length?i[0]instanceof Map?i:i.map(n=>dH(n)):[]}(e).map(P=>hp(P));I=function eX(i,n,e){if(e.size&&n.length){let r=n[0],o=[];if(e.forEach((s,c)=>{r.has(c)||o.push(c),r.set(c,s)}),o.length)for(let s=1;s<n.length;s++){let c=n[s];o.forEach(h=>c.set(h,fH(i,h)))}}return n}(n,I,y);const A=function jX(i,n){let e=null,r=null;return Array.isArray(n)&&n.length?(e=QF(n[0]),n.length>1&&(r=QF(n[n.length-1]))):n instanceof Map&&(e=QF(n)),e||r?new $X(i,e,r):null}(n,I);return new SH(n,I,p,A)}}let qX=(()=>{class i extends F4{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(e)?L4(e):e;return AH(this._renderer,null,r,"register",[o]),new KX(r,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.FYo),d.LFG(ue))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class KX extends P7{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new YX(this._id,n,e||{},this._renderer)}}class YX{constructor(n,e,r,o){this.id=n,this.element=e,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return AH(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function AH(i,n,e,r,o){return i.setProperty(n,`@@${e}:${r}`,o)}const MH="@.disabled";let ZX=(()=>{class i{constructor(e,r,o){this.delegate=e,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,c)=>{const h=c?.parentNode(s);h&&c.removeChild(h,s)}}createRenderer(e,r){const s=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(s);return w||(w=new kH("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,w)),w}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,e);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(c,h,e,w.name,w)};return r.data.animation.forEach(p),new QX(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,o){e>=0&&e<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,h]=s;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.FYo),d.LFG(nk),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class kH{constructor(n,e,r,o){this.namespaceId=n,this.delegate=e,this.engine=r,this._onDestroy=o,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,r,o=!0){this.delegate.insertBefore(n,e,r),this.engine.onInsert(this.namespaceId,e,n,o)}removeChild(n,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,r,o){this.delegate.setAttribute(n,e,r,o)}removeAttribute(n,e,r){this.delegate.removeAttribute(n,e,r)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,r,o){this.delegate.setStyle(n,e,r,o)}removeStyle(n,e,r){this.delegate.removeStyle(n,e,r)}setProperty(n,e,r){"@"==e.charAt(0)&&e==MH?this.disableAnimations(n,!!r):this.delegate.setProperty(n,e,r)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,r){return this.delegate.listen(n,e,r)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class QX extends kH{constructor(n,e,r,o,s){super(e,r,o,s),this.factory=n,this.namespaceId=e}setProperty(n,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==MH?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,e.slice(1),r):this.delegate.setProperty(n,e,r)}listen(n,e,r){if("@"==e.charAt(0)){const o=function XX(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(n);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function JX(i){const n=i.indexOf(".");return[i.substring(0,n),i.slice(n+1)]}(s)),this.engine.listen(this.namespaceId,o,s,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(n,e,r)}}let eJ=(()=>{class i extends nk{constructor(e,r,o,s){super(e.body,r,o)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(ue),d.LFG(OF),d.LFG(GF),d.LFG(d.z2F))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const RH=[{provide:F4,useClass:qX},{provide:GF,useFactory:function tJ(){return new bX}},{provide:nk,useClass:eJ},{provide:d.FYo,useFactory:function nJ(i,n,e){return new ZX(i,n,e)},deps:[Co,nk,d.R0b]}],XF=[{provide:OF,useFactory:()=>new WX},{provide:d.QbO,useValue:"BrowserAnimations"},...RH],PH=[{provide:OF,useClass:aH},{provide:d.QbO,useValue:"NoopAnimations"},...RH];let iJ=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?PH:XF}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:XF,imports:[Jc]}),i})(),xJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const GH_firebase={apiKey:"AIzaSyC8Ps7XSWdjAhMLS5XylEVpNfkDJqyz4_A",authDomain:"knossos-dungeon-blocks.firebaseapp.com",projectId:"knossos-dungeon-blocks",storageBucket:"knossos-dungeon-blocks.appspot.com",messagingSenderId:"454936440721",appId:"1:454936440721:web:3717720b189ed9678cf430"};function WH(i){return new Bi.y(n=>{(0,Da.Xf)(i()).subscribe(n)})}var PJ=H(8407);function JF(i){return i<=0?()=>Dr.E:(0,Zi.e)((n,e)=>{let r=[];n.subscribe((0,Ii.x)(e,o=>{r.push(o),i<r.length&&r.shift()},()=>{for(const o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}const pn="primary",TC=Symbol("RouteTitle");class NJ{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Kb(i){return new NJ(i)}function FJ(i,n,e){const r=e.path.split("/");if(r.length>i.length||"full"===e.pathMatch&&(n.hasChildren()||r.length<i.length))return null;const o={};for(let s=0;s<r.length;s++){const c=r[s],h=i[s];if(c.startsWith(":"))o[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:i.slice(0,r.length),posParams:o}}function Zd(i,n){const e=i?Object.keys(i):void 0,r=n?Object.keys(n):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let s=0;s<e.length;s++)if(o=e[s],!qH(i[o],n[o]))return!1;return!0}function qH(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const e=[...i].sort(),r=[...n].sort();return e.every((o,s)=>r[s]===o)}return i===n}function KH(i){return i.length>0?i[i.length-1]:null}function fp(i){return j6(i)?i:(0,d.QGY)(i)?(0,rn.D)(Promise.resolve(i)):(0,mt.of)(i)}const UJ={exact:function QH(i,n,e){if(!B_(i.segments,n.segments)||!ok(i.segments,n.segments,e)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!i.children[r]||!QH(i.children[r],n.children[r],e))return!1;return!0},subset:XH},YH={exact:function BJ(i,n){return Zd(i,n)},subset:function VJ(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(e=>qH(i[e],n[e]))},ignored:()=>!0};function ZH(i,n,e){return UJ[e.paths](i.root,n.root,e.matrixParams)&&YH[e.queryParams](i.queryParams,n.queryParams)&&!("exact"===e.fragment&&i.fragment!==n.fragment)}function XH(i,n,e){return JH(i,n,n.segments,e)}function JH(i,n,e,r){if(i.segments.length>e.length){const o=i.segments.slice(0,e.length);return!(!B_(o,e)||n.hasChildren()||!ok(o,e,r))}if(i.segments.length===e.length){if(!B_(i.segments,e)||!ok(i.segments,e,r))return!1;for(const o in n.children)if(!i.children[o]||!XH(i.children[o],n.children[o],r))return!1;return!0}{const o=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(B_(i.segments,o)&&ok(i.segments,o,r)&&i.children[pn])&&JH(i.children[pn],n,s,r)}}function ok(i,n,e){return n.every((r,o)=>YH[e](i[o].parameters,r.parameters))}class Yb{constructor(n=new ai([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kb(this.queryParams)),this._queryParamMap}toString(){return jJ.serialize(this)}}class ai{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sk(this)}}class SC{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Kb(this.parameters)),this._parameterMap}toString(){return nz(this)}}function B_(i,n){return i.length===n.length&&i.every((e,r)=>e.path===n[r].path)}let AC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return new eL},providedIn:"root"}),i})();class eL{parse(n){const e=new eee(n);return new Yb(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${MC(n.root,!0)}`,r=function WJ(i){const n=Object.keys(i).map(e=>{const r=i[e];return Array.isArray(r)?r.map(o=>`${ak(e)}=${ak(o)}`).join("&"):`${ak(e)}=${ak(r)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams),o="string"==typeof n.fragment?`#${function $J(i){return encodeURI(i)}(n.fragment)}`:"";return`${e}${r}${o}`}}const jJ=new eL;function sk(i){return i.segments.map(n=>nz(n)).join("/")}function MC(i,n){if(!i.hasChildren())return sk(i);if(n){const e=i.children[pn]?MC(i.children[pn],!1):"",r=[];return Object.entries(i.children).forEach(([o,s])=>{o!==pn&&r.push(`${o}:${MC(s,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function zJ(i,n){let e=[];return Object.entries(i.children).forEach(([r,o])=>{r===pn&&(e=e.concat(n(o,r)))}),Object.entries(i.children).forEach(([r,o])=>{r!==pn&&(e=e.concat(n(o,r)))}),e}(i,(r,o)=>o===pn?[MC(i.children[pn],!1)]:[`${o}:${MC(r,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[pn]?`${sk(i)}/${e[0]}`:`${sk(i)}/(${e.join("//")})`}}function ez(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ak(i){return ez(i).replace(/%3B/gi,";")}function tL(i){return ez(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lk(i){return decodeURIComponent(i)}function tz(i){return lk(i.replace(/\+/g,"%20"))}function nz(i){return`${tL(i.path)}${function GJ(i){return Object.keys(i).map(n=>`;${tL(n)}=${tL(i[n])}`).join("")}(i.parameters)}`}const qJ=/^[^\/()?;#]+/;function nL(i){const n=i.match(qJ);return n?n[0]:""}const KJ=/^[^\/()?;=#]+/,ZJ=/^[^=?&#]+/,XJ=/^[^&#]+/;class eee{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ai([],{}):new ai([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[pn]=new ai(n,e)),r}parseSegment(){const n=nL(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(n),new SC(lk(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function YJ(i){const n=i.match(KJ);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=nL(this.remaining);o&&(r=o,this.capture(r))}n[lk(e)]=lk(r)}parseQueryParam(n){const e=function QJ(i){const n=i.match(ZJ);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const c=function JJ(i){const n=i.match(XJ);return n?n[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=tz(e),s=tz(r);if(n.hasOwnProperty(o)){let c=n[o];Array.isArray(c)||(c=[c],n[o]=c),c.push(s)}else n[o]=s}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nL(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new d.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=pn);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[pn]:new ai([],c),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new d.vHH(4011,!1)}}function iz(i){return i.segments.length>0?new ai([],{[pn]:i}):i}function rz(i){const n={};for(const r of Object.keys(i.children)){const s=rz(i.children[r]);if(r===pn&&0===s.segments.length&&s.hasChildren())for(const[c,h]of Object.entries(s.children))n[c]=h;else(s.segments.length>0||s.hasChildren())&&(n[r]=s)}return function tee(i){if(1===i.numberOfChildren&&i.children[pn]){const n=i.children[pn];return new ai(i.segments.concat(n.segments),n.children)}return i}(new ai(i.segments,n))}function V_(i){return i instanceof Yb}function oz(i){let n;const o=iz(function e(s){const c={};for(const p of s.children){const y=e(p);c[p.outlet]=y}const h=new ai(s.url,c);return s===i&&(n=h),h}(i.root));return n??o}function sz(i,n,e,r){let o=i;for(;o.parent;)o=o.parent;if(0===n.length)return iL(o,o,o,e,r);const s=function iee(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new lz(!0,0,i);let n=0,e=!1;const r=i.reduce((o,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Object.entries(s.outlets).forEach(([p,y])=>{h[p]="string"==typeof y?y.split("/"):y}),[...o,{outlets:h}]}if(s.segmentPath)return[...o,s.segmentPath]}return"string"!=typeof s?[...o,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?e=!0:".."===h?n++:""!=h&&o.push(h))}),o):[...o,s]},[]);return new lz(e,n,r)}(n);if(s.toRoot())return iL(o,o,new ai([],{}),e,r);const c=function ree(i,n,e){if(i.isAbsolute)return new dk(n,!0,0);if(!e)return new dk(n,!1,NaN);if(null===e.parent)return new dk(e,!0,0);const r=ck(i.commands[0])?0:1;return function oee(i,n,e){let r=i,o=n,s=e;for(;s>o;){if(s-=o,r=r.parent,!r)throw new d.vHH(4005,!1);o=r.segments.length}return new dk(r,!1,o-s)}(e,e.segments.length-1+r,i.numberOfDoubleDots)}(s,o,i),h=c.processChildren?RC(c.segmentGroup,c.index,s.commands):cz(c.segmentGroup,c.index,s.commands);return iL(o,c.segmentGroup,h,e,r)}function ck(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function kC(i){return"object"==typeof i&&null!=i&&i.outlets}function iL(i,n,e,r,o){let c,s={};r&&Object.entries(r).forEach(([p,y])=>{s[p]=Array.isArray(y)?y.map(w=>`${w}`):`${y}`}),c=i===n?e:az(i,n,e);const h=iz(rz(c));return new Yb(h,s,o)}function az(i,n,e){const r={};return Object.entries(i.children).forEach(([o,s])=>{r[o]=s===n?e:az(s,n,e)}),new ai(i.segments,r)}class lz{constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&ck(r[0]))throw new d.vHH(4003,!1);const o=r.find(kC);if(o&&o!==KH(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dk{constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}}function cz(i,n,e){if(i||(i=new ai([],{})),0===i.segments.length&&i.hasChildren())return RC(i,n,e);const r=function aee(i,n,e){let r=0,o=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;o<i.segments.length;){if(r>=e.length)return s;const c=i.segments[o],h=e[r];if(kC(h))break;const p=`${h}`,y=r<e.length-1?e[r+1]:null;if(o>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!uz(p,y,c))return s;r+=2}else{if(!uz(p,{},c))return s;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(i,n,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<i.segments.length){const s=new ai(i.segments.slice(0,r.pathIndex),{});return s.children[pn]=new ai(i.segments.slice(r.pathIndex),i.children),RC(s,0,o)}return r.match&&0===o.length?new ai(i.segments,{}):r.match&&!i.hasChildren()?rL(i,n,e):r.match?RC(i,0,o):rL(i,n,e)}function RC(i,n,e){if(0===e.length)return new ai(i.segments,{});{const r=function see(i){return kC(i[0])?i[0].outlets:{[pn]:i}}(e),o={};if(!r[pn]&&i.children[pn]&&1===i.numberOfChildren&&0===i.children[pn].segments.length){const s=RC(i.children[pn],n,e);return new ai(i.segments,s.children)}return Object.entries(r).forEach(([s,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(o[s]=cz(i.children[s],n,c))}),Object.entries(i.children).forEach(([s,c])=>{void 0===r[s]&&(o[s]=c)}),new ai(i.segments,o)}}function rL(i,n,e){const r=i.segments.slice(0,n);let o=0;for(;o<e.length;){const s=e[o];if(kC(s)){const p=lee(s.outlets);return new ai(r,p)}if(0===o&&ck(e[0])){r.push(new SC(i.segments[n].path,dz(e[0]))),o++;continue}const c=kC(s)?s.outlets[pn]:`${s}`,h=o<e.length-1?e[o+1]:null;c&&h&&ck(h)?(r.push(new SC(c,dz(h))),o+=2):(r.push(new SC(c,{})),o++)}return new ai(r,{})}function lee(i){const n={};return Object.entries(i).forEach(([e,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(n[e]=rL(new ai([],{}),0,r))}),n}function dz(i){const n={};return Object.entries(i).forEach(([e,r])=>n[e]=`${r}`),n}function uz(i,n,e){return i==e.path&&Zd(n,e.parameters)}const PC="imperative";class Qd{constructor(n,e){this.id=n,this.url=e}}class oL extends Qd{constructor(n,e,r="imperative",o=null){super(n,e),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class H_ extends Qd{constructor(n,e,r){super(n,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class uk extends Qd{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class OC extends Qd{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=16}}class sL extends Qd{constructor(n,e,r,o){super(n,e),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cee extends Qd{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dee extends Qd{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uee extends Qd{constructor(n,e,r,o,s){super(n,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hee extends Qd{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fee extends Qd{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mee{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pee{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gee{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _ee{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yee{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vee{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hz{constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bee{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new NC,this.attachRef=null}}let NC=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new bee,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class fz{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=aL(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){const e=aL(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=lL(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return lL(n,this._root).map(e=>e.value)}}function aL(i,n){if(i===n.value)return n;for(const e of n.children){const r=aL(i,e);if(r)return r}return null}function lL(i,n){if(i===n.value)return[n];for(const e of n.children){const r=lL(i,e);if(r.length)return r.unshift(n),r}return[]}class Wh{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Zb(i){const n={};return i&&i.children.forEach(e=>n[e.value.outlet]=e),n}class mz extends fz{constructor(n,e){super(n),this.snapshot=e,cL(this,n)}toString(){return this.snapshot.toString()}}function pz(i,n){const e=function wee(i,n){const c=new hk([],{},{},"",{},pn,n,null,{});return new _z("",new Wh(c,[]))}(0,n),r=new ia.X([new SC("",{})]),o=new ia.X({}),s=new ia.X({}),c=new ia.X({}),h=new ia.X(""),p=new mp(r,o,c,h,s,pn,n,e.root);return p.snapshot=e.root,new mz(new Wh(p,[]),e)}class mp{constructor(n,e,r,o,s,c,h,p){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=s,this.outlet=c,this.component=h,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,_t.U)(y=>y[TC]))??(0,mt.of)(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(n=>Kb(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(n=>Kb(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gz(i,n="emptyOnly"){const e=i.pathFromRoot;let r=0;if("always"!==n)for(r=e.length-1;r>=1;){const o=e[r],s=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(s.component)break;r--}}return function xee(i){return i.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class hk{get title(){return this.data?.[TC]}constructor(n,e,r,o,s,c,h,p,y){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=s,this.outlet=c,this.component=h,this.routeConfig=p,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _z extends fz{constructor(n,e){super(e),this.url=n,cL(this,e)}toString(){return yz(this._root)}}function cL(i,n){n.value._routerState=i,n.children.forEach(e=>cL(i,e))}function yz(i){const n=i.children.length>0?` { ${i.children.map(yz).join(", ")} } `:"";return`${i.value}${n}`}function dL(i){if(i.snapshot){const n=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Zd(n.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),Zd(n.params,e.params)||i.paramsSubject.next(e.params),function LJ(i,n){if(i.length!==n.length)return!1;for(let e=0;e<i.length;++e)if(!Zd(i[e],n[e]))return!1;return!0}(n.url,e.url)||i.urlSubject.next(e.url),Zd(n.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function uL(i,n){const e=Zd(i.params,n.params)&&function HJ(i,n){return B_(i,n)&&i.every((e,r)=>Zd(e.parameters,n[r].parameters))}(i.url,n.url);return e&&!(!i.parent!=!n.parent)&&(!i.parent||uL(i.parent,n.parent))}let hL=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=pn,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(NC),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(fk,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=e;const o=this.location,c=e.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new Eee(e,h,o.injector);this.activated=o.createComponent(c,{index:o.length,injector:p,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),i})();class Eee{constructor(n,e,r){this.route=n,this.childContexts=e,this.parent=r}get(n,e){return n===mp?this.route:n===NC?this.childContexts:this.parent.get(n,e)}}const fk=new d.OlP("");let vz=(()=>{class i{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:r}=e,o=fM([r.queryParams,r.params,r.data]).pipe((0,Jn.w)(([s,c,h],p)=>(h={...s,...c,...h},0===p?(0,mt.of)(h):Promise.resolve(h)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(e);const c=(0,d.qFp)(r.component);if(c)for(const{templateName:h}of c.inputs)e.activatedComponentRef.setInput(h,s[h]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,o)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();function FC(i,n,e){if(e&&i.shouldReuseRoute(n.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=n.value;const o=function Dee(i,n,e){return n.children.map(r=>{for(const o of e.children)if(i.shouldReuseRoute(r.value,o.value.snapshot))return FC(i,r,o);return FC(i,r)})}(i,n,e);return new Wh(r,o)}{if(i.shouldAttach(n.value)){const s=i.retrieve(n.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(h=>FC(i,h)),c}}const r=function Iee(i){return new mp(new ia.X(i.url),new ia.X(i.params),new ia.X(i.queryParams),new ia.X(i.fragment),new ia.X(i.data),i.outlet,i.component,i)}(n.value),o=n.children.map(s=>FC(i,s));return new Wh(r,o)}}const fL="ngNavigationCancelingError";function bz(i,n){const{redirectTo:e,navigationBehaviorOptions:r}=V_(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=wz(!1,0,n);return o.url=e,o.navigationBehaviorOptions=r,o}function wz(i,n,e){const r=new Error("NavigationCancelingError: "+(i||""));return r[fL]=!0,r.cancellationCode=n,e&&(r.url=e),r}function xz(i){return Ez(i)&&V_(i.url)}function Ez(i){return i&&i[fL]}let Cz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(e,r){1&e&&d._UZ(0,"router-outlet")},dependencies:[hL],encapsulation:2}),i})();function mL(i){const n=i.children&&i.children.map(mL),e=n?{...i,children:n}:{...i};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==pn&&(e.component=Cz),e}function Mc(i){return i.outlet||pn}function LC(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let n=i.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Pee{constructor(n,e,r,o,s){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=s}activate(n){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),dL(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){const o=Zb(e);n.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,o[c],r),delete o[c]}),Object.values(o).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(n,e,r){const o=n.value,s=e?e.value:null;if(o===s)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(n,e,c.children)}else this.deactivateChildRoutes(n,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,s=Zb(n);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],o);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:h})}}deactivateRouteAndOutlet(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,s=Zb(n);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){const o=Zb(e);n.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],r),this.forwardEvent(new vee(s.value.snapshot))}),n.children.length&&this.forwardEvent(new _ee(n.value.snapshot))}activateRoutes(n,e,r){const o=n.value,s=e?e.value:null;if(dL(o),o===s)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,c.children)}else this.activateChildRoutes(n,e,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const h=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),dL(h.route.value),this.activateChildRoutes(n,null,c.children)}else{const h=LC(o.snapshot);c.attachRef=null,c.route=o,c.injector=h,c.outlet&&c.outlet.activateWith(o,c.injector),this.activateChildRoutes(n,null,c.children)}}else this.activateChildRoutes(n,null,r)}}class Dz{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class mk{constructor(n,e){this.component=n,this.route=e}}function Oee(i,n,e){const r=i._root;return UC(r,n?n._root:null,e,[r.value])}function Qb(i,n){const e=Symbol(),r=n.get(i,e);return r===e?"function"!=typeof i||(0,d.Z0I)(i)?n.get(i):i:r}function UC(i,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Zb(n);return i.children.forEach(c=>{(function Fee(i,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,c=n?n.value:null,h=e?e.getContext(i.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function Lee(i,n,e){if("function"==typeof e)return e(i,n);switch(e){case"pathParamsChange":return!B_(i.url,n.url);case"pathParamsOrQueryParamsChange":return!B_(i.url,n.url)||!Zd(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uL(i,n)||!Zd(i.queryParams,n.queryParams);default:return!uL(i,n)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?o.canActivateChecks.push(new Dz(r)):(s.data=c.data,s._resolvedData=c._resolvedData),UC(i,n,s.component?h?h.children:null:e,r,o),p&&h&&h.outlet&&h.outlet.isActivated&&o.canDeactivateChecks.push(new mk(h.outlet.component,c))}else c&&BC(n,h,o),o.canActivateChecks.push(new Dz(r)),UC(i,null,s.component?h?h.children:null:e,r,o)})(c,s[c.value.outlet],e,r.concat([c.value]),o),delete s[c.value.outlet]}),Object.entries(s).forEach(([c,h])=>BC(h,e.getContext(c),o)),o}function BC(i,n,e){const r=Zb(i),o=i.value;Object.entries(r).forEach(([s,c])=>{BC(c,o.component?n?n.children.getContext(s):null:n,e)}),e.canDeactivateChecks.push(new mk(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function VC(i){return"function"==typeof i}function Iz(i){return i instanceof rl||"EmptyError"===i?.name}const pk=Symbol("INITIAL_VALUE");function Xb(){return(0,Jn.w)(i=>fM(i.map(n=>n.pipe(Nr(1),gc(pk)))).pipe((0,_t.U)(n=>{for(const e of n)if(!0!==e){if(e===pk)return pk;if(!1===e||e instanceof Yb)return e}return!0}),Cn(n=>n!==pk),Nr(1)))}function Tz(i){return(0,PJ.z)((0,_o.b)(n=>{if(V_(n))throw bz(0,n)}),(0,_t.U)(n=>!0===n))}class gk{constructor(n){this.segmentGroup=n||null}}class Sz{constructor(n){this.urlTree=n}}function Jb(i){return zb(new gk(i))}function Az(i){return zb(new Sz(i))}class ite{constructor(n,e){this.urlSerializer=n,this.urlTree=e}noMatchError(n){return new d.vHH(4002,!1)}lineralizeSegments(n,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,mt.of)(r);if(o.numberOfChildren>1||!o.children[pn])return zb(new d.vHH(4e3,!1));o=o.children[pn]}}applyRedirectCommands(n,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r)}applyRedirectCreateUrlTree(n,e,r,o){const s=this.createSegmentGroup(n,e.root,r,o);return new Yb(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const r={};return Object.entries(n).forEach(([o,s])=>{if("string"==typeof s&&s.startsWith(":")){const h=s.substring(1);r[o]=e[h]}else r[o]=s}),r}createSegmentGroup(n,e,r,o){const s=this.createSegments(n,e.segments,r,o);let c={};return Object.entries(e.children).forEach(([h,p])=>{c[h]=this.createSegmentGroup(n,p,r,o)}),new ai(s,c)}createSegments(n,e,r,o){return e.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,o):this.findOrReturn(s,r))}findPosParam(n,e,r){const o=r[e.path.substring(1)];if(!o)throw new d.vHH(4001,!1);return o}findOrReturn(n,e){let r=0;for(const o of e){if(o.path===n.path)return e.splice(r),o;r++}return n}}const pL={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rte(i,n,e,r,o){const s=gL(i,n,e);return s.matched?(r=function Tee(i,n){return i.providers&&!i._injector&&(i._injector=(0,d.MMx)(i.providers,n,`Route: ${i.path}`)),i._injector??n}(n,r),function ete(i,n,e,r){const o=n.canMatch;if(!o||0===o.length)return(0,mt.of)(!0);const s=o.map(c=>{const h=Qb(c,i);return fp(function jee(i){return i&&VC(i.canMatch)}(h)?h.canMatch(n,e):i.runInContext(()=>h(n,e)))});return(0,mt.of)(s).pipe(Xb(),Tz())}(r,n,e).pipe((0,_t.U)(c=>!0===c?s:{...pL}))):(0,mt.of)(s)}function gL(i,n,e){if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||e.length>0)?{...pL}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(n.matcher||FJ)(e,i,n);if(!o)return{...pL};const s={};Object.entries(o.posParams??{}).forEach(([h,p])=>{s[h]=p.path});const c=o.consumed.length>0?{...s,...o.consumed[o.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:c,positionalParamSegments:o.posParams??{}}}function Mz(i,n,e,r){return e.length>0&&function ate(i,n,e){return e.some(r=>_k(i,n,r)&&Mc(r)!==pn)}(i,e,r)?{segmentGroup:new ai(n,ste(r,new ai(e,i.children))),slicedSegments:[]}:0===e.length&&function lte(i,n,e){return e.some(r=>_k(i,n,r))}(i,e,r)?{segmentGroup:new ai(i.segments,ote(i,0,e,r,i.children)),slicedSegments:e}:{segmentGroup:new ai(i.segments,i.children),slicedSegments:e}}function ote(i,n,e,r,o){const s={};for(const c of r)if(_k(i,e,c)&&!o[Mc(c)]){const h=new ai([],{});s[Mc(c)]=h}return{...o,...s}}function ste(i,n){const e={};e[pn]=n;for(const r of i)if(""===r.path&&Mc(r)!==pn){const o=new ai([],{});e[Mc(r)]=o}return e}function _k(i,n,e){return(!(i.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class hte{constructor(n,e,r,o,s,c,h){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=o,this.urlTree=s,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new ite(this.urlSerializer,this.urlTree)}noMatchError(n){return new d.vHH(4002,!1)}recognize(){const n=Mz(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,pn).pipe(cp(e=>{if(e instanceof Sz)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof gk?this.noMatchError(e):e}),(0,_t.U)(e=>{const r=new hk([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pn,this.rootComponentType,null,{}),o=new Wh(r,e),s=new _z("",o),c=function nee(i,n,e=null,r=null){return sz(oz(i),n,e,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(s._root),{state:s,tree:c}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,pn).pipe(cp(r=>{throw r instanceof gk?this.noMatchError(r):r}))}inheritParamsAndData(n){const e=n.value,r=gz(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,e,r):this.processSegment(n,e,r,r.segments,o,!0)}processChildren(n,e,r){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return(0,rn.D)(o).pipe(jb(s=>{const c=r.children[s],h=function kee(i,n){const e=i.filter(r=>Mc(r)===n);return e.push(...i.filter(r=>Mc(r)!==n)),e}(e,s);return this.processSegmentGroup(n,h,c,s)}),ju((s,c)=>(s.push(...c),s)),ol(null),function OJ(i,n){const e=arguments.length>=2;return r=>r.pipe(i?Cn((o,s)=>i(o,s,r)):Ql.y,JF(1),e?ol(n):Zl(()=>new rl))}(),(0,yo.z)(s=>{if(null===s)return Jb(r);const c=kz(s);return function fte(i){i.sort((n,e)=>n.value.outlet===pn?-1:e.value.outlet===pn?1:n.value.outlet.localeCompare(e.value.outlet))}(c),(0,mt.of)(c)}))}processSegment(n,e,r,o,s,c){return(0,rn.D)(e).pipe(jb(h=>this.processSegmentAgainstRoute(h._injector??n,e,h,r,o,s,c).pipe(cp(p=>{if(p instanceof gk)return(0,mt.of)(null);throw p}))),Ho(h=>!!h),cp(h=>{if(Iz(h))return function dte(i,n,e){return 0===n.length&&!i.children[e]}(r,o,s)?(0,mt.of)([]):Jb(r);throw h}))}processSegmentAgainstRoute(n,e,r,o,s,c,h){return function cte(i,n,e,r){return!!(Mc(i)===r||r!==pn&&_k(n,e,i))&&("**"===i.path||gL(n,i,e).matched)}(r,o,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,o,r,s,c,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,o,e,r,s,c):Jb(o):Jb(o)}expandSegmentAgainstRouteUsingRedirect(n,e,r,o,s,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,r,o){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Az(s):this.applyRedirects.lineralizeSegments(r,s).pipe((0,yo.z)(c=>{const h=new ai(c,{});return this.processSegment(n,e,h,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,s,c){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:w}=gL(e,o,s);if(!h)return Jb(e);const I=this.applyRedirects.applyRedirectCommands(p,o.redirectTo,w);return o.redirectTo.startsWith("/")?Az(I):this.applyRedirects.lineralizeSegments(o,I).pipe((0,yo.z)(A=>this.processSegment(n,r,e,A.concat(y),c,!1)))}matchSegmentAgainstRoute(n,e,r,o,s,c){let h;if("**"===r.path){const p=o.length>0?KH(o).parameters:{},y=new hk(o,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rz(r),Mc(r),r.component??r._loadedComponent??null,r,Pz(r));h=(0,mt.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),e.children={}}else h=rte(e,r,o,n).pipe((0,_t.U)(({matched:p,consumedSegments:y,remainingSegments:w,parameters:I})=>p?{snapshot:new hk(y,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rz(r),Mc(r),r.component??r._loadedComponent??null,r,Pz(r)),consumedSegments:y,remainingSegments:w}:null));return h.pipe((0,Jn.w)(p=>null===p?Jb(e):this.getChildConfig(n=r._injector??n,r,o).pipe((0,Jn.w)(({routes:y})=>{const w=r._loadedInjector??n,{snapshot:I,consumedSegments:A,remainingSegments:P}=p,{segmentGroup:U,slicedSegments:G}=Mz(e,A,P,y);if(0===G.length&&U.hasChildren())return this.processChildren(w,y,U).pipe((0,_t.U)(me=>null===me?null:[new Wh(I,me)]));if(0===y.length&&0===G.length)return(0,mt.of)([new Wh(I,[])]);const Q=Mc(r)===s;return this.processSegment(w,y,U,G,Q?pn:s,!0).pipe((0,_t.U)(me=>[new Wh(I,me)]))}))))}getChildConfig(n,e,r){return e.children?(0,mt.of)({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?(0,mt.of)({routes:e._loadedRoutes,injector:e._loadedInjector}):function Jee(i,n,e,r){const o=n.canLoad;if(void 0===o||0===o.length)return(0,mt.of)(!0);const s=o.map(c=>{const h=Qb(c,i);return fp(function Bee(i){return i&&VC(i.canLoad)}(h)?h.canLoad(n,e):i.runInContext(()=>h(n,e)))});return(0,mt.of)(s).pipe(Xb(),Tz())}(n,e,r).pipe((0,yo.z)(o=>o?this.configLoader.loadChildren(n,e).pipe((0,_o.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function nte(i){return zb(wz(!1,3))}())):(0,mt.of)({routes:[],injector:n})}}function mte(i){const n=i.value.routeConfig;return n&&""===n.path}function kz(i){const n=[],e=new Set;for(const r of i){if(!mte(r)){n.push(r);continue}const o=n.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==o?(o.children.push(...r.children),e.add(o)):n.push(r)}for(const r of e){const o=kz(r.children);n.push(new Wh(r.value,o))}return n.filter(r=>!e.has(r))}function Rz(i){return i.data||{}}function Pz(i){return i.resolve||{}}function Oz(i){return"string"==typeof i.title||null===i.title}function _L(i){return(0,Jn.w)(n=>{const e=i(n);return e?(0,rn.D)(e).pipe((0,_t.U)(()=>n)):(0,mt.of)(n)})}const e0=new d.OlP("ROUTES");let yL=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return(0,mt.of)(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=fp(e.loadComponent()).pipe((0,_t.U)(Nz),(0,_o.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),EM(()=>{this.componentLoaders.delete(e)})),o=new XN(r,()=>new Ht.x).pipe(QN());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,mt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,_t.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y;return Array.isArray(h)?y=h:(p=h.create(e).injector,y=p.get(e0,[],d.XFs.Self|d.XFs.Optional).flat()),{routes:y.map(mL),injector:p}}),EM(()=>{this.childrenLoaders.delete(r)})),c=new XN(s,()=>new Ht.x).pipe(QN());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(e){return fp(e()).pipe((0,_t.U)(Nz),(0,yo.z)(r=>r instanceof d.YKP||Array.isArray(r)?(0,mt.of)(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Nz(i){return function wte(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let yk=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ht.x,this.configLoader=(0,d.f3M)(yL),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(AC),this.rootContexts=(0,d.f3M)(NC),this.inputBindingEnabled=null!==(0,d.f3M)(fk,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,mt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new pee(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new mee(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new ia.X({id:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:PC,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Cn(r=>0!==r.id),(0,_t.U)(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),(0,Jn.w)(r=>{let o=!1,s=!1;return(0,mt.of)(r).pipe((0,_o.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Jn.w)(c=>{const h=e.browserUrlTree.toString(),p=!e.navigated||c.extractedUrl.toString()!==h||h!==e.currentUrlTree.toString();if(!p&&"reload"!==(c.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const w="";return this.events.next(new OC(c.id,e.serializeUrl(r.rawUrl),w,0)),e.rawUrlTree=c.rawUrl,c.resolve(null),Dr.E}if(e.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Fz(c.source)&&(e.browserUrlTree=c.extractedUrl),(0,mt.of)(c).pipe((0,Jn.w)(w=>{const I=this.transitions?.getValue();return this.events.next(new oL(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),I!==this.transitions?.getValue()?Dr.E:Promise.resolve(w)}),function pte(i,n,e,r,o,s){return(0,yo.z)(c=>function ute(i,n,e,r,o,s,c="emptyOnly"){return new hte(i,n,e,r,o,c,s).recognize()}(i,n,e,r,c.extractedUrl,o,s).pipe((0,_t.U)(({state:h,tree:p})=>({...c,targetSnapshot:h,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,_o.b)(w=>{if(r.targetSnapshot=w.targetSnapshot,r.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},"eager"===e.urlUpdateStrategy){if(!w.extras.skipLocationChange){const A=e.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);e.setBrowserUrl(A,w)}e.browserUrlTree=w.urlAfterRedirects}const I=new cee(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(I)}));if(p&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:w,extractedUrl:I,source:A,restoredState:P,extras:U}=c,G=new oL(w,this.urlSerializer.serialize(I),A,P);this.events.next(G);const Q=pz(0,this.rootComponentType).snapshot;return r={...c,targetSnapshot:Q,urlAfterRedirects:I,extras:{...U,skipLocationChange:!1,replaceUrl:!1}},(0,mt.of)(r)}{const w="";return this.events.next(new OC(c.id,e.serializeUrl(r.extractedUrl),w,1)),e.rawUrlTree=c.rawUrl,c.resolve(null),Dr.E}}),(0,_o.b)(c=>{const h=new dee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),(0,_t.U)(c=>r={...c,guards:Oee(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function Gee(i,n){return(0,yo.z)(e=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?(0,mt.of)({...e,guardsResult:!0}):function Wee(i,n,e,r){return(0,rn.D)(i).pipe((0,yo.z)(o=>function Xee(i,n,e,r,o){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,mt.of)(!0);const c=s.map(h=>{const p=LC(n)??o,y=Qb(h,p);return fp(function zee(i){return i&&VC(i.canDeactivate)}(y)?y.canDeactivate(i,n,e,r):p.runInContext(()=>y(i,n,e,r))).pipe(Ho())});return(0,mt.of)(c).pipe(Xb())}(o.component,o.route,e,n,r)),Ho(o=>!0!==o,!0))}(c,r,o,i).pipe((0,yo.z)(h=>h&&function Uee(i){return"boolean"==typeof i}(h)?function qee(i,n,e,r){return(0,rn.D)(n).pipe(jb(o=>hv(function Yee(i,n){return null!==i&&n&&n(new gee(i)),(0,mt.of)(!0)}(o.route.parent,r),function Kee(i,n){return null!==i&&n&&n(new yee(i)),(0,mt.of)(!0)}(o.route,r),function Qee(i,n,e){const r=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(c=>function Nee(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(c)).filter(c=>null!==c).map(c=>WH(()=>{const h=c.guards.map(p=>{const y=LC(c.node)??e,w=Qb(p,y);return fp(function Hee(i){return i&&VC(i.canActivateChild)}(w)?w.canActivateChild(r,i):y.runInContext(()=>w(r,i))).pipe(Ho())});return(0,mt.of)(h).pipe(Xb())}));return(0,mt.of)(s).pipe(Xb())}(i,o.path,e),function Zee(i,n,e){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return(0,mt.of)(!0);const o=r.map(s=>WH(()=>{const c=LC(n)??e,h=Qb(s,c);return fp(function Vee(i){return i&&VC(i.canActivate)}(h)?h.canActivate(n,i):c.runInContext(()=>h(n,i))).pipe(Ho())}));return(0,mt.of)(o).pipe(Xb())}(i,o.route,e))),Ho(o=>!0!==o,!0))}(r,s,i,n):(0,mt.of)(h)),(0,_t.U)(h=>({...e,guardsResult:h})))})}(this.environmentInjector,c=>this.events.next(c)),(0,_o.b)(c=>{if(r.guardsResult=c.guardsResult,V_(c.guardsResult))throw bz(0,c.guardsResult);const h=new uee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Cn(c=>!!c.guardsResult||(e.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),_L(c=>{if(c.guards.canActivateChecks.length)return(0,mt.of)(c).pipe((0,_o.b)(h=>{const p=new hee(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),(0,Jn.w)(h=>{let p=!1;return(0,mt.of)(h).pipe(function gte(i,n){return(0,yo.z)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return(0,mt.of)(e);let s=0;return(0,rn.D)(o).pipe(jb(c=>function _te(i,n,e,r){const o=i.routeConfig,s=i._resolve;return void 0!==o?.title&&!Oz(o)&&(s[TC]=o.title),function yte(i,n,e,r){const o=function vte(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===o.length)return(0,mt.of)({});const s={};return(0,rn.D)(o).pipe((0,yo.z)(c=>function bte(i,n,e,r){const o=LC(n)??r,s=Qb(i,o);return fp(s.resolve?s.resolve(n,e):o.runInContext(()=>s(n,e)))}(i[c],n,e,r).pipe(Ho(),(0,_o.b)(h=>{s[c]=h}))),JF(1),mF(s),cp(c=>Iz(c)?Dr.E:zb(c)))}(s,i,n,r).pipe((0,_t.U)(c=>(i._resolvedData=c,i.data=gz(i,e).resolve,o&&Oz(o)&&(i.data[TC]=o.title),null)))}(c.route,r,i,n)),(0,_o.b)(()=>s++),JF(1),(0,yo.z)(c=>s===o.length?(0,mt.of)(e):Dr.E))})}(e.paramsInheritanceStrategy,this.environmentInjector),(0,_o.b)({next:()=>p=!0,complete:()=>{p||(e.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,_o.b)(h=>{const p=new fee(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),_L(c=>{const h=p=>{const y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe((0,_o.b)(w=>{p.component=w}),(0,_t.U)(()=>{})));for(const w of p.children)y.push(...h(w));return y};return fM(h(c.targetSnapshot.root)).pipe(ol(),Nr(1))}),_L(()=>this.afterPreactivation()),(0,_t.U)(c=>{const h=function Cee(i,n,e){const r=FC(i,n._root,e?e._root:void 0);return new mz(r,n)}(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:h}}),(0,_o.b)(c=>{e.currentUrlTree=c.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),e.routerState=c.targetRouterState,"deferred"===e.urlUpdateStrategy&&(c.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,c),e.browserUrlTree=c.urlAfterRedirects)}),((i,n,e,r)=>(0,_t.U)(o=>(new Pee(n,o.targetRouterState,o.currentRouterState,e,r).activate(i),o)))(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Nr(1),(0,_o.b)({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new H_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),EM(()=>{o||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),cp(c=>{if(s=!0,Ez(c)){xz(c)||(e.navigated=!0,e.restoreHistory(r,!0));const h=new uk(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(h),xz(c)){const p=e.urlHandlingStrategy.merge(c.url,e.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||Fz(r.source)};e.scheduleNavigation(p,PC,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const h=new sL(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(e.errorHandler(c))}catch(p){r.reject(p)}}return Dr.E}))}))}cancelNavigationTransition(e,r,o){const s=new uk(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(s),e.resolve(!1)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Fz(i){return i!==PC}let Lz=(()=>{class i{buildTitle(e){let r,o=e.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===pn);return r}getResolvedTitleForRoute(e){return e.data[TC]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(xte)},providedIn:"root"}),i})(),xte=(()=>{class i extends Lz{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(td))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ete=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(Dte)},providedIn:"root"}),i})();class Cte{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let Dte=(()=>{class i extends Cte{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vk=new d.OlP("",{providedIn:"root",factory:()=>({})});let Ite=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(Tte)},providedIn:"root"}),i})(),Tte=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Ha=(()=>((Ha=Ha||{})[Ha.COMPLETE=0]="COMPLETE",Ha[Ha.FAILED=1]="FAILED",Ha[Ha.REDIRECTING=2]="REDIRECTING",Ha))();function Uz(i,n){i.events.pipe(Cn(e=>e instanceof H_||e instanceof uk||e instanceof sL||e instanceof OC),(0,_t.U)(e=>e instanceof H_||e instanceof OC?Ha.COMPLETE:e instanceof uk&&(0===e.code||1===e.code)?Ha.REDIRECTING:Ha.FAILED),Cn(e=>e!==Ha.REDIRECTING),Nr(1)).subscribe(()=>{n()})}function Ste(i){throw i}function Ate(i,n,e){return n.parse("/")}const Mte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kte={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ra=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(vk,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||Ste,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ate,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(Ite),this.routeReuseStrategy=(0,d.f3M)(Ete),this.titleStrategy=(0,d.f3M)(Lz),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(e0,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(yk),this.urlSerializer=(0,d.f3M)(AC),this.location=(0,d.f3M)(it),this.componentInputBindingEnabled=!!(0,d.f3M)(fk,{optional:!0}),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Yb,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=pz(0,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),PC,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,o){const s={replaceUrl:!0},c=o?.navigationId?o:null;if(o){const p={...o};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(e);this.scheduleNavigation(h,r,c,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(mL),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:o,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,y=p?this.currentUrlTree.fragment:c;let I,w=null;switch(h){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}null!==w&&(w=this.removeEmptyProps(w));try{I=oz(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),I=this.currentUrlTree.root}return sz(I,e,w,y??null)}navigateByUrl(e,r={skipLocationChange:!1}){const o=V_(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,PC,null,r)}navigate(e,r={skipLocationChange:!1}){return function Rte(i){for(let n=0;n<i.length;n++)if(null==i[n])throw new d.vHH(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return r}isActive(e,r){let o;if(o=!0===r?{...Mte}:!1===r?{...kte}:r,V_(e))return ZH(this.currentUrlTree,e,o);const s=this.parseUrl(e);return ZH(this.currentUrlTree,s,o)}removeEmptyProps(e){return Object.keys(e).reduce((r,o)=>{const s=e[o];return null!=s&&(r[o]=s),r},{})}scheduleNavigation(e,r,o,s,c){if(this.disposed)return Promise.resolve(!1);let h,p,y;c?(h=c.resolve,p=c.reject,y=c.promise):y=new Promise((I,A)=>{h=I,p=A});const w=this.pendingTasks.add();return Uz(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:h,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(I=>Promise.reject(I))}setBrowserUrl(e,r){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",c)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(o,"",s)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),t0=(()=>{class i{constructor(e,r,o,s,c,h){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=c,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new Ht.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const p=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=e.events.subscribe(y=>{y instanceof H_&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,o,s,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||o||s||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const o=this.renderer,s=this.el.nativeElement;null!==r?o.setAttribute(s,e,r):o.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(ra),d.Y36(mp),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Ge))},i.\u0275dir=d.lG2({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,r){1&e&&d.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]}),i})();class Bz{}let Nte=(()=>{class i{constructor(e,r,o,s,c){this.router=e,this.injector=o,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Cn(e=>e instanceof H_),jb(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const o=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,d.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,h=s._loadedInjector??c;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(c,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,rn.D)(o).pipe((0,Dg.J)())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):(0,mt.of)(null);const s=o.pipe((0,yo.z)(c=>null===c?(0,mt.of)(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,rn.D)([s,c]).pipe((0,Dg.J)())}return s})}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(ra),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Bz),d.LFG(yL))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vL=new d.OlP("");let Vz=(()=>{class i{constructor(e,r,o,s,c={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof oL?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof H_?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof OC&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof hz&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hz(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return i.\u0275fac=function(e){d.$Z()},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();function qh(i,n){return{\u0275kind:i,\u0275providers:n}}function zz(){const i=(0,d.f3M)(d.zs3);return n=>{const e=i.get(d.z2F);if(n!==e.components[0])return;const r=i.get(ra),o=i.get(jz);1===i.get(bL)&&r.initialNavigation(),i.get($z,null,d.XFs.Optional)?.setUpPreloading(),i.get(vL,null,d.XFs.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const jz=new d.OlP("",{factory:()=>new Ht.x}),bL=new d.OlP("",{providedIn:"root",factory:()=>1}),$z=new d.OlP("");function Bte(i){return qh(0,[{provide:$z,useExisting:Nte},{provide:Bz,useExisting:i}])}const Gz=new d.OlP("ROUTER_FORROOT_GUARD"),Hte=[it,{provide:AC,useClass:eL},ra,NC,{provide:mp,useFactory:function Hz(i){return i.routerState.root},deps:[ra]},yL,[]];function zte(){return new d.PXZ("Router",ra)}let Wz=(()=>{class i{constructor(e){}static forRoot(e,r){return{ngModule:i,providers:[Hte,[],{provide:e0,multi:!0,useValue:e},{provide:Gz,useFactory:Wte,deps:[[ra,new d.FiY,new d.tp0]]},{provide:vk,useValue:r||{}},r?.useHash?{provide:Ge,useClass:Ue}:{provide:Ge,useClass:nt},{provide:vL,useFactory:()=>{const i=(0,d.f3M)(ua),n=(0,d.f3M)(d.R0b),e=(0,d.f3M)(vk),r=(0,d.f3M)(yk),o=(0,d.f3M)(AC);return e.scrollOffset&&i.setOffset(e.scrollOffset),new Vz(o,r,i,n,e)}},r?.preloadingStrategy?Bte(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:zte},r?.initialNavigation?qte(r):[],r?.bindToComponentInputs?qh(8,[vz,{provide:fk,useExisting:vz}]).\u0275providers:[],[{provide:qz,useFactory:zz},{provide:d.tb,multi:!0,useExisting:qz}]]}}static forChild(e){return{ngModule:i,providers:[{provide:e0,multi:!0,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Gz,8))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();function Wte(i){return"guarded"}function qte(i){return["disabled"===i.initialNavigation?qh(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const n=(0,d.f3M)(ra);return()=>{n.setUpLocationChangeListener()}}},{provide:bL,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?qh(2,[{provide:bL,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:n=>{const e=n.get(Pe,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=n.get(ra),s=n.get(jz);Uz(o,()=>{r(!0)}),n.get(yk).afterPreactivation=()=>(r(!0),s.closed?(0,mt.of)(void 0):s),o.initialNavigation()}))}}]).\u0275providers:[]]}const qz=new d.OlP(""),Kz={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let bk;const Yte=new Uint8Array(16);function Zte(){if(!bk&&(bk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!bk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bk(Yte)}const Yo=[];for(let i=0;i<256;++i)Yo.push((i+256).toString(16).slice(1));const Xte=function Qte(i,n,e){if(Kz.randomUUID&&!n&&!i)return Kz.randomUUID();const r=(i=i||{}).random||(i.rng||Zte)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(let o=0;o<16;++o)n[e+o]=r[o];return n}return function Yz(i,n=0){return(Yo[i[n+0]]+Yo[i[n+1]]+Yo[i[n+2]]+Yo[i[n+3]]+"-"+Yo[i[n+4]]+Yo[i[n+5]]+"-"+Yo[i[n+6]]+Yo[i[n+7]]+"-"+Yo[i[n+8]]+Yo[i[n+9]]+"-"+Yo[i[n+10]]+Yo[i[n+11]]+Yo[i[n+12]]+Yo[i[n+13]]+Yo[i[n+14]]+Yo[i[n+15]]).toLowerCase()}(r)};let Zz=(()=>{class i{constructor(e,r,o){this.angularFireAuth=e,this.router=r,this.ngZone=o,this.currentUserSubject=new ia.X(void 0),this.angularFireAuth.authState.subscribe(s=>this.setCurrentUserData(s))}getSignedInObservable(){return this.currentUserSubject.asObservable().pipe((0,_t.U)(e=>!!e))}getCurrentUserObservable(){return this.currentUserSubject.asObservable()}signIn(){return this.authLogin(new CW.V).then(e=>{})}authLogin(e){return this.angularFireAuth.signInWithPopup(e).then(r=>{this.setCurrentUserData(r.user)}).catch(r=>{window.alert(r)})}setCurrentUserData(e){if(!e)return localStorage.removeItem("user"),void this.currentUserSubject.next(void 0);const r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified};return localStorage.setItem("user",JSON.stringify(e)),this.currentUserSubject.next(r),r}signOut(){return this.angularFireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.currentUserSubject.next(void 0)})}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Wp),d.LFG(ra),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const wL="designs";let Qz=(()=>{class i{constructor(e,r){this.authenticationService=e,this.firestore=r}_getDesigns(){return(0,mt.of)([{id:"c69094c0-34c2-44a5-a30d-ccf15e017f2d",title:"Orientation Tester",description:"",levels:[{index:0,tiles:[{x:0,y:0,element:"UD-100",orientation:0},{x:3,y:0,element:"UD-100",orientation:0},{x:0,y:3,element:"UD-100",orientation:0},{x:3,y:3,element:"UD-100",orientation:0},{x:6,y:0,element:"UD-100",orientation:0},{x:6,y:3,element:"UD-100",orientation:0},{x:0,y:6,element:"UD-100",orientation:0},{x:3,y:6,element:"UD-100",orientation:0},{x:6,y:6,element:"UD-100",orientation:0},{x:9,y:0,element:"UD-100",orientation:0},{x:9,y:3,element:"UD-100",orientation:0}]},{index:1,tiles:[{x:0,y:0,element:"UD-016",orientation:0},{x:0,y:5,element:"UD-016",orientation:0},{x:0,y:1,element:"UD-027",orientation:0},{x:0,y:2,element:"UD-027",orientation:1},{x:1,y:4,element:"UD-027",orientation:2},{x:1,y:3,element:"UD-027",orientation:3},{x:2,y:1,element:"UD-080",orientation:0},{x:3,y:2,element:"UD-080",orientation:2},{x:3,y:3,element:"UD-080",orientation:1},{x:2,y:4,element:"UD-080",orientation:3},{x:1,y:5,element:"UD-016",orientation:0},{x:2,y:5,element:"UD-016",orientation:0},{x:3,y:5,element:"UD-016",orientation:0},{x:4,y:4,element:"UD-016",orientation:0},{x:5,y:3,element:"UD-016",orientation:0},{x:3,y:0,element:"UD-016",orientation:0},{x:2,y:0,element:"UD-016",orientation:0},{x:1,y:0,element:"UD-016",orientation:0},{x:5,y:0,element:"UD-016",orientation:0},{x:7,y:0,element:"UD-016",orientation:0},{x:8,y:1,element:"UD-016",orientation:0},{x:7,y:1,element:"UD-016",orientation:0},{x:5,y:1,element:"UD-016",orientation:0},{x:5,y:2,element:"UD-016",orientation:0},{x:7,y:2,element:"UD-016",orientation:0},{x:8,y:2,element:"UD-016",orientation:0},{x:8,y:3,element:"UD-016",orientation:0},{x:8,y:4,element:"UD-016",orientation:0},{x:7,y:3,element:"UD-016",orientation:0},{x:7,y:4,element:"UD-016",orientation:0},{x:5,y:4,element:"UD-016",orientation:0},{x:7,y:5,element:"UD-016",orientation:0},{x:4,y:0,element:"UD-023",orientation:0},{x:6,y:0,element:"UD-023",orientation:0},{x:4,y:1,element:"UD-023",orientation:0},{x:4,y:3,element:"UD-023",orientation:0},{x:6,y:2,element:"UD-023",orientation:0},{x:6,y:4,element:"UD-023",orientation:0},{x:6,y:5,element:"UD-023",orientation:0},{x:4,y:5,element:"UD-023",orientation:0},{x:6,y:3,element:"UD-016",orientation:0},{x:4,y:2,element:"UD-016",orientation:0},{x:5,y:5,element:"UD-016",orientation:0},{x:6,y:1,element:"UD-016",orientation:0},{x:0,y:8,element:"UD-016",orientation:0},{x:1,y:8,element:"UD-016",orientation:0},{x:2,y:8,element:"UD-016",orientation:0},{x:6,y:8,element:"UD-016",orientation:0},{x:7,y:8,element:"UD-016",orientation:0},{x:8,y:8,element:"UD-016",orientation:0},{x:8,y:7,element:"UD-016",orientation:0},{x:8,y:6,element:"UD-016",orientation:0},{x:7,y:6,element:"UD-016",orientation:0},{x:6,y:6,element:"UD-016",orientation:0},{x:6,y:7,element:"UD-016",orientation:0},{x:7,y:7,element:"UD-016",orientation:0},{x:5,y:6,element:"UD-016",orientation:0},{x:4,y:6,element:"UD-016",orientation:0},{x:3,y:6,element:"UD-016",orientation:0},{x:2,y:6,element:"UD-016",orientation:0},{x:2,y:7,element:"UD-016",orientation:0},{x:0,y:6,element:"UD-092",orientation:0},{x:1,y:7,element:"UD-092",orientation:0},{x:0,y:7,element:"UD-092",orientation:0},{x:1,y:6,element:"UD-092",orientation:0},{x:3,y:7,element:"UD-092",orientation:0},{x:3,y:8,element:"UD-092",orientation:0},{x:4,y:8,element:"UD-092",orientation:0},{x:4,y:7,element:"UD-092",orientation:0},{x:5,y:7,element:"UD-092",orientation:0},{x:5,y:8,element:"UD-092",orientation:0},{x:9,y:5,element:"UD-016",orientation:0},{x:11,y:5,element:"UD-016",orientation:0},{x:11,y:4,element:"UD-016",orientation:0},{x:9,y:4,element:"UD-016",orientation:0},{x:10,y:4,element:"UD-016",orientation:0},{x:9,y:3,element:"UD-016",orientation:0},{x:10,y:3,element:"UD-016",orientation:0},{x:11,y:3,element:"UD-016",orientation:0},{x:11,y:2,element:"UD-016",orientation:0},{x:10,y:2,element:"UD-016",orientation:0},{x:9,y:2,element:"UD-016",orientation:0},{x:9,y:1,element:"UD-016",orientation:0},{x:10,y:1,element:"UD-016",orientation:0},{x:11,y:1,element:"UD-016",orientation:0},{x:11,y:0,element:"UD-016",orientation:0},{x:9,y:0,element:"UD-016",orientation:0},{x:10,y:0,element:"UD-092",orientation:0},{x:8,y:0,element:"UD-092",orientation:0},{x:8,y:5,element:"UD-092",orientation:0},{x:10,y:5,element:"UD-092",orientation:0}]},{index:4,tiles:[{x:4,y:0,element:"UD-019",orientation:0},{x:4,y:1,element:"UD-019",orientation:1},{x:6,y:5,element:"UD-019",orientation:2},{x:6,y:4,element:"UD-019",orientation:3},{x:0,y:6,element:"UD-095",orientation:0},{x:5,y:7,element:"UD-096",orientation:1},{x:10,y:0,element:"UD-097",orientation:1}]}]},{id:"603ea2c3-cd81-4d94-9a4d-2c86effff92e",title:"Example Map",description:"",levels:[{index:0,tiles:[{x:0,y:0,element:"UD-100",orientation:0},{x:3,y:0,element:"UD-100",orientation:0},{x:0,y:3,element:"UD-100",orientation:0},{x:3,y:3,element:"UD-100",orientation:0},{x:0,y:6,element:"UD-100",orientation:0},{x:3,y:6,element:"UD-100",orientation:0},{x:0,y:9,element:"UD-100",orientation:0},{x:3,y:9,element:"UD-100",orientation:0}]},{index:1,tiles:[{x:0,y:0,element:"UD-014",orientation:1},{x:1,y:0,element:"UD-001",orientation:1},{x:1,y:0,element:"UD-007",orientation:1},{x:2,y:0,element:"UD-007",orientation:1},{x:3,y:0,element:"UD-034",orientation:1},{x:4,y:0,element:"UD-036",orientation:1},{x:5,y:0,element:"UD-013",orientation:2},{x:0,y:1,element:"UD-007",orientation:0},{x:2,y:1,element:"UD-016",orientation:0},{x:3,y:1,element:"UD-016",orientation:0},{x:4,y:1,element:"UD-016",orientation:0},{x:5,y:1,element:"UD-001",orientation:2},{x:5,y:2,element:"UD-014",orientation:2},{x:4,y:2,element:"UD-006",orientation:1},{x:3,y:2,element:"UD-014",orientation:1},{x:1,y:2,element:"UD-014",orientation:2},{x:0,y:3,element:"UD-002",orientation:0},{x:1,y:3,element:"UD-001",orientation:2},{x:2,y:3,element:"UD-016",orientation:0},{x:3,y:3,element:"UD-002",orientation:0},{x:5,y:3,element:"UD-036",orientation:2},{x:5,y:4,element:"UD-014",orientation:3},{x:4,y:4,element:"UD-011",orientation:3},{x:1,y:4,element:"UD-011",orientation:2},{x:4,y:6,element:"UD-011",orientation:1},{x:5,y:6,element:"UD-014",orientation:2},{x:5,y:5,element:"UD-001",orientation:2},{x:4,y:5,element:"UD-016",orientation:0},{x:3,y:5,element:"UD-016",orientation:0},{x:3,y:4,element:"UD-014",orientation:0},{x:1,y:5,element:"UD-014",orientation:3},{x:1,y:6,element:"UD-006",orientation:0},{x:0,y:6,element:"UD-014",orientation:0},{x:0,y:7,element:"UD-002",orientation:0},{x:0,y:5,element:"UD-002",orientation:0},{x:0,y:4,element:"UD-043",orientation:0},{x:0,y:2,element:"UD-060",orientation:0},{x:2,y:4,element:"UD-035",orientation:0},{x:4,y:3,element:"UD-064",orientation:1},{x:1,y:1,element:"UD-064",orientation:3},{x:2,y:5,element:"UD-016",orientation:2},{x:2,y:6,element:"UD-016",orientation:2},{x:2,y:7,element:"UD-063",orientation:0},{x:3,y:8,element:"UD-008",orientation:0},{x:3,y:6,element:"UD-014",orientation:1},{x:5,y:7,element:"UD-028",orientation:2},{x:5,y:8,element:"UD-005",orientation:2},{x:4,y:8,element:"UD-064",orientation:0},{x:4,y:7,element:"UD-016",orientation:0},{x:5,y:10,element:"UD-008",orientation:2},{x:5,y:11,element:"UD-014",orientation:3},{x:4,y:11,element:"UD-004",orientation:3},{x:0,y:11,element:"UD-014",orientation:0},{x:0,y:10,element:"UD-006",orientation:0},{x:0,y:9,element:"UD-006",orientation:0},{x:0,y:8,element:"UD-004",orientation:0},{x:1,y:11,element:"UD-001",orientation:3},{x:3,y:9,element:"UD-006",orientation:0},{x:3,y:10,element:"UD-010",orientation:0},{x:3,y:11,element:"UD-014",orientation:0},{x:2,y:11,element:"UD-001",orientation:3},{x:1,y:10,element:"UD-077",orientation:3},{x:2,y:9,element:"UD-007",orientation:0},{x:2,y:8,element:"UD-001",orientation:0},{x:1,y:7,element:"UD-002",orientation:1},{x:1,y:8,element:"UD-064",orientation:3},{x:1,y:9,element:"UD-016",orientation:0},{x:2,y:10,element:"UD-016",orientation:0},{x:4,y:10,element:"UD-016",orientation:0},{x:4,y:9,element:"UD-016",orientation:0},{x:3,y:7,element:"UD-040",orientation:0},{x:5,y:9,element:"UD-040",orientation:2},{x:2,y:2,element:"UD-065",orientation:2}]}]},{id:"806001be-07d4-4dde-b2bc-597f8b3ca32d",title:"Test",description:"",levels:[{index:0,tiles:[{x:0,y:0,element:"UD-100",orientation:0}]},{index:1,tiles:[{x:2,y:1,element:"UD-064",orientation:1},{x:1,y:2,element:"UD-064",orientation:1},{x:1,y:0,element:"UD-064",orientation:1},{x:0,y:1,element:"UD-064",orientation:1},{x:2,y:0,element:"UD-090",orientation:0},{x:1,y:1,element:"UD-064",orientation:0},{x:0,y:0,element:"UD-090",orientation:0},{x:0,y:2,element:"UD-090",orientation:0},{x:2,y:2,element:"UD-090",orientation:0}]},{index:10,tiles:[{x:0,y:0,element:"UD-094",orientation:0}]}]}])}create(){return this.authenticationService.getCurrentUserObservable().pipe((0,yo.z)(e=>{if(!e)throw new Error;const r={id:Xte(),ownerId:e.uid,title:"New Map",description:"",levels:[]};return(0,rn.D)(this.doc(r).set(r)).pipe((0,_t.U)(()=>r))}))}getDesignById(e){return this.queryById(e)}getDesigns(){return this.authenticationService.getCurrentUserObservable().pipe((0,yo.z)(e=>e?this.firestore.collection(wL,r=>r.where("ownerId","==",e.uid)).valueChanges().pipe((0,_t.U)(r=>r)):(0,mt.of)([])))}save(e){return(0,rn.D)(this.doc(e).set(e)).pipe((0,_t.U)(()=>e))}doc(e){return this.firestore.collection(wL).doc(e.id)}queryById(e){return this.firestore.collection(wL).doc(e).get().pipe((0,_t.U)(r=>r.data()))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Zz),d.LFG(qB))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Ne=(()=>((Ne=Ne||{}).LargeKey="LargeKey",Ne.LargeSlot="LargeSlot",Ne.SmallKey="SmallKey",Ne.SmallSlot="SmallSlot",Ne.Other="Other",Ne))();const n0=[{code:"colorized",name:"Colorized",color:"#ce196d",tileUnitWidth:218,tileUnitHeight:121,tileUnitDepth:31,tileUnitGridOffset:0}];let HC=(()=>{class i{getElementById(e){return this.getElements().pipe((0,_t.U)(r=>r.find(o=>o.id===e)))}getElements(){return(0,mt.of)([{id:"48a24aad-410d-43d8-aa8e-d3e75cabc2c9",code:"UD-001",name:"Wall",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"e4827c63-be6a-4eed-bef4-955a163aa704",code:"UD-002",name:"Wall Skulls",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"2d541497-a58e-4684-adf3-6d779d583c6d",code:"UD-003",name:"Wall Skulls 2",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"ace4b25e-4282-452a-a027-4da730837216",code:"UD-004",name:"Wall Window",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"afb7e654-66c1-4707-bbe6-afe04286f9e3",code:"UD-005",name:"Wall Window Broken",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"04c628fd-15aa-4e75-9893-8a21d6a7594d",code:"UD-006",name:"Wall Wood",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"371e6003-9d30-4bde-a06b-34ee07a11387",code:"UD-007",name:"Wall Chains",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"12531234-7820-42a8-8a09-80755e98b9e2",code:"UD-008",name:"Wall Broken",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"939c4244-d0e2-4bda-ad08-4252bfed6202",code:"UD-009",name:"Wall Debris",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"23a7a99b-3090-4fe9-9808-f8f2b79ed8ad",code:"UD-010",name:"Door",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:5,footprint:[1,1],tags:[]},{id:"26779b37-5f57-4510-85b2-277dca85a445",code:"UD-011",name:"Door Bar",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:5,footprint:[1,1],tags:[]},{id:"9d19e3ff-b1dc-4954-9bf9-2fb2d73106ac",code:"UD-012",name:"Corridor",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"d35caeae-0d1a-4320-87c1-c2ee030bd672",code:"UD-013",name:"Angle Skulls",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"6c0ba872-f288-4f71-8119-0cb5075155a1",code:"UD-014",name:"Angle",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"4e244705-2f7f-47c5-8f02-c6089b97783b",code:"UD-015",name:"Well",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:2,footprint:[1,1],tags:[]},{id:"ec1c791b-6441-40bf-9bdc-7b921870714c",code:"UD-016",name:"Ground Stones 1",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"31f06e65-0f1b-4adc-9575-336290ce2b81",code:"UD-017",name:"Ground Stones 2",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"633de18c-6e3d-47cf-af65-1a5e07a6f61c",code:"UD-018",name:"Ground Hole",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"e68788c0-8c8d-48ec-a98a-0b53fb969f8c",code:"UD-019",name:"Bridge",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:2,footprint:[3,1],tags:[]},{id:"71ce3c62-38c1-434b-b63c-2a21c2a69193",code:"UD-021",name:"Stair 1",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"afea16a8-e1d8-4ecd-9798-ca1b60f27737",code:"UD-023",name:"Level",flat:!1,top:Ne.LargeSlot,bottom:Ne.LargeKey,orientable:!0,height:2,footprint:[1,1],tags:[]},{id:"28123147-7636-42f4-829c-1a5c15d80988",code:"UD-026",name:"Stair Down",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"6a85bccd-32b9-4267-943d-99387b2f3250",code:"UD-027",name:"Bed 1",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:0,footprint:[2,1],tags:[]},{id:"c6850714-f12c-4ce4-851a-4555e26200f8",code:"UD-028",name:"Wall Bags",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"524f6e6a-e2d9-4433-b0ab-eb30af7096d7",code:"UD-034",name:"Wall Barrel",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"dfe070fd-543a-4329-8fbf-c3e168de1477",code:"UD-035",name:"Ground Wood",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"3aa49dd0-f406-4951-93c6-1606710a0621",code:"UD-036",name:"Torch Basic",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"80fb8b51-c15d-44b4-abe2-f418d7ebe959",code:"UD-037",name:"Torch Lit",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"a9b11b84-1a9e-41d9-b936-430f4cc58919",code:"UD-038",name:"Torch Extinguished",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"040a3255-ff7a-4215-a84b-6cb612c5fe9e",code:"UD-039",name:"Brazier",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"f27cd0d1-9ccc-49ed-b3ba-549257334ca6",code:"UD-040",name:"Wall Wood Ground",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"d846d1e6-4c86-49a1-b1cc-3cc4cee2ebda",code:"UD-041",name:"Fountain Empty",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"dd6bcca4-8c84-48a5-8dad-3b3d2603a7a3",code:"UD-042",name:"Fountain Crystal",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"fe6748c1-716f-4865-a2be-7c86bc7e75fc",code:"UD-043",name:"Fountain Toxic Liquid",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"9ef36f22-9838-4c60-8ed3-0f44a61ee8eb",code:"UD-044",name:"Fountain Treasure",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"cd384197-667a-4a0b-b137-6a933bee42cc",code:"UD-060",name:"Torture Cage",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:5,footprint:[1,1],tags:[]},{id:"17609433-8834-4f8f-a259-9db824b64a72",code:"UD-063",name:"Wall Wooden Trap",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"cd384197-667a-4a0b-b137-6a933bee42cc",code:"UD-064",name:"Ground Grid",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"cd384197-667a-4a0b-b137-6a933bee42cc",code:"UD-065",name:"Ground Toxic Poison",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"78534c3c-27da-4a51-958d-e28a1f5c4705",code:"UD-067",name:"Hole Trap",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"8cf5e94a-8224-4d79-9d71-5f1905fff266",code:"UD-077",name:"Well Water",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:1,footprint:[1,1],tags:[]},{id:"8d218ca1-8df4-4bef-81f8-f284f7120c5e",code:"UD-080",name:"Autel",flat:!1,top:Ne.Other,bottom:Ne.LargeKey,orientable:!0,height:2,footprint:[1,2],tags:["altar"]},{id:"f4b134a7-1520-4904-9a3b-a403dc960f10",code:"UD-090",name:"Column Square Key",flat:!1,top:Ne.SmallKey,bottom:Ne.LargeKey,orientable:!0,height:8,footprint:[1,1],tags:[]},{id:"9b8b3d92-08c0-494b-aaaa-f797da276d84",code:"UD-092",name:"Level Key",flat:!1,top:Ne.SmallKey,bottom:Ne.LargeKey,orientable:!0,height:2,footprint:[1,1],tags:[]},{id:"fef5cb38-f0d7-40cf-9038-a27eeb45c3b7",code:"UD-093",name:"Key",flat:!1,top:Ne.SmallKey,bottom:Ne.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"7532146b-87c6-4f47-8247-176fafb28c8a",code:"UD-094",name:"Level Grid 3X3",flat:!1,top:Ne.LargeSlot,bottom:Ne.SmallSlot,orientable:!0,height:2,footprint:[3,3],tags:[]},{id:"86d6a646-5f78-435f-8df5-f1b5c2567918",code:"UD-095",name:"Level Grid 2X2",flat:!1,top:Ne.LargeSlot,bottom:Ne.SmallSlot,orientable:!0,height:2,footprint:[2,2],tags:[]},{id:"9daeb116-68ae-4bc6-842f-873eb0c1fd87",code:"UD-096",name:"Level Grid 2X3",flat:!1,top:Ne.LargeSlot,bottom:Ne.SmallSlot,orientable:!0,height:2,footprint:[2,3],tags:[]},{id:"ce1540a0-61a6-4572-828d-8840266bc008",code:"UD-097",name:"Level Grid 3X6",flat:!1,top:Ne.LargeSlot,bottom:Ne.SmallSlot,orientable:!0,height:2,footprint:[6,3],tags:[]},{id:"95177f16-fc56-40d9-b813-d54d9ffd9680",code:"UD-100",name:"Grid 3X3",flat:!0,top:Ne.LargeSlot,bottom:Ne.Other,orientable:!0,height:0,footprint:[3,3],tags:[]}])}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const{abs:zC,cos:Kh,sin:r0,acos:Jte,atan2:jC,sqrt:pp,pow:Sl}=Math;function $C(i){return i<0?-Sl(-i,1/3):Sl(i,1/3)}const Xz=Math.PI,wk=2*Xz,gp=Xz/2,xL=Number.MAX_SAFE_INTEGER||9007199254740991,EL=Number.MIN_SAFE_INTEGER||-9007199254740991,tne={x:0,y:0,z:0},et={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(i,n){const e=n(i);let r=e.x*e.x+e.y*e.y;return typeof e.z<"u"&&(r+=e.z*e.z),pp(r)},compute:function(i,n,e){if(0===i)return n[0].t=0,n[0];const r=n.length-1;if(1===i)return n[r].t=1,n[r];const o=1-i;let s=n;if(0===r)return n[0].t=i,n[0];if(1===r){const h={x:o*s[0].x+i*s[1].x,y:o*s[0].y+i*s[1].y,t:i};return e&&(h.z=o*s[0].z+i*s[1].z),h}if(r<4){let y,w,I,h=o*o,p=i*i,A=0;2===r?(s=[s[0],s[1],s[2],tne],y=h,w=o*i*2,I=p):3===r&&(y=h*o,w=h*i*3,I=o*p*3,A=i*p);const P={x:y*s[0].x+w*s[1].x+I*s[2].x+A*s[3].x,y:y*s[0].y+w*s[1].y+I*s[2].y+A*s[3].y,t:i};return e&&(P.z=y*s[0].z+w*s[1].z+I*s[2].z+A*s[3].z),P}const c=JSON.parse(JSON.stringify(n));for(;c.length>1;){for(let h=0;h<c.length-1;h++)c[h]={x:c[h].x+(c[h+1].x-c[h].x)*i,y:c[h].y+(c[h+1].y-c[h].y)*i},typeof c[h].z<"u"&&(c[h]=c[h].z+(c[h+1].z-c[h].z)*i);c.splice(c.length-1,1)}return c[0].t=i,c[0]},computeWithRatios:function(i,n,e,r){const o=1-i;let I,h=e[0],p=e[1],y=e[2],w=e[3];return h*=o,p*=i,2===n.length?(I=h+p,{x:(h*n[0].x+p*n[1].x)/I,y:(h*n[0].y+p*n[1].y)/I,z:!!r&&(h*n[0].z+p*n[1].z)/I,t:i}):(h*=o,p*=2*o,y*=i*i,3===n.length?(I=h+p+y,{x:(h*n[0].x+p*n[1].x+y*n[2].x)/I,y:(h*n[0].y+p*n[1].y+y*n[2].y)/I,z:!!r&&(h*n[0].z+p*n[1].z+y*n[2].z)/I,t:i}):(h*=o,p*=1.5*o,y*=3*o,w*=i*i*i,4===n.length?(I=h+p+y+w,{x:(h*n[0].x+p*n[1].x+y*n[2].x+w*n[3].x)/I,y:(h*n[0].y+p*n[1].y+y*n[2].y+w*n[3].y)/I,z:!!r&&(h*n[0].z+p*n[1].z+y*n[2].z+w*n[3].z)/I,t:i}):void 0))},derive:function(i,n){const e=[];for(let r=i,o=r.length,s=o-1;o>1;o--,s--){const c=[];for(let p,h=0;h<s;h++)p={x:s*(r[h+1].x-r[h].x),y:s*(r[h+1].y-r[h].y)},n&&(p.z=s*(r[h+1].z-r[h].z)),c.push(p);e.push(c),r=c}return e},between:function(i,n,e){return n<=i&&i<=e||et.approximately(i,n)||et.approximately(i,e)},approximately:function(i,n,e){return zC(i-n)<=(e||1e-6)},length:function(i){const e=et.Tvalues.length;let r=0;for(let s,o=0;o<e;o++)s=.5*et.Tvalues[o]+.5,r+=et.Cvalues[o]*et.arcfn(s,i);return.5*r},map:function(i,n,e,r,o){return r+(i-n)/(e-n)*(o-r)},lerp:function(i,n,e){const r={x:n.x+i*(e.x-n.x),y:n.y+i*(e.y-n.y)};return void 0!==n.z&&void 0!==e.z&&(r.z=n.z+i*(e.z-n.z)),r},pointToString:function(i){let n=i.x+"/"+i.y;return typeof i.z<"u"&&(n+="/"+i.z),n},pointsToString:function(i){return"["+i.map(et.pointToString).join(", ")+"]"},copy:function(i){return JSON.parse(JSON.stringify(i))},angle:function(i,n,e){const r=n.x-i.x,o=n.y-i.y,s=e.x-i.x,c=e.y-i.y;return jC(r*c-o*s,r*s+o*c)},round:function(i,n){const e=""+i,r=e.indexOf(".");return parseFloat(e.substring(0,r+1+n))},dist:function(i,n){const e=i.x-n.x,r=i.y-n.y;return pp(e*e+r*r)},closest:function(i,n){let r,o,e=Sl(2,63);return i.forEach(function(s,c){o=et.dist(n,s),o<e&&(e=o,r=c)}),{mdist:e,mpos:r}},abcratio:function(i,n){if(2!==n&&3!==n)return!1;if(typeof i>"u")i=.5;else if(0===i||1===i)return i;const e=Sl(i,n)+Sl(1-i,n);return zC((e-1)/e)},projectionratio:function(i,n){if(2!==n&&3!==n)return!1;if(typeof i>"u")i=.5;else if(0===i||1===i)return i;const e=Sl(1-i,n);return e/(Sl(i,n)+e)},lli8:function(i,n,e,r,o,s,c,h){const w=(i-e)*(s-h)-(n-r)*(o-c);return 0!=w&&{x:((i*r-n*e)*(o-c)-(i-e)*(o*h-s*c))/w,y:((i*r-n*e)*(s-h)-(n-r)*(o*h-s*c))/w}},lli4:function(i,n,e,r){return et.lli8(i.x,i.y,n.x,n.y,e.x,e.y,r.x,r.y)},lli:function(i,n){return et.lli4(i,i.c,n,n.c)},makeline:function(i,n){return new ir(i.x,i.y,(i.x+n.x)/2,(i.y+n.y)/2,n.x,n.y)},findbbox:function(i){let n=xL,e=xL,r=EL,o=EL;return i.forEach(function(s){const c=s.bbox();n>c.x.min&&(n=c.x.min),e>c.y.min&&(e=c.y.min),r<c.x.max&&(r=c.x.max),o<c.y.max&&(o=c.y.max)}),{x:{min:n,mid:(n+r)/2,max:r,size:r-n},y:{min:e,mid:(e+o)/2,max:o,size:o-e}}},shapeintersections:function(i,n,e,r,o){if(!et.bboxoverlap(n,r))return[];const s=[],h=[e.startcap,e.forward,e.back,e.endcap];return[i.startcap,i.forward,i.back,i.endcap].forEach(function(p){p.virtual||h.forEach(function(y){if(y.virtual)return;const w=p.intersects(y,o);w.length>0&&(w.c1=p,w.c2=y,w.s1=i,w.s2=e,s.push(w))})}),s},makeshape:function(i,n,e){const o=i.points.length,s=et.makeline(n.points[n.points.length-1],i.points[0]),c=et.makeline(i.points[o-1],n.points[0]),h={startcap:s,forward:i,back:n,endcap:c,bbox:et.findbbox([s,i,n,c]),intersections:function(p){return et.shapeintersections(h,h.bbox,p,p.bbox,e)}};return h},getminmax:function(i,n,e){if(!e)return{min:0,max:0};let s,c,r=xL,o=EL;-1===e.indexOf(0)&&(e=[0].concat(e)),-1===e.indexOf(1)&&e.push(1);for(let h=0,p=e.length;h<p;h++)s=e[h],c=i.get(s),c[n]<r&&(r=c[n]),c[n]>o&&(o=c[n]);return{min:r,mid:(r+o)/2,max:o,size:o-r}},align:function(i,n){const e=n.p1.x,r=n.p1.y,o=-jC(n.p2.y-r,n.p2.x-e);return i.map(function(c){return{x:(c.x-e)*Kh(o)-(c.y-r)*r0(o),y:(c.x-e)*r0(o)+(c.y-r)*Kh(o)}})},roots:function(i,n){const e=i.length-1,r=et.align(i,n=n||{p1:{x:0,y:0},p2:{x:1,y:0}}),o=function(Xe){return 0<=Xe&&Xe<=1};if(2===e){const Xe=r[0].y,It=r[1].y,ln=r[2].y,li=Xe-2*It+ln;if(0!==li){const za=-pp(It*It-Xe*ln),Oo=-Xe+It;return[-(za+Oo)/li,-(-za+Oo)/li].filter(o)}return It!==ln&&0===li?[(2*It-ln)/(2*It-2*ln)].filter(o):[]}const s=r[0].y,c=r[1].y,h=r[2].y;let y=3*c-s-3*h+r[3].y,w=3*s-6*c+3*h,I=-3*s+3*c,A=s;if(et.approximately(y,0)){if(et.approximately(w,0))return et.approximately(I,0)?[]:[-A/I].filter(o);const Xe=pp(I*I-4*w*A),It=2*w;return[(Xe-I)/It,(-I-Xe)/It].filter(o)}w/=y,I/=y,A/=y;const P=(3*I-w*w)/3,U=P/3,G=(2*w*w*w-9*w*I+27*A)/27,Q=G/2,me=Q*Q+U*U*U;let Ce,fe,Te,Fe,qe;if(me<0){const Xe=-P/3,ln=pp(Xe*Xe*Xe),li=-G/(2*ln),Oo=Jte(li<-1?-1:li>1?1:li),Xd=2*$C(ln);return Te=Xd*Kh(Oo/3)-w/3,Fe=Xd*Kh((Oo+wk)/3)-w/3,qe=Xd*Kh((Oo+2*wk)/3)-w/3,[Te,Fe,qe].filter(o)}if(0===me)return Ce=Q<0?$C(-Q):-$C(Q),Te=2*Ce-w/3,Fe=-Ce-w/3,[Te,Fe].filter(o);{const Xe=pp(me);return Ce=$C(-Q+Xe),fe=$C(Q+Xe),[Ce-fe-w/3].filter(o)}},droots:function(i){if(3===i.length){const n=i[0],e=i[1],r=i[2],o=n-2*e+r;if(0!==o){const s=-pp(e*e-n*r),c=-n+e;return[-(s+c)/o,-(-s+c)/o]}return e!==r&&0===o?[(2*e-r)/(2*(e-r))]:[]}if(2===i.length){const n=i[0],e=i[1];return n!==e?[n/(n-e)]:[]}return[]},curvature:function(i,n,e,r,o){let s,c,h,p,y=0,w=0;const I=et.compute(i,n),A=et.compute(i,e),P=I.x*I.x+I.y*I.y;if(r?(s=pp(Sl(I.y*A.z-A.y*I.z,2)+Sl(I.z*A.x-A.z*I.x,2)+Sl(I.x*A.y-A.x*I.y,2)),c=Sl(P+I.z*I.z,1.5)):(s=I.x*A.y-I.y*A.x,c=Sl(P,1.5)),0===s||0===c)return{k:0,r:0};if(y=s/c,w=c/s,!o){const U=et.curvature(i-.001,n,e,r,!0).k,G=et.curvature(i+.001,n,e,r,!0).k;p=(G-y+(y-U))/2,h=(zC(G-y)+zC(y-U))/2}return{k:y,r:w,dk:p,adk:h}},inflections:function(i){if(i.length<4)return[];const n=et.align(i,{p1:i[0],p2:i.slice(-1)[0]}),e=n[2].x*n[1].y,r=n[3].x*n[1].y,o=n[1].x*n[2].y,c=18*(-3*e+2*r+3*o-n[3].x*n[2].y),h=18*(3*e-r-3*o),p=18*(o-e);if(et.approximately(c,0)){if(!et.approximately(h,0)){let A=-p/h;if(0<=A&&A<=1)return[A]}return[]}const y=2*c;if(et.approximately(y,0))return[];const w=h*h-4*c*p;if(w<0)return[];const I=Math.sqrt(w);return[(I-h)/y,-(h+I)/y].filter(function(A){return 0<=A&&A<=1})},bboxoverlap:function(i,n){const e=["x","y"],r=e.length;for(let s,c,h,p,o=0;o<r;o++)if(s=e[o],c=i[s].mid,h=n[s].mid,p=(i[s].size+n[s].size)/2,zC(c-h)>=p)return!1;return!0},expandbox:function(i,n){n.x.min<i.x.min&&(i.x.min=n.x.min),n.y.min<i.y.min&&(i.y.min=n.y.min),n.z&&n.z.min<i.z.min&&(i.z.min=n.z.min),n.x.max>i.x.max&&(i.x.max=n.x.max),n.y.max>i.y.max&&(i.y.max=n.y.max),n.z&&n.z.max>i.z.max&&(i.z.max=n.z.max),i.x.mid=(i.x.min+i.x.max)/2,i.y.mid=(i.y.min+i.y.max)/2,i.z&&(i.z.mid=(i.z.min+i.z.max)/2),i.x.size=i.x.max-i.x.min,i.y.size=i.y.max-i.y.min,i.z&&(i.z.size=i.z.max-i.z.min)},pairiteration:function(i,n,e){const r=i.bbox(),o=n.bbox(),s=1e5,c=e||.5;if(r.x.size+r.y.size<c&&o.x.size+o.y.size<c)return[(s*(i._t1+i._t2)/2|0)/s+"/"+(s*(n._t1+n._t2)/2|0)/s];let h=i.split(.5),p=n.split(.5),y=[{left:h.left,right:p.left},{left:h.left,right:p.right},{left:h.right,right:p.right},{left:h.right,right:p.left}];y=y.filter(function(I){return et.bboxoverlap(I.left.bbox(),I.right.bbox())});let w=[];return 0===y.length||(y.forEach(function(I){w=w.concat(et.pairiteration(I.left,I.right,c))}),w=w.filter(function(I,A){return w.indexOf(I)===A})),w},getccenter:function(i,n,e){const r=n.x-i.x,o=n.y-i.y,s=e.x-n.x,c=e.y-n.y,h=r*Kh(gp)-o*r0(gp),p=r*r0(gp)+o*Kh(gp),y=s*Kh(gp)-c*r0(gp),w=s*r0(gp)+c*Kh(gp),I=(i.x+n.x)/2,A=(i.y+n.y)/2,P=(n.x+e.x)/2,U=(n.y+e.y)/2,fe=et.lli8(I,A,I+h,A+p,P,U,P+y,U+w),Te=et.dist(fe,i);let It,Fe=jC(i.y-fe.y,i.x-fe.x),qe=jC(n.y-fe.y,n.x-fe.x),Xe=jC(e.y-fe.y,e.x-fe.x);return Fe<Xe?((Fe>qe||qe>Xe)&&(Fe+=wk),Fe>Xe&&(It=Xe,Xe=Fe,Fe=It)):Xe<qe&&qe<Fe?(It=Xe,Xe=Fe,Fe=It):Xe+=wk,fe.s=Fe,fe.e=Xe,fe.r=Te,fe},numberSort:function(i,n){return i-n}};class GC{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return et.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,e){return n+e})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var e=n[0].bbox(),r=1;r<n.length;r++)et.expandbox(e,n[r].bbox());return e}offset(n){const e=[];return this.curves.forEach(function(r){e.push(...r.offset(n))}),new GC(e)}}const{abs:WC,min:Jz,max:ej,cos:nne,sin:ine,acos:rne,sqrt:qC}=Math,one=Math.PI;class ir{constructor(n){let e=n&&n.forEach?n:Array.from(arguments).slice(),r=!1;if("object"==typeof e[0]){r=e.length;const P=[];e.forEach(function(U){["x","y","z"].forEach(function(G){typeof U[G]<"u"&&P.push(U[G])})}),e=P}let o=!1;const s=e.length;if(r){if(r>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const c=this._3d=!o&&(9===s||12===s)||n&&n[0]&&typeof n[0].z<"u",h=this.points=[];for(let P=0,U=c?3:2;P<s;P+=U){var p={x:e[P],y:e[P+1]};c&&(p.z=e[P+2]),h.push(p)}const y=this.order=h.length-1,w=this.dims=["x","y"];c&&w.push("z"),this.dimlen=w.length;const I=et.align(h,{p1:h[0],p2:h[y]}),A=et.dist(h[0],h[y]);this._linear=I.reduce((P,U)=>P+WC(U.y),0)<A/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,e,r,o){if(typeof o>"u"&&(o=.5),0===o)return new ir(e,e,r);if(1===o)return new ir(n,e,e);const s=ir.getABC(2,n,e,r,o);return new ir(n,s.A,r)}static cubicFromPoints(n,e,r,o,s){typeof o>"u"&&(o=.5);const c=ir.getABC(3,n,e,r,o);typeof s>"u"&&(s=et.dist(e,c.C));const h=s*(1-o)/o,p=et.dist(n,r),y=(r.x-n.x)/p,w=(r.y-n.y)/p,me=c.A;return new ir(n,{x:n.x+(me.x+(e.x-s*y-me.x)/(1-o)-n.x)/o,y:n.y+(me.y+(e.y-s*w-me.y)/(1-o)-n.y)/o},{x:r.x+(me.x+(e.x+h*y-me.x)/o-r.x)/(1-o),y:r.y+(me.y+(e.y+h*w-me.y)/o-r.y)/(1-o)},r)}static getUtils(){return et}getUtils(){return ir.getUtils()}static get PolyBezier(){return GC}valueOf(){return this.toString()}toString(){return et.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,o=["M",n[0].x,n[0].y,2===this.order?"Q":"C"];for(let s=1,c=n.length;s<c;s++)o.push(n[s].x),o.push(n[s].y);return o.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,e){return""+e+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=et.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,e=et.angle(n[0],n[this.order],n[1]);this.clockwise=e>0}length(){return et.length(this.derivative.bind(this))}static getABC(n=2,e,r,o,s=.5){const c=et.projectionratio(s,n),h=1-c,p={x:c*e.x+h*o.x,y:c*e.y+h*o.y},y=et.abcratio(s,n);return{A:{x:r.x+(r.x-p.x)/y,y:r.y+(r.y-p.y)/y},B:r,C:p,S:e,E:o}}getABC(n,e){return e=e||this.get(n),ir.getABC(this.order,this.points[0],e,this.points[this.order],n)}getLUT(n){if(this.verify(),this._lut.length===(n=n||100)+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r,o,e=0;e<n;e++)o=e/(n-1),r=this.compute(o),r.t=o,this._lut.push(r);return this._lut}on(n,e){e=e||5;const r=this.getLUT(),o=[];for(let c,s=0,h=0;s<r.length;s++)c=r[s],et.dist(c,n)<e&&(o.push(c),h+=s/r.length);return!!o.length&&(t/=o.length)}project(n){const e=this.getLUT(),r=e.length-1,o=et.closest(e,n),s=o.mpos,h=(s+1)/r,p=.1/r;let A,y=o.mdist,w=(s-1)/r,I=w;y+=1;for(let P;w<h+p;w+=p)A=this.compute(w),P=et.dist(n,A),P<y&&(y=P,I=w);return I=I<0?0:I>1?1:I,A=this.compute(I),A.t=I,A.d=y,A}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?et.computeWithRatios(n,this.points,this.ratios,this._3d):et.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,e=[n[0]],r=n.length;for(let s,c,o=1;o<r;o++)s=n[o],c=n[o-1],e[o]={x:(r-o)/r*s.x+o/r*c.x,y:(r-o)/r*s.y+o/r*c.y};return e[r]=n[r-1],new ir(e)}derivative(n){return et.compute(n,this.dpoints[0],this._3d)}dderivative(n){return et.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new ir(et.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return et.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return et.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const e=this.derivative(n),r=qC(e.x*e.x+e.y*e.y);return{t:n,x:-e.y/r,y:e.x/r}}__normal3(n){const e=this.derivative(n),r=this.derivative(n+.01),o=qC(e.x*e.x+e.y*e.y+e.z*e.z),s=qC(r.x*r.x+r.y*r.y+r.z*r.z);e.x/=o,e.y/=o,e.z/=o,r.x/=s,r.y/=s,r.z/=s;const c={x:r.y*e.z-r.z*e.y,y:r.z*e.x-r.x*e.z,z:r.x*e.y-r.y*e.x},h=qC(c.x*c.x+c.y*c.y+c.z*c.z);c.x/=h,c.y/=h,c.z/=h;const p=[c.x*c.x,c.x*c.y-c.z,c.x*c.z+c.y,c.x*c.y+c.z,c.y*c.y,c.y*c.z-c.x,c.x*c.z-c.y,c.y*c.z+c.x,c.z*c.z];return{t:n,x:p[0]*e.x+p[1]*e.y+p[2]*e.z,y:p[3]*e.x+p[4]*e.y+p[5]*e.z,z:p[6]*e.x+p[7]*e.y+p[8]*e.z}}hull(n){let e=this.points,r=[],o=[],s=0;for(o[s++]=e[0],o[s++]=e[1],o[s++]=e[2],3===this.order&&(o[s++]=e[3]);e.length>1;){r=[];for(let h,c=0,p=e.length-1;c<p;c++)h=et.lerp(n,e[c],e[c+1]),o[s++]=h,r.push(h);e=r}return o}split(n,e){if(0===n&&e)return this.split(e).left;if(1===e)return this.split(n).right;const r=this.hull(n),o={left:new ir(2===this.order?[r[0],r[3],r[5]]:[r[0],r[4],r[7],r[9]]),right:new ir(2===this.order?[r[5],r[4],r[2]]:[r[9],r[8],r[6],r[3]]),span:r};return o.left._t1=et.map(0,0,1,this._t1,this._t2),o.left._t2=et.map(n,0,1,this._t1,this._t2),o.right._t1=et.map(n,0,1,this._t1,this._t2),o.right._t2=et.map(1,0,1,this._t1,this._t2),e?(e=et.map(e,n,1,0,1),o.right.split(e).left):o}extrema(){const n={};let e=[];return this.dims.forEach(function(r){let o=function(c){return c[r]},s=this.dpoints[0].map(o);n[r]=et.droots(s),3===this.order&&(s=this.dpoints[1].map(o),n[r]=n[r].concat(et.droots(s))),n[r]=n[r].filter(function(c){return c>=0&&c<=1}),e=e.concat(n[r].sort(et.numberSort))}.bind(this)),n.values=e.sort(et.numberSort).filter(function(r,o){return e.indexOf(r)===o}),n}bbox(){const n=this.extrema(),e={};return this.dims.forEach(function(r){e[r]=et.getminmax(this,r,n[r])}.bind(this)),e}overlaps(n){const e=this.bbox(),r=n.bbox();return et.bboxoverlap(e,r)}offset(n,e){if(typeof e<"u"){const r=this.get(n),o=this.normal(n),s={c:r,n:o,x:r.x+o.x*e,y:r.y+o.y*e};return this._3d&&(s.z=r.z+o.z*e),s}if(this._linear){const r=this.normal(0),o=this.points.map(function(s){const c={x:s.x+n*r.x,y:s.y+n*r.y};return s.z&&r.z&&(c.z=s.z+n*r.z),c});return[new ir(o)]}return this.reduce().map(function(r){return r._linear?r.offset(n)[0]:r.scale(n)})}simple(){if(3===this.order){const o=et.angle(this.points[0],this.points[3],this.points[1]),s=et.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&s<0||o<0&&s>0)return!1}const n=this.normal(0),e=this.normal(1);let r=n.x*e.x+n.y*e.y;return this._3d&&(r+=n.z*e.z),WC(rne(r))<one/3}reduce(){let n,s,e=0,r=0,o=.01,c=[],h=[],p=this.extrema().values;for(-1===p.indexOf(0)&&(p=[0].concat(p)),-1===p.indexOf(1)&&p.push(1),e=p[0],n=1;n<p.length;n++)r=p[n],s=this.split(e,r),s._t1=e,s._t2=r,c.push(s),e=r;return c.forEach(function(y){for(e=0,r=0;r<=1;)for(r=e+o;r<=1+o;r+=o)if(s=y.split(e,r),!s.simple()){if(r-=o,WC(e-r)<o)return[];s=y.split(e,r),s._t1=et.map(e,0,1,y._t1,y._t2),s._t2=et.map(r,0,1,y._t1,y._t2),h.push(s),e=r;break}e<1&&(s=y.split(e,1),s._t1=et.map(e,0,1,y._t1,y._t2),s._t2=y._t2,h.push(s))}),h}translate(n,e,r){r="number"==typeof r?r:e;const o=this.order;let s=this.points.map((c,h)=>(1-h/o)*e+h/o*r);return new ir(this.points.map((c,h)=>({x:c.x+n.x*s[h],y:c.y+n.y*s[h]})))}scale(n){const e=this.order;let r=!1;if("function"==typeof n&&(r=n),r&&2===e)return this.raise().scale(r);const o=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):n,r?r(1):n);const c=r?r(0):n,h=r?r(1):n,p=[this.offset(0,10),this.offset(1,10)],y=[],w=et.lli4(p[0],p[0].c,p[1],p[1].c);if(!w)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(I){const A=y[I*e]=et.copy(s[I*e]);A.x+=(I?h:c)*p[I].n.x,A.y+=(I?h:c)*p[I].n.y}),r?([0,1].forEach(function(I){if(2!==e||!I){var A=s[I+1],P={x:A.x-w.x,y:A.y-w.y},U=r?r((I+1)/e):n;r&&!o&&(U=-U);var G=qC(P.x*P.x+P.y*P.y);P.x/=G,P.y/=G,y[I+1]={x:A.x+U*P.x,y:A.y+U*P.y}}}),new ir(y)):([0,1].forEach(I=>{if(2===e&&I)return;const A=y[I*e],P=this.derivative(I);y[I+1]=et.lli4(A,{x:A.x+P.x,y:A.y+P.y},w,s[I+1])}),new ir(y))}outline(n,e,r,o){if(e=void 0===e?n:e,this._linear){const Fe=this.normal(0),qe=this.points[0],Xe=this.points[this.points.length-1];let It,ln,li;void 0===r&&(r=n,o=e),It={x:qe.x+Fe.x*n,y:qe.y+Fe.y*n},li={x:Xe.x+Fe.x*r,y:Xe.y+Fe.y*r},ln={x:(It.x+li.x)/2,y:(It.y+li.y)/2};const za=[It,ln,li];It={x:qe.x-Fe.x*e,y:qe.y-Fe.y*e},li={x:Xe.x-Fe.x*o,y:Xe.y-Fe.y*o},ln={x:(It.x+li.x)/2,y:(It.y+li.y)/2};const Oo=[li,ln,It],fs=et.makeline(Oo[2],za[0]),Xd=et.makeline(za[2],Oo[0]),Ck=[fs,new ir(za),Xd,new ir(Oo)];return new GC(Ck)}const s=this.reduce(),c=s.length,h=[];let y,p=[],w=0,I=this.length();const A=typeof r<"u"&&typeof o<"u";function P(Fe,qe,Xe,It,ln){return function(li){const fs=qe-Fe;return et.map(li,0,1,Fe+It/Xe*fs,Fe+(It+ln)/Xe*fs)}}s.forEach(function(Fe){const qe=Fe.length();A?(h.push(Fe.scale(P(n,r,I,w,qe))),p.push(Fe.scale(P(-e,-o,I,w,qe)))):(h.push(Fe.scale(n)),p.push(Fe.scale(-e))),w+=qe}),p=p.map(function(Fe){return y=Fe.points,Fe.points=y[3]?[y[3],y[2],y[1],y[0]]:[y[2],y[1],y[0]],Fe}).reverse();const G=h[c-1].points[h[c-1].points.length-1],me=p[0].points[0],Ce=et.makeline(p[c-1].points[p[c-1].points.length-1],h[0].points[0]),fe=et.makeline(G,me),Te=[Ce].concat(h).concat([fe]).concat(p);return new GC(Te)}outlineshapes(n,e,r){const o=this.outline(n,e=e||n).curves,s=[];for(let c=1,h=o.length;c<h/2;c++){const p=et.makeshape(o[c],o[h-c],r);p.startcap.virtual=c>1,p.endcap.virtual=c<h/2-1,s.push(p)}return s}intersects(n,e){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof ir&&(n=n.reduce()),this.curveintersects(this.reduce(),n,e)):this.selfintersects(e)}lineIntersects(n){const e=Jz(n.p1.x,n.p2.x),r=Jz(n.p1.y,n.p2.y),o=ej(n.p1.x,n.p2.x),s=ej(n.p1.y,n.p2.y);return et.roots(this.points,n).filter(c=>{var h=this.get(c);return et.between(h.x,e,o)&&et.between(h.y,r,s)})}selfintersects(n){const e=this.reduce(),r=e.length-2,o=[];for(let c,h,p,s=0;s<r;s++)h=e.slice(s,s+1),p=e.slice(s+2),c=this.curveintersects(h,p,n),o.push(...c);return o}curveintersects(n,e,r){const o=[];n.forEach(function(c){e.forEach(function(h){c.overlaps(h)&&o.push({left:c,right:h})})});let s=[];return o.forEach(function(c){const h=et.pairiteration(c.left,c.right,r);h.length>0&&(s=s.concat(h))}),s}arcs(n){return this._iterate(n=n||.5,[])}_error(n,e,r,o){const s=(o-r)/4,c=this.get(r+s),h=this.get(o-s),p=et.dist(n,e),y=et.dist(n,c),w=et.dist(n,h);return WC(y-p)+WC(w-p)}_iterate(n,e){let s,r=0,o=1;do{s=0,o=1;let h,p,y,w,P,c=this.get(r),I=!1,A=!1,U=o,G=1,Q=0;do{if(A=I,w=y,U=(r+o)/2,Q++,h=this.get(U),p=this.get(o),y=et.getccenter(c,h,p),y.interval={start:r,end:o},I=this._error(y,c,r,o)<=n,P=A&&!I,P||(G=o),I){if(o>=1){if(y.interval.end=G=1,w=y,o>1){let Ce={x:y.x+y.r*nne(y.e),y:y.y+y.r*ine(y.e)};y.e+=et.angle({x:y.x,y:y.y},Ce,this.get(1))}break}o+=(o-r)/2}else o=U}while(!P&&s++<100);if(s>=100)break;w=w||y,e.push(w),r=G}while(o<1);return e}}const{cos:tj,sin:nj,round:ij,PI:sne}=Math;let rj=(()=>{class i{bounds({x:e,y:r},[o,s],c){switch(c%4){case 0:return{x1:e,y1:r,x2:e+o,y2:r+s};case 1:return{x1:e-s+1,y1:r,x2:e+1,y2:r+o};case 2:return{x1:e-o+1,y1:r-s+1,x2:e+1,y2:r+1};case 3:return{x1:e,y1:r-o+1,x2:e+s,y2:r+1};default:throw new Error}}clamp(e,r,o){return e<r?r:e>o?o:e}overlap(e,r){return e.x1<r.x2&&e.y1<r.y2&&r.x1<e.x2&&r.y1<e.y2}rotate({x:e,y:r},o){if(0===o)return{x:e,y:r};const s=o*sne/2;return{x:ij(e*tj(s)-r*nj(s)),y:ij(e*nj(s)+r*tj(s))}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xk=(()=>{class i{transform(e,r,o){return`assets/sprites/${r.code}/${e}_${o}.png`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=d.Yjl({name:"assetUrl",type:i,pure:!0}),i})(),ane=(()=>{class i{transform(e){return`translate(${e[0]}, ${e[1]})`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=d.Yjl({name:"cssTranslate",type:i,pure:!0}),i})();const lne=["svg"];function cne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d._UZ(1,"rect",5),d.BQk()),2&i){const e=d.oxw(4);d.xp6(1),d.uIk("height",e.cellSize)("width",e.cellSize)("x",0)("y",0)}}const _p=function(i,n){return[i,n]};function dne(i,n){if(1&i&&(d.O4$(),d.TgZ(0,"g"),d.ALo(1,"cssTranslate"),d._UZ(2,"image"),d.YNc(3,cne,2,4,"ng-container",3),d.qZA()),2&i){const e=n.$implicit,r=d.oxw().$implicit,o=d.oxw(2);d.uIk("transform",d.lcZ(1,5,d.WLB(7,_p,e.x,e.y))),d.xp6(2),d.uIk("height",o.cellSize)("href","assets/sprites/"+o.spriteSet.code+"/"+r.asset+".png")("width",o.cellSize),d.xp6(1),d.Q6J("ngIf",o.debug)}}function une(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.TgZ(1,"g"),d.ALo(2,"cssTranslate"),d.YNc(3,dne,4,10,"g",3),d.qZA(),d.BQk()),2&i){const e=n.$implicit,r=d.oxw(2);d.xp6(1),d.uIk("transform",d.lcZ(2,2,d.WLB(4,_p,r.svgWidth/2-r.zoom*r.focus.x+e.x,r.svgHeight/2-r.zoom*r.focus.y+e.y))),d.xp6(2),d.Q6J("ngIf",r.getSpriteOffset(r.elementsBycode[e.tile.element],e.tile.orientation+r.orientation))}}function hne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d._UZ(1,"rect",6),d.BQk()),2&i){const e=n.$implicit;d.xp6(1),d.uIk("height",e.y2-e.y1)("width",e.x2-e.x1)("x",e.x1)("y",e.y1)}}function fne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,hne,2,4,"ng-container",3),d.BQk()),2&i){const e=n.$implicit,r=d.oxw(2).$implicit,o=d.oxw(2);d.xp6(1),d.Q6J("ngIf",o.projectBox(e,r.layer))}}function mne(i,n){if(1&i&&(d.O4$(),d.TgZ(0,"g"),d.ALo(1,"cssTranslate"),d.YNc(2,fne,2,1,"ng-container",3),d.qZA()),2&i){const e=d.oxw().$implicit,r=d.oxw(2);d.uIk("transform",d.lcZ(1,2,d.WLB(4,_p,r.svgWidth/2-r.zoom*r.focus.x,r.svgHeight/2-r.zoom*r.focus.y))),d.xp6(2),d.Q6J("ngIf",r.utilService.bounds(e.tile,r.elementsBycode[e.tile.element].footprint,e.tile.orientation))}}function pne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.TgZ(1,"g"),d.ALo(2,"cssTranslate"),d._UZ(3,"circle",7),d.TgZ(4,"text",8),d._uU(5),d.qZA()(),d.BQk()),2&i){const e=d.oxw(),r=e.$implicit,o=e.index,s=d.oxw(2);d.xp6(1),d.uIk("transform",d.lcZ(2,2,d.WLB(4,_p,s.svgWidth/2-s.zoom*s.focus.x+r.x,s.svgHeight/2-s.zoom*s.focus.y+r.y))),d.xp6(4),d.Oqu(o)}}function gne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.TgZ(1,"g"),d.ALo(2,"cssTranslate"),d._UZ(3,"circle",9),d.qZA(),d.BQk()),2&i){const e=d.oxw().$implicit,r=d.oxw(2);d.xp6(1),d.uIk("transform",d.lcZ(2,3,d.WLB(5,_p,r.svgWidth/2-r.zoom*r.focus.x+e.x,r.svgHeight/2-r.zoom*r.focus.y+e.y))),d.xp6(2),d.Udp("fill",r.layerColors[e.layer])}}function _ne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,mne,3,7,"g",3),d.YNc(2,pne,6,7,"ng-container",3),d.YNc(3,gne,4,8,"ng-container",3),d.BQk()),2&i){const e=d.oxw(2);d.xp6(1),d.Q6J("ngIf",!1),d.xp6(1),d.Q6J("ngIf",!1),d.xp6(1),d.Q6J("ngIf",e.debug)}}function yne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d._UZ(1,"image",10),d.ALo(2,"assetUrl"),d.ALo(3,"cssTranslate"),d.BQk()),2&i){const e=n.$implicit,r=d.oxw().$implicit,o=d.oxw(4);d.xp6(1),d.Udp("opacity",.7+.15*o.sin(4.5*o.time)),d.uIk("height",o.cellSize)("href",d.Dn7(2,6,o.cursor.element.code,o.spriteSet,o.cursor.orientation))("transform",d.lcZ(3,10,d.WLB(12,_p,o.svgWidth/2-o.zoom*o.focus.x+r.x+e.x,o.svgHeight/2-o.zoom*o.focus.y+r.y+e.y)))("width",o.cellSize)}}function vne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,yne,4,15,"ng-container",3),d.BQk()),2&i){const e=d.oxw(4);d.xp6(1),d.Q6J("ngIf",e.cursor.element&&e.getSpriteOffset(e.cursor.element,e.cursor.orientation))}}function bne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,vne,2,1,"ng-container",3),d.BQk()),2&i){const e=d.oxw(3);d.xp6(1),d.Q6J("ngIf",e.project(e.cursorHardpoint.original.x,e.cursorHardpoint.original.y,e.cursorHardpoint.original.z+1))}}function wne(i,n){if(1&i&&(d.O4$(),d._UZ(0,"circle",13),d.ALo(1,"cssTranslate")),2&i){const e=d.oxw().$implicit,r=d.oxw(3);d.uIk("transform",d.lcZ(1,1,d.WLB(3,_p,r.svgWidth/2-r.zoom*r.focus.x+e.x,r.svgHeight/2-r.zoom*r.focus.y+e.y)))}}function xne(i,n){if(1&i){const e=d.EpF();d.O4$(),d.ynx(0),d.TgZ(1,"path",11),d.NdJ("click",function(){const s=d.CHM(e).$implicit,c=d.oxw(3);return d.KtG(c.onClickCursor(s))})("mouseover",function(){const s=d.CHM(e).$implicit,c=d.oxw(3);return d.KtG(c.onHoverCursor(s))}),d.ALo(2,"cssTranslate"),d.qZA(),d.YNc(3,wne,2,6,"circle",12),d.BQk()}if(2&i){const e=n.$implicit,r=d.oxw(3);d.xp6(1),d.Udp("fill",r.cursor.color)("stroke",r.cursor.color),d.uIk("d",r.shapes[e.original.type])("transform",d.lcZ(2,7,d.WLB(9,_p,r.svgWidth/2-r.zoom*r.focus.x+e.x,r.svgHeight/2-r.zoom*r.focus.y+e.y))),d.xp6(2),d.Q6J("ngIf",r.debug)}}function Ene(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,bne,2,1,"ng-container",3),d.YNc(2,xne,4,12,"ng-container",4),d.BQk()),2&i){const e=d.oxw(2);d.xp6(1),d.Q6J("ngIf",e.cursorHardpoint),d.xp6(1),d.Q6J("ngForOf",e.projectedHardpoints)}}function Cne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d._UZ(1,"line",14)(2,"line",14),d.BQk()),2&i){const e=d.oxw(2);d.xp6(1),d.uIk("x1",0)("x2",e.svgWidth)("y1",e.svgHeight/2)("y2",e.svgHeight/2),d.xp6(1),d.uIk("x1",e.svgWidth/2)("x2",e.svgWidth/2)("y1",0)("y2",e.svgHeight)}}function Dne(i,n){if(1&i&&(d.O4$(),d.TgZ(0,"g")(1,"g"),d.YNc(2,une,4,7,"ng-container",4),d.YNc(3,_ne,4,3,"ng-container",4),d.qZA(),d.TgZ(4,"g"),d.YNc(5,Ene,3,2,"ng-container",3),d.qZA(),d.YNc(6,Cne,3,8,"ng-container",3),d.qZA()),2&i){const e=d.oxw();d.xp6(2),d.Q6J("ngForOf",e.projectedTiles),d.xp6(1),d.Q6J("ngForOf",e.projectedTiles),d.xp6(2),d.Q6J("ngIf",e.cursor),d.xp6(1),d.Q6J("ngIf",e.debug)}}const Ine=function(i){return{editable:i}},{sin:Tne,min:oj,max:sj}=Math;let aj=(()=>{class i{constructor(e,r,o){this.host=e,this.utilService=r,this.zone=o,this.spriteSet=n0[0],this.editable=!1,this.elements=[],this.hardpoints=[],this.zoom=1,this.focus={x:0,y:0},this.orientation=0,this.clickCursor=new d.vpe,this.timerId=void 0,this.startTime=0,this.time=0,this.elementsBycode={},this.projectedTiles=[],this.projectedHardpoints=[],this.svgWidth=0,this.svgHeight=0,this.cellSize=0,this.tileWidth=1e3,this.tileHeight=1e3,this.unitX=0,this.unitY=0,this.unitZ=0,this.unitFactor=0,this.shapes={Cell:"",ArrowLeft:"",ArrowRight:""},this.sin=Tne,this.layerColors=["purple","green"],this.debug=!1,this.startTime=(new Date).getTime(),this.timerId=setInterval(()=>this.time=((new Date).getTime()-this.startTime)/1e3,50),this.calculateFactors()}calculateFactors(){const{spriteSet:e,zoom:r,tileWidth:o}=this,s=r*e.tileUnitWidth,c=r*e.tileUnitHeight,h=r*e.tileUnitDepth;this.unitX=s,this.unitY=c,this.unitZ=h,this.unitFactor=e.tileUnitWidth/o,this.cellSize=r*o;const y=.05*s,w=.05*c;function I(U){const G=U[U.length-1],me=new ir(U).outline(.02*s),Ce=[];return me.curves.forEach((Te,Fe)=>{const qe=Te.points;if(0===Fe&&Ce.push(`M ${qe[0].x}, ${qe[0].y}`),3===qe.length&&Ce.push(`Q ${qe[1].x}, ${qe[1].y} ${qe[2].x}, ${qe[2].y}`),4===qe.length&&Ce.push(`C ${qe[1].x}, ${qe[1].y} ${qe[2].x}, ${qe[2].y} ${qe[3].x}, ${qe[3].y}`),4===Fe){const Xe=Te.normal(1),It={x:Xe.y,y:-1*Xe.x},ln=.06*s;Ce.push(`L ${G.x+Xe.x*ln}, ${G.y+Xe.y*ln}`),Ce.push(`L ${G.x+It.x*ln}, ${G.y+It.y*ln}`),Ce.push(`L ${G.x-Xe.x*ln}, ${G.y-Xe.y*ln}`)}}),Ce.join(" ")}this.shapes.Cell=[`M ${s/-2+y},0`,`L 0,${c/-2+w}`,`L ${s/2-y},0`,"L 0,"+(c/2-w),"Z"].join(" ");const P=[{x:.1,y:0},{x:-.3,y:-.1},{x:-.3,y:-.3},{x:0,y:-.45}].map(U=>({x:U.x*s,y:U.y*c}));this.shapes.ArrowLeft=I(P.map(U=>({x:-U.x,y:U.y}))),this.shapes.ArrowRight=I(P)}getSpriteOffset(e,r){r%=4;const{tileWidth:o,tileHeight:s,unitX:c,unitY:h,zoom:y}=this,w=y*o*-.5;let I=0;I=-.5*(y*s+h);const[A,P]=e.footprint,G=[[0,1,1,0,2],[0,1,2,-1,3],[0,1,3,-2,4],[0,2,1,1,3],[0,2,2,0,4],[0,2,3,-1,5],[0,3,1,2,4],[0,3,3,0,6],[0,6,3,3,9],[1,1,1,0,2],[1,1,2,-1,1],[1,2,1,-1,3],[1,2,2,-2,2],[1,2,3,-3,1],[1,3,1,-2,4],[1,3,3,-4,2],[1,6,3,-7,5],[2,1,1,0,2],[2,1,2,1,1],[2,2,1,-1,1],[2,2,2,0,0],[2,2,3,1,-1],[2,3,1,-2,0],[2,3,3,0,-2],[2,6,3,-3,-5],[3,1,1,0,2],[3,1,2,1,3],[3,2,1,1,1],[3,2,2,2,2],[3,2,3,3,3],[3,3,1,2,0],[3,3,3,4,2],[3,6,3,7,-1]].find(Ce=>Ce[0]===r&&Ce[1]===A&&Ce[2]===P);let Q=0,me=0;return G?(Q=G[3]*c/4,me=G[4]*h/4):console.log("missing",r,A,P),{x:w+Q,y:I+me}}ngOnChanges(e){if(("zoom"in e||"spriteSet"in e)&&(this.calculateFactors(),this.projectTiles(),this.projectHardpoints()),"elements"in e){const r={};this.elements.forEach(o=>r[o.code]=o),this.elementsBycode=r}"cursor"in e&&(this.cursor||(this.cursorHardpoint=void 0)),"orientation"in e&&(this.projectTiles(),this.projectHardpoints(),this.centerFocus()),"design"in e&&(this.projectTiles(),e.design.previousValue||this.centerFocus()),"hardpoints"in e&&(0===this.hardpoints.length&&(this.cursorHardpoint=void 0),this.projectHardpoints())}ngOnDestroy(){clearInterval(this.timerId),this.timerId=void 0}ngOnInit(){const e=new ResizeObserver(o=>{this.zone.run(()=>{const s=o[0].contentRect;this.svgWidth=s.width,this.svgHeight=s.height})}),{svg:r}=this;r&&e.observe(r.nativeElement)}onClickCursor(e){const{cursor:r}=this;r&&(this.clickCursor.emit({cursor:r,hardpoint:e.original}),this.cursorHardpoint=void 0)}onDrag(e){const{zoom:r}=this;this.editable&&!this.hardpoints.length&&1===e.buttons&&(this.focus.x-=e.movementX/r,this.focus.y-=e.movementY/r)}onHoverCursor(e){this.cursorHardpoint=e}project(e,r,o){const{orientation:s,unitX:c,unitY:h,unitZ:p}=this;if(s){const I=this.utilService.rotate({x:e,y:r},this.orientation);e=I.x,r=I.y}return{x:(e-r)*c/2,y:(e+r)*h/2-o*p}}projectBox(e,r){const o=[this.project(e.x1-.5,e.y1-.5,r),this.project(e.x1-.5,e.y2+.5,r),this.project(e.x2+.5,e.y1-.5,r),this.project(e.x2+.5,e.y2+.5,r)],s=o.map(h=>h.x),c=o.map(h=>h.y);return{x1:s.reduce((h,p)=>oj(h,p)),y1:c.reduce((h,p)=>oj(h,p)),x2:s.reduce((h,p)=>sj(h,p)),y2:c.reduce((h,p)=>sj(h,p))}}centerFocus(){const{projectedTiles:e,zoom:r}=this;if(!e.length)return;const o=(s,c)=>s+c;this.focus={x:e.map(s=>s.x).reduce(o,0)/e.length/r,y:e.map(s=>s.y).reduce(o,0)/e.length/r}}projectHardpoints(){this.projectedHardpoints=this.hardpoints.map(e=>({...this.project(e.x,e.y,e.z),original:e}))}projectTiles(){const{design:e,orientation:r,utilService:c,elementsBycode:h}=this;if(!e)return void(this.projectedTiles=[]);const p=[];e.levels.forEach(P=>P.tiles.forEach(U=>{const G=U.x,Q=U.y,me=P.index,{x:Ce,y:fe}=this.project(G,Q,me);p.push({x:Ce,y:fe,layer:me,tile:U,asset:`${U.element}_${(U.orientation+r)%4}`})}));const y=p.map(P=>{const U=h[P.tile.element],G=U?.footprint||[1,1],Q=U?.height||0;return{projected:P,...c.bounds(c.rotate(P.tile,r),G,r+P.tile.orientation),z1:P.layer,z2:P.layer+Q+1,depth:0,visited:!1,background:[]}}),w=y.length;for(let P=0;P<w;++P){const U=y[P];for(let G=0;G<w;++G)if(P!=G){const Q=y[G];Q.x1<U.x2&&Q.y1<U.y2&&Q.z1<U.z2&&U.background.push(Q)}}let I=0;y.forEach(function A(P){if(!P.visited){P.visited=!0;const U=P.background.length;for(let G=0;G<U&&null!=P.background[G];++G)A(P.background[G]),P.background[G]=void 0;P.depth=I++}}),y.sort((P,U)=>Math.sign(P.depth-U.depth)),this.projectedTiles=y.map(P=>P.projected)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(rj),d.Y36(d.R0b))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-design-viewer"]],viewQuery:function(e,r){if(1&e&&d.Gf(lne,7),2&e){let o;d.iGM(o=d.CRH())&&(r.svg=o.first)}},inputs:{spriteSet:"spriteSet",editable:"editable",design:"design",elements:"elements",hardpoints:"hardpoints",zoom:"zoom",focus:"focus",orientation:"orientation",cursor:"cursor"},outputs:{clickCursor:"clickCursor"},features:[d.TTD],decls:4,vars:4,consts:[[1,"design-viewer-container"],[1,"svg-container",3,"ngClass","mousemove"],["svg",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"fill","none","stroke","red"],[2,"stroke","fuchsia","fill","none"],["cx","0","cy","0","r","16",2,"fill","white","fill-opacity","0.6","stroke","steelblue"],["x","0","y","0",2,"fill","blue","stroke","none","text-anchor","middle","alignment-baseline","middle"],["cx","0","cy","0","r","8",2,"stroke","cyan"],[2,"filter","drop-shadow(0 0 8px cyan)"],[1,"hardpoint",3,"click","mouseover"],["cx","0","cy","0","r","8","style","fill: orange; stroke: cyan;",4,"ngIf"],["cx","0","cy","0","r","8",2,"fill","orange","stroke","cyan"],[2,"stroke","blueviolet","stroke-width","1"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0),d.O4$(),d.TgZ(1,"svg",1,2),d.NdJ("mousemove",function(s){return r.onDrag(s)}),d.YNc(3,Dne,7,4,"g",3),d.qZA()()),2&e&&(d.xp6(1),d.Q6J("ngClass",d.VKq(2,Ine,r.editable)),d.xp6(2),d.Q6J("ngIf",r.design&&r.elements.length>0))},dependencies:[br,gs,no,xk,ane],styles:[".design-viewer-container[_ngcontent-%COMP%]{width:100%;height:100%}.design-viewer-container[_ngcontent-%COMP%]   svg.svg-container[_ngcontent-%COMP%]{display:block;width:100%;height:100%;background-color:silver}.design-viewer-container[_ngcontent-%COMP%]   svg.svg-container.editable[_ngcontent-%COMP%]{cursor:move}.hardpoint[_ngcontent-%COMP%]{cursor:pointer;fill-opacity:.25;stroke-width:3;stroke-opacity:.85;transition-property:fill-opacity;transition-duration:.25s;transition-timing-function:ease-in-out}.hardpoint[_ngcontent-%COMP%]:hover{fill-opacity:.5}"]}),i})(),Ek=(()=>{class i{transform(e){return e||(e="warning"),e=e.toLowerCase(),i.TABLE[e]||e}}return i.TABLE={clear:"close",create:"add",element:"view_in_ar",materials:"inventory",properties:"description","tile-add":"brush","tile-copy":"colorize","tile-move":"control_camera","tile-remove":"clear","tile-rotate-left":"rotate_90_degrees_ccw","tile-rotate-right":"rotate_90_degrees_cw","tile-view":"visibility",view:"visibility"},i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=d.Yjl({name:"symbol",type:i,pure:!0}),i})();const Sne=function(){return[]};function Ane(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"div",5)(2,"h2"),d._uU(3),d.qZA(),d._UZ(4,"kn-design-viewer",6),d.ALo(5,"async"),d.qZA(),d.BQk()),2&i){const e=n.$implicit,r=d.oxw();d.xp6(1),d.Q6J("routerLink",e.id),d.xp6(2),d.Oqu(e.title),d.xp6(1),d.Q6J("design",e)("elements",d.lcZ(5,5,r.elements$)||d.DdM(7,Sne))("zoom",r.defaultZoom)}}let Mne=(()=>{class i{constructor(e,r,o){this.designService=e,this.elementService=r,this.router=o,this.designs$=new Bi.y,this.elements$=new Bi.y,this.defaultZoom=.2,this.designs$=this.designService.getDesigns(),this.elements$=this.elementService.getElements()}onCreateDesign(){this.designService.create().subscribe(e=>this.router.navigate(["designs",e.id]))}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Qz),d.Y36(HC),d.Y36(ra))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-design-list-page"]],decls:11,vars:6,consts:[[1,"page-layout"],[1,"design-list-container"],[1,"design-container",2,"align-content","center","align-items","center","justify-content","center"],["color","primary","mat-fab","",3,"click"],[4,"ngFor","ngForOf"],[1,"design-container",3,"routerLink"],[3,"design","elements","zoom"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0)(1,"h1"),d._uU(2,"My Designs"),d.qZA(),d.TgZ(3,"div",1)(4,"div",2)(5,"button",3),d.NdJ("click",function(){return r.onCreateDesign()}),d.TgZ(6,"mat-icon"),d._uU(7),d.ALo(8,"symbol"),d.qZA()()(),d.YNc(9,Ane,6,8,"ng-container",4),d.ALo(10,"async"),d.qZA()()),2&e&&(d.xp6(7),d.Oqu(d.lcZ(8,2,"create")),d.xp6(2),d.Q6J("ngForOf",d.lcZ(10,4,r.designs$)))},dependencies:[t0,gs,p7,MM,aj,Pc,Ek],styles:[".design-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:20px}.design-list-container[_ngcontent-%COMP%]   .design-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:450px;height:360px;cursor:pointer;border:1px solid darkgray;padding:12px;justify-content:start;align-items:stretch;align-content:stretch}.design-list-container[_ngcontent-%COMP%]   .design-container[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 4px #e3b2564d}.design-list-container[_ngcontent-%COMP%]   .design-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex-basis:auto;flex-grow:0;flex-shrink:0}.design-list-container[_ngcontent-%COMP%]   .design-container[_ngcontent-%COMP%]   kn-design-viewer[_ngcontent-%COMP%]{display:block;flex-basis:auto;flex-grow:1;flex-shrink:1}"]}),i})();function Rne(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"button",6),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o.onFilterElements(""))}),d.TgZ(1,"mat-icon"),d._uU(2),d.ALo(3,"symbol"),d.qZA()()}2&i&&(d.xp6(2),d.Oqu(d.lcZ(3,1,"clear")))}const Pne=function(i){return{selected:i}};function One(i,n){if(1&i){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",7),d.NdJ("click",function(){const s=d.CHM(e).$implicit,c=d.oxw();return d.KtG(c.onSelectElement(s))}),d.TgZ(2,"div",8),d._UZ(3,"img"),d.ALo(4,"assetUrl"),d.qZA(),d.TgZ(5,"span"),d._uU(6),d.qZA()(),d.BQk()}if(2&i){const e=n.$implicit,r=d.oxw();d.xp6(1),d.Q6J("ngClass",d.VKq(7,Pne,r.selected===e)),d.xp6(2),d.uIk("src",d.Dn7(4,3,e.code,r.spriteSet,"thumbnail"),d.LSH),d.xp6(3),d.Oqu(e.name)}}let Nne=(()=>{class i{constructor(e){this.elementService=e,this.spriteSet=n0[0],this.selectedChanged=new d.vpe,this.elements=[],this.filter="",this.filteredElements=[]}ngOnInit(){this.elementService.getElements().subscribe(e=>{this.elements=e,this.filteredElements=e})}onFilterElements(e){const{elements:r}=this;if(this.filter=e,e){const o=e.toLowerCase().split(" ");this.filteredElements=r.filter(s=>o.find(c=>s.code.toLowerCase().includes(c)||s.name.toLowerCase().includes(c)||s.tags.find(h=>h.toLowerCase().includes(c))))}else this.filteredElements=r}onSelectElement(e){this.selected=e===this.selected?void 0:e,this.selectedChanged.emit(this.selected)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(HC))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-element-finder"]],inputs:{spriteSet:"spriteSet",selected:"selected"},outputs:{selectedChanged:"selectedChanged"},decls:8,vars:3,consts:[[2,"display","flex","flex-direction","column","gap","0"],[1,"example-form-field"],["matInput","","type","text",3,"ngModel","ngModelChange"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],[1,"element-finder"],[4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix","",3,"click"],[1,"element-finder-item",3,"ngClass","click"],[1,"thumbnail-wrapper"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),d._uU(3,"Search for element"),d.qZA(),d.TgZ(4,"input",2),d.NdJ("ngModelChange",function(s){return r.onFilterElements(s)}),d.qZA(),d.YNc(5,Rne,4,3,"button",3),d.qZA(),d.TgZ(6,"div",4),d.YNc(7,One,7,9,"ng-container",5),d.qZA()()),2&e&&(d.xp6(4),d.Q6J("ngModel",r.filter),d.xp6(1),d.Q6J("ngIf",r.filter),d.xp6(2),d.Q6J("ngForOf",r.filteredElements))},dependencies:[br,gs,no,nC,SN,cM,g7,s6,wM,IK,MM,I6,xk,Ek],styles:[".element-finder[_ngcontent-%COMP%]{display:flex;gap:8px;flex-direction:row;flex-wrap:wrap;align-items:stretch;overflow-y:auto;min-height:362px;max-height:520px;padding:8px}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]{cursor:pointer;width:140px;height:150px;padding:8px;display:flex;gap:4px;flex-direction:column;border:1px solid silver;justify-content:end;align-items:stretch}.element-finder[_ngcontent-%COMP%]   .element-finder-item.selected[_ngcontent-%COMP%]{border-color:gold}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 4px #fff6}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:stretch;position:relative;flex-basis:0;flex-grow:1;flex-shrink:1;min-width:0;min-height:0}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex-basis:0;flex-grow:1;object-fit:contain;max-width:100%;max-height:100%}"]}),i})();const Fne=function(i,n,e,r){return{mode:i,color:n,element:e,orientation:r}};function Lne(i,n){if(1&i){const e=d.EpF();d.ynx(0),d.TgZ(1,"kn-design-viewer",3),d.NdJ("clickCursor",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.onClickCursor(o.cursor,o.hardpoint))})("wheel",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.onMouseWheel(o))}),d.qZA(),d.BQk()}if(2&i){const e=d.oxw();d.xp6(1),d.Q6J("cursor",d.l5B(8,Fne,e.selectedMode,e.modeColors[e.selectedMode],e.selectedElement,e.selectedOrientation))("design",e.design)("editable",!0)("elements",e.elements)("hardpoints",e.validHardpoints)("orientation",e.viewOrientation)("spriteSet",e.viewSpriteSet)("zoom",e.viewZoom)}}function Une(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"mat-button-toggle",26),d._uU(2),d.qZA(),d.BQk()),2&i){const e=n.$implicit;d.xp6(1),d.Q6J("value",e),d.xp6(1),d.hij(" ",90*e,"\xb0 ")}}function Bne(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"mat-button-toggle",27),d._UZ(2,"div",28),d._uU(3),d.qZA(),d.BQk()),2&i){const e=n.$implicit;d.xp6(1),d.Q6J("value",e),d.xp6(1),d.Udp("background-color",e.color),d.xp6(1),d.hij(" ",e.name," ")}}function Vne(i,n){1&i&&(d.TgZ(0,"th",29),d._uU(1,"Code"),d.qZA())}function Hne(i,n){if(1&i&&(d.TgZ(0,"td",30),d._uU(1),d.qZA()),2&i){const e=n.$implicit;d.xp6(1),d.Oqu(e.element.code)}}function zne(i,n){1&i&&(d.TgZ(0,"th",31),d._uU(1,"Name"),d.qZA())}function jne(i,n){if(1&i&&(d.TgZ(0,"td",32),d._uU(1),d.qZA()),2&i){const e=n.$implicit;d.xp6(1),d.Oqu(e.element.name)}}function $ne(i,n){1&i&&(d.TgZ(0,"th",33),d._uU(1,"Quantity"),d.qZA())}function Gne(i,n){if(1&i&&(d.TgZ(0,"td",34),d._uU(1),d.qZA()),2&i){const e=n.$implicit;d.xp6(1),d.hij("",e.quantity," ")}}function Wne(i,n){1&i&&d._UZ(0,"tr",35)}function qne(i,n){1&i&&d._UZ(0,"tr",36)}function Kne(i,n){if(1&i){const e=d.EpF();d.ynx(0),d.TgZ(1,"mat-button-toggle",37),d.NdJ("click",function(){const s=d.CHM(e).$implicit,c=d.oxw(2);return d.KtG(c.onSelectMode(s))}),d.TgZ(2,"mat-icon",38),d._uU(3),d.ALo(4,"symbol"),d.qZA()(),d.BQk()}if(2&i){const e=n.$implicit;d.xp6(1),d.Q6J("value",e),d.xp6(2),d.Oqu(d.lcZ(4,2,"tile-"+e))}}const Yne=function(){return[0,1,2,3]},lj=function(){return["code","name","quantity"]},Zne=function(){return["view","add","remove","move","copy","rotate-left","rotate-right"]};function Qne(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"mat-drawer",4)(1,"mat-accordion",5)(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title")(5,"mat-icon"),d._uU(6),d.ALo(7,"symbol"),d.qZA(),d._uU(8," View "),d.qZA()(),d.TgZ(9,"div",6)(10,"mat-button-toggle-group",7),d.NdJ("ngModelChange",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.viewOrientation=o)}),d.YNc(11,Une,3,2,"ng-container",8),d.qZA(),d.TgZ(12,"mat-button-toggle-group",7),d.NdJ("ngModelChange",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.viewSpriteSet=o)}),d.YNc(13,Bne,4,4,"ng-container",8),d.qZA()()(),d.TgZ(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title")(17,"mat-icon"),d._uU(18),d.ALo(19,"symbol"),d.qZA(),d._uU(20," Properties "),d.qZA()(),d.TgZ(21,"mat-form-field",9)(22,"mat-label"),d._uU(23,"Title"),d.qZA(),d.TgZ(24,"input",10),d.NdJ("ngModelChange",function(o){d.CHM(e);const s=d.oxw();return s.design.title=o,d.KtG(s.save())}),d.qZA()(),d.TgZ(25,"mat-form-field",9)(26,"mat-label"),d._uU(27,"Description"),d.qZA(),d.TgZ(28,"textarea",11),d.NdJ("ngModelChange",function(o){d.CHM(e);const s=d.oxw();return s.design.description=o,d.KtG(s.save())}),d.qZA()()(),d.TgZ(29,"mat-expansion-panel")(30,"mat-expansion-panel-header")(31,"mat-panel-title")(32,"mat-icon"),d._uU(33),d.ALo(34,"symbol"),d.qZA(),d._uU(35," Materials "),d.qZA()(),d.TgZ(36,"table",12),d.ynx(37,13),d.YNc(38,Vne,2,0,"th",14),d.YNc(39,Hne,2,1,"td",15),d.BQk(),d.ynx(40,16),d.YNc(41,zne,2,0,"th",17),d.YNc(42,jne,2,1,"td",18),d.BQk(),d.ynx(43,19),d.YNc(44,$ne,2,0,"th",20),d.YNc(45,Gne,2,1,"td",21),d.BQk(),d.YNc(46,Wne,1,0,"tr",22),d.YNc(47,qne,1,0,"tr",23),d.qZA()(),d.TgZ(48,"mat-expansion-panel")(49,"mat-expansion-panel-header")(50,"mat-panel-title")(51,"mat-icon"),d._uU(52),d.ALo(53,"symbol"),d.qZA(),d._uU(54," Elements "),d.qZA()(),d.TgZ(55,"mat-button-toggle-group",24),d.YNc(56,Kne,5,4,"ng-container",8),d.qZA(),d.TgZ(57,"kn-element-finder",25),d.NdJ("selectedChanged",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.onSelectElement(o))}),d.qZA()()()()}if(2&i){const e=d.oxw();d.xp6(6),d.Oqu(d.lcZ(7,17,"view")),d.xp6(4),d.Q6J("ngModel",e.viewOrientation),d.xp6(1),d.Q6J("ngForOf",d.DdM(25,Yne)),d.xp6(1),d.Q6J("ngModel",e.viewSpriteSet),d.xp6(1),d.Q6J("ngForOf",e.SPRITE_SETS),d.xp6(5),d.Oqu(d.lcZ(19,19,"properties")),d.xp6(6),d.Q6J("ngModel",e.design.title),d.xp6(4),d.Q6J("ngModel",e.design.description),d.xp6(5),d.Oqu(d.lcZ(34,21,"materials")),d.xp6(3),d.Q6J("dataSource",e.materials),d.xp6(10),d.Q6J("matHeaderRowDef",d.DdM(26,lj)),d.xp6(1),d.Q6J("matRowDefColumns",d.DdM(27,lj)),d.xp6(5),d.Oqu(d.lcZ(53,23,"element")),d.xp6(3),d.Q6J("value",e.selectedMode),d.xp6(1),d.Q6J("ngForOf",d.DdM(28,Zne)),d.xp6(1),d.Q6J("selected",e.selectedElement)("spriteSet",e.viewSpriteSet)}}const{min:cj,max:dj}=Math;let Xne=(()=>{class i{constructor(e,r,o,s){this.designService=e,this.elementService=r,this.route=o,this.utilService=s,this.selectedOrientation=0,this.elements=[],this.validHardpoints=[],this.selectedMode="view",this.viewOrientation=0,this.viewSpriteSet=n0[0],this.viewZoom=1,this.materials=[],this.saveTrigger=new Ht.x,this.modeColors={add:"#37b5cb",remove:"#ea5126",move:"#4aea26",copy:"#4aea26","rotate-left":"#e57bf5","rotate-right":"#e57bf5"},this.SPRITE_SETS=n0,this.saveTrigger.pipe(function kne(i){return(0,Zi.e)((n,e)=>{let r=!1,o=null,s=null;const c=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const h=o;o=null,e.next(h)}};n.subscribe((0,Ii.x)(e,h=>{s?.unsubscribe(),r=!0,o=h,s=(0,Ii.x)(e,c,ly.Z),(0,Da.Xf)(i(h)).subscribe(s)},()=>{c(),e.complete()},void 0,()=>{o=s=null}))})}(()=>N6(500)),(0,_t.U)(()=>this.design),Cn(h=>!!h),(0,yo.z)(h=>this.designService.save(h))).subscribe()}handleKeyboardEvent(e){"r"===e.key&&this.rotateSelectedElement(1),"R"===e.key&&this.rotateSelectedElement(-1)}ngOnInit(){this.elementService.getElements().subscribe(e=>{this.elements=e,console.log(e)}),this.route.paramMap.subscribe(e=>this.designService.getDesignById(e.get("id")).subscribe(r=>{this.design=r,this.calculateHardpoints(),this.calculateMaterials()}))}onClickCursor(e,r){const{design:o,viewOrientation:s,elements:c}=this;if(o){switch(e.mode){case"add":{const h=r.z+1;let p=o.levels.find(y=>y.index===h);p||(p={index:h,tiles:[]},o.levels.push(p)),p.tiles=[...p.tiles,{x:r.x,y:r.y,element:e.element.code,orientation:(e.orientation-s+4)%4}];break}case"remove":{const h=o.levels.find(p=>p.index===r.z);h&&(h.tiles=h.tiles.filter(p=>p.x!==r.x||p.y!==r.y));break}case"move":case"copy":{const h=o.levels.find(p=>p.index===r.z);if(h){const p=h.tiles.find(y=>y.x===r.x&&y.y===r.y);p&&("move"===e.mode&&(h.tiles=h.tiles.filter(y=>y!==p)),this.selectedElement=c.find(y=>y.code===p.element),this.selectedOrientation=p.orientation,this.selectedMode="add",this.calculateHardpoints())}break}case"rotate-left":case"rotate-right":{const h="rotate-right"===e.mode?1:-1,p=o.levels.find(y=>y.index===r.z);if(p){const y=p.tiles.find(w=>w.x===r.x&&w.y===r.y);y&&(y.orientation=(y.orientation+4+h)%4)}break}}this.design={...o},this.save(),this.calculateHardpoints(),this.calculateMaterials()}}onMouseWheel(e){const{selectedElement:r,utilService:o}=this;r?this.rotateSelectedElement(-Math.sign(e.deltaY)):this.viewZoom=o.clamp(this.viewZoom*(1-.0015*e.deltaY),.2,2.5)}onSelectElement(e){this.selectedElement=e,this.onSelectMode("add")}onSelectMode(e){this.selectedMode=e,"add"!==e&&(this.selectedElement=void 0),this.calculateHardpoints()}save(){this.saveTrigger.next()}calculateHardpoints(){const{elements:e,design:r,selectedMode:o,selectedElement:s,selectedOrientation:c,utilService:h}=this,p=[];if(e.length&&r){const y=this.getElementsMap();switch(o){case"add":if(s)if(s.flat){const w=r.levels.find(I=>0===I.index);if(w&&w.tiles.length>0){const A=w.tiles.map(fe=>{const Te=[],[Fe,qe]=y[fe.element].footprint;for(let Xe=0;Xe<Fe;++Xe)for(let It=0;It<qe;++It)Te.push(h.rotate({x:fe.x+Xe,y:fe.y+It},fe.orientation));return Te}).reduce((fe,Te)=>[...fe,...Te]),P=A.map(fe=>fe.x).reduce((fe,Te)=>cj(fe,Te)),U=A.map(fe=>fe.y).reduce((fe,Te)=>cj(fe,Te)),G=A.map(fe=>fe.x).reduce((fe,Te)=>dj(fe,Te)),Q=A.map(fe=>fe.y).reduce((fe,Te)=>dj(fe,Te));let me=0,Ce=0;0===c||2===c?[me,Ce]=s?.footprint:[Ce,me]=s?.footprint;for(let fe=P-me;fe<=G+me;++fe)for(let Te=U-Ce;Te<=Q+Ce;++Te){let Fe=!0;for(let qe=fe;qe<fe+me;++qe)for(let Xe=Te;Xe<Te+Ce;++Xe)if(A.find(It=>It.x===qe&&It.y===Xe)){Fe=!1;break}Fe&&p.push({type:"Cell",x:fe,y:Te,z:-1})}}else p.push({type:"Cell",x:0,y:0,z:-1})}else r.levels.forEach(w=>{w.tiles.forEach(I=>{const A=y[I.element];if(A&&this.checkConnector(s.bottom,A.top)){const P=w.index+A.height,U=h.bounds(I,A.footprint,I.orientation),G=r.levels.filter(Q=>Q.index===P+1);for(let Q=U.x1;Q<U.x2;++Q)for(let me=U.y1;me<U.y2;++me){const Ce=h.bounds({x:Q,y:me},s.footprint,c);let fe=!0;for(let Te=Ce.x1;Te<Ce.x2;++Te){for(let Fe=Ce.y1;Fe<Ce.y2;++Fe){if(Te<U.x1||Fe<U.y1||Te>=U.x2||Fe>=U.y2){fe=!1;break}if(G.find(qe=>!!qe.tiles.find(Xe=>{const It=y[Xe.element]?.footprint;if(!It)return!1;const ln=h.bounds(Xe,It,Xe.orientation);return Te>=ln.x1&&Te<ln.x2&&Fe>=ln.y1&&Fe<ln.y2}))){fe=!1;break}}if(!fe)break}fe&&p.push({type:"Cell",x:Q,y:me,z:P})}}})});break;case"remove":case"move":r.levels.forEach(w=>w.tiles.forEach(I=>{const A=y[I.element];if(!A)return;const P=h.bounds(I,A.footprint,I.orientation);A.top!==Ne.Other&&r.levels.find(G=>G.index>w.index&&G.tiles.find(Q=>{const me=y[Q.element];return!me||h.overlap(P,h.bounds(Q,me.footprint,Q.orientation))}))||p.push({type:"Cell",x:I.x,y:I.y,z:w.index})}));break;case"copy":r.levels.forEach(w=>w.tiles.forEach(I=>{const A=y[I.element];A&&(A.flat||p.push({type:"Cell",x:I.x,y:I.y,z:w.index}))}));break;case"rotate-left":case"rotate-right":{const w="rotate-right"===o?"ArrowRight":"ArrowLeft";r.levels.forEach(I=>I.tiles.forEach(A=>{const P=y[A.element];P&&1===P.footprint[0]&&1===P.footprint[1]&&p.push({type:w,x:A.x,y:A.y,z:I.index})}));break}}}this.validHardpoints=p}calculateMaterials(){const{design:e}=this,r=[];if(e){const o=this.getElementsMap();e.levels.forEach(s=>s.tiles.forEach(c=>{const h=o[c.element];if(!h)return;const p=r.find(y=>y.element===h);p?p.quantity++:r.push({element:h,quantity:1})}))}r.sort((o,s)=>o.quantity>s.quantity?-1:o.quantity<s.quantity?1:o.element.code.localeCompare(s.element.code)),this.materials=r}checkConnector(e,r){return e===Ne.LargeKey&&r===Ne.LargeSlot||e===Ne.LargeSlot&&r===Ne.LargeKey||e===Ne.SmallKey&&r===Ne.SmallSlot||e===Ne.SmallSlot&&r===Ne.SmallKey}getElementsMap(){const{elements:e}=this,r={};return e.forEach(o=>r[o.code]=o),r}rotateSelectedElement(e){const{selectedElement:r}=this;this.selectedOrientation=r&&r.orientable?(this.selectedOrientation+e+4)%4:0,this.calculateHardpoints()}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Qz),d.Y36(HC),d.Y36(mp),d.Y36(rj))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-design-view-page"]],hostBindings:function(e,r){1&e&&d.NdJ("keypress",function(s){return r.handleKeyboardEvent(s)},!1,d.evT)},decls:4,vars:2,consts:[["hasBackdrop","false",1,"design-view-container"],[4,"ngIf"],["class","editor-container","disableClose","true","mode","side","opened","true","position","end",4,"ngIf"],[3,"cursor","design","editable","elements","hardpoints","orientation","spriteSet","zoom","clickCursor","wheel"],["disableClose","true","mode","side","opened","true","position","end",1,"editor-container"],["multi","false"],[2,"display","flex","flex-direction","column","align-items","start","align-content","start","gap","12px"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["appearance","fill",1,"wide"],["matInput","","placeholder","Your map design's title",3,"ngModel","ngModelChange"],["matInput","","placeholder","Your map design's description","rows","6",3,"ngModel","ngModelChange"],["mat-table","",1,"wide",3,"dataSource"],["matColumnDef","code"],["class","narrow text-nowrap text-left","mat-header-cell","",4,"matHeaderCellDef"],["class","narrow text-nowrap text-left","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["class","wide text-left","mat-header-cell","",4,"matHeaderCellDef"],["class","wide text-left","mat-cell","",4,"matCellDef"],["matColumnDef","quantity"],["class","narrow text-right","mat-header-cell","",4,"matHeaderCellDef"],["class","narrow text-nowrap text-right","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"margin-bottom","22px",3,"value"],[3,"selected","spriteSet","selectedChanged"],[2,"width","50px",3,"value"],[2,"width","110px",3,"value"],[2,"display","inline-block","width","12px","height","16px","margin-right","4px","border-radius","4px"],["mat-header-cell","",1,"narrow","text-nowrap","text-left"],["mat-cell","",1,"narrow","text-nowrap","text-left"],["mat-header-cell","",1,"wide","text-left"],["mat-cell","",1,"wide","text-left"],["mat-header-cell","",1,"narrow","text-right"],["mat-cell","",1,"narrow","text-nowrap","text-right"],["mat-header-row",""],["mat-row",""],[3,"value","click"],["color","primary"]],template:function(e,r){1&e&&(d.TgZ(0,"mat-drawer-container",0)(1,"mat-drawer-content"),d.YNc(2,Lne,2,13,"ng-container",1),d.qZA(),d.YNc(3,Qne,58,29,"mat-drawer",2),d.qZA()),2&e&&(d.xp6(2),d.Q6J("ngIf",r.elements&&r.design),d.xp6(1),d.Q6J("ngIf",r.design))},dependencies:[gs,no,nC,SN,cM,P4,O4,W7,$4,G4,G7,s6,wM,MM,I6,H6,z6,OM,Y6,IF,Z6,TF,DF,Q6,SF,AF,X6,J6,aj,Nne,Ek],styles:["[_nghost-%COMP%]{height:100%}.design-view-container[_ngcontent-%COMP%]{height:calc(100vh - 64px)}.design-view-container[_ngcontent-%COMP%]   .editor-container[_ngcontent-%COMP%]{width:30vw;min-width:557px}mat-form-field[_ngcontent-%COMP%]{min-width:300px}"]}),i})();function Jne(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"div",3)(2,"h3"),d._uU(3),d.qZA(),d._UZ(4,"img"),d.ALo(5,"assetUrl"),d.qZA(),d.BQk()),2&i){const e=n.$implicit,r=d.oxw();d.xp6(1),d.Q6J("routerLink",e.id),d.xp6(2),d.AsE("",e.code," \u2014 ",e.name,""),d.xp6(1),d.uIk("src",d.Dn7(5,4,e.code,r.spriteSet,"thumbnail"),d.LSH)}}let eie=(()=>{class i{constructor(e){this.elementService=e,this.elements=[],this.spriteSet=n0[0]}ngOnInit(){this.elementService.getElements().subscribe(e=>this.elements=e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(HC))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-element-list-page"]],decls:5,vars:1,consts:[[1,"page-layout"],[1,"element-list-container"],[4,"ngFor","ngForOf"],[1,"element-container",3,"routerLink"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0)(1,"h1"),d._uU(2,"Elements"),d.qZA(),d.TgZ(3,"div",1),d.YNc(4,Jne,6,8,"ng-container",2),d.qZA()()),2&e&&(d.xp6(4),d.Q6J("ngForOf",r.elements))},dependencies:[t0,gs,xk],styles:[".element-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:20px}.element-list-container[_ngcontent-%COMP%]   .element-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:450px;height:360px;cursor:pointer;border:1px solid darkgray;padding:12px;justify-content:start;align-items:stretch;align-content:stretch}.element-list-container[_ngcontent-%COMP%]   .element-container[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 4px #e3b2564d}.element-list-container[_ngcontent-%COMP%]   .element-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex-basis:auto;flex-grow:0;flex-shrink:0}.element-list-container[_ngcontent-%COMP%]   .element-container[_ngcontent-%COMP%]   kn-element-viewer[_ngcontent-%COMP%]{display:block;flex-basis:auto;flex-grow:1;flex-shrink:1}"]}),i})();function tie(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"h1"),d._uU(2),d.qZA(),d._UZ(3,"img"),d.ALo(4,"assetUrl"),d.BQk()),2&i){const e=d.oxw();d.xp6(2),d.AsE("",e.element.code," \u2014 ",e.element.name,""),d.xp6(1),d.uIk("src",d.Dn7(4,3,e.element.code,e.spriteSet,"thumbnail"),d.LSH)}}const nie=[{path:"designs",component:Mne},{path:"designs/:id",component:Xne},{path:"elements",component:eie},{path:"elements/:id",component:(()=>{class i{constructor(e,r){this.elementService=e,this.route=r,this.spriteSet=n0[0]}ngOnInit(){this.route.paramMap.subscribe(e=>this.elementService.getElementById(e.get("id")).subscribe(r=>this.element=r))}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(HC),d.Y36(mp))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-element-view-page"]],decls:2,vars:1,consts:[[1,"page-layout"],[4,"ngIf"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0),d.YNc(1,tie,5,7,"ng-container",1),d.qZA()),2&e&&(d.xp6(1),d.Q6J("ngIf",r.element))},dependencies:[no,xk]}),i})()}];let iie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Wz.forRoot(nie),Wz]}),i})();function rie(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"a",6),d._uU(2),d.qZA(),d.BQk()),2&i){const e=n.$implicit;d.xp6(1),d.Q6J("routerLink",e.link),d.xp6(1),d.Oqu(e.label)}}function oie(i,n){if(1&i&&(d.ynx(0),d._UZ(1,"img",7),d.TgZ(2,"span"),d._uU(3),d.qZA(),d.BQk()),2&i){const e=n.$implicit;d.xp6(1),d.uIk("src",e.photoURL,d.LSH),d.xp6(2),d.Oqu(e.displayName)}}function sie(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"button",8),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o.onLogin())}),d.TgZ(1,"mat-icon"),d._uU(2),d.ALo(3,"symbol"),d.qZA(),d.TgZ(4,"span"),d._uU(5,"Sign In"),d.qZA()()}2&i&&(d.xp6(2),d.Oqu(d.lcZ(3,1,"login")))}function aie(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"button",8),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o.onLogout())}),d.TgZ(1,"mat-icon"),d._uU(2),d.ALo(3,"symbol"),d.qZA(),d.TgZ(4,"span"),d._uU(5,"Sign Out"),d.qZA()()}2&i&&(d.xp6(2),d.Oqu(d.lcZ(3,1,"logout")))}let lie=(()=>{class i{constructor(e){this.authenticationService=e,this.menu=[{label:"Designs",link:"designs"},{label:"Collections",link:"collections"},{label:"Elements",link:"elements"}],this.currentUser$=e.getCurrentUserObservable()}onLogin(){this.authenticationService.signIn()}onLogout(){this.authenticationService.signOut()}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Zz))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-top-bar"]],decls:11,vars:10,consts:[["color","primary"],["src","assets/logo.png",2,"height","48px","margin-right","20px"],[4,"ngFor","ngForOf"],[2,"flex-grow","1"],[4,"ngIf"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"routerLink"],[1,"user-profile-image"],["mat-button","",3,"click"]],template:function(e,r){1&e&&(d.TgZ(0,"mat-toolbar",0)(1,"mat-toolbar-row"),d._UZ(2,"img",1),d.YNc(3,rie,3,2,"ng-container",2),d._UZ(4,"div",3),d.YNc(5,oie,4,2,"ng-container",4),d.ALo(6,"async"),d.YNc(7,sie,6,3,"button",5),d.ALo(8,"async"),d.YNc(9,aie,6,3,"button",5),d.ALo(10,"async"),d.qZA()()),2&e&&(d.xp6(3),d.Q6J("ngForOf",r.menu),d.xp6(2),d.Q6J("ngIf",d.lcZ(6,4,r.currentUser$)),d.xp6(2),d.Q6J("ngIf",!d.lcZ(8,6,r.currentUser$)),d.xp6(2),d.Q6J("ngIf",d.lcZ(10,8,r.currentUser$)))},dependencies:[t0,gs,no,f7,h7,MM,aQ,eH,Pc,Ek],styles:[".user-profile-image[_ngcontent-%COMP%]{height:40px;border-radius:20px;margin-left:8px;margin-right:8px;border:1px solid black;vertical-align:center}mat-toolbar-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}"]}),i})(),cie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-root"]],decls:2,vars:0,template:function(e,r){1&e&&d._UZ(0,"kn-top-bar")(1,"router-outlet")},dependencies:[hL,lie],styles:[".page-container[_ngcontent-%COMP%]{width:100%;height:100%}.page-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.page-sidenav[_ngcontent-%COMP%]{padding:20px}"]}),i})(),die=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i,bootstrap:[cie]}),i.\u0275inj=d.cJS({imports:[Rk,uR,Ui.hO.initializeApp(GH_firebase),EW,O8,iie,iJ,Jc,H9,_7,x7,q7,oF,gY,EY,eZ,RZ,nQ,lQ,xJ,Q_(()=>xf(GH_firebase)),OW(()=>NW())]}),i})();Xc().bootstrapModule(die).catch(i=>console.error(i))},5619:(wt,Me,H)=>{H.d(Me,{X:()=>W});var d=H(8645);class W extends d.x{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const ce=super._subscribe(ne);return!ce.closed&&ne.next(this._value),ce}getValue(){const{hasError:ne,thrownError:ce,_value:ue}=this;if(ne)throw ce;return this._throwIfClosed(),ue}next(ne){super.next(this._value=ne)}}},5592:(wt,Me,H)=>{H.d(Me,{y:()=>Pe});var d=H(305),W=H(7394),F=H(4850),ne=H(8407),ce=H(2653),ue=H(4674),Ie=H(1441);let Pe=(()=>{class ae{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const nt=new ae;return nt.source=this,nt.operator=Le,nt}subscribe(Le,nt,Ue){const it=function Z(ae){return ae&&ae instanceof d.Lv||function K(ae){return ae&&(0,ue.m)(ae.next)&&(0,ue.m)(ae.error)&&(0,ue.m)(ae.complete)}(ae)&&(0,W.Nn)(ae)}(Le)?Le:new d.Hp(Le,nt,Ue);return(0,Ie.x)(()=>{const{operator:He,source:kt}=this;it.add(He?He.call(it,kt):kt?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(Le){try{return this._subscribe(Le)}catch(nt){Le.error(nt)}}forEach(Le,nt){return new(nt=we(nt))((Ue,it)=>{const He=new d.Hp({next:kt=>{try{Le(kt)}catch(yt){it(yt),He.unsubscribe()}},error:it,complete:Ue});this.subscribe(He)})}_subscribe(Le){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(Le)}[F.L](){return this}pipe(...Le){return(0,ne.U)(Le)(this)}toPromise(Le){return new(Le=we(Le))((nt,Ue)=>{let it;this.subscribe(He=>it=He,He=>Ue(He),()=>nt(it))})}}return ae.create=Ge=>new ae(Ge),ae})();function we(ae){var Ge;return null!==(Ge=ae??ce.config.Promise)&&void 0!==Ge?Ge:Promise}},8645:(wt,Me,H)=>{H.d(Me,{x:()=>Ie});var d=H(5592),W=H(7394);const ne=(0,H(2306).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=H(9039),ue=H(1441);let Ie=(()=>{class we extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const ae=new Pe(this,this);return ae.operator=Z,ae}_throwIfClosed(){if(this.closed)throw new ne}next(Z){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ae of this.currentObservers)ae.next(Z)}})}error(Z){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:ae}=this;for(;ae.length;)ae.shift().error(Z)}})}complete(){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:ae,isStopped:Ge,observers:Le}=this;return ae||Ge?W.Lc:(this.currentObservers=null,Le.push(Z),new W.w0(()=>{this.currentObservers=null,(0,ce.P)(Le,Z)}))}_checkFinalizedStatuses(Z){const{hasError:ae,thrownError:Ge,isStopped:Le}=this;ae?Z.error(Ge):Le&&Z.complete()}asObservable(){const Z=new d.y;return Z.source=this,Z}}return we.create=(K,Z)=>new Pe(K,Z),we})();class Pe extends Ie{constructor(K,Z){super(),this.destination=K,this.source=Z}next(K){var Z,ae;null===(ae=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===ae||ae.call(Z,K)}error(K){var Z,ae;null===(ae=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===ae||ae.call(Z,K)}complete(){var K,Z;null===(Z=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===Z||Z.call(K)}_subscribe(K){var Z,ae;return null!==(ae=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(K))&&void 0!==ae?ae:W.Lc}}},305:(wt,Me,H)=>{H.d(Me,{Hp:()=>Ue,Lv:()=>ae});var d=H(4674),W=H(7394),F=H(2653),ne=H(3894),ce=H(2420);const ue=we("C",void 0,void 0);function we(se,Se,de){return{kind:se,value:Se,error:de}}var K=H(7599),Z=H(1441);class ae extends W.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,W.Nn)(Se)&&Se.add(this)):this.destination=yt}static create(Se,de,be){return new Ue(Se,de,be)}next(Se){this.isStopped?kt(function Pe(se){return we("N",se,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?kt(function Ie(se){return we("E",void 0,se)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?kt(ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Le(se,Se){return Ge.call(se,Se)}class nt{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:de}=this;if(de.next)try{de.next(Se)}catch(be){it(be)}}error(Se){const{partialObserver:de}=this;if(de.error)try{de.error(Se)}catch(be){it(be)}else it(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(de){it(de)}}}class Ue extends ae{constructor(Se,de,be){let Ve;if(super(),(0,d.m)(Se)||!Se)Ve={next:Se??void 0,error:de??void 0,complete:be??void 0};else{let re;this&&F.config.useDeprecatedNextContext?(re=Object.create(Se),re.unsubscribe=()=>this.unsubscribe(),Ve={next:Se.next&&Le(Se.next,re),error:Se.error&&Le(Se.error,re),complete:Se.complete&&Le(Se.complete,re)}):Ve=Se}this.destination=new nt(Ve)}}function it(se){F.config.useDeprecatedSynchronousErrorHandling?(0,Z.O)(se):(0,ne.h)(se)}function kt(se,Se){const{onStoppedNotification:de}=F.config;de&&K.z.setTimeout(()=>de(se,Se))}const yt={closed:!0,next:ce.Z,error:function He(se){throw se},complete:ce.Z}},7394:(wt,Me,H)=>{H.d(Me,{Lc:()=>ue,w0:()=>ce,Nn:()=>Ie});var d=H(4674);const F=(0,H(2306).d)(we=>function(Z){we(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((ae,Ge)=>`${Ge+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var ne=H(9039);class ce{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Le of Z)Le.remove(this);else Z.remove(this);const{initialTeardown:ae}=this;if((0,d.m)(ae))try{ae()}catch(Le){K=Le instanceof F?Le.errors:[Le]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Le of Ge)try{Pe(Le)}catch(nt){K=K??[],nt instanceof F?K=[...K,...nt.errors]:K.push(nt)}}if(K)throw new F(K)}}add(K){var Z;if(K&&K!==this)if(this.closed)Pe(K);else{if(K instanceof ce){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(K)}}_hasParent(K){const{_parentage:Z}=this;return Z===K||Array.isArray(Z)&&Z.includes(K)}_addParent(K){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(K),Z):Z?[Z,K]:K}_removeParent(K){const{_parentage:Z}=this;Z===K?this._parentage=null:Array.isArray(Z)&&(0,ne.P)(Z,K)}remove(K){const{_finalizers:Z}=this;Z&&(0,ne.P)(Z,K),K instanceof ce&&K._removeParent(this)}}ce.EMPTY=(()=>{const we=new ce;return we.closed=!0,we})();const ue=ce.EMPTY;function Ie(we){return we instanceof ce||we&&"closed"in we&&(0,d.m)(we.remove)&&(0,d.m)(we.add)&&(0,d.m)(we.unsubscribe)}function Pe(we){(0,d.m)(we)?we():we.unsubscribe()}},2653:(wt,Me,H)=>{H.d(Me,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(wt,Me,H)=>{H.d(Me,{E:()=>W});const W=new(H(5592).y)(ce=>ce.complete())},2459:(wt,Me,H)=>{H.d(Me,{D:()=>Se});var d=H(4829),W=H(3093),F=H(5137),ue=H(5592),Pe=H(4971),we=H(4674),K=H(7103);function ae(de,be){if(!de)throw new Error("Iterable cannot be null");return new ue.y(Ve=>{(0,K.f)(Ve,be,()=>{const re=de[Symbol.asyncIterator]();(0,K.f)(Ve,be,()=>{re.next().then(ct=>{ct.done?Ve.complete():Ve.next(ct.value)})},0,!0)})})}var Ge=H(8382),Le=H(4026),nt=H(4266),Ue=H(3664),it=H(5726),He=H(9853),kt=H(541);function Se(de,be){return be?function se(de,be){if(null!=de){if((0,Ge.c)(de))return function ne(de,be){return(0,d.Xf)(de).pipe((0,F.R)(be),(0,W.Q)(be))}(de,be);if((0,nt.z)(de))return function Ie(de,be){return new ue.y(Ve=>{let re=0;return be.schedule(function(){re===de.length?Ve.complete():(Ve.next(de[re++]),Ve.closed||this.schedule())})})}(de,be);if((0,Le.t)(de))return function ce(de,be){return(0,d.Xf)(de).pipe((0,F.R)(be),(0,W.Q)(be))}(de,be);if((0,it.D)(de))return ae(de,be);if((0,Ue.T)(de))return function Z(de,be){return new ue.y(Ve=>{let re;return(0,K.f)(Ve,be,()=>{re=de[Pe.h](),(0,K.f)(Ve,be,()=>{let ct,Ze;try{({value:ct,done:Ze}=re.next())}catch(un){return void Ve.error(un)}Ze?Ve.complete():Ve.next(ct)},0,!0)}),()=>(0,we.m)(re?.return)&&re.return()})}(de,be);if((0,kt.L)(de))return function yt(de,be){return ae((0,kt.Q)(de),be)}(de,be)}throw(0,He.z)(de)}(de,be):(0,d.Xf)(de)}},4829:(wt,Me,H)=>{H.d(Me,{Xf:()=>Ge});var d=H(7582),W=H(4266),F=H(4026),ne=H(5592),ce=H(8382),ue=H(5726),Ie=H(9853),Pe=H(3664),we=H(541),K=H(4674),Z=H(3894),ae=H(4850);function Ge(se){if(se instanceof ne.y)return se;if(null!=se){if((0,ce.c)(se))return function Le(se){return new ne.y(Se=>{const de=se[ae.L]();if((0,K.m)(de.subscribe))return de.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(se);if((0,W.z)(se))return function nt(se){return new ne.y(Se=>{for(let de=0;de<se.length&&!Se.closed;de++)Se.next(se[de]);Se.complete()})}(se);if((0,F.t)(se))return function Ue(se){return new ne.y(Se=>{se.then(de=>{Se.closed||(Se.next(de),Se.complete())},de=>Se.error(de)).then(null,Z.h)})}(se);if((0,ue.D)(se))return He(se);if((0,Pe.T)(se))return function it(se){return new ne.y(Se=>{for(const de of se)if(Se.next(de),Se.closed)return;Se.complete()})}(se);if((0,we.L)(se))return function kt(se){return He((0,we.Q)(se))}(se)}throw(0,Ie.z)(se)}function He(se){return new ne.y(Se=>{(function yt(se,Se){var de,be,Ve,re;return(0,d.mG)(this,void 0,void 0,function*(){try{for(de=(0,d.KL)(se);!(be=yield de.next()).done;)if(Se.next(be.value),Se.closed)return}catch(ct){Ve={error:ct}}finally{try{be&&!be.done&&(re=de.return)&&(yield re.call(de))}finally{if(Ve)throw Ve.error}}Se.complete()})})(se,Se).catch(de=>Se.error(de))})}},3019:(wt,Me,H)=>{H.d(Me,{T:()=>ue});var d=H(7537),W=H(4829),F=H(6232),ne=H(9940),ce=H(2459);function ue(...Ie){const Pe=(0,ne.yG)(Ie),we=(0,ne._6)(Ie,1/0),K=Ie;return K.length?1===K.length?(0,W.Xf)(K[0]):(0,d.J)(we)((0,ce.D)(K,Pe)):F.E}},2096:(wt,Me,H)=>{H.d(Me,{of:()=>F});var d=H(9940),W=H(2459);function F(...ne){const ce=(0,d.yG)(ne);return(0,W.D)(ne,ce)}},8251:(wt,Me,H)=>{H.d(Me,{x:()=>W});var d=H(305);function W(ne,ce,ue,Ie,Pe){return new F(ne,ce,ue,Ie,Pe)}class F extends d.Lv{constructor(ce,ue,Ie,Pe,we,K){super(ce),this.onFinalize=we,this.shouldUnsubscribe=K,this._next=ue?function(Z){try{ue(Z)}catch(ae){ce.error(ae)}}:super._next,this._error=Pe?function(Z){try{Pe(Z)}catch(ae){ce.error(ae)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(Z){ce.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ue}=this;super.unsubscribe(),!ue&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},3997:(wt,Me,H)=>{H.d(Me,{x:()=>ne});var d=H(2737),W=H(9360),F=H(8251);function ne(ue,Ie=d.y){return ue=ue??ce,(0,W.e)((Pe,we)=>{let K,Z=!0;Pe.subscribe((0,F.x)(we,ae=>{const Ge=Ie(ae);(Z||!ue(K,Ge))&&(Z=!1,K=Ge,we.next(ae))}))})}function ce(ue,Ie){return ue===Ie}},7398:(wt,Me,H)=>{H.d(Me,{U:()=>F});var d=H(9360),W=H(8251);function F(ne,ce){return(0,d.e)((ue,Ie)=>{let Pe=0;ue.subscribe((0,W.x)(Ie,we=>{Ie.next(ne.call(ce,we,Pe++))}))})}},7537:(wt,Me,H)=>{H.d(Me,{J:()=>F});var d=H(1631),W=H(2737);function F(ne=1/0){return(0,d.z)(W.y,ne)}},1631:(wt,Me,H)=>{H.d(Me,{z:()=>Pe});var d=H(7398),W=H(4829),F=H(9360),ne=H(7103),ce=H(8251),Ie=H(4674);function Pe(we,K,Z=1/0){return(0,Ie.m)(K)?Pe((ae,Ge)=>(0,d.U)((Le,nt)=>K(ae,Le,Ge,nt))((0,W.Xf)(we(ae,Ge))),Z):("number"==typeof K&&(Z=K),(0,F.e)((ae,Ge)=>function ue(we,K,Z,ae,Ge,Le,nt,Ue){const it=[];let He=0,kt=0,yt=!1;const se=()=>{yt&&!it.length&&!He&&K.complete()},Se=be=>He<ae?de(be):it.push(be),de=be=>{Le&&K.next(be),He++;let Ve=!1;(0,W.Xf)(Z(be,kt++)).subscribe((0,ce.x)(K,re=>{Ge?.(re),Le?Se(re):K.next(re)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(He--;it.length&&He<ae;){const re=it.shift();nt?(0,ne.f)(K,nt,()=>de(re)):de(re)}se()}catch(re){K.error(re)}}))};return we.subscribe((0,ce.x)(K,Se,()=>{yt=!0,se()})),()=>{Ue?.()}}(ae,Ge,we,Z)))}},3093:(wt,Me,H)=>{H.d(Me,{Q:()=>ne});var d=H(7103),W=H(9360),F=H(8251);function ne(ce,ue=0){return(0,W.e)((Ie,Pe)=>{Ie.subscribe((0,F.x)(Pe,we=>(0,d.f)(Pe,ce,()=>Pe.next(we),ue),()=>(0,d.f)(Pe,ce,()=>Pe.complete(),ue),we=>(0,d.f)(Pe,ce,()=>Pe.error(we),ue)))})}},3020:(wt,Me,H)=>{H.d(Me,{B:()=>ce});var d=H(4829),W=H(8645),F=H(305),ne=H(9360);function ce(Ie={}){const{connector:Pe=(()=>new W.x),resetOnError:we=!0,resetOnComplete:K=!0,resetOnRefCountZero:Z=!0}=Ie;return ae=>{let Ge,Le,nt,Ue=0,it=!1,He=!1;const kt=()=>{Le?.unsubscribe(),Le=void 0},yt=()=>{kt(),Ge=nt=void 0,it=He=!1},se=()=>{const Se=Ge;yt(),Se?.unsubscribe()};return(0,ne.e)((Se,de)=>{Ue++,!He&&!it&&kt();const be=nt=nt??Pe();de.add(()=>{Ue--,0===Ue&&!He&&!it&&(Le=ue(se,Z))}),be.subscribe(de),!Ge&&Ue>0&&(Ge=new F.Hp({next:Ve=>be.next(Ve),error:Ve=>{He=!0,kt(),Le=ue(yt,we,Ve),be.error(Ve)},complete:()=>{it=!0,kt(),Le=ue(yt,K),be.complete()}}),(0,d.Xf)(Se).subscribe(Ge))})(ae)}}function ue(Ie,Pe,...we){if(!0===Pe)return void Ie();if(!1===Pe)return;const K=new F.Hp({next:()=>{K.unsubscribe(),Ie()}});return(0,d.Xf)(Pe(...we)).subscribe(K)}},5137:(wt,Me,H)=>{H.d(Me,{R:()=>W});var d=H(9360);function W(F,ne=0){return(0,d.e)((ce,ue)=>{ue.add(F.schedule(()=>ce.subscribe(ue),ne))})}},4664:(wt,Me,H)=>{H.d(Me,{w:()=>ne});var d=H(4829),W=H(9360),F=H(8251);function ne(ce,ue){return(0,W.e)((Ie,Pe)=>{let we=null,K=0,Z=!1;const ae=()=>Z&&!we&&Pe.complete();Ie.subscribe((0,F.x)(Pe,Ge=>{we?.unsubscribe();let Le=0;const nt=K++;(0,d.Xf)(ce(Ge,nt)).subscribe(we=(0,F.x)(Pe,Ue=>Pe.next(ue?ue(Ge,Ue,nt,Le++):Ue),()=>{we=null,ae()}))},()=>{Z=!0,ae()}))})}},9397:(wt,Me,H)=>{H.d(Me,{b:()=>ce});var d=H(4674),W=H(9360),F=H(8251),ne=H(2737);function ce(ue,Ie,Pe){const we=(0,d.m)(ue)||Ie||Pe?{next:ue,error:Ie,complete:Pe}:ue;return we?(0,W.e)((K,Z)=>{var ae;null===(ae=we.subscribe)||void 0===ae||ae.call(we);let Ge=!0;K.subscribe((0,F.x)(Z,Le=>{var nt;null===(nt=we.next)||void 0===nt||nt.call(we,Le),Z.next(Le)},()=>{var Le;Ge=!1,null===(Le=we.complete)||void 0===Le||Le.call(we),Z.complete()},Le=>{var nt;Ge=!1,null===(nt=we.error)||void 0===nt||nt.call(we,Le),Z.error(Le)},()=>{var Le,nt;Ge&&(null===(Le=we.unsubscribe)||void 0===Le||Le.call(we)),null===(nt=we.finalize)||void 0===nt||nt.call(we)}))}):ne.y}},1954:(wt,Me,H)=>{H.d(Me,{o:()=>ce});var d=H(7394);class W extends d.w0{constructor(Ie,Pe){super()}schedule(Ie,Pe=0){return this}}const F={setInterval(ue,Ie,...Pe){const{delegate:we}=F;return we?.setInterval?we.setInterval(ue,Ie,...Pe):setInterval(ue,Ie,...Pe)},clearInterval(ue){const{delegate:Ie}=F;return(Ie?.clearInterval||clearInterval)(ue)},delegate:void 0};var ne=H(9039);class ce extends W{constructor(Ie,Pe){super(Ie,Pe),this.scheduler=Ie,this.work=Pe,this.pending=!1}schedule(Ie,Pe=0){var we;if(this.closed)return this;this.state=Ie;const K=this.id,Z=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(Z,K,Pe)),this.pending=!0,this.delay=Pe,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(Z,this.id,Pe),this}requestAsyncId(Ie,Pe,we=0){return F.setInterval(Ie.flush.bind(Ie,this),we)}recycleAsyncId(Ie,Pe,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return Pe;null!=Pe&&F.clearInterval(Pe)}execute(Ie,Pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(Ie,Pe);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,Pe){let K,we=!1;try{this.work(Ie)}catch(Z){we=!0,K=Z||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:Pe}=this,{actions:we}=Pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(we,this),null!=Ie&&(this.id=this.recycleAsyncId(Pe,Ie,null)),this.delay=null,super.unsubscribe()}}}},2631:(wt,Me,H)=>{H.d(Me,{v:()=>F});var d=H(4552);class W{constructor(ce,ue=W.now){this.schedulerActionCtor=ce,this.now=ue}schedule(ce,ue=0,Ie){return new this.schedulerActionCtor(this,ce).schedule(Ie,ue)}}W.now=d.l.now;class F extends W{constructor(ce,ue=W.now){super(ce,ue),this.actions=[],this._active=!1}flush(ce){const{actions:ue}=this;if(this._active)return void ue.push(ce);let Ie;this._active=!0;do{if(Ie=ce.execute(ce.state,ce.delay))break}while(ce=ue.shift());if(this._active=!1,Ie){for(;ce=ue.shift();)ce.unsubscribe();throw Ie}}}},6321:(wt,Me,H)=>{H.d(Me,{P:()=>ne,z:()=>F});var d=H(1954);const F=new(H(2631).v)(d.o),ne=F},4552:(wt,Me,H)=>{H.d(Me,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},7599:(wt,Me,H)=>{H.d(Me,{z:()=>d});const d={setTimeout(W,F,...ne){const{delegate:ce}=d;return ce?.setTimeout?ce.setTimeout(W,F,...ne):setTimeout(W,F,...ne)},clearTimeout(W){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(W)},delegate:void 0}},4971:(wt,Me,H)=>{H.d(Me,{h:()=>W});const W=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(wt,Me,H)=>{H.d(Me,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(wt,Me,H)=>{H.d(Me,{_6:()=>ue,jO:()=>ne,yG:()=>ce});var d=H(4674),W=H(671);function F(Ie){return Ie[Ie.length-1]}function ne(Ie){return(0,d.m)(F(Ie))?Ie.pop():void 0}function ce(Ie){return(0,W.K)(F(Ie))?Ie.pop():void 0}function ue(Ie,Pe){return"number"==typeof F(Ie)?Ie.pop():Pe}},9039:(wt,Me,H)=>{function d(W,F){if(W){const ne=W.indexOf(F);0<=ne&&W.splice(ne,1)}}H.d(Me,{P:()=>d})},2306:(wt,Me,H)=>{function d(W){const ne=W(ce=>{Error.call(ce),ce.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}H.d(Me,{d:()=>d})},1441:(wt,Me,H)=>{H.d(Me,{O:()=>ne,x:()=>F});var d=H(2653);let W=null;function F(ce){if(d.config.useDeprecatedSynchronousErrorHandling){const ue=!W;if(ue&&(W={errorThrown:!1,error:null}),ce(),ue){const{errorThrown:Ie,error:Pe}=W;if(W=null,Ie)throw Pe}}else ce()}function ne(ce){d.config.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=ce)}},7103:(wt,Me,H)=>{function d(W,F,ne,ce=0,ue=!1){const Ie=F.schedule(function(){ne(),ue?W.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(W.add(Ie),!ue)return Ie}H.d(Me,{f:()=>d})},2737:(wt,Me,H)=>{function d(W){return W}H.d(Me,{y:()=>d})},4266:(wt,Me,H)=>{H.d(Me,{z:()=>d});const d=W=>W&&"number"==typeof W.length&&"function"!=typeof W},5726:(wt,Me,H)=>{H.d(Me,{D:()=>W});var d=H(4674);function W(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},4674:(wt,Me,H)=>{function d(W){return"function"==typeof W}H.d(Me,{m:()=>d})},8382:(wt,Me,H)=>{H.d(Me,{c:()=>F});var d=H(4850),W=H(4674);function F(ne){return(0,W.m)(ne[d.L])}},3664:(wt,Me,H)=>{H.d(Me,{T:()=>F});var d=H(4971),W=H(4674);function F(ne){return(0,W.m)(ne?.[d.h])}},4026:(wt,Me,H)=>{H.d(Me,{t:()=>W});var d=H(4674);function W(F){return(0,d.m)(F?.then)}},541:(wt,Me,H)=>{H.d(Me,{L:()=>ne,Q:()=>F});var d=H(7582),W=H(4674);function F(ce){return(0,d.FC)(this,arguments,function*(){const Ie=ce.getReader();try{for(;;){const{value:Pe,done:we}=yield(0,d.qq)(Ie.read());if(we)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Pe)}}finally{Ie.releaseLock()}})}function ne(ce){return(0,W.m)(ce?.getReader)}},671:(wt,Me,H)=>{H.d(Me,{K:()=>W});var d=H(4674);function W(F){return F&&(0,d.m)(F.schedule)}},9360:(wt,Me,H)=>{H.d(Me,{A:()=>W,e:()=>F});var d=H(4674);function W(ne){return(0,d.m)(ne?.lift)}function F(ne){return ce=>{if(W(ce))return ce.lift(function(ue){try{return ne(ue,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(wt,Me,H)=>{function d(){}H.d(Me,{Z:()=>d})},8407:(wt,Me,H)=>{H.d(Me,{U:()=>F,z:()=>W});var d=H(2737);function W(...ne){return F(ne)}function F(ne){return 0===ne.length?d.y:1===ne.length?ne[0]:function(ue){return ne.reduce((Ie,Pe)=>Pe(Ie),ue)}}},3894:(wt,Me,H)=>{H.d(Me,{h:()=>F});var d=H(2653),W=H(7599);function F(ne){W.z.setTimeout(()=>{const{onUnhandledError:ce}=d.config;if(!ce)throw ne;ce(ne)})}},9853:(wt,Me,H)=>{function d(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(Me,{z:()=>d})},5879:(wt,Me,H)=>{H.d(Me,{$8M:()=>xe,$WT:()=>_s,$Z:()=>ow,AFp:()=>z0,ALo:()=>Nm,AaK:()=>ae,AsE:()=>uv,BQk:()=>sv,CHM:()=>xu,CRH:()=>Oa,DdM:()=>_h,Dn7:()=>Fm,EJc:()=>Ss,EiD:()=>vD,EpF:()=>ym,F$t:()=>SI,F4k:()=>Zw,FYo:()=>Y0,FiY:()=>oo,Gf:()=>bS,GfV:()=>sg,GkF:()=>Yw,Gpc:()=>nt,HDt:()=>xc,Hsn:()=>Jw,Ikx:()=>fx,JOm:()=>rc,JVY:()=>k0,JZr:()=>yt,KtG:()=>Zc,L6k:()=>R0,LAX:()=>zk,LFG:()=>Zn,LSH:()=>L0,Lbi:()=>Es,Lck:()=>Mx,MAs:()=>fc,MMx:()=>Rd,NdJ:()=>lv,O4$:()=>Du,Ojb:()=>n1,OlP:()=>Pn,Oqu:()=>lx,P3R:()=>B0,PXZ:()=>HS,Q6J:()=>_m,QGY:()=>wg,QbO:()=>rs,Qsj:()=>ND,R0b:()=>Ur,RDi:()=>gy,Rgc:()=>Um,SBq:()=>og,Sil:()=>he,Suo:()=>jv,TTD:()=>Gc,TgZ:()=>yg,Udp:()=>ox,VKq:()=>QT,VuI:()=>ub,W1O:()=>xl,WFA:()=>cv,WLB:()=>XT,X6Q:()=>nb,XFs:()=>rt,Xpm:()=>aa,Xq5:()=>Zy,Xts:()=>qf,Y36:()=>rm,YKP:()=>kd,YNc:()=>Ww,Yjl:()=>wp,Yz7:()=>hn,Z0I:()=>ci,ZZ4:()=>c_,_Bn:()=>Lg,_UZ:()=>mc,_Vd:()=>Qu,_c5:()=>QR,_uU:()=>bm,aQg:()=>lb,c2e:()=>$m,cJS:()=>Ai,cg1:()=>xm,d8E:()=>pv,dDg:()=>HR,dqk:()=>on,eBb:()=>Hk,eFA:()=>eb,eJc:()=>Od,ekj:()=>qI,eoX:()=>US,evT:()=>bd,f3M:()=>dn,g9A:()=>eg,h0i:()=>vl,hGG:()=>ZS,hij:()=>Cg,iGM:()=>zn,ifc:()=>Mt,ip1:()=>n_,jDz:()=>Ug,kL8:()=>_v,kcU:()=>tl,l5B:()=>eS,lG2:()=>la,lcZ:()=>Nx,lqb:()=>Sa,lri:()=>FS,mCW:()=>Xp,n5z:()=>Ho,n_E:()=>$g,oAB:()=>Rl,oxw:()=>TI,pB0:()=>lD,q3G:()=>Ji,q4F:()=>Xu,qFp:()=>u_,qLn:()=>tm,qOj:()=>Aw,qZA:()=>vg,qzn:()=>Gf,rWj:()=>LS,rg0:()=>q_,sBO:()=>Fd,s_b:()=>qg,soG:()=>i_,tb:()=>sE,tp0:()=>jo,uIk:()=>gg,vHH:()=>se,vpe:()=>bl,wAp:()=>Lt,xp6:()=>Fy,ynx:()=>ov,z2F:()=>Fa,z3N:()=>hl,zSh:()=>V0,zs3:()=>Ed});var d=H(8645),W=H(7394),F=H(5619),ne=H(5592),ce=H(3019),ue=H(2096),Ie=H(3020),Pe=H(4664),we=H(3997);function K(a){for(let l in a)if(a[l]===K)return l;throw Error("Could not find renamed property on target object.")}function Z(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ae(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ae).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function Ge(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const Le=K({__forward_ref__:K});function nt(a){return a.__forward_ref__=nt,a.toString=function(){return ae(this())},a}function Ue(a){return it(a)?a():a}function it(a){return"function"==typeof a&&a.hasOwnProperty(Le)&&a.__forward_ref__===nt}function He(a){return a&&!!a.\u0275providers}const yt="https://g.co/ng/security#xss";class se extends Error{constructor(l,u){super(function Se(a,l){return`NG0${Math.abs(a)}${l?": "+l:""}`}(l,u)),this.code=l}}function de(a){return"string"==typeof a?a:null==a?"":String(a)}function Ze(a,l){throw new se(-201,!1)}function ut(a,l){null==a&&function Dt(a,l,u,f){throw new Error(`ASSERTION ERROR: ${a}`+(null==f?"":` [Expected=> ${u} ${f} ${l} <=Actual]`))}(l,a,null,"!=")}function hn(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Ai(a){return{providers:a.providers||[],imports:a.imports||[]}}function wi(a){return to(a,rr)||to(a,Ar)}function ci(a){return null!==wi(a)}function to(a,l){return a.hasOwnProperty(l)?a[l]:null}function vo(a){return a&&(a.hasOwnProperty(di)||a.hasOwnProperty(Zo))?a[di]:null}const rr=K({\u0275prov:K}),di=K({\u0275inj:K}),Ar=K({ngInjectableDef:K}),Zo=K({ngInjectorDef:K});var rt=(()=>((rt=rt||{})[rt.Default=0]="Default",rt[rt.Host=1]="Host",rt[rt.Self=2]="Self",rt[rt.SkipSelf=4]="SkipSelf",rt[rt.Optional=8]="Optional",rt))();let xt;function cn(a){const l=xt;return xt=a,l}function Mi(a,l,u){const f=wi(a);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:u&rt.Optional?null:void 0!==l?l:void Ze(ae(a))}const on=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),vr={},Gt="__NG_DI_FLAG__",Kn="ngTempTokenPath",Qo=/\n/gm,ui="__source";let Bn;function Yn(a){const l=Bn;return Bn=a,l}function ki(a,l=rt.Default){if(void 0===Bn)throw new se(-203,!1);return null===Bn?Mi(a,void 0,l):Bn.get(a,l&rt.Optional?null:void 0,l)}function Zn(a,l=rt.Default){return(function At(){return xt}()||ki)(Ue(a),l)}function dn(a,l=rt.Default){return Zn(a,Y(l))}function Y(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function q(a){const l=[];for(let u=0;u<a.length;u++){const f=Ue(a[u]);if(Array.isArray(f)){if(0===f.length)throw new se(900,!1);let m,g=rt.Default;for(let b=0;b<f.length;b++){const E=f[b],T=z(E);"number"==typeof T?-1===T?m=E.token:g|=T:m=E}l.push(Zn(m,g))}else l.push(Zn(f))}return l}function B(a,l){return a[Gt]=l,a.prototype[Gt]=l,a}function z(a){return a[Gt]}function Ee(a){return{toString:a}.toString()}var tt=(()=>((tt=tt||{})[tt.OnPush=0]="OnPush",tt[tt.Default=1]="Default",tt))(),Mt=(()=>{return(a=Mt||(Mt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Mt;var a})();const Tt={},Et=[],Vt=K({\u0275cmp:K}),Rn=K({\u0275dir:K}),Yt=K({\u0275pipe:K}),Wi=K({\u0275mod:K}),sr=K({\u0275fac:K}),ve=K({__NG_ELEMENT_ID__:K}),le=K({__NG_ENV_ID__:K});function We(a,l,u){let f=a.length;for(;;){const m=a.indexOf(l,u);if(-1===m)return m;if(0===m||a.charCodeAt(m-1)<=32){const g=l.length;if(m+g===f||a.charCodeAt(m+g)<=32)return m}u=m+1}}function Ct(a,l,u){let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const g=u[f++],b=u[f++],E=u[f++];a.setAttribute(l,b,E,g)}else{const g=m,b=u[++f];tn(g)?a.setProperty(l,g,b):a.setAttribute(l,g,b),f++}}return f}function zt(a){return 3===a||4===a||6===a}function tn(a){return 64===a.charCodeAt(0)}function _n(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let f=0;f<l.length;f++){const m=l[f];"number"==typeof m?u=m:0===u||qi(a,u,m,null,-1===u||2===u?l[++f]:null)}}return a}function qi(a,l,u,f,m){let g=0,b=a.length;if(-1===l)b=-1;else for(;g<a.length;){const E=a[g++];if("number"==typeof E){if(E===l){b=-1;break}if(E>l){b=g-1;break}}}for(;g<a.length;){const E=a[g];if("number"==typeof E)break;if(E===u){if(null===f)return void(null!==m&&(a[g+1]=m));if(f===a[g+1])return void(a[g+2]=m)}g++,null!==f&&g++,null!==m&&g++}-1!==b&&(a.splice(b,0,l),g=b+1),a.splice(g++,0,u),null!==f&&a.splice(g++,0,f),null!==m&&a.splice(g++,0,m)}const hi="ng-template";function Ns(a,l,u){let f=0,m=!0;for(;f<a.length;){let g=a[f++];if("string"==typeof g&&m){const b=a[f++];if(u&&"class"===g&&-1!==We(b.toLowerCase(),l,0))return!0}else{if(1===g){for(;f<a.length&&"string"==typeof(g=a[f++]);)if(g.toLowerCase()===l)return!0;return!1}"number"==typeof g&&(m=!1)}}return!1}function $a(a){return 4===a.type&&a.value!==hi}function Ml(a,l,u){return l===(4!==a.type||u?a.value:hi)}function Yh(a,l,u){let f=4;const m=a.attrs||[],g=function gs(a){for(let l=0;l<a.length;l++)if(zt(a[l]))return l;return a.length}(m);let b=!1;for(let E=0;E<l.length;E++){const T=l[E];if("number"!=typeof T){if(!b)if(4&f){if(f=2|1&f,""!==T&&!Ml(a,T,u)||""===T&&1===l.length){if(br(f))return!1;b=!0}}else{const M=8&f?T:l[++E];if(8&f&&null!==a.attrs){if(!Ns(a.attrs,M,u)){if(br(f))return!1;b=!0}continue}const $=Fs(8&f?"class":T,m,$a(a),u);if(-1===$){if(br(f))return!1;b=!0;continue}if(""!==M){let J;J=$>g?"":m[$+1].toLowerCase();const oe=8&f?J:null;if(oe&&-1!==We(oe,M,0)||2&f&&M!==J){if(br(f))return!1;b=!0}}}}else{if(!b&&!br(f)&&!br(T))return!1;if(b&&br(T))continue;b=!1,f=T|1&f}}return br(f)||b}function br(a){return 0==(1&a)}function Fs(a,l,u,f){if(null===l)return-1;let m=0;if(f||!u){let g=!1;for(;m<l.length;){const b=l[m];if(b===a)return m;if(3===b||6===b)g=!0;else{if(1===b||2===b){let E=l[++m];for(;"string"==typeof E;)E=l[++m];continue}if(4===b)break;if(0===b){m+=4;continue}}m+=g?1:2}return-1}return function Ci(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const f=a[u];if("number"==typeof f)return-1;if(f===l)return u;u++}return-1}(l,a)}function sa(a,l,u=!1){for(let f=0;f<l.length;f++)if(Yh(a,l[f],u))return!0;return!1}function j_(a,l){e:for(let u=0;u<l.length;u++){const f=l[u];if(a.length===f.length){for(let m=0;m<a.length;m++)if(a[m]!==f[m])continue e;return!0}}return!1}function no(a,l){return a?":not("+l.trim()+")":l}function $_(a){let l=a[0],u=1,f=2,m="",g=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&f){const E=a[++u];m+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&f?m+="."+b:4&f&&(m+=" "+b);else""!==m&&!br(b)&&(l+=no(g,m),m=""),f=b,g=g||!br(f);u++}return""!==m&&(l+=no(g,m)),l}function aa(a){return Ee(()=>{const l=Pc(a),u={...l,decls:a.decls,vars:a.vars,template:a.template,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,onPush:a.changeDetection===tt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&a.dependencies||null,getStandaloneInjector:null,signals:a.signals??!1,data:a.data||{},encapsulation:a.encapsulation||Mt.Emulated,styles:a.styles||Et,_:null,schemas:a.schemas||null,tView:null,id:""};Ol(u);const f=a.dependencies;return u.directiveDefs=Ga(f,!1),u.pipeDefs=Ga(f,!0),u.id=function Qh(a){let l=0;const u=[a.selectors,a.ngContentSelectors,a.hostVars,a.hostAttrs,a.consts,a.vars,a.decls,a.encapsulation,a.standalone,a.signals,a.exportAs,JSON.stringify(a.inputs),JSON.stringify(a.outputs),Object.getOwnPropertyNames(a.type.prototype),!!a.contentQueries,!!a.viewQuery].join("|");for(const m of u)l=Math.imul(31,l)+m.charCodeAt(0)<<0;return l+=2147483648,"c"+l}(u),u})}function bp(a){return Zt(a)||Ki(a)}function kl(a){return null!==a}function Rl(a){return Ee(()=>({type:a.type,bootstrap:a.bootstrap||Et,declarations:a.declarations||Et,imports:a.imports||Et,exports:a.exports||Et,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Pl(a,l){if(null==a)return Tt;const u={};for(const f in a)if(a.hasOwnProperty(f)){let m=a[f],g=m;Array.isArray(m)&&(g=m[1],m=m[0]),u[m]=f,l&&(l[m]=g)}return u}function la(a){return Ee(()=>{const l=Pc(a);return Ol(l),l})}function wp(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function Zt(a){return a[Vt]||null}function Ki(a){return a[Rn]||null}function An(a){return a[Yt]||null}function _s(a){const l=Zt(a)||Ki(a)||An(a);return null!==l&&l.standalone}function kr(a,l){const u=a[Wi]||null;if(!u&&!0===l)throw new Error(`Type ${ae(a)} does not have '\u0275mod' property.`);return u}function Pc(a){const l={};return{type:a.type,providersResolver:null,factory:null,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:l,inputTransforms:null,inputConfig:a.inputs||Tt,exportAs:a.exportAs||null,standalone:!0===a.standalone,signals:!0===a.signals,selectors:a.selectors||Et,viewQuery:a.viewQuery||null,features:a.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Pl(a.inputs,l),outputs:Pl(a.outputs)}}function Ol(a){a.features?.forEach(l=>l(a))}function Ga(a,l){if(!a)return null;const u=l?An:bp;return()=>("function"==typeof a?a():a).map(f=>u(f)).filter(kl)}const Di=0,ft=1,Wt=2,ni=3,Rr=4,Oc=5,ar=6,ys=7,Nn=8,Lo=9,ca=10,Ft=11,Fl=12,Nc=13,Ls=14,Qn=15,Fc=16,da=17,$r=18,Wa=19,Lc=20,lr=21,Pr=22,Uc=23,Uo=24,vn=25,Xo=1,ua=2,io=7,qa=9,wr=11;function xr(a){return Array.isArray(a)&&"object"==typeof a[Xo]}function Er(a){return Array.isArray(a)&&!0===a[Xo]}function tu(a){return 0!=(4&a.flags)}function Bo(a){return a.componentOffset>-1}function Us(a){return 1==(1&a.flags)}function Vn(a){return!!a.template}function Ya(a){return 0!=(512&a[Wt])}function Bs(a,l){return a.hasOwnProperty(sr)?a[sr]:null}let Bl=on.WeakRef??class Ul{constructor(l){this.ref=l}deref(){return this.ref}},Hc=0,wo=null,zc=!1;function mi(a){const l=wo;return wo=a,l}class ro{constructor(){this.id=Hc++,this.ref=function Ip(a){return new Bl(a)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[l,u]of this.producers){const f=u.producerNode.deref();if(void 0!==f&&u.atTrackingVersion===this.trackingVersion){if(f.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(l),f?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const l=zc;zc=!0;try{for(const[u,f]of this.consumers){const m=f.consumerNode.deref();void 0!==m&&m.trackingVersion===f.atTrackingVersion?m.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),m?.producers.delete(this.id))}}finally{zc=l}}producerAccessed(){if(zc)throw new Error("");if(null===wo)return;let l=wo.producers.get(this.id);void 0===l?(l={consumerNode:wo.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:wo.trackingVersion},wo.producers.set(this.id,l),this.consumers.set(wo.id,l)):(l.seenValueVersion=this.valueVersion,l.atTrackingVersion=wo.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==wo?.consumerAllowSignalWrites}producerPollStatus(l){return this.valueVersion!==l||(this.onProducerUpdateValueVersion(),this.valueVersion!==l)}}let sf=null;function q_(a){const l=mi(null);try{return a()}finally{mi(l)}}const Vl=()=>{};class Ap extends ro{constructor(l,u,f){super(),this.watch=l,this.schedule=u,this.dirty=!1,this.cleanupFn=Vl,this.registerOnCleanup=m=>{this.cleanupFn=m},this.consumerAllowSignalWrites=f}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const l=mi(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Vl,this.watch(this.registerOnCleanup)}finally{mi(l)}}cleanup(){this.cleanupFn()}}class Hl{constructor(l,u,f){this.previousValue=l,this.currentValue=u,this.firstChange=f}isFirstChange(){return this.firstChange}}function Gc(){return Za}function Za(a){return a.type.prototype.ngOnChanges&&(a.setInput=mu),fu}function fu(){const a=pu(this),l=a?.current;if(l){const u=a.previous;if(u===Tt)a.previous=l;else for(let f in l)u[f]=l[f];a.current=null,this.ngOnChanges(l)}}function mu(a,l,u,f){const m=this.declaredInputs[u],g=pu(a)||function lf(a,l){return a[Mp]=l}(a,{previous:Tt,current:null}),b=g.current||(g.current={}),E=g.previous,T=E[m];b[m]=new Hl(T&&T.currentValue,l,E===Tt),a[f]=l}Gc.ngInherit=!0;const Mp="__ngSimpleChanges__";function pu(a){return a[Mp]||null}const Vo=function(a,l,u){},yu="svg";function Fn(a){for(;Array.isArray(a);)a=a[Di];return a}function Qa(a,l){return Fn(l[a])}function Cr(a,l){return Fn(l[a.index])}function cf(a,l){return a.data[l]}function zs(a,l){return a[l]}function xo(a,l){const u=l[a];return xr(u)?u:u[Di]}function es(a,l){return null==l?null:a[l]}function hf(a){a[da]=0}function vu(a){1024&a[Wt]||(a[Wt]|=1024,Ja(a,1))}function qc(a){1024&a[Wt]&&(a[Wt]&=-1025,Ja(a,-1))}function Ja(a,l){let u=a[ni];if(null===u)return;u[Oc]+=l;let f=u;for(u=u[ni];null!==u&&(1===l&&1===f[Oc]||-1===l&&0===f[Oc]);)u[Oc]+=l,f=u,u=u[ni]}const Ut={lFrame:Cu(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function zl(){return Ut.bindingsEnabled}function Co(){return null!==Ut.skipHydrationRootTNode}function Oe(){return Ut.lFrame.lView}function fn(){return Ut.lFrame.tView}function xu(a){return Ut.lFrame.contextLView=a,a[Nn]}function Zc(a){return Ut.lFrame.contextLView=null,a}function Fi(){let a=Np();for(;null!==a&&64===a.type;)a=a.parent;return a}function Np(){return Ut.lFrame.currentTNode}function Or(a,l){const u=Ut.lFrame;u.currentTNode=a,u.isParent=l}function Fp(){return Ut.lFrame.isParent}function pi(){Ut.lFrame.isParent=!1}function cr(){const a=Ut.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Xn(){return Ut.lFrame.bindingIndex++}function ns(a){const l=Ut.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function $l(a,l){const u=Ut.lFrame;u.bindingIndex=u.bindingRootIndex=a,_f(l)}function _f(a){Ut.lFrame.currentDirectiveIndex=a}function Gl(a){const l=Ut.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function td(){return Ut.lFrame.currentQueryIndex}function js(a){Ut.lFrame.currentQueryIndex=a}function $s(a){const l=a[ft];return 2===l.type?l.declTNode:1===l.type?a[ar]:null}function el(a,l,u){if(u&rt.SkipSelf){let m=l,g=a;for(;!(m=m.parent,null!==m||u&rt.Host||(m=$s(g),null===m||(g=g[Ls],10&m.type))););if(null===m)return!1;l=m,a=g}const f=Ut.lFrame=id();return f.currentTNode=l,f.lView=a,!0}function nd(a){const l=id(),u=a[ft];Ut.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function id(){const a=Ut.lFrame,l=null===a?null:a.child;return null===l?Cu(a):l}function Cu(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function Y_(){const a=Ut.lFrame;return Ut.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const yf=Y_;function vf(){const a=Y_();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Wr(){return Ut.lFrame.selectedIndex}function Gs(a){Ut.lFrame.selectedIndex=a}function jn(){const a=Ut.lFrame;return cf(a.tView,a.selectedIndex)}function Du(){Ut.lFrame.currentNamespace=yu}function tl(){!function Iu(){Ut.lFrame.currentNamespace=null}()}let Su=!0;function Wl(){return Su}function ga(a){Su=a}function rd(a,l){for(let u=l.directiveStart,f=l.directiveEnd;u<f;u++){const g=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:M,ngOnDestroy:O}=g;b&&(a.contentHooks??=[]).push(-u,b),E&&((a.contentHooks??=[]).push(u,E),(a.contentCheckHooks??=[]).push(u,E)),T&&(a.viewHooks??=[]).push(-u,T),M&&((a.viewHooks??=[]).push(u,M),(a.viewCheckHooks??=[]).push(u,M)),null!=O&&(a.destroyHooks??=[]).push(u,O)}}function ql(a,l,u){is(a,l,3,u)}function Au(a,l,u,f){(3&a[Wt])===u&&is(a,l,u,f)}function od(a,l){let u=a[Wt];(3&u)===l&&(u&=8191,u+=1,a[Wt]=u)}function is(a,l,u,f){const g=f??-1,b=l.length-1;let E=0;for(let T=void 0!==f?65535&a[da]:0;T<b;T++)if("number"==typeof l[T+1]){if(E=l[T],null!=f&&E>=f)break}else l[T]<0&&(a[da]+=65536),(E<g||-1==g)&&(Ws(a,u,l,T),a[da]=(4294901760&a[da])+T+2),T++}function qt(a,l){Vo(4,a,l);const u=mi(null);try{l.call(a)}finally{mi(u),Vo(5,a,l)}}function Ws(a,l,u,f){const m=u[f]<0,g=u[f+1],E=a[m?-u[f]:u[f]];m?a[Wt]>>13<a[da]>>16&&(3&a[Wt])===l&&(a[Wt]+=8192,qt(E,g)):qt(E,g)}const vs=-1;class nl{constructor(l,u,f){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=f}}function Ru(a){return a!==vs}function Do(a){return 32767&a}function sd(a,l){let u=function xf(a){return a>>16}(a),f=l;for(;u>0;)f=f[Ls],u--;return f}let va=!0;function Yl(a){const l=va;return va=a,l}const Ht=255,mt=5;let Bi=0;const rn={};function qs(a,l){const u=_t(a,l);if(-1!==u)return u;const f=l[ft];f.firstCreatePass&&(a.injectorIndex=l.length,Jn(f.data,a),Jn(l,null),Jn(f.blueprint,null));const m=bs(a,l),g=a.injectorIndex;if(Ru(m)){const b=Do(m),E=sd(m,l),T=E[ft].data;for(let M=0;M<8;M++)l[g+M]=E[b+M]|T[b+M]}return l[g+8]=m,g}function Jn(a,l){a.push(0,0,0,0,0,0,0,0,l)}function _t(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function bs(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,f=null,m=l;for(;null!==m;){if(f=Xl(m),null===f)return vs;if(u++,m=m[Ls],-1!==f.injectorIndex)return f.injectorIndex|u<<16}return vs}function Ef(a,l,u){!function ba(a,l,u){let f;"string"==typeof u?f=u.charCodeAt(0)||0:u.hasOwnProperty(ve)&&(f=u[ve]),null==f&&(f=u[ve]=Bi++);const m=f&Ht;l.data[a+(m>>mt)]|=1<<m}(a,l,u)}function Ks(a,l,u){if(u&rt.Optional||void 0!==a)return a;Ze()}function Pu(a,l,u,f){if(u&rt.Optional&&void 0===f&&(f=null),!(u&(rt.Self|rt.Host))){const m=a[Lo],g=cn(void 0);try{return m?m.get(l,f,u&rt.Optional):Mi(l,f,u&rt.Optional)}finally{cn(g)}}return Ks(f,0,u)}function rl(a,l,u,f=rt.Default,m){if(null!==a){if(2048&l[Wt]&&!(f&rt.Self)){const b=function Df(a,l,u,f,m){let g=a,b=l;for(;null!==g&&null!==b&&2048&b[Wt]&&!(512&b[Wt]);){const E=Zi(g,b,u,f|rt.Self,rn);if(E!==rn)return E;let T=g.parent;if(!T){const M=b[Lc];if(M){const O=M.get(u,rn,f);if(O!==rn)return O}T=Xl(b),b=b[Ls]}g=T}return m}(a,l,u,f,rn);if(b!==rn)return b}const g=Zi(a,l,u,f,rn);if(g!==rn)return g}return Pu(l,u,f,m)}function Zi(a,l,u,f,m){const g=function Nr(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(ve)?a[ve]:void 0;return"number"==typeof l?l>=0?l&Ht:Ql:l}(u);if("function"==typeof g){if(!el(l,a,f))return f&rt.Host?Ks(m,0,f):Pu(l,u,f,m);try{const b=g(f);if(null!=b||f&rt.Optional)return b;Ze()}finally{yf()}}else if("number"==typeof g){let b=null,E=_t(a,l),T=vs,M=f&rt.Host?l[Qn][ar]:null;for((-1===E||f&rt.SkipSelf)&&(T=-1===E?bs(a,l):l[E+8],T!==vs&&Zl(f,!1)?(b=l[ft],E=Do(T),l=sd(T,l)):E=-1);-1!==E;){const O=l[ft];if(ol(g,E,O.data)){const $=Ii(E,l,u,b,f,M);if($!==rn)return $}T=l[E+8],T!==vs&&Zl(f,l[ft].data[E+8]===M)&&ol(g,E,l)?(b=O,E=Do(T),l=sd(T,l)):E=-1}}return m}function Ii(a,l,u,f,m,g){const b=l[ft],E=b.data[a+8],O=Cn(E,b,u,null==f?Bo(E)&&va:f!=b&&0!=(3&E.type),m&rt.Host&&g===E);return null!==O?Dr(l,b,O,E):rn}function Cn(a,l,u,f,m){const g=a.providerIndexes,b=l.data,E=1048575&g,T=a.directiveStart,O=g>>20,J=m?E+O:a.directiveEnd;for(let oe=f?E:E+O;oe<J;oe++){const Ae=b[oe];if(oe<T&&u===Ae||oe>=T&&Ae.type===u)return oe}if(m){const oe=b[T];if(oe&&Vn(oe)&&oe.type===u)return T}return null}function Dr(a,l,u,f){let m=a[u];const g=l.data;if(function Mu(a){return a instanceof nl}(m)){const b=m;b.resolving&&function Ve(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new se(-200,`Circular dependency in DI detected for ${a}${u}`)}(function be(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():de(a)}(g[u]));const E=Yl(b.canSeeViewProviders);b.resolving=!0;const T=b.injectImpl?cn(b.injectImpl):null;el(a,f,rt.Default);try{m=a[u]=b.factory(void 0,g,a,f),l.firstCreatePass&&u>=f.directiveStart&&function wf(a,l,u){const{ngOnChanges:f,ngOnInit:m,ngDoCheck:g}=l.type.prototype;if(f){const b=Za(l);(u.preOrderHooks??=[]).push(a,b),(u.preOrderCheckHooks??=[]).push(a,b)}m&&(u.preOrderHooks??=[]).push(0-a,m),g&&((u.preOrderHooks??=[]).push(a,g),(u.preOrderCheckHooks??=[]).push(a,g))}(u,g[u],l)}finally{null!==T&&cn(T),Yl(E),b.resolving=!1,yf()}}return m}function ol(a,l,u){return!!(u[l+(a>>mt)]&1<<a)}function Zl(a,l){return!(a&rt.Self||a&rt.Host&&l)}class sl{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,f){return rl(this._tNode,this._lView,l,Y(f),u)}}function Ql(){return new sl(Fi(),Oe())}function Ho(a){return Ee(()=>{const l=a.prototype.constructor,u=l[sr]||qr(l),f=Object.prototype;let m=Object.getPrototypeOf(a.prototype).constructor;for(;m&&m!==f;){const g=m[sr]||qr(m);if(g&&g!==u)return g;m=Object.getPrototypeOf(m)}return g=>new g})}function qr(a){return it(a)?()=>{const l=qr(Ue(a));return l&&l()}:Bs(a)}function Xl(a){const l=a[ft],u=l.type;return 2===u?l.declTNode:1===u?a[ar]:null}function xe(a){return function Cf(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const f=u.length;let m=0;for(;m<f;){const g=u[m];if(zt(g))break;if(0===g)m+=2;else if("number"==typeof g)for(m++;m<f&&"string"==typeof u[m];)m++;else{if(g===l)return u[m+1];m+=2}}}return null}(Fi(),a)}const Qi="__parameters__";function ws(a,l,u){return Ee(()=>{const f=function wa(a){return function(...u){if(a){const f=a(...u);for(const m in f)this[m]=f[m]}}}(l);function m(...g){if(this instanceof m)return f.apply(this,g),this;const b=new m(...g);return E.annotation=b,E;function E(T,M,O){const $=T.hasOwnProperty(Qi)?T[Qi]:Object.defineProperty(T,Qi,{value:[]})[Qi];for(;$.length<=O;)$.push(null);return($[O]=$[O]||[]).push(b),T}}return u&&(m.prototype=Object.create(u.prototype)),m.prototype.ngMetadataName=a,m.annotationCls=m,m})}function Ea(a,l){a.forEach(u=>Array.isArray(u)?Ea(u,l):l(u))}function zo(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Ca(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function al(a,l){const u=[];for(let f=0;f<a;f++)u.push(l);return u}function C(a,l,u){let f=k(a,l);return f>=0?a[1|f]=u:(f=~f,function Sf(a,l,u,f){let m=a.length;if(m==l)a.push(u,f);else if(1===m)a.push(f,a[0]),a[0]=u;else{for(m--,a.push(a[m-1],a[m]);m>l;)a[m]=a[m-2],m--;a[l]=u,a[l+1]=f}}(a,f,l,u)),f}function S(a,l){const u=k(a,l);if(u>=0)return a[1|u]}function k(a,l){return function X(a,l,u){let f=0,m=a.length>>u;for(;m!==f;){const g=f+(m-f>>1),b=a[g<<u];if(l===b)return g<<u;b>l?m=g:f=g+1}return~(m<<u)}(a,l,1)}const oo=B(ws("Optional"),8),jo=B(ws("SkipSelf"),4);function u0(a){return 128==(128&a.flags)}var rc=(()=>((rc=rc||{})[rc.Important=1]="Important",rc[rc.DashCase=2]="DashCase",rc))();const DL=/^>|^->|<!--|-->|--!>|<!-$/g,Ik=/(<|>)/,YC="\u200b$1\u200b";const oy=new Map;let h0=0;const XC="__ngContext__";function Go(a,l){xr(l)?(a[XC]=l[Wa],function IL(a){oy.set(a[Wa],a)}(l)):a[XC]=l}let $p;function Gp(a,l){return $p(a,l)}function zu(a){const l=a[ni];return Er(l)?l[ni]:l}function Vf(a){return ju(a[Fl])}function JC(a){return ju(a[Rr])}function ju(a){for(;null!==a&&!Er(a);)a=a[Rr];return a}function dl(a,l,u,f,m){if(null!=f){let g,b=!1;Er(f)?g=f:xr(f)&&(b=!0,f=f[Di]);const E=Fn(f);0===a&&null!==u?null==m?Hf(l,u,E):hd(l,u,E,m||null,!0):1===a&&null!==u?hd(l,u,E,m||null,!0):2===a?function fy(a,l,u){const f=ur(a,l);f&&function iD(a,l,u,f){a.removeChild(l,u,f)}(a,f,l,u)}(l,E,b):3===a&&l.destroyNode(E),null!=g&&function Nk(a,l,u,f,m){const g=u[io];g!==Fn(u)&&dl(l,a,f,g,m);for(let E=wr;E<u.length;E++){const T=u[E];jf(T[ft],T,a,l,f,g)}}(l,a,g,u,m)}}function dd(a,l){return a.createComment(function ZC(a){return a.replace(DL,l=>l.replace(Ik,YC))}(l))}function cy(a,l,u){return a.createElement(l,u)}function v0(a,l){const u=a[qa],f=u.indexOf(l);qc(l),u.splice(f,1)}function b0(a,l){if(a.length<=wr)return;const u=wr+l,f=a[u];if(f){const m=f[Fc];null!==m&&m!==a&&v0(m,f),l>0&&(a[u-1][Rr]=f[Rr]);const g=Ca(a,wr+l);!function Pk(a,l){jf(a,l,l[Ft],2,null,null),l[Di]=null,l[ar]=null}(f[ft],f);const b=g[$r];null!==b&&b.detachView(g[ft]),f[ni]=null,f[Rr]=null,f[Wt]&=-129}return f}function nD(a,l){if(!(256&l[Wt])){const u=l[Ft];l[Uc]?.destroy(),l[Uo]?.destroy(),u.destroyNode&&jf(a,l,u,3,null,null),function eD(a){let l=a[Fl];if(!l)return dy(a[ft],a);for(;l;){let u=null;if(xr(l))u=l[Fl];else{const f=l[wr];f&&(u=f)}if(!u){for(;l&&!l[Rr]&&l!==a;)xr(l)&&dy(l[ft],l),l=l[ni];null===l&&(l=a),xr(l)&&dy(l[ft],l),u=l&&l[Rr]}l=u}}(l)}}function dy(a,l){if(!(256&l[Wt])){l[Wt]&=-129,l[Wt]|=256,function w0(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let f=0;f<u.length;f+=2){const m=l[u[f]];if(!(m instanceof nl)){const g=u[f+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const E=m[g[b]],T=g[b+1];Vo(4,E,T);try{T.call(E)}finally{Vo(5,E,T)}}else{Vo(4,m,g);try{g.call(m)}finally{Vo(5,m,g)}}}}}(a,l),function $u(a,l){const u=a.cleanup,f=l[ys];if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const b=u[g+3];b>=0?f[b]():f[-b].unsubscribe(),g+=2}else u[g].call(f[u[g+1]]);null!==f&&(l[ys]=null);const m=l[lr];if(null!==m){l[lr]=null;for(let g=0;g<m.length;g++)(0,m[g])()}}(a,l),1===l[ft].type&&l[Ft].destroy();const u=l[Fc];if(null!==u&&Er(l[ni])){u!==l[ni]&&v0(u,l);const f=l[$r];null!==f&&f.detachView(a)}!function TL(a){oy.delete(a[Wa])}(l)}}function ud(a,l,u){return function x0(a,l,u){let f=l;for(;null!==f&&40&f.type;)f=(l=f).parent;if(null===f)return u[Di];{const{componentOffset:m}=f;if(m>-1){const{encapsulation:g}=a.data[f.directiveStart+m];if(g===Mt.None||g===Mt.Emulated)return null}return Cr(f,u)}}(a,l.parent,u)}function hd(a,l,u,f,m){a.insertBefore(l,u,f,m)}function Hf(a,l,u){a.appendChild(l,u)}function fd(a,l,u,f,m){null!==f?hd(a,l,u,f,m):Hf(a,l,u)}function ur(a,l){return a.parentNode(l)}function uy(a,l,u){return ao(a,l,u)}let E0,my,Gu,Qp,ao=function Ia(a,l,u){return 40&a.type?Cr(a,u):null};function hy(a,l,u,f){const m=ud(a,f,l),g=l[Ft],E=uy(f.parent||l[ar],f,l);if(null!=m)if(Array.isArray(u))for(let T=0;T<u.length;T++)fd(g,m,u[T],E,!1);else fd(g,m,u,E,!1);void 0!==E0&&E0(g,f,l,u,m)}function Ys(a,l){if(null!==l){const u=l.type;if(3&u)return Cr(l,a);if(4&u)return oc(-1,a[l.index]);if(8&u){const f=l.child;if(null!==f)return Ys(a,f);{const m=a[l.index];return Er(m)?oc(-1,m):Fn(m)}}if(32&u)return Gp(l,a)()||Fn(a[l.index]);{const f=ul(a,l);return null!==f?Array.isArray(f)?f[0]:Ys(zu(a[Qn]),f):Ys(a,l.next)}}return null}function ul(a,l){return null!==l?a[Qn][ar].projection[l.projection]:null}function oc(a,l){const u=wr+a+1;if(u<l.length){const f=l[u],m=f[ft].firstChild;if(null!==m)return Ys(f,m)}return l[io]}function Yp(a,l,u,f,m,g,b){for(;null!=u;){const E=f[u.index],T=u.type;if(b&&0===l&&(E&&Go(Fn(E),f),u.flags|=2),32!=(32&u.flags))if(8&T)Yp(a,l,u.child,f,m,g,!1),dl(l,a,m,E,g);else if(32&T){const M=Gp(u,f);let O;for(;O=M();)dl(l,a,m,O,g);dl(l,a,m,E,g)}else 16&T?C0(a,l,f,u,m,g):dl(l,a,m,E,g);u=b?u.projectionNext:u.next}}function jf(a,l,u,f,m,g){Yp(u,f,a.firstChild,l,m,g,!1)}function C0(a,l,u,f,m,g){const b=u[Qn],T=b[ar].projection[f.projection];if(Array.isArray(T))for(let M=0;M<T.length;M++)dl(l,a,m,T[M],g);else{let M=T;const O=b[ni];u0(f)&&(M.flags|=128),Yp(a,l,M,O,m,g,!0)}}function rD(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function oD(a,l,u){const{mergedAttrs:f,classes:m,styles:g}=u;null!==f&&Ct(a,l,f),null!==m&&rD(a,l,m),null!==g&&function Lk(a,l,u){a.setAttribute(l,"style",u)}(a,l,g)}function Ta(a){return function py(){if(void 0===my&&(my=null,on.trustedTypes))try{my=on.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return my}()?.createHTML(a)||a}function gy(a){Gu=a}function T0(a){return function _y(){if(void 0===Qp&&(Qp=null,on.trustedTypes))try{Qp=on.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Qp}()?.createScriptURL(a)||a}class md{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yt})`}}class S0 extends md{getTypeName(){return"HTML"}}class sD extends md{getTypeName(){return"Style"}}class aD extends md{getTypeName(){return"Script"}}class A0 extends md{getTypeName(){return"URL"}}class Vk extends md{getTypeName(){return"ResourceURL"}}function hl(a){return a instanceof md?a.changingThisBreaksApplicationSecurity:a}function Gf(a,l){const u=function M0(a){return a instanceof md&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see ${yt})`)}return u===l}function k0(a){return new S0(a)}function R0(a){return new sD(a)}function Hk(a){return new aD(a)}function zk(a){return new A0(a)}function lD(a){return new Vk(a)}class jk{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(Ta(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class $k{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const u=this.inertDocument.createElement("template");return u.innerHTML=Ta(l),u}}const uD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Xp(a){return(a=String(a)).match(uD)?a:"unsafe:"+a}function sc(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function Jp(...a){const l={};for(const u of a)for(const f in u)u.hasOwnProperty(f)&&(l[f]=!0);return l}const hD=sc("area,br,col,hr,img,wbr"),fD=sc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mD=sc("rp,rt"),P0=Jp(hD,Jp(fD,sc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jp(mD,sc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jp(mD,fD)),O0=sc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gD=Jp(O0,sc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),qk=sc("script,style,template");class yy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,f=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?f=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,f&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let m=this.checkClobberedElement(u,u.nextSibling);if(m){u=m;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!P0.hasOwnProperty(u))return this.sanitizedSomething=!0,!qk.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const f=l.attributes;for(let m=0;m<f.length;m++){const g=f.item(m),b=g.name,E=b.toLowerCase();if(!gD.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let T=g.value;O0[E]&&(T=Xp(T)),this.buf.push(" ",b,'="',yD(T),'"')}return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();P0.hasOwnProperty(u)&&!hD.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(yD(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const Wf=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_D=/([^\#-~ |!])/g;function yD(a){return a.replace(/&/g,"&amp;").replace(Wf,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(_D,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vy;function vD(a,l){let u=null;try{vy=vy||function cD(a){const l=new $k(a);return function dD(){try{return!!(new window.DOMParser).parseFromString(Ta(""),"text/html")}catch{return!1}}()?new jk(l):l}(a);let f=l?String(l):"";u=vy.getInertBodyElement(f);let m=5,g=f;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,f=g,g=u.innerHTML,u=vy.getInertBodyElement(f)}while(f!==g);return Ta((new yy).sanitizeChildren(N0(u)||u))}finally{if(u){const f=N0(u)||u;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function N0(a){return"content"in a&&function F0(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Ji=(()=>((Ji=Ji||{})[Ji.NONE=0]="NONE",Ji[Ji.HTML=1]="HTML",Ji[Ji.STYLE=2]="STYLE",Ji[Ji.SCRIPT=3]="SCRIPT",Ji[Ji.URL=4]="URL",Ji[Ji.RESOURCE_URL=5]="RESOURCE_URL",Ji))();function L0(a){const l=pd();return l?l.sanitize(Ji.URL,a)||"":Gf(a,"URL")?hl(a):Xp(de(a))}function U0(a){const l=pd();if(l)return T0(l.sanitize(Ji.RESOURCE_URL,a)||"");if(Gf(a,"ResourceURL"))return T0(hl(a));throw new se(904,!1)}function B0(a,l,u){return function Yk(a,l){return"src"===l&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===l&&("base"===a||"link"===a)?U0:L0}(l,u)(a)}function pd(){const a=Oe();return a&&a[ca].sanitizer}class Pn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=hn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const qf=new Pn("ENVIRONMENT_INITIALIZER"),Ln=new Pn("INJECTOR",-1),Mn=new Pn("INJECTOR_DEF_TYPES");class mn{get(l,u=vr){if(u===vr){const f=new Error(`NullInjectorError: No provider for ${ae(l)}!`);throw f.name="NullInjectorError",f}return u}}function ii(...a){return{\u0275providers:by(0,a),\u0275fromNgModule:!0}}function by(a,...l){const u=[],f=new Set;let m;return Ea(l,g=>{const b=g;qu(b,u,[],f)&&(m||=[],m.push(b))}),void 0!==m&&CD(m,u),u}function CD(a,l){for(let u=0;u<a.length;u++){const{providers:m}=a[u];gi(m,g=>{l.push(g)})}}function qu(a,l,u,f){if(!(a=Ue(a)))return!1;let m=null,g=vo(a);const b=!g&&Zt(a);if(g||b){if(b&&!b.standalone)return!1;m=a}else{const T=a.ngModule;if(g=vo(T),!g)return!1;m=T}const E=f.has(m);if(b){if(E)return!1;if(f.add(m),b.dependencies){const T="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const M of T)qu(M,l,u,f)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let M;f.add(m);try{Ea(g.imports,O=>{qu(O,l,u,f)&&(M||=[],M.push(O))})}finally{}void 0!==M&&CD(M,l)}if(!E){const M=Bs(m)||(()=>new m);l.push({provide:m,useFactory:M,deps:Et},{provide:Mn,useValue:m,multi:!0},{provide:qf,useValue:()=>Zn(m),multi:!0})}const T=g.providers;null==T||E||gi(T,O=>{l.push(O)})}}return m!==a&&void 0!==a.providers}function gi(a,l){for(let u of a)He(u)&&(u=u.\u0275providers),Array.isArray(u)?gi(u,l):l(u)}const yn=K({provide:String,useValue:K});function lo(a){return null!==a&&"object"==typeof a&&yn in a}function Zr(a){return"function"==typeof a}const V0=new Pn("Set Injector scope."),xy={},ID={};let lc;function Kf(){return void 0===lc&&(lc=new mn),lc}class Sa{}class H0 extends Sa{get destroyed(){return this._destroyed}constructor(l,u,f,m){super(),this.parent=u,this.source=f,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yf(l,b=>this.processProvider(b)),this.records.set(Ln,Ku(void 0,this)),m.has("environment")&&this.records.set(Sa,Ku(void 0,this));const g=this.records.get(V0);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Mn.multi,Et,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const l=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of l)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(l){return this.assertNotDestroyed(),this._onDestroyHooks.push(l),()=>this.removeOnDestroy(l)}runInContext(l){this.assertNotDestroyed();const u=Yn(this),f=cn(void 0);try{return l()}finally{Yn(u),cn(f)}}get(l,u=vr,f=rt.Default){if(this.assertNotDestroyed(),l.hasOwnProperty(le))return l[le](this);f=Y(f);const m=Yn(this),g=cn(void 0);try{if(!(f&rt.SkipSelf)){let E=this.records.get(l);if(void 0===E){const T=function Cy(a){return"function"==typeof a||"object"==typeof a&&a instanceof Pn}(l)&&wi(l);E=T&&this.injectableDefInScope(T)?Ku(Ey(l),xy):null,this.records.set(l,E)}if(null!=E)return this.hydrate(l,E)}return(f&rt.Self?Kf():this.parent).get(l,u=f&rt.Optional&&u===vr?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Kn]=b[Kn]||[]).unshift(ae(l)),m)throw b;return function N(a,l,u,f){const m=a[Kn];throw l[ui]&&m.unshift(l[ui]),a.message=function ie(a,l,u,f=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let m=ae(l);if(Array.isArray(l))m=l.map(ae).join(" -> ");else if("object"==typeof l){let g=[];for(let b in l)if(l.hasOwnProperty(b)){let E=l[b];g.push(b+":"+("string"==typeof E?JSON.stringify(E):ae(E)))}m=`{${g.join(", ")}}`}return`${u}${f?"("+f+")":""}[${m}]: ${a.replace(Qo,"\n  ")}`}("\n"+a.message,m,u,f),a.ngTokenPath=m,a[Kn]=null,a}(b,l,"R3InjectorError",this.source)}throw b}finally{cn(g),Yn(m)}}resolveInjectorInitializers(){const l=Yn(this),u=cn(void 0);try{const f=this.get(qf.multi,Et,rt.Self);for(const m of f)m()}finally{Yn(l),cn(u)}}toString(){const l=[],u=this.records;for(const f of u.keys())l.push(ae(f));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(l){let u=Zr(l=Ue(l))?l:Ue(l&&l.provide);const f=function t1(a){return lo(a)?Ku(void 0,a.useValue):Ku(TD(a),xy)}(l);if(Zr(l)||!0!==l.multi)this.records.get(u);else{let m=this.records.get(u);m||(m=Ku(void 0,xy,!0),m.factory=()=>q(m.multi),this.records.set(u,m)),u=l,m.multi.push(l)}this.records.set(u,f)}hydrate(l,u){return u.value===xy&&(u.value=ID,u.value=u.factory()),"object"==typeof u.value&&u.value&&function wn(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=Ue(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(l){const u=this._onDestroyHooks.indexOf(l);-1!==u&&this._onDestroyHooks.splice(u,1)}}function Ey(a){const l=wi(a),u=null!==l?l.factory:Bs(a);if(null!==u)return u;if(a instanceof Pn)throw new se(204,!1);if(a instanceof Function)return function e1(a){const l=a.length;if(l>0)throw al(l,"?"),new se(204,!1);const u=function oa(a){return a&&(a[rr]||a[Ar])||null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new se(204,!1)}function TD(a,l,u){let f;if(Zr(a)){const m=Ue(a);return Bs(m)||Ey(m)}if(lo(a))f=()=>Ue(a.useValue);else if(function wy(a){return!(!a||!a.useFactory)}(a))f=()=>a.useFactory(...q(a.deps||[]));else if(function DD(a){return!(!a||!a.useExisting)}(a))f=()=>Zn(Ue(a.useExisting));else{const m=Ue(a&&(a.useClass||a.provide));if(!function Yu(a){return!!a.deps}(a))return Bs(m)||Ey(m);f=()=>new m(...q(a.deps))}return f}function Ku(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function Yf(a,l){for(const u of a)Array.isArray(u)?Yf(u,l):u&&He(u)?Yf(u.\u0275providers,l):l(u)}const z0=new Pn("AppId",{providedIn:"root",factory:()=>fl}),fl="ng",eg=new Pn("Platform Initializer"),Es=new Pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rs=new Pn("AnimationModuleType"),n1=new Pn("CSP nonce",{providedIn:"root",factory:()=>function $f(){if(void 0!==Gu)return Gu;if(typeof document<"u")return document;throw new se(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Qf=(a,l)=>null;function Xf(a,l){return Qf(a,l)}class rg{}class PD{}class o1{resolveComponentFactory(l){throw function Ay(a){const l=Error(`No component factory found for ${ae(a)}.`);return l.ngComponent=a,l}(l)}}let Qu=(()=>{class a{}return a.NULL=new o1,a})();function s1(){return vd(Fi(),Oe())}function vd(a,l){return new og(Cr(a,l))}let og=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=s1,a})();function My(a){return a instanceof og?a.nativeElement:a}class Y0{}let ND=(()=>{class a{constructor(){this.destroyNode=null}}return a.__NG_ELEMENT_ID__=()=>function ky(){const a=Oe(),u=xo(Fi().index,a);return(xr(u)?u:a)[Ft]}(),a})(),a1=(()=>{class a{}return a.\u0275prov=hn({token:a,providedIn:"root",factory:()=>null}),a})();class sg{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Xu=new sg("16.1.1"),ag={};function Ju(a){for(;a;){a[Wt]|=64;const l=zu(a);if(Ya(a)&&!l)return a;a=l}return null}function Ry(a){return a.ngOriginalError}class tm{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&Ry(l);for(;u&&Ry(u);)u=Ry(u);return u||null}}const hr=new Pn("",{providedIn:"root",factory:()=>!1});function bd(a){return a.ownerDocument}function cc(a){return a instanceof Function?a():a}class wd extends ro{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(l){this._lView=l}onConsumerDependencyMayHaveChanged(){Ju(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(l,u,f){const m=mi(this);this.trackingVersion++;try{l(u,f)}finally{mi(m)}}destroy(){this.trackingVersion++}}let im=null;function BD(){return im??=new wd,im}function ri(a,l){return a[l]??BD()}function Zs(a,l){const u=BD();u.hasReadASignal&&(a[l]=im,u.lView=a,im=new wd)}const Qt={};function Fy(a){nw(fn(),Oe(),Wr()+a,!1)}function nw(a,l,u,f){if(!f)if(3==(3&l[Wt])){const g=a.preOrderCheckHooks;null!==g&&ql(l,g,u)}else{const g=a.preOrderHooks;null!==g&&Au(l,g,0,u)}Gs(u)}function zD(a,l=null,u=null,f){const m=jD(a,l,u,f);return m.resolveInjectorInitializers(),m}function jD(a,l=null,u=null,f,m=new Set){const g=[u||Et,ii(a)];return f=f||("object"==typeof a?void 0:ae(a)),new H0(g,l||Kf(),f||null,m)}let Ed=(()=>{class a{static create(u,f){if(Array.isArray(u))return zD({name:""},f,u,"");{const m=u.name??"";return zD({name:m},u.parent,u.providers,m)}}}return a.THROW_IF_NOT_FOUND=vr,a.NULL=new mn,a.\u0275prov=hn({token:a,providedIn:"any",factory:()=>Zn(Ln)}),a.__NG_ELEMENT_ID__=-1,a})();function rm(a,l=rt.Default){const u=Oe();return null===u?Zn(a,l):rl(Fi(),u,Ue(a),l)}function ow(){throw new Error("invalid")}function Ly(a,l,u,f,m,g,b,E,T,M,O){const $=l.blueprint.slice();return $[Di]=m,$[Wt]=140|f,(null!==M||a&&2048&a[Wt])&&($[Wt]|=2048),hf($),$[ni]=$[Ls]=a,$[Nn]=u,$[ca]=b||a&&a[ca],$[Ft]=E||a&&a[Ft],$[Lo]=T||a&&a[Lo]||null,$[ar]=g,$[Wa]=function Bf(){return h0++}(),$[Pr]=O,$[Lc]=M,$[Qn]=2==l.type?a[Qn]:$,$}function om(a,l,u,f,m){let g=a.data[l];if(null===g)g=function sw(a,l,u,f,m){const g=Np(),b=Fp(),T=a.data[l]=function uw(a,l,u,f,m,g){let b=l?l.injectorIndex:-1,E=0;return Co()&&(E|=128),{type:u,index:f,insertBeforeIndex:null,injectorIndex:b,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:m,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,u,l,f,m);return null===a.firstChild&&(a.firstChild=T),null!==g&&(b?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T,T.prev=g)),T}(a,l,u,f,m),function Li(){return Ut.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=f,g.attrs=m;const b=function Qc(){const a=Ut.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return Or(g,!0),g}function dg(a,l,u,f){if(0===u)return-1;const m=l.length;for(let g=0;g<u;g++)l.push(f),a.blueprint.push(f),a.data.push(null);return m}function GD(a,l,u,f,m){const g=ri(l,Uc),b=Wr(),E=2&f;try{if(Gs(-1),E&&l.length>vn&&nw(a,l,vn,!1),Vo(E?2:0,m),E)g.runInContext(u,f,m);else{const M=mi(null);try{u(f,m)}finally{mi(M)}}}finally{E&&null===l[Uc]&&Zs(l,Uc),Gs(b),Vo(E?3:1,m)}}function aw(a,l,u){if(tu(l)){const f=mi(null);try{const g=l.directiveEnd;for(let b=l.directiveStart;b<g;b++){const E=a.data[b];E.contentQueries&&E.contentQueries(1,u[b],b)}}finally{mi(f)}}}function sm(a,l,u){zl()&&(function y1(a,l,u,f){const m=u.directiveStart,g=u.directiveEnd;Bo(u)&&function JD(a,l,u){const f=Cr(l,a),m=lw(u);let b=16;u.signals?b=4096:u.onPush&&(b=64);const E=lm(a,Ly(a,m,null,b,f,l,null,a[ca].rendererFactory.createRenderer(f,u),null,null,null));a[l.index]=E}(l,u,a.data[m+u.componentOffset]),a.firstCreatePass||qs(u,l),Go(f,l);const b=u.initialInputs;for(let E=m;E<g;E++){const T=a.data[E],M=Dr(l,a,E,u);Go(M,l),null!==b&&Vy(0,E-m,M,T,0,b),Vn(T)&&(xo(u.index,l)[Nn]=Dr(l,a,E,u))}}(a,l,u,Cr(u,l)),64==(64&u.flags)&&ZD(a,l,u))}function ug(a,l,u=Cr){const f=l.localNames;if(null!==f){let m=l.index+1;for(let g=0;g<f.length;g+=2){const b=f[g+1],E=-1===b?u(l,a):a[b];a[m++]=E}}}function lw(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=am(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts,a.id):l}function am(a,l,u,f,m,g,b,E,T,M,O){const $=vn+f,J=$+m,oe=function u1(a,l){const u=[];for(let f=0;f<l;f++)u.push(f<a?null:Qt);return u}($,J),Ae="function"==typeof M?M():M;return oe[ft]={type:a,blueprint:oe,template:u,queries:null,viewQuery:E,declTNode:l,data:oe.slice().fill(null,$),bindingStartIndex:$,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:T,consts:Ae,incompleteFirstPass:!1,ssrId:O}}let dw=a=>null;function KD(a,l,u,f){for(let m in a)if(a.hasOwnProperty(m)){u=null===u?{}:u;const g=a[m];null===f?YD(u,l,m,g):f.hasOwnProperty(m)&&YD(u,l,f[m],g)}return u}function YD(a,l,u,f){a.hasOwnProperty(u)?a[u].push(l,f):a[u]=[l,f]}function os(a,l,u,f,m,g,b,E){const T=Cr(l,u);let O,M=l.inputs;!E&&null!=M&&(O=M[f])?(zy(a,u,O,f,m),Bo(l)&&function Uy(a,l){const u=xo(l,a);16&u[Wt]||(u[Wt]|=64)}(u,l.index)):3&l.type&&(f=function p1(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(f),m=null!=b?b(m,l.value||"",f):m,g.setProperty(T,f,m))}function fw(a,l,u,f){if(zl()){const m=null===f?null:{"":-1},g=function b1(a,l){const u=a.directiveRegistry;let f=null,m=null;if(u)for(let g=0;g<u.length;g++){const b=u[g];if(sa(l,b.selectors,!1))if(f||(f=[]),Vn(b))if(null!==b.findHostDirectiveDefs){const E=[];m=m||new Map,b.findHostDirectiveDefs(b,E,m),f.unshift(...E,b),gw(a,l,E.length)}else f.unshift(b),gw(a,l,0);else m=m||new Map,b.findHostDirectiveDefs?.(b,f,m),f.push(b)}return null===f?null:[f,m]}(a,u);let b,E;null===g?b=E=null:[b,E]=g,null!==b&&mw(a,l,u,b,m,E),m&&function w1(a,l,u){if(l){const f=a.localNames=[];for(let m=0;m<l.length;m+=2){const g=u[l[m+1]];if(null==g)throw new se(-301,!1);f.push(l[m],g)}}}(u,f,m)}u.mergedAttrs=_n(u.mergedAttrs,u.attrs)}function mw(a,l,u,f,m,g){for(let M=0;M<f.length;M++)Ef(qs(u,l),a,f[M].type);!function x1(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}(u,a.data.length,f.length);for(let M=0;M<f.length;M++){const O=f[M];O.providersResolver&&O.providersResolver(O)}let b=!1,E=!1,T=dg(a,l,f.length,null);for(let M=0;M<f.length;M++){const O=f[M];u.mergedAttrs=_n(u.mergedAttrs,O.hostAttrs),XD(a,u,l,T,O),QD(T,O,m),null!==O.contentQueries&&(u.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(u.flags|=64);const $=O.type.prototype;!b&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((a.preOrderHooks??=[]).push(u.index),b=!0),!E&&($.ngOnChanges||$.ngDoCheck)&&((a.preOrderCheckHooks??=[]).push(u.index),E=!0),T++}!function m1(a,l,u){const m=l.directiveEnd,g=a.data,b=l.attrs,E=[];let T=null,M=null;for(let O=l.directiveStart;O<m;O++){const $=g[O],J=u?u.get($):null,Ae=J?J.outputs:null;T=KD($.inputs,O,T,J?J.inputs:null),M=KD($.outputs,O,M,Ae);const $e=null===T||null===b||$a(l)?null:E1(T,O,b);E.push($e)}null!==T&&(T.hasOwnProperty("class")&&(l.flags|=8),T.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=E,l.inputs=T,l.outputs=M}(a,u,g)}function ZD(a,l,u){const f=u.directiveStart,m=u.directiveEnd,g=u.index,b=function ed(){return Ut.lFrame.currentDirectiveIndex}();try{Gs(g);for(let E=f;E<m;E++){const T=a.data[E],M=l[E];_f(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&v1(T,M)}}finally{Gs(-1),_f(b)}}function v1(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function gw(a,l,u){l.componentOffset=u,(a.components??=[]).push(l.index)}function QD(a,l,u){if(u){if(l.exportAs)for(let f=0;f<l.exportAs.length;f++)u[l.exportAs[f]]=a;Vn(l)&&(u[""]=a)}}function XD(a,l,u,f,m){a.data[f]=m;const g=m.factory||(m.factory=Bs(m.type)),b=new nl(g,Vn(m),rm);a.blueprint[f]=b,u[f]=b,function pw(a,l,u,f,m){const g=m.hostBindings;if(g){let b=a.hostBindingOpCodes;null===b&&(b=a.hostBindingOpCodes=[]);const E=~l.index;(function _1(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(b)!=E&&b.push(E),b.push(u,f,g)}}(a,l,f,dg(a,u,m.hostVars,Qt),m)}function ml(a,l,u,f,m,g){const b=Cr(a,l);!function By(a,l,u,f,m,g,b){if(null==g)a.removeAttribute(l,m,u);else{const E=null==b?de(g):b(g,f||"",m);a.setAttribute(l,m,E,u)}}(l[Ft],b,g,a.value,u,f,m)}function Vy(a,l,u,f,m,g){const b=g[l];if(null!==b)for(let E=0;E<b.length;)_w(f,u,b[E++],b[E++],b[E++])}function _w(a,l,u,f,m){const g=mi(null);try{const b=a.inputTransforms;null!==b&&b.hasOwnProperty(f)&&(m=b[f].call(l,m)),null!==a.setInput?a.setInput(l,m,u,f):l[f]=m}finally{mi(g)}}function E1(a,l,u){let f=null,m=0;for(;m<u.length;){const g=u[m];if(0!==g)if(5!==g){if("number"==typeof g)break;if(a.hasOwnProperty(g)){null===f&&(f=[]);const b=a[g];for(let E=0;E<b.length;E+=2)if(b[E]===l){f.push(g,b[E+1],u[m+1]);break}}m+=2}else m+=2;else m+=4}return f}function eI(a,l,u,f){return[a,!0,!1,l,null,0,f,u,null,null,null]}function tI(a,l){const u=a.contentQueries;if(null!==u)for(let f=0;f<u.length;f+=2){const g=u[f+1];if(-1!==g){const b=a.data[g];js(u[f]),b.contentQueries(2,l[g],g)}}}function lm(a,l){return a[Fl]?a[Nc][Rr]=l:a[Fl]=l,a[Nc]=l,l}function Hy(a,l,u){js(0);const f=mi(null);try{l(a,u)}finally{mi(f)}}function nI(a){return a[ys]||(a[ys]=[])}function yw(a){return a.cleanup||(a.cleanup=[])}function dc(a,l,u){return(null===a||Vn(a))&&(u=function Wc(a){for(;Array.isArray(a);){if("object"==typeof a[Xo])return a;a=a[Di]}return null}(u[l.index])),u[Ft]}function vw(a,l){const u=a[Lo],f=u?u.get(tm,null):null;f&&f.handleError(l)}function zy(a,l,u,f,m){for(let g=0;g<u.length;){const b=u[g++],E=u[g++];_w(a.data[b],l[b],f,E,m)}}function Io(a,l,u){const f=Qa(l,a);!function ly(a,l,u){a.setValue(l,u)}(a[Ft],f,u)}function jy(a,l){const u=xo(l,a),f=u[ft];!function $y(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])}(f,u);const m=u[Di];null!==m&&null===u[Pr]&&(u[Pr]=Xf(m,u[Lo])),bw(f,u,u[Nn])}function bw(a,l,u){nd(l);try{const f=a.viewQuery;null!==f&&Hy(1,f,u);const m=a.template;null!==m&&GD(a,l,m,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&tI(a,l),a.staticViewQueries&&Hy(2,a.viewQuery,u);const g=a.components;null!==g&&function C1(a,l){for(let u=0;u<l.length;u++)jy(a,l[u])}(l,g)}catch(f){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),f}finally{l[Wt]&=-5,vf()}}let oI=(()=>{class a{constructor(){this.all=new Set,this.queue=new Map}create(u,f,m){const g=typeof Zone>"u"?null:Zone.current,b=new Ap(u,M=>{this.all.has(M)&&this.queue.set(M,g)},m);let E;this.all.add(b),b.notify();const T=()=>{b.cleanup(),E?.(),this.all.delete(b),this.queue.delete(b)};return E=f?.onDestroy(T),{destroy:T}}flush(){if(0!==this.queue.size)for(const[u,f]of this.queue)this.queue.delete(u),f?f.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return a.\u0275prov=hn({token:a,providedIn:"root",factory:()=>new a}),a})();function Dd(a,l,u){let f=u?a.styles:null,m=u?a.classes:null,g=0;if(null!==l)for(let b=0;b<l.length;b++){const E=l[b];"number"==typeof E?g=E:1==g?m=Ge(m,E):2==g&&(f=Ge(f,E+": "+l[++b]+";"))}u?a.styles=f:a.stylesWithoutHost=f,u?a.classes=m:a.classesWithoutHost=m}function hg(a,l,u,f,m=!1){for(;null!==u;){const g=l[u.index];if(null!==g&&f.push(Fn(g)),Er(g)){for(let E=wr;E<g.length;E++){const T=g[E],M=T[ft].firstChild;null!==M&&hg(T[ft],T,M,f)}g[io]!==g[Di]&&f.push(g[io])}const b=u.type;if(8&b)hg(a,l,u.child,f);else if(32&b){const E=Gp(u,l);let T;for(;T=E();)f.push(T)}else if(16&b){const E=ul(l,u);if(Array.isArray(E))f.push(...E);else{const T=zu(l[Qn]);hg(T[ft],T,E,f,!0)}}u=m?u.projectionNext:u.next}return f}function Gy(a,l,u,f=!0){const m=l[ca].rendererFactory;m.begin&&m.begin();try{ww(a,l,a.template,u)}catch(b){throw f&&vw(l,b),b}finally{m.end&&m.end(),l[ca].effectManager?.flush()}}function ww(a,l,u,f){const m=l[Wt];if(256!=(256&m)){l[ca].effectManager?.flush(),nd(l);try{hf(l),function Xc(a){return Ut.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&GD(a,l,u,2,f);const b=3==(3&m);if(b){const M=a.preOrderCheckHooks;null!==M&&ql(l,M,null)}else{const M=a.preOrderHooks;null!==M&&Au(l,M,0,null),od(l,0)}if(function xw(a){for(let l=Vf(a);null!==l;l=JC(l)){if(!l[ua])continue;const u=l[qa];for(let f=0;f<u.length;f++){vu(u[f])}}}(l),sI(l,2),null!==a.contentQueries&&tI(a,l),b){const M=a.contentCheckHooks;null!==M&&ql(l,M)}else{const M=a.contentHooks;null!==M&&Au(l,M,1),od(l,1)}!function $D(a,l){const u=a.hostBindingOpCodes;if(null===u)return;const f=ri(l,Uo);try{for(let m=0;m<u.length;m++){const g=u[m];if(g<0)Gs(~g);else{const b=g,E=u[++m],T=u[++m];$l(E,b),f.runInContext(T,2,l[b])}}}finally{null===l[Uo]&&Zs(l,Uo),Gs(-1)}}(a,l);const E=a.components;null!==E&&ih(l,E,0);const T=a.viewQuery;if(null!==T&&Hy(2,T,f),b){const M=a.viewCheckHooks;null!==M&&ql(l,M)}else{const M=a.viewHooks;null!==M&&Au(l,M,2),od(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[Wt]&=-73,qc(l)}finally{vf()}}}function sI(a,l){for(let u=Vf(a);null!==u;u=JC(u))for(let f=wr;f<u.length;f++)aI(u[f],l)}function qy(a,l,u){aI(xo(l,a),u)}function aI(a,l){if(!function df(a){return 128==(128&a[Wt])}(a))return;const u=a[ft];if(80&a[Wt]&&0===l||1024&a[Wt]||2===l)ww(u,a,u.template,a[Nn]);else if(a[Oc]>0){sI(a,1);const m=a[ft].components;null!==m&&ih(a,m,1)}}function ih(a,l,u){for(let f=0;f<l.length;f++)qy(a,l[f],u)}class cm{get rootNodes(){const l=this._lView,u=l[ft];return hg(u,l,u.firstChild,[])}constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(l){this._lView[Nn]=l}get destroyed(){return 256==(256&this._lView[Wt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[ni];if(Er(l)){const u=l[8],f=u?u.indexOf(this):-1;f>-1&&(b0(l,f),Ca(u,f))}this._attachedToViewContainer=!1}nD(this._lView[ft],this._lView)}onDestroy(l){!function Eo(a,l){if(256==(256&a[Wt]))throw new se(911,!1);null===a[lr]&&(a[lr]=[]),a[lr].push(l)}(this._lView,l)}markForCheck(){Ju(this._cdRefInjectingView||this._lView)}detach(){this._lView[Wt]&=-129}reattach(){this._lView[Wt]|=128}detectChanges(){Gy(this._lView[ft],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _0(a,l){jf(a,l,l[Ft],2,null,null)}(this._lView[ft],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=l}}class lI extends cm{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;Gy(l[ft],l,l[Nn],!1)}checkNoChanges(){}get context(){return null}}class Ew extends Qu{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=Zt(l);return new rh(u,this.ngModule)}}function dm(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class Cw{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,f){f=Y(f);const m=this.injector.get(l,ag,f);return m!==ag||u===ag?m:this.parentInjector.get(l,u,f)}}class rh extends PD{get inputs(){return dm(this.componentDef.inputs)}get outputs(){return dm(this.componentDef.outputs)}constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function Zh(a){return a.map($_).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}create(l,u,f,m){let g=(m=m||this.ngModule)instanceof Sa?m:m?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new Cw(l,g):l,E=b.get(Y0,null);if(null===E)throw new se(407,!1);const O={rendererFactory:E,sanitizer:b.get(a1,null),effectManager:b.get(oI,null)},$=E.createRenderer(null,this.componentDef),J=this.componentDef.selectors[0][0]||"div",oe=f?function cw(a,l,u,f){const g=f.get(hr,!1)||u===Mt.ShadowDom,b=a.selectRootElement(l,g);return function WD(a){dw(a)}(b),b}($,f,this.componentDef.encapsulation,b):cy($,J,function Ky(a){const l=a.toLowerCase();return"svg"===l?yu:"math"===l?"math":null}(J)),ot=this.componentDef.signals?4608:this.componentDef.onPush?576:528,St=am(0,null,null,1,0,null,null,null,null,null,null),ke=Ly(null,St,null,ot,null,null,O,$,b,null,null);let Jt,an;nd(ke);try{const En=this.componentDef;let go,Hd=null;En.findHostDirectiveDefs?(go=[],Hd=new Map,En.findHostDirectiveDefs(En,go,Hd),go.push(En)):go=[En];const rP=function fg(a,l){const u=a[ft],f=vn;return a[f]=l,om(u,f,2,"#host",null)}(ke,oe),oP=function I1(a,l,u,f,m,g,b){const E=m[ft];!function T1(a,l,u,f){for(const m of a)l.mergedAttrs=_n(l.mergedAttrs,m.hostAttrs);null!==l.mergedAttrs&&(Dd(l,l.mergedAttrs,!0),null!==u&&oD(f,u,l))}(f,a,l,b);let T=null;null!==l&&(T=Xf(l,m[Lo]));const M=g.rendererFactory.createRenderer(l,u);let O=16;u.signals?O=4096:u.onPush&&(O=64);const $=Ly(m,lw(u),null,O,m[a.index],a,g,M,null,null,T);return E.firstCreatePass&&gw(E,a,f.length-1),lm(m,$),m[a.index]=$}(rP,oe,En,go,ke,O,$);an=cf(St,vn),oe&&function Iw(a,l,u,f){if(f)Ct(a,u,["ng-version",Xu.full]);else{const{attrs:m,classes:g}=function kc(a){const l=[],u=[];let f=1,m=2;for(;f<a.length;){let g=a[f];if("string"==typeof g)2===m?""!==g&&l.push(g,a[++f]):8===m&&u.push(g);else{if(!br(m))break;m=g}f++}return{attrs:l,classes:u}}(l.selectors[0]);m&&Ct(a,u,m),g&&g.length>0&&rD(a,u,g.join(" "))}}($,En,oe,f),void 0!==u&&function Tw(a,l,u){const f=a.projection=[];for(let m=0;m<l.length;m++){const g=u[m];f.push(null!=g?Array.from(g):null)}}(an,this.ngContentSelectors,u),Jt=function S1(a,l,u,f,m,g){const b=Fi(),E=m[ft],T=Cr(b,m);mw(E,m,b,u,null,f);for(let O=0;O<u.length;O++)Go(Dr(m,E,b.directiveStart+O,b),m);ZD(E,m,b),T&&Go(T,m);const M=Dr(m,E,b.directiveStart+b.componentOffset,b);if(a[Nn]=m[Nn]=M,null!==g)for(const O of g)O(M,l);return aw(E,b,a),M}(oP,En,go,Hd,ke,[A1]),bw(St,ke,null)}finally{vf()}return new Dw(this.componentType,Jt,vd(an,ke),ke,an)}}class Dw extends rg{constructor(l,u,f,m,g){super(),this.location=f,this._rootLView=m,this._tNode=g,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new lI(m),this.componentType=l}setInput(l,u){const f=this._tNode.inputs;let m;if(null!==f&&(m=f[l])){if(this.previousInputValues??=new Map,this.previousInputValues.has(l)&&Object.is(this.previousInputValues.get(l),u))return;const g=this._rootLView;zy(g[ft],g,m,l,u),this.previousInputValues.set(l,u),Ju(xo(this._tNode.index,g))}}get injector(){return new sl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function A1(){const a=Fi();rd(Oe()[ft],a)}function Aw(a){let l=function Sw(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const f=[a];for(;l;){let m;if(Vn(a))m=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new se(903,!1);m=l.\u0275dir}if(m){if(u){f.push(m);const b=a;b.inputs=mg(a.inputs),b.inputTransforms=mg(a.inputTransforms),b.declaredInputs=mg(a.declaredInputs),b.outputs=mg(a.outputs);const E=m.hostBindings;E&&Rw(a,E);const T=m.viewQuery,M=m.contentQueries;if(T&&Mw(a,T),M&&kw(a,M),Z(a.inputs,m.inputs),Z(a.declaredInputs,m.declaredInputs),Z(a.outputs,m.outputs),null!==m.inputTransforms&&(null===b.inputTransforms&&(b.inputTransforms={}),Z(b.inputTransforms,m.inputTransforms)),Vn(m)&&m.data.animation){const O=a.data;O.animation=(O.animation||[]).concat(m.data.animation)}}const g=m.features;if(g)for(let b=0;b<g.length;b++){const E=g[b];E&&E.ngInherit&&E(a),E===Aw&&(u=!1)}}l=Object.getPrototypeOf(l)}!function M1(a){let l=0,u=null;for(let f=a.length-1;f>=0;f--){const m=a[f];m.hostVars=l+=m.hostVars,m.hostAttrs=_n(m.hostAttrs,u=_n(u,m.hostAttrs))}}(f)}function mg(a){return a===Tt?{}:a===Et?[]:a}function Mw(a,l){const u=a.viewQuery;a.viewQuery=u?(f,m)=>{l(f,m),u(f,m)}:l}function kw(a,l){const u=a.contentQueries;a.contentQueries=u?(f,m,g)=>{l(f,m,g),u(f,m,g)}:l}function Rw(a,l){const u=a.hostBindings;a.hostBindings=u?(f,m)=>{l(f,m),u(f,m)}:l}function Zy(a){const l=a.inputConfig,u={};for(const f in l)if(l.hasOwnProperty(f)){const m=l[f];Array.isArray(m)&&m[2]&&(u[f]=m[2])}a.inputTransforms=u}function Qy(a){return!!hm(a)&&(Array.isArray(a)||!(a instanceof Map)&&Symbol.iterator in a)}function hm(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function pl(a,l,u){return a[l]=u}function Si(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Ma(a,l,u,f){const m=Si(a,l,u);return Si(a,l+1,f)||m}function gg(a,l,u,f){const m=Oe();return Si(m,Xn(),l)&&(fn(),ml(jn(),m,a,l,u,f)),gg}function fm(a,l,u,f,m,g){const E=Ma(a,function ts(){return Ut.lFrame.bindingIndex}(),u,m);return ns(2),E?l+de(u)+f+de(m)+g:Qt}function Ww(a,l,u,f,m,g,b,E){const T=Oe(),M=fn(),O=a+vn,$=M.firstCreatePass?function V1(a,l,u,f,m,g,b,E,T){const M=l.consts,O=om(l,a,4,b||null,es(M,E));fw(l,u,O,es(M,T)),rd(l,O);const $=O.tView=am(2,O,f,m,g,l.directiveRegistry,l.pipeRegistry,null,l.schemas,M,null);return null!==l.queries&&(l.queries.template(l,O),$.queries=l.queries.embeddedTView(O)),O}(O,M,T,l,u,f,m,g,b):M.data[O];Or($,!1);const J=qw(M,T,$,a);Wl()&&hy(M,T,J,$),Go(J,T),lm(T,T[O]=eI(J,T,J,$)),Us($)&&sm(M,T,$),null!=b&&ug(T,$,E)}let qw=function iv(a,l,u,f){return ga(!0),l[Ft].createComment("")};function fc(a){return zs(function Eu(){return Ut.lFrame.contextLView}(),vn+a)}function _m(a,l,u){const f=Oe();return Si(f,Xn(),l)&&os(fn(),jn(),f,a,l,f[Ft],u,!1),_m}function as(a,l,u,f,m){const b=m?"class":"style";zy(a,u,l.inputs[b],b,f)}function yg(a,l,u,f){const m=Oe(),g=fn(),b=vn+a,E=m[Ft],T=g.firstCreatePass?function uh(a,l,u,f,m,g){const b=l.consts,T=om(l,a,2,f,es(b,m));return fw(l,u,T,es(b,g)),null!==T.attrs&&Dd(T,T.attrs,!1),null!==T.mergedAttrs&&Dd(T,T.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,T),T}(b,g,m,l,u,f):g.data[b],M=H1(g,m,T,E,l,a);m[b]=M;const O=Us(T);return Or(T,!0),oD(E,M,T),32!=(32&T.flags)&&Wl()&&hy(g,m,M,T),0===function K_(){return Ut.lFrame.elementDepthCount}()&&Go(M,m),function wu(){Ut.lFrame.elementDepthCount++}(),O&&(sm(g,m,T),aw(g,T,m)),null!==f&&ug(m,T),yg}function vg(){let a=Fi();Fp()?pi():(a=a.parent,Or(a,!1));const l=a;(function Yc(a){return Ut.skipHydrationRootTNode===a})(l)&&function Op(){Ut.skipHydrationRootTNode=null}(),function Rp(){Ut.lFrame.elementDepthCount--}();const u=fn();return u.firstCreatePass&&(rd(u,a),tu(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Up(a){return 0!=(8&a.flags)}(l)&&as(u,l,Oe(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Kl(a){return 0!=(16&a.flags)}(l)&&as(u,l,Oe(),l.stylesWithoutHost,!1),vg}function mc(a,l,u,f){return yg(a,l,u,f),vg(),mc}let H1=(a,l,u,f,m,g)=>(ga(!0),cy(f,m,function Tu(){return Ut.lFrame.currentNamespace}()));function ov(a,l,u){const f=Oe(),m=fn(),g=a+vn,b=m.firstCreatePass?function Kw(a,l,u,f,m){const g=l.consts,b=es(g,f),E=om(l,a,8,"ng-container",b);return null!==b&&Dd(E,b,!0),fw(l,u,E,es(g,m)),null!==l.queries&&l.queries.elementStart(l,E),E}(g,m,f,l,u):m.data[g];Or(b,!0);const E=DI(m,f,b,a);return f[g]=E,Wl()&&hy(m,f,E,b),Go(E,f),Us(b)&&(sm(m,f,b),aw(m,b,f)),null!=u&&ug(f,b),ov}function sv(){let a=Fi();const l=fn();return Fp()?pi():(a=a.parent,Or(a,!1)),l.firstCreatePass&&(rd(l,a),tu(a)&&l.queries.elementEnd(a)),sv}function Yw(a,l,u){return ov(a,l,u),sv(),Yw}let DI=(a,l,u,f)=>(ga(!0),dd(l[Ft],""));function ym(){return Oe()}function wg(a){return!!a&&"function"==typeof a.then}function Zw(a){return!!a&&"function"==typeof a.subscribe}function lv(a,l,u,f){const m=Oe(),g=fn(),b=Fi();return Qw(g,m,m[Ft],b,a,l,f),lv}function cv(a,l){const u=Fi(),f=Oe(),m=fn();return Qw(m,f,dc(Gl(m.data),u,f),u,a,l),cv}function Qw(a,l,u,f,m,g,b){const E=Us(f),M=a.firstCreatePass&&yw(a),O=l[Nn],$=nI(l);let J=!0;if(3&f.type||b){const $e=Cr(f,l),ot=b?b($e):$e,St=$.length,ke=b?an=>b(Fn(an[f.index])):f.index;let Jt=null;if(!b&&E&&(Jt=function II(a,l,u,f){const m=a.cleanup;if(null!=m)for(let g=0;g<m.length-1;g+=2){const b=m[g];if(b===u&&m[g+1]===f){const E=l[ys],T=m[g+2];return E.length>T?E[T]:null}"string"==typeof b&&(g+=2)}return null}(a,l,m,f.index)),null!==Jt)(Jt.__ngLastListenerFn__||Jt).__ngNextListenerFn__=g,Jt.__ngLastListenerFn__=g,J=!1;else{g=Xw(f,l,O,g,!1);const an=u.listen(ot,m,g);$.push(g,an),M&&M.push(m,ke,St,St+1)}}else g=Xw(f,l,O,g,!1);const oe=f.outputs;let Ae;if(J&&null!==oe&&(Ae=oe[m])){const $e=Ae.length;if($e)for(let ot=0;ot<$e;ot+=2){const En=l[Ae[ot]][Ae[ot+1]].subscribe(g),go=$.length;$.push(g,En),M&&M.push(m,f.index,go,-(go+1))}}}function Xs(a,l,u,f){try{return Vo(6,l,u),!1!==u(f)}catch(m){return vw(a,m),!1}finally{Vo(7,l,u)}}function Xw(a,l,u,f,m){return function g(b){if(b===Function)return f;Ju(a.componentOffset>-1?xo(a.index,l):l);let T=Xs(l,u,f,b),M=g.__ngNextListenerFn__;for(;M;)T=Xs(l,u,M,b)&&T,M=M.__ngNextListenerFn__;return m&&!1===T&&b.preventDefault(),T}}function TI(a=1){return function bf(a){return(Ut.lFrame.contextLView=function Z_(a,l){for(;a>0;)l=l[Ls],a--;return l}(a,Ut.lFrame.contextLView))[Nn]}(a)}function $1(a,l){let u=null;const f=function vp(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(!(1&u))return l[u+1]}return null}(a);for(let m=0;m<l.length;m++){const g=l[m];if("*"!==g){if(null===f?sa(a,g,!0):j_(f,g))return m}else u=m}return u}function SI(a){const l=Oe()[Qn][ar];if(!l.projection){const f=l.projection=al(a?a.length:1,null),m=f.slice();let g=l.child;for(;null!==g;){const b=a?$1(g,a):0;null!==b&&(m[b]?m[b].projectionNext=g:f[b]=g,m[b]=g),g=g.next}}}function Jw(a,l=0,u){const f=Oe(),m=fn(),g=om(m,vn+a,16,null,u||null);null===g.projection&&(g.projection=l),pi(),(!f[Pr]||Co())&&32!=(32&g.flags)&&function Yr(a,l,u){C0(l[Ft],0,l,u,ud(a,u,l),uy(u.parent||l[ar],u,l))}(m,f,g)}function dv(a,l){return a<<17|l<<2}function Td(a){return a>>17&32767}function tx(a){return 2|a}function hh(a){return(131068&a)>>2}function nx(a,l){return-131069&a|l<<2}function ix(a){return 1|a}function VI(a,l,u,f,m){const g=a[u+1],b=null===l;let E=f?Td(g):hh(g),T=!1;for(;0!==E&&(!1===T||b);){const O=a[E+1];Y1(a[E],l)&&(T=!0,a[E+1]=f?ix(O):tx(O)),E=f?Td(O):hh(O)}T&&(a[u+1]=f?tx(g):ix(g))}function Y1(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&k(a,l)>=0}function ox(a,l,u){return Js(a,l,u,!1),ox}function qI(a,l){return Js(a,l,null,!0),qI}function Js(a,l,u,f){const m=Oe(),g=fn(),b=ns(2);g.firstUpdatePass&&function YI(a,l,u,f){const m=a.data;if(null===m[u+1]){const g=m[Wr()],b=function KI(a,l){return l>=a.expandoStartIndex}(a,u);(function ax(a,l){return 0!=(a.flags&(l?8:16))})(g,f)&&null===l&&!b&&(l=!1),l=function nR(a,l,u,f){const m=Gl(a);let g=f?l.residualClasses:l.residualStyles;if(null===m)0===(f?l.classBindings:l.styleBindings)&&(u=xg(u=fh(null,a,l,u,f),l.attrs,f),g=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==m)if(u=fh(m,a,l,u,f),null===g){let T=function Sd(a,l,u){const f=u?l.classBindings:l.styleBindings;if(0!==hh(f))return a[Td(f)]}(a,l,f);void 0!==T&&Array.isArray(T)&&(T=fh(null,a,l,T[1],f),T=xg(T,l.attrs,f),function uo(a,l,u,f){a[Td(u?l.classBindings:l.styleBindings)]=f}(a,l,f,T))}else g=function Is(a,l,u){let f;const m=l.directiveEnd;for(let g=1+l.directiveStylingLast;g<m;g++)f=xg(f,a[g].hostAttrs,u);return xg(f,l.attrs,u)}(a,l,f)}return void 0!==g&&(f?l.residualClasses=g:l.residualStyles=g),u}(m,g,l,f),function K1(a,l,u,f,m,g){let b=g?l.classBindings:l.styleBindings,E=Td(b),T=hh(b);a[f]=u;let O,M=!1;if(Array.isArray(u)?(O=u[1],(null===O||k(u,O)>0)&&(M=!0)):O=u,m)if(0!==T){const J=Td(a[E+1]);a[f+1]=dv(J,E),0!==J&&(a[J+1]=nx(a[J+1],f)),a[E+1]=function W1(a,l){return 131071&a|l<<17}(a[E+1],f)}else a[f+1]=dv(E,0),0!==E&&(a[E+1]=nx(a[E+1],f)),E=f;else a[f+1]=dv(T,0),0===E?E=f:a[T+1]=nx(a[T+1],f),T=f;M&&(a[f+1]=tx(a[f+1])),VI(a,O,f,!0),VI(a,O,f,!1),function BI(a,l,u,f,m){const g=m?a.residualClasses:a.residualStyles;null!=g&&"string"==typeof l&&k(g,l)>=0&&(u[f+1]=ix(u[f+1]))}(l,O,a,f,g),b=dv(E,T),g?l.classBindings=b:l.styleBindings=b}(m,g,l,u,b,f)}}(g,a,b,f),l!==Qt&&Si(m,b,l)&&function QI(a,l,u,f,m,g,b,E){if(!(3&l.type))return;const T=a.data,M=T[E+1],O=function ka(a){return 1==(1&a)}(M)?sx(T,l,u,m,hh(M),b):void 0;Eg(O)||(Eg(g)||function G1(a){return 2==(2&a)}(M)&&(g=sx(T,null,u,m,E,b)),function Fk(a,l,u,f,m){if(l)m?a.addClass(u,f):a.removeClass(u,f);else{let g=-1===f.indexOf("-")?void 0:rc.DashCase;null==m?a.removeStyle(u,f,g):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),g|=rc.Important),a.setStyle(u,f,m,g))}}(f,b,Qa(Wr(),u),m,g))}(g,g.data[Wr()],m,m[Ft],a,m[b+1]=function XI(a,l){return null==a||""===a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ae(hl(a)))),a}(l,u),f,b)}function fh(a,l,u,f,m){let g=null;const b=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<b&&(g=l[E],f=xg(f,g.hostAttrs,m),g!==a);)E++;return null!==a&&(u.directiveStylingLast=E),f}function xg(a,l,u){const f=u?1:2;let m=-1;if(null!==l)for(let g=0;g<l.length;g++){const b=l[g];"number"==typeof b?m=b:m===f&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),C(a,b,!!u||l[++g]))}return void 0===a?null:a}function sx(a,l,u,f,m,g){const b=null===l;let E;for(;m>0;){const T=a[m],M=Array.isArray(T),O=M?T[1]:T,$=null===O;let J=u[m+1];J===Qt&&(J=$?Et:void 0);let oe=$?S(J,f):O===f?J:void 0;if(M&&!Eg(oe)&&(oe=S(T,f)),Eg(oe)&&(E=oe,b))return E;const Ae=a[m+1];m=b?Td(Ae):hh(Ae)}if(null!==l){let T=g?l.residualClasses:l.residualStyles;null!=T&&(E=S(T,f))}return E}function Eg(a){return void 0!==a}function bm(a,l=""){const u=Oe(),f=fn(),m=a+vn,g=f.firstCreatePass?om(f,m,1,l,null):f.data[m],b=JI(f,u,g,l,a);u[m]=b,Wl()&&hy(f,u,b,g),Or(g,!1)}let JI=(a,l,u,f,m)=>(ga(!0),function Da(a,l){return a.createText(l)}(l[Ft],f));function lx(a){return Cg("",a,""),lx}function Cg(a,l,u){const f=Oe(),m=function _l(a,l,u,f){return Si(a,Xn(),u)?l+de(u)+f:Qt}(f,a,l,u);return m!==Qt&&Io(f,Wr(),m),Cg}function uv(a,l,u,f,m){const g=Oe(),b=fm(g,a,l,u,f,m);return b!==Qt&&Io(g,Wr(),b),uv}function fx(a,l,u){const f=Oe();return Si(f,Xn(),l)&&os(fn(),jn(),f,a,l,f[Ft],u,!0),fx}function pv(a,l,u){const f=Oe();if(Si(f,Xn(),l)){const g=fn(),b=jn();os(g,b,f,a,l,dc(Gl(g.data),b,f),u,!0)}return pv}const yc=void 0;var To=["en",[["a","p"],["AM","PM"],yc],[["AM","PM"],yc,yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yc,"{1} 'at' {0}",yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uT(a){const u=Math.floor(Math.abs(a)),f=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===f?1:5}];let wm={};function xm(a){const l=function fT(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=hT(l);if(u)return u;const f=l.split("-")[0];if(u=hT(f),u)return u;if("en"===f)return To;throw new se(701,!1)}function _v(a){return xm(a)[Lt.PluralCase]}function hT(a){return a in wm||(wm[a]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[a]),wm[a]}var Lt=(()=>((Lt=Lt||{})[Lt.LocaleId=0]="LocaleId",Lt[Lt.DayPeriodsFormat=1]="DayPeriodsFormat",Lt[Lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Lt[Lt.DaysFormat=3]="DaysFormat",Lt[Lt.DaysStandalone=4]="DaysStandalone",Lt[Lt.MonthsFormat=5]="MonthsFormat",Lt[Lt.MonthsStandalone=6]="MonthsStandalone",Lt[Lt.Eras=7]="Eras",Lt[Lt.FirstDayOfWeek=8]="FirstDayOfWeek",Lt[Lt.WeekendRange=9]="WeekendRange",Lt[Lt.DateFormat=10]="DateFormat",Lt[Lt.TimeFormat=11]="TimeFormat",Lt[Lt.DateTimeFormat=12]="DateTimeFormat",Lt[Lt.NumberSymbols=13]="NumberSymbols",Lt[Lt.NumberFormats=14]="NumberFormats",Lt[Lt.CurrencyCode=15]="CurrencyCode",Lt[Lt.CurrencySymbol=16]="CurrencySymbol",Lt[Lt.CurrencyName=17]="CurrencyName",Lt[Lt.Currencies=18]="Currencies",Lt[Lt.Directionality=19]="Directionality",Lt[Lt.PluralCase=20]="PluralCase",Lt[Lt.ExtraData=21]="ExtraData",Lt))();const Em="en-US";let yv=Em;function km(a,l,u,f,m){if(a=Ue(a),Array.isArray(a))for(let g=0;g<a.length;g++)km(a[g],l,u,f,m);else{const g=fn(),b=Oe();let E=Zr(a)?a:Ue(a.provide),T=TD(a);const M=Fi(),O=1048575&M.providerIndexes,$=M.directiveStart,J=M.providerIndexes>>20;if(Zr(a)||!a.multi){const oe=new nl(T,m,rm),Ae=Ov(E,l,m?O:O+J,$);-1===Ae?(Ef(qs(M,b),g,E),Fg(g,a,l.length),l.push(E),M.directiveStart++,M.directiveEnd++,m&&(M.providerIndexes+=1048576),u.push(oe),b.push(oe)):(u[Ae]=oe,b[Ae]=oe)}else{const oe=Ov(E,l,O+J,$),Ae=Ov(E,l,O,O+J),ot=Ae>=0&&u[Ae];if(m&&!ot||!m&&!(oe>=0&&u[oe])){Ef(qs(M,b),g,E);const St=function jT(a,l,u,f,m){const g=new nl(a,u,rm);return g.multi=[],g.index=l,g.componentProviders=0,Ax(g,m,f&&!u),g}(m?wR:zT,u.length,m,f,T);!m&&ot&&(u[Ae].providerFactory=St),Fg(g,a,l.length,0),l.push(E),M.directiveStart++,M.directiveEnd++,m&&(M.providerIndexes+=1048576),u.push(St),b.push(St)}else Fg(g,a,oe>-1?oe:Ae,Ax(u[m?Ae:oe],T,!m&&f));!m&&f&&ot&&u[Ae].componentProviders++}}}function Fg(a,l,u,f){const m=Zr(l),g=function Jk(a){return!!a.useClass}(l);if(m||g){const T=(g?Ue(l.useClass):l).prototype.ngOnDestroy;if(T){const M=a.destroyHooks||(a.destroyHooks=[]);if(!m&&l.multi){const O=M.indexOf(u);-1===O?M.push(u,[f,T]):M[O+1].push(f,T)}else M.push(u,T)}}}function Ax(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function Ov(a,l,u,f){for(let m=u;m<f;m++)if(l[m]===a)return m;return-1}function zT(a,l,u,f){return gh(this.multi,[])}function wR(a,l,u,f){const m=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=Dr(u,u[ft],this.providerFactory.index,f);g=E.slice(0,b),gh(m,g);for(let T=b;T<E.length;T++)g.push(E[T])}else g=[],gh(m,g);return g}function gh(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function Lg(a,l=[]){return u=>{u.providersResolver=(f,m)=>function Sx(a,l,u){const f=fn();if(f.firstCreatePass){const m=Vn(a);km(u,f.data,f.blueprint,m,!0),km(l,f.data,f.blueprint,m,!1)}}(f,m?m(a):a,l)}}class vl{}class kd{}function Mx(a,l){return new kx(a,l??null,[])}class kx extends vl{constructor(l,u,f){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ew(this);const m=kr(l);this._bootstrapComponents=cc(m.bootstrap),this._r3Injector=jD(l,u,[{provide:vl,useValue:this},{provide:Qu,useValue:this.componentFactoryResolver},...f],ae(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class Nv extends kd{constructor(l){super(),this.moduleType=l}create(l){return new kx(this.moduleType,l,[])}}class GT extends vl{constructor(l){super(),this.componentFactoryResolver=new Ew(this),this.instance=null;const u=new H0([...l.providers,{provide:vl,useValue:this},{provide:Qu,useValue:this.componentFactoryResolver}],l.parent||Kf(),l.debugName,new Set(["environment"]));this.injector=u,l.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function Rd(a,l,u=null){return new GT({providers:a,parent:l,debugName:u,runEnvironmentInitializers:!0}).injector}let bc=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const f=by(0,u.type),m=f.length>0?Rd([f],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,m)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=hn({token:a,providedIn:"environment",factory:()=>new a(Zn(Sa))}),a})();function Ug(a){a.getStandaloneInjector=l=>l.get(bc).getOrCreateStandaloneInjector(a)}function _h(a,l,u){const f=cr()+a,m=Oe();return m[f]===Qt?pl(m,f,u?l.call(u):l()):function uc(a,l){return a[l]}(m,f)}function QT(a,l,u,f){return rS(Oe(),cr(),a,l,u,f)}function XT(a,l,u,f,m){return function oS(a,l,u,f,m,g,b){const E=l+u;return Ma(a,E,m,g)?pl(a,E+2,b?f.call(b,m,g):f(m,g)):Om(a,E+2)}(Oe(),cr(),a,l,u,f,m)}function eS(a,l,u,f,m,g,b){return function aS(a,l,u,f,m,g,b,E,T){const M=l+u;return function Ds(a,l,u,f,m,g){const b=Ma(a,l,u,f);return Ma(a,l+2,m,g)||b}(a,M,m,g,b,E)?pl(a,M+4,T?f.call(T,m,g,b,E):f(m,g,b,E)):Om(a,M+4)}(Oe(),cr(),a,l,u,f,m,g,b)}function Om(a,l){const u=a[l];return u===Qt?void 0:u}function rS(a,l,u,f,m,g){const b=l+u;return Si(a,b,m)?pl(a,b+1,g?f.call(g,m):f(m)):Om(a,b+1)}function sS(a,l,u,f,m,g,b,E){const T=l+u;return function Xy(a,l,u,f,m){const g=Ma(a,l,u,f);return Si(a,l+2,m)||g}(a,T,m,g,b)?pl(a,T+3,E?f.call(E,m,g,b):f(m,g,b)):Om(a,T+3)}function Nm(a,l){const u=fn();let f;const m=a+vn;u.firstCreatePass?(f=function Fv(a,l){if(l)for(let u=l.length-1;u>=0;u--){const f=l[u];if(a===f.name)return f}}(l,u.pipeRegistry),u.data[m]=f,f.onDestroy&&(u.destroyHooks??=[]).push(m,f.onDestroy)):f=u.data[m];const g=f.factory||(f.factory=Bs(f.type)),b=cn(rm);try{const E=Yl(!1),T=g();return Yl(E),function rv(a,l,u,f){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=f}(u,Oe(),m,T),T}finally{cn(b)}}function Nx(a,l,u){const f=a+vn,m=Oe(),g=zs(m,f);return Lm(m,f)?rS(m,cr(),l,g.transform,u,g):g.transform(u)}function Fm(a,l,u,f,m){const g=a+vn,b=Oe(),E=zs(b,g);return Lm(b,g)?sS(b,cr(),l,E.transform,u,f,m,E):E.transform(u,f,m)}function Lm(a,l){return a[ft].data[l].pure}function Fx(a){return l=>{setTimeout(a,void 0,l)}}const bl=class IR extends d.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,f){let m=l,g=u||(()=>null),b=f;if(l&&"object"==typeof l){const T=l;m=T.next?.bind(T),g=T.error?.bind(T),b=T.complete?.bind(T)}this.__isAsync&&(g=Fx(g),m&&(m=Fx(m)),b&&(b=Fx(b)));const E=super.subscribe({next:m,error:g,complete:b});return l instanceof W.w0&&l.add(E),E}};function cS(){return this._results[Symbol.iterator]()}class $g{get changes(){return this._changes||(this._changes=new bl)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=$g.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=cS)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const f=this;f.dirty=!1;const m=function Ri(a){return a.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function xa(a,l,u){if(a.length!==l.length)return!1;for(let f=0;f<a.length;f++){let m=a[f],g=l[f];if(u&&(m=u(m),g=u(g)),g!==m)return!1}return!0}(f._results,m,u))&&(f._results=m,f.length=m.length,f.last=m[this.length-1],f.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Um=(()=>{class a{}return a.__NG_ELEMENT_ID__=wl,a})();const Lv=Um,dS=class extends Lv{constructor(l,u,f){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=f}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(l,u){return this.createEmbeddedViewImpl(l,u,null)}createEmbeddedViewImpl(l,u,f){const b=this._declarationTContainer.tView,E=Ly(this._declarationLView,b,l,4096&this._declarationLView[Wt]?4096:16,null,b.declTNode,null,null,null,u||null,f||null);E[Fc]=this._declarationLView[this._declarationTContainer.index];const M=this._declarationLView[$r];return null!==M&&(E[$r]=M.createEmbeddedView(b)),bw(b,E,l),new cm(E)}};function wl(){return Gg(Fi(),Oe())}function Gg(a,l){return 4&a.type?new dS(l,a,vd(a,l)):null}let qg=(()=>{class a{}return a.__NG_ELEMENT_ID__=Kg,a})();function Kg(){return Vx(Fi(),Oe())}const gS=qg,Bx=class extends gS{constructor(l,u,f){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=f}get element(){return vd(this._hostTNode,this._hostLView)}get injector(){return new sl(this._hostTNode,this._hostLView)}get parentInjector(){const l=bs(this._hostTNode,this._hostLView);if(Ru(l)){const u=sd(l,this._hostLView),f=Do(l);return new sl(u[ft].data[f+8],u)}return new sl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=Bv(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-wr}createEmbeddedView(l,u,f){let m,g;"number"==typeof f?m=f:null!=f&&(m=f.index,g=f.injector);const E=l.createEmbeddedViewImpl(u||{},g,null);return this.insertImpl(E,m,false),E}createComponent(l,u,f,m,g){const b=l&&!function Ti(a){return"function"==typeof a}(l);let E;if(b)E=u;else{const $e=u||{};E=$e.index,f=$e.injector,m=$e.projectableNodes,g=$e.environmentInjector||$e.ngModuleRef}const T=b?l:new rh(Zt(l)),M=f||this.parentInjector;if(!g&&null==T.ngModule){const ot=(b?M:this.parentInjector).get(Sa,null);ot&&(g=ot)}Zt(T.componentType??{});const oe=T.create(M,m,null,g);return this.insertImpl(oe.hostView,E,false),oe}insert(l,u){return this.insertImpl(l,u,!1)}insertImpl(l,u,f){const m=l._lView,g=m[ft];if(function uf(a){return Er(a[ni])}(m)){const T=this.indexOf(l);if(-1!==T)this.detach(T);else{const M=m[ni],O=new Bx(M,M[ar],M[ni]);O.detach(O.indexOf(l))}}const b=this._adjustIndex(u),E=this._lContainer;if(function tD(a,l,u,f){const m=wr+f,g=u.length;f>0&&(u[m-1][Rr]=l),f<g-wr?(l[Rr]=u[m],zo(u,wr+f,l)):(u.push(l),l[Rr]=null),l[ni]=u;const b=l[Fc];null!==b&&u!==b&&function y0(a,l){const u=a[qa];l[Qn]!==l[ni][ni][Qn]&&(a[ua]=!0),null===u?a[qa]=[l]:u.push(l)}(b,l);const E=l[$r];null!==E&&E.insertView(a),l[Wt]|=128}(g,m,E,b),!f){const T=oc(b,E),M=m[Ft],O=ur(M,E[io]);null!==O&&function ML(a,l,u,f,m,g){f[Di]=m,f[ar]=l,jf(a,f,u,1,m,g)}(g,E[ar],M,m,O,T)}return l.attachToViewContainerRef(),zo(Yg(E),b,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=Bv(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),f=b0(this._lContainer,u);f&&(Ca(Yg(this._lContainer),u),nD(f[ft],f))}detach(l){const u=this._adjustIndex(l,-1),f=b0(this._lContainer,u);return f&&null!=Ca(Yg(this._lContainer),u)?new cm(f):null}_adjustIndex(l,u=0){return l??this.length+u}};function Bv(a){return a[8]}function Yg(a){return a[8]||(a[8]=[])}function Vx(a,l){let u;const f=l[a.index];return Er(f)?u=f:(u=eI(f,l,null,a),l[a.index]=u,lm(l,u)),Hx(u,l,a,f),new Bx(u,a,l)}let Hx=function zx(a,l,u,f){if(a[io])return;let m;m=8&u.type?Fn(f):function Vv(a,l){const u=a[Ft],f=u.createComment(""),m=Cr(l,a);return hd(u,ur(u,m),f,function qp(a,l){return a.nextSibling(l)}(u,m),!1),f}(l,u),a[io]=m};class Hv{constructor(l){this.queryList=l,this.matches=null}clone(){return new Hv(this.queryList)}setDirty(){this.queryList.setDirty()}}class zv{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const f=null!==l.contentQueries?l.contentQueries[0]:u.length,m=[];for(let g=0;g<f;g++){const b=u.getByIndex(g);m.push(this.queries[b.indexInDeclarationView].clone())}return new zv(m)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==Gx(l,u).matches&&this.queries[u].setDirty()}}class jx{constructor(l,u,f=null){this.predicate=l,this.flags=u,this.read=f}}class Bm{constructor(l=[]){this.queries=l}elementStart(l,u){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let f=0;f<this.length;f++){const m=null!==u?u.length:0,g=this.getByIndex(f).embeddedTView(l,m);g&&(g.indexInDeclarationView=f,null!==u?u.push(g):u=[g])}return null!==u?new Bm(u):null}template(l,u){for(let f=0;f<this.queries.length;f++)this.queries[f].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Wo{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Wo(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let f=l.parent;for(;null!==f&&8&f.type&&f.index!==u;)f=f.parent;return u===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const f=this.metadata.predicate;if(Array.isArray(f))for(let m=0;m<f.length;m++){const g=f[m];this.matchTNodeWithReadOption(l,u,yS(u,g)),this.matchTNodeWithReadOption(l,u,Cn(u,l,g,!1,!1))}else f===Um?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Cn(u,l,f,!1,!1))}matchTNodeWithReadOption(l,u,f){if(null!==f){const m=this.metadata.read;if(null!==m)if(m===og||m===qg||m===Um&&4&u.type)this.addMatch(u.index,-2);else{const g=Cn(u,l,m,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,f)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function yS(a,l){const u=a.localNames;if(null!==u)for(let f=0;f<u.length;f+=2)if(u[f]===l)return u[f+1];return null}function Vm(a,l,u,f){return-1===u?function vS(a,l){return 11&a.type?vd(a,l):4&a.type?Gg(a,l):null}(l,a):-2===u?function TR(a,l,u){return u===og?vd(l,a):u===Um?Gg(l,a):u===qg?Vx(l,a):void 0}(a,l,f):Dr(a,a[ft],u,l)}function ea(a,l,u,f){const m=l[$r].queries[f];if(null===m.matches){const g=a.data,b=u.matches,E=[];for(let T=0;T<b.length;T+=2){const M=b[T];E.push(M<0?null:Vm(l,g[M],b[T+1],u.metadata.read))}m.matches=E}return m.matches}function Zg(a,l,u,f){const m=a.queries.getByIndex(u),g=m.matches;if(null!==g){const b=ea(a,l,m,u);for(let E=0;E<g.length;E+=2){const T=g[E];if(T>0)f.push(b[E/2]);else{const M=g[E+1],O=l[-T];for(let $=wr;$<O.length;$++){const J=O[$];J[Fc]===J[ni]&&Zg(J[ft],J,M,f)}if(null!==O[qa]){const $=O[qa];for(let J=0;J<$.length;J++){const oe=$[J];Zg(oe[ft],oe,M,f)}}}}}return f}function zn(a){const l=Oe(),u=fn(),f=td();js(f+1);const m=Gx(u,f);if(a.dirty&&function kp(a){return 4==(4&a[Wt])}(l)===(2==(2&m.metadata.flags))){if(null===m.matches)a.reset([]);else{const g=m.crossesNgTemplate?Zg(u,l,f,[]):ea(u,l,m,f);a.reset(g,My),a.notifyOnChanges()}return!0}return!1}function bS(a,l,u){const f=fn();f.firstCreatePass&&(bh(f,new jx(a,l,u),-1),2==(2&l)&&(f.staticViewQueries=!0)),$v(f,Oe(),l)}function jv(a,l,u,f){const m=fn();if(m.firstCreatePass){const g=Fi();bh(m,new jx(l,u,f),g.index),function $x(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(m,a),2==(2&u)&&(m.staticContentQueries=!0)}$v(m,Oe(),u)}function Oa(){return function wS(a,l){return a[$r].queries[l].queryList}(Oe(),td())}function $v(a,l,u){const f=new $g(4==(4&u));(function qD(a,l,u,f){const m=nI(l);m.push(u),a.firstCreatePass&&yw(a).push(f,m.length-1)})(a,l,f,f.destroy),null===l[$r]&&(l[$r]=new zv),l[$r].queries.push(new Hv(f))}function bh(a,l,u){null===a.queries&&(a.queries=new Bm),a.queries.track(new Wo(l,u))}function Gx(a,l){return a.queries.getByIndex(l)}function xl(a,l){return Gg(a,l)}function Od(a){return!!kr(a)}const n_=new Pn("Application Initializer");let eE=(()=>{class a{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f}),this.appInits=dn(n_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const m of this.appInits){const g=m();if(wg(g))u.push(g);else if(Zw(g)){const b=new Promise((E,T)=>{g.subscribe({complete:E,error:T})});u.push(b)}}const f=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{f()}).catch(m=>{this.reject(m)}),0===u.length&&f(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=hn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),$m=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=hn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const i_=new Pn("LocaleId",{providedIn:"root",factory:()=>dn(i_,rt.Optional|rt.SkipSelf)||function kS(){return typeof $localize<"u"&&$localize.locale||Em}()}),Ss=new Pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let xc=(()=>{class a{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=hn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();class tE{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let he=(()=>{class a{compileModuleSync(u){return new Nv(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const f=this.compileModuleSync(u),g=cc(kr(u).declarations).reduce((b,E)=>{const T=Zt(E);return T&&b.push(new rh(T)),b},[]);return new tE(f,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=hn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const PS=(()=>Promise.resolve(0))();function r_(a){typeof Zone>"u"?PS.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}function OS(...a){}class Ur{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bl(!1),this.onMicrotaskEmpty=new bl(!1),this.onStable=new bl(!1),this.onError=new bl(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!f&&u,m.shouldCoalesceRunChangeDetection=f,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function BR(){let a=on.requestAnimationFrame,l=on.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const f=l[Zone.__symbol__("OriginalDelegate")];f&&(l=f)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function VR(a){const l=()=>{!function Mo(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(on,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Xv(a),a.isCheckStableRunning=!0,Qv(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Xv(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,f,m,g,b,E)=>{try{return Na(a),u.invokeTask(m,g,b,E)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||a.shouldCoalesceRunChangeDetection)&&l(),nE(a)}},onInvoke:(u,f,m,g,b,E,T)=>{try{return Na(a),u.invoke(m,g,b,E,T)}finally{a.shouldCoalesceRunChangeDetection&&l(),nE(a)}},onHasTask:(u,f,m,g)=>{u.hasTask(m,g),f===m&&("microTask"==g.change?(a._hasPendingMicrotasks=g.microTask,Xv(a),Qv(a)):"macroTask"==g.change&&(a.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,f,m,g)=>(u.handleError(m,g),a.runOutsideAngular(()=>a.onError.emit(g)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ur.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(Ur.isInAngularZone())throw new se(909,!1)}run(l,u,f){return this._inner.run(l,u,f)}runTask(l,u,f,m){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+m,l,o_,OS,OS);try{return g.runTask(b,u,f)}finally{g.cancelTask(b)}}runGuarded(l,u,f){return this._inner.runGuarded(l,u,f)}runOutsideAngular(l){return this._outer.run(l)}}const o_={};function Qv(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Xv(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Na(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function nE(a){a._nesting--,Qv(a)}class Jv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bl,this.onMicrotaskEmpty=new bl,this.onStable=new bl,this.onError=new bl}run(l,u,f){return l.apply(u,f)}runGuarded(l,u,f){return l.apply(u,f)}runOutsideAngular(l){return l()}runTask(l,u,f,m){return l.apply(u,f)}}const iE=new Pn("",{providedIn:"root",factory:NS});function NS(){const a=dn(Ur);let l=!0;const u=new ne.y(m=>{l=a.isStable&&!a.hasPendingMacrotasks&&!a.hasPendingMicrotasks,a.runOutsideAngular(()=>{m.next(l),m.complete()})}),f=new ne.y(m=>{let g;a.runOutsideAngular(()=>{g=a.onStable.subscribe(()=>{Ur.assertNotInAngularZone(),r_(()=>{!l&&!a.hasPendingMacrotasks&&!a.hasPendingMicrotasks&&(l=!0,m.next(!0))})})});const b=a.onUnstable.subscribe(()=>{Ur.assertInAngularZone(),l&&(l=!1,a.runOutsideAngular(()=>{m.next(!1)}))});return()=>{g.unsubscribe(),b.unsubscribe()}});return(0,ce.T)(u,f.pipe((0,Ie.B)()))}const FS=new Pn(""),LS=new Pn("");let rE,HR=(()=>{class a{constructor(u,f,m){this._ngZone=u,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rE||(function zR(a){rE=a}(m),m.addToWindow(f)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ur.assertNotInAngularZone(),r_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())r_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(u)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,f,m){let g=-1;f&&f>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),u(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:m})}whenStable(u,f,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,f,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,f,m){return[]}}return a.\u0275fac=function(u){return new(u||a)(Zn(Ur),Zn(US),Zn(LS))},a.\u0275prov=hn({token:a,factory:a.\u0275fac}),a})(),US=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,f){this._applications.set(u,f)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,f=!0){return rE?.findTestabilityInTree(this,u,f)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=hn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),Nd=null;const BS=new Pn("AllowMultipleToken"),oE=new Pn("PlatformDestroyListeners"),sE=new Pn("appBootstrapListener");class HS{constructor(l,u){this.name=l,this.token=u}}function eb(a,l,u=[]){const f=`Platform: ${l}`,m=new Pn(f);return(g=[])=>{let b=tb();if(!b||b.injector.get(BS,!1)){const E=[...u,...g,{provide:m,useValue:!0}];a?a(E):function GR(a){if(Nd&&!Nd.get(BS,!1))throw new se(400,!1);(function VS(){!function af(a){sf=a}(()=>{throw new se(600,!1)})})(),Nd=a;const l=a.get(oi);(function aE(a){a.get(eg,null)?.forEach(u=>u())})(a)}(function lE(a=[],l){return Ed.create({name:l,providers:[{provide:V0,useValue:"platform"},{provide:oE,useValue:new Set([()=>Nd=null])},...a]})}(E,f))}return function Jr(a){const l=tb();if(!l)throw new se(401,!1);return l}()}}function tb(){return Nd?.get(oi)??null}let oi=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,f){const m=function mo(a="zone.js",l){return"noop"===a?new Jv:"zone.js"===a?new Ur(l):a}(f?.ngZone,function s_(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:a?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:a?.runCoalescing??!1}}({eventCoalescing:f?.ngZoneEventCoalescing,runCoalescing:f?.ngZoneRunCoalescing}));return m.run(()=>{const g=function $T(a,l,u){return new kx(a,l,u)}(u.moduleType,this.injector,function ji(a){return[{provide:Ur,useFactory:a},{provide:qf,multi:!0,useFactory:()=>{const l=dn(WR,{optional:!0});return()=>l.initialize()}},{provide:jS,useFactory:Br},{provide:iE,useFactory:NS}]}(()=>m)),b=g.injector.get(tm,null);return m.runOutsideAngular(()=>{const E=m.onError.subscribe({next:T=>{b.handleError(T)}});g.onDestroy(()=>{po(this._modules,g),E.unsubscribe()})}),function vi(a,l,u){try{const f=u();return wg(f)?f.catch(m=>{throw l.runOutsideAngular(()=>a.handleError(m)),m}):f}catch(f){throw l.runOutsideAngular(()=>a.handleError(f)),f}}(b,m,()=>{const E=g.injector.get(eE);return E.runInitializers(),E.donePromise.then(()=>(function px(a){ut(a,"Expected localeId to be defined"),"string"==typeof a&&(yv=a.toLowerCase().replace(/_/g,"-"))}(g.injector.get(i_,Em)||Em),this._moduleDoBootstrap(g),g))})})}bootstrapModule(u,f=[]){const m=cE({},f);return function jR(a,l,u){const f=new Nv(u);return Promise.resolve(f)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,m))}_moduleDoBootstrap(u){const f=u.injector.get(Fa);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(m=>f.bootstrap(m));else{if(!u.instance.ngDoBootstrap)throw new se(-403,!1);u.instance.ngDoBootstrap(f)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const u=this._injector.get(oE,null);u&&(u.forEach(f=>f()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(Zn(Ed))},a.\u0275prov=hn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function cE(a,l){return Array.isArray(l)?l.reduce(cE,a):{...a,...l}}let Fa=(()=>{class a{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=dn(jS),this.zoneIsStable=dn(iE),this.componentTypes=[],this.components=[],this.isStable=dn(xc).hasPendingTasks.pipe((0,Pe.w)(u=>u?(0,ue.of)(!1):this.zoneIsStable),(0,we.x)(),(0,Ie.B)()),this._injector=dn(Sa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,f){const m=u instanceof PD;if(!this._injector.get(eE).done)throw!m&&_s(u),new se(405,!1);let b;b=m?u:this._injector.get(Qu).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const E=function $R(a){return a.isBoundToModule}(b)?void 0:this._injector.get(vl),M=b.create(Ed.NULL,[],f||b.selector,E),O=M.location.nativeElement,$=M.injector.get(FS,null);return $?.registerApplication(O),M.onDestroy(()=>{this.detachView(M.hostView),po(this.components,M),$?.unregisterApplication(O)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const f=u;this._views.push(f),f.attachToAppRef(this)}detachView(u){const f=u;po(this._views,f),f.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const f=this._injector.get(sE,[]);f.push(...this._bootstrapListeners),f.forEach(m=>m(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>po(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new se(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=hn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function po(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}const jS=new Pn("",{providedIn:"root",factory:()=>dn(tm).handleError.bind(void 0)});function Br(){const a=dn(Ur),l=dn(tm);return u=>a.runOutsideAngular(()=>l.handleError(u))}let WR=(()=>{class a{constructor(){this.zone=dn(Ur),this.applicationRef=dn(Fa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=hn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function nb(){return!1}let Fd=(()=>{class a{}return a.__NG_ELEMENT_ID__=rb,a})();function rb(a){return function Ld(a,l,u){if(Bo(a)&&!u){const f=xo(a.index,l);return new cm(f,f)}return 47&a.type?new cm(l[Qn],l):null}(Fi(),Oe(),16==(16&a))}class bi{constructor(){}supports(l){return Qy(l)}create(l){return new GS(l)}}const Bd=(a,l)=>l;class GS{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Bd}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,f=this._removalsHead,m=0,g=null;for(;u||f;){const b=!f||u&&u.currentIndex<_E(f,m,g)?u:f,E=_E(b,m,g),T=b.currentIndex;if(b===f)m--,f=f._nextRemoved;else if(u=u._next,null==b.previousIndex)m++;else{g||(g=[]);const M=E-m,O=T-m;if(M!=O){for(let J=0;J<M;J++){const oe=J<g.length?g[J]:g[J]=0,Ae=oe+J;O<=Ae&&Ae<M&&(g[J]=oe+1)}g[b.previousIndex]=O-M}}E!==T&&l(b,E,T)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Qy(l))throw new se(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let m,g,b,u=this._itHead,f=!1;if(Array.isArray(l)){this.length=l.length;for(let E=0;E<this.length;E++)g=l[E],b=this._trackByFn(E,g),null!==u&&Object.is(u.trackById,b)?(f&&(u=this._verifyReinsertion(u,g,b,E)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,b,E),f=!0),u=u._next}else m=0,function Ow(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Symbol.iterator]();let f;for(;!(f=u.next()).done;)l(f.value)}}(l,E=>{b=this._trackByFn(m,E),null!==u&&Object.is(u.trackById,b)?(f&&(u=this._verifyReinsertion(u,E,b,m)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,b,m),f=!0),u=u._next,m++}),this.length=m;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,f,m){let g;return null===l?g=this._itTail:(g=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,g,m)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(f,m))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,g,m)):l=this._addAfter(new WS(u,f),g,m),l}_verifyReinsertion(l,u,f,m){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==g?l=this._reinsertAfter(g,l._prev,m):l.currentIndex!=m&&(l.currentIndex=m,this._addToMoves(l,m)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const m=l._prevRemoved,g=l._nextRemoved;return null===m?this._removalsHead=g:m._nextRemoved=g,null===g?this._removalsTail=m:g._prevRemoved=m,this._insertAfter(l,u,f),this._addToMoves(l,f),l}_moveAfter(l,u,f){return this._unlink(l),this._insertAfter(l,u,f),this._addToMoves(l,f),l}_addAfter(l,u,f){return this._insertAfter(l,u,f),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,f){const m=null===u?this._itHead:u._next;return l._next=m,l._prev=u,null===m?this._itTail=l:m._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new qS),this._linkedRecords.put(l),l.currentIndex=f,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,f=l._next;return null===u?this._itHead=f:u._next=f,null===f?this._itTail=u:f._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qS),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class WS{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Km{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===u||u<=f.currentIndex)&&Object.is(f.trackById,l))return f;return null}remove(l){const u=l._prevDup,f=l._nextDup;return null===u?this._head=f:u._nextDup=f,null===f?this._tail=u:f._prevDup=u,null===this._head}}class qS{constructor(){this.map=new Map}put(l){const u=l.trackById;let f=this.map.get(u);f||(f=new Km,this.map.set(u,f)),f.add(l)}get(l,u){const m=this.map.get(l);return m?m.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _E(a,l,u){const f=a.previousIndex;if(null===f)return f;let m=0;return u&&f<u.length&&(m=u[f]),f+l+m}class xn{constructor(){}supports(l){return l instanceof Map||hm(l)}create(){return new Wn}}class Wn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||hm(l)))throw new se(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(f,m)=>{if(u&&u.key===m)this._maybeAddToChanges(u,f),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(m,f);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let f=u;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const f=l._prev;return u._next=l,u._prev=f,l._prev=u,f&&(f._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const m=this._records.get(l);this._maybeAddToChanges(m,u);const g=m._prev,b=m._next;return g&&(g._next=b),b&&(b._prev=g),m._next=null,m._prev=null,m}const f=new Ym(l);return this._records.set(l,f),f.currentValue=u,this._addToAdditions(f),f}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(f=>u(l[f],f))}}class Ym{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sb(){return new c_([new bi])}let c_=(()=>{class a{constructor(u){this.factories=u}static create(u,f){if(null!=f){const m=f.factories.slice();u=u.concat(m)}return new a(u)}static extend(u){return{provide:a,useFactory:f=>a.create(u,f||sb()),deps:[[a,new jo,new oo]]}}find(u){const f=this.factories.find(m=>m.supports(u));if(null!=f)return f;throw new se(901,!1)}}return a.\u0275prov=hn({token:a,providedIn:"root",factory:sb}),a})();function ab(){return new lb([new xn])}let lb=(()=>{class a{constructor(u){this.factories=u}static create(u,f){if(f){const m=f.factories.slice();u=u.concat(m)}return new a(u)}static extend(u){return{provide:a,useFactory:f=>a.create(u,f||ab()),deps:[[a,new jo,new oo]]}}find(u){const f=this.factories.find(m=>m.supports(u));if(f)return f;throw new se(901,!1)}}return a.\u0275prov=hn({token:a,providedIn:"root",factory:ab}),a})();const QR=eb(null,"core",[]);let ZS=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(Zn(Fa))},a.\u0275mod=Rl({type:a}),a.\u0275inj=Ai({}),a})();function ub(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function u_(a){const l=Zt(a);if(!l)return null;const u=new rh(l);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return l.standalone},get isSignal(){return l.signals}}}},3106:(wt,Me,H)=>{H.d(Me,{Z:()=>nt});var d=H(9058),W=H(4537),F=H(534),ne=H(7879);class ce{constructor(it,He){this._delegate=it,this.firebase=He,(0,F._addComponent)(it,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=it.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this._delegate.automaticDataCollectionEnabled=it}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(it=>{this._delegate.checkDestroyed(),it()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(it,He=F._DEFAULT_ENTRY_NAME){var kt;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(it);return!yt.isInitialized()&&"EXPLICIT"===(null===(kt=yt.getComponent())||void 0===kt?void 0:kt.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:He})}_removeServiceInstance(it,He=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(it).clearInstance(He)}_addComponent(it){(0,F._addComponent)(this._delegate,it)}_addOrOverwriteComponent(it){(0,F._addOrOverwriteComponent)(this._delegate,it)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function we(){const Ue=function Pe(Ue){const it={},He={__esModule:!0,initializeApp:function se(Ve,re={}){const ct=F.initializeApp(Ve,re);if((0,d.r3)(it,ct.name))return it[ct.name];const Ze=new Ue(ct,He);return it[ct.name]=Ze,Ze},app:yt,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function de(Ve){const re=Ve.name,ct=re.replace("-compat","");if(F._registerComponent(Ve)&&"PUBLIC"===Ve.type){const Ze=(un=yt())=>{if("function"!=typeof un[ct])throw Ie.create("invalid-app-argument",{appName:re});return un[ct]()};void 0!==Ve.serviceProps&&(0,d.ZB)(Ze,Ve.serviceProps),He[ct]=Ze,Ue.prototype[ct]=function(...un){return this._getService.bind(this,re).apply(this,Ve.multipleInstances?un:[])}}return"PUBLIC"===Ve.type?He[ct]:null},removeApp:function kt(Ve){delete it[Ve]},useAsService:function be(Ve,re){return"serverAuth"===re?null:re},modularAPIs:F}};function yt(Ve){if(!(0,d.r3)(it,Ve=Ve||F._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:Ve});return it[Ve]}return He.default=He,Object.defineProperty(He,"apps",{get:function Se(){return Object.keys(it).map(Ve=>it[Ve])}}),yt.App=Ue,He}(ce);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function it(He){(0,d.ZB)(Ue,He)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ue}(),Z=new ne.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nt=K;!function Le(Ue){(0,F.registerVersion)("@firebase/app-compat","0.2.13",Ue)}()},534:(wt,Me,H)=>{H.r(Me),H.d(Me,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>bo,_DEFAULT_ENTRY_NAME:()=>rt,_addComponent:()=>Mi,_addOrOverwriteComponent:()=>jr,_apps:()=>At,_clearComponents:()=>Dn,_components:()=>cn,_getProvider:()=>xi,_registerComponent:()=>on,_removeServiceInstance:()=>Fo,deleteApp:()=>Bn,getApp:()=>or,getApps:()=>ui,initializeApp:()=>Qo,onLog:()=>ki,registerVersion:()=>Yn,setLogLevel:()=>Zn});var d=H(5861),W=H(4537),F=H(7879),ne=H(9058);const ce=(ve,le)=>le.some(We=>ve instanceof We);let ue,Ie;const K=new WeakMap,Z=new WeakMap,ae=new WeakMap,Ge=new WeakMap,Le=new WeakMap;let it={get(ve,le,We){if(ve instanceof IDBTransaction){if("done"===le)return Z.get(ve);if("objectStoreNames"===le)return ve.objectStoreNames||ae.get(ve);if("store"===le)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return se(ve[le])},set:(ve,le,We)=>(ve[le]=We,!0),has:(ve,le)=>ve instanceof IDBTransaction&&("done"===le||"store"===le)||le in ve};function yt(ve){return"function"==typeof ve?function kt(ve){return ve!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ve)?function(...le){return ve.apply(Se(this),le),se(K.get(this))}:function(...le){return se(ve.apply(Se(this),le))}:function(le,...We){const Ct=ve.call(Se(this),le,...We);return ae.set(Ct,le.sort?le.sort():[le]),se(Ct)}}(ve):(ve instanceof IDBTransaction&&function Ue(ve){if(Z.has(ve))return;const le=new Promise((We,Ct)=>{const zt=()=>{ve.removeEventListener("complete",tn),ve.removeEventListener("error",_n),ve.removeEventListener("abort",_n)},tn=()=>{We(),zt()},_n=()=>{Ct(ve.error||new DOMException("AbortError","AbortError")),zt()};ve.addEventListener("complete",tn),ve.addEventListener("error",_n),ve.addEventListener("abort",_n)});Z.set(ve,le)}(ve),ce(ve,function Pe(){return ue||(ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ve,it):ve)}function se(ve){if(ve instanceof IDBRequest)return function nt(ve){const le=new Promise((We,Ct)=>{const zt=()=>{ve.removeEventListener("success",tn),ve.removeEventListener("error",_n)},tn=()=>{We(se(ve.result)),zt()},_n=()=>{Ct(ve.error),zt()};ve.addEventListener("success",tn),ve.addEventListener("error",_n)});return le.then(We=>{We instanceof IDBCursor&&K.set(We,ve)}).catch(()=>{}),Le.set(le,ve),le}(ve);if(Ge.has(ve))return Ge.get(ve);const le=yt(ve);return le!==ve&&(Ge.set(ve,le),Le.set(le,ve)),le}const Se=ve=>Le.get(ve),Ve=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],ct=new Map;function Ze(ve,le){if(!(ve instanceof IDBDatabase)||le in ve||"string"!=typeof le)return;if(ct.get(le))return ct.get(le);const We=le.replace(/FromIndex$/,""),Ct=le!==We,zt=re.includes(We);if(!(We in(Ct?IDBIndex:IDBObjectStore).prototype)||!zt&&!Ve.includes(We))return;const tn=function(){var _n=(0,d.Z)(function*(qi,...hi){const Ns=this.transaction(qi,zt?"readwrite":"readonly");let $a=Ns.store;return Ct&&($a=$a.index(hi.shift())),(yield Promise.all([$a[We](...hi),zt&&Ns.done]))[0]});return function(hi){return _n.apply(this,arguments)}}();return ct.set(le,tn),tn}!function He(ve){it=ve(it)}(ve=>({...ve,get:(le,We,Ct)=>Ze(le,We)||ve.get(le,We,Ct),has:(le,We)=>!!Ze(le,We)||ve.has(le,We)}));class un{constructor(le){this.container=le}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function Oi(ve){const le=ve.getComponent();return"VERSION"===le?.type}(We)){const Ct=We.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(We=>We).join(" ")}}const Sr="@firebase/app",pe=new F.Yd("@firebase/app"),rt="[DEFAULT]",xt={[Sr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},At=new Map,cn=new Map;function Mi(ve,le){try{ve.container.addComponent(le)}catch(We){pe.debug(`Component ${le.name} failed to register with FirebaseApp ${ve.name}`,We)}}function jr(ve,le){ve.container.addOrOverwriteComponent(le)}function on(ve){const le=ve.name;if(cn.has(le))return pe.debug(`There were multiple attempts to register component ${le}.`),!1;cn.set(le,ve);for(const We of At.values())Mi(We,ve);return!0}function xi(ve,le){const We=ve.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),ve.container.getProvider(le)}function Fo(ve,le,We=rt){xi(ve,le).clearInstance(We)}function Dn(){cn.clear()}const Gt=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kn{constructor(le,We,Ct){this._isDeleted=!1,this._options=Object.assign({},le),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this.checkDestroyed(),this._automaticDataCollectionEnabled=le}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(le){this._isDeleted=le}checkDestroyed(){if(this.isDeleted)throw Gt.create("app-deleted",{appName:this._name})}}const bo="9.23.0";function Qo(ve,le={}){let We=ve;"object"!=typeof le&&(le={name:le});const Ct=Object.assign({name:rt,automaticDataCollectionEnabled:!1},le),zt=Ct.name;if("string"!=typeof zt||!zt)throw Gt.create("bad-app-name",{appName:String(zt)});if(We||(We=(0,ne.aH)()),!We)throw Gt.create("no-options");const tn=At.get(zt);if(tn){if((0,ne.vZ)(We,tn.options)&&(0,ne.vZ)(Ct,tn.config))return tn;throw Gt.create("duplicate-app",{appName:zt})}const _n=new W.H0(zt);for(const hi of cn.values())_n.addComponent(hi);const qi=new Kn(We,Ct,_n);return At.set(zt,qi),qi}function or(ve=rt){const le=At.get(ve);if(!le&&ve===rt&&(0,ne.aH)())return Qo();if(!le)throw Gt.create("no-app",{appName:ve});return le}function ui(){return Array.from(At.values())}function Bn(ve){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,d.Z)(function*(ve){const le=ve.name;At.has(le)&&(At.delete(le),yield Promise.all(ve.container.getProviders().map(We=>We.delete())),ve.isDeleted=!0)})).apply(this,arguments)}function Yn(ve,le,We){var Ct;let zt=null!==(Ct=xt[ve])&&void 0!==Ct?Ct:ve;We&&(zt+=`-${We}`);const tn=zt.match(/\s|\//),_n=le.match(/\s|\//);if(tn||_n){const qi=[`Unable to register library "${zt}" with version "${le}":`];return tn&&qi.push(`library name "${zt}" contains illegal characters (whitespace or "/")`),tn&&_n&&qi.push("and"),_n&&qi.push(`version name "${le}" contains illegal characters (whitespace or "/")`),void pe.warn(qi.join(" "))}on(new W.wA(`${zt}-version`,()=>({library:zt,version:le}),"VERSION"))}function ki(ve,le){if(null!==ve&&"function"!=typeof ve)throw Gt.create("invalid-log-argument");(0,F.Am)(ve,le)}function Zn(ve){(0,F.Ub)(ve)}const Mr="firebase-heartbeat-database",dn=1,Y="firebase-heartbeat-store";let q=null;function B(){return q||(q=function de(ve,le,{blocked:We,upgrade:Ct,blocking:zt,terminated:tn}={}){const _n=indexedDB.open(ve,le),qi=se(_n);return Ct&&_n.addEventListener("upgradeneeded",hi=>{Ct(se(_n.result),hi.oldVersion,hi.newVersion,se(_n.transaction),hi)}),We&&_n.addEventListener("blocked",hi=>We(hi.oldVersion,hi.newVersion,hi)),qi.then(hi=>{tn&&hi.addEventListener("close",()=>tn()),zt&&hi.addEventListener("versionchange",Ns=>zt(Ns.oldVersion,Ns.newVersion,Ns))}).catch(()=>{}),qi}(Mr,dn,{upgrade:(ve,le)=>{0===le&&ve.createObjectStore(Y)}}).catch(ve=>{throw Gt.create("idb-open",{originalErrorMessage:ve.message})})),q}function N(){return(N=(0,d.Z)(function*(ve){try{return yield(yield B()).transaction(Y).objectStore(Y).get(tt(ve))}catch(le){if(le instanceof ne.ZR)pe.warn(le.message);else{const We=Gt.create("idb-get",{originalErrorMessage:le?.message});pe.warn(We.message)}}})).apply(this,arguments)}function ie(ve,le){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,d.Z)(function*(ve,le){try{const Ct=(yield B()).transaction(Y,"readwrite");yield Ct.objectStore(Y).put(le,tt(ve)),yield Ct.done}catch(We){if(We instanceof ne.ZR)pe.warn(We.message);else{const Ct=Gt.create("idb-set",{originalErrorMessage:We?.message});pe.warn(Ct.message)}}})).apply(this,arguments)}function tt(ve){return`${ve.name}!${ve.options.appId}`}class Et{constructor(le){this.container=le,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new Yt(We),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var le=this;return(0,d.Z)(function*(){const Ct=le.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),zt=Vt();if(null===le._heartbeatsCache&&(le._heartbeatsCache=yield le._heartbeatsCachePromise),le._heartbeatsCache.lastSentHeartbeatDate!==zt&&!le._heartbeatsCache.heartbeats.some(tn=>tn.date===zt))return le._heartbeatsCache.heartbeats.push({date:zt,agent:Ct}),le._heartbeatsCache.heartbeats=le._heartbeatsCache.heartbeats.filter(tn=>{const _n=new Date(tn.date).valueOf();return Date.now()-_n<=2592e6}),le._storage.overwrite(le._heartbeatsCache)})()}getHeartbeatsHeader(){var le=this;return(0,d.Z)(function*(){if(null===le._heartbeatsCache&&(yield le._heartbeatsCachePromise),null===le._heartbeatsCache||0===le._heartbeatsCache.heartbeats.length)return"";const We=Vt(),{heartbeatsToSend:Ct,unsentEntries:zt}=function Rn(ve,le=1024){const We=[];let Ct=ve.slice();for(const zt of ve){const tn=We.find(_n=>_n.agent===zt.agent);if(tn){if(tn.dates.push(zt.date),Wi(We)>le){tn.dates.pop();break}}else if(We.push({agent:zt.agent,dates:[zt.date]}),Wi(We)>le){We.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:We,unsentEntries:Ct}}(le._heartbeatsCache.heartbeats),tn=(0,ne.L)(JSON.stringify({version:2,heartbeats:Ct}));return le._heartbeatsCache.lastSentHeartbeatDate=We,zt.length>0?(le._heartbeatsCache.heartbeats=zt,yield le._storage.overwrite(le._heartbeatsCache)):(le._heartbeatsCache.heartbeats=[],le._storage.overwrite(le._heartbeatsCache)),tn})()}}function Vt(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(le){this.app=le,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var le=this;return(0,d.Z)(function*(){return(yield le._canUseIndexedDBPromise)&&(yield function z(ve){return N.apply(this,arguments)}(le.app))||{heartbeats:[]}})()}overwrite(le){var We=this;return(0,d.Z)(function*(){var Ct;if(yield We._canUseIndexedDBPromise){const tn=yield We.read();return ie(We.app,{lastSentHeartbeatDate:null!==(Ct=le.lastSentHeartbeatDate)&&void 0!==Ct?Ct:tn.lastSentHeartbeatDate,heartbeats:le.heartbeats})}})()}add(le){var We=this;return(0,d.Z)(function*(){var Ct;if(yield We._canUseIndexedDBPromise){const tn=yield We.read();return ie(We.app,{lastSentHeartbeatDate:null!==(Ct=le.lastSentHeartbeatDate)&&void 0!==Ct?Ct:tn.lastSentHeartbeatDate,heartbeats:[...tn.heartbeats,...le.heartbeats]})}})()}}function Wi(ve){return(0,ne.L)(JSON.stringify({version:2,heartbeats:ve})).length}!function sr(ve){on(new W.wA("platform-logger",le=>new un(le),"PRIVATE")),on(new W.wA("heartbeat",le=>new Et(le),"PRIVATE")),Yn(Sr,"0.9.13",ve),Yn(Sr,"0.9.13","esm2017"),Yn("fire-js","")}("")},4537:(wt,Me,H)=>{H.d(Me,{H0:()=>Pe,wA:()=>F,zt:()=>ce});var d=H(5861),W=H(9058);class F{constructor(K,Z,ae){this.name=K,this.instanceFactory=Z,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ne="[DEFAULT]";class ce{constructor(K,Z){this.name=K,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const Z=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Z)){const ae=new W.BH;if(this.instancesDeferred.set(Z,ae),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:Z});Ge&&ae.resolve(Ge)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(K){var Z;const ae=this.normalizeInstanceIdentifier(K?.identifier),Ge=null!==(Z=K?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(Le){if(Ge)return null;throw Le}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function Ie(we){return"EAGER"===we.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[Z,ae]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(Z);try{const Le=this.getOrInitializeService({instanceIdentifier:Ge});ae.resolve(Le)}catch{}}}}clearInstance(K=ne){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,d.Z)(function*(){const Z=Array.from(K.instances.values());yield Promise.all([...Z.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...Z.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ne){return this.instances.has(K)}getOptions(K=ne){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:Z={}}=K,ae=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ae,options:Z});for(const[Le,nt]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(Le)&&nt.resolve(Ge);return Ge}onInit(K,Z){var ae;const Ge=this.normalizeInstanceIdentifier(Z),Le=null!==(ae=this.onInitCallbacks.get(Ge))&&void 0!==ae?ae:new Set;Le.add(K),this.onInitCallbacks.set(Ge,Le);const nt=this.instances.get(Ge);return nt&&K(nt,Ge),()=>{Le.delete(K)}}invokeOnInitCallbacks(K,Z){const ae=this.onInitCallbacks.get(Z);if(ae)for(const Ge of ae)try{Ge(K,Z)}catch{}}getOrInitializeService({instanceIdentifier:K,options:Z={}}){let ae=this.instances.get(K);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(we=K,we===ne?void 0:we),options:Z}),this.instances.set(K,ae),this.instancesOptions.set(K,Z),this.invokeOnInitCallbacks(ae,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,ae)}catch{}var we;return ae||null}normalizeInstanceIdentifier(K=ne){return this.component?this.component.multipleInstances?K:ne:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pe{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const Z=this.getProvider(K.name);if(Z.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);Z.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const Z=new ce(K,this);return this.providers.set(K,Z),Z}getProviders(){return Array.from(this.providers.values())}}},7879:(wt,Me,H)=>{H.d(Me,{Am:()=>we,Ub:()=>Pe,Yd:()=>Ie,in:()=>W});const d=[];var W=(()=>((W=W||{})[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",W))();const F={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},ne=W.INFO,ce={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},ue=(K,Z,...ae)=>{if(Z<K.logLevel)return;const Ge=(new Date).toISOString(),Le=ce[Z];if(!Le)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Le](`[${Ge}]  ${K.name}:`,...ae)};class Ie{constructor(Z){this.name=Z,this._logLevel=ne,this._logHandler=ue,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in W))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?F[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...Z),this._logHandler(this,W.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...Z),this._logHandler(this,W.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,W.INFO,...Z),this._logHandler(this,W.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,W.WARN,...Z),this._logHandler(this,W.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...Z),this._logHandler(this,W.ERROR,...Z)}}function Pe(K){d.forEach(Z=>{Z.setLogLevel(K)})}function we(K,Z){for(const ae of d){let Ge=null;Z&&Z.level&&(Ge=F[Z.level]),ae.userLogHandler=null===K?null:(Le,nt,...Ue)=>{const it=Ue.map(He=>{if(null==He)return null;if("string"==typeof He)return He;if("number"==typeof He||"boolean"==typeof He)return He.toString();if(He instanceof Error)return He.message;try{return JSON.stringify(He)}catch{return null}}).filter(He=>He).join(" ");nt>=(Ge??Le.logLevel)&&K({level:W[nt].toLowerCase(),message:it,args:Ue,type:Le.name})}}}},3182:(wt,Me,H)=>{H.d(Me,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=H(534);(0,d.registerVersion)("firebase","9.23.0","app")},7142:(wt,Me,H)=>{H.d(Me,{Z:()=>d.Z});var d=H(3106);d.Z.registerVersion("firebase","9.23.0","app-compat")},6365:(wt,Me,H)=>{H.r(Me);var d=H(5861),W=H(3106),F=H(6878),ne=H(9058),Ie=(H(534),H(7879),H(4537));function Pe(){return window}function Z(){return Z=(0,d.Z)(function*(B,z,N){var ie;const{BuildInfo:Ee}=Pe();(0,F.as)(z.sessionId,"AuthEvent did not contain a session ID");const tt=yield function He(B){return kt.apply(this,arguments)}(z.sessionId),Mt={};return(0,F.at)()?Mt.ibi=Ee.packageName:(0,F.au)()?Mt.apn=Ee.packageName:(0,F.av)(B,"operation-not-supported-in-this-environment"),Ee.displayName&&(Mt.appDisplayName=Ee.displayName),Mt.sessionId=tt,(0,F.aw)(B,N,z.type,void 0,null!==(ie=z.eventId)&&void 0!==ie?ie:void 0,Mt)}),Z.apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(B){const{BuildInfo:z}=Pe(),N={};(0,F.at)()?N.iosBundleId=z.packageName:(0,F.au)()?N.androidPackageName=z.packageName:(0,F.av)(B,"operation-not-supported-in-this-environment"),yield(0,F.ax)(B,N)})).apply(this,arguments)}function Ue(){return(Ue=(0,d.Z)(function*(B,z,N){const{cordova:ie}=Pe();let Ee=()=>{};try{yield new Promise((tt,Mt)=>{let Tt=null;function Et(){var Yt;tt();const Wi=null===(Yt=ie.plugins.browsertab)||void 0===Yt?void 0:Yt.close;"function"==typeof Wi&&Wi(),"function"==typeof N?.close&&N.close()}function Vt(){Tt||(Tt=window.setTimeout(()=>{Mt((0,F.az)(B,"redirect-cancelled-by-user"))},2e3))}function Rn(){"visible"===document?.visibilityState&&Vt()}z.addPassiveListener(Et),document.addEventListener("resume",Vt,!1),(0,F.au)()&&document.addEventListener("visibilitychange",Rn,!1),Ee=()=>{z.removePassiveListener(Et),document.removeEventListener("resume",Vt,!1),document.removeEventListener("visibilitychange",Rn,!1),Tt&&window.clearTimeout(Tt)}})}finally{Ee()}})).apply(this,arguments)}function kt(){return(kt=(0,d.Z)(function*(B){const z=function yt(B){if((0,F.as)(/[0-9a-zA-Z]+/.test(B),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(B);const z=new ArrayBuffer(B.length),N=new Uint8Array(z);for(let ie=0;ie<B.length;ie++)N[ie]=B.charCodeAt(ie);return N}(B),N=yield crypto.subtle.digest("SHA-256",z);return Array.from(new Uint8Array(N)).map(Ee=>Ee.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Se extends F.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(z=>{this.resolveInialized=z})}addPassiveListener(z){this.passiveListeners.add(z)}removePassiveListener(z){this.passiveListeners.delete(z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(z){return this.resolveInialized(),this.passiveListeners.forEach(N=>N(z)),super.onEvent(z)}initialized(){var z=this;return(0,d.Z)(function*(){yield z.initPromise})()}}function Ve(B){return re.apply(this,arguments)}function re(){return(re=(0,d.Z)(function*(B){const z=yield un()._get(Oi(B));return z&&(yield un()._remove(Oi(B))),z})).apply(this,arguments)}function Ze(){const B=[];for(let N=0;N<20;N++){const ie=Math.floor(62*Math.random());B.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(ie))}return B.join("")}function un(){return(0,F.aC)(F.b)}function Oi(B){return(0,F.aD)("authEvent",B.config.apiKey,B.name)}function pe(B){if(!B?.includes("?"))return{};const[z,...N]=B.split("?");return(0,ne.zd)(N.join("?"))}const ze=class Re{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(z){var N=this;return(0,d.Z)(function*(){const ie=z._key();let Ee=N.eventManagers.get(ie);return Ee||(Ee=new Se(z),N.eventManagers.set(ie,Ee),N.attachCallbackListeners(z,Ee)),Ee})()}_openPopup(z){(0,F.av)(z,"operation-not-supported-in-this-environment")}_openRedirect(z,N,ie,Ee){var tt=this;return(0,d.Z)(function*(){!function it(B){var z,N,ie,Ee,tt,Mt,Tt,Et,Vt,Rn;const Yt=Pe();(0,F.aA)("function"==typeof(null===(z=Yt?.universalLinks)||void 0===z?void 0:z.subscribe),B,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aA)(typeof(null===(N=Yt?.BuildInfo)||void 0===N?void 0:N.packageName)<"u",B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aA)("function"==typeof(null===(tt=null===(Ee=null===(ie=Yt?.cordova)||void 0===ie?void 0:ie.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===tt?void 0:tt.openUrl),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(Et=null===(Tt=null===(Mt=Yt?.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===Et?void 0:Et.isAvailable),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(Rn=null===(Vt=Yt?.cordova)||void 0===Vt?void 0:Vt.InAppBrowser)||void 0===Rn?void 0:Rn.open),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(z);const Mt=yield tt._initialize(z);yield Mt.initialized(),Mt.resetRedirect(),(0,F.aG)(),yield tt._originValidation(z);const Tt=function de(B,z,N=null){return{type:z,eventId:N,urlResponse:null,sessionId:Ze(),postBody:null,tenantId:B.tenantId,error:(0,F.az)(B,"no-auth-event")}}(z,ie,Ee);yield function be(B,z){return un()._set(Oi(B),z)}(z,Tt);const Et=yield function K(B,z,N){return Z.apply(this,arguments)}(z,Tt,N),Vt=yield function Le(B){const{cordova:z}=Pe();return new Promise(N=>{z.plugins.browsertab.isAvailable(ie=>{let Ee=null;ie?z.plugins.browsertab.openUrl(B):Ee=z.InAppBrowser.open(B,(0,F.ay)()?"_blank":"_system","location=yes"),N(Ee)})})}(Et);return function nt(B,z,N){return Ue.apply(this,arguments)}(z,Mt,Vt)})()}_isIframeWebStorageSupported(z,N){throw new Error("Method not implemented.")}_originValidation(z){const N=z._key();return this.originValidationPromises[N]||(this.originValidationPromises[N]=function ae(B){return Ge.apply(this,arguments)}(z)),this.originValidationPromises[N]}attachCallbackListeners(z,N){const{universalLinks:ie,handleOpenURL:Ee,BuildInfo:tt}=Pe(),Mt=setTimeout((0,d.Z)(function*(){yield Ve(z),N.onEvent(Qe())}),500),Tt=function(){var Rn=(0,d.Z)(function*(Yt){clearTimeout(Mt);const Wi=yield Ve(z);let sr=null;Wi&&Yt?.url&&(sr=function ct(B,z){var N,ie;const Ee=function ps(B){const z=pe(B),N=z.link?decodeURIComponent(z.link):void 0,ie=pe(N).link,Ee=z.deep_link_id?decodeURIComponent(z.deep_link_id):void 0;return pe(Ee).link||Ee||ie||N||B}(z);if(Ee.includes("/__/auth/callback")){const tt=pe(Ee),Mt=tt.firebaseError?function Sr(B){try{return JSON.parse(B)}catch{return null}}(decodeURIComponent(tt.firebaseError)):null,Tt=null===(ie=null===(N=Mt?.code)||void 0===N?void 0:N.split("auth/"))||void 0===ie?void 0:ie[1],Et=Tt?(0,F.az)(Tt):null;return Et?{type:B.type,eventId:B.eventId,tenantId:B.tenantId,error:Et,urlResponse:null,sessionId:null,postBody:null}:{type:B.type,eventId:B.eventId,tenantId:B.tenantId,sessionId:B.sessionId,urlResponse:Ee,postBody:null}}return null}(Wi,Yt.url)),N.onEvent(sr||Qe())});return function(Wi){return Rn.apply(this,arguments)}}();typeof ie<"u"&&"function"==typeof ie.subscribe&&ie.subscribe(null,Tt);const Et=Ee,Vt=`${tt.packageName.toLowerCase()}://`;Pe().handleOpenURL=function(){var Rn=(0,d.Z)(function*(Yt){if(Yt.toLowerCase().startsWith(Vt)&&Tt({url:Yt}),"function"==typeof Et)try{Et(Yt)}catch(Wi){console.error(Wi)}});return function(Yt){return Rn.apply(this,arguments)}}()}};function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.az)("no-auth-event")}}function ut(){var B;return(null===(B=self?.location)||void 0===B?void 0:B.protocol)||null}function gn(B=(0,ne.z$)()){return!("file:"!==ut()&&"ionic:"!==ut()&&"capacitor:"!==ut()||!B.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ai(){try{const B=self.localStorage,z=F.aL();if(B)return B.setItem(z,"1"),B.removeItem(z),!function Ni(B=(0,ne.z$)()){return function ti(){return(0,ne.w1)()&&11===document?.documentMode}()||function hn(B=(0,ne.z$)()){return/Edge\/\d+/.test(B)}(B)}()||(0,ne.hl)()}catch{return wi()&&(0,ne.hl)()}return!1}function wi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ci(){return(function Dt(){return"http:"===ut()||"https:"===ut()}()||(0,ne.ru)()||gn())&&!function Sn(){return(0,ne.b$)()||(0,ne.UG)()}()&&Ai()&&!wi()}function to(){return gn()&&typeof document<"u"}function vo(){return(vo=(0,d.Z)(function*(){return!!to()&&new Promise(B=>{const z=setTimeout(()=>{B(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(z),B(!0)})})})).apply(this,arguments)}const di={LOCAL:"local",NONE:"none",SESSION:"session"},Ar=F.aA,Zo="persistence";function xt(B){return At.apply(this,arguments)}function At(){return(At=(0,d.Z)(function*(B){yield B._initializationPromise;const z=Mi(),N=F.aD(Zo,B.config.apiKey,B.name);z&&z.setItem(N,B._getPersistence())})).apply(this,arguments)}function Mi(){var B;try{return(null===(B=function rr(){return typeof window<"u"?window:null}())||void 0===B?void 0:B.sessionStorage)||null}catch{return null}}const jr=F.aA;class on{constructor(){this.browserResolver=F.aC(F.k),this.cordovaResolver=F.aC(ze),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(z){var N=this;return(0,d.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._initialize(z)})()}_openPopup(z,N,ie,Ee){var tt=this;return(0,d.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openPopup(z,N,ie,Ee)})()}_openRedirect(z,N,ie,Ee){var tt=this;return(0,d.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openRedirect(z,N,ie,Ee)})()}_isIframeWebStorageSupported(z,N){this.assertedUnderlyingResolver._isIframeWebStorageSupported(z,N)}_originValidation(z){return this.assertedUnderlyingResolver._originValidation(z)}get _shouldInitProactively(){return to()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var z=this;return(0,d.Z)(function*(){if(z.underlyingResolver)return;const N=yield function oa(){return vo.apply(this,arguments)}();z.underlyingResolver=N?z.cordovaResolver:z.browserResolver})()}}function xi(B){return B.unwrap()}function Dn(B){return Gt(B)}function Gt(B){const{_tokenResponse:z}=B instanceof ne.ZR?B.customData:B;if(!z)return null;if(!(B instanceof ne.ZR)&&"temporaryProof"in z&&"phoneNumber"in z)return F.P.credentialFromResult(B);const N=z.providerId;if(!N||N===F.p.PASSWORD)return null;let ie;switch(N){case F.p.GOOGLE:ie=F.V;break;case F.p.FACEBOOK:ie=F.U;break;case F.p.GITHUB:ie=F.W;break;case F.p.TWITTER:ie=F.Z;break;default:const{oauthIdToken:Ee,oauthAccessToken:tt,oauthTokenSecret:Mt,pendingToken:Tt,nonce:Et}=z;return tt||Mt||Ee||Tt?Tt?N.startsWith("saml.")?F.aO._create(N,Tt):F.L._fromParams({providerId:N,signInMethod:N,pendingToken:Tt,idToken:Ee,accessToken:tt}):new F.X(N).credential({idToken:Ee,accessToken:tt,rawNonce:Et}):null}return B instanceof ne.ZR?ie.credentialFromError(B):ie.credentialFromResult(B)}function Kn(B,z){return z.catch(N=>{throw N instanceof ne.ZR&&function vr(B,z){var N;const ie=null===(N=z.customData)||void 0===N?void 0:N._tokenResponse;if("auth/multi-factor-auth-required"===z?.code)z.resolver=new or(B,F.aq(B,z));else if(ie){const Ee=Gt(z),tt=z;Ee&&(tt.credential=Ee,tt.tenantId=ie.tenantId||void 0,tt.email=ie.email||void 0,tt.phoneNumber=ie.phoneNumber||void 0)}}(B,N),N}).then(N=>{const Ee=N.user;return{operationType:N.operationType,credential:Dn(N),additionalUserInfo:F.ao(N),user:ui.getOrCreate(Ee)}})}function bo(B,z){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(B,z){const N=yield z;return{verificationId:N.verificationId,confirm:ie=>Kn(B,N.confirm(ie))}})).apply(this,arguments)}class or{constructor(z,N){this.resolver=N,this.auth=function Fo(B){return B.wrapped()}(z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(z){return Kn(xi(this.auth),this.resolver.resolveSignIn(z))}}class ui{constructor(z){this._delegate=z,this.multiFactor=F.ar(z)}static getOrCreate(z){return ui.USER_MAP.has(z)||ui.USER_MAP.set(z,new ui(z)),ui.USER_MAP.get(z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(z){return this._delegate.getIdTokenResult(z)}getIdToken(z){return this._delegate.getIdToken(z)}linkAndRetrieveDataWithCredential(z){return this.linkWithCredential(z)}linkWithCredential(z){var N=this;return(0,d.Z)(function*(){return Kn(N.auth,F.a0(N._delegate,z))})()}linkWithPhoneNumber(z,N){var ie=this;return(0,d.Z)(function*(){return bo(ie.auth,F.l(ie._delegate,z,N))})()}linkWithPopup(z){var N=this;return(0,d.Z)(function*(){return Kn(N.auth,F.d(N._delegate,z,on))})()}linkWithRedirect(z){var N=this;return(0,d.Z)(function*(){return yield xt(F.aH(N.auth)),F.g(N._delegate,z,on)})()}reauthenticateAndRetrieveDataWithCredential(z){return this.reauthenticateWithCredential(z)}reauthenticateWithCredential(z){var N=this;return(0,d.Z)(function*(){return Kn(N.auth,F.a1(N._delegate,z))})()}reauthenticateWithPhoneNumber(z,N){return bo(this.auth,F.r(this._delegate,z,N))}reauthenticateWithPopup(z){return Kn(this.auth,F.e(this._delegate,z,on))}reauthenticateWithRedirect(z){var N=this;return(0,d.Z)(function*(){return yield xt(F.aH(N.auth)),F.h(N._delegate,z,on)})()}sendEmailVerification(z){return F.ae(this._delegate,z)}unlink(z){var N=this;return(0,d.Z)(function*(){return yield F.an(N._delegate,z),N})()}updateEmail(z){return F.aj(this._delegate,z)}updatePassword(z){return F.ak(this._delegate,z)}updatePhoneNumber(z){return F.u(this._delegate,z)}updateProfile(z){return F.ai(this._delegate,z)}verifyBeforeUpdateEmail(z,N){return F.af(this._delegate,z,N)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ui.USER_MAP=new WeakMap;const Bn=F.aA;let Ei=(()=>{class B{constructor(N,ie){if(this.app=N,ie.isInitialized())return this._delegate=ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ee}=N.options;Bn(Ee,"invalid-api-key",{appName:N.name}),Bn(Ee,"invalid-api-key",{appName:N.name});const tt=typeof window<"u"?on:void 0;this._delegate=ie.initialize({options:{persistence:ki(Ee,N.name),popupRedirectResolver:tt}}),this._delegate._updateErrorMap(F.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ui.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(N){this._delegate.languageCode=N}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(N){this._delegate.tenantId=N}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(N,ie){F.I(this._delegate,N,ie)}applyActionCode(N){return F.a5(this._delegate,N)}checkActionCode(N){return F.a6(this._delegate,N)}confirmPasswordReset(N,ie){return F.a4(this._delegate,N,ie)}createUserWithEmailAndPassword(N,ie){var Ee=this;return(0,d.Z)(function*(){return Kn(Ee._delegate,F.a8(Ee._delegate,N,ie))})()}fetchProvidersForEmail(N){return this.fetchSignInMethodsForEmail(N)}fetchSignInMethodsForEmail(N){return F.ad(this._delegate,N)}isSignInWithEmailLink(N){return F.ab(this._delegate,N)}getRedirectResult(){var N=this;return(0,d.Z)(function*(){Bn(ci(),N._delegate,"operation-not-supported-in-this-environment");const ie=yield F.j(N._delegate,on);return ie?Kn(N._delegate,Promise.resolve(ie)):{credential:null,user:null}})()}addFrameworkForLogging(N){!function Ke(B,z){(0,F.aH)(B)._logFramework(z)}(this._delegate,N)}onAuthStateChanged(N,ie,Ee){const{next:tt,error:Mt,complete:Tt}=Yn(N,ie,Ee);return this._delegate.onAuthStateChanged(tt,Mt,Tt)}onIdTokenChanged(N,ie,Ee){const{next:tt,error:Mt,complete:Tt}=Yn(N,ie,Ee);return this._delegate.onIdTokenChanged(tt,Mt,Tt)}sendSignInLinkToEmail(N,ie){return F.aa(this._delegate,N,ie)}sendPasswordResetEmail(N,ie){return F.a3(this._delegate,N,ie||void 0)}setPersistence(N){var ie=this;return(0,d.Z)(function*(){let Ee;switch(function rt(B,z){Ar(Object.values(di).includes(z),B,"invalid-persistence-type"),(0,ne.b$)()?Ar(z!==di.SESSION,B,"unsupported-persistence-type"):(0,ne.UG)()?Ar(z===di.NONE,B,"unsupported-persistence-type"):wi()?Ar(z===di.NONE||z===di.LOCAL&&(0,ne.hl)(),B,"unsupported-persistence-type"):Ar(z===di.NONE||Ai(),B,"unsupported-persistence-type")}(ie._delegate,N),N){case di.SESSION:Ee=F.a;break;case di.LOCAL:Ee=(yield F.aC(F.i)._isAvailable())?F.i:F.b;break;case di.NONE:Ee=F.N;break;default:return F.av("argument-error",{appName:ie._delegate.name})}return ie._delegate.setPersistence(Ee)})()}signInAndRetrieveDataWithCredential(N){return this.signInWithCredential(N)}signInAnonymously(){return Kn(this._delegate,F._(this._delegate))}signInWithCredential(N){return Kn(this._delegate,F.$(this._delegate,N))}signInWithCustomToken(N){return Kn(this._delegate,F.a2(this._delegate,N))}signInWithEmailAndPassword(N,ie){return Kn(this._delegate,F.a9(this._delegate,N,ie))}signInWithEmailLink(N,ie){return Kn(this._delegate,F.ac(this._delegate,N,ie))}signInWithPhoneNumber(N,ie){return bo(this._delegate,F.s(this._delegate,N,ie))}signInWithPopup(N){var ie=this;return(0,d.Z)(function*(){return Bn(ci(),ie._delegate,"operation-not-supported-in-this-environment"),Kn(ie._delegate,F.c(ie._delegate,N,on))})()}signInWithRedirect(N){var ie=this;return(0,d.Z)(function*(){return Bn(ci(),ie._delegate,"operation-not-supported-in-this-environment"),yield xt(ie._delegate),F.f(ie._delegate,N,on)})()}updateCurrentUser(N){return this._delegate.updateCurrentUser(N)}verifyPasswordResetCode(N){return F.a7(this._delegate,N)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return B.Persistence=di,B})();function Yn(B,z,N){let ie=B;"function"!=typeof B&&({next:ie,error:z,complete:N}=B);const Ee=ie;return{next:Mt=>Ee(Mt&&ui.getOrCreate(Mt)),error:z,complete:N}}function ki(B,z){const N=function cn(B,z){const N=Mi();if(!N)return[];const ie=F.aD(Zo,B,z);switch(N.getItem(ie)){case di.NONE:return[F.N];case di.LOCAL:return[F.i,F.a];case di.SESSION:return[F.a];default:return[]}}(B,z);if(typeof self<"u"&&!N.includes(F.i)&&N.push(F.i),typeof window<"u")for(const ie of[F.b,F.a])N.includes(ie)||N.push(ie);return N.includes(F.N)||N.push(F.N),N}class Zn{constructor(){this.providerId="phone",this._delegate=new F.P(xi(W.Z.auth()))}static credential(z,N){return F.P.credential(z,N)}verifyPhoneNumber(z,N){return this._delegate.verifyPhoneNumber(z,N)}unwrap(){return this._delegate}}Zn.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,Zn.PROVIDER_ID=F.P.PROVIDER_ID;const Mr=F.aA;class dn{constructor(z,N,ie=W.Z.app()){var Ee;Mr(null===(Ee=ie.options)||void 0===Ee?void 0:Ee.apiKey,"invalid-api-key",{appName:ie.name}),this._delegate=new F.R(z,N,ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function q(B){B.INTERNAL.registerComponent(new Ie.wA("auth-compat",z=>{const N=z.getProvider("app-compat").getImmediate(),ie=z.getProvider("auth");return new Ei(N,ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.Q,FacebookAuthProvider:F.U,GithubAuthProvider:F.W,GoogleAuthProvider:F.V,OAuthProvider:F.X,SAMLAuthProvider:F.Y,PhoneAuthProvider:Zn,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:dn,TwitterAuthProvider:F.Z,Auth:Ei,AuthCredential:F.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),B.registerVersion("@firebase/auth-compat","0.4.2")}(W.Z)},5861:(wt,Me,H)=>{function d(F,ne,ce,ue,Ie,Pe,we){try{var K=F[Pe](we),Z=K.value}catch(ae){return void ce(ae)}K.done?ne(Z):Promise.resolve(Z).then(ue,Ie)}function W(F){return function(){var ne=this,ce=arguments;return new Promise(function(ue,Ie){var Pe=F.apply(ne,ce);function we(Z){d(Pe,ue,Ie,we,K,"next",Z)}function K(Z){d(Pe,ue,Ie,we,K,"throw",Z)}we(void 0)})}}H.d(Me,{Z:()=>W})},7582:(wt,Me,H)=>{function ne(pe,De){var Re={};for(var ze in pe)Object.prototype.hasOwnProperty.call(pe,ze)&&De.indexOf(ze)<0&&(Re[ze]=pe[ze]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var Qe=0;for(ze=Object.getOwnPropertySymbols(pe);Qe<ze.length;Qe++)De.indexOf(ze[Qe])<0&&Object.prototype.propertyIsEnumerable.call(pe,ze[Qe])&&(Re[ze[Qe]]=pe[ze[Qe]])}return Re}function ae(pe,De,Re,ze){return new(Re||(Re=Promise))(function(Ke,at){function pt(Dt){try{ut(ze.next(Dt))}catch(gn){at(gn)}}function qn(Dt){try{ut(ze.throw(Dt))}catch(gn){at(gn)}}function ut(Dt){Dt.done?Ke(Dt.value):function Qe(Ke){return Ke instanceof Re?Ke:new Re(function(at){at(Ke)})}(Dt.value).then(pt,qn)}ut((ze=ze.apply(pe,De||[])).next())})}function se(pe){return this instanceof se?(this.v=pe,this):new se(pe)}function Se(pe,De,Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qe,ze=Re.apply(pe,De||[]),Ke=[];return Qe={},at("next"),at("throw"),at("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe;function at(Sn){ze[Sn]&&(Qe[Sn]=function(ti){return new Promise(function(hn,Ni){Ke.push([Sn,ti,hn,Ni])>1||pt(Sn,ti)})})}function pt(Sn,ti){try{!function qn(Sn){Sn.value instanceof se?Promise.resolve(Sn.value.v).then(ut,Dt):gn(Ke[0][2],Sn)}(ze[Sn](ti))}catch(hn){gn(Ke[0][3],hn)}}function ut(Sn){pt("next",Sn)}function Dt(Sn){pt("throw",Sn)}function gn(Sn,ti){Sn(ti),Ke.shift(),Ke.length&&pt(Ke[0][0],Ke[0][1])}}function be(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,De=pe[Symbol.asyncIterator];return De?De.call(pe):(pe=function Ue(pe){var De="function"==typeof Symbol&&Symbol.iterator,Re=De&&pe[De],ze=0;if(Re)return Re.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&ze>=pe.length&&(pe=void 0),{value:pe&&pe[ze++],done:!pe}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),Re={},ze("next"),ze("throw"),ze("return"),Re[Symbol.asyncIterator]=function(){return this},Re);function ze(Ke){Re[Ke]=pe[Ke]&&function(at){return new Promise(function(pt,qn){!function Qe(Ke,at,pt,qn){Promise.resolve(qn).then(function(ut){Ke({value:ut,done:pt})},at)}(pt,qn,(at=pe[Ke](at)).done,at.value)})}}}H.d(Me,{FC:()=>Se,KL:()=>be,_T:()=>ne,mG:()=>ae,qq:()=>se})}},wt=>{wt(wt.s=4081)}]);