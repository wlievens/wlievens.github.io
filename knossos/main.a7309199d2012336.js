(self.webpackChunkknossos_frontend=self.webpackChunkknossos_frontend||[]).push([[179],{6304:(Tt,Pe,z)=>{"use strict";z.d(Pe,{Dh:()=>Ue,GT:()=>pe,cc:()=>Oe,hO:()=>Ge,on:()=>K,pX:()=>le,xv:()=>xe});var d=z(5879),q=z(7142),L=z(8186);Tt=z.hmd(Tt);const ae=["ngOnDestroy"],le=(Ye,Et,Ct,ce={})=>new Proxy(Ye,{get:(Re,fe)=>Ct.runOutsideAngular(()=>{var Ee;if(Ye[fe])return!(null===(Ee=ce?.spy)||void 0===Ee)&&Ee.get&&ce.spy.get(fe,Ye[fe]),Ye[fe];if(ae.indexOf(fe)>-1)return()=>{};const $e=Et.toPromise().then(oe=>{const ht=oe&&oe[fe];return"function"==typeof ht?ht.bind(oe):ht&&ht.then?ht.then(Xe=>Ct.run(()=>Xe)):Ct.run(()=>ht)});return new Proxy(()=>{},{get:(oe,ht)=>$e[ht],apply:(oe,ht,Xe)=>$e.then(mn=>{var Oi;const qi=mn&&mn(...Xe);return!(null===(Oi=ce?.spy)||void 0===Oi)&&Oi.apply&&ce.spy.apply(fe,Xe,qi),qi})})})}),pe=(Ye,Et)=>{Et.forEach(Ct=>{Object.getOwnPropertyNames(Ct.prototype||Ct).forEach(ce=>{Object.defineProperty(Ye.prototype,ce,Object.getOwnPropertyDescriptor(Ct.prototype||Ct,ce))})})};class Me{constructor(Et){return Et}}const Ue=new d.OlP("angularfire2.app.options"),xe=new d.OlP("angularfire2.app.name");function K(Ye,Et,Ct){const Re="object"==typeof Ct&&Ct||{};Re.name=Re.name||"string"==typeof Ct&&Ct||"[DEFAULT]";const Ee=q.Z.apps.filter($e=>$e&&$e.name===Re.name)[0]||Et.runOutsideAngular(()=>q.Z.initializeApp(Ye,Re));try{JSON.stringify(Ye)!==JSON.stringify(Ee.options)&&J("error",`${Ee.name} Firebase App already initialized with different options${Tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Me(Ee)}const J=(Ye,...Et)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ye](...Et)},ue={provide:Me,useFactory:K,deps:[Ue,d.R0b,[new d.FiY,xe]]};let Ge=(()=>{class Ye{constructor(Ct){q.Z.registerVersion("angularfire",L.q4.full,"core"),q.Z.registerVersion("angularfire",L.q4.full,"app-compat"),q.Z.registerVersion("angular",d.q4F.full,Ct.toString())}static initializeApp(Ct,ce){return{ngModule:Ye,providers:[{provide:Ue,useValue:Ct},{provide:xe,useValue:ce}]}}}return Ye.\u0275fac=function(Ct){return new(Ct||Ye)(d.LFG(d.Lbi))},Ye.\u0275mod=d.oAB({type:Ye}),Ye.\u0275inj=d.cJS({providers:[ue]}),Ye})();function Oe(Ye,Et,Ct,ce,Re){const[,fe,Ee]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Ye)||[];if(fe)return function ot(Ye,Et){try{return Ye.toString()===Et.toString()}catch{return Ye===Et}}(Re,Ee)||(st("error",`${Et} was already initialized on the ${Ct} Firebase App with different settings.${Ne?" You may need to reload as Firebase is not HMR aware.":""}`),st("warn",{is:Re,was:Ee})),fe;{const $e=ce();return globalThis.\u0275AngularfireInstanceCache.push([Ye,$e,Re]),$e}}const Ne=!!Tt.hot,st=(Ye,...Et)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ye](...Et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(Tt,Pe,z)=>{"use strict";z.d(Pe,{q4:()=>Yr,iC:()=>vd,fc:()=>La,HU:()=>nr,vb:()=>iy,JM:()=>$u,u3:()=>Wu});var d=z(5879),q=z(3182),L=z(5861),ae=z(534),le=z(9058),pe=z(4537),Me=z(7879);const Ue=(C,S)=>S.some(k=>C instanceof k);let xe,K;const Ge=new WeakMap,Oe=new WeakMap,ot=new WeakMap,Ne=new WeakMap,st=new WeakMap;let Ct={get(C,S,k){if(C instanceof IDBTransaction){if("done"===S)return Oe.get(C);if("objectStoreNames"===S)return C.objectStoreNames||ot.get(C);if("store"===S)return k.objectStoreNames[1]?void 0:k.objectStore(k.objectStoreNames[0])}return Ee(C[S])},set:(C,S,k)=>(C[S]=k,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function fe(C){return"function"==typeof C?function Re(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ue(){return K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply($e(this),S),Ee(Ge.get(this))}:function(...S){return Ee(C.apply($e(this),S))}:function(S,...k){const G=C.call($e(this),S,...k);return ot.set(G,S.sort?S.sort():[S]),Ee(G)}}(C):(C instanceof IDBTransaction&&function Et(C){if(Oe.has(C))return;const S=new Promise((k,G)=>{const te=()=>{C.removeEventListener("complete",se),C.removeEventListener("error",Ie),C.removeEventListener("abort",Ie)},se=()=>{k(),te()},Ie=()=>{G(C.error||new DOMException("AbortError","AbortError")),te()};C.addEventListener("complete",se),C.addEventListener("error",Ie),C.addEventListener("abort",Ie)});Oe.set(C,S)}(C),Ue(C,function J(){return xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,Ct):C)}function Ee(C){if(C instanceof IDBRequest)return function Ye(C){const S=new Promise((k,G)=>{const te=()=>{C.removeEventListener("success",se),C.removeEventListener("error",Ie)},se=()=>{k(Ee(C.result)),te()},Ie=()=>{G(C.error),te()};C.addEventListener("success",se),C.addEventListener("error",Ie)});return S.then(k=>{k instanceof IDBCursor&&Ge.set(k,C)}).catch(()=>{}),st.set(S,C),S}(C);if(Ne.has(C))return Ne.get(C);const S=fe(C);return S!==C&&(Ne.set(C,S),st.set(S,C)),S}const $e=C=>st.get(C),Xe=["get","getKey","getAll","getAllKeys","count"],mn=["put","add","delete","clear"],Oi=new Map;function qi(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(Oi.get(S))return Oi.get(S);const k=S.replace(/FromIndex$/,""),G=S!==k,te=mn.includes(k);if(!(k in(G?IDBIndex:IDBObjectStore).prototype)||!te&&!Xe.includes(k))return;const se=function(){var Ie=(0,L.Z)(function*(ft,...lt){const Ot=this.transaction(ft,te?"readwrite":"readonly");let tn=Ot.store;return G&&(tn=tn.index(lt.shift())),(yield Promise.all([tn[k](...lt),te&&Ot.done]))[0]});return function(lt){return Ie.apply(this,arguments)}}();return Oi.set(S,se),se}!function ce(C){Ct=C(Ct)}(C=>({...C,get:(S,k,G)=>qi(S,k)||C.get(S,k,G),has:(S,k)=>!!qi(S,k)||C.has(S,k)}));const Ko="@firebase/installations",ye="0.6.4",Se=1e4,Le=`w:${ye}`,qe="FIS_v2",tt="https://firebaseinstallations.googleapis.com/v1",Je=36e5,pt=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Rt(C){return C instanceof le.ZR&&C.code.includes("request-failed")}function Gt({projectId:C}){return`${tt}/projects/${C}/installations`}function wn(C){return{token:C.token,requestStatus:2,expiresIn:or(C.expiresIn),creationTime:Date.now()}}function ln(C,S){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,L.Z)(function*(C,S){const G=(yield S.json()).error;return pt.create("request-failed",{requestName:C,serverCode:G.code,serverMessage:G.message,serverStatus:G.status})})).apply(this,arguments)}function hi({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Zn(C){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,L.Z)(function*(C){const S=yield C();return S.status>=500&&S.status<600?C():S})).apply(this,arguments)}function or(C){return Number(C.replace("s","000"))}function Zi(){return(Zi=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:S},{fid:k}){const G=Gt(C),te=hi(C),se=S.getImmediate({optional:!0});if(se){const Ot=yield se.getHeartbeatsHeader();Ot&&te.append("x-firebase-client",Ot)}const ft={method:"POST",headers:te,body:JSON.stringify({fid:k,authVersion:qe,appId:C.appId,sdkVersion:Le})},lt=yield Zn(()=>fetch(G,ft));if(lt.ok){const Ot=yield lt.json();return{fid:Ot.fid||k,registrationStatus:2,refreshToken:Ot.refreshToken,authToken:wn(Ot.authToken)}}throw yield ln("Create Installation",lt)})).apply(this,arguments)}function li(C){return new Promise(S=>{setTimeout(S,C)})}const Ei=/^[cdef][\w-]{21}$/,ut="";function At(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const k=function Lt(C){return function Ki(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Ei.test(k)?k:ut}catch{return ut}}function gn(C){return`${C.appName}!${C.appId}`}const Ni=new Map;function Ir(C,S){const k=gn(C);no(k,S),function Sn(C,S){const k=function Kt(){return!Qi&&"BroadcastChannel"in self&&(Qi=new BroadcastChannel("[Firebase] FID Change"),Qi.onmessage=C=>{no(C.data.key,C.data.fid)}),Qi}();k&&k.postMessage({key:C,fid:S}),function ri(){0===Ni.size&&Qi&&(Qi.close(),Qi=null)}()}(k,S)}function no(C,S){const k=Ni.get(C);if(k)for(const G of k)G(S)}let Qi=null;const io="firebase-installations-database",ko=1,sr="firebase-installations-store";let Kn=null;function Wn(){return Kn||(Kn=function oe(C,S,{blocked:k,upgrade:G,blocking:te,terminated:se}={}){const Ie=indexedDB.open(C,S),ft=Ee(Ie);return G&&Ie.addEventListener("upgradeneeded",lt=>{G(Ee(Ie.result),lt.oldVersion,lt.newVersion,Ee(Ie.transaction))}),k&&Ie.addEventListener("blocked",()=>k()),ft.then(lt=>{se&&lt.addEventListener("close",()=>se()),te&&lt.addEventListener("versionchange",()=>te())}).catch(()=>{}),ft}(io,ko,{upgrade:(C,S)=>{0===S&&C.createObjectStore(sr)}})),Kn}function Ci(C,S){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,L.Z)(function*(C,S){const k=gn(C),te=(yield Wn()).transaction(sr,"readwrite"),se=te.objectStore(sr),Ie=yield se.get(k);return yield se.put(S,k),yield te.done,(!Ie||Ie.fid!==S.fid)&&Ir(C,S.fid),S})).apply(this,arguments)}function Di(C){return qn.apply(this,arguments)}function qn(){return(qn=(0,L.Z)(function*(C){const S=gn(C),G=(yield Wn()).transaction(sr,"readwrite");yield G.objectStore(sr).delete(S),yield G.done})).apply(this,arguments)}function Tr(C,S){return _n.apply(this,arguments)}function _n(){return(_n=(0,L.Z)(function*(C,S){const k=gn(C),te=(yield Wn()).transaction(sr,"readwrite"),se=te.objectStore(sr),Ie=yield se.get(k),ft=S(Ie);return void 0===ft?yield se.delete(k):yield se.put(ft,k),yield te.done,ft&&(!Ie||Ie.fid!==ft.fid)&&Ir(C,ft.fid),ft})).apply(this,arguments)}function X(C){return Z.apply(this,arguments)}function Z(){return Z=(0,L.Z)(function*(C){let S;const k=yield Tr(C.appConfig,G=>{const te=function V(C){return Pt(C||{fid:At(),registrationStatus:0})}(G),se=function $(C,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(pt.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},G=function F(C,S){return re.apply(this,arguments)}(C,k);return{installationEntry:k,registrationPromise:G}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Te(C)}:{installationEntry:S}}(C,te);return S=se.registrationPromise,se.installationEntry});return k.fid===ut?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}}),Z.apply(this,arguments)}function re(){return re=(0,L.Z)(function*(C,S){try{const k=yield function Yi(C,S){return Zi.apply(this,arguments)}(C,S);return Ci(C.appConfig,k)}catch(k){throw Rt(k)&&409===k.customData.serverCode?yield Di(C.appConfig):yield Ci(C.appConfig,{fid:S.fid,registrationStatus:0}),k}}),re.apply(this,arguments)}function Te(C){return rt.apply(this,arguments)}function rt(){return(rt=(0,L.Z)(function*(C){let S=yield Nt(C.appConfig);for(;1===S.registrationStatus;)yield li(100),S=yield Nt(C.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:G}=yield X(C);return G||k}return S})).apply(this,arguments)}function Nt(C){return Tr(C,S=>{if(!S)throw pt.create("installation-not-found");return Pt(S)})}function Pt(C){return function Mt(C){return 1===C.registrationStatus&&C.registrationTime+Se<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Fn(){return(Fn=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:S},k){const G=function Jt(C,{fid:S}){return`${Gt(C)}/${S}/authTokens:generate`}(C,k),te=function ii(C,{refreshToken:S}){const k=hi(C);return k.append("Authorization",function gr(C){return`${qe} ${C}`}(S)),k}(C,k),se=S.getImmediate({optional:!0});if(se){const Ot=yield se.getHeartbeatsHeader();Ot&&te.append("x-firebase-client",Ot)}const ft={method:"POST",headers:te,body:JSON.stringify({installation:{sdkVersion:Le,appId:C.appId}})},lt=yield Zn(()=>fetch(G,ft));if(lt.ok)return wn(yield lt.json());throw yield ln("Generate Auth Token",lt)})).apply(this,arguments)}function zi(C){return Xi.apply(this,arguments)}function Xi(){return Xi=(0,L.Z)(function*(C,S=!1){let k;const G=yield Tr(C.appConfig,se=>{if(!en(se))throw pt.create("not-registered");const Ie=se.authToken;if(!S&&function yn(C){return 2===C.requestStatus&&!function Ji(C){const S=Date.now();return S<C.creationTime||C.creationTime+C.expiresIn<S+Je}(C)}(Ie))return se;if(1===Ie.requestStatus)return k=function Ce(C,S){return he.apply(this,arguments)}(C,S),se;{if(!navigator.onLine)throw pt.create("app-offline");const ft=function mi(C){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:S})}(se);return k=function Dt(C,S){return Ht.apply(this,arguments)}(C,ft),ft}});return k?yield k:G.authToken}),Xi.apply(this,arguments)}function he(){return(he=(0,L.Z)(function*(C,S){let k=yield We(C.appConfig);for(;1===k.authToken.requestStatus;)yield li(100),k=yield We(C.appConfig);const G=k.authToken;return 0===G.requestStatus?zi(C,S):G})).apply(this,arguments)}function We(C){return Tr(C,S=>{if(!en(S))throw pt.create("not-registered");return function mo(C){return 1===C.requestStatus&&C.requestTime+Se<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ht(){return Ht=(0,L.Z)(function*(C,S){try{const k=yield function $t(C,S){return Fn.apply(this,arguments)}(C,S),G=Object.assign(Object.assign({},S),{authToken:k});return yield Ci(C.appConfig,G),k}catch(k){if(!Rt(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const G=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Ci(C.appConfig,G)}else yield Di(C.appConfig);throw k}}),Ht.apply(this,arguments)}function en(C){return void 0!==C&&2===C.registrationStatus}function Ro(){return(Ro=(0,L.Z)(function*(C){const S=C,{installationEntry:k,registrationPromise:G}=yield X(S);return G?G.catch(console.error):zi(S).catch(console.error),k.fid})).apply(this,arguments)}function oi(){return oi=(0,L.Z)(function*(C,S=!1){const k=C;return yield function ro(C){return _r.apply(this,arguments)}(k),(yield zi(k,S)).token}),oi.apply(this,arguments)}function _r(){return(_r=(0,L.Z)(function*(C){const{registrationPromise:S}=yield X(C);S&&(yield S)})).apply(this,arguments)}function Jo(C){return pt.create("missing-app-config-values",{valueName:C})}const Js="installations",po=C=>{const S=C.getProvider("app").getImmediate(),k=function Xs(C){if(!C||!C.options)throw Jo("App Configuration");if(!C.name)throw Jo("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!C.options[k])throw Jo(k);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Ca=C=>{const S=C.getProvider("app").getImmediate(),k=(0,ae._getProvider)(S,Js).getImmediate();return{getId:()=>function ar(C){return Ro.apply(this,arguments)}(k),getToken:te=>function Qo(C){return oi.apply(this,arguments)}(k,te)}};(function dl(){(0,ae._registerComponent)(new pe.wA(Js,po,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("installations-internal",Ca,"PRIVATE"))})(),(0,ae.registerVersion)(Ko,ye),(0,ae.registerVersion)(Ko,ye,"esm2017");const Ls="@firebase/remote-config",H=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Jl{constructor(S,k,G,te){this.client=S,this.storage=k,this.storageCache=G,this.logger=te}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const G=Date.now()-k,te=G<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${G}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${te}.`),te}fetch(S){var k=this;return(0,L.Z)(function*(){const[G,te]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(te&&k.isCachedDataFresh(S.cacheMaxAgeMillis,G))return te;S.eTag=te&&te.eTag;const se=yield k.client.fetch(S),Ie=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Ie.push(k.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Ie),se})()}}function Hc(C=navigator){return C.languages&&C.languages[0]||C.language}class ea{constructor(S,k,G,te,se,Ie){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=G,this.projectId=te,this.apiKey=se,this.appId=Ie}fetch(S){var k=this;return(0,L.Z)(function*(){const[G,te]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},lt={sdk_version:k.sdkVersion,app_instance_id:G,app_instance_id_token:te,app_id:k.appId,language_code:Hc()},Ot={method:"POST",headers:ft,body:JSON.stringify(lt)},tn=fetch(Ie,Ot),qt=new Promise((vo,bo)=>{S.signal.addEventListener(()=>{const bd=new Error("The operation was aborted.");bd.name="AbortError",bo(bd)})});let wr;try{yield Promise.race([tn,qt]),wr=yield tn}catch(vo){let bo="fetch-client-network";throw"AbortError"===vo?.name&&(bo="fetch-timeout"),H.create(bo,{originalErrorMessage:vo?.message})}let dr=wr.status;const Cs=wr.headers.get("ETag")||void 0;let Ba,Vs;if(200===wr.status){let vo;try{vo=yield wr.json()}catch(bo){throw H.create("fetch-client-parse",{originalErrorMessage:bo?.message})}Ba=vo.entries,Vs=vo.state}if("INSTANCE_STATE_UNSPECIFIED"===Vs?dr=500:"NO_CHANGE"===Vs?dr=304:("NO_TEMPLATE"===Vs||"EMPTY_CONFIG"===Vs)&&(Ba={}),304!==dr&&200!==dr)throw H.create("fetch-status",{httpStatus:dr});return{status:dr,eTag:Cs,config:Ba}})()}}class Ia{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,L.Z)(function*(){const G=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,G)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:G}){var te=this;return(0,L.Z)(function*(){yield function _i(C,S){return new Promise((k,G)=>{const te=Math.max(S-Date.now(),0),se=setTimeout(k,te);C.addEventListener(()=>{clearTimeout(se),G(H.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const se=yield te.client.fetch(S);return yield te.storage.deleteThrottleMetadata(),se}catch(se){if(!function zc(C){if(!(C instanceof le.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(se))throw se;const Ie={throttleEndTimeMillis:Date.now()+(0,le.$s)(G),backoffCount:G+1};return yield te.storage.setThrottleMetadata(Ie),te.attemptFetch(S,Ie)}})()}}class jc{constructor(S,k,G,te,se){this.app=S,this._client=k,this._storageCache=G,this._storage=te,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ar(C,S){const k=C.target.error||void 0;return H.create(S,{originalErrorMessage:k&&k?.message})}const Wr="app_namespace_store";class gp{constructor(S,k,G,te=function An(){return new Promise((C,S)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=G=>{S(Ar(G,"storage-open"))},k.onsuccess=G=>{C(G.target.result)},k.onupgradeneeded=G=>{0===G.oldVersion&&G.target.result.createObjectStore(Wr,{keyPath:"compositeKey"})}}catch(k){S(H.create("storage-open",{originalErrorMessage:k?.message}))}})}()){this.appId=S,this.appName=k,this.namespace=G,this.openDbPromise=te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,L.Z)(function*(){const G=yield k.openDbPromise;return new Promise((te,se)=>{const ft=G.transaction([Wr],"readonly").objectStore(Wr),lt=k.createCompositeKey(S);try{const Ot=ft.get(lt);Ot.onerror=tn=>{se(Ar(tn,"storage-get"))},Ot.onsuccess=tn=>{const qt=tn.target.result;te(qt?qt.value:void 0)}}catch(Ot){se(H.create("storage-get",{originalErrorMessage:Ot?.message}))}})})()}set(S,k){var G=this;return(0,L.Z)(function*(){const te=yield G.openDbPromise;return new Promise((se,Ie)=>{const lt=te.transaction([Wr],"readwrite").objectStore(Wr),Ot=G.createCompositeKey(S);try{const tn=lt.put({compositeKey:Ot,value:k});tn.onerror=qt=>{Ie(Ar(qt,"storage-set"))},tn.onsuccess=()=>{se()}}catch(tn){Ie(H.create("storage-set",{originalErrorMessage:tn?.message}))}})})()}delete(S){var k=this;return(0,L.Z)(function*(){const G=yield k.openDbPromise;return new Promise((te,se)=>{const ft=G.transaction([Wr],"readwrite").objectStore(Wr),lt=k.createCompositeKey(S);try{const Ot=ft.delete(lt);Ot.onerror=tn=>{se(Ar(tn,"storage-delete"))},Ot.onsuccess=()=>{te()}}catch(Ot){se(H.create("storage-delete",{originalErrorMessage:Ot?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class ms{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const k=S.storage.getLastFetchStatus(),G=S.storage.getLastSuccessfulFetchTimestampMillis(),te=S.storage.getActiveConfig(),se=yield k;se&&(S.lastFetchStatus=se);const Ie=yield G;Ie&&(S.lastSuccessfulFetchTimestampMillis=Ie);const ft=yield te;ft&&(S.activeConfig=ft)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function hl(){return fl.apply(this,arguments)}function fl(){return(fl=(0,L.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function Ta(){(0,ae._registerComponent)(new pe.wA("remote-config",function C(S,{instanceIdentifier:k}){const G=S.getProvider("app").getImmediate(),te=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw H.create("registration-window");if(!(0,le.hl)())throw H.create("indexed-db-unavailable");const{projectId:se,apiKey:Ie,appId:ft}=G.options;if(!se)throw H.create("registration-project-id");if(!Ie)throw H.create("registration-api-key");if(!ft)throw H.create("registration-app-id");const lt=new gp(ft,G.name,k=k||"firebase"),Ot=new ms(lt),tn=new Me.Yd(Ls);tn.logLevel=Me.in.ERROR;const qt=new ea(te,ae.SDK_VERSION,k,se,Ie,ft),wr=new Ia(qt,lt),dr=new Jl(wr,lt,Ot,tn),Cs=new jc(G,dr,Ot,lt,tn);return function on(C){const S=(0,le.m9)(C);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Cs),Cs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Ls,"0.4.4"),(0,ae.registerVersion)(Ls,"0.4.4","esm2017")}();const Lr=(C,S)=>S.some(k=>C instanceof k);let ec,Ur;const ns=new WeakMap,ta=new WeakMap,si=new WeakMap,ml=new WeakMap,sf=new WeakMap;let fu={get(C,S,k){if(C instanceof IDBTransaction){if("done"===S)return ta.get(C);if("objectStoreNames"===S)return C.objectStoreNames||si.get(C);if("store"===S)return k.objectStoreNames[1]?void 0:k.objectStore(k.objectStoreNames[0])}return ps(C[S])},set:(C,S,k)=>(C[S]=k,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function af(C){return"function"==typeof C?function Z_(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function du(){return Ur||(Ur=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply(mu(this),S),ps(ns.get(this))}:function(...S){return ps(C.apply(mu(this),S))}:function(S,...k){const G=C.call(mu(this),S,...k);return si.set(G,S.sort?S.sort():[S]),ps(G)}}(C):(C instanceof IDBTransaction&&function hu(C){if(ta.has(C))return;const S=new Promise((k,G)=>{const te=()=>{C.removeEventListener("complete",se),C.removeEventListener("error",Ie),C.removeEventListener("abort",Ie)},se=()=>{k(),te()},Ie=()=>{G(C.error||new DOMException("AbortError","AbortError")),te()};C.addEventListener("complete",se),C.addEventListener("error",Ie),C.addEventListener("abort",Ie)});ta.set(C,S)}(C),Lr(C,function Br(){return ec||(ec=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,fu):C)}function ps(C){if(C instanceof IDBRequest)return function uu(C){const S=new Promise((k,G)=>{const te=()=>{C.removeEventListener("success",se),C.removeEventListener("error",Ie)},se=()=>{k(ps(C.result)),te()},Ie=()=>{G(C.error),te()};C.addEventListener("success",se),C.addEventListener("error",Ie)});return S.then(k=>{k instanceof IDBCursor&&ns.set(k,C)}).catch(()=>{}),sf.set(S,C),S}(C);if(ml.has(C))return ml.get(C);const S=af(C);return S!==C&&(ml.set(C,S),sf.set(S,C)),S}const mu=C=>sf.get(C);function pu(C,S,{blocked:k,upgrade:G,blocking:te,terminated:se}={}){const Ie=indexedDB.open(C,S),ft=ps(Ie);return G&&Ie.addEventListener("upgradeneeded",lt=>{G(ps(Ie.result),lt.oldVersion,lt.newVersion,ps(Ie.transaction))}),k&&Ie.addEventListener("blocked",()=>k()),ft.then(lt=>{se&&lt.addEventListener("close",()=>se()),te&&lt.addEventListener("versionchange",()=>te())}).catch(()=>{}),ft}function Gc(C,{blocked:S}={}){const k=indexedDB.deleteDatabase(C);return S&&k.addEventListener("blocked",()=>S()),ps(k).then(()=>{})}const yp=["get","getKey","getAll","getAllKeys","count"],lf=["put","add","delete","clear"],cf=new Map;function df(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(cf.get(S))return cf.get(S);const k=S.replace(/FromIndex$/,""),G=S!==k,te=lf.includes(k);if(!(k in(G?IDBIndex:IDBObjectStore).prototype)||!te&&!yp.includes(k))return;const se=function(){var Ie=(0,L.Z)(function*(ft,...lt){const Ot=this.transaction(ft,te?"readwrite":"readonly");let tn=Ot.store;return G&&(tn=tn.index(lt.shift())),(yield Promise.all([tn[k](...lt),te&&Ot.done]))[0]});return function(lt){return Ie.apply(this,arguments)}}();return cf.set(S,se),se}!function _p(C){fu=C(fu)}(C=>({...C,get:(S,k,G)=>df(S,k)||C.get(S,k,G),has:(S,k)=>!!df(S,k)||C.has(S,k)}));const gu="/firebase-messaging-sw.js",uf="/firebase-cloud-messaging-push-scope",Wc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_u="https://fcmregistrations.googleapis.com/v1",vp="google.c.a.c_id",Fi="google.c.a.c_l",u0="google.c.a.ts";var ia=(()=>((ia=ia||{}).PUSH_RECEIVED="push-received",ia.NOTIFICATION_CLICKED="notification-clicked",ia))();function so(C){const S=new Uint8Array(C);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yu(C){const k=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),G=atob(k),te=new Uint8Array(G.length);for(let se=0;se<G.length;++se)te[se]=G.charCodeAt(se);return te}const tc="fcm_token_details_db",nc=5,bp="fcm_token_object_Store";function qc(){return qc=(0,L.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(tc))return null;let S=null;return(yield pu(tc,nc,{upgrade:(G=(0,L.Z)(function*(te,se,Ie,ft){var lt;if(se<2||!te.objectStoreNames.contains(bp))return;const Ot=ft.objectStore(bp),tn=yield Ot.index("fcmSenderId").get(C);if(yield Ot.clear(),tn)if(2===se){const qt=tn;if(!qt.auth||!qt.p256dh||!qt.endpoint)return;S={token:qt.fcmToken,createTime:null!==(lt=qt.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:qt.auth,p256dh:qt.p256dh,endpoint:qt.endpoint,swScope:qt.swScope,vapidKey:"string"==typeof qt.vapidKey?qt.vapidKey:so(qt.vapidKey)}}}else if(3===se){const qt=tn;S={token:qt.fcmToken,createTime:qt.createTime,subscriptionOptions:{auth:so(qt.auth),p256dh:so(qt.p256dh),endpoint:qt.endpoint,swScope:qt.swScope,vapidKey:so(qt.vapidKey)}}}else if(4===se){const qt=tn;S={token:qt.fcmToken,createTime:qt.createTime,subscriptionOptions:{auth:so(qt.auth),p256dh:so(qt.p256dh),endpoint:qt.endpoint,swScope:qt.swScope,vapidKey:so(qt.vapidKey)}}}}),function(se,Ie,ft,lt){return G.apply(this,arguments)})})).close(),yield Gc(tc),yield Gc("fcm_vapid_details_db"),yield Gc("undefined"),function Oo(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:S}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var G}),qc.apply(this,arguments)}const Yc="firebase-messaging-database",Li=1,_o="firebase-messaging-store";let vu=null;function Zc(){return vu||(vu=pu(Yc,Li,{upgrade:(C,S)=>{0===S&&C.createObjectStore(_o)}})),vu}function Aa(C){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,L.Z)(function*(C){const S=ff(C),G=yield(yield Zc()).transaction(_o).objectStore(_o).get(S);if(G)return G;{const te=yield function wp(C){return qc.apply(this,arguments)}(C.appConfig.senderId);if(te)return yield Kc(C,te),te}}),Ma.apply(this,arguments)}function Kc(C,S){return xp.apply(this,arguments)}function xp(){return(xp=(0,L.Z)(function*(C,S){const k=ff(C),te=(yield Zc()).transaction(_o,"readwrite");return yield te.objectStore(_o).put(S,k),yield te.done,S})).apply(this,arguments)}function ra(){return(ra=(0,L.Z)(function*(C){const S=ff(C),G=(yield Zc()).transaction(_o,"readwrite");yield G.objectStore(_o).delete(S),yield G.done})).apply(this,arguments)}function ff({appConfig:C}){return C.appId}const yr=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function h0(C,S){return wu.apply(this,arguments)}function wu(){return(wu=(0,L.Z)(function*(C,S){const k=yield pl(C),G=Eu(S),te={method:"POST",headers:k,body:JSON.stringify(G)};let se;try{se=yield(yield fetch(Qc(C.appConfig),te)).json()}catch(Ie){throw yr.create("token-subscribe-failed",{errorInfo:Ie?.toString()})}if(se.error)throw yr.create("token-subscribe-failed",{errorInfo:se.error.message});if(!se.token)throw yr.create("token-subscribe-no-token");return se.token})).apply(this,arguments)}function ic(){return(ic=(0,L.Z)(function*(C,S){const k=yield pl(C),G=Eu(S.subscriptionOptions),te={method:"PATCH",headers:k,body:JSON.stringify(G)};let se;try{se=yield(yield fetch(`${Qc(C.appConfig)}/${S.token}`,te)).json()}catch(Ie){throw yr.create("token-update-failed",{errorInfo:Ie?.toString()})}if(se.error)throw yr.create("token-update-failed",{errorInfo:se.error.message});if(!se.token)throw yr.create("token-update-no-token");return se.token})).apply(this,arguments)}function Ep(C,S){return rc.apply(this,arguments)}function rc(){return(rc=(0,L.Z)(function*(C,S){const G={method:"DELETE",headers:yield pl(C)};try{const se=yield(yield fetch(`${Qc(C.appConfig)}/${S}`,G)).json();if(se.error)throw yr.create("token-unsubscribe-failed",{errorInfo:se.error.message})}catch(te){throw yr.create("token-unsubscribe-failed",{errorInfo:te?.toString()})}})).apply(this,arguments)}function Qc({projectId:C}){return`${_u}/projects/${C}/registrations`}function pl(C){return xu.apply(this,arguments)}function xu(){return(xu=(0,L.Z)(function*({appConfig:C,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Eu({p256dh:C,auth:S,endpoint:k,vapidKey:G}){const te={web:{endpoint:k,auth:S,p256dh:C}};return G!==Wc&&(te.web.applicationPubKey=G),te}const Cp=6048e5;function mf(){return mf=(0,L.Z)(function*(C){const S=yield function Xc(C,S){return gl.apply(this,arguments)}(C.swRegistration,C.vapidKey),k={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:S.endpoint,auth:so(S.getKey("auth")),p256dh:so(S.getKey("p256dh"))},G=yield Aa(C.firebaseDependencies);if(G){if(function Vr(C,S){return S.vapidKey===C.vapidKey&&S.endpoint===C.endpoint&&S.auth===C.auth&&S.p256dh===C.p256dh}(G.subscriptionOptions,k))return Date.now()>=G.createTime+Cp?function is(C,S){return Tu.apply(this,arguments)}(C,{token:G.token,createTime:Date.now(),subscriptionOptions:k}):G.token;try{yield Ep(C.firebaseDependencies,G.token)}catch(te){console.warn(te)}return ka(C.firebaseDependencies,k)}return ka(C.firebaseDependencies,k)}),mf.apply(this,arguments)}function Iu(){return Iu=(0,L.Z)(function*(C){const S=yield Aa(C.firebaseDependencies);S&&(yield Ep(C.firebaseDependencies,S.token),yield function hf(C){return ra.apply(this,arguments)}(C.firebaseDependencies));const k=yield C.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()}),Iu.apply(this,arguments)}function Tu(){return Tu=(0,L.Z)(function*(C,S){try{const k=yield function Q_(C,S){return ic.apply(this,arguments)}(C.firebaseDependencies,S),G=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield Kc(C.firebaseDependencies,G),k}catch(k){throw yield function Du(C){return Iu.apply(this,arguments)}(C),k}}),Tu.apply(this,arguments)}function ka(C,S){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,L.Z)(function*(C,S){const G={token:yield h0(C,S),createTime:Date.now(),subscriptionOptions:S};return yield Kc(C,G),G.token})).apply(this,arguments)}function gl(){return(gl=(0,L.Z)(function*(C,S){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yu(S)})})).apply(this,arguments)}function _l(C){const S={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function pf(C,S){if(!S.notification)return;C.notification={};const k=S.notification.title;k&&(C.notification.title=k);const G=S.notification.body;G&&(C.notification.body=G);const te=S.notification.image;te&&(C.notification.image=te);const se=S.notification.icon;se&&(C.notification.icon=se)}(S,C),function oa(C,S){S.data&&(C.data=S.data)}(S,C),function No(C,S){var k,G,te,se,Ie;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;C.fcmOptions={};const ft=null!==(te=null===(G=S.fcmOptions)||void 0===G?void 0:G.link)&&void 0!==te?te:null===(se=S.notification)||void 0===se?void 0:se.click_action;ft&&(C.fcmOptions.link=ft);const lt=null===(Ie=S.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;lt&&(C.fcmOptions.analyticsLabel=lt)}(S,C),S}function gf(C,S){const k=[];for(let G=0;G<C.length;G++)k.push(C.charAt(G)),G<S.length&&k.push(S.charAt(G));return k.join("")}function gs(C){return yr.create("missing-app-config-values",{valueName:C})}gf("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gf("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Au{constructor(S,k,G){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const te=function Su(C){if(!C||!C.options)throw gs("App Configuration Object");if(!C.name)throw gs("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=C;for(const G of S)if(!k[G])throw gs(G);return{appName:C.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:te,installations:k,analyticsProvider:G}}_delete(){return Promise.resolve()}}function Jc(){return(Jc=(0,L.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(gu,{scope:uf}),C.swRegistration.update().catch(()=>{})}catch(S){throw yr.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function Fo(){return(Fo=(0,L.Z)(function*(C,S){if(!S&&!C.swRegistration&&(yield function Mu(C){return Jc.apply(this,arguments)}(C)),S||!C.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw yr.create("invalid-sw-registration");C.swRegistration=S}})).apply(this,arguments)}function Yt(){return(Yt=(0,L.Z)(function*(C,S){S?C.vapidKey=S:C.vapidKey||(C.vapidKey=Wc)})).apply(this,arguments)}function _f(){return _f=(0,L.Z)(function*(C,S){if(!navigator)throw yr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yr.create("permission-blocked");return yield function ed(C,S){return Yt.apply(this,arguments)}(C,S?.vapidKey),yield function yl(C,S){return Fo.apply(this,arguments)}(C,S?.serviceWorkerRegistration),function Cu(C){return mf.apply(this,arguments)}(C)}),_f.apply(this,arguments)}function Ru(){return(Ru=(0,L.Z)(function*(C,S,k){const G=function Ip(C){switch(C){case ia.NOTIFICATION_CLICKED:return"notification_open";case ia.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(G,{message_id:k[vp],message_name:k[Fi],message_time:k[u0],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Lo(){return Lo=(0,L.Z)(function*(C,S){const k=S.data;if(!k.isFirebaseMessaging)return;C.onMessageHandler&&k.messageType===ia.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(_l(k)):C.onMessageHandler.next(_l(k)));const G=k.data;(function Dp(C){return"object"==typeof C&&!!C&&vp in C})(G)&&"1"===G["google.c.a.e"]&&(yield function X_(C,S,k){return Ru.apply(this,arguments)}(C,k.messageType,G))}),Lo.apply(this,arguments)}const td="@firebase/messaging",Tp=C=>{const S=new Au(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function oc(C,S){return Lo.apply(this,arguments)}(S,k)),S},yf=C=>{const S=C.getProvider("messaging").getImmediate();return{getToken:G=>function ku(C,S){return _f.apply(this,arguments)}(S,G)}};function Ve(){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,L.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Sp(){(0,ae._registerComponent)(new pe.wA("messaging",Tp,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("messaging-internal",yf,"PRIVATE")),(0,ae.registerVersion)(td,"0.12.4"),(0,ae.registerVersion)(td,"0.12.4","esm2017")}();const Ou="analytics",vf="firebase_id",bf="origin",Mr=6e4,_s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",rd="https://www.googletagmanager.com/gtag/js",yi=new Me.Yd("@firebase/analytics"),cr=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function od(C){if(!C.startsWith(rd)){const S=cr.create("invalid-gtag-resource",{gtagURL:C});return yi.warn(S.message),""}return C}function ac(C){return Promise.all(C.map(S=>S.catch(k=>k)))}function sa(){return(sa=(0,L.Z)(function*(C,S,k,G,te,se){const Ie=G[te];try{if(Ie)yield S[Ie];else{const lt=(yield ac(k)).find(Ot=>Ot.measurementId===te);lt&&(yield S[lt.appId])}}catch(ft){yi.error(ft)}C("config",te,se)})).apply(this,arguments)}function vl(){return(vl=(0,L.Z)(function*(C,S,k,G,te){try{let se=[];if(te&&te.send_to){let Ie=te.send_to;Array.isArray(Ie)||(Ie=[Ie]);const ft=yield ac(k);for(const lt of Ie){const Ot=ft.find(qt=>qt.measurementId===lt),tn=Ot&&S[Ot.appId];if(!tn){se=[];break}se.push(tn)}}0===se.length&&(se=Object.values(S)),yield Promise.all(se),C("event",G,te||{})}catch(se){yi.error(se)}})).apply(this,arguments)}const J_=30,Cf=new class Ef{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function kp(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function vs(){return(vs=(0,L.Z)(function*(C){var S;const{appId:k,apiKey:G}=C,te={method:"GET",headers:kp(G)},se=_s.replace("{app-id}",k),Ie=yield fetch(se,te);if(200!==Ie.status&&304!==Ie.status){let ft="";try{const lt=yield Ie.json();null!==(S=lt.error)&&void 0!==S&&S.message&&(ft=lt.error.message)}catch{}throw cr.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:ft})}return Ie.json()})).apply(this,arguments)}function dd(){return(dd=(0,L.Z)(function*(C,S=Cf,k){const{appId:G,apiKey:te,measurementId:se}=C.options;if(!G)throw cr.create("no-app-id");if(!te){if(se)return{measurementId:se,appId:G};throw cr.create("no-api-key")}const Ie=S.getThrottleMetadata(G)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ft=new Uu;return setTimeout((0,L.Z)(function*(){ft.abort()}),void 0!==k?k:Mr),Df({appId:G,apiKey:te,measurementId:se},Ie,ft,S)})).apply(this,arguments)}function Df(C,S,k){return bl.apply(this,arguments)}function bl(){return bl=(0,L.Z)(function*(C,{throttleEndTimeMillis:S,backoffCount:k},G,te=Cf){var se;const{appId:Ie,measurementId:ft}=C;try{yield function Fu(C,S){return new Promise((k,G)=>{const te=Math.max(S-Date.now(),0),se=setTimeout(k,te);C.addEventListener(()=>{clearTimeout(se),G(cr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(G,S)}catch(lt){if(ft)return yi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:Ie,measurementId:ft};throw lt}try{const lt=yield function vr(C){return vs.apply(this,arguments)}(C);return te.deleteThrottleMetadata(Ie),lt}catch(lt){const Ot=lt;if(!function Lu(C){if(!(C instanceof le.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Ot)){if(te.deleteThrottleMetadata(Ie),ft)return yi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${Ot?.message}]`),{appId:Ie,measurementId:ft};throw lt}const tn=503===Number(null===(se=Ot?.customData)||void 0===se?void 0:se.httpStatus)?(0,le.$s)(k,te.intervalMillis,J_):(0,le.$s)(k,te.intervalMillis),qt={throttleEndTimeMillis:Date.now()+tn,backoffCount:k+1};return te.setThrottleMetadata(Ie,qt),yi.debug(`Calling attemptFetch again in ${tn} millis`),Df(C,qt,G,te)}}),bl.apply(this,arguments)}class Uu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let cc,fd;function If(){return(If=(0,L.Z)(function*(C,S,k,G,te){if(te&&te.global)C("event",k,G);else{const se=yield S;C("event",k,Object.assign(Object.assign({},G),{send_to:se}))}})).apply(this,arguments)}function uc(){return(uc=(0,L.Z)(function*(){if(!(0,le.hl)())return yi.warn(cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(C){return yi.warn(cr.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function ca(){return ca=(0,L.Z)(function*(C,S,k,G,te,se,Ie){var ft;const lt=function ei(C){return dd.apply(this,arguments)}(C);lt.then(dr=>{k[dr.measurementId]=dr.appId,C.options.measurementId&&dr.measurementId!==C.options.measurementId&&yi.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${dr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(dr=>yi.error(dr)),S.push(lt);const Ot=function Rp(){return uc.apply(this,arguments)}().then(dr=>{if(dr)return G.getId()}),[tn,qt]=yield Promise.all([lt,Ot]);(function Nu(C){const S=window.document.getElementsByTagName("script");for(const k of Object.values(S))if(k.src&&k.src.includes(rd)&&k.src.includes(C))return k;return null})(se)||function wf(C,S){const k=function sd(C,S){let k;return window.trustedTypes&&(k=window.trustedTypes.createPolicy(C,S)),k}("firebase-js-sdk-policy",{createScriptURL:od}),G=document.createElement("script"),te=`${rd}?l=${C}&id=${S}`;G.src=k?k?.createScriptURL(te):te,G.async=!0,document.head.appendChild(G)}(se,tn.measurementId),fd&&(te("consent","default",fd),function Bs(C){fd=C}(void 0)),te("js",new Date);const wr=null!==(ft=Ie?.config)&&void 0!==ft?ft:{};return wr[bf]="firebase",wr.update=!0,null!=qt&&(wr[vf]=qt),te("config",tn.measurementId,wr),cc&&(te("set",cc),function Hu(C){cc=C}(void 0)),tn.measurementId}),ca.apply(this,arguments)}class zu{constructor(S){this.app=S}_delete(){return delete Uo[this.app.options.appId],Promise.resolve()}}let Uo={},Pp=[];const hc={};let ty,Vn,Pa="dataLayer",dn=!1;function Hn(C,S,k){!function Nn(){const C=[];if((0,le.ru)()&&C.push("This is a browser extension environment."),(0,le.zI)()||C.push("Cookies are not available."),C.length>0){const S=C.map((G,te)=>`(${te+1}) ${G}`).join(" "),k=cr.create("invalid-analytics-context",{errorInfo:S});yi.warn(k.message)}}();const G=C.options.appId;if(!G)throw cr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw cr.create("no-api-key");yi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Uo[G])throw cr.create("already-exists",{id:G});if(!dn){!function lc(C){let S=[];Array.isArray(window[C])?S=window[C]:window[C]=S}(Pa);const{wrappedGtag:se,gtagCore:Ie}=function cd(C,S,k,G,te){let se=function(...Ie){window[G].push(arguments)};return window[te]&&"function"==typeof window[te]&&(se=window[te]),window[te]=function ld(C,S,k,G){function se(){return se=(0,L.Z)(function*(Ie,...ft){try{if("event"===Ie){const[lt,Ot]=ft;yield function aa(C,S,k,G,te){return vl.apply(this,arguments)}(C,S,k,lt,Ot)}else if("config"===Ie){const[lt,Ot]=ft;yield function ad(C,S,k,G,te,se){return sa.apply(this,arguments)}(C,S,k,G,lt,Ot)}else if("consent"===Ie){const[lt]=ft;C("consent","update",lt)}else if("get"===Ie){const[lt,Ot,tn]=ft;C("get",lt,Ot,tn)}else if("set"===Ie){const[lt]=ft;C("set",lt)}else C(Ie,...ft)}catch(lt){yi.error(lt)}}),se.apply(this,arguments)}return function te(Ie){return se.apply(this,arguments)}}(se,C,S,k),{gtagCore:se,wrappedGtag:window[te]}}(Uo,Pp,hc,Pa,"gtag");Vn=se,ty=Ie,dn=!0}return Uo[G]=function ey(C,S,k,G,te,se,Ie){return ca.apply(this,arguments)}(C,Pp,hc,S,ty,Pa,k),new zu(C)}function ji(){return gt.apply(this,arguments)}function gt(){return(gt=(0,L.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const os="@firebase/analytics";!function Oa(){(0,ae._registerComponent)(new pe.wA(Ou,(S,{options:k})=>Hn(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ae._registerComponent)(new pe.wA("analytics-internal",function C(S){try{const k=S.getProvider(Ou).getImmediate();return{logEvent:(G,te,se)=>function di(C,S,k,G){C=(0,le.m9)(C),function Ra(C,S,k,G,te){return If.apply(this,arguments)}(Vn,Uo[C.app.options.appId],S,k,G).catch(te=>yi.error(te))}(k,G,te,se)}}catch(k){throw cr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ae.registerVersion)(os,"0.10.0"),(0,ae.registerVersion)(os,"0.10.0","esm2017")}();var Na=z(1954),ha=z(2631);const Bo=new class ws extends ha.v{}(class Op extends Na.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(S,k,G):(S.flush(this),0)}});var pc=z(6321),De=z(5592),vi=z(9397),tr=z(3093),j=z(5137);const Yr=new d.GfV("7.6.1"),xs="__angularfire_symbol__analyticsIsSupportedValue",gd="__angularfire_symbol__analyticsIsSupported",_d="__angularfire_symbol__remoteConfigIsSupportedValue",bi="__angularfire_symbol__remoteConfigIsSupported",Af="__angularfire_symbol__messagingIsSupportedValue",wl="__angularfire_symbol__messagingIsSupported";function $u(C,S,k){if(S){if(1===S.length)return S[0];const se=S.filter(Ie=>Ie.app===k);if(1===se.length)return se[0]}return k.container.getProvider(C).getImmediate({optional:!0})}globalThis[gd]||(globalThis[gd]=ji().then(C=>globalThis[xs]=C).catch(()=>globalThis[xs]=!1)),globalThis[wl]||(globalThis[wl]=Ve().then(C=>globalThis[Af]=C).catch(()=>globalThis[Af]=!1)),globalThis[bi]||(globalThis[bi]=hl().then(C=>globalThis[_d]=C).catch(()=>globalThis[_d]=!1));const iy=(C,S)=>{const k=S?[S]:(0,q.C6)(),G=[];return k.forEach(te=>{te.container.getProvider(C).instances.forEach(Ie=>{G.includes(Ie)||G.push(Ie)})}),G};function wi(){}class Gu{constructor(S,k=Bo){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,G){const te=this.zone;return this.delegate.schedule(function(Ie){te.runGuarded(()=>{S.apply(this,[Ie])})},k,G)}}class gc{constructor(S){this.zone=S,this.task=null}call(S,k){const G=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wi,{},wi,wi)),k.pipe((0,vi.b)({next:G,complete:G,error:G})).subscribe(S).add(G)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let nr=(()=>{class C{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Gu(Zone.current)),this.insideAngular=k.run(()=>new Gu(Zone.current,pc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(k){return new(k||C)(d.LFG(d.R0b))},C.\u0275prov=d.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function $i(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Es(C){return $i().ngZone.run(()=>C())}function La(C){return C.pipe((0,tr.Q)($i().outsideAngular))}function vd(C){return $i(),function ry(C){return function(k){return(k=k.lift(new gc(C.ngZone))).pipe((0,j.R)(C.outsideAngular),(0,tr.Q)(C.insideAngular))}}($i())(C)}const Np=(C,S)=>function(){const G=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),Es(()=>C.apply(void 0,G))},Wu=(C,S)=>function(){let k;const G=arguments;for(let se=0;se<arguments.length;se++)"function"==typeof G[se]&&(S&&(k||(k=Es(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wi,{},wi,wi)))),G[se]=Np(G[se],k));const te=function Fa(C){return $i().ngZone.runOutsideAngular(()=>C())}(()=>C.apply(this,G));if(!S){if(te instanceof De.y){const se=$i();return te.pipe((0,j.R)(se.outsideAngular),(0,tr.Q)(se.insideAngular))}return Es(()=>te)}return te instanceof De.y?te.pipe(vd):te instanceof Promise?Es(()=>new Promise((se,Ie)=>te.then(ft=>Es(()=>se(ft)),ft=>Es(()=>Ie(ft))))):"function"==typeof te&&k?function(){return setTimeout(()=>{k&&"scheduled"===k.state&&k.invoke()},10),te.apply(this,arguments)}:Es(()=>te)}},6878:(Tt,Pe,z)=>{"use strict";z.d(Pe,{$:()=>gu,A:()=>J,D:()=>Oe,I:()=>ll,J:()=>po,L:()=>jt,N:()=>Tr,P:()=>ey,Q:()=>gp,R:()=>Bu,U:()=>Sa,V:()=>hl,W:()=>fl,X:()=>go,Y:()=>Br,Z:()=>du,_:()=>sf,a:()=>lr,a0:()=>Wc,a1:()=>vp,a2:()=>K_,a3:()=>bp,a4:()=>qc,a5:()=>Yc,a6:()=>_o,a7:()=>Zc,a8:()=>Ma,a9:()=>xp,aA:()=>oe,aB:()=>gd,aC:()=>Di,aD:()=>_n,aE:()=>vi,aF:()=>br,aG:()=>md,aH:()=>pi,aL:()=>qr,aO:()=>ec,aa:()=>hf,ab:()=>ff,ac:()=>bu,ad:()=>Q_,ae:()=>Ep,af:()=>Qc,ai:()=>Cp,aj:()=>mf,ak:()=>Du,an:()=>Z_,ao:()=>pf,aq:()=>Yt,ar:()=>td,as:()=>Xe,at:()=>Pt,au:()=>Te,av:()=>ce,aw:()=>qt,ax:()=>wl,ay:()=>Mt,az:()=>Re,b:()=>Pu,c:()=>Vn,d:()=>Hn,e:()=>It,f:()=>os,g:()=>ws,h:()=>Na,i:()=>xf,j:()=>pc,k:()=>Vs,l:()=>yo,m:()=>bd,p:()=>Ue,r:()=>Tf,s:()=>bs,u:()=>Rp});var d=z(5861),q=z(9058),L=z(534),ae=z(7582),le=z(7879),pe=z(4537);const Ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},J={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ot=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ne=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new le.Yd("@firebase/auth");function Ct(x,...y){Ye.logLevel<=le.in.ERROR&&Ye.error(`Auth (${L.SDK_VERSION}): ${x}`,...y)}function ce(x,...y){throw $e(x,...y)}function Re(x,...y){return $e(x,...y)}function fe(x,y,v){const D=Object.assign(Object.assign({},ot()),{[y]:v});return new q.LL("auth","Firebase",D).create(y,{appName:x.name})}function Ee(x,y,v){if(!(y instanceof v))throw v.name!==y.constructor.name&&ce(x,"argument-error"),fe(x,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(x,...y){if("string"!=typeof x){const v=y[0],D=[...y.slice(1)];return D[0]&&(D[0].appName=x.name),x._errorFactory.create(v,...D)}return Ne.create(x,...y)}function oe(x,y,...v){if(!x)throw $e(y,...v)}function ht(x){const y="INTERNAL ASSERTION FAILED: "+x;throw Ct(y),new Error(y)}function Xe(x,y){x||ht(y)}function mn(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.href)||""}function Oi(){return"http:"===qi()||"https:"===qi()}function qi(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.protocol)||null}class Se{constructor(y,v){this.shortDelay=y,this.longDelay=v,Xe(v>y,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function Ko(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Oi()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Le(x,y){Xe(x.emulator,"Emulator should always be set here");const{url:v}=x.emulator;return y?`${v}${y.startsWith("/")?y.slice(1):y}`:v}class qe{static initialize(y,v,D){this.fetchImpl=y,v&&(this.headersImpl=v),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Je=new Se(3e4,6e4);function dt(x,y){return x.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:x.tenantId}):y}function bt(x,y,v,D){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(x,y,v,D,R={}){return pt(x,R,(0,d.Z)(function*(){let U={},ie={};D&&("GET"===y?ie=D:U={body:JSON.stringify(D)});const we=(0,q.xO)(Object.assign({key:x.config.apiKey},ie)).slice(1),nt=yield x._getAdditionalHeaders();return nt["Content-Type"]="application/json",x.languageCode&&(nt["X-Firebase-Locale"]=x.languageCode),qe.fetch()(ln(x,x.config.apiHost,v,we),Object.assign({method:y,headers:nt,referrerPolicy:"no-referrer"},U))}))})).apply(this,arguments)}function pt(x,y,v){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(x,y,v){x._canInitEmulator=!1;const D=Object.assign(Object.assign({},tt),y);try{const R=new Wt(x),U=yield Promise.race([v(),R.promise]);R.clearNetworkTimeout();const ie=yield U.json();if("needConfirmation"in ie)throw hi(x,"account-exists-with-different-credential",ie);if(U.ok&&!("errorMessage"in ie))return ie;{const we=U.ok?ie.errorMessage:ie.error.message,[nt,_t]=we.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw hi(x,"credential-already-in-use",ie);if("EMAIL_EXISTS"===nt)throw hi(x,"email-already-in-use",ie);if("USER_DISABLED"===nt)throw hi(x,"user-disabled",ie);const Ut=D[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(_t)throw fe(x,Ut,_t);ce(x,Ut)}}catch(R){if(R instanceof q.ZR)throw R;ce(x,"network-request-failed",{message:String(R)})}})).apply(this,arguments)}function Gt(x,y,v,D){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(x,y,v,D,R={}){const U=yield bt(x,y,v,D,R);return"mfaPendingCredential"in U&&ce(x,"multi-factor-auth-required",{_serverResponse:U}),U})).apply(this,arguments)}function ln(x,y,v,D){const R=`${y}${v}?${D}`;return x.config.emulator?Le(x.config,R):`${x.config.apiScheme}://${R}`}class Wt{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((v,D)=>{this.timer=setTimeout(()=>D(Re(this.auth,"network-request-failed")),Je.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hi(x,y,v){const D={appName:x.name};v.email&&(D.email=v.email),v.phoneNumber&&(D.phoneNumber=v.phoneNumber);const R=Re(x,y,D);return R.customData._tokenResponse=v,R}function Zn(){return(Zn=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Zi(x){if(x)try{const y=new Date(Number(x));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function Ei(){return(Ei=(0,d.Z)(function*(x,y=!1){const v=(0,q.m9)(x),D=yield v.getIdToken(y),R=At(D);oe(R&&R.exp&&R.auth_time&&R.iat,v.auth,"internal-error");const U="object"==typeof R.firebase?R.firebase:void 0,ie=U?.sign_in_provider;return{claims:R,token:D,authTime:Zi(ut(R.auth_time)),issuedAtTime:Zi(ut(R.iat)),expirationTime:Zi(ut(R.exp)),signInProvider:ie||null,signInSecondFactor:U?.sign_in_second_factor||null}})).apply(this,arguments)}function ut(x){return 1e3*Number(x)}function At(x){const[y,v,D]=x.split(".");if(void 0===y||void 0===v||void 0===D)return Ct("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,q.tV)(v);return R?JSON.parse(R):(Ct("Failed to decode base64 JWT payload"),null)}catch(R){return Ct("Caught error parsing JWT payload as JSON",R?.toString()),null}}function gn(x,y){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,d.Z)(function*(x,y,v=!1){if(v)return y;try{return yield y}catch(D){throw D instanceof q.ZR&&function Ir({code:x}){return"auth/user-disabled"===x||"auth/user-token-expired"===x}(D)&&x.auth.currentUser===x&&(yield x.auth.signOut()),D}})).apply(this,arguments)}class hn{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var v;if(y){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const R=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(y=!1){var v=this;if(!this.isRunning)return;const D=this.getInterval(y);this.timerId=setTimeout((0,d.Z)(function*(){yield v.iteration()}),D)}iteration(){var y=this;return(0,d.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&y.schedule(!0))}y.schedule()})()}}class fi{constructor(y,v){this.createdAt=y,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zi(this.lastLoginAt),this.creationTime=Zi(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function no(x){return Sn.apply(this,arguments)}function Sn(){return Sn=(0,d.Z)(function*(x){var y;const v=x.auth,D=yield x.getIdToken(),R=yield gn(x,function gr(x,y){return Yi.apply(this,arguments)}(v,{idToken:D}));oe(R?.users.length,v,"internal-error");const U=R.users[0];x._notifyReloadListener(U);const ie=null!==(y=U.providerUserInfo)&&void 0!==y&&y.length?function io(x){return x.map(y=>{var{providerId:v}=y,D=(0,ae._T)(y,["providerId"]);return{providerId:v,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}(U.providerUserInfo):[],we=function ri(x,y){return[...x.filter(D=>!y.some(R=>R.providerId===D.providerId)),...y]}(x.providerData,ie),Ut=!!x.isAnonymous&&!(x.email&&U.passwordHash||we?.length),Mn={uid:U.localId,displayName:U.displayName||null,photoURL:U.photoUrl||null,email:U.email||null,emailVerified:U.emailVerified||!1,phoneNumber:U.phoneNumber||null,tenantId:U.tenantId||null,providerData:we,metadata:new fi(U.createdAt,U.lastLoginAt),isAnonymous:Ut};Object.assign(x,Mn)}),Sn.apply(this,arguments)}function Kt(){return(Kt=(0,d.Z)(function*(x){const y=(0,q.m9)(x);yield no(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function sr(){return(sr=(0,d.Z)(function*(x,y){const v=yield pt(x,{},(0,d.Z)(function*(){const D=(0,q.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:R,apiKey:U}=x.config,ie=ln(x,R,"/v1/token",`key=${U}`),we=yield x._getAdditionalHeaders();return we["Content-Type"]="application/x-www-form-urlencoded",qe.fetch()(ie,{method:"POST",headers:we,body:D})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){oe(y.idToken,"internal-error"),oe(typeof y.idToken<"u","internal-error"),oe(typeof y.refreshToken<"u","internal-error");const v="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function Lt(x){const y=At(x);return oe(y,"internal-error"),oe(typeof y.exp<"u","internal-error"),oe(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,v)}getToken(y,v=!1){var D=this;return(0,d.Z)(function*(){return oe(!D.accessToken||D.refreshToken,y,"user-token-expired"),v||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(y,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,v){var D=this;return(0,d.Z)(function*(){const{accessToken:R,refreshToken:U,expiresIn:ie}=yield function ko(x,y){return sr.apply(this,arguments)}(y,v);D.updateTokensAndExpiration(R,U,Number(ie))})()}updateTokensAndExpiration(y,v,D){this.refreshToken=v||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(y,v){const{refreshToken:D,accessToken:R,expirationTime:U}=v,ie=new Kn;return D&&(oe("string"==typeof D,"internal-error",{appName:y}),ie.refreshToken=D),R&&(oe("string"==typeof R,"internal-error",{appName:y}),ie.accessToken=R),U&&(oe("number"==typeof U,"internal-error",{appName:y}),ie.expirationTime=U),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new Kn,this.toJSON())}_performRefresh(){return ht("not implemented")}}function Wn(x,y){oe("string"==typeof x||typeof x>"u","internal-error",{appName:y})}class Ci{constructor(y){var{uid:v,auth:D,stsTokenManager:R}=y,U=(0,ae._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=D,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=U.displayName||null,this.email=U.email||null,this.emailVerified=U.emailVerified||!1,this.phoneNumber=U.phoneNumber||null,this.photoURL=U.photoURL||null,this.isAnonymous=U.isAnonymous||!1,this.tenantId=U.tenantId||null,this.providerData=U.providerData?[...U.providerData]:[],this.metadata=new fi(U.createdAt||void 0,U.lastLoginAt||void 0)}getIdToken(y){var v=this;return(0,d.Z)(function*(){const D=yield gn(v,v.stsTokenManager.getToken(v.auth,y));return oe(D,v.auth,"internal-error"),v.accessToken!==D&&(v.accessToken=D,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),D})()}getIdTokenResult(y){return function Ki(x){return Ei.apply(this,arguments)}(this,y)}reload(){return function Qi(x){return Kt.apply(this,arguments)}(this)}_assign(y){this!==y&&(oe(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(v=>Object.assign({},v)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){const v=new Ci(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(y){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,v=!1){var D=this;return(0,d.Z)(function*(){let R=!1;y.idToken&&y.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(y),R=!0),v&&(yield no(D)),yield D.auth._persistUserIfCurrent(D),R&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var y=this;return(0,d.Z)(function*(){const v=yield y.getIdToken();return yield gn(y,function ii(x,y){return Zn.apply(this,arguments)}(y.auth,{idToken:v})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,v){var D,R,U,ie,we,nt,_t,Ut;const Mn=null!==(D=v.displayName)&&void 0!==D?D:void 0,ao=null!==(R=v.email)&&void 0!==R?R:void 0,fa=null!==(U=v.phoneNumber)&&void 0!==U?U:void 0,Pf=null!==(ie=v.photoURL)&&void 0!==ie?ie:void 0,ay=null!==(we=v.tenantId)&&void 0!==we?we:void 0,Of=null!==(nt=v._redirectEventId)&&void 0!==nt?nt:void 0,_0=null!==(_t=v.createdAt)&&void 0!==_t?_t:void 0,ly=null!==(Ut=v.lastLoginAt)&&void 0!==Ut?Ut:void 0,{uid:Cd,emailVerified:Yu,isAnonymous:Nf,providerData:Zu,stsTokenManager:Ff}=v;oe(Cd&&Ff,y,"internal-error");const yc=Kn.fromJSON(this.name,Ff);oe("string"==typeof Cd,y,"internal-error"),Wn(Mn,y.name),Wn(ao,y.name),oe("boolean"==typeof Yu,y,"internal-error"),oe("boolean"==typeof Nf,y,"internal-error"),Wn(fa,y.name),Wn(Pf,y.name),Wn(ay,y.name),Wn(Of,y.name),Wn(_0,y.name),Wn(ly,y.name);const Up=new Ci({uid:Cd,auth:y,email:ao,emailVerified:Yu,displayName:Mn,isAnonymous:Nf,photoURL:Pf,phoneNumber:fa,tenantId:ay,stsTokenManager:yc,createdAt:_0,lastLoginAt:ly});return Zu&&Array.isArray(Zu)&&(Up.providerData=Zu.map(cy=>Object.assign({},cy))),Of&&(Up._redirectEventId=Of),Up}static _fromIdTokenResponse(y,v,D=!1){return(0,d.Z)(function*(){const R=new Kn;R.updateFromServerResponse(v);const U=new Ci({uid:v.localId,auth:y,stsTokenManager:R,isAnonymous:D});return yield no(U),U})()}}const Qn=new Map;function Di(x){Xe(x instanceof Function,"Expected a class definition");let y=Qn.get(x);return y?(Xe(y instanceof x,"Instance stored in cache mismatched with class"),y):(y=new x,Qn.set(x,y),y)}const Tr=(()=>{class x{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(v,D){var R=this;return(0,d.Z)(function*(){R.storage[v]=D})()}_get(v){var D=this;return(0,d.Z)(function*(){const R=D.storage[v];return void 0===R?null:R})()}_remove(v){var D=this;return(0,d.Z)(function*(){delete D.storage[v]})()}_addListener(v,D){}_removeListener(v,D){}}return x.type="NONE",x})();function _n(x,y,v){return`firebase:${x}:${y}:${v}`}class X{constructor(y,v,D){this.persistence=y,this.auth=v,this.userKey=D;const{config:R,name:U}=this.auth;this.fullUserKey=_n(this.userKey,R.apiKey,U),this.fullPersistenceKey=_n("persistence",R.apiKey,U),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,d.Z)(function*(){const v=yield y.persistence._get(y.fullUserKey);return v?Ci._fromJSON(y.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var v=this;return(0,d.Z)(function*(){if(v.persistence===y)return;const D=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=y,D?v.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,v,D="authUser"){return(0,d.Z)(function*(){if(!v.length)return new X(Di(Tr),y,D);const R=(yield Promise.all(v.map(function(){var _t=(0,d.Z)(function*(Ut){if(yield Ut._isAvailable())return Ut});return function(Ut){return _t.apply(this,arguments)}}()))).filter(_t=>_t);let U=R[0]||Di(Tr);const ie=_n(D,y.config.apiKey,y.name);let we=null;for(const _t of v)try{const Ut=yield _t._get(ie);if(Ut){const Mn=Ci._fromJSON(y,Ut);_t!==U&&(we=Mn),U=_t;break}}catch{}const nt=R.filter(_t=>_t._shouldAllowMigration);return U._shouldAllowMigration&&nt.length?(U=nt[0],we&&(yield U._set(ie,we.toJSON())),yield Promise.all(v.map(function(){var _t=(0,d.Z)(function*(Ut){if(Ut!==U)try{yield Ut._remove(ie)}catch{}});return function(Ut){return _t.apply(this,arguments)}}())),new X(U,y,D)):new X(U,y,D)})()}}function Z(x){const y=x.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(re(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(V(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(rt(y))return"Blackberry";if(Nt(y))return"Webos";if($(y))return"Safari";if((y.includes("chrome/")||F(y))&&!y.includes("edge/"))return"Chrome";if(Te(y))return"Android";{const D=x.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function V(x=(0,q.z$)()){return/firefox\//i.test(x)}function $(x=(0,q.z$)()){const y=x.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function F(x=(0,q.z$)()){return/crios\//i.test(x)}function re(x=(0,q.z$)()){return/iemobile/i.test(x)}function Te(x=(0,q.z$)()){return/android/i.test(x)}function rt(x=(0,q.z$)()){return/blackberry/i.test(x)}function Nt(x=(0,q.z$)()){return/webos/i.test(x)}function Pt(x=(0,q.z$)()){return/iphone|ipad|ipod/i.test(x)||/macintosh/i.test(x)&&/mobile/i.test(x)}function Mt(x=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(x)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(x)}function Jt(x=(0,q.z$)()){return Pt(x)||Te(x)||Nt(x)||rt(x)||/windows phone/i.test(x)||re(x)}function Xi(x,y=[]){let v;switch(x){case"Browser":v=Z((0,q.z$)());break;case"Worker":v=`${Z((0,q.z$)())}-${x}`;break;default:v=x}const D=y.length?y.join(","):"FirebaseCore-web";return`${v}/JsCore/${L.SDK_VERSION}/${D}`}function he(){return(he=(0,d.Z)(function*(x){return(yield bt(x,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function We(x,y){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(x,y){return bt(x,"GET","/v2/recaptchaConfig",dt(x,y))})).apply(this,arguments)}function Ht(x){return void 0!==x&&void 0!==x.getResponse}function en(x){return void 0!==x&&void 0!==x.enterprise}class yn{constructor(y){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===y.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=y.recaptchaKey.split("/")[3],this.emailPasswordEnabled=y.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function mi(x){return new Promise((y,v)=>{const D=document.createElement("script");D.setAttribute("src",x),D.onload=y,D.onerror=R=>{const U=Re("internal-error");U.customData=R,v(U)},D.type="text/javascript",D.charset="UTF-8",function Ji(){var x,y;return null!==(y=null===(x=document.getElementsByTagName("head"))||void 0===x?void 0:x[0])&&void 0!==y?y:document}().appendChild(D)})}function mo(x){return`__${x}${Math.floor(1e6*Math.random())}`}class oi{constructor(y){this.type="recaptcha-enterprise",this.auth=pi(y)}verify(y="verify",v=!1){var D=this;return(0,d.Z)(function*(){function U(){return U=(0,d.Z)(function*(we){if(!v){if(null==we.tenantId&&null!=we._agentRecaptchaConfig)return we._agentRecaptchaConfig.siteKey;if(null!=we.tenantId&&void 0!==we._tenantRecaptchaConfigs[we.tenantId])return we._tenantRecaptchaConfigs[we.tenantId].siteKey}return new Promise(function(){var nt=(0,d.Z)(function*(_t,Ut){We(we,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Mn=>{if(void 0!==Mn.recaptchaKey){const ao=new yn(Mn);return null==we.tenantId?we._agentRecaptchaConfig=ao:we._tenantRecaptchaConfigs[we.tenantId]=ao,_t(ao.siteKey)}Ut(new Error("recaptcha Enterprise site key undefined"))}).catch(Mn=>{Ut(Mn)})});return function(_t,Ut){return nt.apply(this,arguments)}}())}),U.apply(this,arguments)}function ie(we,nt,_t){const Ut=window.grecaptcha;en(Ut)?Ut.enterprise.ready(()=>{Ut.enterprise.execute(we,{action:y}).then(Mn=>{nt(Mn)}).catch(()=>{nt("NO_RECAPTCHA")})}):_t(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((we,nt)=>{(function R(we){return U.apply(this,arguments)})(D.auth).then(_t=>{if(!v&&en(window.grecaptcha))ie(_t,we,nt);else{if(typeof window>"u")return void nt(new Error("RecaptchaVerifier is only supported in browser"));mi("https://www.google.com/recaptcha/enterprise.js?render="+_t).then(()=>{ie(_t,we,nt)}).catch(Ut=>{nt(Ut)})}}).catch(_t=>{nt(_t)})})})()}}function ro(x,y,v){return _r.apply(this,arguments)}function _r(){return(_r=(0,d.Z)(function*(x,y,v,D=!1){const R=new oi(x);let U;try{U=yield R.verify(v)}catch{U=yield R.verify(v,!0)}const ie=Object.assign({},y);return Object.assign(ie,D?{captchaResp:U}:{captchaResponse:U}),Object.assign(ie,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ie,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ie})).apply(this,arguments)}class Xo{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,v){const D=U=>new Promise((ie,we)=>{try{ie(y(U))}catch(nt){we(nt)}});D.onAbort=v,this.queue.push(D);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(y){var v=this;return(0,d.Z)(function*(){if(v.auth.currentUser===y)return;const D=[];try{for(const R of v.queue)yield R(y),R.onAbort&&D.push(R.onAbort)}catch(R){D.reverse();for(const U of D)try{U()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:R?.message})}})()}}class Po{constructor(y,v,D,R){this.app=y,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=D,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ql(this),this.idTokenSubscription=new Ql(this),this.beforeStateQueue=new Xo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ne,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(y,v){var D=this;return v&&(this._popupRedirectResolver=Di(v)),this._initializationPromise=this.queue((0,d.Z)(function*(){var R,U;if(!D._deleted&&(D.persistenceManager=yield X.create(D,y),!D._deleted)){if(null!==(R=D._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(v),D.lastNotifiedUid=(null===(U=D.currentUser)||void 0===U?void 0:U.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,d.Z)(function*(){if(y._deleted)return;const v=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||v){if(y.currentUser&&v&&y.currentUser.uid===v.uid)return y._currentUser._assign(v),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(v,!0)}})()}initializeCurrentUser(y){var v=this;return(0,d.Z)(function*(){var D;const R=yield v.assertedPersistence.getCurrentUser();let U=R,ie=!1;if(y&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const we=null===(D=v.redirectUser)||void 0===D?void 0:D._redirectEventId,nt=U?._redirectEventId,_t=yield v.tryRedirectSignIn(y);(!we||we===nt)&&_t?.user&&(U=_t.user,ie=!0)}if(!U)return v.directlySetCurrentUser(null);if(!U._redirectEventId){if(ie)try{yield v.beforeStateQueue.runMiddleware(U)}catch(we){U=R,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(we))}return U?v.reloadAndSetCurrentUserOrClear(U):v.directlySetCurrentUser(null)}return oe(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===U._redirectEventId?v.directlySetCurrentUser(U):v.reloadAndSetCurrentUserOrClear(U)})()}tryRedirectSignIn(y){var v=this;return(0,d.Z)(function*(){let D=null;try{D=yield v._popupRedirectResolver._completeRedirectFn(v,y,!0)}catch{yield v._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(y){var v=this;return(0,d.Z)(function*(){try{yield no(y)}catch(D){if("auth/network-request-failed"!==D?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function ye(){if(typeof navigator>"u")return null;const x=navigator;return x.languages&&x.languages[0]||x.language||null}()}_delete(){var y=this;return(0,d.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var v=this;return(0,d.Z)(function*(){const D=y?(0,q.m9)(y):null;return D&&oe(D.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(D&&D._clone(v))})()}_updateCurrentUser(y,v=!1){var D=this;return(0,d.Z)(function*(){if(!D._deleted)return y&&oe(D.tenantId===y.tenantId,D,"tenant-id-mismatch"),v||(yield D.beforeStateQueue.runMiddleware(y)),D.queue((0,d.Z)(function*(){yield D.directlySetCurrentUser(y),D.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,d.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var v=this;return this.queue((0,d.Z)(function*(){yield v.assertedPersistence.setPersistence(Di(y))}))}initializeRecaptchaConfig(){var y=this;return(0,d.Z)(function*(){const v=yield We(y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),D=new yn(v);null==y.tenantId?y._agentRecaptchaConfig=D:y._tenantRecaptchaConfigs[y.tenantId]=D,D.emailPasswordEnabled&&new oi(y).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new q.LL("auth","Firebase",y())}onAuthStateChanged(y,v,D){return this.registerStateListener(this.authStateSubscription,y,v,D)}beforeAuthStateChanged(y,v){return this.beforeStateQueue.pushCallback(y,v)}onIdTokenChanged(y,v,D){return this.registerStateListener(this.idTokenSubscription,y,v,D)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,v){var D=this;return(0,d.Z)(function*(){const R=yield D.getOrInitRedirectPersistenceManager(v);return null===y?R.removeCurrentUser():R.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var v=this;return(0,d.Z)(function*(){if(!v.redirectPersistenceManager){const D=y&&Di(y)||v._popupRedirectResolver;oe(D,v,"argument-error"),v.redirectPersistenceManager=yield X.create(v,[Di(D._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(y){var v=this;return(0,d.Z)(function*(){var D,R;return v._isInitialized&&(yield v.queue((0,d.Z)(function*(){}))),(null===(D=v._currentUser)||void 0===D?void 0:D._redirectEventId)===y?v._currentUser:(null===(R=v.redirectUser)||void 0===R?void 0:R._redirectEventId)===y?v.redirectUser:null})()}_persistUserIfCurrent(y){var v=this;return(0,d.Z)(function*(){if(y===v.currentUser)return v.queue((0,d.Z)(function*(){return v.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(v=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,v,D,R){if(this._deleted)return()=>{};const U="function"==typeof v?v:v.next.bind(v),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(ie,this,"internal-error"),ie.then(()=>U(this.currentUser)),"function"==typeof v?y.addObserver(v,D,R):y.addObserver(v)}directlySetCurrentUser(y){var v=this;return(0,d.Z)(function*(){v.currentUser&&v.currentUser!==y&&v._currentUser._stopProactiveRefresh(),y&&v.isProactiveRefreshEnabled&&y._startProactiveRefresh(),v.currentUser=y,y?yield v.assertedPersistence.setCurrentUser(y):yield v.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Xi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,d.Z)(function*(){var v;const D={"X-Client-Version":y.clientVersion};y.app.options.appId&&(D["X-Firebase-gmpid"]=y.app.options.appId);const R=yield null===(v=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();R&&(D["X-Firebase-Client"]=R);const U=yield y._getAppCheckToken();return U&&(D["X-Firebase-AppCheck"]=U),D})()}_getAppCheckToken(){var y=this;return(0,d.Z)(function*(){var v;const D=yield null===(v=y.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return D?.error&&function Et(x,...y){Ye.logLevel<=le.in.WARN&&Ye.warn(`Auth (${L.SDK_VERSION}): ${x}`,...y)}(`Error while retrieving App Check token: ${D.error}`),D?.token})()}}function pi(x){return(0,q.m9)(x)}class Ql{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,q.ne)(v=>this.observer=v)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ll(x,y,v){const D=pi(x);oe(D._canInitEmulator,D,"emulator-config-failed"),oe(/^https?:\/\//.test(y),D,"invalid-emulator-scheme");const R=!!v?.disableWarnings,U=Xs(y),{host:ie,port:we}=function Jo(x){const y=Xs(x),v=/(\/\/)?([^?#/]+)/.exec(x.substr(y.length));if(!v)return{host:"",port:null};const D=v[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(D);if(R){const U=R[1];return{host:U,port:Js(D.substr(U.length+1))}}{const[U,ie]=D.split(":");return{host:U,port:Js(ie)}}}(y);D.config.emulator={url:`${U}//${ie}${null===we?"":`:${we}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:ie,port:we,protocol:U.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function cl(){function x(){const y=document.createElement("p"),v=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",x):x())}()}function Xs(x){const y=x.indexOf(":");return y<0?"":x.substr(0,y+1)}function Js(x){if(!x)return null;const y=Number(x);return isNaN(y)?null:y}class po{constructor(y,v){this.providerId=y,this.signInMethod=v}toJSON(){return ht("not implemented")}_getIdTokenResponse(y){return ht("not implemented")}_linkToIdToken(y,v){return ht("not implemented")}_getReauthenticationResolver(y){return ht("not implemented")}}function Ca(x,y){return dl.apply(this,arguments)}function dl(){return(dl=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:resetPassword",dt(x,y))})).apply(this,arguments)}function Ls(x,y){return fs.apply(this,arguments)}function fs(){return(fs=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:update",dt(x,y))})).apply(this,arguments)}function N(x,y){return H.apply(this,arguments)}function H(){return(H=(0,d.Z)(function*(x,y){return Gt(x,"POST","/v1/accounts:signInWithPassword",dt(x,y))})).apply(this,arguments)}function Q(x,y){return me.apply(this,arguments)}function me(){return(me=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:sendOobCode",dt(x,y))})).apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*(x,y){return Q(x,y)})).apply(this,arguments)}function cn(x,y){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(x,y){return Q(x,y)})).apply(this,arguments)}function er(x,y){return xn.apply(this,arguments)}function xn(){return(xn=(0,d.Z)(function*(x,y){return Q(x,y)})).apply(this,arguments)}function on(){return(on=(0,d.Z)(function*(x,y){return Q(x,y)})).apply(this,arguments)}function Gr(){return(Gr=(0,d.Z)(function*(x,y){return Gt(x,"POST","/v1/accounts:signInWithEmailLink",dt(x,y))})).apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(x,y){return Gt(x,"POST","/v1/accounts:signInWithEmailLink",dt(x,y))})).apply(this,arguments)}class Us extends po{constructor(y,v,D,R=null){super("password",D),this._email=y,this._password=v,this._tenantId=R}static _fromEmailAndPassword(y,v){return new Us(y,v,"password")}static _fromEmailAndCode(y,v,D=null){return new Us(y,v,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const v="string"==typeof y?JSON.parse(y):y;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(y){var v=this;return(0,d.Z)(function*(){var D;switch(v.signInMethod){case"password":const R={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=y._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const U=yield ro(y,R,"signInWithPassword");return N(y,U)}return N(y,R).catch(function(){var U=(0,d.Z)(function*(ie){if("auth/missing-recaptcha-token"===ie.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const we=yield ro(y,R,"signInWithPassword");return N(y,we)}return Promise.reject(ie)});return function(ie){return U.apply(this,arguments)}}());case"emailLink":return function Ii(x,y){return Gr.apply(this,arguments)}(y,{email:v._email,oobCode:v._password});default:ce(y,"internal-error")}})()}_linkToIdToken(y,v){var D=this;return(0,d.Z)(function*(){switch(D.signInMethod){case"password":return Ls(y,{idToken:v,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Vc(x,y){return Sr.apply(this,arguments)}(y,{idToken:v,email:D._email,oobCode:D._password});default:ce(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function Xn(x,y){return es.apply(this,arguments)}function es(){return(es=(0,d.Z)(function*(x,y){return Gt(x,"POST","/v1/accounts:signInWithIdp",dt(x,y))})).apply(this,arguments)}class jt extends po{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const v=new jt(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(v.idToken=y.idToken),y.accessToken&&(v.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(v.nonce=y.nonce),y.pendingToken&&(v.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(v.accessToken=y.oauthToken,v.secret=y.oauthTokenSecret):ce("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const v="string"==typeof y?JSON.parse(y):y,{providerId:D,signInMethod:R}=v,U=(0,ae._T)(v,["providerId","signInMethod"]);if(!D||!R)return null;const ie=new jt(D,R);return ie.idToken=U.idToken||void 0,ie.accessToken=U.accessToken||void 0,ie.secret=U.secret,ie.nonce=U.nonce,ie.pendingToken=U.pendingToken||null,ie}_getIdTokenResponse(y){return Xn(y,this.buildRequest())}_linkToIdToken(y,v){const D=this.buildRequest();return D.idToken=v,Xn(y,D)}_getReauthenticationResolver(y){const v=this.buildRequest();return v.autoCreate=!1,Xn(y,v)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),y.postBody=(0,q.xO)(v)}return y}}function Hc(){return(Hc=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:sendVerificationCode",dt(x,y))})).apply(this,arguments)}function _i(){return(_i=(0,d.Z)(function*(x,y){return Gt(x,"POST","/v1/accounts:signInWithPhoneNumber",dt(x,y))})).apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(x,y){const v=yield Gt(x,"POST","/v1/accounts:signInWithPhoneNumber",dt(x,y));if(v.temporaryProof)throw hi(x,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const oo={USER_NOT_FOUND:"user-not-found"};function jc(){return(jc=(0,d.Z)(function*(x,y){return Gt(x,"POST","/v1/accounts:signInWithPhoneNumber",dt(x,Object.assign(Object.assign({},y),{operation:"REAUTH"})),oo)})).apply(this,arguments)}class Ar extends po{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,v){return new Ar({verificationId:y,verificationCode:v})}static _fromTokenResponse(y,v){return new Ar({phoneNumber:y,temporaryProof:v})}_getIdTokenResponse(y){return function ea(x,y){return _i.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,v){return function zc(x,y){return Ia.apply(this,arguments)}(y,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function ul(x,y){return jc.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:v,verificationId:D,verificationCode:R}=this.params;return y&&v?{temporaryProof:y,phoneNumber:v}:{sessionInfo:D,code:R}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:v,verificationCode:D,phoneNumber:R,temporaryProof:U}=y;return D||v||R||U?new Ar({verificationId:v,verificationCode:D,phoneNumber:R,temporaryProof:U}):null}}class ts{constructor(y){var v,D,R,U,ie,we;const nt=(0,q.zd)((0,q.pd)(y)),_t=null!==(v=nt.apiKey)&&void 0!==v?v:null,Ut=null!==(D=nt.oobCode)&&void 0!==D?D:null,Mn=function Wr(x){switch(x){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=nt.mode)&&void 0!==R?R:null);oe(_t&&Ut&&Mn,"argument-error"),this.apiKey=_t,this.operation=Mn,this.code=Ut,this.continueUrl=null!==(U=nt.continueUrl)&&void 0!==U?U:null,this.languageCode=null!==(ie=nt.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(we=nt.tenantId)&&void 0!==we?we:null}static parseLink(y){const v=function $c(x){const y=(0,q.zd)((0,q.pd)(x)).link,v=y?(0,q.zd)((0,q.pd)(y)).deep_link_id:null,D=(0,q.zd)((0,q.pd)(x)).deep_link_id;return(D?(0,q.zd)((0,q.pd)(D)).link:null)||D||v||y||x}(y);try{return new ts(v)}catch{return null}}}let gp=(()=>{class x{constructor(){this.providerId=x.PROVIDER_ID}static credential(v,D){return Us._fromEmailAndPassword(v,D)}static credentialWithLink(v,D){const R=ts.parseLink(D);return oe(R,"argument-error"),Us._fromEmailAndCode(v,R.code,R.tenantId)}}return x.PROVIDER_ID="password",x.EMAIL_PASSWORD_SIGN_IN_METHOD="password",x.EMAIL_LINK_SIGN_IN_METHOD="emailLink",x})();class ms{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Ta extends ms{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class go extends Ta{static credentialFromJSON(y){const v="string"==typeof y?JSON.parse(y):y;return oe("providerId"in v&&"signInMethod"in v,"argument-error"),jt._fromParams(v)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return oe(y.idToken||y.accessToken,"argument-error"),jt._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return go.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return go.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:v,oauthAccessToken:D,oauthTokenSecret:R,pendingToken:U,nonce:ie,providerId:we}=y;if(!D&&!R&&!v&&!U||!we)return null;try{return new go(we)._credential({idToken:v,accessToken:D,nonce:ie,pendingToken:U})}catch{return null}}}let Sa=(()=>{class x extends Ta{constructor(){super("facebook.com")}static credential(v){return jt._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return x.credential(v.oauthAccessToken)}catch{return null}}}return x.FACEBOOK_SIGN_IN_METHOD="facebook.com",x.PROVIDER_ID="facebook.com",x})(),hl=(()=>{class x extends Ta{constructor(){super("google.com"),this.addScope("profile")}static credential(v,D){return jt._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:D})}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:D,oauthAccessToken:R}=v;if(!D&&!R)return null;try{return x.credential(D,R)}catch{return null}}}return x.GOOGLE_SIGN_IN_METHOD="google.com",x.PROVIDER_ID="google.com",x})(),fl=(()=>{class x extends Ta{constructor(){super("github.com")}static credential(v){return jt._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return x.credential(v.oauthAccessToken)}catch{return null}}}return x.GITHUB_SIGN_IN_METHOD="github.com",x.PROVIDER_ID="github.com",x})();class ec extends po{constructor(y,v){super(y,y),this.pendingToken=v}_getIdTokenResponse(y){return Xn(y,this.buildRequest())}_linkToIdToken(y,v){const D=this.buildRequest();return D.idToken=v,Xn(y,D)}_getReauthenticationResolver(y){const v=this.buildRequest();return v.autoCreate=!1,Xn(y,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const v="string"==typeof y?JSON.parse(y):y,{providerId:D,signInMethod:R,pendingToken:U}=v;return D&&R&&U&&D===R?new ec(D,U):null}static _create(y,v){return new ec(y,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Br extends ms{constructor(y){oe(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return Br.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return Br.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const v=ec.fromJSON(y);return oe(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:v,providerId:D}=y;if(!v||!D)return null;try{return ec._create(D,v)}catch{return null}}}let du=(()=>{class x extends Ta{constructor(){super("twitter.com")}static credential(v,D){return jt._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:D})}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:D,oauthTokenSecret:R}=v;if(!D||!R)return null;try{return x.credential(D,R)}catch{return null}}}return x.TWITTER_SIGN_IN_METHOD="twitter.com",x.PROVIDER_ID="twitter.com",x})();function ns(x,y){return ta.apply(this,arguments)}function ta(){return(ta=(0,d.Z)(function*(x,y){return Gt(x,"POST","/v1/accounts:signUp",dt(x,y))})).apply(this,arguments)}class si{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,v,D,R=!1){return(0,d.Z)(function*(){const U=yield Ci._fromIdTokenResponse(y,D,R),ie=ml(D);return new si({user:U,providerId:ie,_tokenResponse:D,operationType:v})})()}static _forOperation(y,v,D){return(0,d.Z)(function*(){yield y._updateTokensIfNecessary(D,!0);const R=ml(D);return new si({user:y,providerId:R,_tokenResponse:D,operationType:v})})()}}function ml(x){return x.providerId?x.providerId:"phoneNumber"in x?"phone":null}function sf(x){return uu.apply(this,arguments)}function uu(){return(uu=(0,d.Z)(function*(x){var y;const v=pi(x);if(yield v._initializationPromise,null!==(y=v.currentUser)&&void 0!==y&&y.isAnonymous)return new si({user:v.currentUser,providerId:null,operationType:"signIn"});const D=yield ns(v,{returnSecureToken:!0}),R=yield si._fromIdTokenResponse(v,"signIn",D,!0);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}class hu extends q.ZR{constructor(y,v,D,R){var U;super(v.code,v.message),this.operationType=D,this.user=R,Object.setPrototypeOf(this,hu.prototype),this.customData={appName:y.name,tenantId:null!==(U=y.tenantId)&&void 0!==U?U:void 0,_serverResponse:v.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(y,v,D,R){return new hu(y,v,D,R)}}function fu(x,y,v,D){return("reauthenticate"===y?v._getReauthenticationResolver(x):v._getIdTokenResponse(x)).catch(U=>{throw"auth/multi-factor-auth-required"===U.code?hu._fromErrorAndOperation(x,U,y,D):U})}function _p(x){return new Set(x.map(({providerId:y})=>y).filter(y=>!!y))}function Z_(x,y){return af.apply(this,arguments)}function af(){return af=(0,d.Z)(function*(x,y){const v=(0,q.m9)(x);yield pu(!0,v,y);const{providerUserInfo:D}=yield function Gn(x,y){return or.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[y]}),R=_p(D||[]);return v.providerData=v.providerData.filter(U=>R.has(U.providerId)),R.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),af.apply(this,arguments)}function ps(x,y){return mu.apply(this,arguments)}function mu(){return(mu=(0,d.Z)(function*(x,y,v=!1){const D=yield gn(x,y._linkToIdToken(x.auth,yield x.getIdToken()),v);return si._forOperation(x,"link",D)})).apply(this,arguments)}function pu(x,y,v){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,d.Z)(function*(x,y,v){yield no(y);const R=!1===x?"provider-already-linked":"no-such-provider";oe(_p(y.providerData).has(v)===x,y.auth,R)})).apply(this,arguments)}function yp(x,y){return lf.apply(this,arguments)}function lf(){return(lf=(0,d.Z)(function*(x,y,v=!1){const{auth:D}=x,R="reauthenticate";try{const U=yield gn(x,fu(D,R,y,x),v);oe(U.idToken,D,"internal-error");const ie=At(U.idToken);oe(ie,D,"internal-error");const{sub:we}=ie;return oe(x.uid===we,D,"user-mismatch"),si._forOperation(x,R,U)}catch(U){throw"auth/user-not-found"===U?.code&&ce(D,"user-mismatch"),U}})).apply(this,arguments)}function cf(x,y){return df.apply(this,arguments)}function df(){return(df=(0,d.Z)(function*(x,y,v=!1){const D="signIn",R=yield fu(x,D,y),U=yield si._fromIdTokenResponse(x,D,R);return v||(yield x._updateCurrentUser(U.user)),U})).apply(this,arguments)}function gu(x,y){return uf.apply(this,arguments)}function uf(){return(uf=(0,d.Z)(function*(x,y){return cf(pi(x),y)})).apply(this,arguments)}function Wc(x,y){return _u.apply(this,arguments)}function _u(){return(_u=(0,d.Z)(function*(x,y){const v=(0,q.m9)(x);return yield pu(!1,v,y.providerId),ps(v,y)})).apply(this,arguments)}function vp(x,y){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,d.Z)(function*(x,y){return yp((0,q.m9)(x),y)})).apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(x,y){return Gt(x,"POST","/v1/accounts:signInWithCustomToken",dt(x,y))})).apply(this,arguments)}function K_(x,y){return ia.apply(this,arguments)}function ia(){return ia=(0,d.Z)(function*(x,y){const v=pi(x),D=yield function u0(x,y){return na.apply(this,arguments)}(v,{token:y,returnSecureToken:!0}),R=yield si._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(R.user),R}),ia.apply(this,arguments)}class so{constructor(y,v){this.factorId=y,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(y,v){return"phoneInfo"in v?yu._fromServerResponse(y,v):"totpInfo"in v?tc._fromServerResponse(y,v):ce(y,"internal-error")}}class yu extends so{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,v){return new yu(v)}}class tc extends so{constructor(y){super("totp",y)}static _fromServerResponse(y,v){return new tc(v)}}function nc(x,y,v){var D;oe((null===(D=v.url)||void 0===D?void 0:D.length)>0,x,"invalid-continue-uri"),oe(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,x,"invalid-dynamic-link-domain"),y.continueUrl=v.url,y.dynamicLinkDomain=v.dynamicLinkDomain,y.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(oe(v.iOS.bundleId.length>0,x,"missing-ios-bundle-id"),y.iOSBundleId=v.iOS.bundleId),v.android&&(oe(v.android.packageName.length>0,x,"missing-android-pkg-name"),y.androidInstallApp=v.android.installApp,y.androidMinimumVersionCode=v.android.minimumVersion,y.androidPackageName=v.android.packageName)}function bp(x,y,v){return wp.apply(this,arguments)}function wp(){return wp=(0,d.Z)(function*(x,y,v){var D;const R=pi(x),U={requestType:"PASSWORD_RESET",email:y,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=R._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const ie=yield ro(R,U,"getOobCode",!0);v&&nc(R,ie,v),yield cn(R,ie)}else v&&nc(R,U,v),yield cn(R,U).catch(function(){var ie=(0,d.Z)(function*(we){if("auth/missing-recaptcha-token"!==we.code)return Promise.reject(we);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const nt=yield ro(R,U,"getOobCode",!0);v&&nc(R,nt,v),yield cn(R,nt)}});return function(we){return ie.apply(this,arguments)}}())}),wp.apply(this,arguments)}function qc(x,y,v){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,d.Z)(function*(x,y,v){yield Ca((0,q.m9)(x),{oobCode:y,newPassword:v})})).apply(this,arguments)}function Yc(x,y){return Li.apply(this,arguments)}function Li(){return Li=(0,d.Z)(function*(x,y){yield function cu(x,y){return rn.apply(this,arguments)}((0,q.m9)(x),{oobCode:y})}),Li.apply(this,arguments)}function _o(x,y){return vu.apply(this,arguments)}function vu(){return(vu=(0,d.Z)(function*(x,y){const v=(0,q.m9)(x),D=yield Ca(v,{oobCode:y}),R=D.requestType;switch(oe(R,v,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(D.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(D.mfaInfo,v,"internal-error");default:oe(D.email,v,"internal-error")}let U=null;return D.mfaInfo&&(U=so._fromServerResponse(pi(v),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:U},operation:R}})).apply(this,arguments)}function Zc(x,y){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(x,y){const{data:v}=yield _o((0,q.m9)(x),y);return v.email})).apply(this,arguments)}function Ma(x,y,v){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,d.Z)(function*(x,y,v){var D;const R=pi(x),U={returnSecureToken:!0,email:y,password:v,clientType:"CLIENT_TYPE_WEB"};let ie;if(null!==(D=R._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const _t=yield ro(R,U,"signUpPassword");ie=ns(R,_t)}else ie=ns(R,U).catch(function(){var _t=(0,d.Z)(function*(Ut){if("auth/missing-recaptcha-token"===Ut.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Mn=yield ro(R,U,"signUpPassword");return ns(R,Mn)}return Promise.reject(Ut)});return function(Ut){return _t.apply(this,arguments)}}());const we=yield ie.catch(_t=>Promise.reject(_t)),nt=yield si._fromIdTokenResponse(R,"signIn",we);return yield R._updateCurrentUser(nt.user),nt}),Kc.apply(this,arguments)}function xp(x,y,v){return gu((0,q.m9)(x),gp.credential(y,v))}function hf(x,y,v){return ra.apply(this,arguments)}function ra(){return ra=(0,d.Z)(function*(x,y,v){var D;const R=pi(x),U={requestType:"EMAIL_SIGNIN",email:y,clientType:"CLIENT_TYPE_WEB"};function ie(we,nt){oe(nt.handleCodeInApp,R,"argument-error"),nt&&nc(R,we,nt)}if(null!==(D=R._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const we=yield ro(R,U,"getOobCode",!0);ie(we,v),yield er(R,we)}else ie(U,v),yield er(R,U).catch(function(){var we=(0,d.Z)(function*(nt){if("auth/missing-recaptcha-token"!==nt.code)return Promise.reject(nt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const _t=yield ro(R,U,"getOobCode",!0);ie(_t,v),yield er(R,_t)}});return function(nt){return we.apply(this,arguments)}}())}),ra.apply(this,arguments)}function ff(x,y){const v=ts.parseLink(y);return"EMAIL_SIGNIN"===v?.operation}function bu(x,y,v){return yr.apply(this,arguments)}function yr(){return(yr=(0,d.Z)(function*(x,y,v){const D=(0,q.m9)(x),R=gp.credentialWithLink(y,v||mn());return oe(R._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),gu(D,R)})).apply(this,arguments)}function wu(){return(wu=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:createAuthUri",dt(x,y))})).apply(this,arguments)}function Q_(x,y){return ic.apply(this,arguments)}function ic(){return ic=(0,d.Z)(function*(x,y){const D={identifier:y,continueUri:Oi()?mn():"http://localhost"},{signinMethods:R}=yield function h0(x,y){return wu.apply(this,arguments)}((0,q.m9)(x),D);return R||[]}),ic.apply(this,arguments)}function Ep(x,y){return rc.apply(this,arguments)}function rc(){return rc=(0,d.Z)(function*(x,y){const v=(0,q.m9)(x),R={requestType:"VERIFY_EMAIL",idToken:yield x.getIdToken()};y&&nc(v.auth,R,y);const{email:U}=yield function Ze(x,y){return yt.apply(this,arguments)}(v.auth,R);U!==x.email&&(yield x.reload())}),rc.apply(this,arguments)}function Qc(x,y,v){return pl.apply(this,arguments)}function pl(){return pl=(0,d.Z)(function*(x,y,v){const D=(0,q.m9)(x),U={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield x.getIdToken(),newEmail:y};v&&nc(D.auth,U,v);const{email:ie}=yield function at(x,y){return on.apply(this,arguments)}(D.auth,U);ie!==x.email&&(yield x.reload())}),pl.apply(this,arguments)}function Eu(){return(Eu=(0,d.Z)(function*(x,y){return bt(x,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Cp(x,y){return Cu.apply(this,arguments)}function Cu(){return Cu=(0,d.Z)(function*(x,{displayName:y,photoURL:v}){if(void 0===y&&void 0===v)return;const D=(0,q.m9)(x),U={idToken:yield D.getIdToken(),displayName:y,photoUrl:v,returnSecureToken:!0},ie=yield gn(D,function xu(x,y){return Eu.apply(this,arguments)}(D.auth,U));D.displayName=ie.displayName||null,D.photoURL=ie.photoUrl||null;const we=D.providerData.find(({providerId:nt})=>"password"===nt);we&&(we.displayName=D.displayName,we.photoURL=D.photoURL),yield D._updateTokensIfNecessary(ie)}),Cu.apply(this,arguments)}function mf(x,y){return Iu((0,q.m9)(x),y,null)}function Du(x,y){return Iu((0,q.m9)(x),null,y)}function Iu(x,y,v){return is.apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(x,y,v){const{auth:D}=x,U={idToken:yield x.getIdToken(),returnSecureToken:!0};y&&(U.email=y),v&&(U.password=v);const ie=yield gn(x,Ls(D,U));yield x._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class ka{constructor(y,v,D={}){this.isNewUser=y,this.providerId=v,this.profile=D}}class Jn extends ka{constructor(y,v,D,R){super(y,v,D),this.username=R}}class Xc extends ka{constructor(y,v){super(y,"facebook.com",v)}}class gl extends Jn{constructor(y,v){super(y,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class Vr extends ka{constructor(y,v){super(y,"google.com",v)}}class _l extends Jn{constructor(y,v,D){super(y,"twitter.com",v,D)}}function pf(x){const{user:y,_tokenResponse:v}=x;return y.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Tu(x){var y,v;if(!x)return null;const{providerId:D}=x,R=x.rawUserInfo?JSON.parse(x.rawUserInfo):{},U=x.isNewUser||"identitytoolkit#SignupNewUserResponse"===x.kind;if(!D&&x?.idToken){const ie=null===(v=null===(y=At(x.idToken))||void 0===y?void 0:y.firebase)||void 0===v?void 0:v.sign_in_provider;if(ie)return new ka(U,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!D)return null;switch(D){case"facebook.com":return new Xc(U,R);case"github.com":return new gl(U,R);case"google.com":return new Vr(U,R);case"twitter.com":return new _l(U,R,x.screenName||null);case"custom":case"anonymous":return new ka(U,null);default:return new ka(U,D,R)}}(v)}class Fo{constructor(y,v,D){this.type=y,this.credential=v,this.auth=D}static _fromIdtoken(y,v){return new Fo("enroll",y,v)}static _fromMfaPendingCredential(y){return new Fo("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var v,D;if(y?.multiFactorSession){if(null!==(v=y.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Fo._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(D=y.multiFactorSession)&&void 0!==D&&D.idToken)return Fo._fromIdtoken(y.multiFactorSession.idToken)}return null}}class ed{constructor(y,v,D){this.session=y,this.hints=v,this.signInResolver=D}static _fromError(y,v){const D=pi(y),R=v.customData._serverResponse,U=(R.mfaInfo||[]).map(we=>so._fromServerResponse(D,we));oe(R.mfaPendingCredential,D,"internal-error");const ie=Fo._fromMfaPendingCredential(R.mfaPendingCredential);return new ed(ie,U,function(){var we=(0,d.Z)(function*(nt){const _t=yield nt._process(D,ie);delete R.mfaInfo,delete R.mfaPendingCredential;const Ut=Object.assign(Object.assign({},R),{idToken:_t.idToken,refreshToken:_t.refreshToken});switch(v.operationType){case"signIn":const Mn=yield si._fromIdTokenResponse(D,v.operationType,Ut);return yield D._updateCurrentUser(Mn.user),Mn;case"reauthenticate":return oe(v.user,D,"internal-error"),si._forOperation(v.user,v.operationType,Ut);default:ce(D,"internal-error")}});return function(nt){return we.apply(this,arguments)}}())}resolveSignIn(y){var v=this;return(0,d.Z)(function*(){return v.signInResolver(y)})()}}function Yt(x,y){var v;const D=(0,q.m9)(x),R=y;return oe(y.customData.operationType,D,"argument-error"),oe(null===(v=R.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,D,"argument-error"),ed._fromError(D,R)}class oc{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(D=>so._fromServerResponse(y.auth,D)))})}static _fromUser(y){return new oc(y)}getSession(){var y=this;return(0,d.Z)(function*(){return Fo._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,v){var D=this;return(0,d.Z)(function*(){const R=y,U=yield D.getSession(),ie=yield gn(D.user,R._process(D.user.auth,U,v));return yield D.user._updateTokensIfNecessary(ie),D.user.reload()})()}unenroll(y){var v=this;return(0,d.Z)(function*(){const D="string"==typeof y?y:y.uid,R=yield v.user.getIdToken();try{const U=yield gn(v.user,function Ip(x,y){return bt(x,"POST","/v2/accounts/mfaEnrollment:withdraw",dt(x,y))}(v.user.auth,{idToken:R,mfaEnrollmentId:D}));v.enrolledFactors=v.enrolledFactors.filter(({uid:ie})=>ie!==D),yield v.user._updateTokensIfNecessary(U),yield v.user.reload()}catch(U){throw U}})()}}const Lo=new WeakMap;function td(x){const y=(0,q.m9)(x);return Lo.has(y)||Lo.set(y,oc._fromUser(y)),Lo.get(y)}const sc="__sak";class Tp{constructor(y,v){this.storageRetriever=y,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(sc,"1"),this.storage.removeItem(sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,v){return this.storage.setItem(y,JSON.stringify(v)),Promise.resolve()}_get(y){const v=this.storage.getItem(y);return Promise.resolve(v?JSON.parse(v):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pu=(()=>{class x extends Tp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,D)=>this.onStorageEvent(v,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yf(){const x=(0,q.z$)();return $(x)||Pt(x)}()&&function zi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Jt(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const D of Object.keys(this.listeners)){const R=this.storage.getItem(D),U=this.localCache[D];R!==U&&v(D,U,R)}}onStorageEvent(v,D=!1){if(!v.key)return void this.forAllChangedKeys((we,nt,_t)=>{this.notifyListeners(we,_t)});const R=v.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const we=this.storage.getItem(R);if(v.newValue!==we)null!==v.newValue?this.storage.setItem(R,v.newValue):this.storage.removeItem(R);else if(this.localCache[R]===v.newValue&&!D)return}const U=()=>{const we=this.storage.getItem(R);!D&&this.localCache[R]===we||this.notifyListeners(R,we)},ie=this.storage.getItem(R);!function Fn(){return(0,q.w1)()&&10===document.documentMode}()||ie===v.newValue||v.newValue===v.oldValue?U():setTimeout(U,10)}notifyListeners(v,D){this.localCache[v]=D;const R=this.listeners[v];if(R)for(const U of Array.from(R))U(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,D,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:D,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,D){var R=()=>super._set,U=this;return(0,d.Z)(function*(){yield R().call(U,v,D),U.localCache[v]=JSON.stringify(D)})()}_get(v){var D=()=>super._get,R=this;return(0,d.Z)(function*(){const U=yield D().call(R,v);return R.localCache[v]=JSON.stringify(U),U})()}_remove(v){var D=()=>super._remove,R=this;return(0,d.Z)(function*(){yield D().call(R,v),delete R.localCache[v]})()}}return x.type="LOCAL",x})(),lr=(()=>{class x extends Tp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,D){}_removeListener(v,D){}}return x.type="SESSION",x})();let id=(()=>{class x{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const D=this.receivers.find(U=>U.isListeningto(v));if(D)return D;const R=new x(v);return this.receivers.push(R),R}isListeningto(v){return this.eventTarget===v}handleEvent(v){var D=this;return(0,d.Z)(function*(){const R=v,{eventId:U,eventType:ie,data:we}=R.data,nt=D.handlersMap[ie];if(!nt?.size)return;R.ports[0].postMessage({status:"ack",eventId:U,eventType:ie});const _t=Array.from(nt).map(function(){var Mn=(0,d.Z)(function*(ao){return ao(R.origin,we)});return function(ao){return Mn.apply(this,arguments)}}()),Ut=yield function Ap(x){return Promise.all(x.map(function(){var y=(0,d.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(D){return{fulfilled:!1,reason:D}}});return function(v){return y.apply(this,arguments)}}()))}(_t);R.ports[0].postMessage({status:"done",eventId:U,eventType:ie,response:Ut})})()}_subscribe(v,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(D)}_unsubscribe(v,D){this.handlersMap[v]&&D&&this.handlersMap[v].delete(D),(!D||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return x.receivers=[],x})();function qr(x="",y=10){let v="";for(let D=0;D<y;D++)v+=Math.floor(10*Math.random());return x+v}class Mp{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,v,D=50){var R=this;return(0,d.Z)(function*(){const U=typeof MessageChannel<"u"?new MessageChannel:null;if(!U)throw new Error("connection_unavailable");let ie,we;return new Promise((nt,_t)=>{const Ut=qr("",20);U.port1.start();const Mn=setTimeout(()=>{_t(new Error("unsupported_event"))},D);we={messageChannel:U,onMessage(ao){const fa=ao;if(fa.data.eventId===Ut)switch(fa.data.status){case"ack":clearTimeout(Mn),ie=setTimeout(()=>{_t(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),nt(fa.data.response);break;default:clearTimeout(Mn),clearTimeout(ie),_t(new Error("invalid_response"))}}},R.handlers.add(we),U.port1.addEventListener("message",we.onMessage),R.target.postMessage({eventType:y,eventId:Ut,data:v},[U.port2])}).finally(()=>{we&&R.removeMessageHandler(we)})})()}}function Ui(){return window}function vf(){return typeof Ui().WorkerGlobalScope<"u"&&"function"==typeof Ui().importScripts}function Mr(){return(Mr=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const yi="firebaseLocalStorageDb",cr="firebaseLocalStorage",od="fbase_key";class ac{constructor(y){this.request=y}toPromise(){return new Promise((y,v)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function sd(x,y){return x.transaction([cr],y?"readwrite":"readonly").objectStore(cr)}function lc(){const x=indexedDB.open(yi,1);return new Promise((y,v)=>{x.addEventListener("error",()=>{v(x.error)}),x.addEventListener("upgradeneeded",()=>{const D=x.result;try{D.createObjectStore(cr,{keyPath:od})}catch(R){v(R)}}),x.addEventListener("success",(0,d.Z)(function*(){const D=x.result;D.objectStoreNames.contains(cr)?y(D):(D.close(),yield function wf(){const x=indexedDB.deleteDatabase(yi);return new ac(x).toPromise()}(),y(yield lc()))}))})}function ad(x,y,v){return sa.apply(this,arguments)}function sa(){return(sa=(0,d.Z)(function*(x,y,v){const D=sd(x,!0).put({[od]:y,value:v});return new ac(D).toPromise()})).apply(this,arguments)}function vl(){return(vl=(0,d.Z)(function*(x,y){const v=sd(x,!1).get(y),D=yield new ac(v).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function ld(x,y){const v=sd(x,!0).delete(y);return new ac(v).toPromise()}const xf=(()=>{class x{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,d.Z)(function*(){return v.db||(v.db=yield lc()),v.db})()}_withRetries(v){var D=this;return(0,d.Z)(function*(){let R=0;for(;;)try{const U=yield D._openDb();return yield v(U)}catch(U){if(R++>3)throw U;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,d.Z)(function*(){return vf()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,d.Z)(function*(){v.receiver=id._getInstance(function rd(){return vf()?self:null}()),v.receiver._subscribe("keyChanged",function(){var D=(0,d.Z)(function*(R,U){return{keyProcessed:(yield v._poll()).includes(U.key)}});return function(R,U){return D.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var D=(0,d.Z)(function*(R,U){return["keyChanged"]});return function(R,U){return D.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,d.Z)(function*(){var D,R;if(v.activeServiceWorker=yield function bf(){return Mr.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Mp(v.activeServiceWorker);const U=yield v.sender._send("ping",{},800);U&&null!==(D=U[0])&&void 0!==D&&D.fulfilled&&null!==(R=U[0])&&void 0!==R&&R.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var D=this;return(0,d.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function _s(){var x;return(null===(x=navigator?.serviceWorker)||void 0===x?void 0:x.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:v},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const v=yield lc();return yield ad(v,sc,"1"),yield ld(v,sc),!0}catch{}return!1})()}_withPendingWrite(v){var D=this;return(0,d.Z)(function*(){D.pendingWrites++;try{yield v()}finally{D.pendingWrites--}})()}_set(v,D){var R=this;return(0,d.Z)(function*(){return R._withPendingWrite((0,d.Z)(function*(){return yield R._withRetries(U=>ad(U,v,D)),R.localCache[v]=D,R.notifyServiceWorker(v)}))})()}_get(v){var D=this;return(0,d.Z)(function*(){const R=yield D._withRetries(U=>function aa(x,y){return vl.apply(this,arguments)}(U,v));return D.localCache[v]=R,R})()}_remove(v){var D=this;return(0,d.Z)(function*(){return D._withPendingWrite((0,d.Z)(function*(){return yield D._withRetries(R=>ld(R,v)),delete D.localCache[v],D.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,d.Z)(function*(){const D=yield v._withRetries(ie=>{const we=sd(ie,!1).getAll();return new ac(we).toPromise()});if(!D)return[];if(0!==v.pendingWrites)return[];const R=[],U=new Set;for(const{fbase_key:ie,value:we}of D)U.add(ie),JSON.stringify(v.localCache[ie])!==JSON.stringify(we)&&(v.notifyListeners(ie,we),R.push(ie));for(const ie of Object.keys(v.localCache))v.localCache[ie]&&!U.has(ie)&&(v.notifyListeners(ie,null),R.push(ie));return R})()}notifyListeners(v,D){this.localCache[v]=D;const R=this.listeners[v];if(R)for(const U of Array.from(R))U(D)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return x.type="LOCAL",x})(),ei=1e12;class dd{constructor(y){this.auth=y,this.counter=ei,this._widgets=new Map}render(y,v){const D=this.counter;return this._widgets.set(D,new Df(y,this.auth.name,v||{})),this.counter++,D}reset(y){var v;const D=y||ei;null===(v=this._widgets.get(D))||void 0===v||v.delete(),this._widgets.delete(D)}getResponse(y){var v;return(null===(v=this._widgets.get(y||ei))||void 0===v?void 0:v.getResponse())||""}execute(y){var v=this;return(0,d.Z)(function*(){var D;return null===(D=v._widgets.get(y||ei))||void 0===D||D.execute(),""})()}}class Df{constructor(y,v,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof y?document.getElementById(y):y;oe(R,"argument-error",{appName:v}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function bl(x){const y=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<x;D++)y.push(v.charAt(Math.floor(62*Math.random())));return y.join("")}(50);const{callback:y,"expired-callback":v}=this.params;if(y)try{y(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fu=mo("rcb"),Lu=new Se(3e4,6e4);class cc{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=Ui().grecaptcha)||void 0===y||!y.render)}load(y,v=""){return oe(function Ra(x){return x.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(x)}(v),y,"argument-error"),this.shouldResolveImmediately(v)&&Ht(Ui().grecaptcha)?Promise.resolve(Ui().grecaptcha):new Promise((D,R)=>{const U=Ui().setTimeout(()=>{R(Re(y,"network-request-failed"))},Lu.get());Ui()[Fu]=()=>{Ui().clearTimeout(U),delete Ui()[Fu];const we=Ui().grecaptcha;if(!we||!Ht(we))return void R(Re(y,"internal-error"));const nt=we.render;we.render=(_t,Ut)=>{const Mn=nt(_t,Ut);return this.counter++,Mn},this.hostLanguage=v,D(we)},mi(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:Fu,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(U),R(Re(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var v;return!(null===(v=Ui().grecaptcha)||void 0===v||!v.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class If{load(y){return(0,d.Z)(function*(){return new dd(y)})()}clearedOneInstance(){}}const ud="recaptcha",dc={theme:"light",type:"image"};class Bu{constructor(y,v=Object.assign({},dc),D){this.parameters=v,this.type=ud,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pi(D),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof y?document.getElementById(y):y;oe(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new If:new cc,this.validateStartingState()}verify(){var y=this;return(0,d.Z)(function*(){y.assertNotDestroyed();const v=yield y.render(),D=y.getAssertedRecaptcha();return D.getResponse(v)||new Promise(U=>{const ie=we=>{we&&(y.tokenChangeListeners.delete(ie),U(we))};y.tokenChangeListeners.add(ie),y.isInvisible&&D.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return v=>{if(this.tokenChangeListeners.forEach(D=>D(v)),"function"==typeof y)y(v);else if("string"==typeof y){const D=Ui()[y];"function"==typeof D&&D(v)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,d.Z)(function*(){if(yield y.init(),!y.widgetId){let v=y.container;if(!y.isInvisible){const D=document.createElement("div");v.appendChild(D),v=D}y.widgetId=y.getAssertedRecaptcha().render(v,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,d.Z)(function*(){oe(Oi()&&!vf(),y.auth,"internal-error"),yield function hd(){let x=null;return new Promise(y=>{"complete"!==document.readyState?(x=()=>y(),window.addEventListener("load",x)):y()}).catch(y=>{throw x&&window.removeEventListener("load",x),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const v=yield function Ce(x){return he.apply(this,arguments)}(y.auth);oe(v,y.auth,"internal-error"),y.parameters.sitekey=v})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vu{constructor(y,v){this.verificationId=y,this.onConfirmation=v}confirm(y){const v=Ar._fromVerification(this.verificationId,y);return this.onConfirmation(v)}}function bs(x,y,v){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(x,y,v){const D=pi(x),R=yield Bs(D,y,(0,q.m9)(v));return new Vu(R,U=>gu(D,U))})).apply(this,arguments)}function yo(x,y,v){return la.apply(this,arguments)}function la(){return(la=(0,d.Z)(function*(x,y,v){const D=(0,q.m9)(x);yield pu(!1,D,"phone");const R=yield Bs(D.auth,y,(0,q.m9)(v));return new Vu(R,U=>Wc(D,U))})).apply(this,arguments)}function Tf(x,y,v){return fd.apply(this,arguments)}function fd(){return(fd=(0,d.Z)(function*(x,y,v){const D=(0,q.m9)(x),R=yield Bs(D.auth,y,(0,q.m9)(v));return new Vu(R,U=>vp(D,U))})).apply(this,arguments)}function Bs(x,y,v){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,d.Z)(function*(x,y,v){var D;const R=yield v.verify();try{let U;if(oe("string"==typeof R,x,"argument-error"),oe(v.type===ud,x,"argument-error"),U="string"==typeof y?{phoneNumber:y}:y,"session"in U){const ie=U.session;if("phoneNumber"in U)return oe("enroll"===ie.type,x,"internal-error"),(yield function ku(x,y){return bt(x,"POST","/v2/accounts/mfaEnrollment:start",dt(x,y))}(x,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:U.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{oe("signin"===ie.type,x,"internal-error");const we=(null===(D=U.multiFactorHint)||void 0===D?void 0:D.uid)||U.multiFactorUid;return oe(we,x,"missing-multi-factor-info"),(yield function Ef(x,y){return bt(x,"POST","/v2/accounts/mfaSignIn:start",dt(x,y))}(x,{mfaPendingCredential:ie.credential,mfaEnrollmentId:we,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield function Jl(x,y){return Hc.apply(this,arguments)}(x,{phoneNumber:U.phoneNumber,recaptchaToken:R});return ie}}finally{v._reset()}}),Hu.apply(this,arguments)}function Rp(x,y){return uc.apply(this,arguments)}function uc(){return(uc=(0,d.Z)(function*(x,y){yield ps((0,q.m9)(x),y)})).apply(this,arguments)}let ey=(()=>{class x{constructor(v){this.providerId=x.PROVIDER_ID,this.auth=pi(v)}verifyPhoneNumber(v,D){return Bs(this.auth,v,(0,q.m9)(D))}static credential(v,D){return Ar._fromVerification(v,D)}static credentialFromResult(v){return x.credentialFromTaggedObject(v)}static credentialFromError(v){return x.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:D,temporaryProof:R}=v;return D&&R?Ar._fromTokenResponse(D,R):null}}return x.PROVIDER_ID="phone",x.PHONE_SIGN_IN_METHOD="phone",x})();function ca(x,y){return y?Di(y):(oe(x._popupRedirectResolver,x,"argument-error"),x._popupRedirectResolver)}class zu extends po{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return Xn(y,this._buildIdpRequest())}_linkToIdToken(y,v){return Xn(y,this._buildIdpRequest(v))}_getReauthenticationResolver(y){return Xn(y,this._buildIdpRequest())}_buildIdpRequest(y){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(v.idToken=y),v}}function Uo(x){return cf(x.auth,new zu(x),x.bypassAuthState)}function Pp(x){const{auth:y,user:v}=x;return oe(v,y,"internal-error"),yp(v,new zu(x),x.bypassAuthState)}function hc(x){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(x){const{auth:y,user:v}=x;return oe(v,y,"internal-error"),ps(v,new zu(x),x.bypassAuthState)})).apply(this,arguments)}class fc{constructor(y,v,D,R,U=!1){this.auth=y,this.resolver=D,this.user=R,this.bypassAuthState=U,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var y=this;return new Promise(function(){var v=(0,d.Z)(function*(D,R){y.pendingPromise={resolve:D,reject:R};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(U){y.reject(U)}});return function(D,R){return v.apply(this,arguments)}}())}onAuthEvent(y){var v=this;return(0,d.Z)(function*(){const{urlResponse:D,sessionId:R,postBody:U,tenantId:ie,error:we,type:nt}=y;if(we)return void v.reject(we);const _t={auth:v.auth,requestUri:D,sessionId:R,tenantId:ie||void 0,postBody:U||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(nt)(_t))}catch(Ut){v.reject(Ut)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return Uo;case"linkViaPopup":case"linkViaRedirect":return hc;case"reauthViaPopup":case"reauthViaRedirect":return Pp;default:ce(this.auth,"internal-error")}}resolve(y){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ty=new Se(2e3,1e4);function Vn(x,y,v){return dn.apply(this,arguments)}function dn(){return(dn=(0,d.Z)(function*(x,y,v){const D=pi(x);Ee(x,y,ms);const R=ca(D,v);return new da(D,"signInViaPopup",y,R).executeNotNull()})).apply(this,arguments)}function It(x,y,v){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(x,y,v){const D=(0,q.m9)(x);Ee(D.auth,y,ms);const R=ca(D.auth,v);return new da(D.auth,"reauthViaPopup",y,R,D).executeNotNull()})).apply(this,arguments)}function Hn(x,y,v){return rs.apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(x,y,v){const D=(0,q.m9)(x);Ee(D.auth,y,ms);const R=ca(D.auth,v);return new da(D.auth,"linkViaPopup",y,R,D).executeNotNull()})).apply(this,arguments)}let da=(()=>{class x extends fc{constructor(v,D,R,U,ie){super(v,D,U,ie),this.provider=R,this.authWindow=null,this.pollId=null,x.currentPopupAction&&x.currentPopupAction.cancel(),x.currentPopupAction=this}executeNotNull(){var v=this;return(0,d.Z)(function*(){const D=yield v.execute();return oe(D,v.auth,"internal-error"),D})()}onExecution(){var v=this;return(0,d.Z)(function*(){Xe(1===v.filter.length,"Popup operations only handle one event");const D=qr();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],D),v.authWindow.associatedEvent=D,v.resolver._originValidation(v.auth).catch(R=>{v.reject(R)}),v.resolver._isIframeWebStorageSupported(v.auth,R=>{R||v.reject(Re(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,x.currentPopupAction=null}pollUserCancellation(){const v=()=>{var D,R;this.pollId=null!==(R=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,ty.get())};v()}}return x.currentPopupAction=null,x})();const ji="pendingRedirect",gt=new Map;class Sf extends fc{constructor(y,v,D=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,D),this.eventId=null}execute(){var y=()=>super.execute,v=this;return(0,d.Z)(function*(){let D=gt.get(v.auth._key());if(!D){try{const U=(yield function ny(x,y){return ua.apply(this,arguments)}(v.resolver,v.auth))?yield y().call(v):null;D=()=>Promise.resolve(U)}catch(R){D=()=>Promise.reject(R)}gt.set(v.auth._key(),D)}return v.bypassAuthState||gt.set(v.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(y){var v=()=>super.onAuthEvent,D=this;return(0,d.Z)(function*(){if("signInViaRedirect"===y.type)return v().call(D,y);if("unknown"!==y.type){if(y.eventId){const R=yield D.auth._redirectUserForId(y.eventId);if(R)return D.user=R,v().call(D,y);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ua(){return(ua=(0,d.Z)(function*(x,y){const v=Pn(y),D=di(x);if(!(yield D._isAvailable()))return!1;const R="true"===(yield D._get(v));return yield D._remove(v),R})).apply(this,arguments)}function mc(x,y){return ju.apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(x,y){return di(x)._set(Pn(y),"true")})).apply(this,arguments)}function md(){gt.clear()}function br(x,y){gt.set(x._key(),y)}function di(x){return Di(x._redirectPersistence)}function Pn(x){return _n(ji,x.config.apiKey,x.name)}function os(x,y,v){return function Hr(x,y,v){return Oa.apply(this,arguments)}(x,y,v)}function Oa(){return(Oa=(0,d.Z)(function*(x,y,v){const D=pi(x);Ee(x,y,ms),yield D._initializationPromise;const R=ca(D,v);return yield mc(R,D),R._openRedirect(D,y,"signInViaRedirect")})).apply(this,arguments)}function Na(x,y,v){return function Op(x,y,v){return ha.apply(this,arguments)}(x,y,v)}function ha(){return(ha=(0,d.Z)(function*(x,y,v){const D=(0,q.m9)(x);Ee(D.auth,y,ms),yield D.auth._initializationPromise;const R=ca(D.auth,v);yield mc(R,D.auth);const U=yield j(D);return R._openRedirect(D.auth,y,"reauthViaRedirect",U)})).apply(this,arguments)}function ws(x,y,v){return function Bo(x,y,v){return pd.apply(this,arguments)}(x,y,v)}function pd(){return(pd=(0,d.Z)(function*(x,y,v){const D=(0,q.m9)(x);Ee(D.auth,y,ms),yield D.auth._initializationPromise;const R=ca(D.auth,v);yield pu(!1,D,y.providerId),yield mc(R,D.auth);const U=yield j(D);return R._openRedirect(D.auth,y,"linkViaRedirect",U)})).apply(this,arguments)}function pc(x,y){return De.apply(this,arguments)}function De(){return(De=(0,d.Z)(function*(x,y){return yield pi(x)._initializationPromise,vi(x,y,!1)})).apply(this,arguments)}function vi(x,y){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(x,y,v=!1){const D=pi(x),R=ca(D,y),ie=yield new Sf(D,R,v).execute();return ie&&!v&&(delete ie.user._redirectEventId,yield D._persistUserIfCurrent(ie.user),yield D._setRedirectUser(null,y)),ie})).apply(this,arguments)}function j(x){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,d.Z)(function*(x){const y=qr(`${x.uid}:::`);return x._redirectEventId=y,yield x.auth._setRedirectUser(x),yield x.auth._persistUserIfCurrent(x),y})).apply(this,arguments)}class gd{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let v=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(y,D)&&(v=!0,this.sendToConsumer(y,D),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Af(x){switch(x.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bi(x);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=y,v=!0)),v}sendToConsumer(y,v){var D;if(y.error&&!bi(y)){const R=(null===(D=y.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";v.onError(Re(this.auth,R))}else v.onAuthEvent(y)}isEventForConsumer(y,v){const D=null===v.eventId||!!y.eventId&&y.eventId===v.eventId;return v.filter.includes(y.type)&&D}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_d(y))}saveEventToCache(y){this.cachedEventUids.add(_d(y)),this.lastProcessedEventTime=Date.now()}}function _d(x){return[x.type,x.eventId,x.sessionId,x.tenantId].filter(y=>y).join("-")}function bi({type:x,error:y}){return"unknown"===x&&"auth/no-auth-event"===y?.code}function wl(x){return xl.apply(this,arguments)}function xl(){return(xl=(0,d.Z)(function*(x,y={}){return bt(x,"GET","/v1/projects",y)})).apply(this,arguments)}const f0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m0=/^https?/;function $u(){return($u=(0,d.Z)(function*(x){if(x.config.emulator)return;const{authorizedDomains:y}=yield wl(x);for(const v of y)try{if(iy(v))return}catch{}ce(x,"unauthorized-domain")})).apply(this,arguments)}function iy(x){const y=mn(),{protocol:v,hostname:D}=new URL(y);if(x.startsWith("chrome-extension://")){const ie=new URL(x);return""===ie.hostname&&""===D?"chrome-extension:"===v&&x.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===v&&ie.hostname===D}if(!m0.test(v))return!1;if(f0.test(x))return D===x;const R=x.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(D)}const wi=new Se(3e4,6e4);function Gu(){const x=Ui().___jsl;if(x?.H)for(const y of Object.keys(x.H))if(x.H[y].r=x.H[y].r||[],x.H[y].L=x.H[y].L||[],x.H[y].r=[...x.H[y].L],x.CP)for(let v=0;v<x.CP.length;v++)x.CP[v]=null}let nr=null;const Fa=new Se(5e3,15e3),Es="__/auth/iframe",La="emulator/auth/iframe",Ua={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ry(x){const y=x.config;oe(y.authDomain,x,"auth-domain-config-required");const v=y.emulator?Le(y,La):`https://${x.config.authDomain}/${Es}`,D={apiKey:y.apiKey,appName:x.name,v:L.SDK_VERSION},R=vd.get(x.config.apiHost);R&&(D.eid=R);const U=x._getFrameworks();return U.length&&(D.fw=U.join(",")),`${v}?${(0,q.xO)(D).slice(1)}`}function Wu(){return Wu=(0,d.Z)(function*(x){const y=yield function $i(x){return nr=nr||function gc(x){return new Promise((y,v)=>{var D,R,U;function ie(){Gu(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{Gu(),v(Re(x,"network-request-failed"))},timeout:wi.get()})}if(null!==(R=null===(D=Ui().gapi)||void 0===D?void 0:D.iframes)&&void 0!==R&&R.Iframe)y(gapi.iframes.getContext());else{if(null===(U=Ui().gapi)||void 0===U||!U.load){const we=mo("iframefcb");return Ui()[we]=()=>{gapi.load?ie():v(Re(x,"network-request-failed"))},mi(`https://apis.google.com/js/api.js?onload=${we}`).catch(nt=>v(nt))}ie()}}).catch(y=>{throw nr=null,y})}(x),nr}(x),v=Ui().gapi;return oe(v,x,"internal-error"),y.open({where:document.body,url:ry(x),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ua,dontclear:!0},D=>new Promise(function(){var R=(0,d.Z)(function*(U,ie){yield D.restyle({setHideOnLeave:!1});const we=Re(x,"network-request-failed"),nt=Ui().setTimeout(()=>{ie(we)},Fa.get());function _t(){Ui().clearTimeout(nt),U(D)}D.ping(_t).then(_t,()=>{ie(we)})});return function(U,ie){return R.apply(this,arguments)}}()))}),Wu.apply(this,arguments)}const C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class se{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const lt="__/auth/handler",Ot="emulator/auth/handler",tn=encodeURIComponent("fac");function qt(x,y,v,D,R,U){return wr.apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(x,y,v,D,R,U){oe(x.config.authDomain,x,"auth-domain-config-required"),oe(x.config.apiKey,x,"invalid-api-key");const ie={apiKey:x.config.apiKey,appName:x.name,authType:v,redirectUrl:D,v:L.SDK_VERSION,eventId:R};if(y instanceof ms){y.setDefaultLanguage(x.languageCode),ie.providerId=y.providerId||"",(0,q.xb)(y.getCustomParameters())||(ie.customParameters=JSON.stringify(y.getCustomParameters()));for(const[Ut,Mn]of Object.entries(U||{}))ie[Ut]=Mn}if(y instanceof Ta){const Ut=y.getScopes().filter(Mn=>""!==Mn);Ut.length>0&&(ie.scopes=Ut.join(","))}x.tenantId&&(ie.tid=x.tenantId);const we=ie;for(const Ut of Object.keys(we))void 0===we[Ut]&&delete we[Ut];const nt=yield x._getAppCheckToken(),_t=nt?`#${tn}=${encodeURIComponent(nt)}`:"";return`${function dr({config:x}){return x.emulator?Le(x,Ot):`https://${x.authDomain}/${lt}`}(x)}?${(0,q.xO)(we).slice(1)}${_t}`})).apply(this,arguments)}const Cs="webStorageSupport",Vs=class Ba{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lr,this._completeRedirectFn=vi,this._overrideRedirectResult=br}_openPopup(y,v,D,R){var U=this;return(0,d.Z)(function*(){var ie;Xe(null===(ie=U.eventManagers[y._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const we=yield qt(y,v,D,mn(),R);return function Ie(x,y,v,D=500,R=600){const U=Math.max((window.screen.availHeight-R)/2,0).toString(),ie=Math.max((window.screen.availWidth-D)/2,0).toString();let we="";const nt=Object.assign(Object.assign({},C),{width:D.toString(),height:R.toString(),top:U,left:ie}),_t=(0,q.z$)().toLowerCase();v&&(we=F(_t)?"_blank":v),V(_t)&&(y=y||"http://localhost",nt.scrollbars="yes");const Ut=Object.entries(nt).reduce((ao,[fa,Pf])=>`${ao}${fa}=${Pf},`,"");if(function $t(x=(0,q.z$)()){var y;return Pt(x)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(_t)&&"_self"!==we)return function ft(x,y){const v=document.createElement("a");v.href=x,v.target=y;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(D)}(y||"",we),new se(null);const Mn=window.open(y||"",we,Ut);oe(Mn,x,"popup-blocked");try{Mn.focus()}catch{}return new se(Mn)}(y,we,qr())})()}_openRedirect(y,v,D,R){var U=this;return(0,d.Z)(function*(){return yield U._originValidation(y),function Ou(x){Ui().location.href=x}(yield qt(y,v,D,mn(),R)),new Promise(()=>{})})()}_initialize(y){const v=y._key();if(this.eventManagers[v]){const{manager:R,promise:U}=this.eventManagers[v];return R?Promise.resolve(R):(Xe(U,"If manager is not set, promise should be"),U)}const D=this.initAndGetManager(y);return this.eventManagers[v]={promise:D},D.catch(()=>{delete this.eventManagers[v]}),D}initAndGetManager(y){var v=this;return(0,d.Z)(function*(){const D=yield function Np(x){return Wu.apply(this,arguments)}(y),R=new gd(y);return D.register("authEvent",U=>(oe(U?.authEvent,y,"invalid-auth-event"),{status:R.onEvent(U.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[y._key()]={manager:R},v.iframes[y._key()]=D,R})()}_isIframeWebStorageSupported(y,v){this.iframes[y._key()].send(Cs,{type:Cs},R=>{var U;const ie=null===(U=R?.[0])||void 0===U?void 0:U[Cs];void 0!==ie&&v(!!ie),ce(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const v=y._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function yd(x){return $u.apply(this,arguments)}(y)),this.originValidationPromises[v]}get _shouldInitProactively(){return Jt()||$()||Pt()}};class vo{constructor(y){this.factorId=y}_process(y,v,D){switch(v.type){case"enroll":return this._finalizeEnroll(y,v.credential,D);case"signin":return this._finalizeSignIn(y,v.credential);default:return ht("unexpected MultiFactorSessionType")}}}class bo extends vo{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new bo(y)}_finalizeEnroll(y,v,D){return function _f(x,y){return bt(x,"POST","/v2/accounts/mfaEnrollment:finalize",dt(x,y))}(y,{idToken:v,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,v){return function Cf(x,y){return bt(x,"POST","/v2/accounts/mfaSignIn:finalize",dt(x,y))}(y,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let bd=(()=>{class x{constructor(){}static assertion(v){return bo._fromCredential(v)}}return x.FACTOR_ID="phone",x})();var _c="@firebase/auth";class p0{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var v=this;return(0,d.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const v=this.auth.onIdTokenChanged(D=>{y(D?.stsTokenManager.accessToken||null)});this.internalListeners.set(y,v),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const v=this.internalListeners.get(y);v&&(this.internalListeners.delete(y),v(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,q.Pz)("authIdTokenMaxAge"),function kf(x){(0,L._registerComponent)(new pe.wA("auth",(y,{options:v})=>{const D=y.getProvider("app").getImmediate(),R=y.getProvider("heartbeat"),U=y.getProvider("app-check-internal"),{apiKey:ie,authDomain:we}=D.options;oe(ie&&!ie.includes(":"),"invalid-api-key",{appName:D.name});const nt={apiKey:ie,authDomain:we,clientPlatform:x,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xi(x)},_t=new Po(D,R,U,nt);return function Xl(x,y){const v=y?.persistence||[],D=(Array.isArray(v)?v:[v]).map(Di);y?.errorMap&&x._updateErrorMap(y.errorMap),x._initializeWithPersistence(D,y?.popupRedirectResolver)}(_t,v),_t},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,v,D)=>{y.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new pe.wA("auth-internal",y=>{const v=pi(y.getProvider("auth").getImmediate());return new p0(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(_c,"0.23.2",function Fp(x){switch(x){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(x)),(0,L.registerVersion)(_c,"0.23.2","esm2017")}("Browser")},9058:(Tt,Pe,z)=>{"use strict";z.d(Pe,{$s:()=>Di,BH:()=>fe,DV:()=>or,Dv:()=>no,G6:()=>Le,GJ:()=>Zn,L:()=>xe,LL:()=>$n,P0:()=>Ct,Pz:()=>Re,Sg:()=>Ee,UG:()=>ht,UI:()=>Yi,US:()=>pe,Wj:()=>Kt,Wl:()=>wn,Yr:()=>Se,ZB:()=>ue,ZR:()=>bt,aH:()=>ce,b$:()=>Oi,cI:()=>Gt,dS:()=>io,eu:()=>tt,g5:()=>L,gK:()=>Sn,gQ:()=>Lt,h$:()=>Ue,hl:()=>qe,hu:()=>q,jU:()=>Xe,lb:()=>ri,m9:()=>_n,ne:()=>gn,p$:()=>J,pd:()=>At,r3:()=>Gn,ru:()=>mn,tV:()=>K,uI:()=>oe,ug:()=>ko,vZ:()=>Zi,w1:()=>Ko,w9:()=>ii,xO:()=>Ei,xb:()=>gr,z$:()=>$e,zI:()=>Je,zd:()=>ut});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},q=function(X,Z){if(!X)throw L(Z)},L=function(X){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+X)},ae=function(X){const Z=[];let V=0;for(let $=0;$<X.length;$++){let F=X.charCodeAt($);F<128?Z[V++]=F:F<2048?(Z[V++]=F>>6|192,Z[V++]=63&F|128):55296==(64512&F)&&$+1<X.length&&56320==(64512&X.charCodeAt($+1))?(F=65536+((1023&F)<<10)+(1023&X.charCodeAt(++$)),Z[V++]=F>>18|240,Z[V++]=F>>12&63|128,Z[V++]=F>>6&63|128,Z[V++]=63&F|128):(Z[V++]=F>>12|224,Z[V++]=F>>6&63|128,Z[V++]=63&F|128)}return Z},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,Z){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let F=0;F<X.length;F+=3){const re=X[F],Te=F+1<X.length,rt=Te?X[F+1]:0,Nt=F+2<X.length,Pt=Nt?X[F+2]:0;let Fn=(15&rt)<<2|Pt>>6,Jt=63&Pt;Nt||(Jt=64,Te||(Fn=64)),$.push(V[re>>2],V[(3&re)<<4|rt>>4],V[Fn],V[Jt])}return $.join("")},encodeString(X,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(X):this.encodeByteArray(ae(X),Z)},decodeString(X,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(X):function(X){const Z=[];let V=0,$=0;for(;V<X.length;){const F=X[V++];if(F<128)Z[$++]=String.fromCharCode(F);else if(F>191&&F<224){const re=X[V++];Z[$++]=String.fromCharCode((31&F)<<6|63&re)}else if(F>239&&F<365){const Nt=((7&F)<<18|(63&X[V++])<<12|(63&X[V++])<<6|63&X[V++])-65536;Z[$++]=String.fromCharCode(55296+(Nt>>10)),Z[$++]=String.fromCharCode(56320+(1023&Nt))}else{const re=X[V++],Te=X[V++];Z[$++]=String.fromCharCode((15&F)<<12|(63&re)<<6|63&Te)}}return Z.join("")}(this.decodeStringToByteArray(X,Z))},decodeStringToByteArray(X,Z){this.init_();const V=Z?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let F=0;F<X.length;){const re=V[X.charAt(F++)],rt=F<X.length?V[X.charAt(F)]:0;++F;const Pt=F<X.length?V[X.charAt(F)]:64;++F;const $t=F<X.length?V[X.charAt(F)]:64;if(++F,null==re||null==rt||null==Pt||null==$t)throw new Me;$.push(re<<2|rt>>4),64!==Pt&&($.push(rt<<4&240|Pt>>2),64!==$t&&$.push(Pt<<6&192|$t))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}};class Me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ue=function(X){const Z=ae(X);return pe.encodeByteArray(Z,!0)},xe=function(X){return Ue(X).replace(/\./g,"")},K=function(X){try{return pe.decodeString(X,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function J(X){return ue(void 0,X)}function ue(X,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return Z}for(const V in Z)!Z.hasOwnProperty(V)||!Ge(V)||(X[V]=ue(X[V],Z[V]));return X}function Ge(X){return"__proto__"!==X}const Ye=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const X=process.env.__FIREBASE_DEFAULTS__;return X?JSON.parse(X):void 0})()||(()=>{if(typeof document>"u")return;let X;try{X=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Z=X&&K(X[1]);return Z&&JSON.parse(Z)})()}catch(X){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${X}`)}},Ct=X=>{const Z=(X=>{var Z,V;return null===(V=null===(Z=Ye())||void 0===Z?void 0:Z.emulatorHosts)||void 0===V?void 0:V[X]})(X);if(!Z)return;const V=Z.lastIndexOf(":");if(V<=0||V+1===Z.length)throw new Error(`Invalid host ${Z} with no separate hostname and port!`);const $=parseInt(Z.substring(V+1),10);return"["===Z[0]?[Z.substring(1,V-1),$]:[Z.substring(0,V),$]},ce=()=>{var X;return null===(X=Ye())||void 0===X?void 0:X.config},Re=X=>{var Z;return null===(Z=Ye())||void 0===Z?void 0:Z[`_${X}`]};class fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,V)=>{this.resolve=Z,this.reject=V})}wrapCallback(Z){return(V,$)=>{V?this.reject(V):this.resolve($),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(V):Z(V,$))}}}function Ee(X,Z){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=Z||"demo-project",F=X.iat||0,re=X.sub||X.user_id;if(!re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Te=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:F,exp:F+3600,auth_time:F,sub:re,user_id:re,firebase:{sign_in_provider:"custom",identities:{}}},X);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(Te)),""].join(".")}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function ht(){var X;const Z=null===(X=Ye())||void 0===X?void 0:X.forceEnvironment;if("node"===Z)return!0;if("browser"===Z)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return"object"==typeof self&&self.self===self}function mn(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function Oi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ko(){const X=$e();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function Se(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function Le(){return!ht()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){try{return"object"==typeof indexedDB}catch{return!1}}function tt(){return new Promise((X,Z)=>{try{let V=!0;const $="validate-browser-context-for-indexeddb-analytics-module",F=self.indexedDB.open($);F.onsuccess=()=>{F.result.close(),V||self.indexedDB.deleteDatabase($),X(!0)},F.onupgradeneeded=()=>{V=!1},F.onerror=()=>{var re;Z((null===(re=F.error)||void 0===re?void 0:re.message)||"")}}catch(V){Z(V)}})}function Je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class bt extends Error{constructor(Z,V,$){super(V),this.code=Z,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$n.prototype.create)}}class $n{constructor(Z,V,$){this.service=Z,this.serviceName=V,this.errors=$}create(Z,...V){const $=V[0]||{},F=`${this.service}/${Z}`,re=this.errors[Z],Te=re?function pt(X,Z){return X.replace(Rt,(V,$)=>{const F=Z[$];return null!=F?String(F):`<${$}?>`})}(re,$):"Error";return new bt(F,`${this.serviceName}: ${Te} (${F}).`,$)}}const Rt=/\{\$([^}]+)}/g;function Gt(X){return JSON.parse(X)}function wn(X){return JSON.stringify(X)}const ln=function(X){let Z={},V={},$={},F="";try{const re=X.split(".");Z=Gt(K(re[0])||""),V=Gt(K(re[1])||""),F=re[2],$=V.d||{},delete V.d}catch{}return{header:Z,claims:V,data:$,signature:F}},ii=function(X){const V=ln(X).claims;return!!V&&"object"==typeof V&&V.hasOwnProperty("iat")},Zn=function(X){const Z=ln(X).claims;return"object"==typeof Z&&!0===Z.admin};function Gn(X,Z){return Object.prototype.hasOwnProperty.call(X,Z)}function or(X,Z){if(Object.prototype.hasOwnProperty.call(X,Z))return X[Z]}function gr(X){for(const Z in X)if(Object.prototype.hasOwnProperty.call(X,Z))return!1;return!0}function Yi(X,Z,V){const $={};for(const F in X)Object.prototype.hasOwnProperty.call(X,F)&&($[F]=Z.call(V,X[F],F,X));return $}function Zi(X,Z){if(X===Z)return!0;const V=Object.keys(X),$=Object.keys(Z);for(const F of V){if(!$.includes(F))return!1;const re=X[F],Te=Z[F];if(li(re)&&li(Te)){if(!Zi(re,Te))return!1}else if(re!==Te)return!1}for(const F of $)if(!V.includes(F))return!1;return!0}function li(X){return null!==X&&"object"==typeof X}function Ei(X){const Z=[];for(const[V,$]of Object.entries(X))Array.isArray($)?$.forEach(F=>{Z.push(encodeURIComponent(V)+"="+encodeURIComponent(F))}):Z.push(encodeURIComponent(V)+"="+encodeURIComponent($));return Z.length?"&"+Z.join("&"):""}function ut(X){const Z={};return X.replace(/^\?/,"").split("&").forEach($=>{if($){const[F,re]=$.split("=");Z[decodeURIComponent(F)]=decodeURIComponent(re)}}),Z}function At(X){const Z=X.indexOf("?");if(!Z)return"";const V=X.indexOf("#",Z);return X.substring(Z,V>0?V:void 0)}class Lt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,V){V||(V=0);const $=this.W_;if("string"==typeof Z)for(let $t=0;$t<16;$t++)$[$t]=Z.charCodeAt(V)<<24|Z.charCodeAt(V+1)<<16|Z.charCodeAt(V+2)<<8|Z.charCodeAt(V+3),V+=4;else for(let $t=0;$t<16;$t++)$[$t]=Z[V]<<24|Z[V+1]<<16|Z[V+2]<<8|Z[V+3],V+=4;for(let $t=16;$t<80;$t++){const Fn=$[$t-3]^$[$t-8]^$[$t-14]^$[$t-16];$[$t]=4294967295&(Fn<<1|Fn>>>31)}let Pt,Mt,F=this.chain_[0],re=this.chain_[1],Te=this.chain_[2],rt=this.chain_[3],Nt=this.chain_[4];for(let $t=0;$t<80;$t++){$t<40?$t<20?(Pt=rt^re&(Te^rt),Mt=1518500249):(Pt=re^Te^rt,Mt=1859775393):$t<60?(Pt=re&Te|rt&(re|Te),Mt=2400959708):(Pt=re^Te^rt,Mt=3395469782);const Fn=(F<<5|F>>>27)+Pt+Nt+Mt+$[$t]&4294967295;Nt=rt,rt=Te,Te=4294967295&(re<<30|re>>>2),re=F,F=Fn}this.chain_[0]=this.chain_[0]+F&4294967295,this.chain_[1]=this.chain_[1]+re&4294967295,this.chain_[2]=this.chain_[2]+Te&4294967295,this.chain_[3]=this.chain_[3]+rt&4294967295,this.chain_[4]=this.chain_[4]+Nt&4294967295}update(Z,V){if(null==Z)return;void 0===V&&(V=Z.length);const $=V-this.blockSize;let F=0;const re=this.buf_;let Te=this.inbuf_;for(;F<V;){if(0===Te)for(;F<=$;)this.compress_(Z,F),F+=this.blockSize;if("string"==typeof Z){for(;F<V;)if(re[Te]=Z.charCodeAt(F),++Te,++F,Te===this.blockSize){this.compress_(re),Te=0;break}}else for(;F<V;)if(re[Te]=Z[F],++Te,++F,Te===this.blockSize){this.compress_(re),Te=0;break}}this.inbuf_=Te,this.total_+=V}digest(){const Z=[];let V=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let F=this.blockSize-1;F>=56;F--)this.buf_[F]=255&V,V/=256;this.compress_(this.buf_);let $=0;for(let F=0;F<5;F++)for(let re=24;re>=0;re-=8)Z[$]=this.chain_[F]>>re&255,++$;return Z}}function gn(X,Z){const V=new Ni(X,Z);return V.subscribe.bind(V)}class Ni{constructor(Z,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{Z(this)}).catch($=>{this.error($)})}next(Z){this.forEachObserver(V=>{V.next(Z)})}error(Z){this.forEachObserver(V=>{V.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,V,$){let F;if(void 0===Z&&void 0===V&&void 0===$)throw new Error("Missing Observer.");F=function hn(X,Z){if("object"!=typeof X||null===X)return!1;for(const V of Z)if(V in X&&"function"==typeof X[V])return!0;return!1}(Z,["next","error","complete"])?Z:{next:Z,error:V,complete:$},void 0===F.next&&(F.next=fi),void 0===F.error&&(F.error=fi),void 0===F.complete&&(F.complete=fi);const re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?F.error(this.finalError):F.complete()}catch{}}),this.observers.push(F),re}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,Z)}sendOne(Z,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{V(this.observers[Z])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fi(){}const no=function(X,Z,V,$){let F;if($<Z?F="at least "+Z:$>V&&(F=0===V?"none":"no more than "+V),F)throw new Error(X+" failed: Was called with "+$+(1===$?" argument.":" arguments.")+" Expects "+F+".")};function Sn(X,Z){return`${X} failed: ${Z} argument `}function Kt(X,Z,V,$){if((!$||V)&&"function"!=typeof V)throw new Error(Sn(X,Z)+"must be a valid function.")}function ri(X,Z,V,$){if((!$||V)&&("object"!=typeof V||null===V))throw new Error(Sn(X,Z)+"must be a valid context object.")}const io=function(X){const Z=[];let V=0;for(let $=0;$<X.length;$++){let F=X.charCodeAt($);if(F>=55296&&F<=56319){const re=F-55296;$++,q($<X.length,"Surrogate pair missing trail surrogate."),F=65536+(re<<10)+(X.charCodeAt($)-56320)}F<128?Z[V++]=F:F<2048?(Z[V++]=F>>6|192,Z[V++]=63&F|128):F<65536?(Z[V++]=F>>12|224,Z[V++]=F>>6&63|128,Z[V++]=63&F|128):(Z[V++]=F>>18|240,Z[V++]=F>>12&63|128,Z[V++]=F>>6&63|128,Z[V++]=63&F|128)}return Z},ko=function(X){let Z=0;for(let V=0;V<X.length;V++){const $=X.charCodeAt(V);$<128?Z++:$<2048?Z+=2:$>=55296&&$<=56319?(Z+=4,V++):Z+=3}return Z},Kn=1e3,Wn=2,Ci=144e5,Qn=.5;function Di(X,Z=Kn,V=Wn){const $=Z*Math.pow(V,X),F=Math.round(Qn*$*(Math.random()-.5)*2);return Math.min(Ci,$+F)}function _n(X){return X&&X._delegate?X._delegate:X}},4081:(Tt,Pe,z)=>{"use strict";var d=z(5879);let q=null;function L(){return q}class le{}const pe=new d.OlP("DocumentToken");let Me=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(xe)},providedIn:"platform"}),i})();const Ue=new d.OlP("Location Initialized");let xe=(()=>{class i extends Me{constructor(){super(),this._doc=(0,d.f3M)(pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(e){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){this._history.pushState(e,r,o)}replaceState(e,r,o){this._history.replaceState(e,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return new i},providedIn:"platform"}),i})();function K(i,n){if(0==i.length)return n;if(0==n.length)return i;let e=0;return i.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?i+n.substring(1):1==e?i+n:i+"/"+n}function J(i){const n=i.match(/#|\?|$/),e=n&&n.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function ue(i){return i&&"?"!==i[0]?"?"+i:i}let Ge=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(ot)},providedIn:"root"}),i})();const Oe=new d.OlP("appBaseHref");let ot=(()=>{class i extends Ge{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return K(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+ue(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,s){const c=this.prepareExternalUrl(o+ue(s));this._platformLocation.pushState(e,r,c)}replaceState(e,r,o,s){const c=this.prepareExternalUrl(o+ue(s));this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Me),d.LFG(Oe,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ne=(()=>{class i extends Ge{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=K(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,s){let c=this.prepareExternalUrl(o+ue(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,r,c)}replaceState(e,r,o,s){let c=this.prepareExternalUrl(o+ue(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Me),d.LFG(Oe,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),st=(()=>{class i{constructor(e){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function ce(i){if(new RegExp("^(https?:)?//").test(i)){const[,e]=i.split(/\/\/[^\/]+/);return e}return i}(J(Ct(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+ue(r))}normalize(e){return i.stripTrailingSlash(function Et(i,n){if(!i||!n.startsWith(i))return n;const e=n.substring(i.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,Ct(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ue(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ue(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r,complete:o})}}return i.normalizeQueryParams=ue,i.joinWithSlash=K,i.stripTrailingSlash=J,i.\u0275fac=function(e){return new(e||i)(d.LFG(Ge))},i.\u0275prov=d.Yz7({token:i,factory:function(){return function Ye(){return new st((0,d.LFG)(Ge))}()},providedIn:"root"}),i})();function Ct(i){return i.replace(/\/index.html$/,"")}const Ro=/\s+/,Qo=[];let oi=(()=>{class i{constructor(e,r,o,s){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=o,this._renderer=s,this.initialClasses=Qo,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Ro):Qo}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Ro):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Ro).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class Xo{constructor(n,e,r,o){this.$implicit=n,this.ngForOf=e,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Po=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,o){this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((o,s,c)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Xo(o.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,c),pi(h,o)}});for(let o=0,s=r.length;o<s;o++){const h=r.get(o).context;h.index=o,h.count=s,h.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{pi(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,r){return!0}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function pi(i,n){i.context.$implicit=n.item}let ci=(()=>{class i{constructor(e,r){this._viewContainer=e,this._context=new Xl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ll("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ll("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class Xl{constructor(){this.$implicit=null,this.ngIf=null}}function ll(i,n){if(n&&!n.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,d.AaK)(n)}'.`)}class Xs{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let Jo=(()=>{class i{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const r of this._defaultViews)r.enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),Js=(()=>{class i{constructor(e,r,o){this.ngSwitch=o,o._addCase(),this._view=new Xs(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(Jo,9))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),fs=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:o,ngTemplateOutletContext:s,ngTemplateOutletInjector:c}=this;this._viewRef=r.createEmbeddedView(o,s,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[d.TTD]}),i})();class N{createSubscription(n,e){return(0,d.rg0)(()=>n.subscribe({next:e,error:r=>{throw r}}))}dispose(n){(0,d.rg0)(()=>n.unsubscribe())}}class H{createSubscription(n,e){return n.then(e,r=>{throw r})}dispose(n){}}const Q=new H,me=new N;let Ze=(()=>{class i{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if((0,d.QGY)(e))return Q;if((0,d.F4k)(e))return me;throw function rn(i,n){return new d.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.sBO,16))},i.\u0275pipe=d.Yjl({name:"async",type:i,pure:!1,standalone:!0}),i})(),oo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const ul="browser";function ts(i){return"server"===i}let Ta=(()=>{class i{}return i.\u0275prov=(0,d.Yz7)({token:i,providedIn:"root",factory:()=>new go((0,d.LFG)(pe),window)}),i})();class go{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function hl(i,n){const e=i.getElementById(n)||i.getElementsByName(n)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&"function"==typeof i.body.attachShadow){const r=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const s=o.shadowRoot;if(s){const c=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],o-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=Sa(this.window.history)||Sa(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Sa(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class gl extends le{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Vr extends gl{static makeCurrent(){!function ae(i){q||(q=i)}(new Vr)}onAndCancel(n,e,r){return n.addEventListener(e,r),()=>{n.removeEventListener(e,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function pf(){return _l=_l||document.querySelector("base"),_l?_l.getAttribute("href"):null}();return null==e?null:function No(i){oa=oa||document.createElement("a"),oa.setAttribute("href",i);const n=oa.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){_l=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function ar(i,n){n=encodeURIComponent(n);for(const e of i.split(";")){const r=e.indexOf("="),[o,s]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===n)return decodeURIComponent(s)}return null}(document.cookie,n)}}let oa,_l=null,gf=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const Su=new d.OlP("EventManagerPlugins");let gs=(()=>{class i{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o){return this._findPluginFor(r).addEventListener(e,r,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(s=>s.supports(e)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(e,r),r}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Su),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class Au{constructor(n){this._doc=n}}const Mu="ng-app-id";let Jc=(()=>{class i{constructor(e,r,o,s={}){this.doc=e,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ts(s),this.resetHostNodes()}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.elements?.forEach(o=>o.remove()),r.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${Mu}="${this.appId}"]`);if(e?.length){const r=new Map;return e.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(e,r){const o=this.styleRef;if(o.has(e)){const s=o.get(e);return s.usage+=r,s.usage}return o.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){const o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===e)return o.delete(r),s.removeAttribute(Mu),s;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Mu,this.appId),c}}addStyleToHost(e,r){const o=this.getStyleElement(e,r);e.appendChild(o);const s=this.styleRef,c=s.get(r)?.elements;c?c.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(pe),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const yl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fo=/%COMP%/g,X_=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function oc(i,n){return n.map(e=>e.replace(Fo,i))}let Lo=(()=>{class i{constructor(e,r,o,s,c,h,p,_=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=s,this.doc=c,this.platformId=h,this.ngZone=p,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=ts(h),this.defaultRenderer=new td(e,c,p,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const o=this.getOrCreateRenderer(e,r);return o instanceof Cn?o.applyToHost(e):o instanceof Ve&&o.applyStyles(),o}getOrCreateRenderer(e,r){const o=this.rendererByCompId;let s=o.get(r.id);if(!s){const c=this.doc,h=this.ngZone,p=this.eventManager,_=this.sharedStylesHost,w=this.removeStylesOnCompDestory,I=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:s=new Cn(p,_,r,this.appId,w,c,h,I);break;case d.ifc.ShadowDom:return new Sp(p,_,e,r,c,h,this.nonce,I);default:s=new Ve(p,_,r,w,c,h,I)}s.onDestroy=()=>o.delete(r.id),o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(gs),d.LFG(Jc),d.LFG(d.AFp),d.LFG(X_),d.LFG(pe),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class td{constructor(n,e,r,o){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(yl[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(yf(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(yf(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new d.vHH(5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,o){if(o){e=o+":"+e;const s=yl[o];s?n.setAttributeNS(s,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){const o=yl[r];o?n.removeAttributeNS(o,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,o){o&(d.JOm.DashCase|d.JOm.Important)?n.style.setProperty(e,r,o&d.JOm.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&d.JOm.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n[e]=r}setValue(n,e){n.nodeValue=e}listen(n,e,r){if("string"==typeof n&&!(n=L().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(r))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function yf(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Sp extends td{constructor(n,e,r,o,s,c,h,p){super(n,s,c,p),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=oc(o.id,o.styles);for(const w of _){const I=document.createElement("style");h&&I.setAttribute("nonce",h),I.textContent=w,this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ve extends td{constructor(n,e,r,o,s,c,h,p){super(n,s,c,h),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=p?oc(p,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Cn extends Ve{constructor(n,e,r,o,s,c,h,p){const _=o+"-"+r.id;super(n,e,r,s,c,h,p,_),this.contentAttr=function Ru(i){return"_ngcontent-%COMP%".replace(Fo,i)}(_),this.hostAttr=function Ip(i){return"_nghost-%COMP%".replace(Fo,i)}(_)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}}let Pu=(()=>{class i extends Au{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o){return e.addEventListener(r,o,!1),()=>this.removeEventListener(e,r,o)}removeEventListener(e,r,o){return e.removeEventListener(r,o)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(pe))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const nd=["alt","control","meta","shift"],lr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ap={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let id=(()=>{class i extends Au{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,r,o){const s=i.parseEventName(r),c=i.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const r=e.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const s=i._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),nd.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),c+=_+".")}),c+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=o,p.fullKey=c,p}static matchEventFullKeyCode(e,r){let o=lr[e.key]||e.key,s="";return r.indexOf("code.")>-1&&(o=e.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),nd.forEach(c=>{c!==o&&(0,Ap[c])(e)&&(s+=c+".")}),s+=o,s===r)}static eventCallback(e,r,o){return s=>{i.matchEventFullKeyCode(s,e)&&o.runGuarded(()=>r(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(pe))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const rd=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:ul},{provide:d.g9A,useValue:function vf(){Vr.makeCurrent()},multi:!0},{provide:pe,useFactory:function Mr(){return(0,d.RDi)(document),document},deps:[]}]),yi=new d.OlP(""),ys=[{provide:d.rWj,useClass:class Dp{addToWindow(n){d.dqk.getAngularTestability=(r,o=!0)=>{const s=n.findTestabilityInTree(r,o);if(null==s)throw new d.vHH(5103,!1);return s},d.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let s=o.length,c=!1;const h=function(p){c=c||p,s--,0==s&&r(c)};o.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(n,e,r){return null==e?null:n.getTestability(e)??(r?L().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],cr=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function bf(){return new d.qLn},deps:[]},{provide:Su,useClass:Pu,multi:!0,deps:[pe,d.R0b,d.Lbi]},{provide:Su,useClass:id,multi:!0,deps:[pe]},Lo,Jc,gs,{provide:d.FYo,useExisting:Lo},{provide:class Lr{},useClass:gf,deps:[]},[]];let od=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:d.AFp,useValue:e.appId}]}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(yi,12))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[...cr,...ys],imports:[oo,d.hGG]}),i})(),ad=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(pe))},i.\u0275prov=d.Yz7({token:i,factory:function(e){let r=null;return r=e?new e:function lc(){return new ad((0,d.LFG)(pe))}(),r},providedIn:"root"}),i})();typeof window<"u"&&window;const kp={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},vr=new d.OlP("HammerGestureConfig"),vs=new d.OlP("HammerLoader");let ei=(()=>{class i{constructor(){this.events=[],this.overrides={}}buildHammer(e){const r=new Hammer(e,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(const o in this.overrides)r.get(o).set(this.overrides[o]);return r}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),dd=(()=>{class i extends Au{constructor(e,r,o,s){super(e),this._config=r,this.console=o,this.loader=s,this._loaderPromise=null}supports(e){return!(!kp.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader)}addEventListener(e,r,o){const s=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||s.runOutsideAngular(()=>this.loader());let c=!1,h=()=>{c=!0};return s.runOutsideAngular(()=>this._loaderPromise.then(()=>{window.Hammer?c||(h=this.addEventListener(e,r,o)):h=()=>{}}).catch(()=>{h=()=>{}})),()=>{h()}}return s.runOutsideAngular(()=>{const c=this._config.buildHammer(e),h=function(p){s.runGuarded(function(){o(p)})};return c.on(r,h),()=>{c.off(r,h),"function"==typeof c.destroy&&c.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(pe),d.LFG(vr),d.LFG(d.c2e),d.LFG(vs,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),Df=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[{provide:Su,useClass:dd,multi:!0,deps:[pe,vr,d.c2e,[new d.FiY,vs]]},{provide:vr,useClass:ei,deps:[]}]}),i})(),bl=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(e){let r=null;return r=e?new(e||i):d.LFG(Lu),r},providedIn:"root"}),i})(),Lu=(()=>{class i extends bl{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new d.vHH(5200,!1);case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new d.vHH(5201,!1);default:throw new d.vHH(5202,!1)}}bypassSecurityTrustHtml(e){return(0,d.JVY)(e)}bypassSecurityTrustStyle(e){return(0,d.L6k)(e)}bypassSecurityTrustScript(e){return(0,d.eBb)(e)}bypassSecurityTrustUrl(e){return(0,d.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,d.pB0)(e)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(pe))},i.\u0275prov=d.Yz7({token:i,factory:function(e){let r=null;return r=e?new e:function Fu(i){return new Lu(i.get(pe))}(d.LFG(d.zs3)),r},providedIn:"root"}),i})();z(7271);var bs=z(3182),sn=z(8186);class yo{constructor(n){return n}}class la{constructor(){return(0,bs.C6)()}}const Bs=new d.OlP("angularfire2._apps"),Hu={provide:yo,useFactory:function fd(i){return i&&1===i.length?i[0]:new yo((0,bs.Mq)())},deps:[[new d.FiY,Bs]]},Rp={provide:la,deps:[[new d.FiY,Bs]]};function uc(i){return(n,e)=>{const r=n.runOutsideAngular(()=>i(e));return new yo(r)}}let ey=(()=>{class i{constructor(e){(0,bs.KN)("angularfire",sn.q4.full,"core"),(0,bs.KN)("angularfire",sn.q4.full,"app"),(0,bs.KN)("angular",d.q4F.full,e.toString())}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.Lbi))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[Hu,Rp]}),i})();function ca(i,...n){return{ngModule:ey,providers:[{provide:Bs,useFactory:uc(i),multi:!0,deps:[d.R0b,d.zs3,sn.HU,...n]}]}}const hc=(0,sn.u3)(bs.ZF,!0);var Vn=z(6304),dn=z(8645),It=z(2096),Nn=z(5592),Hn=z(2459),rs=z(3019),da=z(3093),ji=z(4664),gt=z(7398),Sf=z(4552);class ny extends dn.x{constructor(n=1/0,e=1/0,r=Sf.l){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:s,_windowTime:c}=this;e||(r.push(n),!o&&r.push(s.now()+c)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:o}=this,s=o.slice();for(let c=0;c<s.length&&!n.closed;c+=r?1:2)n.next(s[c]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:o}=this,s=(o?1:2)*n;if(n<1/0&&s<r.length&&r.splice(0,r.length-s),!o){const c=e.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var ua=z(3020);function mc(i,n,e){let r,o=!1;return i&&"object"==typeof i?({bufferSize:r=1/0,windowTime:n=1/0,refCount:o=!1,scheduler:e}=i):r=i??1/0,(0,ua.B)({connector:()=>new ny(r,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const md=(0,z(2306).d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});var br=z(9360),di=z(8251);function Pn(i,n){return(0,br.e)((e,r)=>{let o=0;e.subscribe((0,di.x)(r,s=>i.call(n,s,o++)&&r.next(s)))})}var os=z(6232);function Hr(i){return i<=0?()=>os.E:(0,br.e)((n,e)=>{let r=0;n.subscribe((0,di.x)(e,o=>{++r<=i&&(e.next(o),i<=r&&e.complete())}))})}function Oa(i){return(0,br.e)((n,e)=>{let r=!1;n.subscribe((0,di.x)(e,o=>{r=!0,e.next(o)},()=>{r||e.next(i),e.complete()}))})}function Na(i=Op){return(0,br.e)((n,e)=>{let r=!1;n.subscribe((0,di.x)(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(i())))})}function Op(){return new md}var ha=z(2737);function ws(i,n){const e=arguments.length>=2;return r=>r.pipe(i?Pn((o,s)=>i(o,s,r)):ha.y,Hr(1),e?Oa(n):Na(()=>new md))}var Bo=z(4674);function pd(i,n){return(0,Bo.m)(n)?(0,ji.w)(()=>i,n):(0,ji.w)(()=>i)}var pc=z(5137),De=z(5861),vi=z(534),tr=z(4537),j=z(9058),Yr=z(7879);const xs=new Map,gd={activated:!1,tokenObservers:[]},_d={initialized:!1,enabled:!1};function bi(i){return xs.get(i)||Object.assign({},gd)}function wl(){return _d}const xl="https://content-firebaseappcheck.googleapis.com/v1",yd="exchangeDebugToken",$u={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class wi{constructor(n,e,r,o,s){if(this.operation=n,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=o,o>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(n){var e=this;return(0,De.Z)(function*(){e.stop();try{e.pending=new j.BH,yield function Gu(i){return new Promise(n=>{setTimeout(n,i)})}(e.getNextRun(n)),e.pending.resolve(),yield e.pending.promise,e.pending=new j.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(n){if(n)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const nr=new j.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Fa(i){if(!bi(i).activated)throw nr.create("use-before-activation",{appName:i.name})}function Ua(i,n){return vd.apply(this,arguments)}function vd(){return(vd=(0,De.Z)(function*({url:i,body:n},e){const r={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){const I=yield o.getHeartbeatsHeader();I&&(r["X-Firebase-Client"]=I)}const s={method:"POST",body:JSON.stringify(n),headers:r};let c,h;try{c=yield fetch(i,s)}catch(I){throw nr.create("fetch-network-error",{originalErrorMessage:I?.message})}if(200!==c.status)throw nr.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(I){throw nr.create("fetch-parse-error",{originalErrorMessage:I?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw nr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const _=1e3*Number(p[1]),w=Date.now();return{token:h.token,expireTimeMillis:w+_,issuedAtTimeMillis:w}})).apply(this,arguments)}function Wu(i,n){const{projectId:e,appId:r,apiKey:o}=i.options;return{url:`${xl}/projects/${e}/apps/${r}:${yd}?key=${o}`,body:{debug_token:n}}}const C="firebase-app-check-database",S=1,k="firebase-app-check-store";let te=null;function qt(){return(qt=(0,De.Z)(function*(i,n){const r=(yield function se(){return te||(te=new Promise((i,n)=>{try{const e=indexedDB.open(C,S);e.onsuccess=r=>{i(r.target.result)},e.onerror=r=>{var o;n(nr.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},e.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(k,{keyPath:"compositeKey"})}}catch(e){n(nr.create("storage-open",{originalErrorMessage:e?.message}))}}),te)}()).transaction(k,"readwrite"),s=r.objectStore(k).put({compositeKey:i,value:n});return new Promise((c,h)=>{s.onsuccess=p=>{c()},r.onerror=p=>{var _;h(nr.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const Ba=new Yr.Yd("@firebase/app-check");function bo(i,n){return(0,j.hl)()?function ft(i,n){return function tn(i,n){return qt.apply(this,arguments)}(function Cs(i){return`${i.options.appId}-${i.name}`}(i),n)}(i,n).catch(e=>{Ba.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function wd(){return wl().enabled}function Mf(){return xd.apply(this,arguments)}function xd(){return(xd=(0,De.Z)(function*(){const i=wl();if(i.enabled&&i.token)return i.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ed={error:"UNKNOWN_ERROR"};function p0(i){return j.US.encodeString(JSON.stringify(i),!1)}function Fp(i){return kf.apply(this,arguments)}function kf(){return(kf=(0,De.Z)(function*(i,n=!1){const e=i.app;Fa(e);const r=bi(e);let s,o=r.token;if(o&&!v(o)&&(r.token=void 0,o=void 0),!o){const p=yield r.cachedTokenPromise;p&&(v(p)?o=p:yield bo(e,void 0))}if(!n&&o&&v(o))return{token:o.token};let h,c=!1;if(wd()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ua(Wu(e,yield Mf()),i.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const p=yield r.exchangeTokenPromise;return yield bo(e,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),o=yield bi(e).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Ba.warn(p.message):Ba.error(p),s=p}return o?s?h=v(o)?{token:o.token,internalError:s}:D(s):(h={token:o.token},r.token=o,yield bo(e,o)):h=D(s),c&&function y(i,n){const e=bi(i).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=n.error?r.error(n.error):r.next(n)}catch{}}(e,h),h})).apply(this,arguments)}function oy(i){return sy.apply(this,arguments)}function sy(){return(sy=(0,De.Z)(function*(i){const n=i.app;Fa(n);const{provider:e}=bi(n);if(wd()){const r=yield Mf(),{token:o}=yield Ua(Wu(n,r),i.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield e.getToken();return{token:r}}})).apply(this,arguments)}function Lp(i,n){const e=bi(i),r=e.tokenObservers.filter(o=>o.next!==n);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=r}function g0(i){const{app:n}=i,e=bi(n);let r=e.tokenRefresher;r||(r=function x(i){const{app:n}=i;return new wi((0,De.Z)(function*(){let r;if(r=bi(n).token?yield Fp(i,!0):yield Fp(i),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const e=bi(n);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},$u.RETRIAL_MIN_WAIT,$u.RETRIAL_MAX_WAIT)}(i),e.tokenRefresher=r),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function v(i){return i.expireTimeMillis-Date.now()>0}function D(i){return{token:p0(Ed),error:i}}class R{constructor(n,e){this.app=n,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:n}=bi(this.app);for(const e of n)Lp(this.app,e.next);return Promise.resolve()}}const b0="app-check-internal";!function w0(){(0,vi._registerComponent)(new tr.wA("app-check",i=>function U(i,n){return new R(i,n)}(i.getProvider("app").getImmediate(),i.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,n,e)=>{i.getProvider(b0).initialize()})),(0,vi._registerComponent)(new tr.wA(b0,i=>function ie(i){return{getToken:n=>Fp(i,n),getLimitedUseToken:()=>oy(i),addTokenListener:n=>function Rf(i,n,e,r){const{app:o}=i,s=bi(o);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:r,type:n}],s.token&&v(s.token)){const h=s.token;Promise.resolve().then(()=>{e({token:h.token}),g0(i)}).catch(()=>{})}s.cachedTokenPromise.then(()=>g0(i))}(i,"INTERNAL",n),removeTokenListener:n=>Lp(i.app,n)}}(i.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,vi.registerVersion)("@firebase/app-check","0.8.0")}();class Lf{constructor(){return(0,sn.vb)("app-check")}}typeof window<"u"&&window;var uy=z(7142);const D0=new d.OlP("angularfire2.auth.use-emulator"),I0=new d.OlP("angularfire2.auth.settings"),Bp=new d.OlP("angularfire2.auth.tenant-id"),Vp=new d.OlP("angularfire2.auth.langugage-code"),T0=new d.OlP("angularfire2.auth.use-device-language"),Ku=new d.OlP("angularfire.auth.persistence"),S0=(i,n,e,r,o,s,c,h)=>(0,Vn.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const p=n.runOutsideAngular(()=>i.auth());if(e&&p.useEmulator(...e),r&&(p.tenantId=r),p.languageCode=o,s&&p.useDeviceLanguage(),c)for(const[_,w]of Object.entries(c))p.settings[_]=w;return h&&p.setPersistence(h),p},[e,r,o,s,c,h]);let Hp=(()=>{class i{constructor(e,r,o,s,c,h,p,_,w,I,A,P){const B=new dn.x,Y=(0,It.of)(void 0).pipe((0,da.Q)(c.outsideAngular),(0,ji.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(z.bind(z,6365)))),(0,gt.U)(()=>(0,Vn.on)(e,s,r)),(0,gt.U)(ee=>S0(ee,s,h,_,w,I,p,A)),mc({bufferSize:1,refCount:!1}));if(ts(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,It.of)(null);else{Y.pipe(ws()).subscribe();const ve=Y.pipe((0,ji.w)(ke=>ke.getRedirectResult().then(ze=>ze,()=>null)),sn.iC,mc({bufferSize:1,refCount:!1})),Ae=Y.pipe((0,ji.w)(ke=>new Nn.y(ze=>({unsubscribe:s.runOutsideAngular(()=>ke.onAuthStateChanged(et=>ze.next(et),et=>ze.error(et),()=>ze.complete()))})))),_e=Y.pipe((0,ji.w)(ke=>new Nn.y(ze=>({unsubscribe:s.runOutsideAngular(()=>ke.onIdTokenChanged(et=>ze.next(et),et=>ze.error(et),()=>ze.complete()))}))));this.authState=ve.pipe(pd(Ae),(0,pc.R)(c.outsideAngular),(0,da.Q)(c.insideAngular)),this.user=ve.pipe(pd(_e),(0,pc.R)(c.outsideAngular),(0,da.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,ji.w)(ke=>ke?(0,Hn.D)(ke.getIdToken()):(0,It.of)(null))),this.idTokenResult=this.user.pipe((0,ji.w)(ke=>ke?(0,Hn.D)(ke.getIdTokenResult()):(0,It.of)(null))),this.credential=(0,rs.T)(ve,B,this.authState.pipe(Pn(ke=>!ke))).pipe((0,gt.U)(ke=>ke?.user?ke:null),(0,pc.R)(c.outsideAngular),(0,da.Q)(c.insideAngular))}return(0,Vn.pX)(this,Y,s,{spy:{apply:(ee,ve,Ae)=>{(ee.startsWith("signIn")||ee.startsWith("createUser"))&&Ae.then(_e=>B.next(_e))}}})}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Vn.Dh),d.LFG(Vn.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(sn.HU),d.LFG(D0,8),d.LFG(I0,8),d.LFG(Bp,8),d.LFG(Vp,8),d.LFG(T0,8),d.LFG(Ku,8),d.LFG(Lf,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),JC=(()=>{class i{constructor(){uy.Z.registerVersion("angularfire",sn.q4.full,"auth-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[Hp]}),i})();var Uf=z(6321);function Va(i,n){return(0,br.e)(function eD(i,n,e,r,o){return(s,c)=>{let h=e,p=n,_=0;s.subscribe((0,di.x)(c,w=>{const I=_++;p=h?i(p,w,I):(h=!0,w),r&&c.next(p)},o&&(()=>{h&&c.next(p),c.complete()})))}}(i,n,arguments.length>=2,!0))}var Dd=z(3997),vc=z(4829),zp=z(2420),bc=z(9940);z(6365);var A0=z(3106);const tD="@firebase/database";let hy="";function fy(i){hy=i}class iD{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,e){null==e?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,j.Wl)(e))}get(n){const e=this.domStorage_.getItem(this.prefixedName_(n));return null==e?null:(0,j.cI)(e)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class M0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,e){null==e?delete this.cache_[n]:this.cache_[n]=e}get(n){return(0,j.r3)(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const rD=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const n=window[i];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new iD(n)}}catch{}return new M0},Qu=rD("localStorage"),jp=rD("sessionStorage"),Xu=new Yr.Yd("@firebase/database"),Id=function(){let i=1;return function(){return i++}}(),k0=function(i){const n=(0,j.dS)(i),e=new j.gQ;e.update(n);const r=e.digest();return j.US.encodeByteArray(r)},Bf=function(...i){let n="";for(let e=0;e<i.length;e++){const r=i[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=Bf.apply(null,r):n+="object"==typeof r?(0,j.Wl)(r):r,n+=" "}return n};let Ju=null,Tk=!0;const $p=function(i,n){(0,j.hu)(!n||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(Xu.logLevel=Yr.in.VERBOSE,Ju=Xu.log.bind(Xu),n&&jp.set("logging_enabled",!0)):"function"==typeof i?Ju=i:(Ju=null,jp.remove("logging_enabled"))},lo=function(...i){if(!0===Tk&&(Tk=!1,null===Ju&&!0===jp.get("logging_enabled")&&$p(!0)),Ju){const n=Bf.apply(null,i);Ju(n)}},Vf=function(i){return function(...n){lo(i,...n)}},my=function(...i){const n="FIREBASE INTERNAL ERROR: "+Bf(...i);Xu.error(n)},Ha=function(...i){const n=`FIREBASE FATAL ERROR: ${Bf(...i)}`;throw Xu.error(n),new Error(n)},co=function(...i){const n="FIREBASE WARNING: "+Bf(...i);Xu.warn(n)},eh=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},wc="[MIN_NAME]",za="[MAX_NAME]",El=function(i,n){if(i===n)return 0;if(i===wc||n===za)return-1;if(n===wc||i===za)return 1;{const e=ih(i),r=ih(n);return null!==e?null!==r?e-r==0?i.length-n.length:e-r:-1:null!==r?1:i<n?-1:1}},sD=function(i,n){return i===n?0:i<n?-1:1},th=function(i,n){if(n&&i in n)return n[i];throw new Error("Missing required key ("+i+") in object: "+(0,j.Wl)(n))},nh=function(i){if("object"!=typeof i||null===i)return(0,j.Wl)(i);const n=[];for(const r in i)n.push(r);n.sort();let e="{";for(let r=0;r<n.length;r++)0!==r&&(e+=","),e+=(0,j.Wl)(n[r]),e+=":",e+=nh(i[n[r]]);return e+="}",e},aD=function(i,n){const e=i.length;if(e<=n)return[i];const r=[];for(let o=0;o<e;o+=n)r.push(i.substring(o,o+n>e?e:o+n));return r};function Zr(i,n){for(const e in i)i.hasOwnProperty(e)&&n(e,i[e])}const lD=function(i){(0,j.hu)(!eh(i),"Invalid JSON number");const r=1023;let o,s,c,h,p;0===i?(s=0,c=0,o=1/i==-1/0?1:0):(o=i<0,(i=Math.abs(i))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(i)/Math.LN2),r),s=h+r,c=Math.round(i*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(i/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(o?1:0),_.reverse();const w=_.join("");let I="";for(p=0;p<64;p+=8){let A=parseInt(w.substr(p,8),2).toString(16);1===A.length&&(A="0"+A),I+=A}return I.toLowerCase()},dD=new RegExp("^-?(0*)\\d{1,10}$"),ih=function(i){if(dD.test(i)){const n=Number(i);if(n>=-2147483648&&n<=2147483647)return n}return null},Hf=function(i){try{i()}catch(n){setTimeout(()=>{throw co("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},gy=function(i,n){const e=setTimeout(i,n);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class kk{constructor(n,e){this.appName_=n,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(r=>this.appCheck=r)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(e,r):e(null)},0)})}addTokenChangeListener(n){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(n))}notifyForInvalidToken(){co(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class P0{constructor(n,e,r){this.appName_=n,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(e=>e&&"auth/token-not-initialized"===e.code?(lo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(e,r):e(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(e=>e.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(e=>e.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',co(n)}}let Wp=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const F0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hD="websocket",fD="long_polling";class U0{constructor(n,e,r,o,s=!1,c="",h=!1,p=!1){this.secure=e,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qu.get("host:"+n)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Qu.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rh(i,n,e){let r;if((0,j.hu)("string"==typeof n,"typeof type must == string"),(0,j.hu)("object"==typeof e,"typeof params must == object"),n===hD)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(n!==fD)throw new Error("Unknown connection type: "+n);r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function xc(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(e.ns=i.namespace);const o=[];return Zr(e,(s,c)=>{o.push(s+"="+c)}),r+o.join("&")}class Rk{constructor(){this.counters_={}}incrementCounter(n,e=1){(0,j.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=e}get(){return(0,j.p$)(this.counters_)}}const B0={},V0={};function H0(i){const n=i.toString();return B0[n]||(B0[n]=new Rk),B0[n]}class Ok{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,e){this.closeAfterResponse=n,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,e){for(this.pendingResponses[n]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Hf(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class oh{constructor(n,e,r,o,s,c,h){this.connId=n,this.repoInfo=e,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vf(n),this.stats_=H0(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),rh(e,fD,p))}open(n,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ok(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,j.Yr)()||"complete"===document.readyState)i();else{let n=!1;const e=function(){document.body?n||(n=!0,i()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yy((...s)=>{const[c,h,p,_,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&F0.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){oh.forceAllow_=!0}static forceDisallow(){oh.forceDisallow_=!0}static isAvailable(){return!((0,j.Yr)()||!oh.forceAllow_&&(oh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const e=(0,j.Wl)(n);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,j.h$)(e),o=aD(r,1840);for(let s=0;s<o.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[s]),this.curSegmentNum++}addDisconnectPingFrame(n,e){if((0,j.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=n,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const e=(0,j.Wl)(n).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class yy{constructor(n,e,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,j.Yr)())this.commandCB=n,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Id(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=yy.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){lo("frame writing exception"),h.stack&&lo(h.stack),lo(h)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||lo("No IE domain setting required")}catch{const r=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,e){for(this.myID=n,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;let e=this.urlFn(n),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(n,e,r){this.pendingSegs.push({seg:n,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(n,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(n,()=>{clearTimeout(o),r()})}addTag(n,e){(0,j.Yr)()?this.doNodeLongPoll(n,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=n,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{lo("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let vy=null;typeof MozWebSocket<"u"?vy=MozWebSocket:typeof WebSocket<"u"&&(vy=WebSocket);let zf=(()=>{class i{constructor(e,r,o,s,c,h,p){this.connId=e,this.applicationId=o,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vf(this.connId),this.stats_=H0(r),this.connURL=i.connectionURL_(r,h,p,s,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,o,s,c){const h={v:"5"};return!(0,j.Yr)()&&typeof location<"u"&&location.hostname&&F0.test(location.hostname)&&(h.r="f"),r&&(h.s=r),o&&(h.ls=o),s&&(h.ac=s),c&&(h.p=c),rh(e,hD,h)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qu.set("previous_websocket_failure",!0);try{let o;if((0,j.Yr)()){o={headers:{"User-Agent":`Firebase/5/${hy}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(o.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(o.proxy={origin:h})}this.mySock=new vy(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const s=o.message||o.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const s=o.message||o.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&null!==vy&&!i.forceDisallow_}static previouslyFailed(){return Qu.isInMemoryStorage||!0===Qu.get("previous_websocket_failure")}markConnectionHealthy(){Qu.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,j.cI)(r);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,j.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const r=(0,j.Wl)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=aD(r,16384);o.length>1&&this.sendString_(String(o.length));for(let s=0;s<o.length;s++)this.sendString_(o[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),G0=(()=>{class i{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[oh,zf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=zf&&zf.isAvailable();let o=r&&!zf.previouslyFailed();if(e.webSocketOnly&&(r||co("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[zf];else{const s=this.transports_=[];for(const c of i.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return i.globalTransportInitialized_=!1,i})();class $k{constructor(n,e,r,o,s,c,h,p,_,w){this.id=n,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vf("c:"+this.id+":"),this.transportManager_=new G0(e),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const o=n.healthyTimeout||0;o>0&&(this.healthyTimeout_=gy(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return e=>{n===this.conn_?this.onConnectionLost_(e):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return e=>{2!==this.state_&&(n===this.rx_?this.onPrimaryMessageReceived_(e):n===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(n){this.sendData_({t:"d",d:n})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if("t"in n){const e=n.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const e=th("t",n),r=th("d",n);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const e=th("t",n),r=th("d",n);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const e=th("t",n);if("d"in n){const r=n.d;if("h"===e){const o=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?my("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):my("Unknown control packet command: "+e)}}onHandshake_(n){const e=n.ts,r=n.v,o=n.h;this.sessionId=n.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&co("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),gy(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,e){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gy(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Gk{put(n,e,r,o){}merge(n,e,r,o){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,e,r){}onDisconnectMerge(n,e,r){}onDisconnectCancel(n,e){}reportStats(n){}}class jf{constructor(n){this.allowedEvents_=n,this.listeners_={},(0,j.hu)(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...e){if(Array.isArray(this.listeners_[n])){const r=[...this.listeners_[n]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)}}on(n,e,r){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:e,context:r});const o=this.getInitialEvent(n);o&&e.apply(r,o)}off(n,e,r){this.validateEventType_(n);const o=this.listeners_[n]||[];for(let s=0;s<o.length;s++)if(o[s].callback===e&&(!r||r===o[s].context))return void o.splice(s,1)}validateEventType_(n){(0,j.hu)(this.allowedEvents_.find(e=>e===n),"Unknown event: "+n)}}class Ln extends jf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,j.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ln}getInitialEvent(n){return(0,j.hu)("online"===n,"Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}class ti{constructor(n,e){if(void 0===e){this.pieces_=n.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=e}toString(){let n="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(n+="/"+this.pieces_[e]);return n||"/"}}function zn(){return new ti("")}function Dn(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Ad(i){return i.pieces_.length-i.pieceNum_}function xi(i){let n=i.pieceNum_;return n<i.pieces_.length&&n++,new ti(i.pieces_,n)}function xy(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Ey(i,n=0){return i.pieces_.slice(i.pieceNum_+n)}function Cy(i){if(i.pieceNum_>=i.pieces_.length)return null;const n=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)n.push(i.pieces_[e]);return new ti(n,0)}function ir(i,n){const e=[];for(let r=i.pieceNum_;r<i.pieces_.length;r++)e.push(i.pieces_[r]);if(n instanceof ti)for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);else{const r=n.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&e.push(r[o])}return new ti(e,0)}function En(i){return i.pieceNum_>=i.pieces_.length}function Vo(i,n){const e=Dn(i),r=Dn(n);if(null===e)return n;if(e===r)return Vo(xi(i),xi(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+i+")")}function ID(i,n){const e=Ey(i,0),r=Ey(n,0);for(let o=0;o<e.length&&o<r.length;o++){const s=El(e[o],r[o]);if(0!==s)return s}return e.length===r.length?0:e.length<r.length?-1:1}function Ec(i,n){if(Ad(i)!==Ad(n))return!1;for(let e=i.pieceNum_,r=n.pieceNum_;e<=i.pieces_.length;e++,r++)if(i.pieces_[e]!==n.pieces_[r])return!1;return!0}function pa(i,n){let e=i.pieceNum_,r=n.pieceNum_;if(Ad(i)>Ad(n))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==n.pieces_[r])return!1;++e,++r}return!0}class Z0{constructor(n,e){this.errorPrefix_=e,this.parts_=Ey(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,j.ug)(this.parts_[r]);Iy(this)}}function Iy(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Dl(i))}function Dl(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class Cc extends jf{constructor(){let n,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[n];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Cc}getInitialEvent(n){return(0,j.hu)("visible"===n,"Unknown event type: "+n),[this.visible_]}}const sh=1e3;let Kp,ah=(()=>{class i extends Gk{constructor(e,r,o,s,c,h,p,_){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=i.nextPersistentConnectionId_++,this.log_=Vf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=sh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,j.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Cc.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ln.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,o){const s=++this.requestNumber_,c={r:s,a:e,b:r};this.log_((0,j.Wl)(c)),(0,j.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[s]=o)}get(e){this.initConnection_();const r=new j.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(e,r,o,s){this.initConnection_();const c=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,j.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,j.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:e,tag:o};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(e){const r=e.query,o=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+o+" for "+s);const c={p:o};e.tag&&(c.q=r._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const _=p.d,w=p.s;i.warnOnListenWarnings_(_,r),(this.listens.get(o)&&this.listens.get(o).get(s))===e&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(o,s),e.onComplete&&e.onComplete(w,_))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,j.r3)(e,"w")){const o=(0,j.DV)(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();co(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,j.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,j.w9)(e)?"auth":"gauth",o={cred:e};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,s=>{const c=s.s,h=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,o=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(e,r){const o=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+s),(0,j.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,s)&&this.connected_&&this.sendUnlisten_(o,s,e._queryObject,r)}sendUnlisten_(e,r,o,s){this.log_("Unlisten on "+e+" for "+r);const c={p:e};s&&(c.q=o,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:o})}onDisconnectMerge(e,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:o})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,o,s){const c={p:r,d:o};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(e,r,o,s){this.putInternal("p",e,r,o,s)}merge(e,r,o,s){this.putInternal("m",e,r,o,s)}putInternal(e,r,o,s,c){this.initConnection_();const h={p:r,d:o};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:e,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,j.Wl)(e));const r=e.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):my("Unrecognized action received from server: "+(0,j.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,j.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=sh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=sh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,De.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),o=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+i.nextConnectionId_++,h=e.lastSessionId;let p=!1,_=null;const w=function(){_?_.close():(p=!0,s())};e.realtime_={close:w,sendRequest:function(P){(0,j.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(P)}};const A=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,B]=yield Promise.all([e.authTokenProvider_.getToken(A),e.appCheckTokenProvider_.getToken(A)]);p?lo("getToken() completed but was canceled"):(lo("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=B&&B.token,_=new $k(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,o,s,Y=>{co(Y+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(P){e.log_("Failed to get token: "+P),p||(e.repoInfo_.nodeAdmin&&co(P),w())}}})()}interrupt(e){lo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){lo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,j.xb)(this.interruptReasons_)&&(this.reconnectDelay_=sh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let o;o=r?r.map(c=>nh(c)).join("$"):"default";const s=this.removeListen_(e,o);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,r){const o=new ti(e).toString();let s;if(this.listens.has(o)){const c=this.listens.get(o);s=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else s=void 0;return s}onAuthRevoked_(e,r){lo("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){lo("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,j.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+hy.replace(/\./g,"-")]=1,(0,j.uI)()?e["framework.cordova"]=1:(0,j.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ln.getInstance().currentlyOnline();return(0,j.xb)(this.interruptReasons_)&&e}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class kn{constructor(n,e){this.name=n,this.node=e}static Wrap(n,e){return new kn(n,e)}}class Wf{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,e){const r=new kn(wc,n),o=new kn(wc,e);return 0!==this.compare(r,o)}minPost(){return kn.MIN}}class MD extends Wf{static get __EMPTY_NODE(){return Kp}static set __EMPTY_NODE(n){Kp=n}compare(n,e){return El(n.name,e.name)}isDefinedOn(n){throw(0,j.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,e){return!1}minPost(){return kn.MIN}maxPost(){return new kn(za,Kp)}makePost(n,e){return(0,j.hu)("string"==typeof n,"KeyIndex indexValue must always be a string."),new kn(n,Kp)}toString(){return".key"}}const ja=new MD;class qf{constructor(n,e,r,o,s=null){this.isReverse_=o,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!n.isEmpty();)if(c=e?r(n.key,e):1,o&&(c*=-1),c<0)n=this.isReverse_?n.left:n.right;else{if(0===c){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,n=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}let RD,Il=(()=>{class i{constructor(e,r,o,s,c){this.key=e,this.value=r,this.color=o??i.RED,this.left=s??Is.EMPTY_NODE,this.right=c??Is.EMPTY_NODE}copy(e,r,o,s,c){return new i(e??this.key,r??this.value,o??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,o){let s=this;const c=o(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,r,o),null):0===c?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,o)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Is.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let o,s;if(o=this,r(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(e,o.key)){if(o.right.isEmpty())return Is.EMPTY_NODE;s=o.right.min_(),o=o.copy(s.key,s.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Is{constructor(n,e=Is.EMPTY_NODE){this.comparator_=n,this.root_=e}insert(n,e){return new Is(this.comparator_,this.root_.insert(n,e,this.comparator_).copy(null,null,Il.BLACK,null,null))}remove(n){return new Is(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Il.BLACK,null,null))}get(n){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(n,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(n){let e,r=this.root_,o=null;for(;!r.isEmpty();){if(e=this.comparator_(n,r.key),0===e){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new qf(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,e){return new qf(this.root_,n,this.comparator_,!1,e)}getReverseIteratorFrom(n,e){return new qf(this.root_,n,this.comparator_,!0,e)}getReverseIterator(n){return new qf(this.root_,null,this.comparator_,!0,n)}}function Zk(i,n){return El(i.name,n.name)}function kD(i,n){return El(i,n)}Is.EMPTY_NODE=new class Yk{copy(n,e,r,o,s){return this}insert(n,e,r){return new Il(n,e,null)}remove(n,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const PD=function(i){return"number"==typeof i?"number:"+lD(i):"string:"+i},Sy=function(i){if(i.isLeafNode()){const n=i.val();(0,j.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,j.r3)(n,".sv"),"Priority must be a string or number.")}else(0,j.hu)(i===RD||i.isEmpty(),"priority of unexpected type.");(0,j.hu)(i===RD||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ay,My,ky,Tl=(()=>{class i{constructor(e,r=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,j.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Sy(this.priorityNode_)}static set __childrenNodeConstructor(e){Ay=e}static get __childrenNodeConstructor(){return Ay}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return En(e)?this:".priority"===Dn(e)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const o=Dn(e);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,j.hu)(".priority"!==o||1===Ad(e),".priority must be the last token in a path"),this.updateImmediateChild(o,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(xi(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+PD(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?lD(this.value_):this.value_,this.lazyHash_=k0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:((0,j.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,o=typeof this.value_,s=i.VALUE_TYPE_ORDER.indexOf(r),c=i.VALUE_TYPE_ORDER.indexOf(o);return(0,j.hu)(s>=0,"Unknown leaf type: "+r),(0,j.hu)(c>=0,"Unknown leaf type: "+o),s===c?"object"===o?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Ti=new class Xp extends Wf{compare(n,e){const r=n.node.getPriority(),o=e.node.getPriority(),s=r.compareTo(o);return 0===s?El(n.name,e.name):s}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,e){return!n.getPriority().equals(e.getPriority())}minPost(){return kn.MIN}maxPost(){return new kn(za,new Tl("[PRIORITY-POST]",ky))}makePost(n,e){const r=My(n);return new kn(e,new Tl("[PRIORITY-POST]",r))}toString(){return".priority"}},Q0=Math.log(2);class Py{constructor(n){this.count=parseInt(Math.log(n+1)/Q0,10),this.current_=this.count-1;const o=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=n+1&o}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const X0=function(i,n,e,r){i.sort(n);const o=function(p,_){const w=_-p;let I,A;if(0===w)return null;if(1===w)return I=i[p],A=e?e(I):I,new Il(A,I.node,Il.BLACK,null,null);{const P=parseInt(w/2,10)+p,B=o(p,P),Y=o(P+1,_);return I=i[P],A=e?e(I):I,new Il(A,I.node,Il.BLACK,B,Y)}},h=function(p){let _=null,w=null,I=i.length;const A=function(B,Y){const ee=I-B,ve=I;I-=B;const Ae=o(ee+1,ve),_e=i[ee],ke=e?e(_e):_e;P(new Il(ke,_e.node,Y,null,Ae))},P=function(B){_?(_.left=B,_=B):(w=B,_=B)};for(let B=0;B<p.count;++B){const Y=p.nextBitIsOne(),ee=Math.pow(2,p.count-(B+1));Y?A(ee,Il.BLACK):(A(ee,Il.BLACK),A(ee,Il.RED))}return w}(new Py(i.length));return new Is(r||n,h)};let Jp;const Md={};class Sl{constructor(n,e){this.indexes_=n,this.indexSet_=e}static get Default(){return(0,j.hu)(Md&&Ti,"ChildrenNode.ts has not been loaded"),Jp=Jp||new Sl({".priority":Md},{".priority":Ti}),Jp}get(n){const e=(0,j.DV)(this.indexes_,n);if(!e)throw new Error("No index defined for "+n);return e instanceof Is?e:null}hasIndex(n){return(0,j.r3)(this.indexSet_,n.toString())}addIndex(n,e){(0,j.hu)(n!==ja,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const s=e.getIterator(kn.Wrap);let h,c=s.getNext();for(;c;)o=o||n.isDefinedOn(c.node),r.push(c),c=s.getNext();h=o?X0(r,n.getCompare()):Md;const p=n.toString(),_=Object.assign({},this.indexSet_);_[p]=n;const w=Object.assign({},this.indexes_);return w[p]=h,new Sl(w,_)}addToIndexes(n,e){const r=(0,j.UI)(this.indexes_,(o,s)=>{const c=(0,j.DV)(this.indexSet_,s);if((0,j.hu)(c,"Missing index implementation for "+s),o===Md){if(c.isDefinedOn(n.node)){const h=[],p=e.getIterator(kn.Wrap);let _=p.getNext();for(;_;)_.name!==n.name&&h.push(_),_=p.getNext();return h.push(n),X0(h,c.getCompare())}return Md}{const h=e.get(n.name);let p=o;return h&&(p=p.remove(new kn(n.name,h))),p.insert(n,n.node)}});return new Sl(r,this.indexSet_)}removeFromIndexes(n,e){const r=(0,j.UI)(this.indexes_,o=>{if(o===Md)return o;{const s=e.get(n.name);return s?o.remove(new kn(n.name,s)):o}});return new Sl(r,this.indexSet_)}}let eg,vn=(()=>{class i{constructor(e,r,o){this.children_=e,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Sy(this.priorityNode_),this.children_.isEmpty()&&(0,j.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return eg||(eg=new i(new Is(kD),null,Sl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eg}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?eg:r}}getChild(e){const r=Dn(e);return null===r?this:this.getImmediateChild(r).getChild(xi(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,j.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const o=new kn(e,r);let s,c;r.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(o,this.children_)):(s=this.children_.insert(e,r),c=this.indexMap_.addToIndexes(o,this.children_));const h=s.isEmpty()?eg:this.priorityNode_;return new i(s,h,c)}}updateChild(e,r){const o=Dn(e);if(null===o)return r;{(0,j.hu)(".priority"!==Dn(e)||1===Ad(e),".priority must be the last token in a path");const s=this.getImmediateChild(o).updateChild(xi(e),r);return this.updateImmediateChild(o,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let o=0,s=0,c=!0;if(this.forEachChild(Ti,(h,p)=>{r[h]=p.val(e),o++,c&&i.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!e&&c&&s<2*o){const h=[];for(const p in r)h[p]=r[p];return h}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+PD(this.getPriority().val())+":"),this.forEachChild(Ti,(r,o)=>{const s=o.hash();""!==s&&(e+=":"+r+":"+s)}),this.lazyHash_=""===e?"":k0(e)}return this.lazyHash_}getPredecessorChildName(e,r,o){const s=this.resolveIndex_(o);if(s){const c=s.getPredecessorKey(new kn(e,r));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new kn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new kn(r,this.children_.get(r)):null}forEachChild(e,r){const o=this.resolveIndex_(e);return o?o.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,kn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,kn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Yf?-1:0}withIndex(e){if(e===ja||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===ja||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Ti),s=r.getIterator(Ti);let c=o.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=o.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(e){return e===ja?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const Yf=new class OD extends vn{constructor(){super(new Is(kD),vn.EMPTY_NODE,Sl.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return vn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(kn,{MIN:{value:new kn(wc,vn.EMPTY_NODE)},MAX:{value:new kn(za,Yf)}}),MD.__EMPTY_NODE=vn.EMPTY_NODE,Tl.__childrenNodeConstructor=vn,function Ty(i){RD=i}(Yf),function Ry(i){ky=i}(Yf);const Kk=!0;function hr(i,n=null){if(null===i)return vn.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(n=i[".priority"]),(0,j.hu)(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new Tl(i,hr(n));if(i instanceof Array||!Kk){let e=vn.EMPTY_NODE;return Zr(i,(r,o)=>{if((0,j.r3)(i,r)&&"."!==r.substring(0,1)){const s=hr(o);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(r,s))}}),e.updatePriority(hr(n))}{const e=[];let r=!1;if(Zr(i,(c,h)=>{if("."!==c.substring(0,1)){const p=hr(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),e.push(new kn(c,p)))}}),0===e.length)return vn.EMPTY_NODE;const s=X0(e,Zk,c=>c.name,kD);if(r){const c=X0(e,Ti.getCompare());return new vn(s,hr(n),new Sl({".priority":c},{".priority":Ti}))}return new vn(s,hr(n),Sl.Default)}}!function Qp(i){My=i}(hr);class ND extends Wf{constructor(n){super(),this.indexPath_=n,(0,j.hu)(!En(n)&&".priority"!==Dn(n),"Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,e){const r=this.extractChild(n.node),o=this.extractChild(e.node),s=r.compareTo(o);return 0===s?El(n.name,e.name):s}makePost(n,e){const r=hr(n),o=vn.EMPTY_NODE.updateChild(this.indexPath_,r);return new kn(e,o)}maxPost(){const n=vn.EMPTY_NODE.updateChild(this.indexPath_,Yf);return new kn(za,n)}toString(){return Ey(this.indexPath_,0).join("/")}}const tg=new class Qk extends Wf{compare(n,e){const r=n.node.compareTo(e.node);return 0===r?El(n.name,e.name):r}isDefinedOn(n){return!0}indexedValueChanged(n,e){return!n.equals(e)}minPost(){return kn.MIN}maxPost(){return kn.MAX}makePost(n,e){const r=hr(n);return new kn(e,r)}toString(){return".value"}};function Oy(i){return{type:"value",snapshotNode:i}}function Zf(i,n){return{type:"child_added",snapshotNode:n,childName:i}}function Kf(i,n){return{type:"child_removed",snapshotNode:n,childName:i}}function lh(i,n,e){return{type:"child_changed",snapshotNode:n,childName:i,oldSnap:e}}class J0{constructor(n){this.index_=n}updateChild(n,e,r,o,s,c){(0,j.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=n.getImmediateChild(e);return h.getChild(o).equals(r.getChild(o))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?n.hasChild(e)?c.trackChildChange(Kf(e,h)):(0,j.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Zf(e,r)):c.trackChildChange(lh(e,r,h))),n.isLeafNode()&&r.isEmpty())?n:n.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(n,e,r){return null!=r&&(n.isLeafNode()||n.forEachChild(Ti,(o,s)=>{e.hasChild(o)||r.trackChildChange(Kf(o,s))}),e.isLeafNode()||e.forEachChild(Ti,(o,s)=>{if(n.hasChild(o)){const c=n.getImmediateChild(o);c.equals(s)||r.trackChildChange(lh(o,s,c))}else r.trackChildChange(Zf(o,s))})),e.withIndex(this.index_)}updatePriority(n,e){return n.isEmpty()?vn.EMPTY_NODE:n.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Qf{constructor(n){this.indexedFilter_=new J0(n.getIndex()),this.index_=n.getIndex(),this.startPost_=Qf.getStartPost_(n),this.endPost_=Qf.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,r=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return e&&r}updateChild(n,e,r,o,s,c){return this.matches(new kn(e,r))||(r=vn.EMPTY_NODE),this.indexedFilter_.updateChild(n,e,r,o,s,c)}updateFullNode(n,e,r){e.isLeafNode()&&(e=vn.EMPTY_NODE);let o=e.withIndex(this.index_);o=o.updatePriority(vn.EMPTY_NODE);const s=this;return e.forEachChild(Ti,(c,h)=>{s.matches(new kn(c,h))||(o=o.updateImmediateChild(c,vn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,o,r)}updatePriority(n,e){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const e=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),e)}return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const e=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),e)}return n.getIndex().maxPost()}}class Xk{constructor(n){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=e=>{const r=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Qf(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,e,r,o,s,c){return this.rangedFilter_.matches(new kn(e,r))||(r=vn.EMPTY_NODE),n.getImmediateChild(e).equals(r)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,e,r,o,s,c):this.fullLimitUpdateChild_(n,e,r,s,c)}updateFullNode(n,e,r){let o;if(e.isLeafNode()||e.isEmpty())o=vn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;o=vn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;o=o.updateImmediateChild(h.name,h.node),c++}}}else{let s;o=e.withIndex(this.index_),o=o.updatePriority(vn.EMPTY_NODE),s=this.reverse_?o.getReverseIterator(this.index_):o.getIterator(this.index_);let c=0;for(;s.hasNext();){const h=s.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:o=o.updateImmediateChild(h.name,vn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,o,r)}updatePriority(n,e){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,e,r,o,s){let c;if(this.reverse_){const I=this.index_.getCompare();c=(A,P)=>I(P,A)}else c=this.index_.getCompare();const h=n;(0,j.hu)(h.numChildren()===this.limit_,"");const p=new kn(e,r),_=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(h.hasChild(e)){const I=h.getImmediateChild(e);let A=o.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=A&&(A.name===e||h.hasChild(A.name));)A=o.getChildAfterChild(this.index_,A,this.reverse_);const P=null==A?1:c(A,p);if(w&&!r.isEmpty()&&P>=0)return s?.trackChildChange(lh(e,r,I)),h.updateImmediateChild(e,r);{s?.trackChildChange(Kf(e,I));const Y=h.updateImmediateChild(e,vn.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(s?.trackChildChange(Zf(A.name,A.node)),Y.updateImmediateChild(A.name,A.node)):Y}}return r.isEmpty()?n:w&&c(_,p)>=0?(null!=s&&(s.trackChildChange(Kf(_.name,_.node)),s.trackChildChange(Zf(e,r))),h.updateImmediateChild(e,r).updateImmediateChild(_.name,vn.EMPTY_NODE)):n}}class ng{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ti}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,j.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,j.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,j.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,j.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:za}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,j.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ti}copy(){const n=new ng;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function ew(i,n,e){const r=i.copy();return r.startSet_=!0,void 0===n&&(n=null),r.indexStartValue_=n,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function ch(i,n,e){const r=i.copy();return r.endSet_=!0,void 0===n&&(n=null),r.indexEndValue_=n,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function rg(i,n){const e=i.copy();return e.index_=n,e}function FD(i){const n={};if(i.isDefault())return n;let e;if(i.index_===Ti?e="$priority":i.index_===tg?e="$value":i.index_===ja?e="$key":((0,j.hu)(i.index_ instanceof ND,"Unrecognized index type!"),e=i.index_.toString()),n.orderBy=(0,j.Wl)(e),i.startSet_){const r=i.startAfterSet_?"startAfter":"startAt";n[r]=(0,j.Wl)(i.indexStartValue_),i.startNameSet_&&(n[r]+=","+(0,j.Wl)(i.indexStartName_))}if(i.endSet_){const r=i.endBeforeSet_?"endBefore":"endAt";n[r]=(0,j.Wl)(i.indexEndValue_),i.endNameSet_&&(n[r]+=","+(0,j.Wl)(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?n.limitToFirst=i.limit_:n.limitToLast=i.limit_),n}function LD(i){const n={};if(i.startSet_&&(n.sp=i.indexStartValue_,i.startNameSet_&&(n.sn=i.indexStartName_),n.sin=!i.startAfterSet_),i.endSet_&&(n.ep=i.indexEndValue_,i.endNameSet_&&(n.en=i.indexEndName_),n.ein=!i.endBeforeSet_),i.limitSet_){n.l=i.limit_;let e=i.viewFrom_;""===e&&(e=i.isViewFromLeft()?"l":"r"),n.vf=e}return i.index_!==Ti&&(n.i=i.index_.toString()),n}class Fy extends Gk{constructor(n,e,r,o){super(),this.repoInfo_=n,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=Vf("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,e){return void 0!==e?"tag$"+e:((0,j.hu)(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,e,r,o){const s=n._path.toString();this.log_("Listen called for "+s+" "+n._queryIdentifier);const c=Fy.getListenId_(n,r),h={};this.listens_[c]=h;const p=FD(n._queryParams);this.restRequest_(s+".json",p,(_,w)=>{let I=w;if(404===_&&(I=null,_=null),null===_&&this.onDataUpdate_(s,I,!1,r),(0,j.DV)(this.listens_,c)===h){let A;A=_?401===_?"permission_denied":"rest_error:"+_:"ok",o(A,null)}})}unlisten(n,e){const r=Fy.getListenId_(n,e);delete this.listens_[r]}get(n){const e=FD(n._queryParams),r=n._path.toString(),o=new j.BH;return this.restRequest_(r+".json",e,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),o.resolve(h)):o.reject(new Error(h))}),o.promise}refreshAuthToken(n){}restRequest_(n,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,s])=>{o&&o.accessToken&&(e.auth=o.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+(0,j.xO)(e);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,j.cI)(h.responseText)}catch{co("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&co("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class UD{constructor(){this.rootNode_=vn.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,e){this.rootNode_=this.rootNode_.updateChild(n,e)}}function og(){return{value:null,children:new Map}}function kd(i,n,e){if(En(n))i.value=e,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(n,e);else{const r=Dn(n);i.children.has(r)||i.children.set(r,og()),kd(i.children.get(r),n=xi(n),e)}}function dh(i,n){if(En(n))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const e=i.value;return i.value=null,e.forEachChild(Ti,(r,o)=>{kd(i,new ti(r),o)}),dh(i,n)}}if(i.children.size>0){const e=Dn(n);return n=xi(n),i.children.has(e)&&dh(i.children.get(e),n)&&i.children.delete(e),0===i.children.size}return!0}function Ly(i,n,e){null!==i.value?e(n,i.value):function HL(i,n){i.children.forEach((e,r)=>{n(r,e)})}(i,(r,o)=>{Ly(o,new ti(n.toString()+"/"+r),e)})}class tw{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),e=Object.assign({},n);return this.last_&&Zr(this.last_,(r,o)=>{e[r]=e[r]-o}),this.last_=n,e}}class VD{constructor(n,e){this.server_=e,this.statsToReport_={},this.statsListener_=new tw(n);const r=1e4+2e4*Math.random();gy(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const n=this.statsListener_.get(),e={};let r=!1;Zr(n,(o,s)=>{s>0&&(0,j.r3)(this.statsToReport_,o)&&(e[o]=s,r=!0)}),r&&this.server_.reportStats(e),gy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zr=(()=>((zr=zr||{})[zr.OVERWRITE=0]="OVERWRITE",zr[zr.MERGE=1]="MERGE",zr[zr.ACK_USER_WRITE=2]="ACK_USER_WRITE",zr[zr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",zr))();function rw(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class By{constructor(n,e,r){this.path=n,this.affectedTree=e,this.revert=r,this.type=zr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(n){if(En(this.path)){if(null!=this.affectedTree.value)return(0,j.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new ti(n));return new By(zn(),e,this.revert)}}return(0,j.hu)(Dn(this.path)===n,"operationForChild called for unrelated child."),new By(xi(this.path),this.affectedTree,this.revert)}}class Jf{constructor(n,e){this.source=n,this.path=e,this.type=zr.LISTEN_COMPLETE}operationForChild(n){return En(this.path)?new Jf(this.source,zn()):new Jf(this.source,xi(this.path))}}class Rd{constructor(n,e,r){this.source=n,this.path=e,this.snap=r,this.type=zr.OVERWRITE}operationForChild(n){return En(this.path)?new Rd(this.source,zn(),this.snap.getImmediateChild(n)):new Rd(this.source,xi(this.path),this.snap)}}class $a{constructor(n,e,r){this.source=n,this.path=e,this.children=r,this.type=zr.MERGE}operationForChild(n){if(En(this.path)){const e=this.children.subtree(new ti(n));return e.isEmpty()?null:e.value?new Rd(this.source,zn(),e.value):new $a(this.source,zn(),e)}return(0,j.hu)(Dn(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new $a(this.source,xi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ho{constructor(n,e,r){this.node_=n,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(En(n))return this.isFullyInitialized()&&!this.filtered_;const e=Dn(n);return this.isCompleteForChild(e)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class HD{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function sg(i,n,e,r,o,s){const c=r.filter(h=>h.type===e);c.sort((h,p)=>function $L(i,n,e){if(null==n.childName||null==e.childName)throw(0,j.g5)("Should only compare child_ events.");const r=new kn(n.childName,n.snapshotNode),o=new kn(e.childName,e.snapshotNode);return i.index_.compare(r,o)}(i,h,p)),c.forEach(h=>{const p=function jL(i,n,e){return"value"===n.type||"child_removed"===n.type||(n.prevName=e.getPredecessorChildName(n.childName,n.snapshotNode,i.index_)),n}(i,h,s);o.forEach(_=>{_.respondsTo(h.type)&&n.push(_.createEvent(p,i.query_))})})}function ag(i,n){return{eventCache:i,serverCache:n}}function em(i,n,e,r){return ag(new Ho(n,e,r),i.serverCache)}function t1(i,n,e,r){return ag(i.eventCache,new Ho(n,e,r))}function lg(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Al(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let Vy;class Si{constructor(n,e=(()=>(Vy||(Vy=new Is(sD)),Vy))()){this.value=n,this.children=e}static fromObject(n){let e=new Si(null);return Zr(n,(r,o)=>{e=e.set(new ti(r),o)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,e){if(null!=this.value&&e(this.value))return{path:zn(),value:this.value};if(En(n))return null;{const r=Dn(n),o=this.children.get(r);if(null!==o){const s=o.findRootMostMatchingPathAndValue(xi(n),e);return null!=s?{path:ir(new ti(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(En(n))return this;{const e=Dn(n),r=this.children.get(e);return null!==r?r.subtree(xi(n)):new Si(null)}}set(n,e){if(En(n))return new Si(e,this.children);{const r=Dn(n),s=(this.children.get(r)||new Si(null)).set(xi(n),e),c=this.children.insert(r,s);return new Si(this.value,c)}}remove(n){if(En(n))return this.children.isEmpty()?new Si(null):new Si(null,this.children);{const e=Dn(n),r=this.children.get(e);if(r){const o=r.remove(xi(n));let s;return s=o.isEmpty()?this.children.remove(e):this.children.insert(e,o),null===this.value&&s.isEmpty()?new Si(null):new Si(this.value,s)}return this}}get(n){if(En(n))return this.value;{const e=Dn(n),r=this.children.get(e);return r?r.get(xi(n)):null}}setTree(n,e){if(En(n))return e;{const r=Dn(n),s=(this.children.get(r)||new Si(null)).setTree(xi(n),e);let c;return c=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Si(this.value,c)}}fold(n){return this.fold_(zn(),n)}fold_(n,e){const r={};return this.children.inorderTraversal((o,s)=>{r[o]=s.fold_(ir(n,o),e)}),e(n,this.value,r)}findOnPath(n,e){return this.findOnPath_(n,zn(),e)}findOnPath_(n,e,r){const o=!!this.value&&r(e,this.value);if(o)return o;if(En(n))return null;{const s=Dn(n),c=this.children.get(s);return c?c.findOnPath_(xi(n),ir(e,s),r):null}}foreachOnPath(n,e){return this.foreachOnPath_(n,zn(),e)}foreachOnPath_(n,e,r){if(En(n))return this;{this.value&&r(e,this.value);const o=Dn(n),s=this.children.get(o);return s?s.foreachOnPath_(xi(n),ir(e,o),r):new Si(null)}}foreach(n){this.foreach_(zn(),n)}foreach_(n,e){this.children.inorderTraversal((r,o)=>{o.foreach_(ir(n,r),e)}),this.value&&e(n,this.value)}foreachChild(n){this.children.inorderTraversal((e,r)=>{r.value&&n(e,r.value)})}}class Zt{constructor(n){this.writeTree_=n}static empty(){return new Zt(new Si(null))}}function tm(i,n,e){if(En(n))return new Zt(new Si(e));{const r=i.writeTree_.findRootMostValueAndPath(n);if(null!=r){const o=r.path;let s=r.value;const c=Vo(o,n);return s=s.updateChild(c,e),new Zt(i.writeTree_.set(o,s))}{const o=new Si(e),s=i.writeTree_.setTree(n,o);return new Zt(s)}}}function Hy(i,n,e){let r=i;return Zr(e,(o,s)=>{r=tm(r,ir(n,o),s)}),r}function n1(i,n){if(En(n))return Zt.empty();{const e=i.writeTree_.setTree(n,new Si(null));return new Zt(e)}}function ow(i,n){return null!=Pd(i,n)}function Pd(i,n){const e=i.writeTree_.findRootMostValueAndPath(n);return null!=e?i.writeTree_.get(e.path).getChild(Vo(e.path,n)):null}function jD(i){const n=[],e=i.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ti,(r,o)=>{n.push(new kn(r,o))}):i.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&n.push(new kn(r,o.value))}),n}function Od(i,n){if(En(n))return i;{const e=Pd(i,n);return new Zt(null!=e?new Si(e):i.writeTree_.subtree(n))}}function zy(i){return i.writeTree_.isEmpty()}function nm(i,n){return sw(zn(),i.writeTree_,n)}function sw(i,n,e){if(null!=n.value)return e.updateChild(i,n.value);{let r=null;return n.children.inorderTraversal((o,s)=>{".priority"===o?((0,j.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):e=sw(ir(i,o),s,e)}),!e.getChild(i).isEmpty()&&null!==r&&(e=e.updateChild(ir(i,".priority"),r)),e}}function jy(i,n){return ZD(n,i)}function Nd(i,n){if(i.snap)return pa(i.path,n);for(const e in i.children)if(i.children.hasOwnProperty(e)&&pa(ir(i.path,e),n))return!0;return!1}function WD(i){return i.visible}function qD(i,n,e){let r=Zt.empty();for(let o=0;o<i.length;++o){const s=i[o];if(n(s)){const c=s.path;let h;if(s.snap)pa(e,c)?(h=Vo(e,c),r=tm(r,h,s.snap)):pa(c,e)&&(h=Vo(c,e),r=tm(r,zn(),s.snap.getChild(h)));else{if(!s.children)throw(0,j.g5)("WriteRecord should have .snap or .children");if(pa(e,c))h=Vo(e,c),r=Hy(r,h,s.children);else if(pa(c,e))if(h=Vo(c,e),En(h))r=Hy(r,zn(),s.children);else{const p=(0,j.DV)(s.children,Dn(h));if(p){const _=p.getChild(xi(h));r=tm(r,zn(),_)}}}}}return r}function cg(i,n,e,r,o){if(r||o){const s=Od(i.visibleWrites,n);return!o&&zy(s)?e:o||null!=e||ow(s,zn())?nm(qD(i.allWrites,function(_){return(_.visible||o)&&(!r||!~r.indexOf(_.writeId))&&(pa(_.path,n)||pa(n,_.path))},n),e||vn.EMPTY_NODE):null}{const s=Pd(i.visibleWrites,n);if(null!=s)return s;{const c=Od(i.visibleWrites,n);return zy(c)?e:null!=e||ow(c,zn())?nm(c,e||vn.EMPTY_NODE):null}}}function om(i,n,e,r){return cg(i.writeTree,i.treePath,n,e,r)}function $y(i,n){return function rm(i,n,e){let r=vn.EMPTY_NODE;const o=Pd(i.visibleWrites,n);if(o)return o.isLeafNode()||o.forEachChild(Ti,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(e){const s=Od(i.visibleWrites,n);return e.forEachChild(Ti,(c,h)=>{const p=nm(Od(s,new ti(c)),h);r=r.updateImmediateChild(c,p)}),jD(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return jD(Od(i.visibleWrites,n)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(i.writeTree,i.treePath,n)}function Gy(i,n,e,r){return function aw(i,n,e,r,o){(0,j.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const s=ir(n,e);if(ow(i.visibleWrites,s))return null;{const c=Od(i.visibleWrites,s);return zy(c)?o.getChild(e):nm(c,o.getChild(e))}}(i.writeTree,i.treePath,n,e,r)}function Wy(i,n){return function YD(i,n){return Pd(i.visibleWrites,n)}(i.writeTree,ir(i.treePath,n))}function dw(i,n,e){return function dg(i,n,e,r){const o=ir(n,e),s=Pd(i.visibleWrites,o);return null!=s?s:r.isCompleteForChild(e)?nm(Od(i.visibleWrites,o),r.getNode().getImmediateChild(e)):null}(i.writeTree,i.treePath,n,e)}function uw(i,n){return ZD(ir(i.treePath,n),i.writeTree)}function ZD(i,n){return{treePath:i,writeTree:n}}class s1{constructor(){this.changeMap=new Map}trackChildChange(n){const e=n.type,r=n.childName;(0,j.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,j.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const s=o.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(r,lh(r,n.snapshotNode,o.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(r,Kf(r,o.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(r,Zf(r,n.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,j.g5)("Illegal combination of changes: "+n+" occurred after "+o);this.changeMap.set(r,lh(r,n.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,n)}getChanges(){return Array.from(this.changeMap.values())}}const KD=new class a1{getCompleteChild(n){return null}getChildAfterChild(n,e,r){return null}};class qy{constructor(n,e,r=null){this.writes_=n,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(n){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(n))return e.getNode().getImmediateChild(n);{const r=null!=this.optCompleteServerCache_?new Ho(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dw(this.writes_,n,r)}}getChildAfterChild(n,e,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Al(this.viewCache_),s=function o1(i,n,e,r,o,s){return function lw(i,n,e,r,o,s,c){let h;const p=Od(i.visibleWrites,n),_=Pd(p,zn());if(null!=_)h=_;else{if(null==e)return[];h=nm(p,e)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const w=[],I=c.getCompare(),A=s?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let P=A.getNext();for(;P&&w.length<o;)0!==I(P,r)&&w.push(P),P=A.getNext();return w}}(i.writeTree,i.treePath,n,e,r,o,s)}(this.writes_,o,e,1,r,n);return 0===s.length?null:s[0]}}function XD(i,n,e,r,o,s){const c=n.eventCache;if(null!=Wy(r,e))return n;{let h,p;if(En(e))if((0,j.hu)(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const _=Al(n),I=$y(r,_ instanceof vn?_:vn.EMPTY_NODE);h=i.filter.updateFullNode(n.eventCache.getNode(),I,s)}else{const _=om(r,Al(n));h=i.filter.updateFullNode(n.eventCache.getNode(),_,s)}else{const _=Dn(e);if(".priority"===_){(0,j.hu)(1===Ad(e),"Can't have a priority with additional path components");const w=c.getNode();p=n.serverCache.getNode();const I=Gy(r,e,w,p);h=null!=I?i.filter.updatePriority(w,I):c.getNode()}else{const w=xi(e);let I;if(c.isCompleteForChild(_)){p=n.serverCache.getNode();const A=Gy(r,e,c.getNode(),p);I=null!=A?c.getNode().getImmediateChild(_).updateChild(w,A):c.getNode().getImmediateChild(_)}else I=dw(r,_,n.serverCache);h=null!=I?i.filter.updateChild(c.getNode(),_,I,w,o,s):c.getNode()}}return em(n,h,c.isFullyInitialized()||En(e),i.filter.filtersNodes())}}function Yy(i,n,e,r,o,s,c,h){const p=n.serverCache;let _;const w=c?i.filter:i.filter.getIndexedFilter();if(En(e))_=w.updateFullNode(p.getNode(),r,null);else if(w.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(e,r);_=w.updateFullNode(p.getNode(),P,null)}else{const P=Dn(e);if(!p.isCompleteForPath(e)&&Ad(e)>1)return n;const B=xi(e),ee=p.getNode().getImmediateChild(P).updateChild(B,r);_=".priority"===P?w.updatePriority(p.getNode(),ee):w.updateChild(p.getNode(),P,ee,B,KD,null)}const I=t1(n,_,p.isFullyInitialized()||En(e),w.filtersNodes());return XD(i,I,e,o,new qy(o,I,s),h)}function JD(i,n,e,r,o,s,c){const h=n.eventCache;let p,_;const w=new qy(o,n,s);if(En(e))_=i.filter.updateFullNode(n.eventCache.getNode(),r,c),p=em(n,_,!0,i.filter.filtersNodes());else{const I=Dn(e);if(".priority"===I)_=i.filter.updatePriority(n.eventCache.getNode(),r),p=em(n,_,h.isFullyInitialized(),h.isFiltered());else{const A=xi(e),P=h.getNode().getImmediateChild(I);let B;if(En(A))B=r;else{const Y=w.getCompleteChild(I);B=null!=Y?".priority"===xy(A)&&Y.getChild(Cy(A)).isEmpty()?Y:Y.updateChild(A,r):vn.EMPTY_NODE}p=P.equals(B)?n:em(n,i.filter.updateChild(h.getNode(),I,B,A,w,c),h.isFullyInitialized(),i.filter.filtersNodes())}}return p}function Zy(i,n){return i.eventCache.isCompleteForChild(n)}function tI(i,n,e){return e.foreach((r,o)=>{n=n.updateChild(r,o)}),n}function hw(i,n,e,r,o,s,c,h){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let _,p=n;_=En(e)?r:new Si(null).setTree(e,r);const w=n.serverCache.getNode();return _.children.inorderTraversal((I,A)=>{if(w.hasChild(I)){const B=tI(0,n.serverCache.getNode().getImmediateChild(I),A);p=Yy(i,p,new ti(I),B,o,s,c,h)}}),_.children.inorderTraversal((I,A)=>{const P=!n.serverCache.isCompleteForChild(I)&&null===A.value;if(!w.hasChild(I)&&!P){const Y=tI(0,n.serverCache.getNode().getImmediateChild(I),A);p=Yy(i,p,new ti(I),Y,o,s,c,h)}}),p}class h1{constructor(n,e){this.query_=n,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new J0(r.getIndex()),s=function VL(i){return i.loadsAllData()?new J0(i.getIndex()):i.hasLimit()?new Xk(i):new Qf(i)}(r);this.processor_=function QD(i){return{filter:i}}(s);const c=e.serverCache,h=e.eventCache,p=o.updateFullNode(vn.EMPTY_NODE,c.getNode(),null),_=s.updateFullNode(vn.EMPTY_NODE,h.getNode(),null),w=new Ho(p,c.isFullyInitialized(),o.filtersNodes()),I=new Ho(_,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=ag(I,w),this.eventGenerator_=new HD(this.query_)}get query(){return this.query_}}function m1(i,n){const e=Al(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!En(n)&&!e.getImmediateChild(Dn(n)).isEmpty())?e.getChild(n):null}function iI(i){return 0===i.eventRegistrations_.length}function rI(i,n,e){const r=[];if(e){(0,j.hu)(null==n,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,o);c&&r.push(c)})}if(n){let o=[];for(let s=0;s<i.eventRegistrations_.length;++s){const c=i.eventRegistrations_[s];if(c.matches(n)){if(n.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(s+1));break}}else o.push(c)}i.eventRegistrations_=o}else i.eventRegistrations_=[];return r}function Ga(i,n,e,r){n.type===zr.MERGE&&null!==n.source.queryId&&((0,j.hu)(Al(i.viewCache_),"We should always have a full cache before handling merges"),(0,j.hu)(lg(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,s=function c1(i,n,e,r,o){const s=new s1;let c,h;if(e.type===zr.OVERWRITE){const _=e;_.source.fromUser?c=JD(i,n,_.path,_.snap,r,o,s):((0,j.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||n.serverCache.isFiltered()&&!En(_.path),c=Yy(i,n,_.path,_.snap,r,o,h,s))}else if(e.type===zr.MERGE){const _=e;_.source.fromUser?c=function eI(i,n,e,r,o,s,c){let h=n;return r.foreach((p,_)=>{const w=ir(e,p);Zy(n,Dn(w))&&(h=JD(i,h,w,_,o,s,c))}),r.foreach((p,_)=>{const w=ir(e,p);Zy(n,Dn(w))||(h=JD(i,h,w,_,o,s,c))}),h}(i,n,_.path,_.children,r,o,s):((0,j.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||n.serverCache.isFiltered(),c=hw(i,n,_.path,_.children,r,o,h,s))}else if(e.type===zr.ACK_USER_WRITE){const _=e;c=_.revert?function u1(i,n,e,r,o,s){let c;if(null!=Wy(r,e))return n;{const h=new qy(r,n,o),p=n.eventCache.getNode();let _;if(En(e)||".priority"===Dn(e)){let w;if(n.serverCache.isFullyInitialized())w=om(r,Al(n));else{const I=n.serverCache.getNode();(0,j.hu)(I instanceof vn,"serverChildren would be complete if leaf node"),w=$y(r,I)}_=i.filter.updateFullNode(p,w,s)}else{const w=Dn(e);let I=dw(r,w,n.serverCache);null==I&&n.serverCache.isCompleteForChild(w)&&(I=p.getImmediateChild(w)),_=null!=I?i.filter.updateChild(p,w,I,xi(e),h,s):n.eventCache.getNode().hasChild(w)?i.filter.updateChild(p,w,vn.EMPTY_NODE,xi(e),h,s):p,_.isEmpty()&&n.serverCache.isFullyInitialized()&&(c=om(r,Al(n)),c.isLeafNode()&&(_=i.filter.updateFullNode(_,c,s)))}return c=n.serverCache.isFullyInitialized()||null!=Wy(r,zn()),em(n,_,c,i.filter.filtersNodes())}}(i,n,_.path,r,o,s):function d1(i,n,e,r,o,s,c){if(null!=Wy(o,e))return n;const h=n.serverCache.isFiltered(),p=n.serverCache;if(null!=r.value){if(En(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return Yy(i,n,e,p.getNode().getChild(e),o,s,h,c);if(En(e)){let _=new Si(null);return p.getNode().forEachChild(ja,(w,I)=>{_=_.set(new ti(w),I)}),hw(i,n,e,_,o,s,h,c)}return n}{let _=new Si(null);return r.foreach((w,I)=>{const A=ir(e,w);p.isCompleteForPath(A)&&(_=_.set(w,p.getNode().getChild(A)))}),hw(i,n,e,_,o,s,h,c)}}(i,n,_.path,_.affectedTree,r,o,s)}else{if(e.type!==zr.LISTEN_COMPLETE)throw(0,j.g5)("Unknown operation type: "+e.type);c=function nI(i,n,e,r,o){const s=n.serverCache;return XD(i,t1(n,s.getNode(),s.isFullyInitialized()||En(e),s.isFiltered()),e,r,KD,o)}(i,n,e.path,r,s)}const p=s.getChanges();return function Hs(i,n,e){const r=n.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=lg(i);(e.length>0||!i.eventCache.isFullyInitialized()||o&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&e.push(Oy(lg(n)))}}(n,c,p),{viewCache:c,changes:p}}(i.processor_,o,n,e,r);return function l1(i,n){(0,j.hu)(n.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,j.hu)(n.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,s.viewCache),(0,j.hu)(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=s.viewCache,oI(i,s.changes,s.viewCache.eventCache.getNode(),null)}function oI(i,n,e,r){return function zL(i,n,e,r){const o=[],s=[];return n.forEach(c=>{"child_changed"===c.type&&i.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function Ny(i,n){return{type:"child_moved",snapshotNode:n,childName:i}}(c.childName,c.snapshotNode))}),sg(i,o,"child_removed",n,r,e),sg(i,o,"child_added",n,r,e),sg(i,o,"child_moved",s,r,e),sg(i,o,"child_changed",n,r,e),sg(i,o,"value",n,r,e),o}(i.eventGenerator_,n,e,r?[r]:i.eventRegistrations_)}let ug,sm;class sI{constructor(){this.views=new Map}}function hg(i,n,e,r){const o=n.source.queryId;if(null!==o){const s=i.views.get(o);return(0,j.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Ga(s,n,e,r)}{let s=[];for(const c of i.views.values())s=s.concat(Ga(c,n,e,r));return s}}function g1(i,n,e,r,o){const c=i.views.get(n._queryIdentifier);if(!c){let h=om(e,o?r:null),p=!1;h?p=!0:r instanceof vn?(h=$y(e,r),p=!1):(h=vn.EMPTY_NODE,p=!1);const _=ag(new Ho(h,p,!1),new Ho(r,o,!1));return new h1(n,_)}return c}function pw(i){const n=[];for(const e of i.views.values())e.query._queryParams.loadsAllData()||n.push(e);return n}function Dc(i,n){let e=null;for(const r of i.views.values())e=e||m1(r,n);return e}function Qy(i,n){return n._queryParams.loadsAllData()?Xy(i):i.views.get(n._queryIdentifier)}function Ml(i,n){return null!=Qy(i,n)}function Fd(i){return null!=Xy(i)}function Xy(i){for(const n of i.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let v1=1;class b1{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Si(null),this.pendingWriteTree_=function cw(){return{visibleWrites:Zt.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Jy(i,n,e,r,o){return function r1(i,n,e,r,o){(0,j.hu)(r>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),i.allWrites.push({path:n,snap:e,writeId:r,visible:o}),o&&(i.visibleWrites=tm(i.visibleWrites,n,e)),i.lastWriteId=r}(i.pendingWriteTree_,n,e,r,o),o?kl(i,new Rd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,e)):[]}function Wa(i,n,e=!1){const r=function $D(i,n){for(let e=0;e<i.allWrites.length;e++){const r=i.allWrites[e];if(r.writeId===n)return r}return null}(i.pendingWriteTree_,n);if(function GD(i,n){const e=i.allWrites.findIndex(h=>h.writeId===n);(0,j.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=i.allWrites[e];i.allWrites.splice(e,1);let o=r.visible,s=!1,c=i.allWrites.length-1;for(;o&&c>=0;){const h=i.allWrites[c];h.visible&&(c>=e&&Nd(h,r.path)?o=!1:pa(r.path,h.path)&&(s=!0)),c--}return!!o&&(s?(function im(i){i.visibleWrites=qD(i.allWrites,WD,zn()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(r.snap?i.visibleWrites=n1(i.visibleWrites,r.path):Zr(r.children,p=>{i.visibleWrites=n1(i.visibleWrites,ir(r.path,p))}),!0))}(i.pendingWriteTree_,n)){let s=new Si(null);return null!=r.snap?s=s.set(zn(),!0):Zr(r.children,c=>{s=s.set(new ti(c),!0)}),kl(i,new By(r.path,s,e))}return[]}function Ic(i,n,e){return kl(i,new Rd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,e))}function fg(i,n,e,r,o=!1){const s=n._path,c=i.syncPointTree_.get(s);let h=[];if(c&&("default"===n._queryIdentifier||Ml(c,n))){const p=function dI(i,n,e,r){const o=n._queryIdentifier,s=[];let c=[];const h=Fd(i);if("default"===o)for(const[p,_]of i.views.entries())c=c.concat(rI(_,e,r)),iI(_)&&(i.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=i.views.get(o);p&&(c=c.concat(rI(p,e,r)),iI(p)&&(i.views.delete(o),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Fd(i)&&s.push(new(function lI(){return(0,j.hu)(ug,"Reference.ts has not been loaded"),ug}())(n._repo,n._path)),{removed:s,events:c}}(c,n,e,r);(function Ky(i){return 0===i.views.size})(c)&&(i.syncPointTree_=i.syncPointTree_.remove(s));const _=p.removed;if(h=p.events,!o){const w=-1!==_.findIndex(A=>A._queryParams.loadsAllData()),I=i.syncPointTree_.findOnPath(s,(A,P)=>Fd(P));if(w&&!I){const A=i.syncPointTree_.subtree(s);if(!A.isEmpty()){const P=function C1(i){return i.fold((n,e,r)=>{if(e&&Fd(e))return[Xy(e)];{let o=[];return e&&(o=pw(e)),Zr(r,(s,c)=>{o=o.concat(c)}),o}})}(A);for(let B=0;B<P.length;++B){const Y=P[B],ee=Y.query,ve=vw(i,Y);i.listenProvider_.startListening(gg(ee),pg(i,ee),ve.hashFn,ve.onComplete)}}}!I&&_.length>0&&!r&&(w?i.listenProvider_.stopListening(gg(n),null):_.forEach(A=>{const P=i.queryToTagMap.get(tv(A));i.listenProvider_.stopListening(gg(A),P)}))}!function D1(i,n){for(let e=0;e<n.length;++e){const r=n[e];if(!r._queryParams.loadsAllData()){const o=tv(r),s=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(s)}}}(i,_)}return h}function gw(i,n,e,r){const o=hh(i,r);if(null!=o){const s=bw(o),c=s.path,h=s.queryId,p=Vo(c,n);return fI(i,c,new Rd(rw(h),p,e))}return[]}function _w(i,n,e,r=!1){const o=n._path;let s=null,c=!1;i.syncPointTree_.foreachOnPath(o,(A,P)=>{const B=Vo(A,o);s=s||Dc(P,B),c=c||Fd(P)});let p,h=i.syncPointTree_.get(o);h?(c=c||Fd(h),s=s||Dc(h,zn())):(h=new sI,i.syncPointTree_=i.syncPointTree_.set(o,h)),null!=s?p=!0:(p=!1,s=vn.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((P,B)=>{const Y=Dc(B,zn());Y&&(s=s.updateImmediateChild(P,Y))}));const _=Ml(h,n);if(!_&&!n._queryParams.loadsAllData()){const A=tv(n);(0,j.hu)(!i.queryToTagMap.has(A),"View does not exist, but we have a tag");const P=function I1(){return v1++}();i.queryToTagMap.set(A,P),i.tagToQueryMap.set(P,A)}let I=function cI(i,n,e,r,o,s){const c=g1(i,n,r,o,s);return i.views.has(n._queryIdentifier)||i.views.set(n._queryIdentifier,c),function p1(i,n){i.eventRegistrations_.push(n)}(c,e),function mw(i,n){const e=i.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ti,(s,c)=>{r.push(Zf(s,c))}),e.isFullyInitialized()&&r.push(Oy(e.getNode())),oI(i,r,e.getNode(),n)}(c,e)}(h,n,e,jy(i.pendingWriteTree_,o),s,p);if(!_&&!c&&!r){const A=Qy(h,n);I=I.concat(function T1(i,n,e){const r=n._path,o=pg(i,n),s=vw(i,e),c=i.listenProvider_.startListening(gg(n),o,s.hashFn,s.onComplete),h=i.syncPointTree_.subtree(r);if(o)(0,j.hu)(!Fd(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((_,w,I)=>{if(!En(_)&&w&&Fd(w))return[Xy(w).query];{let A=[];return w&&(A=A.concat(pw(w).map(P=>P.query))),Zr(I,(P,B)=>{A=A.concat(B)}),A}});for(let _=0;_<p.length;++_){const w=p[_];i.listenProvider_.stopListening(gg(w),pg(i,w))}}return c}(i,n,A))}return I}function mg(i,n,e){const o=i.pendingWriteTree_,s=i.syncPointTree_.findOnPath(n,(c,h)=>{const _=Dc(h,Vo(c,n));if(_)return _});return cg(o,n,s,e,!0)}function kl(i,n){return hI(n,i.syncPointTree_,null,jy(i.pendingWriteTree_,zn()))}function hI(i,n,e,r){if(En(i.path))return yw(i,n,e,r);{const o=n.get(zn());null==e&&null!=o&&(e=Dc(o,zn()));let s=[];const c=Dn(i.path),h=i.operationForChild(c),p=n.children.get(c);if(p&&h){const _=e?e.getImmediateChild(c):null,w=uw(r,c);s=s.concat(hI(h,p,_,w))}return o&&(s=s.concat(hg(o,i,r,e))),s}}function yw(i,n,e,r){const o=n.get(zn());null==e&&null!=o&&(e=Dc(o,zn()));let s=[];return n.children.inorderTraversal((c,h)=>{const p=e?e.getImmediateChild(c):null,_=uw(r,c),w=i.operationForChild(c);w&&(s=s.concat(yw(w,h,p,_)))}),o&&(s=s.concat(hg(o,i,r,e))),s}function vw(i,n){const e=n.query,r=pg(i,e);return{hashFn:()=>(function fw(i){return i.viewCache_.serverCache.getNode()}(n)||vn.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function x1(i,n,e){const r=hh(i,e);if(r){const o=bw(r),s=o.path,c=o.queryId,h=Vo(s,n);return fI(i,s,new Jf(rw(c),h))}return[]}(i,e._path,r):function WL(i,n){return kl(i,new Jf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(i,e._path);{const s=function cD(i,n){let e="Unknown Error";"too_big"===i?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?e="Client doesn't have permission to access the desired data.":"unavailable"===i&&(e="The service is unavailable");const r=new Error(i+" at "+n._path.toString()+": "+e);return r.code=i.toUpperCase(),r}(o,e);return fg(i,e,null,s)}}}}function pg(i,n){const e=tv(n);return i.queryToTagMap.get(e)}function tv(i){return i._path.toString()+"$"+i._queryIdentifier}function hh(i,n){return i.tagToQueryMap.get(n)}function bw(i){const n=i.indexOf("$");return(0,j.hu)(-1!==n&&n<i.length-1,"Bad queryKey."),{queryId:i.substr(n+1),path:new ti(i.substr(0,n))}}function fI(i,n,e){const r=i.syncPointTree_.get(n);return(0,j.hu)(r,"Missing sync point for query tag that we're tracking"),hg(r,e,jy(i.pendingWriteTree_,n),null)}function gg(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(function y1(){return(0,j.hu)(sm,"Reference.ts has not been loaded"),sm}())(i._repo,i._path):i}class ww{constructor(n){this.node_=n}getImmediateChild(n){const e=this.node_.getImmediateChild(n);return new ww(e)}node(){return this.node_}}class xw{constructor(n,e){this.syncTree_=n,this.path_=e}getImmediateChild(n){const e=ir(this.path_,n);return new xw(this.syncTree_,e)}node(){return mg(this.syncTree_,this.path_)}}const mI=function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i},nv=function(i,n,e){return i&&"object"==typeof i?((0,j.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?S1(i[".sv"],n,e):"object"==typeof i[".sv"]?iv(i[".sv"],n):void(0,j.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},S1=function(i,n,e){if("timestamp"===i)return e.timestamp;(0,j.hu)(!1,"Unexpected server value: "+i)},iv=function(i,n,e){i.hasOwnProperty("increment")||(0,j.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const r=i.increment;"number"!=typeof r&&(0,j.hu)(!1,"Unexpected increment value: "+r);const o=n.node();if((0,j.hu)(null!==o&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},pI=function(i,n,e,r){return Cw(n,new xw(e,i),r)},Ew=function(i,n,e){return Cw(i,new ww(n),e)};function Cw(i,n,e){const r=i.getPriority().val(),o=nv(r,n.getImmediateChild(".priority"),e);let s;if(i.isLeafNode()){const c=i,h=nv(c.getValue(),n,e);return h!==c.getValue()||o!==c.getPriority().val()?new Tl(h,hr(o)):i}{const c=i;return s=c,o!==c.getPriority().val()&&(s=s.updatePriority(new Tl(o))),c.forEachChild(Ti,(h,p)=>{const _=Cw(p,n.getImmediateChild(h),e);_!==p&&(s=s.updateImmediateChild(h,_))}),s}}class Dw{constructor(n="",e=null,r={children:{},childCount:0}){this.name=n,this.parent=e,this.node=r}}function rv(i,n){let e=n instanceof ti?n:new ti(n),r=i,o=Dn(e);for(;null!==o;){const s=(0,j.DV)(r.node.children,o)||{children:{},childCount:0};r=new Dw(o,r,s),e=xi(e),o=Dn(e)}return r}function fh(i){return i.node.value}function Iw(i,n){i.node.value=n,yI(i)}function Tw(i){return i.node.childCount>0}function ov(i,n){Zr(i.node.children,(e,r)=>{n(new Dw(e,i,r))})}function A1(i,n,e,r){e&&!r&&n(i),ov(i,o=>{A1(o,n,!0,r)}),e&&r&&n(i)}function am(i){return new ti(null===i.parent?i.name:am(i.parent)+"/"+i.name)}function yI(i){null!==i.parent&&function sv(i,n,e){const r=function gI(i){return void 0===fh(i)&&!Tw(i)}(e),o=(0,j.r3)(i.node.children,n);r&&o?(delete i.node.children[n],i.node.childCount--,yI(i)):!r&&!o&&(i.node.children[n]=e.node,i.node.childCount++,yI(i))}(i.parent,i.name,i)}const M1=/[\[\].#$\/\u0000-\u001F\u007F]/,k1=/[\[\].#$\u0000-\u001F\u007F]/,_g=10485760,av=function(i){return"string"==typeof i&&0!==i.length&&!M1.test(i)},qa=function(i){return"string"==typeof i&&0!==i.length&&!k1.test(i)},jr=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!eh(i)||i&&"object"==typeof i&&(0,j.r3)(i,".sv")},zo=function(i,n,e,r){r&&void 0===n||Ld((0,j.gK)(i,"value"),n,e)},Ld=function(i,n,e){const r=e instanceof ti?new Z0(e,i):e;if(void 0===n)throw new Error(i+"contains undefined "+Dl(r));if("function"==typeof n)throw new Error(i+"contains a function "+Dl(r)+" with contents = "+n.toString());if(eh(n))throw new Error(i+"contains "+n.toString()+" "+Dl(r));if("string"==typeof n&&n.length>_g/3&&(0,j.ug)(n)>_g)throw new Error(i+"contains a string greater than "+_g+" utf8 bytes "+Dl(r)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let o=!1,s=!1;if(Zr(n,(c,h)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!av(c)))throw new Error(i+" contains an invalid key ("+c+") "+Dl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Dy(i,n){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(n),i.byteLength_+=(0,j.ug)(n),Iy(i)})(r,c),Ld(i,h,r),function Wk(i){const n=i.parts_.pop();i.byteLength_-=(0,j.ug)(n),i.parts_.length>0&&(i.byteLength_-=1)}(r)}),o&&s)throw new Error(i+' contains ".value" child '+Dl(r)+" in addition to actual children.")}},lv=function(i,n,e,r){if(r&&void 0===n)return;const o=(0,j.gK)(i,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");const s=[];Zr(n,(c,h)=>{const p=new ti(c);if(Ld(o,h,ir(e,p)),".priority"===xy(p)&&!jr(h))throw new Error(o+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(i,n){let e,r;for(e=0;e<n.length;e++){r=n[e];const s=Ey(r);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!av(s[c]))throw new Error(i+"contains an invalid key ("+s[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(ID);let o=null;for(e=0;e<n.length;e++){if(r=n[e],null!==o&&pa(o,r))throw new Error(i+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,s)},Ud=function(i,n,e){if(!e||void 0!==n){if(eh(n))throw new Error((0,j.gK)(i,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jr(n))throw new Error((0,j.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Rl=function(i,n,e,r){if(!(r&&void 0===e||av(e)))throw new Error((0,j.gK)(i,n)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Pl=function(i,n,e,r){if(!(r&&void 0===e||qa(e)))throw new Error((0,j.gK)(i,n)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},lm=function(i,n,e,r){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Pl(i,n,e,r)},wo=function(i,n){if(".info"===Dn(n))throw new Error(i+" failed = Can't modify data under /.info/")},mh=function(i,n){const e=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!av(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==e.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),qa(i)}(e))throw new Error((0,j.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class cm{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Tc(i,n){let e=null;for(let r=0;r<n.length;r++){const o=n[r],s=o.getPath();null!==e&&!Ec(s,e.path)&&(i.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(o)}e&&i.eventLists_.push(e)}function ph(i,n,e){Tc(i,e),Sw(i,r=>Ec(r,n))}function Ts(i,n,e){Tc(i,e),Sw(i,r=>pa(r,n)||pa(n,r))}function Sw(i,n){i.recursionDepth_++;let e=!0;for(let r=0;r<i.eventLists_.length;r++){const o=i.eventLists_[r];o&&(n(o.path)?(vI(i.eventLists_[r]),i.eventLists_[r]=null):e=!1)}e&&(i.eventLists_=[]),i.recursionDepth_--}function vI(i){for(let n=0;n<i.events.length;n++){const e=i.events[n];if(null!==e){i.events[n]=null;const r=e.getEventRunner();Ju&&lo("event: "+e.toString()),Hf(r)}}}const Aw="repo_interrupt",bI=25;class wI{constructor(n,e,r,o){this.repoInfo_=n,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cm,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=og(),this.transactionQueueTree_=new Dw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Mw(i){const e=i.infoData_.getNode(new ti(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function dm(i){return mI({timestamp:Mw(i)})}function cv(i,n,e,r,o){i.dataUpdateCount++;const s=new ti(n);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(n,e):e;let c=[];if(o)if(r){const p=(0,j.UI)(e,_=>hr(_));c=function E1(i,n,e,r){const o=hh(i,r);if(o){const s=bw(o),c=s.path,h=s.queryId,p=Vo(c,n),_=Si.fromObject(e);return fI(i,c,new $a(rw(h),p,_))}return[]}(i.serverSyncTree_,s,p,o)}else{const p=hr(e);c=gw(i.serverSyncTree_,s,p,o)}else if(r){const p=(0,j.UI)(e,_=>hr(_));c=function ev(i,n,e){const r=Si.fromObject(e);return kl(i,new $a({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,r))}(i.serverSyncTree_,s,p)}else{const p=hr(e);c=Ic(i.serverSyncTree_,s,p)}let h=s;c.length>0&&(h=um(i,s)),Ts(i.eventQueue_,h,c)}function EI(i,n){CI(i,"connected",n),!1===n&&function YL(i){Ol(i,"onDisconnectEvents");const n=dm(i),e=og();Ly(i.onDisconnect_,zn(),(o,s)=>{const c=pI(o,s,i.serverSyncTree_,n);kd(e,o,c)});let r=[];Ly(e,zn(),(o,s)=>{r=r.concat(Ic(i.serverSyncTree_,o,s));const c=Pw(i,o);um(i,c)}),i.onDisconnect_=og(),Ts(i.eventQueue_,zn(),r)}(i)}function CI(i,n,e){const r=new ti("/.info/"+n),o=hr(e);i.infoData_.updateSnapshot(r,o);const s=Ic(i.infoSyncTree_,r,o);Ts(i.eventQueue_,r,s)}function dv(i){return i.nextWriteId_++}function DI(i,n,e,r,o){Ol(i,"set",{path:n.toString(),value:e,priority:r});const s=dm(i),c=hr(e,r),h=mg(i.serverSyncTree_,n),p=Ew(c,h,s),_=dv(i),w=Jy(i.serverSyncTree_,n,p,_,!0);Tc(i.eventQueue_,w),i.server_.put(n.toString(),c.val(!0),(A,P)=>{const B="ok"===A;B||co("set at "+n+" failed: "+A);const Y=Wa(i.serverSyncTree_,_,!B);Ts(i.eventQueue_,n,Y),Sc(0,o,A,P)});const I=Pw(i,n);um(i,I),Ts(i.eventQueue_,I,[])}function O1(i,n,e){i.server_.onDisconnectCancel(n.toString(),(r,o)=>{"ok"===r&&dh(i.onDisconnect_,n),Sc(0,e,r,o)})}function II(i,n,e,r){const o=hr(e);i.server_.onDisconnectPut(n.toString(),o.val(!0),(s,c)=>{"ok"===s&&kd(i.onDisconnect_,n,o),Sc(0,r,s,c)})}function bg(i,n,e){let r;r=".info"===Dn(n._path)?fg(i.infoSyncTree_,n,e):fg(i.serverSyncTree_,n,e),ph(i.eventQueue_,n._path,r)}function wg(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Aw)}function Ol(i,...n){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),lo(e,...n)}function Sc(i,n,e,r){n&&Hf(()=>{if("ok"===e)n(null);else{const o=(e||"error").toUpperCase();let s=o;r&&(s+=": "+r);const c=new Error(s);c.code=o,n(c)}})}function gh(i,n,e){return mg(i.serverSyncTree_,n,e)||vn.EMPTY_NODE}function uv(i,n=i.transactionQueueTree_){if(n||Rw(i,n),fh(n)){const e=xg(i,n);(0,j.hu)(e.length>0,"Sending zero length transaction queue"),e.every(o=>0===o.status)&&function L1(i,n,e){const r=e.map(_=>_.currentWriteId),o=gh(i,n,r);let s=o;const c=o.hash();for(let _=0;_<e.length;_++){const w=e[_];(0,j.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const I=Vo(n,w.path);s=s.updateChild(I,w.currentOutputSnapshotRaw)}const h=s.val(!0),p=n;i.server_.put(p.toString(),h,_=>{Ol(i,"transaction put response",{path:p.toString(),status:_});let w=[];if("ok"===_){const I=[];for(let A=0;A<e.length;A++)e[A].status=2,w=w.concat(Wa(i.serverSyncTree_,e[A].currentWriteId)),e[A].onComplete&&I.push(()=>e[A].onComplete(null,!0,e[A].currentOutputSnapshotResolved)),e[A].unwatcher();Rw(i,rv(i.transactionQueueTree_,n)),uv(i,i.transactionQueueTree_),Ts(i.eventQueue_,n,w);for(let A=0;A<I.length;A++)Hf(I[A])}else{if("datastale"===_)for(let I=0;I<e.length;I++)e[I].status=3===e[I].status?4:0;else{co("transaction at "+p.toString()+" failed: "+_);for(let I=0;I<e.length;I++)e[I].status=4,e[I].abortReason=_}um(i,n)}},c)}(i,am(n),e)}else Tw(n)&&ov(n,e=>{uv(i,e)})}function um(i,n){const e=hv(i,n),r=am(e);return function U1(i,n,e){if(0===n.length)return;const r=[];let o=[];const c=n.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<n.length;h++){const p=n[h],_=Vo(e,p.path);let I,w=!1;if((0,j.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,I=p.abortReason,o=o.concat(Wa(i.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=bI)w=!0,I="maxretry",o=o.concat(Wa(i.serverSyncTree_,p.currentWriteId,!0));else{const A=gh(i,p.path,c);p.currentInputSnapshot=A;const P=n[h].update(A.val());if(void 0!==P){Ld("transaction failed: Data returned ",P,p.path);let B=hr(P);"object"==typeof P&&null!=P&&(0,j.r3)(P,".priority")||(B=B.updatePriority(A.getPriority()));const ee=p.currentWriteId,ve=dm(i),Ae=Ew(B,A,ve);p.currentOutputSnapshotRaw=B,p.currentOutputSnapshotResolved=Ae,p.currentWriteId=dv(i),c.splice(c.indexOf(ee),1),o=o.concat(Jy(i.serverSyncTree_,p.path,Ae,p.currentWriteId,p.applyLocally)),o=o.concat(Wa(i.serverSyncTree_,ee,!0))}else w=!0,I="nodata",o=o.concat(Wa(i.serverSyncTree_,p.currentWriteId,!0))}Ts(i.eventQueue_,e,o),o=[],w&&(n[h].status=2,setTimeout(n[h].unwatcher,Math.floor(0)),n[h].onComplete&&r.push("nodata"===I?()=>n[h].onComplete(null,!1,n[h].currentInputSnapshot):()=>n[h].onComplete(new Error(I),!1,null)))}Rw(i,i.transactionQueueTree_);for(let h=0;h<r.length;h++)Hf(r[h]);uv(i,i.transactionQueueTree_)}(i,xg(i,e),r),r}function hv(i,n){let e,r=i.transactionQueueTree_;for(e=Dn(n);null!==e&&void 0===fh(r);)r=rv(r,e),e=Dn(n=xi(n));return r}function xg(i,n){const e=[];return Eg(i,n,e),e.sort((r,o)=>r.order-o.order),e}function Eg(i,n,e){const r=fh(n);if(r)for(let o=0;o<r.length;o++)e.push(r[o]);ov(n,o=>{Eg(i,o,e)})}function Rw(i,n){const e=fh(n);if(e){let r=0;for(let o=0;o<e.length;o++)2!==e[o].status&&(e[r]=e[o],r++);e.length=r,Iw(n,e.length>0?e:void 0)}ov(n,r=>{Rw(i,r)})}function Pw(i,n){const e=am(hv(i,n)),r=rv(i.transactionQueueTree_,n);return function _I(i,n,e){let r=e?i:i.parent;for(;null!==r;){if(n(r))return!0;r=r.parent}}(r,o=>{Ow(i,o)}),Ow(i,r),A1(r,o=>{Ow(i,o)}),e}function Ow(i,n){const e=fh(n);if(e){const r=[];let o=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,j.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,j.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),o=o.concat(Wa(i.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&r.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Iw(n,void 0):e.length=s+1,Ts(i.eventQueue_,am(n),o);for(let c=0;c<r.length;c++)Hf(r[c])}}const fv=function(i,n){const e=V1(i),r=e.namespace;return"firebase.com"===e.domain&&Ha(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&Ha("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&co("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new U0(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,n,"",r!==e.subdomain),path:new ti(e.pathString)}},V1=function(i){let n="",e="",r="",o="",s="",c=!0,h="https",p=443;if("string"==typeof i){let _=i.indexOf("//");_>=0&&(h=i.substring(0,_-1),i=i.substring(_+2));let w=i.indexOf("/");-1===w&&(w=i.length);let I=i.indexOf("?");-1===I&&(I=i.length),n=i.substring(0,Math.min(w,I)),w<I&&(o=function Nw(i){let n="";const e=i.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let o=e[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}n+="/"+o}return n}(i.substring(w,I)));const A=function B1(i){const n={};"?"===i.charAt(0)&&(i=i.substring(1));for(const e of i.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):co(`Invalid query segment '${e}' in query '${i}'`)}return n}(i.substring(Math.min(i.length,I)));_=n.indexOf(":"),_>=0?(c="https"===h||"wss"===h,p=parseInt(n.substring(_+1),10)):_=n.length;const P=n.slice(0,_);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const B=n.indexOf(".");r=n.substring(0,B).toLowerCase(),e=n.substring(B+1),s=r}"ns"in A&&(s=A.ns)}return{host:n,port:p,domain:e,subdomain:r,secure:c,scheme:h,pathString:o,namespace:s}},SI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",AI=function(){let i=0;const n=[];return function(e){const r=e===i;let o;i=e;const s=new Array(8);for(o=7;o>=0;o--)s[o]=SI.charAt(e%64),e=Math.floor(e/64);(0,j.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(r){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=SI.charAt(n[o]);return(0,j.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class Fw{constructor(n,e,r,o){this.eventType=n,this.eventRegistration=e,this.snapshot=r,this.prevName=o}getPath(){const n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,j.Wl)(this.snapshot.exportVal())}}class Lw{constructor(n,e,r){this.eventRegistration=n,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Uw{constructor(n,e){this.snapshotCallback=n,this.cancelCallback=e}onValue(n,e){this.snapshotCallback.call(null,n,e)}onCancel(n){return(0,j.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class MI{constructor(n,e){this._repo=n,this._path=e}cancel(){const n=new j.BH;return O1(this._repo,this._path,n.wrapCallback(()=>{})),n.promise}remove(){wo("OnDisconnect.remove",this._path);const n=new j.BH;return II(this._repo,this._path,null,n.wrapCallback(()=>{})),n.promise}set(n){wo("OnDisconnect.set",this._path),zo("OnDisconnect.set",n,this._path,!1);const e=new j.BH;return II(this._repo,this._path,n,e.wrapCallback(()=>{})),e.promise}setWithPriority(n,e){wo("OnDisconnect.setWithPriority",this._path),zo("OnDisconnect.setWithPriority",n,this._path,!1),Ud("OnDisconnect.setWithPriority",e,!1);const r=new j.BH;return function N1(i,n,e,r,o){const s=hr(e,r);i.server_.onDisconnectPut(n.toString(),s.val(!0),(c,h)=>{"ok"===c&&kd(i.onDisconnect_,n,s),Sc(0,o,c,h)})}(this._repo,this._path,n,e,r.wrapCallback(()=>{})),r.promise}update(n){wo("OnDisconnect.update",this._path),lv("OnDisconnect.update",n,this._path,!1);const e=new j.BH;return function kw(i,n,e,r){if((0,j.xb)(e))return lo("onDisconnect().update() called with empty data.  Don't do anything."),void Sc(0,r,"ok",void 0);i.server_.onDisconnectMerge(n.toString(),e,(o,s)=>{"ok"===o&&Zr(e,(c,h)=>{const p=hr(h);kd(i.onDisconnect_,ir(n,c),p)}),Sc(0,r,o,s)})}(this._repo,this._path,n,e.wrapCallback(()=>{})),e.promise}}class Ss{constructor(n,e,r,o){this._repo=n,this._path=e,this._queryParams=r,this._orderByCalled=o}get key(){return En(this._path)?null:xy(this._path)}get ref(){return new _a(this._repo,this._path)}get _queryIdentifier(){const n=LD(this._queryParams),e=nh(n);return"{}"===e?"default":e}get _queryObject(){return LD(this._queryParams)}isEqual(n){if(!((n=(0,j.m9)(n))instanceof Ss))return!1;const e=this._repo===n._repo,r=Ec(this._path,n._path);return e&&r&&this._queryIdentifier===n._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Y0(i){let n="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)""!==i.pieces_[e]&&(n+="/"+encodeURIComponent(String(i.pieces_[e])));return n||"/"}(this._path)}}function Cg(i,n){if(!0===i._orderByCalled)throw new Error(n+": You can't combine multiple orderBy calls.")}function Nl(i){let n=null,e=null;if(i.hasStart()&&(n=i.getIndexStartValue()),i.hasEnd()&&(e=i.getIndexEndValue()),i.getIndex()===ja){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==wc)throw new Error(r);if("string"!=typeof n)throw new Error(o)}if(i.hasEnd()){if(i.getIndexEndName()!==za)throw new Error(r);if("string"!=typeof e)throw new Error(o)}}else if(i.getIndex()===Ti){if(null!=n&&!jr(n)||null!=e&&!jr(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,j.hu)(i.getIndex()instanceof ND||i.getIndex()===tg,"unknown index type."),null!=n&&"object"==typeof n||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function hm(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class _a extends Ss{constructor(n,e){super(n,e,new ng,!1)}get parent(){const n=Cy(this._path);return null===n?null:new _a(this._repo,n)}get root(){let n=this;for(;null!==n.parent;)n=n.parent;return n}}class Fl{constructor(n,e,r){this._node=n,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const e=new ti(n),r=Bd(this.ref,n);return new Fl(this._node.getChild(e),r,Ti)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>n(new Fl(o,Bd(this.ref,r),Ti)))}hasChild(n){const e=new ti(n);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Dg(i,n){return(i=(0,j.m9)(i))._checkNotDeleted("ref"),void 0!==n?Bd(i._root,n):i._root}function mv(i,n){(i=(0,j.m9)(i))._checkNotDeleted("refFromURL");const e=fv(n,i._repo.repoInfo_.nodeAdmin);mh("refFromURL",e);const r=e.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&r.host!==i._repo.repoInfo_.host&&Ha("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+i._repo.repoInfo_.host+")"),Dg(i,e.path.toString())}function Bd(i,n){return null===Dn((i=(0,j.m9)(i))._path)?lm("child","path",n,!1):Pl("child","path",n,!1),new _a(i._repo,ir(i._path,n))}function fm(i,n){i=(0,j.m9)(i),wo("set",i._path),zo("set",n,i._path,!1);const e=new j.BH;return DI(i._repo,i._path,n,null,e.wrapCallback(()=>{})),e.promise}function kI(i,n){lv("update",n,i._path,!1);const e=new j.BH;return function P1(i,n,e,r){Ol(i,"update",{path:n.toString(),value:e});let o=!0;const s=dm(i),c={};if(Zr(e,(h,p)=>{o=!1,c[h]=pI(ir(n,h),hr(p),i.serverSyncTree_,s)}),o)lo("update() called with empty data.  Don't do anything."),Sc(0,r,"ok",void 0);else{const h=dv(i),p=function w1(i,n,e,r){!function GL(i,n,e,r){(0,j.hu)(r>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:n,children:e,writeId:r,visible:!0}),i.visibleWrites=Hy(i.visibleWrites,n,e),i.lastWriteId=r}(i.pendingWriteTree_,n,e,r);const o=Si.fromObject(e);return kl(i,new $a({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,o))}(i.serverSyncTree_,n,c,h);Tc(i.eventQueue_,p),i.server_.merge(n.toString(),e,(_,w)=>{const I="ok"===_;I||co("update at "+n+" failed: "+_);const A=Wa(i.serverSyncTree_,h,!I),P=A.length>0?um(i,n):n;Ts(i.eventQueue_,P,A),Sc(0,r,_,w)}),Zr(e,_=>{const w=Pw(i,ir(n,_));um(i,w)}),Ts(i.eventQueue_,n,[])}}(i._repo,i._path,n,e.wrapCallback(()=>{})),e.promise}function j1(i){i=(0,j.m9)(i);const n=new Uw(()=>{}),e=new Ig(n);return function R1(i,n,e){const r=function uI(i,n){const e=n._path;let r=null;i.syncPointTree_.foreachOnPath(e,(_,w)=>{const I=Vo(_,e);r=r||Dc(w,I)});let o=i.syncPointTree_.get(e);o?r=r||Dc(o,zn()):(o=new sI,i.syncPointTree_=i.syncPointTree_.set(e,o));const s=null!=r,c=s?new Ho(r,!0,!1):null;return function f1(i){return lg(i.viewCache_)}(g1(o,n,jy(i.pendingWriteTree_,n._path),s?c.getNode():vn.EMPTY_NODE,s))}(i.serverSyncTree_,n);return null!=r?Promise.resolve(r):i.server_.get(n).then(o=>{const s=hr(o).withIndex(n._queryParams.getIndex());let c;if(_w(i.serverSyncTree_,n,e,!0),n._queryParams.loadsAllData())c=Ic(i.serverSyncTree_,n._path,s);else{const h=pg(i.serverSyncTree_,n);c=gw(i.serverSyncTree_,n._path,s,h)}return Ts(i.eventQueue_,n._path,c),fg(i.serverSyncTree_,n,e,null,!0),s},o=>(Ol(i,"get for query "+(0,j.Wl)(n)+" failed: "+o),Promise.reject(new Error(o))))}(i._repo,i,e).then(r=>new Fl(r,new _a(i._repo,i._path),i._queryParams.getIndex()))}class Ig{constructor(n){this.callbackContext=n}respondsTo(n){return"value"===n}createEvent(n,e){const r=e._queryParams.getIndex();return new Fw("value",this,new Fl(n.snapshotNode,new _a(e._repo,e._path),r))}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,e){return this.callbackContext.hasCancelCallback?new Lw(this,n,e):null}matches(n){return n instanceof Ig&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Tg{constructor(n,e){this.eventType=n,this.callbackContext=e}respondsTo(n){let e="children_added"===n?"child_added":n;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(n,e){return this.callbackContext.hasCancelCallback?new Lw(this,n,e):null}createEvent(n,e){(0,j.hu)(null!=n.childName,"Child events should have a childName.");const r=Bd(new _a(e._repo,e._path),n.childName),o=e._queryParams.getIndex();return new Fw(n.type,this,new Fl(n.snapshotNode,r,o),n.prevName)}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof Tg&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function _h(i,n,e,r,o){let s;if("object"==typeof r&&(s=void 0,o=r),"function"==typeof r&&(s=r),o&&o.onlyOnce){const p=e,_=(w,I)=>{bg(i._repo,i,h),p(w,I)};_.userCallback=e.userCallback,_.context=e.context,e=_}const c=new Uw(e,s||void 0),h="value"===n?new Ig(c):new Tg(n,c);return function vg(i,n,e){let r;r=".info"===Dn(n._path)?_w(i.infoSyncTree_,n,e):_w(i.serverSyncTree_,n,e),ph(i.eventQueue_,n._path,r)}(i._repo,i,h),()=>bg(i._repo,i,h)}function gv(i,n,e,r){return _h(i,"value",n,e,r)}function _v(i,n,e,r){return _h(i,"child_added",n,e,r)}function yv(i,n,e,r){return _h(i,"child_changed",n,e,r)}function RI(i,n,e,r){return _h(i,"child_moved",n,e,r)}function Vw(i,n,e,r){return _h(i,"child_removed",n,e,r)}function Hw(i,n,e){let r=null;const o=e?new Uw(e):null;"value"===n?r=new Ig(o):n&&(r=new Tg(n,o)),bg(i._repo,i,r)}class ya{}class zw extends ya{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){zo("endAt",this._value,n._path,!0);const e=ch(n._queryParams,this._value,this._key);if(hm(e),Nl(e),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ss(n._repo,n._path,e,n._orderByCalled)}}class PI extends ya{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){zo("endBefore",this._value,n._path,!1);const e=function e1(i,n,e){let r;return r=ch(i,n,i.index_===ja||e?e:wc),r.endBeforeSet_=!0,r}(n._queryParams,this._value,this._key);if(hm(e),Nl(e),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ss(n._repo,n._path,e,n._orderByCalled)}}class jw extends ya{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){zo("startAt",this._value,n._path,!0);const e=ew(n._queryParams,this._value,this._key);if(hm(e),Nl(e),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ss(n._repo,n._path,e,n._orderByCalled)}}class NI extends ya{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){zo("startAfter",this._value,n._path,!1);const e=function Xf(i,n,e){let r;return r=ew(i,n,i.index_===ja||e?e:za),r.startAfterSet_=!0,r}(n._queryParams,this._value,this._key);if(hm(e),Nl(e),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ss(n._repo,n._path,e,n._orderByCalled)}}class LI extends ya{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ss(n._repo,n._path,function Jk(i,n){const e=i.copy();return e.limitSet_=!0,e.limit_=n,e.viewFrom_="l",e}(n._queryParams,this._limit),n._orderByCalled)}}class BI extends ya{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ss(n._repo,n._path,function ig(i,n){const e=i.copy();return e.limitSet_=!0,e.limit_=n,e.viewFrom_="r",e}(n._queryParams,this._limit),n._orderByCalled)}}class HI extends ya{constructor(n){super(),this._path=n}_apply(n){Cg(n,"orderByChild");const e=new ti(this._path);if(En(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ND(e),o=rg(n._queryParams,r);return Nl(o),new Ss(n._repo,n._path,o,!0)}}class vv extends ya{_apply(n){Cg(n,"orderByKey");const e=rg(n._queryParams,ja);return Nl(e),new Ss(n._repo,n._path,e,!0)}}class G1 extends ya{_apply(n){Cg(n,"orderByPriority");const e=rg(n._queryParams,Ti);return Nl(e),new Ss(n._repo,n._path,e,!0)}}class Gw extends ya{_apply(n){Cg(n,"orderByValue");const e=rg(n._queryParams,tg);return Nl(e),new Ss(n._repo,n._path,e,!0)}}class Ww extends ya{constructor(n,e){super(),this._value=n,this._key=e}_apply(n){if(zo("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new zw(this._value,this._key)._apply(new jw(this._value,this._key)._apply(n))}}function zs(i,...n){let e=(0,j.m9)(i);for(const r of n)e=r._apply(e);return e}(function aI(i){(0,j.hu)(!ug,"__referenceConstructor has already been defined"),ug=i})(_a),function _1(i){(0,j.hu)(!sm,"__referenceConstructor has already been defined"),sm=i}(_a);const jI={};function qw(i,n,e,r,o){let s=r||i.options.databaseURL;void 0===s&&(i.options.projectId||Ha("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),lo("Using default host for project ",i.options.projectId),s=`${i.options.projectId}-default-rtdb.firebaseio.com`);let p,_,c=fv(s,o),h=c.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${h.namespace}`,c=fv(s,o),h=c.repoInfo):p=!c.repoInfo.secure;const w=o&&p?new Wp(Wp.OWNER):new P0(i.name,i.options,n);mh("Invalid Firebase Database URL",c),En(c.path)||Ha("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function Kr(i,n,e,r){let o=jI[n.name];o||(o={},jI[n.name]=o);let s=o[i.toURLString()];return s&&Ha("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new wI(i,false,e,r),o[i.toURLString()]=s,s}(h,i,w,new kk(i.name,e));return new K1(I,i)}class K1{constructor(n,e){this._repoInternal=n,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xI(i,n,e){if(i.stats_=H0(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new Fy(i.repoInfo_,(r,o,s,c)=>{cv(i,r,o,s,c)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>EI(i,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,j.Wl)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new ah(i.repoInfo_,n,(r,o,s,c)=>{cv(i,r,o,s,c)},r=>{EI(i,r)},r=>{!function qL(i,n){Zr(n,(e,r)=>{CI(i,e,r)})}(i,r)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(r=>{i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(r=>{i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=function Pk(i,n){const e=i.toString();return V0[e]||(V0[e]=n()),V0[e]}(i.repoInfo_,()=>new VD(i.stats_,i.server_)),i.infoData_=new UD,i.infoSyncTree_=new b1({startListening:(r,o,s,c)=>{let h=[];const p=i.infoData_.getNode(r._path);return p.isEmpty()||(h=Ic(i.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),CI(i,"connected",!1),i.serverSyncTree_=new b1({startListening:(r,o,s,c)=>(i.server_.listen(r,s,o,(h,p)=>{const _=c(h,p);Ts(i.eventQueue_,r._path,_)}),[]),stopListening:(r,o)=>{i.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _a(this._repo,zn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Z1(i,n){const e=jI[n];(!e||e[i.key]!==i)&&Ha(`Database ${n}(${i.repoInfo_}) has already been deleted.`),wg(i),delete e[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){null===this._rootInternal&&Ha("Cannot call "+n+" on a deleted database.")}}function WI(){G0.IS_TRANSPORT_INITIALIZED&&co("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function qI(){WI(),oh.forceDisallow()}function Q1(){WI(),zf.forceDisallow(),oh.forceAllow()}function eR(i,n){$p(i,n)}const tR={".sv":"timestamp"};class Zw{constructor(n,e){this.committed=n,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ah.prototype.simpleListen=function(i,n){this.sendRequest("q",{p:i},n)},ah.prototype.echo=function(i,n){this.sendRequest("echo",{d:i},n)},function YI(i){fy(vi.SDK_VERSION),(0,vi._registerComponent)(new tr.wA("database",(n,{instanceIdentifier:e})=>qw(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,vi.registerVersion)(tD,"0.14.4",i),(0,vi.registerVersion)(tD,"0.14.4","esm2017")}();const Ya=new Yr.Yd("@firebase/database-compat"),va=function(i){Ya.warn("FIREBASE WARNING: "+i)};class iR{constructor(n){this._delegate=n}cancel(n){(0,j.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,j.Wj)("OnDisconnect.cancel","onComplete",n,!0);const e=this._delegate.cancel();return n&&e.then(()=>n(null),r=>n(r)),e}remove(n){(0,j.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,j.Wj)("OnDisconnect.remove","onComplete",n,!0);const e=this._delegate.remove();return n&&e.then(()=>n(null),r=>n(r)),e}set(n,e){(0,j.Dv)("OnDisconnect.set",1,2,arguments.length),(0,j.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(n);return e&&r.then(()=>e(null),o=>e(o)),r}setWithPriority(n,e,r){(0,j.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,j.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(n,e);return r&&o.then(()=>r(null),s=>r(s)),o}update(n,e){if((0,j.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){const o={};for(let s=0;s<n.length;++s)o[""+s]=n[s];n=o,va("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,j.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(n);return e&&r.then(()=>e(null),o=>e(o)),r}}class rR{constructor(n,e){this.committed=n,this.snapshot=e}toJSON(){return(0,j.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hd{constructor(n,e){this._database=n,this._delegate=e}val(){return(0,j.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,j.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,j.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,j.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(n){return(0,j.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),Pl("DataSnapshot.child","path",n,!1),new Hd(this._database,this._delegate.child(n))}hasChild(n){return(0,j.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Pl("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}getPriority(){return(0,j.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(n){return(0,j.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,j.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(e=>n(new Hd(this._database,e)))}hasChildren(){return(0,j.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,j.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,j.Dv)("DataSnapshot.ref",0,0,arguments.length),new as(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class xo{constructor(n,e){this.database=n,this._delegate=e}on(n,e,r,o){var s;(0,j.Dv)("Query.on",2,4,arguments.length),(0,j.Wj)("Query.on","callback",e,!1);const c=xo.getCancelAndContextArgs_("Query.on",r,o),h=(_,w)=>{e.call(c.context,new Hd(this.database,_),w)};h.userCallback=e,h.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(n){case"value":return gv(this._delegate,h,p),e;case"child_added":return _v(this._delegate,h,p),e;case"child_removed":return Vw(this._delegate,h,p),e;case"child_changed":return yv(this._delegate,h,p),e;case"child_moved":return RI(this._delegate,h,p),e;default:throw new Error((0,j.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(n,e,r){if((0,j.Dv)("Query.off",0,3,arguments.length),function(i,n,e){if(void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,j.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,n),(0,j.Wj)("Query.off","callback",e,!0),(0,j.lb)("Query.off","context",r,!0),e){const o=()=>{};o.userCallback=e,o.context=r,Hw(this._delegate,n,o)}else Hw(this._delegate,n)}get(){return j1(this._delegate).then(n=>new Hd(this.database,n))}once(n,e,r,o){(0,j.Dv)("Query.once",1,4,arguments.length),(0,j.Wj)("Query.once","callback",e,!0);const s=xo.getCancelAndContextArgs_("Query.once",r,o),c=new j.BH,h=(_,w)=>{const I=new Hd(this.database,_);e&&e.call(s.context,I,w),c.resolve(I)};h.userCallback=e,h.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),c.reject(_)};switch(n){case"value":gv(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":_v(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":Vw(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":yv(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":RI(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,j.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(n){return(0,j.Dv)("Query.limitToFirst",1,1,arguments.length),new xo(this.database,zs(this._delegate,function UI(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new LI(i)}(n)))}limitToLast(n){return(0,j.Dv)("Query.limitToLast",1,1,arguments.length),new xo(this.database,zs(this._delegate,function VI(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new BI(i)}(n)))}orderByChild(n){return(0,j.Dv)("Query.orderByChild",1,1,arguments.length),new xo(this.database,zs(this._delegate,function zI(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Pl("orderByChild","path",i,!1),new HI(i)}(n)))}orderByKey(){return(0,j.Dv)("Query.orderByKey",0,0,arguments.length),new xo(this.database,zs(this._delegate,function Vd(){return new vv}()))}orderByPriority(){return(0,j.Dv)("Query.orderByPriority",0,0,arguments.length),new xo(this.database,zs(this._delegate,function W1(){return new G1}()))}orderByValue(){return(0,j.Dv)("Query.orderByValue",0,0,arguments.length),new xo(this.database,zs(this._delegate,function yh(){return new Gw}()))}startAt(n=null,e){return(0,j.Dv)("Query.startAt",0,2,arguments.length),new xo(this.database,zs(this._delegate,function $w(i=null,n){return Rl("startAt","key",n,!0),new jw(i,n)}(n,e)))}startAfter(n=null,e){return(0,j.Dv)("Query.startAfter",0,2,arguments.length),new xo(this.database,zs(this._delegate,function FI(i,n){return Rl("startAfter","key",n,!0),new NI(i,n)}(n,e)))}endAt(n=null,e){return(0,j.Dv)("Query.endAt",0,2,arguments.length),new xo(this.database,zs(this._delegate,function $1(i,n){return Rl("endAt","key",n,!0),new zw(i,n)}(n,e)))}endBefore(n=null,e){return(0,j.Dv)("Query.endBefore",0,2,arguments.length),new xo(this.database,zs(this._delegate,function OI(i,n){return Rl("endBefore","key",n,!0),new PI(i,n)}(n,e)))}equalTo(n,e){return(0,j.Dv)("Query.equalTo",1,2,arguments.length),new xo(this.database,zs(this._delegate,function q1(i,n){return Rl("equalTo","key",n,!0),new Ww(i,n)}(n,e)))}toString(){return(0,j.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,j.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(n){if((0,j.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof xo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(n._delegate)}static getCancelAndContextArgs_(n,e,r){const o={cancel:void 0,context:void 0};if(e&&r)o.cancel=e,(0,j.Wj)(n,"cancel",o.cancel,!0),o.context=r,(0,j.lb)(n,"context",o.context,!0);else if(e)if("object"==typeof e&&null!==e)o.context=e;else{if("function"!=typeof e)throw new Error((0,j.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=e}return o}get ref(){return new as(this.database,new _a(this._delegate._repo,this._delegate._path))}}class as extends xo{constructor(n,e){super(n,new Ss(e._repo,e._path,new ng,!1)),this.database=n,this._delegate=e}getKey(){return(0,j.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(n){return(0,j.Dv)("Reference.child",1,1,arguments.length),"number"==typeof n&&(n=String(n)),new as(this.database,Bd(this._delegate,n))}getParent(){(0,j.Dv)("Reference.parent",0,0,arguments.length);const n=this._delegate.parent;return n?new as(this.database,n):null}getRoot(){return(0,j.Dv)("Reference.root",0,0,arguments.length),new as(this.database,this._delegate.root)}set(n,e){(0,j.Dv)("Reference.set",1,2,arguments.length),(0,j.Wj)("Reference.set","onComplete",e,!0);const r=fm(this._delegate,n);return e&&r.then(()=>e(null),o=>e(o)),r}update(n,e){if((0,j.Dv)("Reference.update",1,2,arguments.length),Array.isArray(n)){const o={};for(let s=0;s<n.length;++s)o[""+s]=n[s];n=o,va("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wo("Reference.update",this._delegate._path),(0,j.Wj)("Reference.update","onComplete",e,!0);const r=kI(this._delegate,n);return e&&r.then(()=>e(null),o=>e(o)),r}setWithPriority(n,e,r){(0,j.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,j.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function Bw(i,n,e){if(wo("setWithPriority",i._path),zo("setWithPriority",n,i._path,!1),Ud("setWithPriority",e,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const r=new j.BH;return DI(i._repo,i._path,n,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,n,e);return r&&o.then(()=>r(null),s=>r(s)),o}remove(n){(0,j.Dv)("Reference.remove",0,1,arguments.length),(0,j.Wj)("Reference.remove","onComplete",n,!0);const e=function z1(i){return wo("remove",i._path),fm(i,null)}(this._delegate);return n&&e.then(()=>n(null),r=>n(r)),e}transaction(n,e,r){(0,j.Dv)("Reference.transaction",1,3,arguments.length),(0,j.Wj)("Reference.transaction","transactionUpdate",n,!1),(0,j.Wj)("Reference.transaction","onComplete",e,!0),function(i,n,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,j.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function Kw(i,n,e){var r;if(i=(0,j.m9)(i),wo("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const o=null===(r=e?.applyLocally)||void 0===r||r,s=new j.BH,h=gv(i,()=>{});return function F1(i,n,e,r,o,s){Ol(i,"transaction on "+n);const c={path:n,update:e,onComplete:r,status:null,order:Id(),applyLocally:s,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=gh(i,n,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Ld("transaction failed: Data returned ",p,c.path),c.status=0;const _=rv(i.transactionQueueTree_,n),w=fh(_)||[];let I;w.push(c),Iw(_,w),"object"==typeof p&&null!==p&&(0,j.r3)(p,".priority")?(I=(0,j.DV)(p,".priority"),(0,j.hu)(jr(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(mg(i.serverSyncTree_,n)||vn.EMPTY_NODE).getPriority().val();const A=dm(i),P=hr(p,I),B=Ew(P,h,A);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=B,c.currentWriteId=dv(i);const Y=Jy(i.serverSyncTree_,n,B,c.currentWriteId,c.applyLocally);Ts(i.eventQueue_,n,Y),uv(i,i.transactionQueueTree_)}}(i._repo,i._path,n,(p,_,w)=>{let I=null;p?s.reject(p):(I=new Fl(w,new _a(i._repo,i._path),Ti),s.resolve(new Zw(_,I)))},h,o),s.promise}(this._delegate,n,{applyLocally:r}).then(s=>new rR(s.committed,new Hd(this.database,s.snapshot)));return e&&o.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),o}setPriority(n,e){(0,j.Dv)("Reference.setPriority",1,2,arguments.length),(0,j.Wj)("Reference.setPriority","onComplete",e,!0);const r=function pv(i,n){i=(0,j.m9)(i),wo("setPriority",i._path),Ud("setPriority",n,!1);const e=new j.BH;return DI(i._repo,ir(i._path,".priority"),n,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,n);return e&&r.then(()=>e(null),o=>e(o)),r}push(n,e){(0,j.Dv)("Reference.push",0,2,arguments.length),(0,j.Wj)("Reference.push","onComplete",e,!0);const r=function H1(i,n){i=(0,j.m9)(i),wo("push",i._path),zo("push",n,i._path,!0);const e=Mw(i._repo),r=AI(e),o=Bd(i,r),s=Bd(i,r);let c;return c=null!=n?fm(s,n).then(()=>s):Promise.resolve(s),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,n),o=r.then(c=>new as(this.database,c));e&&o.then(()=>e(null),c=>e(c));const s=new as(this.database,r);return s.then=o.then.bind(o),s.catch=o.catch.bind(o,void 0),s}onDisconnect(){return wo("Reference.onDisconnect",this._delegate._path),new iR(new MI(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Mc{constructor(n,e){this._delegate=n,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:qI,forceLongPolling:Q1}}useEmulator(n,e,r={}){!function Yw(i,n,e,r={}){(i=(0,j.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&Ha("Cannot call useEmulator() after instance has already been initialized.");const o=i._repoInternal;let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Ha('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Wp(Wp.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,j.Sg)(r.mockUserToken,i.app.options.projectId);s=new Wp(c)}!function Y1(i,n,e,r){i.repoInfo_=new U0(`${n}:${e}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),r&&(i.authTokenProvider_=r)}(o,n,e,s)}(this._delegate,n,e,r)}ref(n){if((0,j.Dv)("database.ref",0,1,arguments.length),n instanceof as){const e=mv(this._delegate,n.toString());return new as(this,e)}{const e=Dg(this._delegate,n);return new as(this,e)}}refFromURL(n){(0,j.Dv)("database.refFromURL",1,1,arguments.length);const r=mv(this._delegate,n);return new as(this,r)}goOffline(){return(0,j.Dv)("database.goOffline",0,0,arguments.length),function mm(i){(i=(0,j.m9)(i))._checkNotDeleted("goOffline"),wg(i._repo)}(this._delegate)}goOnline(){return(0,j.Dv)("database.goOnline",0,0,arguments.length),function J1(i){(i=(0,j.m9)(i))._checkNotDeleted("goOnline"),function TI(i){i.persistentConnection_&&i.persistentConnection_.resume(Aw)}(i._repo)}(this._delegate)}}Mc.ServerValue={TIMESTAMP:function ZI(){return tR}(),increment:i=>function QL(i){return{".sv":{increment:i}}}(i)};var XI=Object.freeze({__proto__:null,initStandalone:function oR({app:i,url:n,version:e,customAuthImpl:r,namespace:o,nodeAdmin:s=!1}){fy(e);const c=new tr.zt("auth-internal",new tr.H0("database-standalone"));return c.setComponent(new tr.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Mc(qw(i,c,void 0,n,s),i),namespace:o}}});const sR=Mc.ServerValue;function Sg(i){return null==i}function tT(i){return"function"==typeof i.set}function Qw(i,n){return tT(n)?n:i.ref(n)}function Xw(i,n){if(function JI(i){return"string"==typeof i}(i))return n.stringCase();if(tT(i))return n.firebaseCase();if(function eT(i){return"function"==typeof i.exportVal}(i))return n.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function pm(i,n,e="on",r=Uf.z){return new Nn.y(o=>{let s=null;return s=i[e](n,(c,h)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:h})}),"once"===e&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===e?{unsubscribe(){null!=s&&i.off(n,s)}}:{unsubscribe(){}}}).pipe((0,gt.U)(o=>{const{snapshot:s,prevKey:c}=o;let h=null;return s.exists()&&(h=s.key),{type:n,payload:s,prevKey:c,key:h}}),(0,ua.B)())}function nT(i,n){const e=i.length;for(let r=0;r<e;r++)if(i[r].payload.key===n)return r;return-1}function bv(i,n){const{payload:e,prevKey:r,key:o}=n,s=nT(i,o),c=function Jw(i,n){if(Sg(n))return 0;{const e=nT(i,n);return-1===e?i.length:e+1}}(i,r);switch(n.type){case"value":if(n.payload&&n.payload.exists()){let h=null;n.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,i=[...i,_],!1})}return i;case"child_added":if(s>-1){const h=i[s-1];(h&&h.key||null)!==r&&(i=i.filter(p=>p.payload.key!==e.key)).splice(c,0,n)}else{if(null==r)return[n,...i];(i=i.slice()).splice(c,0,n)}return i;case"child_removed":return i.filter(h=>h.payload.key!==e.key);case"child_changed":return i.map(h=>h.payload.key===o?n:h);case"child_moved":if(s>-1){const h=i.splice(s,1)[0];return(i=i.slice()).splice(c,0,h),i}return i;default:return i}}function wv(i){return(Sg(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function ex(i,n,e){return function lR(i,n,e){return pm(i,"value","once",e).pipe((0,ji.w)(r=>{const o=[(0,It.of)(r)];return n.forEach(s=>o.push(pm(i,s,"on",e))),(0,rs.T)(...o).pipe(Va(bv,[]))}),(0,Dd.x)())}(i,n=wv(n),e)}function tx(i,n,e){const r=(n=wv(n)).map(o=>pm(i,o,"on",e));return(0,rs.T)(...r)}function nx(i,n){return function(r,o){return Xw(r,{stringCase:()=>i.child(r)[n](o),firebaseCase:()=>r[n](o),snapshotCase:()=>r.ref[n](o)})}}function sT(i){return function(e){return e?Xw(e,{stringCase:()=>i.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):i.remove()}}function aT(i,n){return function(){return pm(i,"value","on",n)}}!function aR(i){i.INTERNAL.registerComponent(new tr.wA("database-compat",(n,{instanceIdentifier:e})=>{const r=n.getProvider("app-compat").getImmediate(),o=n.getProvider("database").getImmediate({identifier:e});return new Mc(o,r)},"PUBLIC").setServiceProps({Reference:as,Query:xo,Database:Mc,DataSnapshot:Hd,enableLogging:eR,INTERNAL:XI,ServerValue:sR}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.3.4")}(A0.Z);const uR=new d.OlP("angularfire2.realtimeDatabaseURL"),hR=new d.OlP("angularfire2.database.use-emulator");let fR=(()=>{class i{constructor(e,r,o,s,c,h,p,_,w,I,A,P,B,Y,ee){this.schedulers=h;const ve=p,Ae=(0,Vn.on)(e,c,r);_&&S0(Ae,c,w,A,P,B,I,Y),this.database=(0,Vn.cc)(`${Ae.name}.database.${o}`,"AngularFireDatabase",Ae.name,()=>{const _e=c.runOutsideAngular(()=>Ae.database(o||void 0));return ve&&_e.useEmulator(...ve),_e},[ve])}list(e,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>Qw(this.database,e));let s=o;return r&&(s=r(o)),function cR(i,n){const e=n.schedulers.outsideAngular,r=n.schedulers.ngZone.run(()=>i.ref);return{query:i,update:nx(r,"update"),set:nx(r,"set"),push:o=>r.push(o),remove:sT(r),snapshotChanges:o=>ex(i,o,e).pipe(sn.iC),stateChanges:o=>tx(i,o,e).pipe(sn.iC),auditTrail:o=>function iT(i,n,e){return function oT(i,n,e){return function rT(i,n){return pm(i,"value","on",n).pipe((0,gt.U)(e=>{let r;return e.payload.forEach(o=>(r=o.key,!1)),{data:e,lastKeyToLoad:r}}))}(i,e).pipe(function Dk(...i){const n=(0,bc.jO)(i);return(0,br.e)((e,r)=>{const o=i.length,s=new Array(o);let c=i.map(()=>!1),h=!1;for(let p=0;p<o;p++)(0,vc.Xf)(i[p]).subscribe((0,di.x)(r,_=>{s[p]=_,!h&&!c[p]&&(c[p]=!0,(h=c.every(ha.y))&&(c=null))},zp.Z));e.subscribe((0,di.x)(r,p=>{if(h){const _=[p,...s];r.next(n?n(..._):_)}}))})}(n),(0,gt.U)(([o,s])=>{const c=o.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),function Ik(i){return(0,br.e)((n,e)=>{let r=!1,o=0;n.subscribe((0,di.x)(e,s=>(r||(r=!i(s,o++)))&&e.next(s)))})}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,gt.U)(o=>o.actions))}(i,tx(i,n).pipe(Va((o,s)=>[...o,s],[])),e)}(i,o,e).pipe(sn.iC),valueChanges:(o,s)=>ex(i,o,e).pipe((0,gt.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),sn.iC)}}(s,this)}object(e){return function dR(i,n){return{query:i,snapshotChanges:()=>aT(i,n.schedulers.outsideAngular)().pipe(sn.iC),update:e=>i.ref.update(e),set:e=>i.ref.set(e),remove:()=>i.ref.remove(),valueChanges:()=>aT(i,n.schedulers.outsideAngular)().pipe(sn.iC,(0,gt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Qw(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Vn.Dh),d.LFG(Vn.xv,8),d.LFG(uR,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(sn.HU),d.LFG(hR,8),d.LFG(Hp,8),d.LFG(D0,8),d.LFG(I0,8),d.LFG(Bp,8),d.LFG(Vp,8),d.LFG(T0,8),d.LFG(Ku,8),d.LFG(Lf,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),mR=(()=>{class i{constructor(){uy.Z.registerVersion("angularfire",sn.q4.full,"rtdb-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[fR]}),i})();var Ag=z(7537);function xv(...i){return function pR(){return(0,Ag.J)(1)}()((0,Hn.D)(i,(0,bc.yG)(i)))}function kc(...i){const n=(0,bc.yG)(i);return(0,br.e)((e,r)=>{(n?xv(i,e,n):xv(i,e)).subscribe(r)})}function ix(){return(0,br.e)((i,n)=>{let e,r=!1;i.subscribe((0,di.x)(n,o=>{const s=e;e=o,r&&n.next([s,o]),r=!0}))})}var xt,gR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Za={},rx=rx||{},pn=gR||self;function Ev(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function gm(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var Cv="closure_uid_"+(1e9*Math.random()>>>0),cT=0;function dT(i,n,e){return i.call.apply(i.bind,arguments)}function uT(i,n,e){if(!i)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),i.apply(n,o)}}return function(){return i.apply(n,arguments)}}function Eo(i,n,e){return(Eo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dT:uT).apply(null,arguments)}function Mg(i,n){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),i.apply(this,r)}}function Qr(i,n){function e(){}e.prototype=n.prototype,i.$=n.prototype,i.prototype=new e,i.prototype.constructor=i,i.ac=function(r,o,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return n.prototype[o].apply(r,c)}}function Ul(){this.s=this.s,this.o=this.o}Ul.prototype.s=!1,Ul.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function lT(i){Object.prototype.hasOwnProperty.call(i,Cv)&&i[Cv]||(i[Cv]=++cT)}(this)},Ul.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zd=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let e=0;e<i.length;e++)if(e in i&&i[e]===n)return e;return-1};function sx(i){const n=i.length;if(0<n){const e=Array(n);for(let r=0;r<n;r++)e[r]=i[r];return e}return[]}function hT(i,n){for(let e=1;e<arguments.length;e++){const r=arguments[e];if(Ev(r)){const o=i.length||0,s=r.length||0;i.length=o+s;for(let c=0;c<s;c++)i[o+c]=r[c]}else i.push(r)}}function kr(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}kr.prototype.h=function(){this.defaultPrevented=!0};var JL=function(){if(!pn.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{pn.addEventListener("test",()=>{},n),pn.removeEventListener("test",()=>{},n)}catch{}return i}();function vh(i){return/^[\s\xa0]*$/.test(i)}function ax(){var i=pn.navigator;return i&&(i=i.userAgent)?i:""}function Ka(i){return-1!=ax().indexOf(i)}function Dv(i){return Dv[" "](i),i}Dv[" "]=function(){};var ym,i,Qt=Ka("Opera"),_m=Ka("Trident")||Ka("MSIE"),fT=Ka("Edge"),lx=fT||_m,bh=Ka("Gecko")&&!(-1!=ax().toLowerCase().indexOf("webkit")&&!Ka("Edge"))&&!(Ka("Trident")||Ka("MSIE"))&&!Ka("Edge"),_R=-1!=ax().toLowerCase().indexOf("webkit")&&!Ka("Edge");function kg(){var i=pn.document;return i?i.documentMode:void 0}e:{var rr="",mT=(i=ax(),bh?/rv:([^\);]+)(\)|;)/.exec(i):fT?/Edge\/([\d\.]+)/.exec(i):_m?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):_R?/WebKit\/(\S+)/.exec(i):Qt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(mT&&(rr=mT?mT[1]:""),_m){var Iv=kg();if(null!=Iv&&Iv>parseFloat(rr)){ym=String(Iv);break e}}ym=rr}var gT=pn.document&&_m&&(kg()||parseInt(ym,10))||void 0;function vm(i,n){if(kr.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var e=this.type=i.type,r=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(bh){e:{try{Dv(n.nodeName);var o=!0;break e}catch{}o=!1}o||(n=null)}}else"mouseover"==e?n=i.fromElement:"mouseout"==e&&(n=i.toElement);this.relatedTarget=n,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:_T[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&vm.$.h.call(this)}}Qr(vm,kr);var _T={2:"touch",3:"pen",4:"mouse"};vm.prototype.h=function(){vm.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var bm="closure_listenable_"+(1e6*Math.random()|0),yR=0;function vR(i,n,e,r,o){this.listener=i,this.proxy=null,this.src=n,this.type=e,this.capture=!!r,this.la=o,this.key=++yR,this.fa=this.ia=!1}function Sv(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function wh(i,n,e){for(const r in i)n.call(e,i[r],r,i)}function yT(i){const n={};for(const e in i)n[e]=i[e];return n}const vT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rg(i,n){let e,r;for(let o=1;o<arguments.length;o++){for(e in r=arguments[o],r)i[e]=r[e];for(let s=0;s<vT.length;s++)e=vT[s],Object.prototype.hasOwnProperty.call(r,e)&&(i[e]=r[e])}}function Pg(i){this.src=i,this.g={},this.h=0}function Av(i,n){var e=n.type;if(e in i.g){var s,r=i.g[e],o=zd(r,n);(s=0<=o)&&Array.prototype.splice.call(r,o,1),s&&(Sv(n),0==i.g[e].length&&(delete i.g[e],i.h--))}}function Mv(i,n,e,r){for(var o=0;o<i.length;++o){var s=i[o];if(!s.fa&&s.listener==n&&s.capture==!!e&&s.la==r)return o}return-1}Pg.prototype.add=function(i,n,e,r,o){var s=i.toString();(i=this.g[s])||(i=this.g[s]=[],this.h++);var c=Mv(i,n,r,o);return-1<c?(n=i[c],e||(n.ia=!1)):((n=new vR(n,this.src,s,!!r,o)).ia=e,i.push(n)),n};var cx="closure_lm_"+(1e6*Math.random()|0),xh={};function wm(i,n,e,r,o){if(r&&r.once)return wT(i,n,e,r,o);if(Array.isArray(n)){for(var s=0;s<n.length;s++)wm(i,n[s],e,r,o);return null}return e=fx(e),i&&i[bm]?i.O(n,e,gm(r)?!!r.capture:!!r,o):bT(i,n,e,!1,r,o)}function bT(i,n,e,r,o,s){if(!n)throw Error("Invalid event type");var c=gm(o)?!!o.capture:!!o,h=Rv(i);if(h||(i[cx]=h=new Pg(i)),(e=h.add(n,e,r,c,s)).proxy)return e;if(r=function wR(){const n=xR;return function i(e){return n.call(i.src,i.listener,e)}}(),e.proxy=r,r.src=i,r.listener=e,i.addEventListener)JL||(o=c),void 0===o&&(o=!1),i.addEventListener(n.toString(),r,o);else if(i.attachEvent)i.attachEvent(ux(n.toString()),r);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(r)}return e}function wT(i,n,e,r,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)wT(i,n[s],e,r,o);return null}return e=fx(e),i&&i[bm]?i.P(n,e,gm(r)?!!r.capture:!!r,o):bT(i,n,e,!0,r,o)}function dx(i,n,e,r,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)dx(i,n[s],e,r,o);else r=gm(r)?!!r.capture:!!r,e=fx(e),i&&i[bm]?(i=i.i,(n=String(n).toString())in i.g&&-1<(e=Mv(s=i.g[n],e,r,o))&&(Sv(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete i.g[n],i.h--))):i&&(i=Rv(i))&&(n=i.g[n.toString()],i=-1,n&&(i=Mv(n,e,r,o)),(e=-1<i?n[i]:null)&&kv(e))}function kv(i){if("number"!=typeof i&&i&&!i.fa){var n=i.src;if(n&&n[bm])Av(n.i,i);else{var e=i.type,r=i.proxy;n.removeEventListener?n.removeEventListener(e,r,i.capture):n.detachEvent?n.detachEvent(ux(e),r):n.addListener&&n.removeListener&&n.removeListener(r),(e=Rv(n))?(Av(e,i),0==e.h&&(e.src=null,n[cx]=null)):Sv(i)}}}function ux(i){return i in xh?xh[i]:xh[i]="on"+i}function xR(i,n){if(i.fa)i=!0;else{n=new vm(n,this);var e=i.listener,r=i.la||i.src;i.ia&&kv(i),i=e.call(r,n)}return i}function Rv(i){return(i=i[cx])instanceof Pg?i:null}var hx="__closure_events_fn_"+(1e9*Math.random()>>>0);function fx(i){return"function"==typeof i?i:(i[hx]||(i[hx]=function(n){return i.handleEvent(n)}),i[hx])}function Co(){Ul.call(this),this.i=new Pg(this),this.S=this,this.J=null}function jo(i,n){var e,r=i.J;if(r)for(e=[];r;r=r.J)e.push(r);if(i=i.S,r=n.type||n,"string"==typeof n)n=new kr(n,i);else if(n instanceof kr)n.target=n.target||i;else{var o=n;Rg(n=new kr(r,i),o)}if(o=!0,e)for(var s=e.length-1;0<=s;s--){var c=n.g=e[s];o=mx(c,r,!0,n)&&o}if(o=mx(c=n.g=i,r,!0,n)&&o,o=mx(c,r,!1,n)&&o,e)for(s=0;s<e.length;s++)o=mx(c=n.g=e[s],r,!1,n)&&o}function mx(i,n,e,r){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var o=!0,s=0;s<n.length;++s){var c=n[s];if(c&&!c.fa&&c.capture==e){var h=c.listener,p=c.la||c.src;c.ia&&Av(i.i,c),o=!1!==h.call(p,r)&&o}}return o&&!r.defaultPrevented}Qr(Co,Ul),Co.prototype[bm]=!0,Co.prototype.removeEventListener=function(i,n,e,r){dx(this,i,n,e,r)},Co.prototype.N=function(){if(Co.$.N.call(this),this.i){var n,i=this.i;for(n in i.g){for(var e=i.g[n],r=0;r<e.length;r++)Sv(e[r]);delete i.g[n],i.h--}}this.J=null},Co.prototype.O=function(i,n,e,r){return this.i.add(String(i),n,!1,e,r)},Co.prototype.P=function(i,n,e,r){return this.i.add(String(i),n,!0,e,r)};var xT=pn.JSON.stringify;function Pv(){var i=px;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var CT=new class ET{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new DT,i=>i.reset());class DT{constructor(){this.next=this.g=this.h=null}set(n,e){this.h=n,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Og(i){var n=1;i=i.split(":");const e=[];for(;0<n&&i.length;)e.push(i.shift()),n--;return i.length&&e.push(i.join(":")),e}function CR(i){pn.setTimeout(()=>{throw i},0)}let Ng,Fg=!1,px=new class ER{constructor(){this.h=this.g=null}add(n,e){const r=CT.get();r.set(n,e),this.h?this.h.next=r:this.g=r,this.h=r}},DR=()=>{const i=pn.Promise.resolve(void 0);Ng=()=>{i.then(IR)}};var IR=()=>{for(var i;i=Pv();){try{i.h.call(i.g)}catch(e){CR(e)}var n=CT;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}Fg=!1};function Lg(i,n){Co.call(this),this.h=i||1,this.g=n||pn,this.j=Eo(this.qb,this),this.l=Date.now()}function gx(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function _x(i,n,e){if("function"==typeof i)e&&(i=Eo(i,e));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Eo(i.handleEvent,i)}return 2147483647<Number(n)?-1:pn.setTimeout(i,n||0)}function xm(i){i.g=_x(()=>{i.g=null,i.i&&(i.i=!1,xm(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}Qr(Lg,Co),(xt=Lg.prototype).ga=!1,xt.T=null,xt.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),jo(this,"tick"),this.ga&&(gx(this),this.start()))}},xt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xt.N=function(){Lg.$.N.call(this),gx(this),delete this.g};class TR extends Ul{constructor(n,e){super(),this.m=n,this.j=e,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:xm(this)}N(){super.N(),this.g&&(pn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Em(i){Ul.call(this),this.h=i,this.g={}}Qr(Em,Ul);var IT=[];function yx(i,n,e,r){Array.isArray(e)||(e&&(IT[0]=e.toString()),e=IT);for(var o=0;o<e.length;o++){var s=wm(n,e[o],r||i.handleEvent,!1,i.h||i);if(!s)break;i.g[s.key]=s}}function TT(i){wh(i.g,function(n,e){this.g.hasOwnProperty(e)&&kv(n)},i),i.g={}}function Ug(){this.g=!0}function Cm(i,n,e,r){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function AT(i,n){if(!i.g)return n;if(!n)return null;try{var e=JSON.parse(n);if(e)for(i=0;i<e.length;i++)if(Array.isArray(e[i])){var r=e[i];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var s=o[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<o.length;c++)o[c]=""}}}return xT(e)}catch{return n}}(i,e)+(r?" "+r:"")})}Em.prototype.N=function(){Em.$.N.call(this),TT(this)},Em.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ug.prototype.Ea=function(){this.g=!1},Ug.prototype.info=function(){};var Eh={},MT=null;function Ov(){return MT=MT||new Co}function Nv(i){kr.call(this,Eh.Ta,i)}function Bg(i){const n=Ov();jo(n,new Nv(n))}function bx(i,n){kr.call(this,Eh.STAT_EVENT,i),this.stat=n}function ls(i){const n=Ov();jo(n,new bx(n,i))}function kT(i,n){kr.call(this,Eh.Ua,i),this.size=n}function Vg(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return pn.setTimeout(function(){i()},n)}Eh.Ta="serverreachability",Qr(Nv,kr),Eh.STAT_EVENT="statevent",Qr(bx,kr),Eh.Ua="timingevent",Qr(kT,kr);var Fv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},RT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wx(){}function OT(){}wx.prototype.h=null;var Ex,Dm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Lv(){kr.call(this,"d")}function xx(){kr.call(this,"c")}function Hg(){}function zg(i,n,e,r){this.l=i,this.j=n,this.m=e,this.W=r||1,this.U=new Em(this),this.P=AR,this.V=new Lg(i=lx?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new NT}function NT(){this.i=null,this.g="",this.h=!1}Qr(Lv,kr),Qr(xx,kr),Qr(Hg,wx),Hg.prototype.g=function(){return new XMLHttpRequest},Hg.prototype.i=function(){return{}},Ex=new Hg;var AR=45e3,jg={},Im={};function Uv(i,n,e){i.L=1,i.v=Wg(Bl(n)),i.s=e,i.S=!0,Bv(i,null)}function Bv(i,n){i.G=Date.now(),$g(i),i.A=Bl(i.v);var e=i.A,r=i.W;Array.isArray(r)||(r=[String(r)]),Mx(e.i,"t",r),i.C=0,e=i.l.J,i.h=new NT,i.g=Hx(i.l,e?n:null,!i.s),0<i.O&&(i.M=new TR(Eo(i.Pa,i,i.g),i.O)),yx(i.U,i.g,"readystatechange",i.nb),n=i.I?yT(i.I):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,n)):(i.u="GET",i.g.ha(i.A,i.u,null,n)),Bg(),function SR(i,n,e,r,o,s){i.info(function(){if(i.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var w=_[0];_=_[1];var I=w.split("_");c=2<=I.length&&"type"==I[1]?c+(w+"=")+_+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+n+"\n"+e+"\n"+c})}(i.j,i.u,i.A,i.m,i.W,i.s)}function FT(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function LT(i,n,e){let o,r=!0;for(;!i.J&&i.C<e.length;){if(o=Cx(i,e),o==Im){4==n&&(i.o=4,ls(14),r=!1),Cm(i.j,i.m,null,"[Incomplete Response]");break}if(o==jg){i.o=4,ls(15),Cm(i.j,i.m,e,"[Invalid Chunk]"),r=!1;break}Cm(i.j,i.m,o,null),UT(i,o)}FT(i)&&o!=Im&&o!=jg&&(i.h.g="",i.C=0),4!=n||0!=e.length||i.h.h||(i.o=1,ls(16),r=!1),i.i=i.i&&r,r?0<e.length&&!i.ba&&(i.ba=!0,(n=i.l).g==i&&n.ca&&!n.M&&(n.l.info("Great, no buffering proxy detected. Bytes received: "+e.length),Gv(n),n.M=!0,ls(11))):(Cm(i.j,i.m,e,"[Invalid Chunked Response]"),Ch(i),Tm(i))}function Cx(i,n){var e=i.C,r=n.indexOf("\n",e);return-1==r?Im:(e=Number(n.substring(e,r)),isNaN(e)?jg:(r+=1)+e>n.length?Im:(n=n.slice(r,r+e),i.C=r+e,n))}function $g(i){i.Y=Date.now()+i.P,Dx(i,i.P)}function Dx(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Vg(Eo(i.lb,i),n)}function Rc(i){i.B&&(pn.clearTimeout(i.B),i.B=null)}function Tm(i){0==i.l.H||i.J||Vx(i.l,i)}function Ch(i){Rc(i);var n=i.M;n&&"function"==typeof n.sa&&n.sa(),i.M=null,gx(i.V),TT(i.U),i.g&&(n=i.g,i.g=null,n.abort(),n.sa())}function UT(i,n){try{var e=i.l;if(0!=e.H&&(e.g==i||Rx(e.i,i)))if(!i.K&&Rx(e.i,i)&&3==e.H){try{var r=e.Ja.g.parse(n)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<i.G))break e;o_(e),jv(e)}r_(e),ls(18)}}else e.Fa=o[1],0<e.Fa-e.V&&37500>o[2]&&e.G&&0==e.A&&!e.v&&(e.v=Vg(Eo(e.ib,e),6e3));if(1>=YT(e.i)&&e.oa){try{e.oa()}catch{}e.oa=void 0}}else Sh(e,11)}else if((i.K||e.g==i)&&o_(e),!vh(n))for(o=e.Ja.g.parse(n),n=0;n<o.length;n++){let _=o[n];if(e.V=_[0],_=_[1],2==e.H)if("c"==_[0]){e.K=_[1],e.pa=_[2];const w=_[3];null!=w&&(e.ra=w,e.l.info("VER="+e.ra));const I=_[4];null!=I&&(e.Ga=I,e.l.info("SVER="+e.Ga));const A=_[5];null!=A&&"number"==typeof A&&0<A&&(e.L=r=1.5*A,e.l.info("backChannelRequestTimeoutMs_="+r)),r=e;const P=i.g;if(P){const B=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;s.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Px(s,s.h),s.h=null))}if(r.F){const Y=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;Y&&(r.Da=Y,Bi(r.I,r.F,Y))}}e.H=3,e.h&&e.h.Ba(),e.ca&&(e.S=Date.now()-i.G,e.l.info("Handshake RTT: "+e.S+"ms"));var c=i;if((r=e).wa=qv(r,r.J?r.pa:null,r.Y),c.K){Am(r.i,c);var h=c,p=r.L;p&&h.setTimeout(p),h.B&&(Rc(h),$g(h)),r.g=c}else Bx(r);0<e.j.length&&n_(e)}else"stop"!=_[0]&&"close"!=_[0]||Sh(e,7);else 3==e.H&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Sh(e,7):zv(e):"noop"!=_[0]&&e.h&&e.h.Aa(_),e.A=0)}Bg()}catch{}}function BT(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(Ev(i)||"string"==typeof i)Array.prototype.forEach.call(i,n,void 0);else for(var e=function Tx(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Ev(i)||"string"==typeof i){var n=[];i=i.length;for(var e=0;e<i;e++)n.push(e);return n}n=[],e=0;for(const r in i)n[e++]=r;return n}}}(i),r=function Ix(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Ev(i)){for(var n=[],e=i.length,r=0;r<e;r++)n.push(i[r]);return n}for(r in n=[],e=0,i)n[e++]=i[r];return n}(i),o=r.length,s=0;s<o;s++)n.call(void 0,r[s],e&&e[s],i)}(xt=zg.prototype).setTimeout=function(i){this.P=i},xt.nb=function(i){i=i.target;const n=this.M;n&&3==js(i)?n.l():this.Pa(i)},xt.Pa=function(i){try{if(i==this.g)e:{const w=js(this.g);var n=this.g.Ia();if(this.g.da(),!(3>w)&&(3!=w||lx||this.g&&(this.h.h||this.g.ja()||Lx(this.g)))){this.J||4!=w||7==n||Bg(),Rc(this);var e=this.g.da();this.ca=e;t:if(FT(this)){var r=Lx(this.g);i="";var o=r.length,s=4==js(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ch(this),Tm(this);var c="";break t}this.h.i=new pn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,i+=this.h.i.decode(r[n],{stream:s&&n==o-1});r.splice(0,o),this.h.g+=i,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==e,function vx(i,n,e,r,o,s,c){i.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+n+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.W,w,e),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vh(h)){var _=h;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,ls(12),Ch(this),Tm(this);break e}Cm(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,UT(this,e)}this.S?(LT(this,w,c),lx&&this.i&&3==w&&(yx(this.U,this.V,"tick",this.mb),this.V.start())):(Cm(this.j,this.m,c,null),UT(this,c)),4==w&&Ch(this),this.i&&!this.J&&(4==w?Vx(this.l,this):(this.i=!1,$g(this)))}else(function FR(i){const n={};i=(i.g&&2<=js(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<i.length;r++){if(vh(i[r]))continue;var e=Og(i[r]);const o=e[0];if("string"!=typeof(e=e[1]))continue;e=e.trim();const s=n[o]||[];n[o]=s,s.push(e)}!function bR(i,n){for(const e in i)n.call(void 0,i[e],e,i)}(n,function(r){return r.join(", ")})})(this.g),400==e&&0<c.indexOf("Unknown SID")?(this.o=3,ls(12)):(this.o=0,ls(13)),Ch(this),Tm(this)}}}catch{}},xt.mb=function(){if(this.g){var i=js(this.g),n=this.g.ja();this.C<n.length&&(Rc(this),LT(this,i,n),this.i&&4!=i&&$g(this))}},xt.cancel=function(){this.J=!0,Ch(this)},xt.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function ST(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.L&&(Bg(),ls(17)),Ch(this),this.o=2,Tm(this)):Dx(this,this.Y-i)};var Sx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dh(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Dh){this.h=i.h,Sm(this,i.j),this.s=i.s,this.g=i.g,Gg(this,i.m),this.l=i.l;var n=i.i,e=new Zg;e.i=n.i,n.g&&(e.g=new Map(n.g),e.h=n.h),Ax(this,e),this.o=i.o}else i&&(n=String(i).match(Sx))?(this.h=!1,Sm(this,n[1]||"",!0),this.s=qg(n[2]||""),this.g=qg(n[3]||"",!0),Gg(this,n[4]),this.l=qg(n[5]||"",!0),Ax(this,n[6]||"",!0),this.o=qg(n[7]||"")):(this.h=!1,this.i=new Zg(null,this.h))}function Bl(i){return new Dh(i)}function Sm(i,n,e){i.j=e?qg(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function Gg(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function Ax(i,n,e){n instanceof Zg?(i.i=n,function WT(i,n){n&&!i.j&&(Ih(i),i.i=null,i.g.forEach(function(e,r){var o=r.toLowerCase();r!=o&&($T(this,r),Mx(this,o,e))},i)),i.j=n}(i.i,i.h)):(e||(n=Yg(n,jT)),i.i=new Zg(n,i.h))}function Bi(i,n,e){i.i.set(n,e)}function Wg(i){return Bi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function qg(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Yg(i,n,e){return"string"==typeof i?(i=encodeURI(i).replace(n,MR),e&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function MR(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Dh.prototype.toString=function(){var i=[],n=this.j;n&&i.push(Yg(n,HT,!0),":");var e=this.g;return(e||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(Yg(n,HT,!0),"@"),i.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&i.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&i.push("/"),i.push(Yg(e,"/"==e.charAt(0)?t2:zT,!0))),(e=this.i.toString())&&i.push("?",e),(e=this.o)&&i.push("#",Yg(e,kR)),i.join("")};var HT=/[#\/\?@]/g,zT=/[#\?:]/g,t2=/[#\?]/g,jT=/[#\?@]/g,kR=/#/g;function Zg(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function Ih(i){i.g||(i.g=new Map,i.h=0,i.i&&function VT(i,n){if(i){i=i.split("&");for(var e=0;e<i.length;e++){var r=i[e].indexOf("="),o=null;if(0<=r){var s=i[e].substring(0,r);o=i[e].substring(r+1)}else s=i[e];n(s,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(i.i,function(n,e){i.add(decodeURIComponent(n.replace(/\+/g," ")),e)}))}function $T(i,n){Ih(i),n=Th(i,n),i.g.has(n)&&(i.i=null,i.h-=i.g.get(n).length,i.g.delete(n))}function GT(i,n){return Ih(i),n=Th(i,n),i.g.has(n)}function Mx(i,n,e){$T(i,n),0<e.length&&(i.i=null,i.g.set(Th(i,n),sx(e)),i.h+=e.length)}function Th(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function kx(i){this.l=i||PR,i=pn.PerformanceNavigationTiming?0<(i=pn.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(pn.g&&pn.g.Ka&&pn.g.Ka()&&pn.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(xt=Zg.prototype).add=function(i,n){Ih(this),this.i=null,i=Th(this,i);var e=this.g.get(i);return e||this.g.set(i,e=[]),e.push(n),this.h+=1,this},xt.forEach=function(i,n){Ih(this),this.g.forEach(function(e,r){e.forEach(function(o){i.call(n,o,r,this)},this)},this)},xt.ta=function(){Ih(this);const i=Array.from(this.g.values()),n=Array.from(this.g.keys()),e=[];for(let r=0;r<n.length;r++){const o=i[r];for(let s=0;s<o.length;s++)e.push(n[r])}return e},xt.Z=function(i){Ih(this);let n=[];if("string"==typeof i)GT(this,i)&&(n=n.concat(this.g.get(Th(this,i))));else{i=Array.from(this.g.values());for(let e=0;e<i.length;e++)n=n.concat(i[e])}return n},xt.set=function(i,n){return Ih(this),this.i=null,GT(this,i=Th(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},xt.get=function(i,n){return i&&0<(i=this.Z(i)).length?String(i[0]):n},xt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],n=Array.from(this.g.keys());for(var e=0;e<n.length;e++){var r=n[e];const s=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var o=s;""!==c[r]&&(o+="="+encodeURIComponent(String(c[r]))),i.push(o)}}return this.i=i.join("&")};var PR=10;function qT(i){return!!i.h||!!i.g&&i.g.size>=i.j}function YT(i){return i.h?1:i.g?i.g.size:0}function Rx(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function Px(i,n){i.g?i.g.add(n):i.h=n}function Am(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function Ox(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const e of i.g.values())n=n.concat(e.F);return n}return sx(i.i)}kx.prototype.cancel=function(){if(this.i=Ox(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var ZT=class{stringify(i){return pn.JSON.stringify(i,void 0)}parse(i){return pn.JSON.parse(i,void 0)}};function KT(){this.g=new ZT}function QT(i,n,e){const r=e||"";try{BT(i,function(o,s){let c=o;gm(o)&&(c=xT(o)),n.push(r+s+"="+encodeURIComponent(c))})}catch(o){throw n.push(r+"type="+encodeURIComponent("_badmap")),o}}function Kg(i,n,e,r,o){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,o(r)}catch{}}function Qg(i){this.l=i.fc||null,this.j=i.ob||!1}function Nx(i,n){Co.call(this),this.F=i,this.u=n,this.m=void 0,this.readyState=Vv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qr(Qg,wx),Qg.prototype.g=function(){return new Nx(this.l,this.j)},Qg.prototype.i=function(i){return function(){return i}}({}),Qr(Nx,Co);var Vv=0;function JT(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Mm(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Xg(i)}function Xg(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(xt=Nx.prototype).open=function(i,n){if(this.readyState!=Vv)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,Xg(this)},xt.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.F||pn).fetch(new Request(this.B,n)).then(this.$a.bind(this),this.ka.bind(this))},xt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mm(this)),this.readyState=Vv},xt.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Xg(this)),this.g&&(this.readyState=3,Xg(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof pn.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;JT(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},xt.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?Mm(this):Xg(this),3==this.readyState&&JT(this)}},xt.Za=function(i){this.g&&(this.response=this.responseText=i,Mm(this))},xt.Ya=function(i){this.g&&(this.response=i,Mm(this))},xt.ka=function(){this.g&&Mm(this)},xt.setRequestHeader=function(i,n){this.v.append(i,n)},xt.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},xt.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var e=n.next();!e.done;)i.push((e=e.value)[0]+": "+e[1]),e=n.next();return i.join("\r\n")},Object.defineProperty(Nx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var OR=pn.JSON.parse;function Vi(i){Co.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eS,this.L=this.M=!1}Qr(Vi,Co);var eS="",Fx=/^https?$/i,Vl=["POST","PUT"];function Jg(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,km(i),Hv(i)}function km(i){i.F||(i.F=!0,jo(i,"complete"),jo(i,"error"))}function tS(i){if(i.h&&typeof rx<"u"&&(!i.C[1]||4!=js(i)||2!=i.da()))if(i.v&&4==js(i))_x(i.La,0,i);else if(jo(i,"readystatechange"),4==js(i)){i.h=!1;try{const c=i.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var e;if(!(e=n)){var r;if(r=0===c){var o=String(i.I).match(Sx)[1]||null;!o&&pn.self&&pn.self.location&&(o=pn.self.location.protocol.slice(0,-1)),r=!Fx.test(o?o.toLowerCase():"")}e=r}if(e)jo(i,"complete"),jo(i,"success");else{i.m=6;try{var s=2<js(i)?i.g.statusText:""}catch{s=""}i.j=s+" ["+i.da()+"]",km(i)}}finally{Hv(i)}}}function Hv(i,n){if(i.g){nS(i);const e=i.g,r=i.C[0]?()=>{}:null;i.g=null,i.C=null,n||jo(i,"ready");try{e.onreadystatechange=r}catch{}}}function nS(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(pn.clearTimeout(i.A),i.A=null)}function js(i){return i.g?i.g.readyState:0}function Lx(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case eS:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function iS(i){let n="";return wh(i,function(e,r){n+=r,n+=":",n+=e,n+="\r\n"}),n}function e_(i,n,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=iS(e),"string"==typeof i?null!=e&&encodeURIComponent(String(e)):Bi(i,n,e))}function t_(i,n,e){return e&&e.internalChannelParams&&e.internalChannelParams[i]||n}function rS(i){this.Ga=0,this.j=[],this.l=new Ug,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=t_("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=t_("baseRetryDelayMs",5e3,i),this.hb=t_("retryDelaySeedMs",1e4,i),this.eb=t_("forwardChannelMaxRetries",2,i),this.xa=t_("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new kx(i&&i.concurrentRequestLimit),this.Ja=new KT,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function zv(i){if(oS(i),3==i.H){var n=i.W++,e=Bl(i.I);if(Bi(e,"SID",i.K),Bi(e,"RID",n),Bi(e,"TYPE","terminate"),i_(i,e),(n=new zg(i,i.l,n)).L=2,n.v=Wg(Bl(e)),e=!1,pn.navigator&&pn.navigator.sendBeacon)try{e=pn.navigator.sendBeacon(n.v.toString(),"")}catch{}!e&&pn.Image&&((new Image).src=n.v,e=!0),e||(n.g=Hx(n.l,null),n.g.ha(n.v)),n.G=Date.now(),$g(n)}Wv(i)}function jv(i){i.g&&(Gv(i),i.g.cancel(),i.g=null)}function oS(i){jv(i),i.u&&(pn.clearTimeout(i.u),i.u=null),o_(i),i.i.cancel(),i.m&&("number"==typeof i.m&&pn.clearTimeout(i.m),i.m=null)}function n_(i){if(!qT(i.i)&&!i.m){i.m=!0;var n=i.Na;Ng||DR(),Fg||(Ng(),Fg=!0),px.add(n,i),i.C=0}}function sS(i,n){var e;e=n?n.m:i.W++;const r=Bl(i.I);Bi(r,"SID",i.K),Bi(r,"RID",e),Bi(r,"AID",i.V),i_(i,r),i.o&&i.s&&e_(r,i.o,i.s),e=new zg(i,i.l,e,i.C+1),null===i.o&&(e.I=i.s),n&&(i.j=n.F.concat(i.j)),n=Ux(i,e,1e3),e.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Px(i.i,e),Uv(e,r,n)}function i_(i,n){i.na&&wh(i.na,function(e,r){Bi(n,r,e)}),i.h&&BT({},function(e,r){Bi(n,r,e)})}function Ux(i,n,e){e=Math.min(i.j.length,e);var r=i.h?Eo(i.h.Va,i.h,i):null;e:{var o=i.j;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=o[0].g,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<e;p++){let _=o[p].g;const w=o[p].map;if(_-=s,0>_)s=Math.max(0,o[p].g-100),h=!1;else try{QT(w,c,"req"+_+"_")}catch{r&&r(w)}}if(h){r=c.join("&");break e}}}return i=i.j.splice(0,e),n.F=i,r}function Bx(i){if(!i.g&&!i.u){i.ba=1;var n=i.Ma;Ng||DR(),Fg||(Ng(),Fg=!0),px.add(n,i),i.A=0}}function r_(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Vg(Eo(i.Ma,i),lS(i,i.A)),i.A++,0))}function Gv(i){null!=i.B&&(pn.clearTimeout(i.B),i.B=null)}function aS(i){i.g=new zg(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var n=Bl(i.wa);Bi(n,"RID","rpc"),Bi(n,"SID",i.K),Bi(n,"AID",i.V),Bi(n,"CI",i.G?"0":"1"),!i.G&&i.qa&&Bi(n,"TO",i.qa),Bi(n,"TYPE","xmlhttp"),i_(i,n),i.o&&i.s&&e_(n,i.o,i.s),i.L&&i.g.setTimeout(i.L);var e=i.g;i=i.pa,e.L=1,e.v=Wg(Bl(n)),e.s=null,e.S=!0,Bv(e,i)}function o_(i){null!=i.v&&(pn.clearTimeout(i.v),i.v=null)}function Vx(i,n){var e=null;if(i.g==n){o_(i),Gv(i),i.g=null;var r=2}else{if(!Rx(i.i,n))return;e=n.F,Am(i.i,n),r=1}if(0!=i.H)if(n.i)if(1==r){e=n.s?n.s.length:0,n=Date.now()-n.G;var o=i.C;jo(r=Ov(),new kT(r,e)),n_(i)}else Bx(i);else if(3==(o=n.o)||0==o&&0<n.ca||!(1==r&&function $v(i,n){return!(YT(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=n.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Vg(Eo(i.Na,i,n),lS(i,i.C)),i.C++,0)))}(i,n)||2==r&&r_(i)))switch(e&&0<e.length&&(n=i.i,n.i=n.i.concat(e)),o){case 1:Sh(i,5);break;case 4:Sh(i,10);break;case 3:Sh(i,6);break;default:Sh(i,2)}}function lS(i,n){let e=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(e*=2),e*n}function Sh(i,n){if(i.l.info("Error code "+n),2==n){var e=null;i.h&&(e=null);var r=Eo(i.pb,i);e||(e=new Dh("//www.google.com/images/cleardot.gif"),pn.location&&"http"==pn.location.protocol||Sm(e,"https"),Wg(e)),function XT(i,n){const e=new Ug;if(pn.Image){const r=new Image;r.onload=Mg(Kg,e,r,"TestLoadImage: loaded",!0,n),r.onerror=Mg(Kg,e,r,"TestLoadImage: error",!1,n),r.onabort=Mg(Kg,e,r,"TestLoadImage: abort",!1,n),r.ontimeout=Mg(Kg,e,r,"TestLoadImage: timeout",!1,n),pn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=i}else n(!1)}(e.toString(),r)}else ls(2);i.H=0,i.h&&i.h.za(n),Wv(i),oS(i)}function Wv(i){if(i.H=0,i.ma=[],i.h){const n=Ox(i.i);(0!=n.length||0!=i.j.length)&&(hT(i.ma,n),hT(i.ma,i.j),i.i.i.length=0,sx(i.j),i.j.length=0),i.h.ya()}}function qv(i,n,e){var r=e instanceof Dh?Bl(e):new Dh(e);if(""!=r.g)n&&(r.g=n+"."+r.g),Gg(r,r.m);else{var o=pn.location;r=o.protocol,n=n?n+"."+o.hostname:o.hostname,o=+o.port;var s=new Dh(null);r&&Sm(s,r),n&&(s.g=n),o&&Gg(s,o),e&&(s.l=e),r=s}return n=i.Da,(e=i.F)&&n&&Bi(r,e,n),Bi(r,"VER",i.ra),i_(i,r),r}function Hx(i,n,e){if(n&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new Vi(e&&i.Ha&&!i.va?new Qg({ob:!0}):i.va)).Oa(i.J),n}function Yv(){}function Rm(){if(_m&&!(10<=Number(gT)))throw Error("Environmental error: no available transport.")}function $s(i,n){Co.call(this),this.g=new rS(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.Ca&&(i?i["X-WebChannel-Client-Profile"]=n.Ca:i={"X-WebChannel-Client-Profile":n.Ca}),this.g.U=i,(i=n&&n.cc)&&!vh(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!vh(n)&&(this.g.F=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new Pm(this)}function cS(i){Lv.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var n=i.__sm__;if(n){e:{for(const e in n){i=e;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function dS(){xx.call(this),this.status=1}function Pm(i){this.g=i}function Gs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Zv(i,n,e){e||(e=0);var r=Array(16);if("string"==typeof n)for(var o=0;16>o;++o)r[o]=n.charCodeAt(e++)|n.charCodeAt(e++)<<8|n.charCodeAt(e++)<<16|n.charCodeAt(e++)<<24;else for(o=0;16>o;++o)r[o]=n[e++]|n[e++]<<8|n[e++]<<16|n[e++]<<24;var s=i.g[3],c=(n=i.g[0])+(s^(e=i.g[1])&((o=i.g[2])^s))+r[0]+3614090360&4294967295;c=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=(e=(o=(s=(n=e+(c<<7&4294967295|c>>>25))+((c=s+(o^n&(e^o))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=o+(e^s&(n^e))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=e+(n^o&(s^n))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=n+(s^e&(o^s))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=s+(o^n&(e^o))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=o+(e^s&(n^e))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=e+(n^o&(s^n))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=n+(s^e&(o^s))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=s+(o^n&(e^o))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=o+(e^s&(n^e))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=e+(n^o&(s^n))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=n+(s^e&(o^s))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=s+(o^n&(e^o))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=o+(e^s&(n^e))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=e+(n^o&(s^n))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=n+(o^s&(e^o))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^o&(n^e))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=o+(n^e&(s^n))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^n&(o^s))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=n+(o^s&(e^o))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^o&(n^e))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=o+(n^e&(s^n))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^n&(o^s))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=n+(o^s&(e^o))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^o&(n^e))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=o+(n^e&(s^n))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^n&(o^s))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=n+(o^s&(e^o))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^o&(n^e))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=o+(n^e&(s^n))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^n&(o^s))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=n+(e^o^s)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=s+(n^e^o)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=o+(s^n^e)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=e+(o^s^n)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=n+(e^o^s)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=s+(n^e^o)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=o+(s^n^e)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=e+(o^s^n)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=n+(e^o^s)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=s+(n^e^o)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=o+(s^n^e)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=e+(o^s^n)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=n+(e^o^s)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=s+(n^e^o)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=o+(s^n^e)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=e+(o^s^n)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=n+(o^(e|~s))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(n|~o))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=o+(n^(s|~e))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(o|~n))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=n+(o^(e|~s))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(n|~o))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=o+(n^(s|~e))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(o|~n))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=n+(o^(e|~s))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(n|~o))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=o+(n^(s|~e))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(o|~n))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((s=(n=e+((c=n+(o^(e|~s))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(n|~o))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((o=s+((c=o+(n^(s|~e))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~n))+r[9]+3951481745&4294967295,i.g[0]=i.g[0]+n&4294967295,i.g[1]=i.g[1]+(o+(c<<21&4294967295|c>>>11))&4294967295,i.g[2]=i.g[2]+o&4294967295,i.g[3]=i.g[3]+s&4294967295}function ai(i,n){this.h=n;for(var e=[],r=!0,o=i.length-1;0<=o;o--){var s=0|i[o];r&&s==n||(e[o]=s,r=!1)}this.g=e}(xt=Vi.prototype).Oa=function(i){this.M=i},xt.ha=function(i,n,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);n=n?n.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ex.g(),this.C=function PT(i){return i.h||(i.h=i.i())}(this.u?this.u:Ex),this.g.onreadystatechange=Eo(this.La,this);try{this.G=!0,this.g.open(n,String(i),!0),this.G=!1}catch(s){return void Jg(this,s)}if(i=e||"",e=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)e.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())e.set(s,r.get(s))}r=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),o=pn.FormData&&i instanceof pn.FormData,!(0<=zd(Vl,n))||r||o||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nS(this),0<this.B&&((this.L=function NR(i){return _m&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Eo(this.ua,this)):this.A=_x(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(s){Jg(this,s)}},xt.ua=function(){typeof rx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jo(this,"timeout"),this.abort(8))},xt.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,jo(this,"complete"),jo(this,"abort"),Hv(this))},xt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hv(this,!0)),Vi.$.N.call(this)},xt.La=function(){this.s||(this.G||this.v||this.l?tS(this):this.kb())},xt.kb=function(){tS(this)},xt.isActive=function(){return!!this.g},xt.da=function(){try{return 2<js(this)?this.g.status:-1}catch{return-1}},xt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},xt.Wa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),OR(n)}},xt.Ia=function(){return this.m},xt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(xt=rS.prototype).ra=8,xt.H=1,xt.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const o=new zg(this,this.l,i);let s=this.s;if(this.U&&(s?(s=yT(s),Rg(s,this.U)):s=this.U),null!==this.o||this.O||(o.I=s,s=null),this.P)e:{for(var n=0,e=0;e<this.j.length;e++){var r=this.j[e];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(n+=r)){n=e;break e}if(4096===n||e===this.j.length-1){n=e+1;break e}}n=1e3}else n=1e3;n=Ux(this,o,n),Bi(e=Bl(this.I),"RID",i),Bi(e,"CVER",22),this.F&&Bi(e,"X-HTTP-Session-Id",this.F),i_(this,e),s&&(this.O?n="headers="+encodeURIComponent(String(iS(s)))+"&"+n:this.o&&e_(e,this.o,s)),Px(this.i,o),this.bb&&Bi(e,"TYPE","init"),this.P?(Bi(e,"$req",n),Bi(e,"SID","null"),o.aa=!0,Uv(o,e,null)):Uv(o,e,n),this.H=2}}else 3==this.H&&(i?sS(this,i):0==this.j.length||qT(this.i)||sS(this))},xt.Ma=function(){if(this.u=null,aS(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Vg(Eo(this.jb,this),i)}},xt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ls(10),jv(this),aS(this))},xt.ib=function(){null!=this.v&&(this.v=null,jv(this),r_(this),ls(19))},xt.pb=function(i){i?(this.l.info("Successfully pinged google.com"),ls(2)):(this.l.info("Failed to ping google.com"),ls(1))},xt.isActive=function(){return!!this.h&&this.h.isActive(this)},(xt=Yv.prototype).Ba=function(){},xt.Aa=function(){},xt.za=function(){},xt.ya=function(){},xt.isActive=function(){return!0},xt.Va=function(){},Rm.prototype.g=function(i,n){return new $s(i,n)},Qr($s,Co),$s.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,n=this.l,e=this.h||void 0;ls(0),i.Y=n,i.na=e||{},i.G=i.aa,i.I=qv(i,null,i.Y),n_(i)},$s.prototype.close=function(){zv(this.g)},$s.prototype.u=function(i){var n=this.g;if("string"==typeof i){var e={};e.__data__=i,i=e}else this.v&&((e={}).__data__=xT(i),i=e);n.j.push(new class{constructor(i,n){this.g=i,this.map=n}}(n.fb++,i)),3==n.H&&n_(n)},$s.prototype.N=function(){this.g.h=null,delete this.j,zv(this.g),delete this.g,$s.$.N.call(this)},Qr(cS,Lv),Qr(dS,xx),Qr(Pm,Yv),Pm.prototype.Ba=function(){jo(this.g,"a")},Pm.prototype.Aa=function(i){jo(this.g,new cS(i))},Pm.prototype.za=function(i){jo(this.g,new dS)},Pm.prototype.ya=function(){jo(this.g,"b")},Qr(Gs,function uS(){this.blockSize=-1}),Gs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Gs.prototype.j=function(i,n){void 0===n&&(n=i.length);for(var e=n-this.blockSize,r=this.m,o=this.h,s=0;s<n;){if(0==o)for(;s<=e;)Zv(this,i,s),s+=this.blockSize;if("string"==typeof i){for(;s<n;)if(r[o++]=i.charCodeAt(s++),o==this.blockSize){Zv(this,r),o=0;break}}else for(;s<n;)if(r[o++]=i[s++],o==this.blockSize){Zv(this,r),o=0;break}}this.h=o,this.i+=n},Gs.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var n=1;n<i.length-8;++n)i[n]=0;var e=8*this.i;for(n=i.length-8;n<i.length;++n)i[n]=255&e,e/=256;for(this.j(i),i=Array(16),n=e=0;4>n;++n)for(var r=0;32>r;r+=8)i[e++]=this.g[n]>>>r&255;return i};var hS={};function Kv(i){return-128<=i&&128>i?function e2(i,n){var e=hS;return Object.prototype.hasOwnProperty.call(e,i)?e[i]:e[i]=n(i)}(i,function(n){return new ai([0|n],0>n?-1:0)}):new ai([0|i],0>i?-1:0)}function Hl(i){if(isNaN(i)||!isFinite(i))return Om;if(0>i)return Io(Hl(-i));for(var n=[],e=1,r=0;i>=e;r++)n[r]=i/e|0,e*=Qv;return new ai(n,0)}var Qv=4294967296,Om=Kv(0),Xv=Kv(1),jx=Kv(16777216);function fr(i){if(0!=i.h)return!1;for(var n=0;n<i.g.length;n++)if(0!=i.g[n])return!1;return!0}function Do(i){return-1==i.h}function Io(i){for(var n=i.g.length,e=[],r=0;r<n;r++)e[r]=~i.g[r];return new ai(e,~i.h).add(Xv)}function Jv(i,n){return i.add(Io(n))}function $x(i,n){for(;(65535&i[n])!=i[n];)i[n+1]+=i[n]>>>16,i[n]&=65535,n++}function eb(i,n){this.g=i,this.h=n}function s_(i,n){if(fr(n))throw Error("division by zero");if(fr(i))return new eb(Om,Om);if(Do(i))return n=s_(Io(i),n),new eb(Io(n.g),Io(n.h));if(Do(n))return n=s_(i,Io(n)),new eb(Io(n.g),n.h);if(30<i.g.length){if(Do(i)||Do(n))throw Error("slowDivide_ only works with positive integers.");for(var e=Xv,r=n;0>=r.X(i);)e=tb(e),r=tb(r);var o=zl(e,1),s=zl(r,1);for(r=zl(r,2),e=zl(e,2);!fr(r);){var c=s.add(r);0>=c.X(i)&&(o=o.add(e),s=c),r=zl(r,1),e=zl(e,1)}return n=Jv(i,o.R(n)),new eb(o,n)}for(o=Om;0<=i.X(n);){for(e=Math.max(1,Math.floor(i.ea()/n.ea())),r=48>=(r=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,r-48),c=(s=Hl(e)).R(n);Do(c)||0<c.X(i);)c=(s=Hl(e-=r)).R(n);fr(s)&&(s=Xv),o=o.add(s),i=Jv(i,c)}return new eb(o,i)}function tb(i){for(var n=i.g.length+1,e=[],r=0;r<n;r++)e[r]=i.D(r)<<1|i.D(r-1)>>>31;return new ai(e,i.h)}function zl(i,n){var e=n>>5;n%=32;for(var r=i.g.length-e,o=[],s=0;s<r;s++)o[s]=0<n?i.D(s+e)>>>n|i.D(s+e+1)<<32-n:i.D(s+e);return new ai(o,i.h)}(xt=ai.prototype).ea=function(){if(Do(this))return-Io(this).ea();for(var i=0,n=1,e=0;e<this.g.length;e++){var r=this.D(e);i+=(0<=r?r:Qv+r)*n,n*=Qv}return i},xt.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(fr(this))return"0";if(Do(this))return"-"+Io(this).toString(i);for(var n=Hl(Math.pow(i,6)),e=this,r="";;){var o=s_(e,n).g,s=((0<(e=Jv(e,o.R(n))).g.length?e.g[0]:e.h)>>>0).toString(i);if(fr(e=o))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},xt.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},xt.X=function(i){return Do(i=Jv(this,i))?-1:fr(i)?0:1},xt.abs=function(){return Do(this)?Io(this):this},xt.add=function(i){for(var n=Math.max(this.g.length,i.g.length),e=[],r=0,o=0;o<=n;o++){var s=r+(65535&this.D(o))+(65535&i.D(o)),c=(s>>>16)+(this.D(o)>>>16)+(i.D(o)>>>16);r=c>>>16,e[o]=(c&=65535)<<16|(s&=65535)}return new ai(e,-2147483648&e[e.length-1]?-1:0)},xt.R=function(i){if(fr(this)||fr(i))return Om;if(Do(this))return Do(i)?Io(this).R(Io(i)):Io(Io(this).R(i));if(Do(i))return Io(this.R(Io(i)));if(0>this.X(jx)&&0>i.X(jx))return Hl(this.ea()*i.ea());for(var n=this.g.length+i.g.length,e=[],r=0;r<2*n;r++)e[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<i.g.length;o++){var s=this.D(r)>>>16,c=65535&this.D(r),h=i.D(o)>>>16,p=65535&i.D(o);e[2*r+2*o]+=c*p,$x(e,2*r+2*o),e[2*r+2*o+1]+=s*p,$x(e,2*r+2*o+1),e[2*r+2*o+1]+=c*h,$x(e,2*r+2*o+1),e[2*r+2*o+2]+=s*h,$x(e,2*r+2*o+2)}for(r=0;r<n;r++)e[r]=e[2*r+1]<<16|e[2*r];for(r=n;r<2*n;r++)e[r]=0;return new ai(e,0)},xt.gb=function(i){return s_(this,i).h},xt.and=function(i){for(var n=Math.max(this.g.length,i.g.length),e=[],r=0;r<n;r++)e[r]=this.D(r)&i.D(r);return new ai(e,this.h&i.h)},xt.or=function(i){for(var n=Math.max(this.g.length,i.g.length),e=[],r=0;r<n;r++)e[r]=this.D(r)|i.D(r);return new ai(e,this.h|i.h)},xt.xor=function(i){for(var n=Math.max(this.g.length,i.g.length),e=[],r=0;r<n;r++)e[r]=this.D(r)^i.D(r);return new ai(e,this.h^i.h)},Rm.prototype.createWebChannel=Rm.prototype.g,$s.prototype.send=$s.prototype.u,$s.prototype.open=$s.prototype.m,$s.prototype.close=$s.prototype.close,Fv.NO_ERROR=0,Fv.TIMEOUT=8,Fv.HTTP_ERROR=6,RT.COMPLETE="complete",OT.EventType=Dm,Dm.OPEN="a",Dm.CLOSE="b",Dm.ERROR="c",Dm.MESSAGE="d",Co.prototype.listen=Co.prototype.O,Vi.prototype.listenOnce=Vi.prototype.P,Vi.prototype.getLastError=Vi.prototype.Sa,Vi.prototype.getLastErrorCode=Vi.prototype.Ia,Vi.prototype.getStatus=Vi.prototype.da,Vi.prototype.getResponseJson=Vi.prototype.Wa,Vi.prototype.getResponseText=Vi.prototype.ja,Vi.prototype.send=Vi.prototype.ha,Vi.prototype.setWithCredentials=Vi.prototype.Oa,Gs.prototype.digest=Gs.prototype.l,Gs.prototype.reset=Gs.prototype.reset,Gs.prototype.update=Gs.prototype.j,ai.prototype.add=ai.prototype.add,ai.prototype.multiply=ai.prototype.R,ai.prototype.modulo=ai.prototype.gb,ai.prototype.compare=ai.prototype.X,ai.prototype.toNumber=ai.prototype.ea,ai.prototype.toString=ai.prototype.toString,ai.prototype.getBits=ai.prototype.D,ai.fromNumber=Hl,ai.fromString=function zx(i,n){if(0==i.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==i.charAt(0))return Io(zx(i.substring(1),n));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=Hl(Math.pow(n,8)),r=Om,o=0;o<i.length;o+=8){var s=Math.min(8,i.length-o),c=parseInt(i.substring(o,o+s),n);8>s?(s=Hl(Math.pow(n,s)),r=r.R(s).add(Hl(c))):r=(r=r.R(e)).add(Hl(c))}return r};var LR=Za.createWebChannelTransport=function(){return new Rm},Gx=Za.getStatEventTarget=function(){return Ov()},Wx=Za.ErrorCode=Fv,fS=Za.EventType=RT,UR=Za.Event=Eh,mS=Za.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},BR=Za.FetchXmlHttpFactory=Qg,Nm=Za.WebChannel=OT,pS=Za.XhrIo=Vi,VR=Za.Md5=Gs,Pc=Za.Integer=ai;const nb="@firebase/firestore";class To{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}To.UNAUTHENTICATED=new To(null),To.GOOGLE_CREDENTIALS=new To("google-credentials-uid"),To.FIRST_PARTY=new To("first-party-uid"),To.MOCK_USER=new To("mock-user");let Ah="9.23.0";const jd=new Yr.Yd("@firebase/firestore");function ib(){return jd.logLevel}function Qe(i,...n){if(jd.logLevel<=Yr.in.DEBUG){const e=n.map(gS);jd.debug(`Firestore (${Ah}): ${i}`,...e)}}function xr(i,...n){if(jd.logLevel<=Yr.in.ERROR){const e=n.map(gS);jd.error(`Firestore (${Ah}): ${i}`,...e)}}function As(i,...n){if(jd.logLevel<=Yr.in.WARN){const e=n.map(gS);jd.warn(`Firestore (${Ah}): ${i}`,...e)}}function gS(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function St(i="Unexpected state"){const n=`FIRESTORE (${Ah}) INTERNAL ASSERTION FAILED: `+i;throw xr(n),new Error(n)}function Vt(i,n){i||St()}function wt(i,n){return i}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends j.ZR{constructor(n,e){super(n,e),this.code=n,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((n,e)=>{this.resolve=n,this.reject=e})}}class _S{constructor(n,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${n}`)}}class yS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,e){n.enqueueRetryable(()=>e(To.UNAUTHENTICATED))}shutdown(){}}class vS{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,e){this.changeListener=e,n.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class zR{constructor(n){this.t=n,this.currentUser=To.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,e){var r=this;let o=this.i;const s=_=>this.i!==o?(o=this.i,e(_)):Promise.resolve();let c=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $r,n.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const _=c;n.enqueueRetryable((0,De.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},p=_=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $r)}},0),h()}getToken(){const n=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==n?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vt("string"==typeof r.accessToken),new _S(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return Vt(null===n||"string"==typeof n),new To(n)}}class jR{constructor(n,e,r){this.h=n,this.l=e,this.m=r,this.type="FirstParty",this.user=To.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const n=this.p();return n&&this.g.set("Authorization",n),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class bS{constructor(n,e,r){this.h=n,this.l=e,this.m=r}getToken(){return Promise.resolve(new jR(this.h,this.l,this.m))}start(n,e){n.enqueueRetryable(()=>e(To.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wS{constructor(n){this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xS{constructor(n){this.I=n,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(n,e){const r=s=>{null!=s.error&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.T;return this.T=s.token,Qe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{n.enqueueRetryable(()=>r(s))};const o=s=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>o(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?o(s):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const n=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(n).then(e=>e?(Vt("string"==typeof e.token),this.T=e.token,new wS(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ES(i){const n=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(e);else for(let r=0;r<i;r++)e[r]=Math.floor(256*Math.random());return e}class qx{static A(){const e=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=ES(40);for(let s=0;s<o.length;++s)r.length<20&&o[s]<e&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[s]%62))}return r}}function fn(i,n){return i<n?-1:i>n?1:0}function Lm(i,n,e){return i.length===n.length&&i.every((r,o)=>e(r,n[o]))}function GR(i){return i+"\0"}class Gi{constructor(n,e){if(this.seconds=n,this.nanoseconds=e,e<0)throw new je(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new je(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(n<-62135596800)throw new je(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new je(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return Gi.fromMillis(Date.now())}static fromDate(n){return Gi.fromMillis(n.getTime())}static fromMillis(n){const e=Math.floor(n/1e3),r=Math.floor(1e6*(n-1e3*e));return new Gi(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?fn(this.nanoseconds,n.nanoseconds):fn(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zt{constructor(n){this.timestamp=n}static fromTimestamp(n){return new zt(n)}static min(){return new zt(new Gi(0,0))}static max(){return new zt(new Gi(253402300799,999999999))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rb{constructor(n,e,r){void 0===e?e=0:e>n.length&&St(),void 0===r?r=n.length-e:r>n.length-e&&St(),this.segments=n,this.offset=e,this.len=r}get length(){return this.len}isEqual(n){return 0===rb.comparator(this,n)}child(n){const e=this.segments.slice(this.offset,this.limit());return n instanceof rb?n.forEach(r=>{e.push(r)}):e.push(n),this.construct(e)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==n.get(e))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==n.get(e))return!1;return!0}forEach(n){for(let e=this.offset,r=this.limit();e<r;e++)n(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,e){const r=Math.min(n.length,e.length);for(let o=0;o<r;o++){const s=n.get(o),c=e.get(o);if(s<c)return-1;if(s>c)return 1}return n.length<e.length?-1:n.length>e.length?1:0}}class jn extends rb{construct(n,e,r){return new jn(n,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const e=[];for(const r of n){if(r.indexOf("//")>=0)throw new je(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(o=>o.length>0))}return new jn(e)}static emptyPath(){return new jn([])}}const n2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends rb{construct(n,e,r){return new Rr(n,e,r)}static isValidIdentifier(n){return n2.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(n){const e=[];let r="",o=0;const s=()=>{if(0===r.length)throw new je(be.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<n.length;){const h=n[o];if("\\"===h){if(o+1===n.length)throw new je(be.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const p=n[o+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new je(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);r+=p,o+=2}else"`"===h?(c=!c,o++):"."!==h||c?(r+=h,o++):(s(),o++)}if(s(),c)throw new je(be.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new Rr(e)}static emptyPath(){return new Rr([])}}class vt{constructor(n){this.path=n}static fromPath(n){return new vt(jn.fromString(n))}static fromName(n){return new vt(jn.fromString(n).popFirst(5))}static empty(){return new vt(jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(n){return null!==n&&0===jn.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,e){return jn.comparator(n.path,e.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new vt(new jn(n.slice()))}}class Yx{constructor(n,e,r,o){this.indexId=n,this.collectionGroup=e,this.fields=r,this.indexState=o}}function CS(i){return i.fields.find(n=>2===n.kind)}function Um(i){return i.fields.filter(n=>2!==n.kind)}Yx.UNKNOWN_ID=-1;class Bm{constructor(n,e){this.fieldPath=n,this.kind=e}}class a_{constructor(n,e){this.sequenceNumber=n,this.offset=e}static empty(){return new a_(0,ba.min())}}function l_(i,n){const e=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=zt.fromTimestamp(1e9===r?new Gi(e+1,0):new Gi(e,r));return new ba(o,vt.empty(),n)}function TS(i){return new ba(i.readTime,i.key,-1)}class ba{constructor(n,e,r){this.readTime=n,this.documentKey=e,this.largestBatchId=r}static min(){return new ba(zt.min(),vt.empty(),-1)}static max(){return new ba(zt.max(),vt.empty(),-1)}}function SS(i,n){let e=i.readTime.compareTo(n.readTime);return 0!==e?e:(e=vt.comparator(i.documentKey,n.documentKey),0!==e?e:fn(i.largestBatchId,n.largestBatchId))}const WR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}function $d(i){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,De.Z)(function*(i){if(i.code!==be.FAILED_PRECONDITION||i.message!==WR)throw i;Qe("LocalStore","Unexpectedly lost primary lease")}),Kx.apply(this,arguments)}class ge{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(n){return this.next(void 0,n)}next(n,e){return this.callbackAttached&&St(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(n,this.result):new ge((r,o)=>{this.nextCallback=s=>{this.wrapSuccess(n,s).next(r,o)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,o)}})}toPromise(){return new Promise((n,e)=>{this.next(n,e)})}wrapUserFunction(n){try{const e=n();return e instanceof ge?e:ge.resolve(e)}catch(e){return ge.reject(e)}}wrapSuccess(n,e){return n?this.wrapUserFunction(()=>n(e)):ge.resolve(e)}wrapFailure(n,e){return n?this.wrapUserFunction(()=>n(e)):ge.reject(e)}static resolve(n){return new ge((e,r)=>{e(n)})}static reject(n){return new ge((e,r)=>{r(n)})}static waitFor(n){return new ge((e,r)=>{let o=0,s=0,c=!1;n.forEach(h=>{++o,h.next(()=>{++s,c&&s===o&&e()},p=>r(p))}),c=!0,s===o&&e()})}static or(n){let e=ge.resolve(!1);for(const r of n)e=e.next(o=>o?ge.resolve(o):r());return e}static forEach(n,e){const r=[];return n.forEach((o,s)=>{r.push(e.call(this,o,s))}),this.waitFor(r)}static mapArray(n,e){return new ge((r,o)=>{const s=n.length,c=new Array(s);let h=0;for(let p=0;p<s;p++){const _=p;e(n[_]).next(w=>{c[_]=w,++h,h===s&&r(c)},w=>o(w))}})}static doWhile(n,e){return new ge((r,o)=>{const s=()=>{!0===n()?e().next(()=>{s()},o):r()};s()})}}class Qx{constructor(n,e){this.action=n,this.transaction=e,this.aborted=!1,this.v=new $r,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new Vm(n,e.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=sb(r.target.error);this.v.reject(new Vm(n,o))}}static open(n,e,r,o){try{return new Qx(e,n.transaction(o,r))}catch(s){throw new Vm(e,s)}}get R(){return this.v.promise}abort(n){n&&this.v.reject(n),this.aborted||(Qe("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const n=this.transaction;this.aborted||"function"!=typeof n.commit||n.commit()}store(n){const e=this.transaction.objectStore(n);return new Xa(e)}}class Qa{constructor(n,e,r){this.name=n,this.version=e,this.V=r,12.2===Qa.S((0,j.z$)())&&xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return Qe("SimpleDb","Removing database:",n),kh(window.indexedDB.deleteDatabase(n)).toPromise()}static D(){if(!(0,j.hl)())return!1;if(Qa.C())return!0;const n=(0,j.z$)(),e=Qa.S(n),r=0<e&&e<10,o=Qa.N(n),s=0<o&&o<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||r||s)}static C(){var n;return typeof process<"u"&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.k)}static M(n,e){return n.store(e)}static S(n){const e=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(n){const e=n.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(n){var e=this;return(0,De.Z)(function*(){return e.db||(Qe("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,o)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{o(new Vm(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;o("VersionError"===h.name?new je(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new je(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Vm(n,h))},s.onupgradeneeded=c=>{Qe("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.V.O(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{Qe("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=r=>e.F(r)),e.db})()}B(n){this.F=n,this.db&&(this.db.onversionchange=e=>n(e))}runTransaction(n,e,r,o){var s=this;return(0,De.Z)(function*(){const c="readonly"===e;let h=0;for(;;){++h;try{s.db=yield s.$(n);const p=Qx.open(s.db,n,c?"readonly":"readwrite",r),_=o(p).next(w=>(p.P(),w)).catch(w=>(p.abort(w),ge.reject(w))).toPromise();return _.catch(()=>{}),yield p.R,_}catch(p){const _=p,w="FirebaseError"!==_.name&&h<3;if(Qe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),s.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class AS{constructor(n){this.L=n,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(n){this.L=n}done(){this.q=!0}G(n){this.U=n}delete(){return kh(this.L.delete())}}class Vm extends je{constructor(n,e){super(be.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Mh(i){return"IndexedDbTransactionError"===i.name}class Xa{constructor(n){this.store=n}put(n,e){let r;return void 0!==e?(Qe("SimpleDb","PUT",this.store.name,n,e),r=this.store.put(e,n)):(Qe("SimpleDb","PUT",this.store.name,"<auto-key>",n),r=this.store.put(n)),kh(r)}add(n){return Qe("SimpleDb","ADD",this.store.name,n,n),kh(this.store.add(n))}get(n){return kh(this.store.get(n)).next(e=>(void 0===e&&(e=null),Qe("SimpleDb","GET",this.store.name,n,e),e))}delete(n){return Qe("SimpleDb","DELETE",this.store.name,n),kh(this.store.delete(n))}count(){return Qe("SimpleDb","COUNT",this.store.name),kh(this.store.count())}j(n,e){const r=this.options(n,e);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),s=[];return this.W(o,(c,h)=>{s.push(h)}).next(()=>s)}{const o=this.store.getAll(r.range);return new ge((s,c)=>{o.onerror=h=>{c(h.target.error)},o.onsuccess=h=>{s(h.target.result)}})}}H(n,e){const r=this.store.getAll(n,null===e?void 0:e);return new ge((o,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}J(n,e){Qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(n,e);r.Y=!1;const o=this.cursor(r);return this.W(o,(s,c,h)=>h.delete())}X(n,e){let r;e?r=n:(r={},e=n);const o=this.cursor(r);return this.W(o,e)}Z(n){const e=this.cursor({});return new ge((r,o)=>{e.onerror=s=>{const c=sb(s.target.error);o(c)},e.onsuccess=s=>{const c=s.target.result;c?n(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}W(n,e){const r=[];return new ge((o,s)=>{n.onerror=c=>{s(c.target.error)},n.onsuccess=c=>{const h=c.target.result;if(!h)return void o();const p=new AS(h),_=e(h.primaryKey,h.value,p);if(_ instanceof ge){const w=_.catch(I=>(p.done(),ge.reject(I)));r.push(w)}p.isDone?o():null===p.K?h.continue():h.continue(p.K)}}).next(()=>ge.waitFor(r))}options(n,e){let r;return void 0!==n&&("string"==typeof n?r=n:e=n),{index:r,range:e}}cursor(n){let e="next";if(n.reverse&&(e="prev"),n.index){const r=this.store.index(n.index);return n.Y?r.openKeyCursor(n.range,e):r.openCursor(n.range,e)}return this.store.openCursor(n.range,e)}}function kh(i){return new ge((n,e)=>{i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{const o=sb(r.target.error);e(o)}})}let ob=!1;function sb(i){const n=Qa.S((0,j.z$)());if(n>=12.2&&n<13){const e="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(e)>=0){const r=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ob||(ob=!0,setTimeout(()=>{throw r},0)),r}}return i}class qR{constructor(n,e){this.asyncQueue=n,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(n){var e=this;Qe("IndexBackiller",`Scheduled in ${n}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",n,(0,De.Z)(function*(){e.task=null;try{Qe("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(r){Mh(r)?Qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield $d(r)}yield e.et(6e4)}))}}class r2{constructor(n,e){this.localStore=n,this.persistence=e}nt(n=50){var e=this;return(0,De.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>e.st(r,n))})()}st(n,e){const r=new Set;let o=e,s=!0;return ge.doWhile(()=>!0===s&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(n).next(c=>{if(null!==c&&!r.has(c))return Qe("IndexBackiller",`Processing collection: ${c}`),this.it(n,c,o).next(h=>{o-=h,r.add(c)});s=!1})).next(()=>e-o)}it(n,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(n,e).next(o=>this.localStore.localDocuments.getNextDocuments(n,e,o,r).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(n,c).next(()=>this.rt(o,s)).next(h=>(Qe("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(n,e,h))).next(()=>c.size)}))}rt(n,e){let r=n;return e.changes.forEach((o,s)=>{const c=TS(s);SS(c,r)>0&&(r=c)}),new ba(r.readTime,r.documentKey,Math.max(e.batchId,n.largestBatchId))}}let Ai=(()=>{class i{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return i.ct=-1,i})();function c_(i){return null==i}function Rh(i){return 0===i&&1/i==-1/0}function MS(i){return"number"==typeof i&&Number.isInteger(i)&&!Rh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function $o(i){let n="";for(let e=0;e<i.length;e++)n.length>0&&(n=Jx(n)),n=Xx(i.get(e),n);return Jx(n)}function Xx(i,n){let e=n;const r=i.length;for(let o=0;o<r;o++){const s=i.charAt(o);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function Jx(i){return i+"\x01\x01"}function Ja(i){const n=i.length;if(Vt(n>=2),2===n)return Vt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),jn.emptyPath();const e=n-2,r=[];let o="";for(let s=0;s<n;){const c=i.indexOf("\x01",s);switch((c<0||c>e)&&St(),i.charAt(c+1)){case"\x01":const h=i.substring(s,c);let p;0===o.length?p=h:(o+=h,p=o,o=""),r.push(p);break;case"\x10":o+=i.substring(s,c),o+="\0";break;case"\x11":o+=i.substring(s,c+1);break;default:St()}s=c+2}return new jn(r)}const kS=["userId","batchId"];function d_(i,n){return[i,$o(n)]}function eE(i,n,e){return[i,$o(n),e]}const RS={},PS=["prefixPath","collectionGroup","readTime","documentId"],YR=["prefixPath","collectionGroup","documentId"],OS=["collectionGroup","readTime","prefixPath","documentId"],ZR=["canonicalId","targetId"],tE=["targetId","path"],Gd=["path","targetId"],NS=["collectionId","parent"],nE=["indexId","uid"],iE=["uid","sequenceNumber"],KR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],o2=["indexId","uid","orderedDocumentKey"],FS=["userId","collectionPath","documentId"],QR=["userId","collectionPath","largestBatchId"],XR=["userId","collectionGroup","largestBatchId"],LS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JR=[...LS,"documentOverlays"],rE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eP=rE,US=[...eP,"indexConfiguration","indexState","indexEntries"];class oE extends Zx{constructor(n,e){super(),this.ht=n,this.currentSequenceNumber=e}}function Xr(i,n){const e=wt(i);return Qa.M(e.ht,n)}function tP(i){let n=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&n++;return n}function jl(i,n){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&n(e,i[e])}function sE(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class Mi{constructor(n,e){this.comparator=n,this.root=e||uo.EMPTY}insert(n,e){return new Mi(this.comparator,this.root.insert(n,e,this.comparator).copy(null,null,uo.BLACK,null,null))}remove(n){return new Mi(this.comparator,this.root.remove(n,this.comparator).copy(null,null,uo.BLACK,null,null))}get(n){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(n,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(n){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(n,r.key);if(0===o)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((e,r)=>(n(e,r),!1))}toString(){const n=[];return this.inorderTraversal((e,r)=>(n.push(`${e}:${r}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new ab(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new ab(this.root,n,this.comparator,!1)}getReverseIterator(){return new ab(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new ab(this.root,n,this.comparator,!0)}}class ab{constructor(n,e,r,o){this.isReverse=o,this.nodeStack=[];let s=1;for(;!n.isEmpty();)if(s=e?r(n.key,e):1,e&&o&&(s*=-1),s<0)n=this.isReverse?n.left:n.right;else{if(0===s){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const e={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class uo{constructor(n,e,r,o,s){this.key=n,this.value=e,this.color=r??uo.RED,this.left=o??uo.EMPTY,this.right=s??uo.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,e,r,o,s){return new uo(n??this.key,e??this.value,r??this.color,o??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,e,r){let o=this;const s=r(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,e,r),null):0===s?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(n,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return uo.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,e){let r,o=this;if(e(n,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(n,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===e(n,o.key)){if(o.right.isEmpty())return uo.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(n,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,uo.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,uo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,e)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw St();const n=this.left.check();if(n!==this.right.check())throw St();return n+(this.isRed()?0:1)}}uo.EMPTY=null,uo.RED=!0,uo.BLACK=!1,uo.EMPTY=new class{constructor(){this.size=0}get key(){throw St()}get value(){throw St()}get color(){throw St()}get left(){throw St()}get right(){throw St()}copy(i,n,e,r,o){return this}insert(i,n,e){return new uo(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hi{constructor(n){this.comparator=n,this.data=new Mi(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((e,r)=>(n(e),!1))}forEachInRange(n,e){const r=this.data.getIteratorFrom(n[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,n[1])>=0)return;e(o.key)}}forEachWhile(n,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!n(r.getNext().key))return}firstAfterOrEqual(n){const e=this.data.getIteratorFrom(n);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ph(this.data.getIterator())}getIteratorFrom(n){return new Ph(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let e=this;return e.size<n.size&&(e=n,n=this),n.forEach(r=>{e=e.add(r)}),e}isEqual(n){if(!(n instanceof Hi)||this.size!==n.size)return!1;const e=this.data.getIterator(),r=n.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,s=r.getNext().key;if(0!==this.comparator(o,s))return!1}return!0}toArray(){const n=[];return this.forEach(e=>{n.push(e)}),n}toString(){const n=[];return this.forEach(e=>n.push(e)),"SortedSet("+n.toString()+")"}copy(n){const e=new Hi(this.comparator);return e.data=n,e}}class Ph{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oc(i){return i.hasNext()?i.getNext():void 0}class cs{constructor(n){this.fields=n,n.sort(Rr.comparator)}static empty(){return new cs([])}unionWith(n){let e=new Hi(Rr.comparator);for(const r of this.fields)e=e.add(r);for(const r of n)e=e.add(r);return new cs(e.toArray())}covers(n){for(const e of this.fields)if(e.isPrefixOf(n))return!0;return!1}isEqual(n){return Lm(this.fields,n.fields,(e,r)=>e.isEqual(r))}}class aE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jr{constructor(n){this.binaryString=n}static fromBase64String(n){const e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new aE("Invalid base64 string: "+o):o}}(n);return new Jr(e)}static fromUint8Array(n){const e=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(n);return new Jr(e)}[Symbol.iterator](){let n=0;return{next:()=>n<this.binaryString.length?{value:this.binaryString.charCodeAt(n++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const e=new Uint8Array(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return fn(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Jr.EMPTY_BYTE_STRING=new Jr("");const s2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nc(i){if(Vt(!!i),"string"==typeof i){let n=0;const e=s2.exec(i);if(Vt(!!e),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),n=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:n}}return{seconds:Er(i.seconds),nanos:Er(i.nanos)}}function Er(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Fc(i){return"string"==typeof i?Jr.fromBase64String(i):Jr.fromUint8Array(i)}function lE(i){var n,e;return"server_timestamp"===(null===(e=((null===(n=i?.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function cE(i){const n=i.mapValue.fields.__previous_value__;return lE(n)?cE(n):n}function lb(i){const n=Nc(i.mapValue.fields.__local_write_time__.timestampValue);return new Gi(n.seconds,n.nanos)}class BS{constructor(n,e,r,o,s,c,h,p,_){this.databaseId=n,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=_}}class Wd{constructor(n,e){this.projectId=n,this.database=e||"(default)"}static empty(){return new Wd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Wd&&n.projectId===this.projectId&&n.database===this.database}}const qd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cb={nullValue:"NULL_VALUE"};function Oh(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?lE(i)?4:mb(i)?9007199254740991:10:St()}function Lc(i,n){if(i===n)return!0;const e=Oh(i);if(e!==Oh(n))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return lb(i).isEqual(lb(n));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const s=Nc(r.timestampValue),c=Nc(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return o=n,Fc(i.bytesValue).isEqual(Fc(o.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(r,o){return Er(r.geoPointValue.latitude)===Er(o.geoPointValue.latitude)&&Er(r.geoPointValue.longitude)===Er(o.geoPointValue.longitude)}(i,n);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Er(r.integerValue)===Er(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const s=Er(r.doubleValue),c=Er(o.doubleValue);return s===c?Rh(s)===Rh(c):isNaN(s)&&isNaN(c)}return!1}(i,n);case 9:return Lm(i.arrayValue.values||[],n.arrayValue.values||[],Lc);case 10:return function(r,o){const s=r.mapValue.fields||{},c=o.mapValue.fields||{};if(tP(s)!==tP(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!Lc(s[h],c[h])))return!1;return!0}(i,n);default:return St()}var o}function db(i,n){return void 0!==(i.values||[]).find(e=>Lc(e,n))}function Nh(i,n){if(i===n)return 0;const e=Oh(i),r=Oh(n);if(e!==r)return fn(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return fn(i.booleanValue,n.booleanValue);case 2:return function(o,s){const c=Er(o.integerValue||o.doubleValue),h=Er(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(i,n);case 3:return iP(i.timestampValue,n.timestampValue);case 4:return iP(lb(i),lb(n));case 5:return fn(i.stringValue,n.stringValue);case 6:return function(o,s){const c=Fc(o),h=Fc(s);return c.compareTo(h)}(i.bytesValue,n.bytesValue);case 7:return function(o,s){const c=o.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const _=fn(c[p],h[p]);if(0!==_)return _}return fn(c.length,h.length)}(i.referenceValue,n.referenceValue);case 8:return function(o,s){const c=fn(Er(o.latitude),Er(s.latitude));return 0!==c?c:fn(Er(o.longitude),Er(s.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(o,s){const c=o.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const _=Nh(c[p],h[p]);if(_)return _}return fn(c.length,h.length)}(i.arrayValue,n.arrayValue);case 10:return function(o,s){if(o===qd.mapValue&&s===qd.mapValue)return 0;if(o===qd.mapValue)return 1;if(s===qd.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=s.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let w=0;w<h.length&&w<_.length;++w){const I=fn(h[w],_[w]);if(0!==I)return I;const A=Nh(c[h[w]],p[_[w]]);if(0!==A)return A}return fn(h.length,_.length)}(i.mapValue,n.mapValue);default:throw St()}}function iP(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return fn(i,n);const e=Nc(i),r=Nc(n),o=fn(e.seconds,r.seconds);return 0!==o?o:fn(e.nanos,r.nanos)}function Hm(i){return zm(i)}function zm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(r){const o=Nc(r);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Fc(i.bytesValue).toBase64():"referenceValue"in i?vt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(r){let o="[",s=!0;for(const c of r.values||[])s?s=!1:o+=",",o+=zm(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(r){const o=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const h of o)c?c=!1:s+=",",s+=`${h}:${zm(r.fields[h])}`;return s+"}"}(i.mapValue):St();var n}function Fh(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function hb(i){return!!i&&"integerValue"in i}function el(i){return!!i&&"arrayValue"in i}function dE(i){return!!i&&"nullValue"in i}function fb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function jm(i){return!!i&&"mapValue"in i}function u_(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return jl(i.mapValue.fields,(e,r)=>n.mapValue.fields[e]=u_(r)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)n.arrayValue.values[e]=u_(i.arrayValue.values[e]);return n}return Object.assign({},i)}function mb(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function uE(i){return"nullValue"in i?cb:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Fh(Wd.empty(),vt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:St()}function pb(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Fh(Wd.empty(),vt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?qd:St()}function rP(i,n){const e=Nh(i.value,n.value);return 0!==e?e:i.inclusive&&!n.inclusive?-1:!i.inclusive&&n.inclusive?1:0}function oP(i,n){const e=Nh(i.value,n.value);return 0!==e?e:i.inclusive&&!n.inclusive?1:!i.inclusive&&n.inclusive?-1:0}class Go{constructor(n){this.value=n}static empty(){return new Go({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let e=this.value;for(let r=0;r<n.length-1;++r)if(e=(e.mapValue.fields||{})[n.get(r)],!jm(e))return null;return e=(e.mapValue.fields||{})[n.lastSegment()],e||null}}set(n,e){this.getFieldsMap(n.popLast())[n.lastSegment()]=u_(e)}setAll(n){let e=Rr.emptyPath(),r={},o=[];n.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,r,o),r={},o=[],e=h.popLast()}c?r[h.lastSegment()]=u_(c):o.push(h.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,o)}delete(n){const e=this.field(n.popLast());jm(e)&&e.mapValue.fields&&delete e.mapValue.fields[n.lastSegment()]}isEqual(n){return Lc(this.value,n.value)}getFieldsMap(n){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<n.length;++r){let o=e.mapValue.fields[n.get(r)];jm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[n.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(n,e,r){jl(e,(o,s)=>n[o]=s);for(const o of r)delete n[o]}clone(){return new Go(u_(this.value))}}function hE(i){const n=[];return jl(i.fields,(e,r)=>{const o=new Rr([e]);if(jm(r)){const s=hE(r.mapValue).fields;if(0===s.length)n.push(o);else for(const c of s)n.push(o.child(c))}else n.push(o)}),new cs(n)}class Wi{constructor(n,e,r,o,s,c,h){this.key=n,this.documentType=e,this.version=r,this.readTime=o,this.createTime=s,this.data=c,this.documentState=h}static newInvalidDocument(n){return new Wi(n,0,zt.min(),zt.min(),zt.min(),Go.empty(),0)}static newFoundDocument(n,e,r,o){return new Wi(n,1,e,zt.min(),r,o,0)}static newNoDocument(n,e){return new Wi(n,2,e,zt.min(),zt.min(),Go.empty(),0)}static newUnknownDocument(n,e){return new Wi(n,3,e,zt.min(),zt.min(),Go.empty(),2)}convertToFoundDocument(n,e){return!this.createTime.isEqual(zt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=n),this.version=n,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=Go.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=Go.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(n){return this.readTime=n,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof Wi&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}mutableCopy(){return new Wi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yd{constructor(n,e){this.position=n,this.inclusive=e}}function VS(i,n,e){let r=0;for(let o=0;o<i.position.length;o++){const s=n[o],c=i.position[o];if(r=s.field.isKeyField()?vt.comparator(vt.fromName(c.referenceValue),e.key):Nh(c,e.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function HS(i,n){if(null===i)return null===n;if(null===n||i.inclusive!==n.inclusive||i.position.length!==n.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!Lc(i.position[e],n.position[e]))return!1;return!0}class Lh{constructor(n,e="asc"){this.field=n,this.dir=e}}function zS(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}class fE{}class On extends fE{constructor(n,e,r){super(),this.field=n,this.op=e,this.value=r}static create(n,e,r){return n.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(n,e,r):new a2(n,e,r):"array-contains"===e?new cP(n,r):"in"===e?new pE(n,r):"not-in"===e?new qS(n,r):"array-contains-any"===e?new l2(n,r):new On(n,e,r)}static createKeyFieldInFilter(n,e,r){return"in"===e?new aP(n,r):new lP(n,r)}matches(n){const e=n.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Nh(e,this.value)):null!==e&&Oh(this.value)===Oh(e)&&this.matchesComparison(Nh(e,this.value))}matchesComparison(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return St()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ui extends fE{constructor(n,e){super(),this.filters=n,this.op=e,this.lt=null}static create(n,e){return new ui(n,e)}matches(n){return Uh(this)?void 0===this.filters.find(e=>!e.matches(n)):void 0!==this.filters.find(e=>e.matches(n))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((n,e)=>n.concat(e.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const n=this.ft(e=>e.isInequality());return null!==n?n.field:null}ft(n){for(const e of this.getFlattenedFilters())if(n(e))return e;return null}}function Uh(i){return"and"===i.op}function h_(i){return"or"===i.op}function jS(i){return mE(i)&&Uh(i)}function mE(i){for(const n of i.filters)if(n instanceof ui)return!1;return!0}function f_(i){if(i instanceof On)return i.field.canonicalString()+i.op.toString()+Hm(i.value);if(jS(i))return i.filters.map(n=>f_(n)).join(",");{const n=i.filters.map(e=>f_(e)).join(",");return`${i.op}(${n})`}}function $S(i,n){return i instanceof On?(e=i,(r=n)instanceof On&&e.op===r.op&&e.field.isEqual(r.field)&&Lc(e.value,r.value)):i instanceof ui?function(e,r){return r instanceof ui&&e.op===r.op&&e.filters.length===r.filters.length&&e.filters.reduce((o,s,c)=>o&&$S(s,r.filters[c]),!0)}(i,n):void St();var e,r}function GS(i,n){const e=i.filters.concat(n);return ui.create(e,i.op)}function sP(i){return i instanceof On?`${(n=i).field.canonicalString()} ${n.op} ${Hm(n.value)}`:i instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map(sP).join(" ,")+"}"}(i):"Filter";var n}class a2 extends On{constructor(n,e,r){super(n,e,r),this.key=vt.fromName(r.referenceValue)}matches(n){const e=vt.comparator(n.key,this.key);return this.matchesComparison(e)}}class aP extends On{constructor(n,e){super(n,"in",e),this.keys=WS(0,e)}matches(n){return this.keys.some(e=>e.isEqual(n.key))}}class lP extends On{constructor(n,e){super(n,"not-in",e),this.keys=WS(0,e)}matches(n){return!this.keys.some(e=>e.isEqual(n.key))}}function WS(i,n){var e;return((null===(e=n.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>vt.fromName(r.referenceValue))}class cP extends On{constructor(n,e){super(n,"array-contains",e)}matches(n){const e=n.data.field(this.field);return el(e)&&db(e.arrayValue,this.value)}}class pE extends On{constructor(n,e){super(n,"in",e)}matches(n){const e=n.data.field(this.field);return null!==e&&db(this.value.arrayValue,e)}}class qS extends On{constructor(n,e){super(n,"not-in",e)}matches(n){if(db(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=n.data.field(this.field);return null!==e&&!db(this.value.arrayValue,e)}}class l2 extends On{constructor(n,e){super(n,"array-contains-any",e)}matches(n){const e=n.data.field(this.field);return!(!el(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>db(this.value.arrayValue,r))}}class dP{constructor(n,e=null,r=[],o=[],s=null,c=null,h=null){this.path=n,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=s,this.startAt=c,this.endAt=h,this.dt=null}}function m_(i,n=null,e=[],r=[],o=null,s=null,c=null){return new dP(i,n,e,r,o,s,c)}function Zd(i){const n=wt(i);if(null===n.dt){let e=n.path.canonicalString();null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(r=>f_(r)).join(","),e+="|ob:",e+=n.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),c_(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(r=>Hm(r)).join(",")),n.endAt&&(e+="|ub:",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(r=>Hm(r)).join(",")),n.dt=e}return n.dt}function $m(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!zS(i.orderBy[e],n.orderBy[e]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!$S(i.filters[e],n.filters[e]))return!1;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!HS(i.startAt,n.startAt)&&HS(i.endAt,n.endAt)}function gb(i){return vt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Gm(i,n){return i.filters.filter(e=>e instanceof On&&e.field.isEqual(n))}function YS(i,n,e){let r=cb,o=!0;for(const s of Gm(i,n)){let c=cb,h=!0;switch(s.op){case"<":case"<=":c=uE(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=cb}rP({value:r,inclusive:o},{value:c,inclusive:h})<0&&(r=c,o=h)}if(null!==e)for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(n)){const c=e.position[s];rP({value:r,inclusive:o},{value:c,inclusive:e.inclusive})<0&&(r=c,o=e.inclusive);break}return{value:r,inclusive:o}}function ZS(i,n,e){let r=qd,o=!0;for(const s of Gm(i,n)){let c=qd,h=!0;switch(s.op){case">=":case">":c=pb(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=qd}oP({value:r,inclusive:o},{value:c,inclusive:h})>0&&(r=c,o=h)}if(null!==e)for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(n)){const c=e.position[s];oP({value:r,inclusive:o},{value:c,inclusive:e.inclusive})>0&&(r=c,o=e.inclusive);break}return{value:r,inclusive:o}}class $l{constructor(n,e=null,r=[],o=[],s=null,c="F",h=null,p=null){this.path=n,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this.wt=null,this._t=null}}function gE(i,n,e,r,o,s,c,h){return new $l(i,n,e,r,o,s,c,h)}function p_(i){return new $l(i)}function KS(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Wm(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function _E(i){for(const n of i.filters){const e=n.getFirstInequalityField();if(null!==e)return e}return null}function yE(i){return null!==i.collectionGroup}function qm(i){const n=wt(i);if(null===n.wt){n.wt=[];const e=_E(n),r=Wm(n);if(null!==e&&null===r)e.isKeyField()||n.wt.push(new Lh(e)),n.wt.push(new Lh(Rr.keyField(),"asc"));else{let o=!1;for(const s of n.explicitOrderBy)n.wt.push(s),s.field.isKeyField()&&(o=!0);if(!o){const s=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.wt.push(new Lh(Rr.keyField(),s))}}}return n.wt}function Ms(i){const n=wt(i);if(!n._t)if("F"===n.limitType)n._t=m_(n.path,n.collectionGroup,qm(n),n.filters,n.limit,n.startAt,n.endAt);else{const e=[];for(const s of qm(n))e.push(new Lh(s.field,"desc"===s.dir?"asc":"desc"));const r=n.endAt?new Yd(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Yd(n.startAt.position,n.startAt.inclusive):null;n._t=m_(n.path,n.collectionGroup,e,n.filters,n.limit,r,o)}return n._t}function vE(i,n){n.getFirstInequalityField(),_E(i);const e=i.filters.concat([n]);return new $l(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function bE(i,n,e){return new $l(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,e,i.startAt,i.endAt)}function _b(i,n){return $m(Ms(i),Ms(n))&&i.limitType===n.limitType}function uP(i){return`${Zd(Ms(i))}|lt:${i.limitType}`}function QS(i){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(r=>sP(r)).join(", ")}]`),c_(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(r=>Hm(r)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(r=>Hm(r)).join(",")),`Target(${e})`}(Ms(i))}; limitType=${i.limitType})`}function yb(i,n){return n.isFoundDocument()&&function(e,r){const o=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(o):vt.isDocumentKey(e.path)?e.path.isEqual(o):e.path.isImmediateParentOf(o)}(i,n)&&function(e,r){for(const o of qm(e))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(i,n)&&function(e,r){for(const o of e.filters)if(!o.matches(r))return!1;return!0}(i,n)&&(r=n,!((e=i).startAt&&!function(o,s,c){const h=VS(o,s,c);return o.inclusive?h<=0:h<0}(e.startAt,qm(e),r)||e.endAt&&!function(o,s,c){const h=VS(o,s,c);return o.inclusive?h>=0:h>0}(e.endAt,qm(e),r)));var e,r}function XS(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function hP(i){return(n,e)=>{let r=!1;for(const o of qm(i)){const s=c2(o,n,e);if(0!==s)return s;r=r||o.field.isKeyField()}return 0}}function c2(i,n,e){const r=i.field.isKeyField()?vt.comparator(n.key,e.key):function(o,s,c){const h=s.data.field(o),p=c.data.field(o);return null!==h&&null!==p?Nh(h,p):St()}(i.field,n,e);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return St()}}class Kd{constructor(n,e){this.mapKeyFn=n,this.equalsFn=e,this.inner={},this.innerSize=0}get(n){const e=this.mapKeyFn(n),r=this.inner[e];if(void 0!==r)for(const[o,s]of r)if(this.equalsFn(o,n))return s}has(n){return void 0!==this.get(n)}set(n,e){const r=this.mapKeyFn(n),o=this.inner[r];if(void 0===o)return this.inner[r]=[[n,e]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],n))return void(o[s]=[n,e]);o.push([n,e]),this.innerSize++}delete(n){const e=this.mapKeyFn(n),r=this.inner[e];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],n))return 1===r.length?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(n){jl(this.inner,(e,r)=>{for(const[o,s]of r)n(o,s)})}isEmpty(){return sE(this.inner)}size(){return this.innerSize}}const d2=new Mi(vt.comparator);function Ws(){return d2}const JS=new Mi(vt.comparator);function vb(...i){let n=JS;for(const e of i)n=n.insert(e.key,e);return n}function a(i){let n=JS;return i.forEach((e,r)=>n=n.insert(e,r.overlayedDocument)),n}function l(){return f()}function u(){return f()}function f(){return new Kd(i=>i.toString(),(i,n)=>i.isEqual(n))}const m=new Mi(vt.comparator),g=new Hi(vt.comparator);function b(...i){let n=g;for(const e of i)n=n.add(e);return n}const E=new Hi(fn);function T(){return E}function M(i,n){if(i.useProto3Json){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(n)?"-0":n}}function O(i){return{integerValue:""+i}}function W(i,n){return MS(n)?O(n):M(i,n)}class ne{constructor(){this._=void 0}}function de(i,n,e){return i instanceof mt?function(r,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&lE(o)&&(o=cE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(e,n):i instanceof kt?Be(i,n):i instanceof Xt?Rn(i,n):function(r,o){const s=Ke(r,o),c=So(s)+So(r.gt);return hb(s)&&hb(r.gt)?O(c):M(r.serializer,c)}(i,n)}function Fe(i,n,e){return i instanceof kt?Be(i,n):i instanceof Xt?Rn(i,n):e}function Ke(i,n){return i instanceof In?hb(e=n)||(r=e)&&"doubleValue"in r?n:{integerValue:0}:null;var r,e}class mt extends ne{}class kt extends ne{constructor(n){super(),this.elements=n}}function Be(i,n){const e=g_(n);for(const r of i.elements)e.some(o=>Lc(o,r))||e.push(r);return{arrayValue:{values:e}}}class Xt extends ne{constructor(n){super(),this.elements=n}}function Rn(i,n){let e=g_(n);for(const r of i.elements)e=e.filter(o=>!Lc(o,r));return{arrayValue:{values:e}}}class In extends ne{constructor(n,e){super(),this.serializer=n,this.gt=e}}function So(i){return Er(i.integerValue||i.doubleValue)}function g_(i){return el(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class __{constructor(n,e){this.field=n,this.transform=e}}class uj{constructor(n,e){this.version=n,this.transformResults=e}}class Cr{constructor(n,e){this.updateTime=n,this.exists=e}static none(){return new Cr}static exists(n){return new Cr(void 0,n)}static updateTime(n){return new Cr(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function eA(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class tA{}function u2(i,n){if(!i.hasLocalMutations||n&&0===n.fields.length)return null;if(null===n)return i.isNoDocument()?new wb(i.key,Cr.none()):new bb(i.key,i.data,Cr.none());{const e=i.data,r=Go.empty();let o=new Hi(Rr.comparator);for(let s of n.fields)if(!o.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?r.delete(s):r.set(s,c),o=o.add(s)}return new Bh(i.key,r,new cs(o.toArray()),Cr.none())}}function hj(i,n,e){i instanceof bb?function(r,o,s){const c=r.value.clone(),h=m2(r.fieldTransforms,o,s.transformResults);c.setAll(h),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(i,n,e):i instanceof Bh?function(r,o,s){if(!eA(r.precondition,o))return void o.convertToUnknownDocument(s.version);const c=m2(r.fieldTransforms,o,s.transformResults),h=o.data;h.setAll(f2(r)),h.setAll(c),o.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(i,n,e):n.convertToNoDocument(e.version).setHasCommittedMutations()}function wE(i,n,e,r){return i instanceof bb?function(o,s,c,h){if(!eA(o.precondition,s))return c;const p=o.value.clone(),_=p2(o.fieldTransforms,h,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(i,n,e,r):i instanceof Bh?function(o,s,c,h){if(!eA(o.precondition,s))return c;const p=p2(o.fieldTransforms,h,s),_=s.data;return _.setAll(f2(o)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===c?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(i,n,e,r):(c=e,eA(i.precondition,s=n)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function fj(i,n){let e=null;for(const r of i.fieldTransforms){const o=n.data.field(r.field),s=Ke(r.transform,o||null);null!=s&&(null===e&&(e=Go.empty()),e.set(r.field,s))}return e||null}function h2(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(r=n.fieldTransforms,!!(void 0===(e=i.fieldTransforms)&&void 0===r||e&&r&&Lm(e,r,(o,s)=>function fP(i,n){return i.field.isEqual(n.field)&&(r=n.transform,(e=i.transform)instanceof kt&&r instanceof kt||e instanceof Xt&&r instanceof Xt?Lm(e.elements,r.elements,Lc):e instanceof In&&r instanceof In?Lc(e.gt,r.gt):e instanceof mt&&r instanceof mt);var e,r}(o,s))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var e,r}class bb extends tA{constructor(n,e,r,o=[]){super(),this.key=n,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bh extends tA{constructor(n,e,r,o,s=[]){super(),this.key=n,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function f2(i){const n=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=i.data.field(e);n.set(e,r)}}),n}function m2(i,n,e){const r=new Map;Vt(i.length===e.length);for(let o=0;o<e.length;o++){const s=i[o],c=s.transform,h=n.data.field(s.field);r.set(s.field,Fe(c,h,e[o]))}return r}function p2(i,n,e){const r=new Map;for(const o of i){const s=o.transform,c=e.data.field(o.field);r.set(o.field,de(s,c,n))}return r}class wb extends tA{constructor(n,e){super(),this.key=n,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mP extends tA{constructor(n,e){super(),this.key=n,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pP{constructor(n,e,r,o){this.batchId=n,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(n,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const s=this.mutations[o];s.key.isEqual(n.key)&&hj(s,n,r[o])}}applyToLocalView(n,e){for(const r of this.baseMutations)r.key.isEqual(n.key)&&(e=wE(r,n,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(n.key)&&(e=wE(r,n,e,this.localWriteTime));return e}applyToLocalDocumentSet(n,e){const r=u();return this.mutations.forEach(o=>{const s=n.get(o.key),c=s.overlayedDocument;let h=this.applyToLocalView(c,s.mutatedFields);h=e.has(o.key)?null:h;const p=u2(c,h);null!==p&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(zt.min())}),r}keys(){return this.mutations.reduce((n,e)=>n.add(e.key),b())}isEqual(n){return this.batchId===n.batchId&&Lm(this.mutations,n.mutations,(e,r)=>h2(e,r))&&Lm(this.baseMutations,n.baseMutations,(e,r)=>h2(e,r))}}class gP{constructor(n,e,r,o){this.batch=n,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(n,e,r){Vt(n.mutations.length===r.length);let o=m;const s=n.mutations;for(let c=0;c<s.length;c++)o=o.insert(s[c].key,r[c].version);return new gP(n,e,r,o)}}class _P{constructor(n,e){this.largestBatchId=n,this.mutation=e}getKey(){return this.mutation.key}isEqual(n){return null!==n&&this.mutation===n.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pj{constructor(n,e){this.count=n,this.unchangedNames=e}}var ho,Yn;function g2(i){switch(i){default:return St();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function _2(i){if(void 0===i)return xr("GRPC error has no .code"),be.UNKNOWN;switch(i){case ho.OK:return be.OK;case ho.CANCELLED:return be.CANCELLED;case ho.UNKNOWN:return be.UNKNOWN;case ho.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case ho.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case ho.INTERNAL:return be.INTERNAL;case ho.UNAVAILABLE:return be.UNAVAILABLE;case ho.UNAUTHENTICATED:return be.UNAUTHENTICATED;case ho.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case ho.NOT_FOUND:return be.NOT_FOUND;case ho.ALREADY_EXISTS:return be.ALREADY_EXISTS;case ho.PERMISSION_DENIED:return be.PERMISSION_DENIED;case ho.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case ho.ABORTED:return be.ABORTED;case ho.OUT_OF_RANGE:return be.OUT_OF_RANGE;case ho.UNIMPLEMENTED:return be.UNIMPLEMENTED;case ho.DATA_LOSS:return be.DATA_LOSS;default:return St()}}(Yn=ho||(ho={}))[Yn.OK=0]="OK",Yn[Yn.CANCELLED=1]="CANCELLED",Yn[Yn.UNKNOWN=2]="UNKNOWN",Yn[Yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yn[Yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yn[Yn.NOT_FOUND=5]="NOT_FOUND",Yn[Yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yn[Yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yn[Yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yn[Yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yn[Yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yn[Yn.ABORTED=10]="ABORTED",Yn[Yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yn[Yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yn[Yn.INTERNAL=13]="INTERNAL",Yn[Yn.UNAVAILABLE=14]="UNAVAILABLE",Yn[Yn.DATA_LOSS=15]="DATA_LOSS";class yP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return nA}static getOrCreateInstance(){return null===nA&&(nA=new yP),nA}onExistenceFilterMismatch(n){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,n),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(n){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(n))}}let nA=null;function y2(){return new TextEncoder}const gj=new Pc([4294967295,4294967295],0);function v2(i){const n=y2().encode(i),e=new VR;return e.update(n),new Uint8Array(e.digest())}function b2(i){const n=new DataView(i.buffer),e=n.getUint32(0,!0),r=n.getUint32(4,!0),o=n.getUint32(8,!0),s=n.getUint32(12,!0);return[new Pc([e,r],0),new Pc([o,s],0)]}class vP{constructor(n,e,r){if(this.bitmap=n,this.padding=e,this.hashCount=r,e<0||e>=8)throw new xE(`Invalid padding: ${e}`);if(r<0)throw new xE(`Invalid hash count: ${r}`);if(n.length>0&&0===this.hashCount)throw new xE(`Invalid hash count: ${r}`);if(0===n.length&&0!==e)throw new xE(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*n.length-e,this.Tt=Pc.fromNumber(this.It)}Et(n,e,r){let o=n.add(e.multiply(Pc.fromNumber(r)));return 1===o.compare(gj)&&(o=new Pc([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(n){return 0!=(this.bitmap[Math.floor(n/8)]&1<<n%8)}vt(n){if(0===this.It)return!1;const e=v2(n),[r,o]=b2(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(r,o,s);if(!this.At(c))return!1}return!0}static create(n,e,r){const o=n%8==0?0:8-n%8,s=new Uint8Array(Math.ceil(n/8)),c=new vP(s,o,e);return r.forEach(h=>c.insert(h)),c}insert(n){if(0===this.It)return;const e=v2(n),[r,o]=b2(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(r,o,s);this.Rt(c)}}Rt(n){const e=Math.floor(n/8);this.bitmap[e]|=1<<n%8}}class xE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class EE{constructor(n,e,r,o,s){this.snapshotVersion=n,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(n,e,r){const o=new Map;return o.set(n,CE.createSynthesizedTargetChangeForCurrentChange(n,e,r)),new EE(zt.min(),o,new Mi(fn),Ws(),b())}}class CE{constructor(n,e,r,o,s){this.resumeToken=n,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(n,e,r){return new CE(r,e,b(),b(),b())}}class iA{constructor(n,e,r,o){this.Pt=n,this.removedTargetIds=e,this.key=r,this.bt=o}}class w2{constructor(n,e){this.targetId=n,this.Vt=e}}class x2{constructor(n,e,r=Jr.EMPTY_BYTE_STRING,o=null){this.state=n,this.targetIds=e,this.resumeToken=r,this.cause=o}}class E2{constructor(){this.St=0,this.Dt=D2(),this.Ct=Jr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(n){n.approximateByteSize()>0&&(this.Nt=!0,this.Ct=n)}Ot(){let n=b(),e=b(),r=b();return this.Dt.forEach((o,s)=>{switch(s){case 0:n=n.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:St()}}),new CE(this.Ct,this.xt,n,e,r)}Ft(){this.Nt=!1,this.Dt=D2()}Bt(n,e){this.Nt=!0,this.Dt=this.Dt.insert(n,e)}Lt(n){this.Nt=!0,this.Dt=this.Dt.remove(n)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class _j{constructor(n){this.Gt=n,this.Qt=new Map,this.jt=Ws(),this.zt=C2(),this.Wt=new Mi(fn)}Ht(n){for(const e of n.Pt)n.bt&&n.bt.isFoundDocument()?this.Jt(e,n.bt):this.Yt(e,n.key,n.bt);for(const e of n.removedTargetIds)this.Yt(e,n.key,n.bt)}Xt(n){this.forEachTarget(n,e=>{const r=this.Zt(e);switch(n.state){case 0:this.te(e)&&r.$t(n.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(n.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(e);break;case 3:this.te(e)&&(r.Kt(),r.$t(n.resumeToken));break;case 4:this.te(e)&&(this.ee(e),r.$t(n.resumeToken));break;default:St()}})}forEachTarget(n,e){n.targetIds.length>0?n.targetIds.forEach(e):this.Qt.forEach((r,o)=>{this.te(o)&&e(o)})}ne(n){var e;const r=n.targetId,o=n.Vt.count,s=this.se(r);if(s){const c=s.target;if(gb(c))if(0===o){const h=new vt(c.path);this.Yt(r,h,Wi.newNoDocument(h,zt.min()))}else Vt(1===o);else{const h=this.ie(r);if(h!==o){const p=this.re(n,h);0!==p&&(this.ee(r),this.Wt=this.Wt.insert(r,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(e=yP.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(_,w,I){var A,P,B,Y,ee,ve;const Ae={localCacheCount:w,existenceFilterCount:I.count},_e=I.unchangedNames;return _e&&(Ae.bloomFilter={applied:0===_,hashCount:null!==(A=_e?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(Y=null===(B=null===(P=_e?.bits)||void 0===P?void 0:P.bitmap)||void 0===B?void 0:B.length)&&void 0!==Y?Y:0,padding:null!==(ve=null===(ee=_e?.bits)||void 0===ee?void 0:ee.padding)&&void 0!==ve?ve:0}),Ae}(p,h,n.Vt))}}}}re(n,e){const{unchangedNames:r,count:o}=n.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=r;let p,_;try{p=Fc(s).toUint8Array()}catch(w){if(w instanceof aE)return As("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw w}try{_=new vP(p,c,h)}catch(w){return As(w instanceof xE?"BloomFilter error: ":"Applying bloom filter failed: ",w),1}return 0===_.It?1:o!==e-this.oe(n.targetId,_)?2:0}oe(n,e){const r=this.Gt.getRemoteKeysForTarget(n);let o=0;return r.forEach(s=>{const c=this.Gt.ue(),h=`projects/${c.projectId}/databases/${c.database}/documents/${s.path.canonicalString()}`;e.vt(h)||(this.Yt(n,s,null),o++)}),o}ce(n){const e=new Map;this.Qt.forEach((s,c)=>{const h=this.se(c);if(h){if(s.current&&gb(h.target)){const p=new vt(h.target.path);null!==this.jt.get(p)||this.ae(c,p)||this.Yt(c,p,Wi.newNoDocument(p,n))}s.Mt&&(e.set(c,s.Ot()),s.Ft())}});let r=b();this.zt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const _=this.se(p);return!_||"TargetPurposeLimboResolution"===_.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.jt.forEach((s,c)=>c.setReadTime(n));const o=new EE(n,e,this.Wt,this.jt,r);return this.jt=Ws(),this.zt=C2(),this.Wt=new Mi(fn),o}Jt(n,e){if(!this.te(n))return;const r=this.ae(n,e.key)?2:0;this.Zt(n).Bt(e.key,r),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(n))}Yt(n,e,r){if(!this.te(n))return;const o=this.Zt(n);this.ae(n,e)?o.Bt(e,1):o.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(n)),r&&(this.jt=this.jt.insert(e,r))}removeTarget(n){this.Qt.delete(n)}ie(n){const e=this.Zt(n).Ot();return this.Gt.getRemoteKeysForTarget(n).size+e.addedDocuments.size-e.removedDocuments.size}qt(n){this.Zt(n).qt()}Zt(n){let e=this.Qt.get(n);return e||(e=new E2,this.Qt.set(n,e)),e}he(n){let e=this.zt.get(n);return e||(e=new Hi(fn),this.zt=this.zt.insert(n,e)),e}te(n){const e=null!==this.se(n);return e||Qe("WatchChangeAggregator","Detected inactive target",n),e}se(n){const e=this.Qt.get(n);return e&&e.kt?null:this.Gt.le(n)}ee(n){this.Qt.set(n,new E2),this.Gt.getRemoteKeysForTarget(n).forEach(e=>{this.Yt(n,e,null)})}ae(n,e){return this.Gt.getRemoteKeysForTarget(n).has(e)}}function C2(){return new Mi(vt.comparator)}function D2(){return new Mi(vt.comparator)}const yj={asc:"ASCENDING",desc:"DESCENDING"},vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bj={and:"AND",or:"OR"};class wj{constructor(n,e){this.databaseId=n,this.useProto3Json=e}}function bP(i,n){return i.useProto3Json||c_(n)?n:{value:n}}function xb(i,n){return i.useProto3Json?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function I2(i,n){return i.useProto3Json?n.toBase64():n.toUint8Array()}function xj(i,n){return xb(i,n.toTimestamp())}function eo(i){return Vt(!!i),zt.fromTimestamp(function(n){const e=Nc(n);return new Gi(e.seconds,e.nanos)}(i))}function wP(i,n){return(e=i,new jn(["projects",e.projectId,"databases",e.database])).child("documents").child(n).canonicalString();var e}function T2(i){const n=jn.fromString(i);return Vt(F2(n)),n}function DE(i,n){return wP(i.databaseId,n.path)}function Qd(i,n){const e=T2(n);if(e.get(1)!==i.databaseId.projectId)throw new je(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new je(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new vt(A2(e))}function xP(i,n){return wP(i.databaseId,n)}function S2(i){const n=T2(i);return 4===n.length?jn.emptyPath():A2(n)}function IE(i){return new jn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function A2(i){return Vt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function M2(i,n,e){return{name:DE(i,n),fields:e.value.mapValue.fields}}function k2(i,n,e){const r=Qd(i,n.name),o=eo(n.updateTime),s=n.createTime?eo(n.createTime):zt.min(),c=new Go({mapValue:{fields:n.fields}}),h=Wi.newFoundDocument(r,o,s,c);return e&&h.setHasCommittedMutations(),e?h.setHasCommittedMutations():h}function TE(i,n){let e;if(n instanceof bb)e={update:M2(i,n.key,n.value)};else if(n instanceof wb)e={delete:DE(i,n.key)};else if(n instanceof Bh)e={update:M2(i,n.key,n.data),updateMask:Mj(n.fieldMask)};else{if(!(n instanceof mP))return St();e={verify:DE(i,n.key)}}return n.fieldTransforms.length>0&&(e.updateTransforms=n.fieldTransforms.map(r=>function(o,s){const c=s.transform;if(c instanceof mt)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof kt)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xt)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof In)return{fieldPath:s.field.canonicalString(),increment:c.gt};throw St()}(0,r))),n.precondition.isNone||(e.currentDocument=void 0!==(o=n.precondition).updateTime?{updateTime:xj(i,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:St()),e;var o}function EP(i,n){const e=n.currentDocument?void 0!==(o=n.currentDocument).updateTime?Cr.updateTime(eo(o.updateTime)):void 0!==o.exists?Cr.exists(o.exists):Cr.none():Cr.none(),r=n.updateTransforms?n.updateTransforms.map(o=>function(s,c){let h=null;"setToServerValue"in c?(Vt("REQUEST_TIME"===c.setToServerValue),h=new mt):"appendMissingElements"in c?h=new kt(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Xt(c.removeAllFromArray.values||[]):"increment"in c?h=new In(s,c.increment):St();const p=Rr.fromServerFormat(c.fieldPath);return new __(p,h)}(i,o)):[];var o;if(n.update){const o=Qd(i,n.update.name),s=new Go({mapValue:{fields:n.update.fields}});if(n.updateMask){const c=new cs((n.updateMask.fieldPaths||[]).map(_=>Rr.fromServerFormat(_)));return new Bh(o,s,c,e,r)}return new bb(o,s,e,r)}if(n.delete){const o=Qd(i,n.delete);return new wb(o,e)}if(n.verify){const o=Qd(i,n.verify);return new mP(o,e)}return St()}function R2(i,n){return{documents:[xP(i,n.path)]}}function CP(i,n){const e={structuredQuery:{}},r=n.path;null!==n.collectionGroup?(e.parent=xP(i,r),e.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(e.parent=xP(i,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(p){if(0!==p.length)return N2(ui.create(p,"and"))}(n.filters);o&&(e.structuredQuery.where=o);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:Ym((w=_).field),direction:Tj(w.dir)};var w})}(n.orderBy);s&&(e.structuredQuery.orderBy=s);const c=bP(i,n.limit);var h,p;return null!==c&&(e.structuredQuery.limit=c),n.startAt&&(e.structuredQuery.startAt={before:(h=n.startAt).inclusive,values:h.position}),n.endAt&&(e.structuredQuery.endAt={before:!(p=n.endAt).inclusive,values:p.position}),e}function P2(i){let n=S2(i.parent);const e=i.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){Vt(1===r);const w=e.from[0];w.allDescendants?o=w.collectionId:n=n.child(w.collectionId)}let s=[];e.where&&(s=function(w){const I=O2(w);return I instanceof ui&&jS(I)?I.getFilters():[I]}(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(w=>{return new Lh(Eb((I=w).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let h=null;e.limit&&(h=function(w){let I;return I="object"==typeof w?w.value:w,c_(I)?null:I}(e.limit));let p=null;var w;e.startAt&&(p=new Yd((w=e.startAt).values||[],!!w.before));let _=null;return e.endAt&&(_=function(w){return new Yd(w.values||[],!w.before)}(e.endAt)),gE(n,o,c,s,h,"F",p,_)}function O2(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Eb(n.unaryFilter.field);return On.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=Eb(n.unaryFilter.field);return On.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Eb(n.unaryFilter.field);return On.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Eb(n.unaryFilter.field);return On.create(s,"!=",{nullValue:"NULL_VALUE"});default:return St()}}(i):void 0!==i.fieldFilter?On.create(Eb((n=i).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return St()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return ui.create(n.compositeFilter.filters.map(e=>O2(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return St()}}(n.compositeFilter.op))}(i):St();var n}function Tj(i){return yj[i]}function Sj(i){return vj[i]}function Aj(i){return bj[i]}function Ym(i){return{fieldPath:i.canonicalString()}}function Eb(i){return Rr.fromServerFormat(i.fieldPath)}function N2(i){return i instanceof On?function(n){if("=="===n.op){if(fb(n.value))return{unaryFilter:{field:Ym(n.field),op:"IS_NAN"}};if(dE(n.value))return{unaryFilter:{field:Ym(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(fb(n.value))return{unaryFilter:{field:Ym(n.field),op:"IS_NOT_NAN"}};if(dE(n.value))return{unaryFilter:{field:Ym(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ym(n.field),op:Sj(n.op),value:n.value}}}(i):i instanceof ui?function(n){const e=n.getFilters().map(r=>N2(r));return 1===e.length?e[0]:{compositeFilter:{op:Aj(n.op),filters:e}}}(i):St()}function Mj(i){const n=[];return i.fields.forEach(e=>n.push(e.canonicalString())),{fieldPaths:n}}function F2(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Vh{constructor(n,e,r,o,s=zt.min(),c=zt.min(),h=Jr.EMPTY_BYTE_STRING,p=null){this.target=n,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(n){return new Vh(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(n,e){return new Vh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,n,null)}withExpectedCount(n){return new Vh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,n)}withLastLimboFreeSnapshotVersion(n){return new Vh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken,this.expectedCount)}}class L2{constructor(n){this.fe=n}}function U2(i,n){const e=n.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:rA(n.readTime),hasCommittedMutations:n.hasCommittedMutations};if(n.isFoundDocument())r.document={name:DE(o=i.fe,(s=n).key),fields:s.data.value.mapValue.fields,updateTime:xb(o,s.version.toTimestamp()),createTime:xb(o,s.createTime.toTimestamp())};else if(n.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:y_(n.version)};else{if(!n.isUnknownDocument())return St();r.unknownDocument={path:e.path.toArray(),version:y_(n.version)}}var o,s;return r}function rA(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function y_(i){const n=i.toTimestamp();return{seconds:n.seconds,nanoseconds:n.nanoseconds}}function v_(i){const n=new Gi(i.seconds,i.nanoseconds);return zt.fromTimestamp(n)}function b_(i,n){const e=(n.baseMutations||[]).map(s=>EP(i.fe,s));for(let s=0;s<n.mutations.length-1;++s)s+1<n.mutations.length&&void 0!==n.mutations[s+1].transform&&(n.mutations[s].updateTransforms=n.mutations[s+1].transform.fieldTransforms,n.mutations.splice(s+1,1),++s);const r=n.mutations.map(s=>EP(i.fe,s)),o=Gi.fromMillis(n.localWriteTimeMs);return new pP(n.batchId,o,e,r)}function SE(i){const n=v_(i.readTime),e=void 0!==i.lastLimboFreeSnapshotVersion?v_(i.lastLimboFreeSnapshotVersion):zt.min();let r;var o;return void 0!==i.query.documents?(Vt(1===(o=i.query).documents.length),r=Ms(p_(S2(o.documents[0])))):r=Ms(P2(i.query)),new Vh(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,n,e,Jr.fromBase64String(i.resumeToken))}function B2(i,n){const e=y_(n.snapshotVersion),r=y_(n.lastLimboFreeSnapshotVersion);let o;o=gb(n.target)?R2(i.fe,n.target):CP(i.fe,n.target);const s=n.resumeToken.toBase64();return{targetId:n.targetId,canonicalId:Zd(n.target),readTime:e,resumeToken:s,lastListenSequenceNumber:n.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function DP(i){const n=P2({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?bE(n,n.limit,"L"):n}function IP(i,n){return new _P(n.largestBatchId,EP(i.fe,n.overlayMutation))}function V2(i,n){const e=n.path.lastSegment();return[i,$o(n.path.popLast()),e]}function H2(i,n,e,r){return{indexId:i,uid:n.uid||"",sequenceNumber:e,readTime:y_(r.readTime),documentKey:$o(r.documentKey.path),largestBatchId:r.largestBatchId}}class Rj{getBundleMetadata(n,e){return z2(n).get(e).next(r=>{if(r)return{id:(o=r).bundleId,createTime:v_(o.createTime),version:o.version};var o})}saveBundleMetadata(n,e){return z2(n).put({bundleId:(r=e).id,createTime:y_(eo(r.createTime)),version:r.version});var r}getNamedQuery(n,e){return j2(n).get(e).next(r=>{if(r)return{name:(o=r).name,query:DP(o.bundledQuery),readTime:v_(o.readTime)};var o})}saveNamedQuery(n,e){return j2(n).put({name:(r=e).name,readTime:y_(eo(r.readTime)),bundledQuery:r.bundledQuery});var r}}function z2(i){return Xr(i,"bundles")}function j2(i){return Xr(i,"namedQueries")}class oA{constructor(n,e){this.serializer=n,this.userId=e}static de(n,e){return new oA(n,e.uid||"")}getOverlay(n,e){return AE(n).get(V2(this.userId,e)).next(r=>r?IP(this.serializer,r):null)}getOverlays(n,e){const r=l();return ge.forEach(e,o=>this.getOverlay(n,o).next(s=>{null!==s&&r.set(o,s)})).next(()=>r)}saveOverlays(n,e,r){const o=[];return r.forEach((s,c)=>{const h=new _P(e,c);o.push(this.we(n,h))}),ge.waitFor(o)}removeOverlaysForBatchId(n,e,r){const o=new Set;e.forEach(c=>o.add($o(c.getCollectionPath())));const s=[];return o.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(AE(n).J("collectionPathOverlayIndex",h))}),ge.waitFor(s)}getOverlaysForCollection(n,e,r){const o=l(),s=$o(e),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return AE(n).j("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const _=IP(this.serializer,p);o.set(_.getKey(),_)}return o})}getOverlaysForCollectionGroup(n,e,r,o){const s=l();let c;const h=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return AE(n).X({index:"collectionGroupOverlayIndex",range:h},(p,_,w)=>{const I=IP(this.serializer,_);s.size()<o||I.largestBatchId===c?(s.set(I.getKey(),I),c=I.largestBatchId):w.done()}).next(()=>s)}we(n,e){return AE(n).put(function(r,o,s){const[c,h,p]=V2(o,s.mutation.key);return{userId:o,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:TE(r.fe,s.mutation)}}(this.serializer,this.userId,e))}}function AE(i){return Xr(i,"documentOverlays")}class w_{constructor(){}_e(n,e){this.me(n,e),e.ge()}me(n,e){if("nullValue"in n)this.ye(e,5);else if("booleanValue"in n)this.ye(e,10),e.pe(n.booleanValue?1:0);else if("integerValue"in n)this.ye(e,15),e.pe(Er(n.integerValue));else if("doubleValue"in n){const r=Er(n.doubleValue);isNaN(r)?this.ye(e,13):(this.ye(e,15),Rh(r)?e.pe(0):e.pe(r))}else if("timestampValue"in n){const r=n.timestampValue;this.ye(e,20),"string"==typeof r?e.Ie(r):(e.Ie(`${r.seconds||""}`),e.pe(r.nanos||0))}else if("stringValue"in n)this.Te(n.stringValue,e),this.Ee(e);else if("bytesValue"in n)this.ye(e,30),e.Ae(Fc(n.bytesValue)),this.Ee(e);else if("referenceValue"in n)this.ve(n.referenceValue,e);else if("geoPointValue"in n){const r=n.geoPointValue;this.ye(e,45),e.pe(r.latitude||0),e.pe(r.longitude||0)}else"mapValue"in n?mb(n)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(n.mapValue,e),this.Ee(e)):"arrayValue"in n?(this.Pe(n.arrayValue,e),this.Ee(e)):St()}Te(n,e){this.ye(e,25),this.be(n,e)}be(n,e){e.Ie(n)}Re(n,e){const r=n.fields||{};this.ye(e,55);for(const o of Object.keys(r))this.Te(o,e),this.me(r[o],e)}Pe(n,e){const r=n.values||[];this.ye(e,50);for(const o of r)this.me(o,e)}ve(n,e){this.ye(e,37),vt.fromName(n).path.forEach(r=>{this.ye(e,60),this.be(r,e)})}ye(n,e){n.pe(e)}Ee(n){n.pe(2)}}function Pj(i){if(0===i)return 8;let n=0;return!(i>>4)&&(n+=4,i<<=4),!(i>>6)&&(n+=2,i<<=2),!(i>>7)&&(n+=1),n}function $2(i){const n=64-function(e){let r=0;for(let o=0;o<8;++o){const s=Pj(255&e[o]);if(r+=s,8!==s)break}return r}(i);return Math.ceil(n/8)}w_.Ve=new w_;class Oj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(n){const e=n[Symbol.iterator]();let r=e.next();for(;!r.done;)this.De(r.value),r=e.next();this.Ce()}xe(n){const e=n[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ne(r.value),r=e.next();this.ke()}Me(n){for(const e of n){const r=e.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=e.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(n){for(const e of n){const r=e.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=e.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(n){const e=this.Fe(n),r=$2(e);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}Le(n){const e=this.Fe(n),r=$2(e);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(n){this.Be(n.length),this.buffer.set(n,this.position),this.position+=n.length}Qe(){return this.buffer.slice(0,this.position)}Fe(n){const e=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(n),r=0!=(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}De(n){const e=255&n;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(n){const e=255&n;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(n)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(n){this.Be(1),this.buffer[this.position++]=n}Ge(n){this.Be(1),this.buffer[this.position++]=~n}Be(n){const e=n+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Nj{constructor(n){this.je=n}Ae(n){this.je.Se(n)}Ie(n){this.je.Me(n)}pe(n){this.je.Oe(n)}ge(){this.je.qe()}}class Fj{constructor(n){this.je=n}Ae(n){this.je.xe(n)}Ie(n){this.je.$e(n)}pe(n){this.je.Le(n)}ge(){this.je.Ke()}}class ME{constructor(){this.je=new Oj,this.ze=new Nj(this.je),this.We=new Fj(this.je)}seed(n){this.je.seed(n)}He(n){return 0===n?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class x_{constructor(n,e,r,o){this.indexId=n,this.documentKey=e,this.arrayValue=r,this.directionalValue=o}Je(){const n=this.directionalValue.length,e=0===n||255===this.directionalValue[n-1]?n+1:n,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==n?r.set([0],this.directionalValue.length):++r[r.length-1],new x_(this.indexId,this.documentKey,this.arrayValue,r)}}function Zm(i,n){let e=i.indexId-n.indexId;return 0!==e?e:(e=G2(i.arrayValue,n.arrayValue),0!==e?e:(e=G2(i.directionalValue,n.directionalValue),0!==e?e:vt.comparator(i.documentKey,n.documentKey)))}function G2(i,n){for(let e=0;e<i.length&&e<n.length;++e){const r=i[e]-n[e];if(0!==r)return r}return i.length-n.length}class Lj{constructor(n){this.collectionId=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment(),this.Ye=n.orderBy,this.Xe=[];for(const e of n.filters){const r=e;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(n){Vt(n.collectionGroup===this.collectionId);const e=CS(n);if(void 0!==e&&!this.en(e))return!1;const r=Um(n);let o=new Set,s=0,c=0;for(;s<r.length&&this.en(r[s]);++s)o=o.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const h=r[s];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[c++],h))return!1}++s}for(;s<r.length;++s)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[s]))return!1;return!0}en(n){for(const e of this.Xe)if(this.nn(e,n))return!0;return!1}nn(n,e){return!(void 0===n||!n.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===n.op||"array-contains-any"===n.op)}sn(n,e){return!!n.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===n.dir||1===e.kind&&"desc"===n.dir)}}function W2(i){var n,e;if(Vt(i instanceof On||i instanceof ui),i instanceof On){if(i instanceof pE){const o=(null===(e=null===(n=i.value.arrayValue)||void 0===n?void 0:n.values)||void 0===e?void 0:e.map(s=>On.create(i.field,"==",s)))||[];return ui.create(o,"or")}return i}const r=i.filters.map(o=>W2(o));return ui.create(r,i.op)}function Uj(i){if(0===i.getFilters().length)return[];const n=AP(W2(i));return Vt(q2(n)),TP(n)||SP(n)?[n]:n.getFilters()}function TP(i){return i instanceof On}function SP(i){return i instanceof ui&&jS(i)}function q2(i){return TP(i)||SP(i)||function(n){if(n instanceof ui&&h_(n)){for(const e of n.getFilters())if(!TP(e)&&!SP(e))return!1;return!0}return!1}(i)}function AP(i){if(Vt(i instanceof On||i instanceof ui),i instanceof On)return i;if(1===i.filters.length)return AP(i.filters[0]);const n=i.filters.map(r=>AP(r));let e=ui.create(n,i.op);return e=sA(e),q2(e)?e:(Vt(e instanceof ui),Vt(Uh(e)),Vt(e.filters.length>1),e.filters.reduce((r,o)=>MP(r,o)))}function MP(i,n){let e;return Vt(i instanceof On||i instanceof ui),Vt(n instanceof On||n instanceof ui),e=i instanceof On?n instanceof On?ui.create([i,n],"and"):Y2(i,n):n instanceof On?Y2(n,i):function(r,o){if(Vt(r.filters.length>0&&o.filters.length>0),Uh(r)&&Uh(o))return GS(r,o.getFilters());const s=h_(r)?r:o,c=h_(r)?o:r,h=s.filters.map(p=>MP(p,c));return ui.create(h,"or")}(i,n),sA(e)}function Y2(i,n){if(Uh(n))return GS(n,i.getFilters());{const e=n.filters.map(r=>MP(i,r));return ui.create(e,"or")}}function sA(i){if(Vt(i instanceof On||i instanceof ui),i instanceof On)return i;const n=i.getFilters();if(1===n.length)return sA(n[0]);if(mE(i))return i;const e=n.map(o=>sA(o)),r=[];return e.forEach(o=>{o instanceof On?r.push(o):o instanceof ui&&(o.op===i.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:ui.create(r,i.op)}class Bj{constructor(){this.rn=new kP}addToCollectionParentIndex(n,e){return this.rn.add(e),ge.resolve()}getCollectionParents(n,e){return ge.resolve(this.rn.getEntries(e))}addFieldIndex(n,e){return ge.resolve()}deleteFieldIndex(n,e){return ge.resolve()}getDocumentsMatchingTarget(n,e){return ge.resolve(null)}getIndexType(n,e){return ge.resolve(0)}getFieldIndexes(n,e){return ge.resolve([])}getNextCollectionGroupToUpdate(n){return ge.resolve(null)}getMinOffset(n,e){return ge.resolve(ba.min())}getMinOffsetFromCollectionGroup(n,e){return ge.resolve(ba.min())}updateCollectionGroup(n,e,r){return ge.resolve()}updateIndexEntries(n,e){return ge.resolve()}}class kP{constructor(){this.index={}}add(n){const e=n.lastSegment(),r=n.popLast(),o=this.index[e]||new Hi(jn.comparator),s=!o.has(r);return this.index[e]=o.add(r),s}has(n){const e=n.lastSegment(),r=n.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(n){return(this.index[n]||new Hi(jn.comparator)).toArray()}}const aA=new Uint8Array(0);class Vj{constructor(n,e){this.user=n,this.databaseId=e,this.on=new kP,this.un=new Kd(r=>Zd(r),(r,o)=>$m(r,o)),this.uid=n.uid||""}addToCollectionParentIndex(n,e){if(!this.on.has(e)){const r=e.lastSegment(),o=e.popLast();n.addOnCommittedListener(()=>{this.on.add(e)});const s={collectionId:r,parent:$o(o)};return Z2(n).put(s)}return ge.resolve()}getCollectionParents(n,e){const r=[],o=IDBKeyRange.bound([e,""],[GR(e),""],!1,!0);return Z2(n).j(o).next(s=>{for(const c of s){if(c.collectionId!==e)break;r.push(Ja(c.parent))}return r})}addFieldIndex(n,e){const r=lA(n),o={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete o.indexId;const s=r.add(o);if(e.indexState){const c=RE(n);return s.next(h=>{c.put(H2(h,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(n,e){const r=lA(n),o=RE(n),s=kE(n);return r.delete(e.indexId).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(n,e){const r=kE(n);let o=!0;const s=new Map;return ge.forEach(this.cn(e),c=>this.an(n,c).next(h=>{o&&(o=!!h),s.set(c,h)})).next(()=>{if(o){let c=b();const h=[];return ge.forEach(s,(p,_)=>{var w;Qe("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(_e=>`${_e.fieldPath}:${_e.kind}`).join(",")}`} to execute ${Zd(e)}`);const I=function(_e,ke){const ze=CS(ke);if(void 0===ze)return null;for(const et of Gm(_e,ze.fieldPath))switch(et.op){case"array-contains-any":return et.value.arrayValue.values||[];case"array-contains":return[et.value]}return null}(_,p),A=function(_e,ke){const ze=new Map;for(const et of Um(ke))for(const it of Gm(_e,et.fieldPath))switch(it.op){case"==":case"in":ze.set(et.fieldPath.canonicalString(),it.value);break;case"not-in":case"!=":return ze.set(et.fieldPath.canonicalString(),it.value),Array.from(ze.values())}return null}(_,p),P=function(_e,ke){const ze=[];let et=!0;for(const it of Um(ke)){const Ft=0===it.kind?YS(_e,it.fieldPath,_e.startAt):ZS(_e,it.fieldPath,_e.startAt);ze.push(Ft.value),et&&(et=Ft.inclusive)}return new Yd(ze,et)}(_,p),B=function(_e,ke){const ze=[];let et=!0;for(const it of Um(ke)){const Ft=0===it.kind?ZS(_e,it.fieldPath,_e.endAt):YS(_e,it.fieldPath,_e.endAt);ze.push(Ft.value),et&&(et=Ft.inclusive)}return new Yd(ze,et)}(_,p),Y=this.hn(p,_,P),ee=this.hn(p,_,B),ve=this.ln(p,_,A),Ae=this.fn(p.indexId,I,Y,P.inclusive,ee,B.inclusive,ve);return ge.forEach(Ae,_e=>r.H(_e,e.limit).next(ke=>{ke.forEach(ze=>{const et=vt.fromSegments(ze.documentKey);c.has(et)||(c=c.add(et),h.push(et))})}))}).next(()=>h)}return ge.resolve(null)})}cn(n){let e=this.un.get(n);return e||(e=0===n.filters.length?[n]:Uj(ui.create(n.filters,"and")).map(r=>m_(n.path,n.collectionGroup,n.orderBy,r.getFilters(),n.limit,n.startAt,n.endAt)),this.un.set(n,e),e)}fn(n,e,r,o,s,c,h){const p=(null!=e?e.length:1)*Math.max(r.length,s.length),_=p/(null!=e?e.length:1),w=[];for(let I=0;I<p;++I){const A=e?this.dn(e[I/_]):aA,P=this.wn(n,A,r[I%_],o),B=this._n(n,A,s[I%_],c),Y=h.map(ee=>this.wn(n,A,ee,!0));w.push(...this.createRange(P,B,Y))}return w}wn(n,e,r,o){const s=new x_(n,vt.empty(),e,r);return o?s:s.Je()}_n(n,e,r,o){const s=new x_(n,vt.empty(),e,r);return o?s.Je():s}an(n,e){const r=new Lj(e),o=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(n,o).next(s=>{let c=null;for(const h of s)r.tn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(n,e){let r=2;const o=this.cn(e);return ge.forEach(o,s=>this.an(n,s).next(c=>{c?0!==r&&c.fields.length<function(h){let p=new Hi(Rr.comparator),_=!1;for(const w of h.filters)for(const I of w.getFlattenedFilters())I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?_=!0:p=p.add(I.field));for(const w of h.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(_?1:0)}(s)&&(r=1):r=0})).next(()=>null!==e.limit&&o.length>1&&2===r?1:r)}mn(n,e){const r=new ME;for(const o of Um(n)){const s=e.data.field(o.fieldPath);if(null==s)return null;const c=r.He(o.kind);w_.Ve._e(s,c)}return r.Qe()}dn(n){const e=new ME;return w_.Ve._e(n,e.He(0)),e.Qe()}gn(n,e){const r=new ME;return w_.Ve._e(Fh(this.databaseId,e),r.He(function(o){const s=Um(o);return 0===s.length?0:s[s.length-1].kind}(n))),r.Qe()}ln(n,e,r){if(null===r)return[];let o=[];o.push(new ME);let s=0;for(const c of Um(n)){const h=r[s++];for(const p of o)if(this.yn(e,c.fieldPath)&&el(h))o=this.pn(o,c,h);else{const _=p.He(c.kind);w_.Ve._e(h,_)}}return this.In(o)}hn(n,e,r){return this.ln(n,e,r.position)}In(n){const e=[];for(let r=0;r<n.length;++r)e[r]=n[r].Qe();return e}pn(n,e,r){const o=[...n],s=[];for(const c of r.arrayValue.values||[])for(const h of o){const p=new ME;p.seed(h.Qe()),w_.Ve._e(c,p.He(e.kind)),s.push(p)}return s}yn(n,e){return!!n.filters.find(r=>r instanceof On&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(n,e){const r=lA(n),o=RE(n);return(e?r.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.j()).next(s=>{const c=[];return ge.forEach(s,h=>o.get([h.indexId,this.uid]).next(p=>{c.push(function(_,w){const I=w?new a_(w.sequenceNumber,new ba(v_(w.readTime),new vt(Ja(w.documentKey)),w.largestBatchId)):a_.empty(),A=_.fields.map(([P,B])=>new Bm(Rr.fromServerFormat(P),B));return new Yx(_.indexId,_.collectionGroup,A,I)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(n){return this.getFieldIndexes(n).next(e=>0===e.length?null:(e.sort((r,o)=>{const s=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==s?s:fn(r.collectionGroup,o.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(n,e,r){const o=lA(n),s=RE(n);return this.Tn(n).next(c=>o.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>ge.forEach(h,p=>s.put(H2(p.indexId,this.user,c,r)))))}updateIndexEntries(n,e){const r=new Map;return ge.forEach(e,(o,s)=>{const c=r.get(o.collectionGroup);return(c?ge.resolve(c):this.getFieldIndexes(n,o.collectionGroup)).next(h=>(r.set(o.collectionGroup,h),ge.forEach(h,p=>this.En(n,o,p).next(_=>{const w=this.An(s,p);return _.isEqual(w)?ge.resolve():this.vn(n,s,p,_,w)}))))})}Rn(n,e,r,o){return kE(n).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,e.key),documentKey:e.key.path.toArray()})}Pn(n,e,r,o){return kE(n).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,e.key),e.key.path.toArray()])}En(n,e,r){const o=kE(n);let s=new Hi(Zm);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,e)])},(c,h)=>{s=s.add(new x_(r.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>s)}An(n,e){let r=new Hi(Zm);const o=this.mn(e,n);if(null==o)return r;const s=CS(e);if(null!=s){const c=n.data.field(s.fieldPath);if(el(c))for(const h of c.arrayValue.values||[])r=r.add(new x_(e.indexId,n.key,this.dn(h),o))}else r=r.add(new x_(e.indexId,n.key,aA,o));return r}vn(n,e,r,o,s){Qe("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(h,p,_,w,I){const A=h.getIterator(),P=p.getIterator();let B=Oc(A),Y=Oc(P);for(;B||Y;){let ee=!1,ve=!1;if(B&&Y){const Ae=_(B,Y);Ae<0?ve=!0:Ae>0&&(ee=!0)}else null!=B?ve=!0:ee=!0;ee?(w(Y),Y=Oc(P)):ve?(I(B),B=Oc(A)):(B=Oc(A),Y=Oc(P))}}(o,s,Zm,h=>{c.push(this.Rn(n,e,r,h))},h=>{c.push(this.Pn(n,e,r,h))}),ge.waitFor(c)}Tn(n){let e=1;return RE(n).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,s)=>{s.done(),e=o.sequenceNumber+1}).next(()=>e)}createRange(n,e,r){r=r.sort((c,h)=>Zm(c,h)).filter((c,h,p)=>!h||0!==Zm(c,p[h-1]));const o=[];o.push(n);for(const c of r){const h=Zm(c,n),p=Zm(c,e);if(0===h)o[0]=n.Je();else if(h>0&&p<0)o.push(c),o.push(c.Je());else if(p>0)break}o.push(e);const s=[];for(let c=0;c<o.length;c+=2){if(this.bn(o[c],o[c+1]))return[];s.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,aA,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,aA,[]]))}return s}bn(n,e){return Zm(n,e)>0}getMinOffsetFromCollectionGroup(n,e){return this.getFieldIndexes(n,e).next(K2)}getMinOffset(n,e){return ge.mapArray(this.cn(e),r=>this.an(n,r).next(o=>o||St())).next(K2)}}function Z2(i){return Xr(i,"collectionParents")}function kE(i){return Xr(i,"indexEntries")}function lA(i){return Xr(i,"indexConfiguration")}function RE(i){return Xr(i,"indexState")}function K2(i){Vt(0!==i.length);let n=i[0].indexState.offset,e=n.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;SS(o,n)<0&&(n=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new ba(n.readTime,n.documentKey,e)}const Q2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ks{constructor(n,e,r){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(n){return new ks(n,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function X2(i,n,e){const r=i.store("mutations"),o=i.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let h=0;const p=r.X({range:c},(w,I,A)=>(h++,A.delete()));s.push(p.next(()=>{Vt(1===h)}));const _=[];for(const w of e.mutations){const I=eE(n,w.key.path,e.batchId);s.push(o.delete(I)),_.push(w.key)}return ge.waitFor(s).next(()=>_)}function cA(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw St();n=i.noDocument}return JSON.stringify(n).length}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(41943040,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);class dA{constructor(n,e,r,o){this.userId=n,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(n,e,r,o){Vt(""!==n.uid);const s=n.isAuthenticated()?n.uid:"";return new dA(s,e,r,o)}checkEmpty(n){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Km(n).X({index:"userMutationsIndex",range:r},(o,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(n,e,r,o){const s=Cb(n),c=Km(n);return c.add({}).next(h=>{Vt("number"==typeof h);const p=new pP(h,e,r,o),_=function(A,P,B){const Y=B.baseMutations.map(ve=>TE(A.fe,ve)),ee=B.mutations.map(ve=>TE(A.fe,ve));return{userId:P,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:Y,mutations:ee}}(this.serializer,this.userId,p),w=[];let I=new Hi((A,P)=>fn(A.canonicalString(),P.canonicalString()));for(const A of o){const P=eE(this.userId,A.key.path,h);I=I.add(A.key.path.popLast()),w.push(c.put(_)),w.push(s.put(P,RS))}return I.forEach(A=>{w.push(this.indexManager.addToCollectionParentIndex(n,A))}),n.addOnCommittedListener(()=>{this.Vn[h]=p.keys()}),ge.waitFor(w).next(()=>p)})}lookupMutationBatch(n,e){return Km(n).get(e).next(r=>r?(Vt(r.userId===this.userId),b_(this.serializer,r)):null)}Sn(n,e){return this.Vn[e]?ge.resolve(this.Vn[e]):this.lookupMutationBatch(n,e).next(r=>{if(r){const o=r.keys();return this.Vn[e]=o,o}return null})}getNextMutationBatchAfterBatchId(n,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Km(n).X({index:"userMutationsIndex",range:o},(c,h,p)=>{h.userId===this.userId&&(Vt(h.batchId>=r),s=b_(this.serializer,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(n){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Km(n).X({index:"userMutationsIndex",range:e,reverse:!0},(o,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(n){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Km(n).j("userMutationsIndex",e).next(r=>r.map(o=>b_(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(n,e){const r=d_(this.userId,e.path),o=IDBKeyRange.lowerBound(r),s=[];return Cb(n).X({range:o},(c,h,p)=>{const[_,w,I]=c,A=Ja(w);if(_===this.userId&&e.path.isEqual(A))return Km(n).get(I).next(P=>{if(!P)throw St();Vt(P.userId===this.userId),s.push(b_(this.serializer,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(n,e){let r=new Hi(fn);const o=[];return e.forEach(s=>{const c=d_(this.userId,s.path),h=IDBKeyRange.lowerBound(c),p=Cb(n).X({range:h},(_,w,I)=>{const[A,P,B]=_,Y=Ja(P);A===this.userId&&s.path.isEqual(Y)?r=r.add(B):I.done()});o.push(p)}),ge.waitFor(o).next(()=>this.Dn(n,r))}getAllMutationBatchesAffectingQuery(n,e){const r=e.path,o=r.length+1,s=d_(this.userId,r),c=IDBKeyRange.lowerBound(s);let h=new Hi(fn);return Cb(n).X({range:c},(p,_,w)=>{const[I,A,P]=p,B=Ja(A);I===this.userId&&r.isPrefixOf(B)?B.length===o&&(h=h.add(P)):w.done()}).next(()=>this.Dn(n,h))}Dn(n,e){const r=[],o=[];return e.forEach(s=>{o.push(Km(n).get(s).next(c=>{if(null===c)throw St();Vt(c.userId===this.userId),r.push(b_(this.serializer,c))}))}),ge.waitFor(o).next(()=>r)}removeMutationBatch(n,e){return X2(n.ht,this.userId,e).next(r=>(n.addOnCommittedListener(()=>{this.Cn(e.batchId)}),ge.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(n,o))))}Cn(n){delete this.Vn[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(e=>{if(!e)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Cb(n).X({range:r},(s,c,h)=>{if(s[0]===this.userId){const p=Ja(s[1]);o.push(p)}else h.done()}).next(()=>{Vt(0===o.length)})})}containsKey(n,e){return J2(n,this.userId,e)}xn(n){return eU(n).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function J2(i,n,e){const r=d_(n,e.path),o=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return Cb(i).X({range:s,Y:!0},(h,p,_)=>{const[w,I,A]=h;w===n&&I===o&&(c=!0),_.done()}).next(()=>c)}function Km(i){return Xr(i,"mutations")}function Cb(i){return Xr(i,"documentMutations")}function eU(i){return Xr(i,"mutationQueues")}class E_{constructor(n){this.Nn=n}next(){return this.Nn+=2,this.Nn}static kn(){return new E_(0)}static Mn(){return new E_(-1)}}class Hj{constructor(n,e){this.referenceDelegate=n,this.serializer=e}allocateTargetId(n){return this.$n(n).next(e=>{const r=new E_(e.highestTargetId);return e.highestTargetId=r.next(),this.On(n,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.$n(n).next(e=>zt.fromTimestamp(new Gi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.$n(n).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(n,e,r){return this.$n(n).next(o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.On(n,o)))}addTargetData(n,e){return this.Fn(n,e).next(()=>this.$n(n).next(r=>(r.targetCount+=1,this.Bn(e,r),this.On(n,r))))}updateTargetData(n,e){return this.Fn(n,e)}removeTargetData(n,e){return this.removeMatchingKeysForTargetId(n,e.targetId).next(()=>Db(n).delete(e.targetId)).next(()=>this.$n(n)).next(r=>(Vt(r.targetCount>0),r.targetCount-=1,this.On(n,r)))}removeTargets(n,e,r){let o=0;const s=[];return Db(n).X((c,h)=>{const p=SE(h);p.sequenceNumber<=e&&null===r.get(p.targetId)&&(o++,s.push(this.removeTargetData(n,p)))}).next(()=>ge.waitFor(s)).next(()=>o)}forEachTarget(n,e){return Db(n).X((r,o)=>{const s=SE(o);e(s)})}$n(n){return tU(n).get("targetGlobalKey").next(e=>(Vt(null!==e),e))}On(n,e){return tU(n).put("targetGlobalKey",e)}Fn(n,e){return Db(n).put(B2(this.serializer,e))}Bn(n,e){let r=!1;return n.targetId>e.highestTargetId&&(e.highestTargetId=n.targetId,r=!0),n.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=n.sequenceNumber,r=!0),r}getTargetCount(n){return this.$n(n).next(e=>e.targetCount)}getTargetData(n,e){const r=Zd(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Db(n).X({range:o,index:"queryTargetsIndex"},(c,h,p)=>{const _=SE(h);$m(e,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(n,e,r){const o=[],s=Qm(n);return e.forEach(c=>{const h=$o(c.path);o.push(s.put({targetId:r,path:h})),o.push(this.referenceDelegate.addReference(n,r,c))}),ge.waitFor(o)}removeMatchingKeys(n,e,r){const o=Qm(n);return ge.forEach(e,s=>{const c=$o(s.path);return ge.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(n,r,s)])})}removeMatchingKeysForTargetId(n,e){const r=Qm(n),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(n,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=Qm(n);let s=b();return o.X({range:r,Y:!0},(c,h,p)=>{const _=Ja(c[1]),w=new vt(_);s=s.add(w)}).next(()=>s)}containsKey(n,e){const r=$o(e.path),o=IDBKeyRange.bound([r],[GR(r)],!1,!0);let s=0;return Qm(n).X({index:"documentTargetsIndex",Y:!0,range:o},([c,h],p,_)=>{0!==c&&(s++,_.done())}).next(()=>s>0)}le(n,e){return Db(n).get(e).next(r=>r?SE(r):null)}}function Db(i){return Xr(i,"targets")}function tU(i){return Xr(i,"targetGlobal")}function Qm(i){return Xr(i,"targetDocuments")}function nU([i,n],[e,r]){const o=fn(i,e);return 0===o?fn(n,r):o}class zj{constructor(n){this.Ln=n,this.buffer=new Hi(nU),this.qn=0}Un(){return++this.qn}Kn(n){const e=[n,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();nU(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class iU{constructor(n,e,r){this.garbageCollector=n,this.asyncQueue=e,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(n){var e=this;Qe("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,De.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(r){Mh(r)?Qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield $d(r)}yield e.Qn(3e5)}))}}class jj{constructor(n,e){this.jn=n,this.params=e}calculateTargetCount(n,e){return this.jn.zn(n).next(r=>Math.floor(e/100*r))}nthSequenceNumber(n,e){if(0===e)return ge.resolve(Ai.ct);const r=new zj(e);return this.jn.forEachTarget(n,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(n,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(n,e,r){return this.jn.removeTargets(n,e,r)}removeOrphanedDocuments(n,e){return this.jn.removeOrphanedDocuments(n,e)}collect(n,e){return-1===this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(Q2)):this.getCacheSize(n).next(r=>r<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q2):this.Hn(n,e))}getCacheSize(n){return this.jn.getCacheSize(n)}Hn(n,e){let r,o,s,c,h,p,_;const w=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,c=Date.now(),this.nthSequenceNumber(n,o))).next(I=>(r=I,h=Date.now(),this.removeTargets(n,r,e))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(n,r))).next(I=>(_=Date.now(),ib()<=Yr.in.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${o} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${I} documents in `+(_-p)+`ms\nTotal Duration: ${_-w}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:I})))}}class $j{constructor(n,e){this.db=n,this.garbageCollector=function rU(i,n){return new jj(i,n)}(this,e)}zn(n){const e=this.Jn(n);return this.db.getTargetCache().getTargetCount(n).next(r=>e.next(o=>r+o))}Jn(n){let e=0;return this.Wn(n,r=>{e++}).next(()=>e)}forEachTarget(n,e){return this.db.getTargetCache().forEachTarget(n,e)}Wn(n,e){return this.Yn(n,(r,o)=>e(o))}addReference(n,e,r){return uA(n,r)}removeReference(n,e,r){return uA(n,r)}removeTargets(n,e,r){return this.db.getTargetCache().removeTargets(n,e,r)}markPotentiallyOrphaned(n,e){return uA(n,e)}Xn(n,e){return function(r,o){let s=!1;return eU(r).Z(c=>J2(r,c,o).next(h=>(h&&(s=!0),ge.resolve(!h)))).next(()=>s)}(n,e)}removeOrphanedDocuments(n,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let s=0;return this.Yn(n,(c,h)=>{if(h<=e){const p=this.Xn(n,c).next(_=>{if(!_)return s++,r.getEntry(n,c).next(()=>(r.removeEntry(c,zt.min()),Qm(n).delete([0,$o(c.path)])))});o.push(p)}}).next(()=>ge.waitFor(o)).next(()=>r.apply(n)).next(()=>s)}removeTarget(n,e){const r=e.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,r)}updateLimboDocument(n,e){return uA(n,e)}Yn(n,e){const r=Qm(n);let o,s=Ai.ct;return r.X({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:_})=>{0===c?(s!==Ai.ct&&e(new vt(Ja(o)),s),s=_,o=p):s=Ai.ct}).next(()=>{s!==Ai.ct&&e(new vt(Ja(o)),s)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function uA(i,n){return Qm(i).put((r=i.currentSequenceNumber,{targetId:0,path:$o(n.path),sequenceNumber:r}));var r}class oU{constructor(){this.changes=new Kd(n=>n.toString(),(n,e)=>n.isEqual(e)),this.changesApplied=!1}addEntry(n){this.assertNotApplied(),this.changes.set(n.key,n)}removeEntry(n,e){this.assertNotApplied(),this.changes.set(n,Wi.newInvalidDocument(n).setReadTime(e))}getEntry(n,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?ge.resolve(r):this.getFromCache(n,e)}getEntries(n,e){return this.getAllFromCache(n,e)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class Gj{constructor(n){this.serializer=n}setIndexManager(n){this.indexManager=n}addEntry(n,e,r){return C_(n).put(r)}removeEntry(n,e,r){return C_(n).delete(function(o,s){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],rA(s),c[c.length-1]]}(e,r))}updateMetadata(n,e){return this.getMetadata(n).next(r=>(r.byteSize+=e,this.Zn(n,r)))}getEntry(n,e){let r=Wi.newInvalidDocument(e);return C_(n).X({index:"documentKeyIndex",range:IDBKeyRange.only(PE(e))},(o,s)=>{r=this.ts(e,s)}).next(()=>r)}es(n,e){let r={size:0,document:Wi.newInvalidDocument(e)};return C_(n).X({index:"documentKeyIndex",range:IDBKeyRange.only(PE(e))},(o,s)=>{r={document:this.ts(e,s),size:cA(s)}}).next(()=>r)}getEntries(n,e){let r=Ws();return this.ns(n,e,(o,s)=>{const c=this.ts(o,s);r=r.insert(o,c)}).next(()=>r)}ss(n,e){let r=Ws(),o=new Mi(vt.comparator);return this.ns(n,e,(s,c)=>{const h=this.ts(s,c);r=r.insert(s,h),o=o.insert(s,cA(c))}).next(()=>({documents:r,rs:o}))}ns(n,e,r){if(e.isEmpty())return ge.resolve();let o=new Hi(cU);e.forEach(p=>o=o.add(p));const s=IDBKeyRange.bound(PE(o.first()),PE(o.last())),c=o.getIterator();let h=c.getNext();return C_(n).X({index:"documentKeyIndex",range:s},(p,_,w)=>{const I=vt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;h&&cU(h,I)<0;)r(h,null),h=c.getNext();h&&h.isEqual(I)&&(r(h,_),h=c.hasNext()?c.getNext():null),h?w.G(PE(h)):w.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(n,e,r,o){const s=e.path,c=[s.popLast().toArray(),s.lastSegment(),rA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return C_(n).j(IDBKeyRange.bound(c,h,!0)).next(p=>{let _=Ws();for(const w of p){const I=this.ts(vt.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);I.isFoundDocument()&&(yb(e,I)||o.has(I.key))&&(_=_.insert(I.key,I))}return _})}getAllFromCollectionGroup(n,e,r,o){let s=Ws();const c=lU(e,r),h=lU(e,ba.max());return C_(n).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,_,w)=>{const I=this.ts(vt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(I.key,I),s.size===o&&w.done()}).next(()=>s)}newChangeBuffer(n){return new Wj(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(e=>e.byteSize)}getMetadata(n){return aU(n).get("remoteDocumentGlobalKey").next(e=>(Vt(!!e),e))}Zn(n,e){return aU(n).put("remoteDocumentGlobalKey",e)}ts(n,e){if(e){const r=function kj(i,n){let e;if(n.document)e=k2(i.fe,n.document,!!n.hasCommittedMutations);else if(n.noDocument){const r=vt.fromSegments(n.noDocument.path),o=v_(n.noDocument.readTime);e=Wi.newNoDocument(r,o),n.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!n.unknownDocument)return St();{const r=vt.fromSegments(n.unknownDocument.path),o=v_(n.unknownDocument.version);e=Wi.newUnknownDocument(r,o)}}return n.readTime&&e.setReadTime(function(r){const o=new Gi(r[0],r[1]);return zt.fromTimestamp(o)}(n.readTime)),e}(this.serializer,e);if(!r.isNoDocument()||!r.version.isEqual(zt.min()))return r}return Wi.newInvalidDocument(n)}}function sU(i){return new Gj(i)}class Wj extends oU{constructor(n,e){super(),this.os=n,this.trackRemovals=e,this.us=new Kd(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(n){const e=[];let r=0,o=new Hi((s,c)=>fn(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.us.get(s);if(e.push(this.os.removeEntry(n,s,h.readTime)),c.isValidDocument()){const p=U2(this.os.serializer,c);o=o.add(s.path.popLast());const _=cA(p);r+=_-h.size,e.push(this.os.addEntry(n,s,p))}else if(r-=h.size,this.trackRemovals){const p=U2(this.os.serializer,c.convertToNoDocument(zt.min()));e.push(this.os.addEntry(n,s,p))}}),o.forEach(s=>{e.push(this.os.indexManager.addToCollectionParentIndex(n,s))}),e.push(this.os.updateMetadata(n,r)),ge.waitFor(e)}getFromCache(n,e){return this.os.es(n,e).next(r=>(this.us.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(n,e){return this.os.ss(n,e).next(({documents:r,rs:o})=>(o.forEach((s,c)=>{this.us.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function aU(i){return Xr(i,"remoteDocumentGlobal")}function C_(i){return Xr(i,"remoteDocumentsV14")}function PE(i){const n=i.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],n[n.length-1]]}function lU(i,n){const e=n.documentKey.path.toArray();return[i,rA(n.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function cU(i,n){const e=i.path.toArray(),r=n.path.toArray();let o=0;for(let s=0;s<e.length-2&&s<r.length-2;++s)if(o=fn(e[s],r[s]),o)return o;return o=fn(e.length,r.length),o||(o=fn(e[e.length-2],r[r.length-2]),o||fn(e[e.length-1],r[r.length-1]))}class qj{constructor(n,e){this.overlayedDocument=n,this.mutatedFields=e}}class dU{constructor(n,e,r,o){this.remoteDocumentCache=n,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(n,e){let r=null;return this.documentOverlayCache.getOverlay(n,e).next(o=>(r=o,this.remoteDocumentCache.getEntry(n,e))).next(o=>(null!==r&&wE(r.mutation,o,cs.empty(),Gi.now()),o))}getDocuments(n,e){return this.remoteDocumentCache.getEntries(n,e).next(r=>this.getLocalViewOfDocuments(n,r,b()).next(()=>r))}getLocalViewOfDocuments(n,e,r=b()){const o=l();return this.populateOverlays(n,o,e).next(()=>this.computeViews(n,e,o,r).next(s=>{let c=vb();return s.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(n,e){const r=l();return this.populateOverlays(n,r,e).next(()=>this.computeViews(n,e,r,b()))}populateOverlays(n,e,r){const o=[];return r.forEach(s=>{e.has(s)||o.push(s)}),this.documentOverlayCache.getOverlays(n,o).next(s=>{s.forEach((c,h)=>{e.set(c,h)})})}computeViews(n,e,r,o){let s=Ws();const c=f(),h=f();return e.forEach((p,_)=>{const w=r.get(_.key);o.has(_.key)&&(void 0===w||w.mutation instanceof Bh)?s=s.insert(_.key,_):void 0!==w?(c.set(_.key,w.mutation.getFieldMask()),wE(w.mutation,_,w.mutation.getFieldMask(),Gi.now())):c.set(_.key,cs.empty())}),this.recalculateAndSaveOverlays(n,s).next(p=>(p.forEach((_,w)=>c.set(_,w)),e.forEach((_,w)=>{var I;return h.set(_,new qj(w,null!==(I=c.get(_))&&void 0!==I?I:null))}),h))}recalculateAndSaveOverlays(n,e){const r=f();let o=new Mi((c,h)=>c-h),s=b();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(n,e).next(c=>{for(const h of c)h.keys().forEach(p=>{const _=e.get(p);if(null===_)return;let w=r.get(p)||cs.empty();w=h.applyToLocalView(_,w),r.set(p,w);const I=(o.get(h.batchId)||b()).add(p);o=o.insert(h.batchId,I)})}).next(()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),_=p.key,w=p.value,I=u();w.forEach(A=>{if(!s.has(A)){const P=u2(e.get(A),r.get(A));null!==P&&I.set(A,P),s=s.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(n,_,I))}return ge.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(n,e){return this.remoteDocumentCache.getEntries(n,e).next(r=>this.recalculateAndSaveOverlays(n,r))}getDocumentsMatchingQuery(n,e,r){return vt.isDocumentKey((o=e).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(n,e.path):yE(e)?this.getDocumentsMatchingCollectionGroupQuery(n,e,r):this.getDocumentsMatchingCollectionQuery(n,e,r);var o}getNextDocuments(n,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(n,e,r,o).next(s=>{const c=o-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(n,e,r.largestBatchId,o-s.size):ge.resolve(l());let h=-1,p=s;return c.next(_=>ge.forEach(_,(w,I)=>(h<I.largestBatchId&&(h=I.largestBatchId),s.get(w)?ge.resolve():this.remoteDocumentCache.getEntry(n,w).next(A=>{p=p.insert(w,A)}))).next(()=>this.populateOverlays(n,_,s)).next(()=>this.computeViews(n,p,_,b())).next(w=>({batchId:h,changes:a(w)})))})}getDocumentsMatchingDocumentQuery(n,e){return this.getDocument(n,new vt(e)).next(r=>{let o=vb();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(n,e,r){const o=e.collectionGroup;let s=vb();return this.indexManager.getCollectionParents(n,o).next(c=>ge.forEach(c,h=>{const p=(_=e,w=h.child(o),new $l(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,w;return this.getDocumentsMatchingCollectionQuery(n,p,r).next(_=>{_.forEach((w,I)=>{s=s.insert(w,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(n,e,r){let o;return this.documentOverlayCache.getOverlaysForCollection(n,e.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(n,e,r,o))).next(s=>{o.forEach((h,p)=>{const _=p.getKey();null===s.get(_)&&(s=s.insert(_,Wi.newInvalidDocument(_)))});let c=vb();return s.forEach((h,p)=>{const _=o.get(h);void 0!==_&&wE(_.mutation,p,cs.empty(),Gi.now()),yb(e,p)&&(c=c.insert(h,p))}),c})}}class Yj{constructor(n){this.serializer=n,this.cs=new Map,this.hs=new Map}getBundleMetadata(n,e){return ge.resolve(this.cs.get(e))}saveBundleMetadata(n,e){var r;return this.cs.set(e.id,{id:(r=e).id,version:r.version,createTime:eo(r.createTime)}),ge.resolve()}getNamedQuery(n,e){return ge.resolve(this.hs.get(e))}saveNamedQuery(n,e){return this.hs.set(e.name,{name:(r=e).name,query:DP(r.bundledQuery),readTime:eo(r.readTime)}),ge.resolve();var r}}class Zj{constructor(){this.overlays=new Mi(vt.comparator),this.ls=new Map}getOverlay(n,e){return ge.resolve(this.overlays.get(e))}getOverlays(n,e){const r=l();return ge.forEach(e,o=>this.getOverlay(n,o).next(s=>{null!==s&&r.set(o,s)})).next(()=>r)}saveOverlays(n,e,r){return r.forEach((o,s)=>{this.we(n,e,s)}),ge.resolve()}removeOverlaysForBatchId(n,e,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),ge.resolve()}getOverlaysForCollection(n,e,r){const o=l(),s=e.length+1,c=new vt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,_=p.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>r&&o.set(p.getKey(),p)}return ge.resolve(o)}getOverlaysForCollectionGroup(n,e,r,o){let s=new Mi((_,w)=>_-w);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>r){let w=s.get(_.largestBatchId);null===w&&(w=l(),s=s.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const h=l(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,w)=>h.set(_,w)),!(h.size()>=o)););return ge.resolve(h)}we(n,e,r){const o=this.overlays.get(r.key);if(null!==o){const c=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new _P(e,r));let s=this.ls.get(e);void 0===s&&(s=b(),this.ls.set(e,s)),this.ls.set(e,s.add(r.key))}}class RP{constructor(){this.fs=new Hi(Wo.ds),this.ws=new Hi(Wo._s)}isEmpty(){return this.fs.isEmpty()}addReference(n,e){const r=new Wo(n,e);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(n,e){n.forEach(r=>this.addReference(r,e))}removeReference(n,e){this.ys(new Wo(n,e))}ps(n,e){n.forEach(r=>this.removeReference(r,e))}Is(n){const e=new vt(new jn([])),r=new Wo(e,n),o=new Wo(e,n+1),s=[];return this.ws.forEachInRange([r,o],c=>{this.ys(c),s.push(c.key)}),s}Ts(){this.fs.forEach(n=>this.ys(n))}ys(n){this.fs=this.fs.delete(n),this.ws=this.ws.delete(n)}Es(n){const e=new vt(new jn([])),r=new Wo(e,n),o=new Wo(e,n+1);let s=b();return this.ws.forEachInRange([r,o],c=>{s=s.add(c.key)}),s}containsKey(n){const e=new Wo(n,0),r=this.fs.firstAfterOrEqual(e);return null!==r&&n.isEqual(r.key)}}class Wo{constructor(n,e){this.key=n,this.As=e}static ds(n,e){return vt.comparator(n.key,e.key)||fn(n.As,e.As)}static _s(n,e){return fn(n.As,e.As)||vt.comparator(n.key,e.key)}}class Kj{constructor(n,e){this.indexManager=n,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Hi(Wo.ds)}checkEmpty(n){return ge.resolve(0===this.mutationQueue.length)}addMutationBatch(n,e,r,o){const s=this.vs;this.vs++;const c=new pP(s,e,r,o);this.mutationQueue.push(c);for(const h of o)this.Rs=this.Rs.add(new Wo(h.key,s)),this.indexManager.addToCollectionParentIndex(n,h.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(n,e){return ge.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(n,e){const o=this.bs(e+1),s=o<0?0:o;return ge.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(n){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(n,e){const r=new Wo(e,0),o=new Wo(e,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,o],c=>{const h=this.Ps(c.As);s.push(h)}),ge.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(n,e){let r=new Hi(fn);return e.forEach(o=>{const s=new Wo(o,0),c=new Wo(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,c],h=>{r=r.add(h.As)})}),ge.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(n,e){const r=e.path,o=r.length+1;let s=r;vt.isDocumentKey(s)||(s=s.child(""));const c=new Wo(new vt(s),0);let h=new Hi(fn);return this.Rs.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(h=h.add(p.As)),!0)},c),ge.resolve(this.Vs(h))}Vs(n){const e=[];return n.forEach(r=>{const o=this.Ps(r);null!==o&&e.push(o)}),e}removeMutationBatch(n,e){Vt(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ge.forEach(e.mutations,o=>{const s=new Wo(o.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(n,o.key)}).next(()=>{this.Rs=r})}Cn(n){}containsKey(n,e){const r=new Wo(e,0),o=this.Rs.firstAfterOrEqual(r);return ge.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(n){return ge.resolve()}Ss(n,e){return this.bs(n)}bs(n){return 0===this.mutationQueue.length?0:n-this.mutationQueue[0].batchId}Ps(n){const e=this.bs(n);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Qj{constructor(n){this.Ds=n,this.docs=new Mi(vt.comparator),this.size=0}setIndexManager(n){this.indexManager=n}addEntry(n,e){const r=e.key,o=this.docs.get(r),s=o?o.size:0,c=this.Ds(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(n,r.path.popLast())}removeEntry(n){const e=this.docs.get(n);e&&(this.docs=this.docs.remove(n),this.size-=e.size)}getEntry(n,e){const r=this.docs.get(e);return ge.resolve(r?r.document.mutableCopy():Wi.newInvalidDocument(e))}getEntries(n,e){let r=Ws();return e.forEach(o=>{const s=this.docs.get(o);r=r.insert(o,s?s.document.mutableCopy():Wi.newInvalidDocument(o))}),ge.resolve(r)}getDocumentsMatchingQuery(n,e,r,o){let s=Ws();const c=e.path,h=new vt(c.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:_,value:{document:w}}=p.getNext();if(!c.isPrefixOf(_.path))break;_.path.length>c.length+1||SS(TS(w),r)<=0||(o.has(w.key)||yb(e,w))&&(s=s.insert(w.key,w.mutableCopy()))}return ge.resolve(s)}getAllFromCollectionGroup(n,e,r,o){St()}Cs(n,e){return ge.forEach(this.docs,r=>e(r))}newChangeBuffer(n){return new Xj(this)}getSize(n){return ge.resolve(this.size)}}class Xj extends oU{constructor(n){super(),this.os=n}applyChanges(n){const e=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?e.push(this.os.addEntry(n,o)):this.os.removeEntry(r)}),ge.waitFor(e)}getFromCache(n,e){return this.os.getEntry(n,e)}getAllFromCache(n,e){return this.os.getEntries(n,e)}}class Jj{constructor(n){this.persistence=n,this.xs=new Kd(e=>Zd(e),$m),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new RP,this.targetCount=0,this.Ms=E_.kn()}forEachTarget(n,e){return this.xs.forEach((r,o)=>e(o)),ge.resolve()}getLastRemoteSnapshotVersion(n){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return ge.resolve(this.Ns)}allocateTargetId(n){return this.highestTargetId=this.Ms.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(n,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.Ns&&(this.Ns=e),ge.resolve()}Fn(n){this.xs.set(n.target,n);const e=n.targetId;e>this.highestTargetId&&(this.Ms=new E_(e),this.highestTargetId=e),n.sequenceNumber>this.Ns&&(this.Ns=n.sequenceNumber)}addTargetData(n,e){return this.Fn(e),this.targetCount+=1,ge.resolve()}updateTargetData(n,e){return this.Fn(e),ge.resolve()}removeTargetData(n,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,ge.resolve()}removeTargets(n,e,r){let o=0;const s=[];return this.xs.forEach((c,h)=>{h.sequenceNumber<=e&&null===r.get(h.targetId)&&(this.xs.delete(c),s.push(this.removeMatchingKeysForTargetId(n,h.targetId)),o++)}),ge.waitFor(s).next(()=>o)}getTargetCount(n){return ge.resolve(this.targetCount)}getTargetData(n,e){const r=this.xs.get(e)||null;return ge.resolve(r)}addMatchingKeys(n,e,r){return this.ks.gs(e,r),ge.resolve()}removeMatchingKeys(n,e,r){this.ks.ps(e,r);const o=this.persistence.referenceDelegate,s=[];return o&&e.forEach(c=>{s.push(o.markPotentiallyOrphaned(n,c))}),ge.waitFor(s)}removeMatchingKeysForTargetId(n,e){return this.ks.Is(e),ge.resolve()}getMatchingKeysForTargetId(n,e){const r=this.ks.Es(e);return ge.resolve(r)}containsKey(n,e){return ge.resolve(this.ks.containsKey(e))}}class PP{constructor(n,e){this.$s={},this.overlays={},this.Os=new Ai(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=n(this),this.Bs=new Jj(this),this.indexManager=new Bj,this.remoteDocumentCache=new Qj(r=>this.referenceDelegate.Ls(r)),this.serializer=new L2(e),this.qs=new Yj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(n){return this.indexManager}getDocumentOverlayCache(n){let e=this.overlays[n.toKey()];return e||(e=new Zj,this.overlays[n.toKey()]=e),e}getMutationQueue(n,e){let r=this.$s[n.toKey()];return r||(r=new Kj(e,this.referenceDelegate),this.$s[n.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(n,e,r){Qe("MemoryPersistence","Starting transaction:",n);const o=new e5(this.Os.next());return this.referenceDelegate.Us(),r(o).next(s=>this.referenceDelegate.Ks(o).next(()=>s)).toPromise().then(s=>(o.raiseOnCommittedEvent(),s))}Gs(n,e){return ge.or(Object.values(this.$s).map(r=>()=>r.containsKey(n,e)))}}class e5 extends Zx{constructor(n){super(),this.currentSequenceNumber=n}}class hA{constructor(n){this.persistence=n,this.Qs=new RP,this.js=null}static zs(n){return new hA(n)}get Ws(){if(this.js)return this.js;throw St()}addReference(n,e,r){return this.Qs.addReference(r,e),this.Ws.delete(r.toString()),ge.resolve()}removeReference(n,e,r){return this.Qs.removeReference(r,e),this.Ws.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(n,e){return this.Ws.add(e.toString()),ge.resolve()}removeTarget(n,e){this.Qs.Is(e.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(n,e.targetId).next(o=>{o.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(n,e))}Us(){this.js=new Set}Ks(n){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Ws,r=>{const o=vt.fromPath(r);return this.Hs(n,o).next(s=>{s||e.removeEntry(o,zt.min())})}).next(()=>(this.js=null,e.apply(n)))}updateLimboDocument(n,e){return this.Hs(n,e).next(r=>{r?this.Ws.delete(e.toString()):this.Ws.add(e.toString())})}Ls(n){return 0}Hs(n,e){return ge.or([()=>ge.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(n,e),()=>this.persistence.Gs(n,e)])}}class t5{constructor(n){this.serializer=n}O(n,e,r,o){const s=new Qx("createOrUpgrade",e);var h;r<1&&o>=1&&(n.createObjectStore("owner"),(h=n).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kS,{unique:!0}),h.createObjectStore("documentMutations"),uU(n),function(h){h.createObjectStore("remoteDocuments")}(n));let c=ge.resolve();return r<3&&o>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(n),uU(n)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").j().next(_=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kS,{unique:!0});const w=p.store("mutations"),I=_.map(A=>w.put(A));return ge.waitFor(I)})}(n,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(n)})),r<5&&o>=5&&(c=c.next(()=>this.Ys(s))),r<6&&o>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(n),this.Xs(s)))),r<7&&o>=7&&(c=c.next(()=>this.Zs(s))),r<8&&o>=8&&(c=c.next(()=>this.ti(n,s))),r<9&&o>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(n)})),r<10&&o>=10&&(c=c.next(()=>this.ei(s))),r<11&&o>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(n),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(n)})),r<12&&o>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:FS});p.createIndex("collectionPathOverlayIndex",QR,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",XR,{unique:!1})}(n)})),r<13&&o>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:PS});p.createIndex("documentKeyIndex",YR),p.createIndex("collectionGroupIndex",OS)}(n)).next(()=>this.ni(n,s)).next(()=>n.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>this.si(n,s))),r<15&&o>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:nE}).createIndex("sequenceNumberIndex",iE,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:KR}).createIndex("documentKeyIndex",o2,{unique:!1})}(n))),c}Xs(n){let e=0;return n.store("remoteDocuments").X((r,o)=>{e+=cA(o)}).next(()=>{const r={byteSize:e};return n.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(n){const e=n.store("mutationQueues"),r=n.store("mutations");return e.j().next(o=>ge.forEach(o,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(h=>ge.forEach(h,p=>{Vt(p.userId===s.userId);const _=b_(this.serializer,p);return X2(n,s.userId,_).next(()=>{})}))}))}Zs(n){const e=n.store("targetDocuments"),r=n.store("remoteDocuments");return n.store("targetGlobal").get("targetGlobalKey").next(o=>{const s=[];return r.X((c,h)=>{const p=new jn(c),_=[0,$o(p)];s.push(e.get(_).next(w=>w?ge.resolve():e.put({targetId:0,path:$o(p),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ge.waitFor(s))})}ti(n,e){n.createObjectStore("collectionParents",{keyPath:NS});const r=e.store("collectionParents"),o=new kP,s=c=>{if(o.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:$o(p)})}};return e.store("remoteDocuments").X({Y:!0},(c,h)=>{const p=new jn(c);return s(p.popLast())}).next(()=>e.store("documentMutations").X({Y:!0},([c,h,p],_)=>{const w=Ja(h);return s(w.popLast())}))}ei(n){const e=n.store("targets");return e.X((r,o)=>{const s=SE(o),c=B2(this.serializer,s);return e.put(c)})}ni(n,e){const r=e.store("remoteDocuments"),o=[];return r.X((s,c)=>{const h=e.store("remoteDocumentsV14"),p=(_=c,_.document?new vt(jn.fromString(_.document.name).popFirst(5)):_.noDocument?vt.fromSegments(_.noDocument.path):_.unknownDocument?vt.fromSegments(_.unknownDocument.path):St()).path.toArray();var _;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(h.put(w))}).next(()=>ge.waitFor(o))}si(n,e){const r=e.store("mutations"),o=sU(this.serializer),s=new PP(hA.zs,this.serializer.fe);return r.j().next(c=>{const h=new Map;return c.forEach(p=>{var _;let w=null!==(_=h.get(p.userId))&&void 0!==_?_:b();b_(this.serializer,p).keys().forEach(I=>w=w.add(I)),h.set(p.userId,w)}),ge.forEach(h,(p,_)=>{const w=new To(_),I=oA.de(this.serializer,w),A=s.getIndexManager(w),P=dA.de(w,this.serializer,A,s.referenceDelegate);return new dU(o,P,I,A).recalculateAndSaveOverlaysForDocumentKeys(new oE(e,Ai.ct),p).next()})})}}function uU(i){i.createObjectStore("targetDocuments",{keyPath:tE}).createIndex("documentTargetsIndex",Gd,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ZR,{unique:!0}),i.createObjectStore("targetGlobal")}const OP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class NP{constructor(n,e,r,o,s,c,h,p,_,w,I=15){if(this.allowTabSynchronization=n,this.persistenceKey=e,this.clientId=r,this.ii=s,this.window=c,this.document=h,this.ri=_,this.oi=w,this.ui=I,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!NP.D())throw new je(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $j(this,o),this.di=e+"main",this.serializer=new L2(p),this.wi=new Qa(this.di,this.ui,new t5(this.serializer)),this.Bs=new Hj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sU(this.serializer),this.qs=new Rj,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===w&&xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(be.FAILED_PRECONDITION,OP);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.Bs.getHighestSequenceNumber(n))}).then(n=>{this.Os=new Ai(n,this.ri)}).then(()=>{this.Fs=!0}).catch(n=>(this.wi&&this.wi.close(),Promise.reject(n)))}Ii(n){var e=this;return this.fi=function(){var r=(0,De.Z)(function*(o){if(e.started)return n(o)});return function(o){return r.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.wi.B(function(){var e=(0,De.Z)(function*(r){null===r.newVersion&&(yield n())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(n){var e=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.ii.enqueueAndForget((0,De.Z)(function*(){e.started&&(yield e.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>mA(n).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(n).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(n)).next(e=>this.isPrimary&&!e?this.Ai(n).next(()=>!1):!!e&&this.vi(n).next(()=>!0))).catch(n=>{if(Mh(n))return Qe("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return Qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.ii.enqueueRetryable(()=>this.fi(n)),this.isPrimary=n})}Ti(n){return OE(n).get("owner").next(e=>ge.resolve(this.Ri(e)))}Pi(n){return mA(n).delete(this.clientId)}bi(){var n=this;return(0,De.Z)(function*(){if(n.isPrimary&&!n.Vi(n.li,18e5)){n.li=Date.now();const e=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Xr(r,"clientMetadata");return o.j().next(s=>{const c=n.Si(s,18e5),h=s.filter(p=>-1===c.indexOf(p));return ge.forEach(h,p=>o.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(n._i)for(const r of e)n._i.removeItem(n.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(n){return!!n&&n.ownerId===this.clientId}Ei(n){return this.oi?ge.resolve(!0):OE(n).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new je(be.FAILED_PRECONDITION,OP);return!1}}return!(!this.networkEnabled||!this.inForeground)||mA(n).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(e=>(this.isPrimary!==e&&Qe("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var n=this;return(0,De.Z)(function*(){n.Fs=!1,n.xi(),n.hi&&(n.hi.cancel(),n.hi=null),n.Ni(),n.ki(),yield n.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new oE(e,Ai.ct);return n.Ai(r).next(()=>n.Pi(r))}),n.wi.close(),n.Mi()})()}Si(n,e){return n.filter(r=>this.Vi(r.updateTimeMs,e)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",n=>mA(n).j().next(e=>this.Si(e,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(n,e){return dA.de(n,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(n){return new Vj(n,this.serializer.fe.databaseId)}getDocumentOverlayCache(n){return oA.de(this.serializer,n)}getBundleCache(){return this.qs}runTransaction(n,e,r){Qe("IndexedDbPersistence","Starting transaction:",n);const o="readonly"===e?"readonly":"readwrite",s=15===(c=this.ui)?US:14===c?eP:13===c?rE:12===c?JR:11===c?LS:void St();var c;let h;return this.wi.runTransaction(n,o,s,p=>(h=new oE(p,this.Os?this.Os.next():Ai.ct),"readwrite-primary"===e?this.Ti(h).next(_=>!!_||this.Ei(h)).next(_=>{if(!_)throw xr(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new je(be.FAILED_PRECONDITION,WR);return r(h)}).next(_=>this.vi(h).next(()=>_)):this.Oi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Oi(n){return OE(n).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new je(be.FAILED_PRECONDITION,OP)})}vi(n){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return OE(n).put("owner",e)}static D(){return Qa.D()}Ai(n){const e=OE(n);return e.get("owner").next(r=>this.Ri(r)?(Qe("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ge.resolve())}Vi(n,e){const r=Date.now();return!(n<r-e||n>r&&(xr(`Detected an update time that is in the future: ${n} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,j.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(n){var e;try{const r=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(n)));return Qe("IndexedDbPersistence",`Client '${n}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(n){xr("Failed to set zombie client id.",n)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function OE(i){return Xr(i,"owner")}function mA(i){return Xr(i,"clientMetadata")}function FP(i,n){let e=i.projectId;return i.isDefaultDatabase||(e+="."+i.database),"firestore/"+n+"/"+e+"/"}class LP{constructor(n,e,r,o){this.targetId=n,this.fromCache=e,this.Fi=r,this.Bi=o}static Li(n,e){let r=b(),o=b();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}return new LP(n,e.fromCache,r,o)}}class hU{constructor(){this.qi=!1}initialize(n,e){this.Ui=n,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(n,e,r,o){return this.Ki(n,e).next(s=>s||this.Gi(n,e,o,r)).next(s=>s||this.Qi(n,e))}Ki(n,e){if(KS(e))return ge.resolve(null);let r=Ms(e);return this.indexManager.getIndexType(n,r).next(o=>0===o?null:(null!==e.limit&&1===o&&(e=bE(e,null,"F"),r=Ms(e)),this.indexManager.getDocumentsMatchingTarget(n,r).next(s=>{const c=b(...s);return this.Ui.getDocuments(n,c).next(h=>this.indexManager.getMinOffset(n,r).next(p=>{const _=this.ji(e,h);return this.zi(e,_,c,p.readTime)?this.Ki(n,bE(e,null,"F")):this.Wi(n,_,e,p)}))})))}Gi(n,e,r,o){return KS(e)||o.isEqual(zt.min())?this.Qi(n,e):this.Ui.getDocuments(n,r).next(s=>{const c=this.ji(e,s);return this.zi(e,c,r,o)?this.Qi(n,e):(ib()<=Yr.in.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),QS(e)),this.Wi(n,c,e,l_(o,-1)))})}ji(n,e){let r=new Hi(hP(n));return e.forEach((o,s)=>{yb(n,s)&&(r=r.add(s))}),r}zi(n,e,r,o){if(null===n.limit)return!1;if(r.size!==e.size)return!0;const s="F"===n.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)}Qi(n,e){return ib()<=Yr.in.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",QS(e)),this.Ui.getDocumentsMatchingQuery(n,e,ba.min())}Wi(n,e,r,o){return this.Ui.getDocumentsMatchingQuery(n,r,o).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class n5{constructor(n,e,r,o){this.persistence=n,this.Hi=e,this.serializer=o,this.Ji=new Mi(fn),this.Yi=new Kd(s=>Zd(s),$m),this.Xi=new Map,this.Zi=n.getRemoteDocumentCache(),this.Bs=n.getTargetCache(),this.qs=n.getBundleCache(),this.tr(r)}tr(n){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(n),this.indexManager=this.persistence.getIndexManager(n),this.mutationQueue=this.persistence.getMutationQueue(n,this.indexManager),this.localDocuments=new dU(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>n.collect(e,this.Ji))}}function fU(i,n,e,r){return new n5(i,n,e,r)}function mU(i,n){return UP.apply(this,arguments)}function UP(){return UP=(0,De.Z)(function*(i,n){const e=wt(i);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next(s=>(o=s,e.tr(n),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const c=[],h=[];let p=b();for(const _ of o){c.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}for(const _ of s){h.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}return e.localDocuments.getDocuments(r,p).next(_=>({er:_,removedBatchIds:c,addedBatchIds:h}))})})}),UP.apply(this,arguments)}function pU(i){const n=wt(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",e=>n.Bs.getLastRemoteSnapshotVersion(e))}function gU(i,n,e){let r=b(),o=b();return e.forEach(s=>r=r.add(s)),n.getEntries(i,r).next(s=>{let c=Ws();return e.forEach((h,p)=>{const _=s.get(h);p.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(zt.min())?(n.removeEntry(h,p.readTime),c=c.insert(h,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(n.addEntry(p),c=c.insert(h,p)):Qe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",p.version)}),{nr:c,sr:o}})}function s5(i,n){const e=wt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===n&&(n=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,n)))}function Ib(i,n){const e=wt(i);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return e.Bs.getTargetData(r,n).next(s=>s?(o=s,ge.resolve(o)):e.Bs.allocateTargetId(r).next(c=>(o=new Vh(n,c,"TargetPurposeListen",r.currentSequenceNumber),e.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=e.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ji=e.Ji.insert(r.targetId,r),e.Yi.set(n,r.targetId)),r})}function Tb(i,n,e){return BP.apply(this,arguments)}function BP(){return BP=(0,De.Z)(function*(i,n,e){const r=wt(i),o=r.Ji.get(n),s=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Mh(c))throw c;Qe("LocalStore",`Failed to update sequence numbers for target ${n}: ${c}`)}r.Ji=r.Ji.remove(n),r.Yi.delete(o.target)}),BP.apply(this,arguments)}function pA(i,n,e){const r=wt(i);let o=zt.min(),s=b();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,_){const w=wt(h),I=w.Yi.get(_);return void 0!==I?ge.resolve(w.Ji.get(I)):w.Bs.getTargetData(p,_)}(r,c,Ms(n)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,n,e?o:zt.min(),e?s:b())).next(h=>(vU(r,XS(n),h),{documents:h,ir:s})))}function _U(i,n){const e=wt(i),r=wt(e.Bs),o=e.Ji.get(n);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",s=>r.le(s,n).next(c=>c?c.target:null))}function yU(i,n){const e=wt(i),r=e.Xi.get(n)||zt.min();return e.persistence.runTransaction("Get new document changes","readonly",o=>e.Zi.getAllFromCollectionGroup(o,n,l_(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(vU(e,n,o),o))}function vU(i,n,e){let r=i.Xi.get(n)||zt.min();e.forEach((o,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),i.Xi.set(n,r)}function VP(){return VP=(0,De.Z)(function*(i,n,e,r){const o=wt(i);let s=b(),c=Ws();for(const _ of e){const w=n.rr(_.metadata.name);_.document&&(s=s.add(w));const I=n.ur(_);I.setReadTime(n.cr(_.metadata.readTime)),c=c.insert(w,I)}const h=o.Zi.newChangeBuffer({trackRemovals:!0}),p=yield Ib(o,(_=r,Ms(p_(jn.fromString(`__bundle__/docs/${_}`)))));var _;return o.persistence.runTransaction("Apply bundle documents","readwrite",_=>gU(_,h,c).next(w=>(h.apply(_),w)).next(w=>o.Bs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>o.Bs.addMatchingKeys(_,s,p.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(_,w.nr,w.sr)).next(()=>w.nr)))}),VP.apply(this,arguments)}function l5(i,n){return HP.apply(this,arguments)}function HP(){return HP=(0,De.Z)(function*(i,n,e=b()){const r=yield Ib(i,Ms(DP(n.bundledQuery))),o=wt(i);return o.persistence.runTransaction("Save named query","readwrite",s=>{const c=eo(n.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.qs.saveNamedQuery(s,n);const h=r.withResumeToken(Jr.EMPTY_BYTE_STRING,c);return o.Ji=o.Ji.insert(h.targetId,h),o.Bs.updateTargetData(s,h).next(()=>o.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>o.Bs.addMatchingKeys(s,e,r.targetId)).next(()=>o.qs.saveNamedQuery(s,n))})}),HP.apply(this,arguments)}function bU(i,n){return`firestore_clients_${i}_${n}`}function wU(i,n,e){let r=`firestore_mutations_${i}_${e}`;return n.isAuthenticated()&&(r+=`_${n.uid}`),r}function zP(i,n){return`firestore_targets_${i}_${n}`}class gA{constructor(n,e,r,o){this.user=n,this.batchId=e,this.state=r,this.error=o}static ar(n,e,r){const o=JSON.parse(r);let s,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(s=new je(o.error.code,o.error.message))),c?new gA(n,e,o.state,s):(xr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}hr(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class NE{constructor(n,e,r){this.targetId=n,this.state=e,this.error=r}static ar(n,e){const r=JSON.parse(e);let o,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(o=new je(r.error.code,r.error.message))),s?new NE(n,r.state,o):(xr("SharedClientState",`Failed to parse target state for ID '${n}': ${e}`),null)}hr(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class _A{constructor(n,e){this.clientId=n,this.activeTargetIds=e}static ar(n,e){const r=JSON.parse(e);let o="object"==typeof r&&r.activeTargetIds instanceof Array,s=T();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=MS(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return o?new _A(n,s):(xr("SharedClientState",`Failed to parse client data for instance '${n}': ${e}`),null)}}class jP{constructor(n,e){this.clientId=n,this.onlineState=e}static ar(n){const e=JSON.parse(n);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new jP(e.clientId,e.onlineState):(xr("SharedClientState",`Failed to parse online state: ${n}`),null)}}class $P{constructor(){this.activeTargetIds=T()}lr(n){this.activeTargetIds=this.activeTargetIds.add(n)}dr(n){this.activeTargetIds=this.activeTargetIds.delete(n)}hr(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class GP{constructor(n,e,r,o,s){this.window=n,this.ii=e,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Mi(fn),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=bU(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new $P),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,De.Z)(function*(){const e=yield n.syncEngine.$i();for(const o of e){if(o===n.wr)continue;const s=n.getItem(bU(n.persistenceKey,o));if(s){const c=_A.ar(o,s);c&&(n.gr=n.gr.insert(c.clientId,c))}}n.Pr();const r=n.storage.getItem(n.vr);if(r){const o=n.br(r);o&&n.Vr(o)}for(const o of n.yr)n.mr(o);n.yr=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Ir,JSON.stringify(n))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(n){let e=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(n)&&(e=!0)}),e}addPendingMutation(n){this.Dr(n,"pending")}updateMutationState(n,e,r){this.Dr(n,e,r),this.Cr(n)}addLocalQueryTarget(n){let e="not-current";if(this.isActiveQueryTarget(n)){const r=this.storage.getItem(zP(this.persistenceKey,n));if(r){const o=NE.ar(n,r);o&&(e=o.state)}}return this.Nr.lr(n),this.Pr(),e}removeLocalQueryTarget(n){this.Nr.dr(n),this.Pr()}isLocalQueryTarget(n){return this.Nr.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(zP(this.persistenceKey,n))}updateQueryState(n,e,r){this.kr(n,e,r)}handleUserChange(n,e,r){e.forEach(o=>{this.Cr(o)}),this.currentUser=n,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(n){this.Mr(n)}notifyBundleLoaded(n){this.$r(n)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(n){const e=this.storage.getItem(n);return Qe("SharedClientState","READ",n,e),e}setItem(n,e){Qe("SharedClientState","SET",n,e),this.storage.setItem(n,e)}removeItem(n){Qe("SharedClientState","REMOVE",n),this.storage.removeItem(n)}mr(n){var e=this;const r=n;if(r.storageArea===this.storage){if(Qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,De.Z)(function*(){if(e.started){if(null!==r.key)if(e.Tr.test(r.key)){if(null==r.newValue){const o=e.Or(r.key);return e.Fr(o,null)}{const o=e.Br(r.key,r.newValue);if(o)return e.Fr(o.clientId,o)}}else if(e.Er.test(r.key)){if(null!==r.newValue){const o=e.Lr(r.key,r.newValue);if(o)return e.qr(o)}}else if(e.Ar.test(r.key)){if(null!==r.newValue){const o=e.Ur(r.key,r.newValue);if(o)return e.Kr(o)}}else if(r.key===e.vr){if(null!==r.newValue){const o=e.br(r.newValue);if(o)return e.Vr(o)}}else if(r.key===e.Ir){const o=function(s){let c=Ai.ct;if(null!=s)try{const h=JSON.parse(s);Vt("number"==typeof h),c=h}catch(h){xr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);o!==Ai.ct&&e.sequenceNumberHandler(o)}else if(r.key===e.Rr){const o=e.Gr(r.newValue);yield Promise.all(o.map(s=>e.syncEngine.Qr(s)))}}else e.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(n,e,r){const o=new gA(this.currentUser,n,e,r),s=wU(this.persistenceKey,this.currentUser,n);this.setItem(s,o.hr())}Cr(n){const e=wU(this.persistenceKey,this.currentUser,n);this.removeItem(e)}Mr(n){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:n}))}kr(n,e,r){const o=zP(this.persistenceKey,n),s=new NE(n,e,r);this.setItem(o,s.hr())}$r(n){const e=JSON.stringify(Array.from(n));this.setItem(this.Rr,e)}Or(n){const e=this.Tr.exec(n);return e?e[1]:null}Br(n,e){const r=this.Or(n);return _A.ar(r,e)}Lr(n,e){const r=this.Er.exec(n),o=Number(r[1]);return gA.ar(new To(void 0!==r[2]?r[2]:null),o,e)}Ur(n,e){const r=this.Ar.exec(n),o=Number(r[1]);return NE.ar(o,e)}br(n){return jP.ar(n)}Gr(n){return JSON.parse(n)}qr(n){var e=this;return(0,De.Z)(function*(){if(n.user.uid===e.currentUser.uid)return e.syncEngine.jr(n.batchId,n.state,n.error);Qe("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}Kr(n){return this.syncEngine.zr(n.targetId,n.state,n.error)}Fr(n,e){const r=e?this.gr.insert(n,e):this.gr.remove(n),o=this.Sr(this.gr),s=this.Sr(r),c=[],h=[];return s.forEach(p=>{o.has(p)||c.push(p)}),o.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Wr(c,h).then(()=>{this.gr=r})}Vr(n){this.gr.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}Sr(n){let e=T();return n.forEach((r,o)=>{e=e.unionWith(o.activeTargetIds)}),e}}class xU{constructor(){this.Hr=new $P,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,e,r){}addLocalQueryTarget(n){return this.Hr.lr(n),this.Jr[n]||"not-current"}updateQueryState(n,e,r){this.Jr[n]=e}removeLocalQueryTarget(n){this.Hr.dr(n)}isLocalQueryTarget(n){return this.Hr.activeTargetIds.has(n)}clearQueryState(n){delete this.Jr[n]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(n){return this.Hr.activeTargetIds.has(n)}start(){return this.Hr=new $P,Promise.resolve()}handleUserChange(n,e,r){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(n){}}class c5{Yr(n){}shutdown(){}}class EU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(n){this.so.push(n)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.so)n(0)}no(){Qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.so)n(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yA=null;function WP(){return null===yA?yA=268435456+Math.round(2147483648*Math.random()):yA++,"0x"+yA.toString(16)}const d5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u5{constructor(n){this.ro=n.ro,this.oo=n.oo}uo(n){this.co=n}ao(n){this.ho=n}onMessage(n){this.lo=n}close(){this.oo()}send(n){this.ro(n)}fo(){this.co()}wo(n){this.ho(n)}_o(n){this.lo(n)}}const Rs="WebChannelConnection";class h5 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.mo=(n.ssl?"https":"http")+"://"+n.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(n,e,r,o,s){const c=WP(),h=this.To(n,e);Qe("RestConnection",`Sending RPC '${n}' ${c}:`,h,r);const p={};return this.Eo(p,o,s),this.Ao(n,h,p,r).then(_=>(Qe("RestConnection",`Received RPC '${n}' ${c}: `,_),_),_=>{throw As("RestConnection",`RPC '${n}' ${c} failed with error: `,_,"url: ",h,"request:",r),_})}vo(n,e,r,o,s,c){return this.Io(n,e,r,o,s)}Eo(n,e,r){n["X-Goog-Api-Client"]="gl-js/ fire/"+Ah,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}To(n,e){return`${this.mo}/v1/${e}:${d5[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams,this.longPollingOptions=n.longPollingOptions}Ao(n,e,r,o){const s=WP();return new Promise((c,h)=>{const p=new pS;p.setWithCredentials(!0),p.listenOnce(fS.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Wx.NO_ERROR:const w=p.getResponseJson();Qe(Rs,`XHR for RPC '${n}' ${s} received:`,JSON.stringify(w)),c(w);break;case Wx.TIMEOUT:Qe(Rs,`RPC '${n}' ${s} timed out`),h(new je(be.DEADLINE_EXCEEDED,"Request time out"));break;case Wx.HTTP_ERROR:const I=p.getStatus();if(Qe(Rs,`RPC '${n}' ${s} failed with status:`,I,"response text:",p.getResponseText()),I>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const P=A?.error;if(P&&P.status&&P.message){const B=function(Y){const ee=Y.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(ee)>=0?ee:be.UNKNOWN}(P.status);h(new je(B,P.message))}else h(new je(be.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new je(be.UNAVAILABLE,"Connection failed."));break;default:St()}}finally{Qe(Rs,`RPC '${n}' ${s} completed.`)}});const _=JSON.stringify(o);Qe(Rs,`RPC '${n}' ${s} sending request:`,o),p.send(e,"POST",_,r,15)})}Ro(n,e,r){const o=WP(),s=[this.mo,"/","google.firestore.v1.Firestore","/",n,"/channel"],c=LR(),h=Gx(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.xmlHttpFactory=new BR({})),this.Eo(p.initMessageHeaders,e,r),p.encodeInitMessageHeaders=!0;const w=s.join("");Qe(Rs,`Creating RPC '${n}' stream ${o}: ${w}`,p);const I=c.createWebChannel(w,p);let A=!1,P=!1;const B=new u5({ro:ee=>{P?Qe(Rs,`Not sending because RPC '${n}' stream ${o} is closed:`,ee):(A||(Qe(Rs,`Opening RPC '${n}' stream ${o} transport.`),I.open(),A=!0),Qe(Rs,`RPC '${n}' stream ${o} sending:`,ee),I.send(ee))},oo:()=>I.close()}),Y=(ee,ve,Ae)=>{ee.listen(ve,_e=>{try{Ae(_e)}catch(ke){setTimeout(()=>{throw ke},0)}})};return Y(I,Nm.EventType.OPEN,()=>{P||Qe(Rs,`RPC '${n}' stream ${o} transport opened.`)}),Y(I,Nm.EventType.CLOSE,()=>{P||(P=!0,Qe(Rs,`RPC '${n}' stream ${o} transport closed`),B.wo())}),Y(I,Nm.EventType.ERROR,ee=>{P||(P=!0,As(Rs,`RPC '${n}' stream ${o} transport errored:`,ee),B.wo(new je(be.UNAVAILABLE,"The operation could not be completed")))}),Y(I,Nm.EventType.MESSAGE,ee=>{var ve;if(!P){const Ae=ee.data[0];Vt(!!Ae);const ke=Ae.error||(null===(ve=Ae[0])||void 0===ve?void 0:ve.error);if(ke){Qe(Rs,`RPC '${n}' stream ${o} received error:`,ke);const ze=ke.status;let et=function(Ft){const bn=ho[Ft];if(void 0!==bn)return _2(bn)}(ze),it=ke.message;void 0===et&&(et=be.INTERNAL,it="Unknown error status: "+ze+" with message "+ke.message),P=!0,B.wo(new je(et,it)),I.close()}else Qe(Rs,`RPC '${n}' stream ${o} received:`,Ae),B._o(Ae)}}),Y(h,UR.STAT_EVENT,ee=>{ee.stat===mS.PROXY?Qe(Rs,`RPC '${n}' stream ${o} detected buffering proxy`):ee.stat===mS.NOPROXY&&Qe(Rs,`RPC '${n}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{B.fo()},0),B}}function CU(){return typeof window<"u"?window:null}function vA(){return typeof document<"u"?document:null}function FE(i){return new wj(i,!0)}class qP{constructor(n,e,r=1e3,o=1.5,s=6e4){this.ii=n,this.timerId=e,this.Po=r,this.bo=o,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(n){this.cancel();const e=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,e-r);o>0&&Qe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),n())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class DU{constructor(n,e,r,o,s,c,h,p){this.ii=n,this.$o=r,this.Oo=o,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new qP(n,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var n=this;return(0,De.Z)(function*(){n.Uo()&&(yield n.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(n){this.Ho(),this.stream.send(n)}zo(){var n=this;return(0,De.Z)(function*(){if(n.Ko())return n.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(n,e){var r=this;return(0,De.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==n?r.qo.reset():e&&e.code===be.RESOURCE_EXHAUSTED?(xr(e.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):e&&e.code===be.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=n,yield r.listener.ao(e)})()}Yo(){}auth(){this.state=1;const n=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===e&&this.Zo(r,o)},r=>{n(()=>{const o=new je(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(n,e){const r=this.Xo(this.Fo);this.stream=this.eu(n,e),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var n=this;this.state=5,this.qo.No((0,De.Z)(function*(){n.state=0,n.start()}))}tu(n){return Qe("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(4,n)}Xo(n){return e=>{this.ii.enqueueAndForget(()=>this.Fo===n?e():(Qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f5 extends DU{constructor(n,e,r,o,s,c){super(n,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=s}eu(n,e){return this.connection.Ro("Listen",n,e)}onMessage(n){this.qo.reset();const e=function Cj(i,n){let e;if("targetChange"in n){const r="NO_CHANGE"===(p=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:St(),o=n.targetChange.targetIds||[],s=function(p,_){return p.useProto3Json?(Vt(void 0===_||"string"==typeof _),Jr.fromBase64String(_||"")):(Vt(void 0===_||_ instanceof Uint8Array),Jr.fromUint8Array(_||new Uint8Array))}(i,n.targetChange.resumeToken),c=n.targetChange.cause,h=c&&function(p){const _=void 0===p.code?be.UNKNOWN:_2(p.code);return new je(_,p.message||"")}(c);e=new x2(r,o,s,h||null)}else if("documentChange"in n){const r=n.documentChange,o=Qd(i,r.document.name),s=eo(r.document.updateTime),c=r.document.createTime?eo(r.document.createTime):zt.min(),h=new Go({mapValue:{fields:r.document.fields}}),p=Wi.newFoundDocument(o,s,c,h);e=new iA(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in n){const r=n.documentDelete,o=Qd(i,r.document),s=r.readTime?eo(r.readTime):zt.min(),c=Wi.newNoDocument(o,s);e=new iA([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in n){const r=n.documentRemove,o=Qd(i,r.document);e=new iA([],r.removedTargetIds||[],o,null)}else{if(!("filter"in n))return St();{const r=n.filter,{count:o=0,unchangedNames:s}=r,c=new pj(o,s);e=new w2(r.targetId,c)}}var p;return e}(this.serializer,n),r=function(o){if(!("targetChange"in o))return zt.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?zt.min():s.readTime?eo(s.readTime):zt.min()}(n);return this.listener.nu(e,r)}su(n){const e={};e.database=IE(this.serializer),e.addTarget=function(o,s){let c;const h=s.target;if(c=gb(h)?{documents:R2(o,h)}:{query:CP(o,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=I2(o,s.resumeToken);const p=bP(o,s.expectedCount);null!==p&&(c.expectedCount=p)}else if(s.snapshotVersion.compareTo(zt.min())>0){c.readTime=xb(o,s.snapshotVersion.toTimestamp());const p=bP(o,s.expectedCount);null!==p&&(c.expectedCount=p)}return c}(this.serializer,n);const r=function Ij(i,n){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St()}}(n.purpose);return null==e?null:{"goog-listen-tags":e}}(0,n);r&&(e.labels=r),this.Wo(e)}iu(n){const e={};e.database=IE(this.serializer),e.removeTarget=n,this.Wo(e)}}class m5 extends DU{constructor(n,e,r,o,s,c){super(n,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(n,e){return this.connection.Ro("Write",n,e)}onMessage(n){if(Vt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.ru){this.qo.reset();const e=function Dj(i,n){return i&&i.length>0?(Vt(void 0!==n),i.map(e=>function(r,o){let s=eo(r.updateTime?r.updateTime:o);return s.isEqual(zt.min())&&(s=eo(o)),new uj(s,r.transformResults||[])}(e,n))):[]}(n.writeResults,n.commitTime),r=eo(n.commitTime);return this.listener.cu(r,e)}return Vt(!n.writeResults||0===n.writeResults.length),this.ru=!0,this.listener.au()}hu(){const n={};n.database=IE(this.serializer),this.Wo(n)}uu(n){const e={streamToken:this.lastStreamToken,writes:n.map(r=>TE(this.serializer,r))};this.Wo(e)}}class p5 extends class{}{constructor(n,e,r,o){super(),this.authCredentials=n,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new je(be.FAILED_PRECONDITION,"The client has already been terminated.")}Io(n,e,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Io(n,e,r,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new je(be.UNKNOWN,o.toString())})}vo(n,e,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.vo(n,e,r,s,c,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(be.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class _5{constructor(n,e){this.asyncQueue=n,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(n){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.yu("Offline")))}set(n){this.Tu(),this.wu=0,"Online"===n&&(this.mu=!1),this.yu(n)}yu(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}pu(n){const e=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(xr(e),this.mu=!1):Qe("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class y5{constructor(n,e,r,o,s){var c=this;this.localStore=n,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(h=>{r.enqueueAndForget((0,De.Z)(function*(){var p;Xm(c)&&(Qe("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,De.Z)(function*(_){const w=wt(_);w.vu.add(4),yield Sb(w),w.bu.set("Unknown"),w.vu.delete(4),yield LE(w)}),function(_){return p.apply(this,arguments)})(c))}))}),this.bu=new _5(r,o)}}function LE(i){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,De.Z)(function*(i){if(Xm(i))for(const n of i.Ru)yield n(!0)}),ZP.apply(this,arguments)}function Sb(i){return KP.apply(this,arguments)}function KP(){return KP=(0,De.Z)(function*(i){for(const n of i.Ru)yield n(!1)}),KP.apply(this,arguments)}function bA(i,n){const e=wt(i);e.Au.has(n.targetId)||(e.Au.set(n.targetId,n),JP(e)?XP(e):Mb(e).Ko()&&QP(e,n))}function UE(i,n){const e=wt(i),r=Mb(e);e.Au.delete(n),r.Ko()&&IU(e,n),0===e.Au.size&&(r.Ko()?r.jo():Xm(e)&&e.bu.set("Unknown"))}function QP(i,n){if(i.Vu.qt(n.targetId),n.resumeToken.approximateByteSize()>0||n.snapshotVersion.compareTo(zt.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(n.targetId).size;n=n.withExpectedCount(e)}Mb(i).su(n)}function IU(i,n){i.Vu.qt(n),Mb(i).iu(n)}function XP(i){i.Vu=new _j({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),le:n=>i.Au.get(n)||null,ue:()=>i.datastore.serializer.databaseId}),Mb(i).start(),i.bu.gu()}function JP(i){return Xm(i)&&!Mb(i).Uo()&&i.Au.size>0}function Xm(i){return 0===wt(i).vu.size}function TU(i){i.Vu=void 0}function v5(i){return eO.apply(this,arguments)}function eO(){return eO=(0,De.Z)(function*(i){i.Au.forEach((n,e)=>{QP(i,n)})}),eO.apply(this,arguments)}function b5(i,n){return tO.apply(this,arguments)}function tO(){return tO=(0,De.Z)(function*(i,n){TU(i),JP(i)?(i.bu.Iu(n),XP(i)):i.bu.set("Unknown")}),tO.apply(this,arguments)}function w5(i,n,e){return nO.apply(this,arguments)}function nO(){return nO=(0,De.Z)(function*(i,n,e){if(i.bu.set("Online"),n instanceof x2&&2===n.state&&n.cause)try{yield(r=(0,De.Z)(function*(o,s){const c=s.cause;for(const h of s.targetIds)o.Au.has(h)&&(yield o.remoteSyncer.rejectListen(h,c),o.Au.delete(h),o.Vu.removeTarget(h))}),function(o,s){return r.apply(this,arguments)})(i,n)}catch(r){Qe("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),r),yield wA(i,r)}else if(n instanceof iA?i.Vu.Ht(n):n instanceof w2?i.Vu.ne(n):i.Vu.Xt(n),!e.isEqual(zt.min()))try{const r=yield pU(i.localStore);e.compareTo(r)>=0&&(yield function(o,s){const c=o.Vu.ce(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=o.Au.get(p);_&&o.Au.set(p,_.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach((h,p)=>{const _=o.Au.get(h);if(!_)return;o.Au.set(h,_.withResumeToken(Jr.EMPTY_BYTE_STRING,_.snapshotVersion)),IU(o,h);const w=new Vh(_.target,h,p,_.sequenceNumber);QP(o,w)}),o.remoteSyncer.applyRemoteEvent(c)}(i,e))}catch(r){Qe("RemoteStore","Failed to raise snapshot:",r),yield wA(i,r)}var r}),nO.apply(this,arguments)}function wA(i,n,e){return iO.apply(this,arguments)}function iO(){return iO=(0,De.Z)(function*(i,n,e){if(!Mh(n))throw n;i.vu.add(1),yield Sb(i),i.bu.set("Offline"),e||(e=()=>pU(i.localStore)),i.asyncQueue.enqueueRetryable((0,De.Z)(function*(){Qe("RemoteStore","Retrying IndexedDB access"),yield e(),i.vu.delete(1),yield LE(i)}))}),iO.apply(this,arguments)}function SU(i,n){return n().catch(e=>wA(i,e,n))}function Ab(i){return rO.apply(this,arguments)}function rO(){return rO=(0,De.Z)(function*(i){const n=wt(i),e=Jm(n);let r=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;for(;x5(n);)try{const o=yield s5(n.localStore,r);if(null===o){0===n.Eu.length&&e.jo();break}r=o.batchId,E5(n,o)}catch(o){yield wA(n,o)}AU(n)&&MU(n)}),rO.apply(this,arguments)}function x5(i){return Xm(i)&&i.Eu.length<10}function E5(i,n){i.Eu.push(n);const e=Jm(i);e.Ko()&&e.ou&&e.uu(n.mutations)}function AU(i){return Xm(i)&&!Jm(i).Uo()&&i.Eu.length>0}function MU(i){Jm(i).start()}function C5(i){return oO.apply(this,arguments)}function oO(){return oO=(0,De.Z)(function*(i){Jm(i).hu()}),oO.apply(this,arguments)}function D5(i){return sO.apply(this,arguments)}function sO(){return sO=(0,De.Z)(function*(i){const n=Jm(i);for(const e of i.Eu)n.uu(e.mutations)}),sO.apply(this,arguments)}function I5(i,n,e){return aO.apply(this,arguments)}function aO(){return aO=(0,De.Z)(function*(i,n,e){const r=i.Eu.shift(),o=gP.from(r,n,e);yield SU(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),yield Ab(i)}),aO.apply(this,arguments)}function T5(i,n){return lO.apply(this,arguments)}function lO(){return lO=(0,De.Z)(function*(i,n){var e;n&&Jm(i).ou&&(yield(e=(0,De.Z)(function*(r,o){if(g2(s=o.code)&&s!==be.ABORTED){const c=r.Eu.shift();Jm(r).Qo(),yield SU(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield Ab(r)}var s}),function(r,o){return e.apply(this,arguments)})(i,n)),AU(i)&&MU(i)}),lO.apply(this,arguments)}function kU(i,n){return cO.apply(this,arguments)}function cO(){return cO=(0,De.Z)(function*(i,n){const e=wt(i);e.asyncQueue.verifyOperationInProgress(),Qe("RemoteStore","RemoteStore received new credentials");const r=Xm(e);e.vu.add(3),yield Sb(e),r&&e.bu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(n),e.vu.delete(3),yield LE(e)}),cO.apply(this,arguments)}function dO(i,n){return uO.apply(this,arguments)}function uO(){return uO=(0,De.Z)(function*(i,n){const e=wt(i);n?(e.vu.delete(2),yield LE(e)):n||(e.vu.add(2),yield Sb(e),e.bu.set("Unknown"))}),uO.apply(this,arguments)}function Mb(i){return i.Su||(i.Su=function(n,e,r){const o=wt(n);return o.fu(),new f5(e,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(i.datastore,i.asyncQueue,{uo:v5.bind(null,i),ao:b5.bind(null,i),nu:w5.bind(null,i)}),i.Ru.push(function(){var n=(0,De.Z)(function*(e){e?(i.Su.Qo(),JP(i)?XP(i):i.bu.set("Unknown")):(yield i.Su.stop(),TU(i))});return function(e){return n.apply(this,arguments)}}())),i.Su}function Jm(i){return i.Du||(i.Du=function(n,e,r){const o=wt(n);return o.fu(),new m5(e,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(i.datastore,i.asyncQueue,{uo:C5.bind(null,i),ao:T5.bind(null,i),au:D5.bind(null,i),cu:I5.bind(null,i)}),i.Ru.push(function(){var n=(0,De.Z)(function*(e){e?(i.Du.Qo(),yield Ab(i)):(yield i.Du.stop(),i.Eu.length>0&&(Qe("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(e){return n.apply(this,arguments)}}())),i.Du}class hO{constructor(n,e,r,o,s){this.asyncQueue=n,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=s,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(n,e,r,o,s){const c=Date.now()+r,h=new hO(n,e,c,o,s);return h.start(r),h}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new je(be.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kb(i,n){if(xr("AsyncQueue",`${n}: ${i}`),Mh(i))return new je(be.UNAVAILABLE,`${n}: ${i}`);throw i}class Rb{constructor(n){this.comparator=n?(e,r)=>n(e,r)||vt.comparator(e.key,r.key):(e,r)=>vt.comparator(e.key,r.key),this.keyedMap=vb(),this.sortedSet=new Mi(this.comparator)}static emptySet(n){return new Rb(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const e=this.keyedMap.get(n);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((e,r)=>(n(e),!1))}add(n){const e=this.delete(n.key);return e.copy(e.keyedMap.insert(n.key,n),e.sortedSet.insert(n,null))}delete(n){const e=this.get(n);return e?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(e)):this}isEqual(n){if(!(n instanceof Rb)||this.size!==n.size)return!1;const e=this.sortedSet.getIterator(),r=n.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,s=r.getNext().key;if(!o.isEqual(s))return!1}return!0}toString(){const n=[];return this.forEach(e=>{n.push(e.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,e){const r=new Rb;return r.comparator=this.comparator,r.keyedMap=n,r.sortedSet=e,r}}class RU{constructor(){this.Cu=new Mi(vt.comparator)}track(n){const e=n.doc.key,r=this.Cu.get(e);r?0!==n.type&&3===r.type?this.Cu=this.Cu.insert(e,n):3===n.type&&1!==r.type?this.Cu=this.Cu.insert(e,{type:r.type,doc:n.doc}):2===n.type&&2===r.type?this.Cu=this.Cu.insert(e,{type:2,doc:n.doc}):2===n.type&&0===r.type?this.Cu=this.Cu.insert(e,{type:0,doc:n.doc}):1===n.type&&0===r.type?this.Cu=this.Cu.remove(e):1===n.type&&2===r.type?this.Cu=this.Cu.insert(e,{type:1,doc:r.doc}):0===n.type&&1===r.type?this.Cu=this.Cu.insert(e,{type:2,doc:n.doc}):St():this.Cu=this.Cu.insert(e,n)}xu(){const n=[];return this.Cu.inorderTraversal((e,r)=>{n.push(r)}),n}}class Pb{constructor(n,e,r,o,s,c,h,p,_){this.query=n,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(n,e,r,o,s){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new Pb(n,e,Rb.emptySet(e),c,r,o,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.hasCachedResults===n.hasCachedResults&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&_b(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const e=this.docChanges,r=n.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}class S5{constructor(){this.Nu=void 0,this.listeners=[]}}class A5{constructor(){this.queries=new Kd(n=>uP(n),_b),this.onlineState="Unknown",this.ku=new Set}}function fO(i,n){return mO.apply(this,arguments)}function mO(){return mO=(0,De.Z)(function*(i,n){const e=wt(i),r=n.query;let o=!1,s=e.queries.get(r);if(s||(o=!0,s=new S5),o)try{s.Nu=yield e.onListen(r)}catch(c){const h=kb(c,`Initialization of query '${QS(n.query)}' failed`);return void n.onError(h)}e.queries.set(r,s),s.listeners.push(n),n.Mu(e.onlineState),s.Nu&&n.$u(s.Nu)&&_O(e)}),mO.apply(this,arguments)}function pO(i,n){return gO.apply(this,arguments)}function gO(){return gO=(0,De.Z)(function*(i,n){const e=wt(i),r=n.query;let o=!1;const s=e.queries.get(r);if(s){const c=s.listeners.indexOf(n);c>=0&&(s.listeners.splice(c,1),o=0===s.listeners.length)}if(o)return e.queries.delete(r),e.onUnlisten(r)}),gO.apply(this,arguments)}function M5(i,n){const e=wt(i);let r=!1;for(const o of n){const c=e.queries.get(o.query);if(c){for(const h of c.listeners)h.$u(o)&&(r=!0);c.Nu=o}}r&&_O(e)}function k5(i,n,e){const r=wt(i),o=r.queries.get(n);if(o)for(const s of o.listeners)s.onError(e);r.queries.delete(n)}function _O(i){i.ku.forEach(n=>{n.next()})}class yO{constructor(n,e,r){this.query=n,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(n){if(!this.options.includeMetadataChanges){const r=[];for(const o of n.docChanges)3!==o.type&&r.push(o);n=new Pb(n.query,n.docs,n.oldDocs,r,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0,n.hasCachedResults)}let e=!1;return this.Fu?this.Lu(n)&&(this.Ou.next(n),e=!0):this.qu(n,this.onlineState)&&(this.Uu(n),e=!0),this.Bu=n,e}onError(n){this.Ou.error(n)}Mu(n){this.onlineState=n;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,n)&&(this.Uu(this.Bu),e=!0),e}qu(n,e){return!n.fromCache||(!this.options.Ku||!("Offline"!==e))&&(!n.docs.isEmpty()||n.hasCachedResults||"Offline"===e)}Lu(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(n){n=Pb.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache,n.hasCachedResults),this.Fu=!0,this.Ou.next(n)}}class R5{constructor(n,e){this.Gu=n,this.byteLength=e}Qu(){return"metadata"in this.Gu}}class PU{constructor(n){this.serializer=n}rr(n){return Qd(this.serializer,n)}ur(n){return n.metadata.exists?k2(this.serializer,n.document,!1):Wi.newNoDocument(this.rr(n.metadata.name),this.cr(n.metadata.readTime))}cr(n){return eo(n)}}class P5{constructor(n,e,r){this.ju=n,this.localStore=e,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=OU(n)}zu(n){this.progress.bytesLoaded+=n.byteLength;let e=this.progress.documentsLoaded;if(n.Gu.namedQuery)this.queries.push(n.Gu.namedQuery);else if(n.Gu.documentMetadata){this.documents.push({metadata:n.Gu.documentMetadata}),n.Gu.documentMetadata.exists||++e;const r=jn.fromString(n.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else n.Gu.document&&(this.documents[this.documents.length-1].document=n.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(n){const e=new Map,r=new PU(this.serializer);for(const o of n)if(o.metadata.queries){const s=r.rr(o.metadata.name);for(const c of o.metadata.queries){const h=(e.get(c)||b()).add(s);e.set(c,h)}}return e}complete(){var n=this;return(0,De.Z)(function*(){const e=yield function a5(i,n,e,r){return VP.apply(this,arguments)}(n.localStore,new PU(n.serializer),n.documents,n.ju.id),r=n.Wu(n.documents);for(const o of n.queries)yield l5(n.localStore,o,r.get(o.name));return n.progress.taskState="Success",{progress:n.progress,Hu:n.collectionGroups,Ju:e}})()}}function OU(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class NU{constructor(n){this.key=n}}class FU{constructor(n){this.key=n}}class LU{constructor(n,e){this.query=n,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=b(),this.mutatedKeys=b(),this.tc=hP(n),this.ec=new Rb(this.tc)}get nc(){return this.Yu}sc(n,e){const r=e?e.ic:new RU,o=e?e.ec:this.ec;let s=e?e.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,_="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(n.inorderTraversal((w,I)=>{const A=o.get(w),P=yb(this.query,I)?I:null,B=!!A&&this.mutatedKeys.has(A.key),Y=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let ee=!1;A&&P?A.data.isEqual(P.data)?B!==Y&&(r.track({type:3,doc:P}),ee=!0):this.rc(A,P)||(r.track({type:2,doc:P}),ee=!0,(p&&this.tc(P,p)>0||_&&this.tc(P,_)<0)&&(h=!0)):!A&&P?(r.track({type:0,doc:P}),ee=!0):A&&!P&&(r.track({type:1,doc:A}),ee=!0,(p||_)&&(h=!0)),ee&&(P?(c=c.add(P),s=Y?s.add(w):s.delete(w)):(c=c.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{ec:c,ic:r,zi:h,mutatedKeys:s}}rc(n,e){return n.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(n,e,r){const o=this.ec;this.ec=n.ec,this.mutatedKeys=n.mutatedKeys;const s=n.ic.xu();s.sort((_,w)=>function(I,A){const P=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St()}};return P(I)-P(A)}(_.type,w.type)||this.tc(_.doc,w.doc)),this.oc(r);const c=e?this.uc():[],h=0===this.Zu.size&&this.current?1:0,p=h!==this.Xu;return this.Xu=h,0!==s.length||p?{snapshot:new Pb(this.query,n.ec,o,s,n.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({ec:this.ec,ic:new RU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(n){return!this.Yu.has(n)&&!!this.ec.has(n)&&!this.ec.get(n).hasLocalMutations}oc(n){n&&(n.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),n.modifiedDocuments.forEach(e=>{}),n.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=n.current)}uc(){if(!this.current)return[];const n=this.Zu;this.Zu=b(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const e=[];return n.forEach(r=>{this.Zu.has(r)||e.push(new FU(r))}),this.Zu.forEach(r=>{n.has(r)||e.push(new NU(r))}),e}hc(n){this.Yu=n.ir,this.Zu=b();const e=this.sc(n.documents);return this.applyChanges(e,!0)}lc(){return Pb.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class O5{constructor(n,e,r){this.query=n,this.targetId=e,this.view=r}}class N5{constructor(n){this.key=n,this.fc=!1}}class F5{constructor(n,e,r,o,s,c){this.localStore=n,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Kd(h=>uP(h),_b),this._c=new Map,this.mc=new Set,this.gc=new Mi(vt.comparator),this.yc=new Map,this.Ic=new RP,this.Tc={},this.Ec=new Map,this.Ac=E_.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function L5(i,n){return vO.apply(this,arguments)}function vO(){return vO=(0,De.Z)(function*(i,n){const e=zO(i);let r,o;const s=e.wc.get(n);if(s)r=s.targetId,e.sharedClientState.addLocalQueryTarget(r),o=s.view.lc();else{const c=yield Ib(e.localStore,Ms(n)),h=e.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield bO(e,n,r,"current"===h,c.resumeToken),e.isPrimaryClient&&bA(e.remoteStore,c)}return o}),vO.apply(this,arguments)}function bO(i,n,e,r,o){return wO.apply(this,arguments)}function wO(){return wO=(0,De.Z)(function*(i,n,e,r,o){i.Rc=(I,A,P)=>{return(B=(0,De.Z)(function*(Y,ee,ve,Ae){let _e=ee.view.sc(ve);_e.zi&&(_e=yield pA(Y.localStore,ee.query,!1).then(({documents:et})=>ee.view.sc(et,_e)));const ke=Ae&&Ae.targetChanges.get(ee.targetId),ze=ee.view.applyChanges(_e,Y.isPrimaryClient,ke);return kO(Y,ee.targetId,ze.cc),ze.snapshot}),function(Y,ee,ve,Ae){return B.apply(this,arguments)})(i,I,A,P);var B};const s=yield pA(i.localStore,n,!0),c=new LU(n,s.ir),h=c.sc(s.documents),p=CE.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==i.onlineState,o),_=c.applyChanges(h,i.isPrimaryClient,p);kO(i,e,_.cc);const w=new O5(n,e,c);return i.wc.set(n,w),i._c.has(e)?i._c.get(e).push(n):i._c.set(e,[n]),_.snapshot}),wO.apply(this,arguments)}function U5(i,n){return xO.apply(this,arguments)}function xO(){return xO=(0,De.Z)(function*(i,n){const e=wt(i),r=e.wc.get(n),o=e._c.get(r.targetId);if(o.length>1)return e._c.set(r.targetId,o.filter(s=>!_b(s,n))),void e.wc.delete(n);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Tb(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),UE(e.remoteStore,r.targetId),Ob(e,r.targetId)}).catch($d))):(Ob(e,r.targetId),yield Tb(e.localStore,r.targetId,!0))}),xO.apply(this,arguments)}function EO(){return EO=(0,De.Z)(function*(i,n,e){const r=jO(i);try{const o=yield function(s,c){const h=wt(s),p=Gi.now(),_=c.reduce((A,P)=>A.add(P.key),b());let w,I;return h.persistence.runTransaction("Locally write mutations","readwrite",A=>{let P=Ws(),B=b();return h.Zi.getEntries(A,_).next(Y=>{P=Y,P.forEach((ee,ve)=>{ve.isValidDocument()||(B=B.add(ee))})}).next(()=>h.localDocuments.getOverlayedDocuments(A,P)).next(Y=>{w=Y;const ee=[];for(const ve of c){const Ae=fj(ve,w.get(ve.key).overlayedDocument);null!=Ae&&ee.push(new Bh(ve.key,Ae,hE(Ae.value.mapValue),Cr.exists(!0)))}return h.mutationQueue.addMutationBatch(A,p,ee,c)}).next(Y=>{I=Y;const ee=Y.applyToLocalDocumentSet(w,B);return h.documentOverlayCache.saveOverlays(A,Y.batchId,ee)})}).then(()=>({batchId:I.batchId,changes:a(w)}))}(r.localStore,n);r.sharedClientState.addPendingMutation(o.batchId),function(s,c,h){let p=s.Tc[s.currentUser.toKey()];p||(p=new Mi(fn)),p=p.insert(c,h),s.Tc[s.currentUser.toKey()]=p}(r,o.batchId,e),yield Hh(r,o.changes),yield Ab(r.remoteStore)}catch(o){const s=kb(o,"Failed to persist write");e.reject(s)}}),EO.apply(this,arguments)}function UU(i,n){return CO.apply(this,arguments)}function CO(){return CO=(0,De.Z)(function*(i,n){const e=wt(i);try{const r=yield function o5(i,n){const e=wt(i),r=n.snapshotVersion;let o=e.Ji;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Zi.newChangeBuffer({trackRemovals:!0});o=e.Ji;const h=[];n.targetChanges.forEach((w,I)=>{const A=o.get(I);if(!A)return;h.push(e.Bs.removeMatchingKeys(s,w.removedDocuments,I).next(()=>e.Bs.addMatchingKeys(s,w.addedDocuments,I)));let P=A.withSequenceNumber(s.currentSequenceNumber);var B,Y,ee;null!==n.targetMismatches.get(I)?P=P.withResumeToken(Jr.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),o=o.insert(I,P),Y=P,ee=w,(0===(B=A).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0)&&h.push(e.Bs.updateTargetData(s,P))});let p=Ws(),_=b();if(n.documentUpdates.forEach(w=>{n.resolvedLimboDocuments.has(w)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(s,w))}),h.push(gU(s,c,n.documentUpdates).next(w=>{p=w.nr,_=w.sr})),!r.isEqual(zt.min())){const w=e.Bs.getLastRemoteSnapshotVersion(s).next(I=>e.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(w)}return ge.waitFor(h).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(e.Ji=o,s))}(e.localStore,n);n.targetChanges.forEach((o,s)=>{const c=e.yc.get(s);c&&(Vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.fc=!0:o.modifiedDocuments.size>0?Vt(c.fc):o.removedDocuments.size>0&&(Vt(c.fc),c.fc=!1))}),yield Hh(e,r,n)}catch(r){yield $d(r)}}),CO.apply(this,arguments)}function BU(i,n,e){const r=wt(i);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const o=[];r.wc.forEach((s,c)=>{const h=c.view.Mu(n);h.snapshot&&o.push(h.snapshot)}),function(s,c){const h=wt(s);h.onlineState=c;let p=!1;h.queries.forEach((_,w)=>{for(const I of w.listeners)I.Mu(c)&&(p=!0)}),p&&_O(h)}(r.eventManager,n),o.length&&r.dc.nu(o),r.onlineState=n,r.isPrimaryClient&&r.sharedClientState.setOnlineState(n)}}function V5(i,n,e){return DO.apply(this,arguments)}function DO(){return DO=(0,De.Z)(function*(i,n,e){const r=wt(i);r.sharedClientState.updateQueryState(n,"rejected",e);const o=r.yc.get(n),s=o&&o.key;if(s){let c=new Mi(vt.comparator);c=c.insert(s,Wi.newNoDocument(s,zt.min()));const h=b().add(s),p=new EE(zt.min(),new Map,new Mi(fn),c,h);yield UU(r,p),r.gc=r.gc.remove(s),r.yc.delete(n),RO(r)}else yield Tb(r.localStore,n,!1).then(()=>Ob(r,n,e)).catch($d)}),DO.apply(this,arguments)}function H5(i,n){return IO.apply(this,arguments)}function IO(){return IO=(0,De.Z)(function*(i,n){const e=wt(i),r=n.batch.batchId;try{const o=yield function r5(i,n){const e=wt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=n.batch.keys(),s=e.Zi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,_){const w=p.batch,I=w.keys();let A=ge.resolve();return I.forEach(P=>{A=A.next(()=>_.getEntry(h,P)).next(B=>{const Y=p.docVersions.get(P);Vt(null!==Y),B.version.compareTo(Y)<0&&(w.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),_.addEntry(B)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(h,w))}(e,r,n,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,n.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=b();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(n))).next(()=>e.localDocuments.getDocuments(r,o))})}(e.localStore,n);MO(e,r,null),AO(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield Hh(e,o)}catch(o){yield $d(o)}}),IO.apply(this,arguments)}function z5(i,n,e){return TO.apply(this,arguments)}function TO(){return TO=(0,De.Z)(function*(i,n,e){const r=wt(i);try{const o=yield function(s,c){const h=wt(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return h.mutationQueue.lookupMutationBatch(p,c).next(w=>(Vt(null!==w),_=w.keys(),h.mutationQueue.removeMutationBatch(p,w))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,_,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>h.localDocuments.getDocuments(p,_))})}(r.localStore,n);MO(r,n,e),AO(r,n),r.sharedClientState.updateMutationState(n,"rejected",e),yield Hh(r,o)}catch(o){yield $d(o)}}),TO.apply(this,arguments)}function SO(){return SO=(0,De.Z)(function*(i,n){const e=wt(i);Xm(e.remoteStore)||Qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=wt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===r)return void n.resolve();const o=e.Ec.get(r)||[];o.push(n),e.Ec.set(r,o)}catch(r){const o=kb(r,"Initialization of waitForPendingWrites() operation failed");n.reject(o)}}),SO.apply(this,arguments)}function AO(i,n){(i.Ec.get(n)||[]).forEach(e=>{e.resolve()}),i.Ec.delete(n)}function MO(i,n,e){const r=wt(i);let o=r.Tc[r.currentUser.toKey()];if(o){const s=o.get(n);s&&(e?s.reject(e):s.resolve(),o=o.remove(n)),r.Tc[r.currentUser.toKey()]=o}}function Ob(i,n,e=null){i.sharedClientState.removeLocalQueryTarget(n);for(const r of i._c.get(n))i.wc.delete(r),e&&i.dc.Pc(r,e);i._c.delete(n),i.isPrimaryClient&&i.Ic.Is(n).forEach(r=>{i.Ic.containsKey(r)||VU(i,r)})}function VU(i,n){i.mc.delete(n.path.canonicalString());const e=i.gc.get(n);null!==e&&(UE(i.remoteStore,e),i.gc=i.gc.remove(n),i.yc.delete(e),RO(i))}function kO(i,n,e){for(const r of e)r instanceof NU?(i.Ic.addReference(r.key,n),$5(i,r)):r instanceof FU?(Qe("SyncEngine","Document no longer in limbo: "+r.key),i.Ic.removeReference(r.key,n),i.Ic.containsKey(r.key)||VU(i,r.key)):St()}function $5(i,n){const e=n.key,r=e.path.canonicalString();i.gc.get(e)||i.mc.has(r)||(Qe("SyncEngine","New document in limbo: "+e),i.mc.add(r),RO(i))}function RO(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const n=i.mc.values().next().value;i.mc.delete(n);const e=new vt(jn.fromString(n)),r=i.Ac.next();i.yc.set(r,new N5(e)),i.gc=i.gc.insert(e,r),bA(i.remoteStore,new Vh(Ms(p_(e.path)),r,"TargetPurposeLimboResolution",Ai.ct))}}function Hh(i,n,e){return PO.apply(this,arguments)}function PO(){return PO=(0,De.Z)(function*(i,n,e){const r=wt(i),o=[],s=[],c=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,p)=>{c.push(r.Rc(p,n,e).then(_=>{if((_||e)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_?.fromCache?"not-current":"current"),_){o.push(_);const w=LP.Li(p.targetId,_);s.push(w)}}))}),yield Promise.all(c),r.dc.nu(o),yield(h=(0,De.Z)(function*(p,_){const w=wt(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>ge.forEach(_,A=>ge.forEach(A.Fi,P=>w.persistence.referenceDelegate.addReference(I,A.targetId,P)).next(()=>ge.forEach(A.Bi,P=>w.persistence.referenceDelegate.removeReference(I,A.targetId,P)))))}catch(I){if(!Mh(I))throw I;Qe("LocalStore","Failed to update sequence numbers: "+I)}for(const I of _){const A=I.targetId;if(!I.fromCache){const P=w.Ji.get(A),Y=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);w.Ji=w.Ji.insert(A,Y)}}}),function(p,_){return h.apply(this,arguments)})(r.localStore,s))}),PO.apply(this,arguments)}function G5(i,n){return OO.apply(this,arguments)}function OO(){return OO=(0,De.Z)(function*(i,n){const e=wt(i);if(!e.currentUser.isEqual(n)){Qe("SyncEngine","User change. New user:",n.toKey());const r=yield mU(e.localStore,n);e.currentUser=n,(o=e).Ec.forEach(c=>{c.forEach(h=>{h.reject(new je(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),e.sharedClientState.handleUserChange(n,r.removedBatchIds,r.addedBatchIds),yield Hh(e,r.er)}var o}),OO.apply(this,arguments)}function W5(i,n){const e=wt(i),r=e.yc.get(n);if(r&&r.fc)return b().add(r.key);{let o=b();const s=e._c.get(n);if(!s)return o;for(const c of s){const h=e.wc.get(c);o=o.unionWith(h.view.nc)}return o}}function q5(i,n){return NO.apply(this,arguments)}function NO(){return NO=(0,De.Z)(function*(i,n){const e=wt(i),r=yield pA(e.localStore,n.query,!0),o=n.view.hc(r);return e.isPrimaryClient&&kO(e,n.targetId,o.cc),o}),NO.apply(this,arguments)}function Y5(i,n){return FO.apply(this,arguments)}function FO(){return FO=(0,De.Z)(function*(i,n){const e=wt(i);return yU(e.localStore,n).then(r=>Hh(e,r))}),FO.apply(this,arguments)}function Z5(i,n,e,r){return LO.apply(this,arguments)}function LO(){return LO=(0,De.Z)(function*(i,n,e,r){const o=wt(i),s=yield function(c,h){const p=wt(c),_=wt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>_.Sn(w,h).next(I=>I?p.localDocuments.getDocuments(w,I):ge.resolve(null)))}(o.localStore,n);var h;null!==s?("pending"===e?yield Ab(o.remoteStore):"acknowledged"===e||"rejected"===e?(MO(o,n,r||null),AO(o,n),h=n,wt(wt(o.localStore).mutationQueue).Cn(h)):St(),yield Hh(o,s)):Qe("SyncEngine","Cannot apply mutation batch with id: "+n)}),LO.apply(this,arguments)}function UO(){return UO=(0,De.Z)(function*(i,n){const e=wt(i);if(zO(e),jO(e),!0===n&&!0!==e.vc){const r=e.sharedClientState.getAllActiveQueryTargets(),o=yield HU(e,r.toArray());e.vc=!0,yield dO(e.remoteStore,!0);for(const s of o)bA(e.remoteStore,s)}else if(!1===n&&!1!==e.vc){const r=[];let o=Promise.resolve();e._c.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(Ob(e,c),Tb(e.localStore,c,!0))),UE(e.remoteStore,c)}),yield o,yield HU(e,r),function(s){const c=wt(s);c.yc.forEach((h,p)=>{UE(c.remoteStore,p)}),c.Ic.Ts(),c.yc=new Map,c.gc=new Mi(vt.comparator)}(e),e.vc=!1,yield dO(e.remoteStore,!1)}}),UO.apply(this,arguments)}function HU(i,n,e){return BO.apply(this,arguments)}function BO(){return BO=(0,De.Z)(function*(i,n,e){const r=wt(i),o=[],s=[];for(const c of n){let h;const p=r._c.get(c);if(p&&0!==p.length){h=yield Ib(r.localStore,Ms(p[0]));for(const _ of p){const w=r.wc.get(_),I=yield q5(r,w);I.snapshot&&s.push(I.snapshot)}}else{const _=yield _U(r.localStore,c);h=yield Ib(r.localStore,_),yield bO(r,zU(_),c,!1,h.resumeToken)}o.push(h)}return r.dc.nu(s),o}),BO.apply(this,arguments)}function zU(i){return gE(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Q5(i){const n=wt(i);return wt(wt(n.localStore).persistence).$i()}function X5(i,n,e,r){return VO.apply(this,arguments)}function VO(){return VO=(0,De.Z)(function*(i,n,e,r){const o=wt(i);if(o.vc)return void Qe("SyncEngine","Ignoring unexpected query state notification.");const s=o._c.get(n);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield yU(o.localStore,XS(s[0])),h=EE.createSynthesizedRemoteEventForCurrentChange(n,"current"===e,Jr.EMPTY_BYTE_STRING);yield Hh(o,c,h);break}case"rejected":yield Tb(o.localStore,n,!0),Ob(o,n,r);break;default:St()}}),VO.apply(this,arguments)}function J5(i,n,e){return HO.apply(this,arguments)}function HO(){return HO=(0,De.Z)(function*(i,n,e){const r=zO(i);if(r.vc){for(const o of n){if(r._c.has(o)){Qe("SyncEngine","Adding an already active target "+o);continue}const s=yield _U(r.localStore,o),c=yield Ib(r.localStore,s);yield bO(r,zU(s),c.targetId,!1,c.resumeToken),bA(r.remoteStore,c)}for(const o of e)r._c.has(o)&&(yield Tb(r.localStore,o,!1).then(()=>{UE(r.remoteStore,o),Ob(r,o)}).catch($d))}}),HO.apply(this,arguments)}function zO(i){const n=wt(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=UU.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=W5.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=V5.bind(null,n),n.dc.nu=M5.bind(null,n.eventManager),n.dc.Pc=k5.bind(null,n.eventManager),n}function jO(i){const n=wt(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=H5.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=z5.bind(null,n),n}class BE{constructor(){this.synchronizeTabs=!1}initialize(n){var e=this;return(0,De.Z)(function*(){e.serializer=FE(n.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(n),e.persistence=e.createPersistence(n),yield e.persistence.start(),e.localStore=e.createLocalStore(n),e.gcScheduler=e.createGarbageCollectionScheduler(n,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(n,e.localStore)})()}createGarbageCollectionScheduler(n,e){return null}createIndexBackfillerScheduler(n,e){return null}createLocalStore(n){return fU(this.persistence,new hU,n.initialUser,this.serializer)}createPersistence(n){return new PP(hA.zs,this.serializer)}createSharedClientState(n){return new xU}terminate(){var n=this;return(0,De.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class $O extends BE{constructor(n,e,r){super(),this.Vc=n,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(n){var e=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield e().call(r,n),yield r.Vc.initialize(r,n),yield jO(r.Vc.syncEngine),yield Ab(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(n){return fU(this.persistence,new hU,n.initialUser,this.serializer)}createGarbageCollectionScheduler(n,e){return new iU(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue,e)}createIndexBackfillerScheduler(n,e){const r=new r2(e,this.persistence);return new qR(n.asyncQueue,r)}createPersistence(n){const e=FP(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new NP(this.synchronizeTabs,e,n.clientId,r,n.asyncQueue,CU(),vA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(n){return new xU}}class jU extends $O{constructor(n,e){super(n,e,!1),this.Vc=n,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(n){var e=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield e().call(r,n);const o=r.Vc.syncEngine;r.sharedClientState instanceof GP&&(r.sharedClientState.syncEngine={jr:Z5.bind(null,o),zr:X5.bind(null,o),Wr:J5.bind(null,o),$i:Q5.bind(null,o),Qr:Y5.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,De.Z)(function*(c){yield function K5(i,n){return UO.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}createSharedClientState(n){const e=CU();if(!GP.D(e))throw new je(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FP(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new GP(e,n.asyncQueue,r,n.clientId,n.initialUser)}}class Nb{initialize(n,e){var r=this;return(0,De.Z)(function*(){r.localStore||(r.localStore=n.localStore,r.sharedClientState=n.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!n.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>BU(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=G5.bind(null,r.syncEngine),yield dO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(n){return new A5}createDatastore(n){const e=FE(n.databaseInfo.databaseId),r=new h5(n.databaseInfo);return new p5(n.authCredentials,n.appCheckCredentials,r,e)}createRemoteStore(n){return e=this.localStore,r=this.datastore,o=n.asyncQueue,s=h=>BU(this.syncEngine,h,0),c=EU.D()?new EU:new c5,new y5(e,r,o,s,c);var e,r,o,s,c}createSyncEngine(n,e){return function(r,o,s,c,h,p,_){const w=new F5(r,o,s,c,h,p);return _&&(w.vc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,e)}terminate(){return(n=(0,De.Z)(function*(e){const r=wt(e);Qe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Sb(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(e){return n.apply(this,arguments)})(this.remoteStore);var n}}function $U(i,n=10240){let e=0;return{read:()=>(0,De.Z)(function*(){if(e<i.byteLength){const r={value:i.slice(e,e+n),done:!1};return e+=n,r}return{done:!0}})(),cancel:()=>(0,De.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class xA{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Sc(this.observer.next,n)}error(n){this.observer.error?this.Sc(this.observer.error,n):xr("Uncaught Error in snapshot listener:",n.toString())}Dc(){this.muted=!0}Sc(n,e){this.muted||setTimeout(()=>{this.muted||n(e)},0)}}class n${constructor(n,e){this.Cc=n,this.serializer=e,this.metadata=new $r,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var n=this;return(0,De.Z)(function*(){return n.metadata.promise})()}bc(){var n=this;return(0,De.Z)(function*(){return yield n.getMetadata(),n.Nc()})()}Nc(){var n=this;return(0,De.Z)(function*(){const e=yield n.kc();if(null===e)return null;const r=n.xc.decode(e),o=Number(r);isNaN(o)&&n.Mc(`length string (${r}) is not valid number`);const s=yield n.$c(o);return new R5(JSON.parse(s),e.length+o)})()}Oc(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}kc(){var n=this;return(0,De.Z)(function*(){for(;n.Oc()<0&&!(yield n.Fc()););if(0===n.buffer.length)return null;const e=n.Oc();e<0&&n.Mc("Reached the end of bundle when a length string is expected.");const r=n.buffer.slice(0,e);return n.buffer=n.buffer.slice(e),r})()}$c(n){var e=this;return(0,De.Z)(function*(){for(;e.buffer.length<n;)(yield e.Fc())&&e.Mc("Reached the end of bundle when more is expected.");const r=e.xc.decode(e.buffer.slice(0,n));return e.buffer=e.buffer.slice(n),r})()}Mc(n){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${n}`)}Fc(){var n=this;return(0,De.Z)(function*(){const e=yield n.Cc.read();if(!e.done){const r=new Uint8Array(n.buffer.length+e.value.length);r.set(n.buffer),r.set(e.value,n.buffer.length),n.buffer=r}return e.done})()}}class i${constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var e=this;return(0,De.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new je(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,De.Z)(function*(s,c){const h=wt(s),p=IE(h.serializer)+"/documents",_={documents:c.map(P=>DE(h.serializer,P))},w=yield h.vo("BatchGetDocuments",p,_,c.length),I=new Map;w.forEach(P=>{const B=function Ej(i,n){return"found"in n?function(e,r){Vt(!!r.found);const o=Qd(e,r.found.name),s=eo(r.found.updateTime),c=r.found.createTime?eo(r.found.createTime):zt.min(),h=new Go({mapValue:{fields:r.found.fields}});return Wi.newFoundDocument(o,s,c,h)}(i,n):"missing"in n?function(e,r){Vt(!!r.missing),Vt(!!r.readTime);const o=Qd(e,r.missing),s=eo(r.readTime);return Wi.newNoDocument(o,s)}(i,n):St()}(h.serializer,P);I.set(B.key.toString(),B)});const A=[];return c.forEach(P=>{const B=I.get(P.toString());Vt(!!B),A.push(B)}),A}),function(s,c){return o.apply(this,arguments)})(e.datastore,n);var o;return r.forEach(o=>e.recordVersion(o)),r})()}set(n,e){this.write(e.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,e){try{this.write(e.toMutation(n,this.preconditionForUpdate(n)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(n.toString())}delete(n){this.write(new wb(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,De.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const e=n.readVersions;var r;n.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,o)=>{const s=vt.fromPath(o);n.mutations.push(new mP(s,n.precondition(s)))}),yield(r=(0,De.Z)(function*(o,s){const c=wt(o),h=IE(c.serializer)+"/documents",p={writes:s.map(_=>TE(c.serializer,_))};yield c.Io("Commit",h,p)}),function(o,s){return r.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let e;if(n.isFoundDocument())e=n.version;else{if(!n.isNoDocument())throw St();e=zt.min()}const r=this.readVersions.get(n.key.toString());if(r){if(!e.isEqual(r))throw new je(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),e)}precondition(n){const e=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&e?e.isEqual(zt.min())?Cr.exists(!1):Cr.updateTime(e):Cr.none()}preconditionForUpdate(n){const e=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&e){if(e.isEqual(zt.min()))throw new je(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(e)}return Cr.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class r${constructor(n,e,r,o,s){this.asyncQueue=n,this.datastore=e,this.options=r,this.updateFunction=o,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new qP(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var n=this;this.qo.No((0,De.Z)(function*(){const e=new i$(n.datastore),r=n.qc(e);r&&r.then(o=>{n.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{n.deferred.resolve(o)}).catch(s=>{n.Uc(s)}))}).catch(o=>{n.Uc(o)})}))}qc(n){try{const e=this.updateFunction(n);return!c_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(n){this.Bc>0&&this.Kc(n)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(n)}Kc(n){if("FirebaseError"===n.name){const e=n.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!g2(e)}return!1}}class o${constructor(n,e,r,o){var s=this;this.authCredentials=n,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=To.UNAUTHENTICATED,this.clientId=qx.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,De.Z)(function*(h){Qe("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Qe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var n=this;return(0,De.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,authCredentials:n.authCredentials,appCheckCredentials:n.appCheckCredentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.authCredentialListener=n}setAppCheckTokenChangeListener(n){this.appCheckCredentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new je(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const e=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{n._onlineComponents&&(yield n._onlineComponents.terminate()),n._offlineComponents&&(yield n._offlineComponents.terminate()),n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),e.resolve()}catch(r){const o=kb(r,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}function EA(i,n){return GO.apply(this,arguments)}function GO(){return GO=(0,De.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),Qe("FirestoreClient","Initializing OfflineComponentProvider");const e=yield i.getConfiguration();yield n.initialize(e);let r=e.initialUser;i.setCredentialChangeListener(function(){var o=(0,De.Z)(function*(s){r.isEqual(s)||(yield mU(n.localStore,s),r=s)});return function(s){return o.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=n}),GO.apply(this,arguments)}function WO(i,n){return qO.apply(this,arguments)}function qO(){return qO=(0,De.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const e=yield YO(i);Qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(e,r),i.setCredentialChangeListener(o=>kU(n.remoteStore,o)),i.setAppCheckTokenChangeListener((o,s)=>kU(n.remoteStore,s)),i._onlineComponents=n}),qO.apply(this,arguments)}function GU(i){return"FirebaseError"===i.name?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function YO(i){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,De.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Qe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield EA(i,i._uninitializedComponentsProvider._offline)}catch(n){const e=n;if(!GU(e))throw e;As("Error using user provided cache. Falling back to memory cache: "+e),yield EA(i,new BE)}}else Qe("FirestoreClient","Using default OfflineComponentProvider"),yield EA(i,new BE);return i._offlineComponents}),ZO.apply(this,arguments)}function CA(i){return KO.apply(this,arguments)}function KO(){return KO=(0,De.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Qe("FirestoreClient","Using user provided OnlineComponentProvider"),yield WO(i,i._uninitializedComponentsProvider._online)):(Qe("FirestoreClient","Using default OnlineComponentProvider"),yield WO(i,new Nb))),i._onlineComponents}),KO.apply(this,arguments)}function WU(i){return YO(i).then(n=>n.persistence)}function DA(i){return YO(i).then(n=>n.localStore)}function qU(i){return CA(i).then(n=>n.remoteStore)}function QO(i){return CA(i).then(n=>n.syncEngine)}function Fb(i){return XO.apply(this,arguments)}function XO(){return XO=(0,De.Z)(function*(i){const n=yield CA(i),e=n.eventManager;return e.onListen=L5.bind(null,n.syncEngine),e.onUnlisten=U5.bind(null,n.syncEngine),e}),XO.apply(this,arguments)}function ZU(i,n,e={}){const r=new $r;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(o,s,c,h,p){const _=new xA({next:I=>{s.enqueueAndForget(()=>pO(o,w));const A=I.docs.has(c);!A&&I.fromCache?p.reject(new je(be.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&I.fromCache&&h&&"server"===h.source?p.reject(new je(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new yO(p_(c.path),_,{includeMetadataChanges:!0,Ku:!0});return fO(o,w)}(yield Fb(i),i.asyncQueue,n,e,r)})),r.promise}function KU(i,n,e={}){const r=new $r;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(o,s,c,h,p){const _=new xA({next:I=>{s.enqueueAndForget(()=>pO(o,w)),I.fromCache&&"server"===h.source?p.reject(new je(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new yO(c,_,{includeMetadataChanges:!0,Ku:!0});return fO(o,w)}(yield Fb(i),i.asyncQueue,n,e,r)})),r.promise}function QU(i){const n={};return void 0!==i.timeoutSeconds&&(n.timeoutSeconds=i.timeoutSeconds),n}const XU=new Map;function JO(i,n,e){if(!e)throw new je(be.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function JU(i,n,e,r){if(!0===n&&!0===r)throw new je(be.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function eB(i){if(!vt.isDocumentKey(i))throw new je(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function tB(i){if(vt.isDocumentKey(i))throw new je(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function IA(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(e=i).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var e;return"function"==typeof i?"a function":St()}function Un(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new je(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=IA(i);throw new je(be.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${e}`)}}return i}function nB(i,n){if(n<=0)throw new je(be.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class iB{constructor(n){var e,r;if(void 0===n.host){if(void 0!==n.ssl)throw new je(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(e=n.ssl)||void 0===e||e;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.cache=n.localCache,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new je(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}JU("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==n.experimentalAutoDetectLongPolling&&!n.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=QU(null!==(r=n.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new je(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new je(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new je(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!n.useFetchStreams}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===n.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class VE{constructor(n,e,r,o){this._authCredentials=n,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new je(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new je(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iB(n),void 0!==n.credentials&&(this._authCredentials=function(e){if(!e)return new yS;switch(e.type){case"firstParty":return new bS(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new je(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const e=XU.get(n);e&&(Qe("ComponentProvider","Removing Datastore"),XU.delete(n),e.terminate())}(this),Promise.resolve()}}function rB(i,n,e,r={}){var o;const s=(i=Un(i,VE))._getSettings(),c=`${n}:${e}`;if("firestore.googleapis.com"!==s.host&&s.host!==c&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:c,ssl:!1})),r.mockUserToken){let h,p;if("string"==typeof r.mockUserToken)h=r.mockUserToken,p=To.MOCK_USER;else{h=(0,j.Sg)(r.mockUserToken,null===(o=i._app)||void 0===o?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new je(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new To(_)}i._authCredentials=new vS(new _S(h,p))}}class mr{constructor(n,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xd(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new mr(this.firestore,n,this._key)}}class ds{constructor(n,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=n}withConverter(n){return new ds(this.firestore,n,this._query)}}class Xd extends ds{constructor(n,e,r){super(n,e,p_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new mr(this.firestore,null,new vt(n))}withConverter(n){return new Xd(this.firestore,n,this._path)}}function oB(i,n,...e){if(i=(0,j.m9)(i),JO("collection","path",n),i instanceof VE){const r=jn.fromString(n,...e);return tB(r),new Xd(i,null,r)}{if(!(i instanceof mr||i instanceof Xd))throw new je(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(jn.fromString(n,...e));return tB(r),new Xd(i.firestore,null,r)}}function TA(i,n,...e){if(i=(0,j.m9)(i),1===arguments.length&&(n=qx.A()),JO("doc","path",n),i instanceof VE){const r=jn.fromString(n,...e);return eB(r),new mr(i,null,new vt(r))}{if(!(i instanceof mr||i instanceof Xd))throw new je(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(jn.fromString(n,...e));return eB(r),new mr(i.firestore,i instanceof Xd?i.converter:null,new vt(r))}}function sB(i,n){return i=(0,j.m9)(i),n=(0,j.m9)(n),(i instanceof mr||i instanceof Xd)&&(n instanceof mr||n instanceof Xd)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function eN(i,n){return i=(0,j.m9)(i),n=(0,j.m9)(n),i instanceof ds&&n instanceof ds&&i.firestore===n.firestore&&_b(i._query,n._query)&&i.converter===n.converter}class p${constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new qP(this,"async_queue_retry"),this.Xc=()=>{const e=vA();e&&Qe("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const n=vA();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Zc(),this.ta(n)}enterRestrictedMode(n){if(!this.jc){this.jc=!0,this.Jc=n||!1;const e=vA();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(n){if(this.Zc(),this.jc)return new Promise(()=>{});const e=new $r;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(n().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.Qc.push(n),this.ea()))}ea(){var n=this;return(0,De.Z)(function*(){if(0!==n.Qc.length){try{yield n.Qc[0](),n.Qc.shift(),n.qo.reset()}catch(e){if(!Mh(e))throw e;Qe("AsyncQueue","Operation failed with retryable error: "+e)}n.Qc.length>0&&n.qo.No(()=>n.ea())}})()}ta(n){const e=this.Gc.then(()=>(this.Hc=!0,n().catch(r=>{throw this.Wc=r,this.Hc=!1,xr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=e,e}enqueueAfterDelay(n,e,r){this.Zc(),this.Yc.indexOf(n)>-1&&(e=0);const o=hO.createAndSchedule(this,n,e,r,s=>this.na(s));return this.zc.push(o),o}Zc(){this.Wc&&St()}verifyOperationInProgress(){}sa(){var n=this;return(0,De.Z)(function*(){let e;do{e=n.Gc,yield e}while(e!==n.Gc)})()}ia(n){for(const e of this.zc)if(e.timerId===n)return!0;return!1}ra(n){return this.sa().then(()=>{this.zc.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.zc)if(e.skipDelay(),"all"!==n&&e.timerId===n)break;return this.sa()})}oa(n){this.Yc.push(n)}na(n){const e=this.zc.indexOf(n);this.zc.splice(e,1)}}function tN(i){return function(n,e){if("object"!=typeof n||null===n)return!1;const r=n;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(i)}class g${constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,e,r){this._progressObserver={next:n,error:e,complete:r}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,e){return this._taskCompletionResolver.promise.then(n,e)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class pr extends VE{constructor(n,e,r,o){super(n,e,r,o),this.type="firestore",this._queue=new p$,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||aB(this),this._firestoreClient.terminate()}}function y$(i,n){const e="object"==typeof i?i:(0,vi.getApp)(),r="string"==typeof i?i:n||"(default)",o=(0,vi._getProvider)(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const s=(0,j.P0)("firestore");s&&rB(o,...s)}return o}function to(i){return i._firestoreClient||aB(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function aB(i){var n,e,r;const o=i._freezeSettings(),s=(h=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new BS(i._databaseId,h,i._persistenceKey,(_=o).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,QU(_.experimentalLongPollingOptions),_.useFetchStreams));var h,_;i._firestoreClient=new o$(i._authCredentials,i._appCheckCredentials,i._queue,s),null!==(e=o.cache)&&void 0!==e&&e._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function lB(i,n,e){const r=new $r;return i.asyncQueue.enqueue((0,De.Z)(function*(){try{yield EA(i,e),yield WO(i,n),r.resolve()}catch(o){const s=o;if(!GU(s))throw s;As("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function cB(i){if(i._initialized||i._terminated)throw new je(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jd{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Jd(Jr.fromBase64String(n))}catch(e){throw new je(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(n){return new Jd(Jr.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class zh{constructor(...n){for(let e=0;e<n.length;++e)if(0===n[e].length)throw new je(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class D_{constructor(n){this._methodName=n}}class SA{constructor(n,e){if(!isFinite(n)||n<-90||n>90)throw new je(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(e)||e<-180||e>180)throw new je(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=n,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return fn(this._lat,n._lat)||fn(this._long,n._long)}}const S$=/^__.*__$/;class A${constructor(n,e,r){this.data=n,this.fieldMask=e,this.fieldTransforms=r}toMutation(n,e){return null!==this.fieldMask?new Bh(n,this.data,this.fieldMask,e,this.fieldTransforms):new bb(n,this.data,e,this.fieldTransforms)}}class dB{constructor(n,e,r){this.data=n,this.fieldMask=e,this.fieldTransforms=r}toMutation(n,e){return new Bh(n,this.data,this.fieldMask,e,this.fieldTransforms)}}function uB(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St()}}class AA{constructor(n,e,r,o,s,c){this.settings=n,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(n){return new AA(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(n){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(n),o=this.aa({path:r,la:!1});return o.fa(n),o}da(n){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(n),o=this.aa({path:r,la:!1});return o.ua(),o}wa(n){return this.aa({path:void 0,la:!0})}_a(n){return RA(n,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(n){return void 0!==this.fieldMask.find(e=>n.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>n.isPrefixOf(e.field))}ua(){if(this.path)for(let n=0;n<this.path.length;n++)this.fa(this.path.get(n))}fa(n){if(0===n.length)throw this._a("Document fields must not be empty");if(uB(this.ca)&&S$.test(n))throw this._a('Document fields cannot begin and end with "__"')}}class M${constructor(n,e,r){this.databaseId=n,this.ignoreUndefinedProperties=e,this.serializer=r||FE(n)}ya(n,e,r,o=!1){return new AA({ca:n,methodName:e,ga:r,path:Rr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function I_(i){const n=i._freezeSettings(),e=FE(i._databaseId);return new M$(i._databaseId,!!n.ignoreUndefinedProperties,e)}function MA(i,n,e,r,o,s={}){const c=i.ya(s.merge||s.mergeFields?2:0,n,e,o);oN("Data must be an object, but it was:",c,r);const h=mB(r,c);let p,_;if(s.merge)p=new cs(c.fieldMask),_=c.fieldTransforms;else if(s.mergeFields){const w=[];for(const I of s.mergeFields){const A=jE(n,I,e);if(!c.contains(A))throw new je(be.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);gB(w,A)||w.push(A)}p=new cs(w),_=c.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,_=c.fieldTransforms;return new A$(new Go(h),p,_)}class zE extends D_{_toFieldTransform(n){if(2!==n.ca)throw n._a(1===n.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof zE}}function hB(i,n,e){return new AA({ca:3,ga:n.settings.ga,methodName:i._methodName,la:e},n.databaseId,n.serializer,n.ignoreUndefinedProperties)}class nN extends D_{_toFieldTransform(n){return new __(n.path,new mt)}isEqual(n){return n instanceof nN}}class k$ extends D_{constructor(n,e){super(n),this.pa=e}_toFieldTransform(n){const e=hB(this,n,!0),r=this.pa.map(s=>T_(s,e)),o=new kt(r);return new __(n.path,o)}isEqual(n){return this===n}}class R$ extends D_{constructor(n,e){super(n),this.pa=e}_toFieldTransform(n){const e=hB(this,n,!0),r=this.pa.map(s=>T_(s,e)),o=new Xt(r);return new __(n.path,o)}isEqual(n){return this===n}}class P$ extends D_{constructor(n,e){super(n),this.Ia=e}_toFieldTransform(n){const e=new In(n.serializer,W(n.serializer,this.Ia));return new __(n.path,e)}isEqual(n){return this===n}}function iN(i,n,e,r){const o=i.ya(1,n,e);oN("Data must be an object, but it was:",o,r);const s=[],c=Go.empty();jl(r,(p,_)=>{const w=kA(n,p,e);_=(0,j.m9)(_);const I=o.da(w);if(_ instanceof zE)s.push(w);else{const A=T_(_,I);null!=A&&(s.push(w),c.set(w,A))}});const h=new cs(s);return new dB(c,h,o.fieldTransforms)}function rN(i,n,e,r,o,s){const c=i.ya(1,n,e),h=[jE(n,r,e)],p=[o];if(s.length%2!=0)throw new je(be.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)h.push(jE(n,s[A])),p.push(s[A+1]);const _=[],w=Go.empty();for(let A=h.length-1;A>=0;--A)if(!gB(_,h[A])){const P=h[A];let B=p[A];B=(0,j.m9)(B);const Y=c.da(P);if(B instanceof zE)_.push(P);else{const ee=T_(B,Y);null!=ee&&(_.push(P),w.set(P,ee))}}const I=new cs(_);return new dB(w,I,c.fieldTransforms)}function fB(i,n,e,r=!1){return T_(e,i.ya(r?4:3,n))}function T_(i,n){if(pB(i=(0,j.m9)(i)))return oN("Unsupported field value:",n,i),mB(i,n);if(i instanceof D_)return function(e,r){if(!uB(r.ca))throw r._a(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${e._methodName}() is not currently supported inside arrays`);const o=e._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.la&&4!==n.ca)throw n._a("Nested arrays are not supported");return function(e,r){const o=[];let s=0;for(const c of e){let h=T_(c,r.wa(s));null==h&&(h={nullValue:"NULL_VALUE"}),o.push(h),s++}return{arrayValue:{values:o}}}(i,n)}return function(e,r){if(null===(e=(0,j.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return W(r.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const o=Gi.fromDate(e);return{timestampValue:xb(r.serializer,o)}}if(e instanceof Gi){const o=new Gi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xb(r.serializer,o)}}if(e instanceof SA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Jd)return{bytesValue:I2(r.serializer,e._byteString)};if(e instanceof mr){const o=r.databaseId,s=e.firestore._databaseId;if(!s.isEqual(o))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wP(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r._a(`Unsupported field value: ${IA(e)}`)}(i,n)}function mB(i,n){const e={};return sE(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):jl(i,(r,o)=>{const s=T_(o,n.ha(r));null!=s&&(e[r]=s)}),{mapValue:{fields:e}}}function pB(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Gi||i instanceof SA||i instanceof Jd||i instanceof mr||i instanceof D_)}function oN(i,n,e){if(!pB(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=IA(e);throw n._a("an object"===r?i+" a custom object":i+" "+r)}var r}function jE(i,n,e){if((n=(0,j.m9)(n))instanceof zh)return n._internalPath;if("string"==typeof n)return kA(i,n);throw RA("Field path arguments must be of type string or ",i,!1,void 0,e)}const O$=new RegExp("[~\\*/\\[\\]]");function kA(i,n,e){if(n.search(O$)>=0)throw RA(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new zh(...n.split("."))._internalPath}catch{throw RA(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function RA(i,n,e,r,o){const s=r&&!r.isEmpty(),c=void 0!==o;let h=`Function ${n}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new je(be.INVALID_ARGUMENT,h+i+p)}function gB(i,n){return i.some(e=>e.isEqual(n))}class $E{constructor(n,e,r,o,s){this._firestore=n,this._userDataWriter=e,this._key=r,this._document=o,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new N$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const e=this._document.data.field(PA("DocumentSnapshot.get",n));if(null!==e)return this._userDataWriter.convertValue(e)}}}class N$ extends $E{data(){return super.data()}}function PA(i,n){return"string"==typeof n?kA(i,n):n instanceof zh?n._internalPath:n._delegate._internalPath}function _B(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new je(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sN{}class GE extends sN{}function ep(i,n,...e){let r=[];n instanceof sN&&r.push(n),r=r.concat(e),function(o){const s=o.filter(h=>h instanceof Lb).length,c=o.filter(h=>h instanceof WE).length;if(s>1||s>0&&c>0)throw new je(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)i=o._apply(i);return i}class WE extends GE{constructor(n,e,r){super(),this._field=n,this._op=e,this._value=r,this.type="where"}static _create(n,e,r){return new WE(n,e,r)}_apply(n){const e=this._parse(n);return wB(n._query,e),new ds(n.firestore,n.converter,vE(n._query,e))}_parse(n){const e=I_(n.firestore);return function(o,s,c,h,p,_,w){let I;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new je(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){bB(w,_);const A=[];for(const P of w)A.push(vB(h,o,P));I={arrayValue:{values:A}}}else I=vB(h,o,w)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||bB(w,_),I=fB(c,"where",w,"in"===_||"not-in"===_);return On.create(p,_,I)}(n._query,0,e,n.firestore._databaseId,this._field,this._op,this._value)}}class Lb extends sN{constructor(n,e){super(),this.type=n,this._queryConstraints=e}static _create(n,e){return new Lb(n,e)}_parse(n){const e=this._queryConstraints.map(r=>r._parse(n)).filter(r=>r.getFilters().length>0);return 1===e.length?e[0]:ui.create(e,this._getOperator())}_apply(n){const e=this._parse(n);return 0===e.getFilters().length?n:(function(r,o){let s=r;const c=o.getFlattenedFilters();for(const h of c)wB(s,h),s=vE(s,h)}(n._query,e),new ds(n.firestore,n.converter,vE(n._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class aN extends GE{constructor(n,e){super(),this._field=n,this._direction=e,this.type="orderBy"}static _create(n,e){return new aN(n,e)}_apply(n){const e=function(r,o,s){if(null!==r.startAt)throw new je(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new je(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Lh(o,s);return function(h,p){if(null===Wm(h)){const _=_E(h);null!==_&&xB(0,_,p.field)}}(r,c),c}(n._query,this._field,this._direction);return new ds(n.firestore,n.converter,function(r,o){const s=r.explicitOrderBy.concat([o]);return new $l(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(n._query,e))}}class OA extends GE{constructor(n,e,r){super(),this.type=n,this._limit=e,this._limitType=r}static _create(n,e,r){return new OA(n,e,r)}_apply(n){return new ds(n.firestore,n.converter,bE(n._query,this._limit,this._limitType))}}class NA extends GE{constructor(n,e,r){super(),this.type=n,this._docOrFields=e,this._inclusive=r}static _create(n,e,r){return new NA(n,e,r)}_apply(n){const e=yB(n,this.type,this._docOrFields,this._inclusive);return new ds(n.firestore,n.converter,(o=e,new $l((r=n._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class FA extends GE{constructor(n,e,r){super(),this.type=n,this._docOrFields=e,this._inclusive=r}static _create(n,e,r){return new FA(n,e,r)}_apply(n){const e=yB(n,this.type,this._docOrFields,this._inclusive);return new ds(n.firestore,n.converter,(o=e,new $l((r=n._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function yB(i,n,e,r){if(e[0]=(0,j.m9)(e[0]),e[0]instanceof $E)return function(o,s,c,h,p){if(!h)throw new je(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const w of qm(o))if(w.field.isKeyField())_.push(Fh(s,h.key));else{const I=h.data.field(w.field);if(lE(I))throw new je(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const A=w.field.canonicalString();throw new je(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}_.push(I)}return new Yd(_,p)}(i._query,i.firestore._databaseId,n,e[0]._document,r);{const o=I_(i.firestore);return function(s,c,h,p,_,w){const I=s.explicitOrderBy;if(_.length>I.length)throw new je(be.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let P=0;P<_.length;P++){const B=_[P];if(I[P].field.isKeyField()){if("string"!=typeof B)throw new je(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!yE(s)&&-1!==B.indexOf("/"))throw new je(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const Y=s.path.child(jn.fromString(B));if(!vt.isDocumentKey(Y))throw new je(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Y}' is not because it contains an odd number of segments.`);const ee=new vt(Y);A.push(Fh(c,ee))}else{const Y=fB(h,p,B);A.push(Y)}}return new Yd(A,w)}(i._query,i.firestore._databaseId,o,n,e,r)}}function vB(i,n,e){if("string"==typeof(e=(0,j.m9)(e))){if(""===e)throw new je(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yE(n)&&-1!==e.indexOf("/"))throw new je(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=n.path.child(jn.fromString(e));if(!vt.isDocumentKey(r))throw new je(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fh(i,new vt(r))}if(e instanceof mr)return Fh(i,e._key);throw new je(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${IA(e)}.`)}function bB(i,n){if(!Array.isArray(i)||0===i.length)throw new je(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`)}function wB(i,n){if(n.isInequality()){const r=_E(i),o=n.field;if(null!==r&&!r.isEqual(o))throw new je(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const s=Wm(i);null!==s&&xB(0,o,s)}const e=function(r,o){for(const s of r)for(const c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(i.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(n.op));if(null!==e)throw new je(be.INVALID_ARGUMENT,e===n.op?`Invalid query. You cannot use more than one '${n.op.toString()}' filter.`:`Invalid query. You cannot use '${n.op.toString()}' filters with '${e.toString()}' filters.`)}function xB(i,n,e){if(!e.isEqual(n))throw new je(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class lN{convertValue(n,e="none"){switch(Oh(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Er(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,e);case 5:return n.stringValue;case 6:return this.convertBytes(Fc(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,e);case 10:return this.convertObject(n.mapValue,e);default:throw St()}}convertObject(n,e){return this.convertObjectMap(n.fields,e)}convertObjectMap(n,e="none"){const r={};return jl(n,(o,s)=>{r[o]=this.convertValue(s,e)}),r}convertGeoPoint(n){return new SA(Er(n.latitude),Er(n.longitude))}convertArray(n,e){return(n.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(n,e){switch(e){case"previous":const r=cE(n);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(lb(n));default:return null}}convertTimestamp(n){const e=Nc(n);return new Gi(e.seconds,e.nanos)}convertDocumentKey(n,e){const r=jn.fromString(n);Vt(F2(r));const o=new Wd(r.get(1),r.get(3)),s=new vt(r.popFirst(5));return o.isEqual(e)||xr(`Document ${s} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function LA(i,n,e){let r;return r=i?e&&(e.merge||e.mergeFields)?i.toFirestore(n,e):i.toFirestore(n):n,r}class $$ extends lN{constructor(n){super(),this.firestore=n}convertBytes(n){return new Jd(n)}convertReference(n){const e=this.convertDocumentKey(n,this.firestore._databaseId);return new mr(this.firestore,null,e)}}class S_{constructor(n,e){this.hasPendingWrites=n,this.fromCache=e}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class jh extends $E{constructor(n,e,r,o,s,c){super(n,e,r,o,c),this._firestore=n,this._firestoreImpl=n,this.metadata=s}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const e=new qE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,e={}){if(this._document){const r=this._document.data.field(PA("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class qE extends jh{data(n={}){return super.data(n)}}class tp{constructor(n,e,r,o){this._firestore=n,this._userDataWriter=e,this._snapshot=o,this.metadata=new S_(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const n=[];return this.forEach(e=>n.push(e)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,e){this._snapshot.docs.forEach(r=>{n.call(e,new qE(this._firestore,this._userDataWriter,r.key,r,new S_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const e=!!n.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new je(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new qE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new S_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const h=new qE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new S_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),_=s.indexOf(c.doc.key)),{type:W$(c.type),doc:h,oldIndex:p,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function W$(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St()}}function CB(i,n){return i instanceof jh&&n instanceof jh?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof tp&&n instanceof tp&&i._firestore===n._firestore&&eN(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}class np extends lN{constructor(n){super(),this.firestore=n}convertBytes(n){return new Jd(n)}convertReference(n){const e=this.convertDocumentKey(n,this.firestore._databaseId);return new mr(this.firestore,null,e)}}function DB(i,n,e){i=Un(i,mr);const r=Un(i.firestore,pr),o=LA(i.converter,n,e);return Ub(r,[MA(I_(r),"setDoc",i._key,o,null!==i.converter,e).toMutation(i._key,Cr.none())])}function IB(i,n,e,...r){i=Un(i,mr);const o=Un(i.firestore,pr),s=I_(o);let c;return c="string"==typeof(n=(0,j.m9)(n))||n instanceof zh?rN(s,"updateDoc",i._key,n,e,r):iN(s,"updateDoc",i._key,n),Ub(o,[c.toMutation(i._key,Cr.exists(!0))])}function TB(i,...n){var e,r,o;i=(0,j.m9)(i);let s={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||tN(n[c])||(s=n[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(tN(n[c])){const I=n[c];n[c]=null===(e=I.next)||void 0===e?void 0:e.bind(I),n[c+1]=null===(r=I.error)||void 0===r?void 0:r.bind(I),n[c+2]=null===(o=I.complete)||void 0===o?void 0:o.bind(I)}let p,_,w;if(i instanceof mr)_=Un(i.firestore,pr),w=p_(i._key.path),p={next:I=>{n[c]&&n[c](cN(_,i,I))},error:n[c+1],complete:n[c+2]};else{const I=Un(i,ds);_=Un(I.firestore,pr),w=I._query;const A=new np(_);p={next:P=>{n[c]&&n[c](new tp(_,A,I,P))},error:n[c+1],complete:n[c+2]},_B(i._query)}return function(I,A,P,B){const Y=new xA(B),ee=new yO(A,Y,P);return I.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return fO(yield Fb(I),ee)})),()=>{Y.Dc(),I.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return pO(yield Fb(I),ee)}))}}(to(_),w,h,p)}function Ub(i,n){return function(e,r){const o=new $r;return e.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function B5(i,n,e){return EO.apply(this,arguments)}(yield QO(e),r,o)})),o.promise}(to(i),n)}function cN(i,n,e){const r=e.docs.get(n._key),o=new np(i);return new jh(i,o,n._key,r,new S_(e.hasPendingWrites,e.fromCache),n.converter)}const d8={maxAttempts:5};class SB{constructor(n,e){this._firestore=n,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=I_(n)}set(n,e,r){this._verifyNotCommitted();const o=ip(n,this._firestore),s=LA(o.converter,e,r),c=MA(this._dataReader,"WriteBatch.set",o._key,s,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,Cr.none())),this}update(n,e,r,...o){this._verifyNotCommitted();const s=ip(n,this._firestore);let c;return c="string"==typeof(e=(0,j.m9)(e))||e instanceof zh?rN(this._dataReader,"WriteBatch.update",s._key,e,r,o):iN(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,Cr.exists(!0))),this}delete(n){this._verifyNotCommitted();const e=ip(n,this._firestore);return this._mutations=this._mutations.concat(new wb(e._key,Cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ip(i,n){if((i=(0,j.m9)(i)).firestore!==n)throw new je(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class u8 extends class{constructor(n,e){this._firestore=n,this._transaction=e,this._dataReader=I_(n)}get(n){const e=ip(n,this._firestore),r=new $$(this._firestore);return this._transaction.lookup([e._key]).then(o=>{if(!o||1!==o.length)return St();const s=o[0];if(s.isFoundDocument())return new $E(this._firestore,r,s.key,s,e.converter);if(s.isNoDocument())return new $E(this._firestore,r,e._key,null,e.converter);throw St()})}set(n,e,r){const o=ip(n,this._firestore),s=LA(o.converter,e,r),c=MA(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(n,e,r,...o){const s=ip(n,this._firestore);let c;return c="string"==typeof(e=(0,j.m9)(e))||e instanceof zh?rN(this._dataReader,"Transaction.update",s._key,e,r,o):iN(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(n){const e=ip(n,this._firestore);return this._transaction.delete(e._key),this}}{constructor(n,e){super(n,e),this._firestore=n}get(n){const e=ip(n,this._firestore),r=new np(this._firestore);return super.get(n).then(o=>new jh(this._firestore,r,e._key,o._document,new S_(!1,!1),e.converter))}}function dN(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new je("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function MB(){if(typeof Uint8Array>"u")throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function kB(){if(!function nP(){return typeof atob<"u"}())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,n=!0){Ah=vi.SDK_VERSION,(0,vi._registerComponent)(new tr.wA("firestore",(e,{instanceIdentifier:r,options:o})=>{const s=e.getProvider("app").getImmediate(),c=new pr(new zR(e.getProvider("auth-internal")),new xS(e.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new je(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wd(h.options.projectId,p)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),(0,vi.registerVersion)(nb,"3.13.0",i),(0,vi.registerVersion)(nb,"3.13.0","esm2017")}();class YE{constructor(n){this._delegate=n}static fromBase64String(n){return kB(),new YE(Jd.fromBase64String(n))}static fromUint8Array(n){return MB(),new YE(Jd.fromUint8Array(n))}toBase64(){return kB(),this._delegate.toBase64()}toUint8Array(){return MB(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uN(i){return function b8(i,n){if("object"!=typeof i||null===i)return!1;const e=i;for(const r of n)if(r in e&&"function"==typeof e[r])return!0;return!1}(i,["next","error","complete"])}class w8{enableIndexedDbPersistence(n,e){return function v$(i,n){cB(i=Un(i,pr));const e=to(i);if(e._uninitializedComponentsProvider)throw new je(be.FAILED_PRECONDITION,"SDK cache is already specified.");As("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=i._freezeSettings(),o=new Nb;return lB(e,o,new $O(o,r.cacheSizeBytes,n?.forceOwnership))}(n._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(n){return function b$(i){cB(i=Un(i,pr));const n=to(i);if(n._uninitializedComponentsProvider)throw new je(be.FAILED_PRECONDITION,"SDK cache is already specified.");As("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=i._freezeSettings(),r=new Nb;return lB(n,r,new jU(r,e.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function w$(i){if(i._initialized&&!i._terminated)throw new je(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new $r;return i._queue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{yield(e=(0,De.Z)(function*(r){if(!Qa.D())return Promise.resolve();const o=r+"main";yield Qa.delete(o)}),function(r){return e.apply(this,arguments)})(FP(i._databaseId,i._persistenceKey)),n.resolve()}catch(e){n.reject(e)}var e})),n.promise}(n._delegate)}}class RB{constructor(n,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},n instanceof Wd||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const e=this._delegate._getSettings();!n.merge&&e.host!==n.host&&As("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},e),n)).merge,this._delegate._setSettings(n)}useEmulator(n,e,r={}){rB(this._delegate,n,e,r)}enableNetwork(){return function E$(i){return function s$(i){return i.asyncQueue.enqueue((0,De.Z)(function*(){const n=yield WU(i),e=yield qU(i);return n.setNetworkEnabled(!0),function(r){const o=wt(r);return o.vu.delete(0),LE(o)}(e)}))}(to(i=Un(i,pr)))}(this._delegate)}disableNetwork(){return function C$(i){return function a$(i){return i.asyncQueue.enqueue((0,De.Z)(function*(){const n=yield WU(i),e=yield qU(i);return n.setNetworkEnabled(!1),(r=(0,De.Z)(function*(o){const s=wt(o);s.vu.add(0),yield Sb(s),s.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(e);var r}))}(to(i=Un(i,pr)))}(this._delegate)}enablePersistence(n){let e=!1,r=!1;return n&&(e=!!n.synchronizeTabs,r=!!n.experimentalForceOwningTab,JU("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function x$(i){return function(n){const e=new $r;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function j5(i,n){return SO.apply(this,arguments)}(yield QO(n),e)})),e.promise}(to(i=Un(i,pr)))}(this._delegate)}onSnapshotsInSync(n){return function t8(i,n){return function d$(i,n){const e=new xA(n);return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Fb(i),o=e,wt(r).ku.add(o),void o.next();var r,o})),()=>{e.Dc(),i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Fb(i),o=e,void wt(r).ku.delete(o);var r,o}))}}(to(i=Un(i,pr)),tN(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new Bb(this,oB(this._delegate,n))}catch(e){throw qs(e,"collection()","Firestore.collection()")}}doc(n){try{return new Gl(this,TA(this._delegate,n))}catch(e){throw qs(e,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new Ys(this,function m$(i,n){if(i=Un(i,VE),JO("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new je(be.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ds(i,null,(e=n,new $l(jn.emptyPath(),e)));var e}(this._delegate,n))}catch(e){throw qs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function h8(i,n,e){i=Un(i,pr);const r=Object.assign(Object.assign({},d8),e);return function(o){if(o.maxAttempts<1)throw new je(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,c){const h=new $r;return o.asyncQueue.enqueueAndForget((0,De.Z)(function*(){const p=yield function YU(i){return CA(i).then(n=>n.datastore)}(o);new r$(o.asyncQueue,p,c,s,h).run()})),h.promise}(to(i),o=>n(new u8(i,o)),r)}(this._delegate,e=>n(new PB(this,e)))}batch(){return to(this._delegate),new OB(new SB(this._delegate,n=>Ub(this._delegate,n)))}loadBundle(n){return function D$(i,n){const e=to(i=Un(i,pr)),r=new g$;return function u$(i,n,e,r){const o=function(s,c){let h;return h="string"==typeof s?y2().encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return $U(p,_);if(p instanceof ArrayBuffer)return $U(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new n$(p,c);var p}(e,FE(n));i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){!function e$(i,n,e){const r=wt(i);var o;(o=(0,De.Z)(function*(s,c,h){try{const p=yield c.getMetadata();if(yield function(A,P){const B=wt(A),Y=eo(P.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",ee=>B.qs.getBundleMetadata(ee,P.id)).then(ee=>!!ee&&ee.createTime.compareTo(Y)>=0)}(s.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(A=p).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);h._updateProgress(OU(p));const _=new P5(p,s.localStore,c.serializer);let w=yield c.bc();for(;w;){const A=yield _.zu(w);A&&h._updateProgress(A),w=yield c.bc()}const I=yield _.complete();return yield Hh(s,I.Ju,void 0),yield function(A,P){const B=wt(A);return B.persistence.runTransaction("Save bundle","readwrite",Y=>B.qs.saveBundleMetadata(Y,P))}(s.localStore,p),h._completeWith(I.progress),Promise.resolve(I.Hu)}catch(p){return As("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var A}),function(s,c,h){return o.apply(this,arguments)})(r,n,e).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield QO(i),o,r)}))}(e,i._databaseId,n,r),r}(this._delegate,n)}namedQuery(n){return function I$(i,n){return function h$(i,n){return i.asyncQueue.enqueue((0,De.Z)(function*(){return function(e,r){const o=wt(e);return o.persistence.runTransaction("Get named query","readonly",s=>o.qs.getNamedQuery(s,r))}(yield DA(i),n)}))}(to(i=Un(i,pr)),n).then(e=>e?new ds(i,null,e.query):null)}(this._delegate,n).then(e=>e?new Ys(this,e):null)}}class UA extends lN{constructor(n){super(),this.firestore=n}convertBytes(n){return new YE(new Jd(n))}convertReference(n){const e=this.convertDocumentKey(n,this.firestore._databaseId);return Gl.forKey(e,this.firestore,null)}}class PB{constructor(n,e){this._firestore=n,this._delegate=e,this._userDataWriter=new UA(n)}get(n){const e=M_(n);return this._delegate.get(e).then(r=>new ZE(this._firestore,new jh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(n,e,r){const o=M_(n);return r?(dN("Transaction.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(n,e,r,...o){const s=M_(n);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,r,...o),this}delete(n){const e=M_(n);return this._delegate.delete(e),this}}class OB{constructor(n){this._delegate=n}set(n,e,r){const o=M_(n);return r?(dN("WriteBatch.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(n,e,r,...o){const s=M_(n);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,r,...o),this}delete(n){const e=M_(n);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class A_{constructor(n,e,r){this._firestore=n,this._userDataWriter=e,this._delegate=r}fromFirestore(n,e){const r=new qE(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new KE(this._firestore,r),e??{})}toFirestore(n,e){return e?this._delegate.toFirestore(n,e):this._delegate.toFirestore(n)}static getInstance(n,e){const r=A_.INSTANCES;let o=r.get(n);o||(o=new WeakMap,r.set(n,o));let s=o.get(e);return s||(s=new A_(n,new UA(n),e),o.set(e,s)),s}}A_.INSTANCES=new WeakMap;class Gl{constructor(n,e){this.firestore=n,this._delegate=e,this._userDataWriter=new UA(n)}static forPath(n,e,r){if(n.length%2!=0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new Gl(e,new mr(e._delegate,r,new vt(n)))}static forKey(n,e,r){return new Gl(e,new mr(e._delegate,r,n))}get id(){return this._delegate.id}get parent(){return new Bb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new Bb(this.firestore,oB(this._delegate,n))}catch(e){throw qs(e,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,j.m9)(n))instanceof mr&&sB(this._delegate,n)}set(n,e){e=dN("DocumentReference.set",e);try{return e?DB(this._delegate,n,e):DB(this._delegate,n)}catch(r){throw qs(r,"setDoc()","DocumentReference.set()")}}update(n,e,...r){try{return 1===arguments.length?IB(this._delegate,n):IB(this._delegate,n,e,...r)}catch(o){throw qs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function J$(i){return Ub(Un(i.firestore,pr),[new wb(i._key,Cr.none())])}(this._delegate)}onSnapshot(...n){const e=NB(n),r=FB(n,o=>new ZE(this.firestore,new jh(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return TB(this._delegate,e,r)}get(n){let e;return e="cache"===n?.source?function Y$(i){i=Un(i,mr);const n=Un(i.firestore,pr),e=to(n),r=new np(n);return function l$(i,n){const e=new $r;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(o,s,c){try{const h=yield function(p,_){const w=wt(p);return w.persistence.runTransaction("read document","readonly",I=>w.localDocuments.getDocument(I,_))}(o,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new je(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=kb(h,`Failed to get document '${s} from cache`);c.reject(p)}}),function(o,s,c){return r.apply(this,arguments)})(yield DA(i),n,e);var r})),e.promise}(e,i._key).then(o=>new jh(n,r,i._key,o,new S_(null!==o&&o.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===n?.source?function Z$(i){i=Un(i,mr);const n=Un(i.firestore,pr);return ZU(to(n),i._key,{source:"server"}).then(e=>cN(n,i,e))}(this._delegate):function q$(i){i=Un(i,mr);const n=Un(i.firestore,pr);return ZU(to(n),i._key).then(e=>cN(n,i,e))}(this._delegate),e.then(r=>new ZE(this.firestore,new jh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(n){return new Gl(this.firestore,this._delegate.withConverter(n?A_.getInstance(this.firestore,n):null))}}function qs(i,n,e){return i.message=i.message.replace(n,e),i}function NB(i){for(const n of i)if("object"==typeof n&&!uN(n))return n;return{}}function FB(i,n){var e,r;let o;return o=uN(i[0])?i[0]:uN(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:s=>{o.next&&o.next(n(s))},error:null===(e=o.error)||void 0===e?void 0:e.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class ZE{constructor(n,e){this._firestore=n,this._delegate=e}get ref(){return new Gl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,e){return this._delegate.get(n,e)}isEqual(n){return CB(this._delegate,n._delegate)}}class KE extends ZE{data(n){const e=this._delegate.data(n);return function HR(i,n){i||St()}(void 0!==e),e}}class Ys{constructor(n,e){this.firestore=n,this._delegate=e,this._userDataWriter=new UA(n)}where(n,e,r){try{return new Ys(this.firestore,ep(this._delegate,function F$(i,n,e){const r=n,o=PA("where",i);return WE._create(o,r,e)}(n,e,r)))}catch(o){throw qs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,e){try{return new Ys(this.firestore,ep(this._delegate,function L$(i,n="asc"){const e=n,r=PA("orderBy",i);return aN._create(r,e)}(n,e)))}catch(r){throw qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new Ys(this.firestore,ep(this._delegate,function U$(i){return nB("limit",i),OA._create("limit",i,"F")}(n)))}catch(e){throw qs(e,"limit()","Query.limit()")}}limitToLast(n){try{return new Ys(this.firestore,ep(this._delegate,function B$(i){return nB("limitToLast",i),OA._create("limitToLast",i,"L")}(n)))}catch(e){throw qs(e,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new Ys(this.firestore,ep(this._delegate,function V$(...i){return NA._create("startAt",i,!0)}(...n)))}catch(e){throw qs(e,"startAt()","Query.startAt()")}}startAfter(...n){try{return new Ys(this.firestore,ep(this._delegate,function H$(...i){return NA._create("startAfter",i,!1)}(...n)))}catch(e){throw qs(e,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new Ys(this.firestore,ep(this._delegate,function z$(...i){return FA._create("endBefore",i,!1)}(...n)))}catch(e){throw qs(e,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new Ys(this.firestore,ep(this._delegate,function j$(...i){return FA._create("endAt",i,!0)}(...n)))}catch(e){throw qs(e,"endAt()","Query.endAt()")}}isEqual(n){return eN(this._delegate,n._delegate)}get(n){let e;return e="cache"===n?.source?function Q$(i){i=Un(i,ds);const n=Un(i.firestore,pr),e=to(n),r=new np(n);return function c$(i,n){const e=new $r;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(o,s,c){try{const h=yield pA(o,s,!0),p=new LU(s,h.ir),_=p.sc(h.documents),w=p.applyChanges(_,!1);c.resolve(w.snapshot)}catch(h){const p=kb(h,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(o,s,c){return r.apply(this,arguments)})(yield DA(i),n,e);var r})),e.promise}(e,i._query).then(o=>new tp(n,r,i,o))}(this._delegate):"server"===n?.source?function X$(i){i=Un(i,ds);const n=Un(i.firestore,pr),e=to(n),r=new np(n);return KU(e,i._query,{source:"server"}).then(o=>new tp(n,r,i,o))}(this._delegate):function K$(i){i=Un(i,ds);const n=Un(i.firestore,pr),e=to(n),r=new np(n);return _B(i._query),KU(e,i._query).then(o=>new tp(n,r,i,o))}(this._delegate),e.then(r=>new hN(this.firestore,new tp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...n){const e=NB(n),r=FB(n,o=>new hN(this.firestore,new tp(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return TB(this._delegate,e,r)}withConverter(n){return new Ys(this.firestore,this._delegate.withConverter(n?A_.getInstance(this.firestore,n):null))}}class E8{constructor(n,e){this._firestore=n,this._delegate=e}get type(){return this._delegate.type}get doc(){return new KE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hN{constructor(n,e){this._firestore=n,this._delegate=e}get query(){return new Ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new KE(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(e=>new E8(this._firestore,e))}forEach(n,e){this._delegate.forEach(r=>{n.call(e,new KE(this._firestore,r))})}isEqual(n){return CB(this._delegate,n._delegate)}}class Bb extends Ys{constructor(n,e){super(n,e),this.firestore=n,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new Gl(this.firestore,n):null}doc(n){try{return new Gl(this.firestore,void 0===n?TA(this._delegate):TA(this._delegate,n))}catch(e){throw qs(e,"doc()","CollectionReference.doc()")}}add(n){return function e8(i,n){const e=Un(i.firestore,pr),r=TA(i),o=LA(i.converter,n);return Ub(e,[MA(I_(i.firestore),"addDoc",r._key,o,null!==i.converter,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}(this._delegate,n).then(e=>new Gl(this.firestore,e))}isEqual(n){return sB(this._delegate,n._delegate)}withConverter(n){return new Bb(this.firestore,this._delegate.withConverter(n?A_.getInstance(this.firestore,n):null))}}function M_(i){return Un(i,mr)}class fN{constructor(...n){this._delegate=new zh(...n)}static documentId(){return new fN(Rr.keyField().canonicalString())}isEqual(n){return(n=(0,j.m9)(n))instanceof zh&&this._delegate._internalPath.isEqual(n._internalPath)}}class k_{constructor(n){this._delegate=n}static serverTimestamp(){const n=function m8(){return new nN("serverTimestamp")}();return n._methodName="FieldValue.serverTimestamp",new k_(n)}static delete(){const n=function f8(){return new zE("deleteField")}();return n._methodName="FieldValue.delete",new k_(n)}static arrayUnion(...n){const e=function p8(...i){return new k$("arrayUnion",i)}(...n);return e._methodName="FieldValue.arrayUnion",new k_(e)}static arrayRemove(...n){const e=function g8(...i){return new R$("arrayRemove",i)}(...n);return e._methodName="FieldValue.arrayRemove",new k_(e)}static increment(n){const e=function _8(i){return new P$("increment",i)}(n);return e._methodName="FieldValue.increment",new k_(e)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const C8={Firestore:RB,GeoPoint:SA,Timestamp:Gi,Blob:YE,Transaction:PB,WriteBatch:OB,DocumentReference:Gl,DocumentSnapshot:ZE,Query:Ys,QueryDocumentSnapshot:KE,QuerySnapshot:hN,CollectionReference:Bb,FieldPath:fN,FieldValue:k_,setLogLevel:function x8(i){!function Fm(i){jd.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function LB(i,n){return function T8(i,n=Uf.z){return new Nn.y(e=>{let r;return null!=n?n.schedule(()=>{r=i.onSnapshot({includeMetadataChanges:!0},e)}):r=i.onSnapshot({includeMetadataChanges:!0},e),()=>{r?.()}})}(i,n)}function mN(i,n){return LB(i,n).pipe((0,gt.U)(e=>({payload:e,type:"query"})))}function BA(i,n){return mN(i,n).pipe(kc(void 0),ix(),(0,gt.U)(([e,r])=>{const o=r.payload.docChanges(),s=o.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=o.find(w=>w.doc.ref.isEqual(c.ref)),_=e?.payload.docs.find(w=>w.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function UB(i,n,e){return BA(i,e).pipe(Va((r,o)=>function A8(i,n,e){return n.forEach(r=>{e.indexOf(r.type)>-1&&(i=function M8(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return pN(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const e=i.slice();return e.splice(n.oldIndex,1),e.splice(n.newIndex,0,n),e}return pN(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return pN(i,n.oldIndex,1)}return i}(i,r))}),i}(r,o.map(s=>s.payload),n),[]),(0,Dd.x)(),(0,gt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function pN(i,n,e,...r){const o=i.slice();return o.splice(n,e,...r),o}function BB(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}!function I8(i){(function D8(i,n){i.INTERNAL.registerComponent(new tr.wA("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("firestore").getImmediate();return n(r,o)},"PUBLIC").setServiceProps(Object.assign({},C8)))})(i,(n,e)=>new RB(n,e,new w8)),i.registerVersion("@firebase/firestore-compat","0.3.12")}(A0.Z);class VB{constructor(n,e,r){this.ref=n,this.query=e,this.afs=r}stateChanges(n){let e=BA(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(e=e.pipe((0,gt.U)(r=>r.filter(o=>n.indexOf(o.type)>-1)))),e.pipe(kc(void 0),ix(),Pn(([r,o])=>o.length>0||!r),(0,gt.U)(([r,o])=>o),sn.iC)}auditTrail(n){return this.stateChanges(n).pipe(Va((e,r)=>[...e,...r],[]))}snapshotChanges(n){const e=BB(n);return UB(this.query,e,this.afs.schedulers.outsideAngular).pipe(sn.iC)}valueChanges(n={}){return mN(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(e=>e.payload.docs.map(r=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data())),sn.iC)}get(n){return(0,Hn.D)(this.query.get(n)).pipe(sn.iC)}add(n){return this.ref.add(n)}doc(n){return new HB(this.ref.doc(n),this.afs)}}class HB{constructor(n,e){this.ref=n,this.afs=e}set(n,e){return this.ref.set(n,e)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,e){const r=this.ref.collection(n),{ref:o,query:s}=$B(r,e);return new VB(o,s,this.afs)}snapshotChanges(){return function S8(i,n){return LB(i,n).pipe(kc(void 0),ix(),(0,gt.U)(([e,r])=>r.exists?e?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(sn.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:e})=>n.idField?Object.assign(Object.assign({},e.data()),{[n.idField]:e.id}):e.data()))}get(n){return(0,Hn.D)(this.ref.get(n)).pipe(sn.iC)}}class k8{constructor(n,e){this.query=n,this.afs=e}stateChanges(n){return n&&0!==n.length?BA(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(e=>e.filter(r=>n.indexOf(r.type)>-1)),Pn(e=>e.length>0),sn.iC):BA(this.query,this.afs.schedulers.outsideAngular).pipe(sn.iC)}auditTrail(n){return this.stateChanges(n).pipe(Va((e,r)=>[...e,...r],[]))}snapshotChanges(n){const e=BB(n);return UB(this.query,e,this.afs.schedulers.outsideAngular).pipe(sn.iC)}valueChanges(n={}){return mN(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(o=>n.idField?Object.assign({[n.idField]:o.id},o.data()):o.data())),sn.iC)}get(n){return(0,Hn.D)(this.query.get(n)).pipe(sn.iC)}}const zB=new d.OlP("angularfire2.enableFirestorePersistence"),jB=new d.OlP("angularfire2.firestore.persistenceSettings"),R8=new d.OlP("angularfire2.firestore.settings"),P8=new d.OlP("angularfire2.firestore.use-emulator");function $B(i,n=(e=>e)){return{query:n(i),ref:i}}let GB=(()=>{class i{constructor(e,r,o,s,c,h,p,_,w,I,A,P,B,Y,ee,ve,Ae){this.schedulers=p;const _e=(0,Vn.on)(e,h,r),ke=w;I&&S0(_e,h,A,B,Y,ee,P,ve),[this.firestore,this.persistenceEnabled$]=(0,Vn.cc)(`${_e.name}.firestore`,"AngularFirestore",_e.name,()=>{const ze=h.runOutsideAngular(()=>_e.firestore());if(s&&ze.settings(s),ke&&ze.useEmulator(...ke),o&&!ts(c)){const et=()=>{try{return(0,Hn.D)(ze.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(it){return typeof console<"u"&&console.warn(it),(0,It.of)(!1)}};return[ze,h.runOutsideAngular(et)]}return[ze,(0,It.of)(!1)]},[s,ke,o])}collection(e,r){let o;o="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=$B(o,r),h=this.schedulers.ngZone.run(()=>s);return new VB(h,c,this)}collectionGroup(e,r){const o=r||(c=>c),s=this.firestore.collectionGroup(e);return new k8(o(s),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const o=this.schedulers.ngZone.run(()=>r);return new HB(o,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Vn.Dh),d.LFG(Vn.xv,8),d.LFG(zB,8),d.LFG(R8,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(sn.HU),d.LFG(jB,8),d.LFG(P8,8),d.LFG(Hp,8),d.LFG(D0,8),d.LFG(I0,8),d.LFG(Bp,8),d.LFG(Vp,8),d.LFG(T0,8),d.LFG(Ku,8),d.LFG(Lf,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),O8=(()=>{class i{constructor(){uy.Z.registerVersion("angularfire",sn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:i,providers:[{provide:zB,useValue:!0},{provide:jB,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[GB]}),i})();function QE(i,n=Uf.z){return(0,br.e)((e,r)=>{let o=null,s=null,c=null;const h=()=>{if(o){o.unsubscribe(),o=null;const _=s;s=null,r.next(_)}};function p(){const _=c+i,w=n.now();if(w<_)return o=this.schedule(void 0,_-w),void r.add(o);h()}e.subscribe((0,di.x)(r,_=>{s=_,c=n.now(),o||(o=n.schedule(p,i),r.add(o))},()=>{h(),r.complete()},void 0,()=>{s=o=null}))})}const WB="firebasestorage.googleapis.com",qB="storageBucket";class Pr extends j.ZR{constructor(n,e,r=0){super(gN(n),`Firebase Storage: ${e} (${gN(n)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pr.prototype)}get status(){return this.status_}set status(n){this.status_=n}_codeEquals(n){return gN(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var an=(()=>((an=an||{}).UNKNOWN="unknown",an.OBJECT_NOT_FOUND="object-not-found",an.BUCKET_NOT_FOUND="bucket-not-found",an.PROJECT_NOT_FOUND="project-not-found",an.QUOTA_EXCEEDED="quota-exceeded",an.UNAUTHENTICATED="unauthenticated",an.UNAUTHORIZED="unauthorized",an.UNAUTHORIZED_APP="unauthorized-app",an.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",an.INVALID_CHECKSUM="invalid-checksum",an.CANCELED="canceled",an.INVALID_EVENT_NAME="invalid-event-name",an.INVALID_URL="invalid-url",an.INVALID_DEFAULT_BUCKET="invalid-default-bucket",an.NO_DEFAULT_BUCKET="no-default-bucket",an.CANNOT_SLICE_BLOB="cannot-slice-blob",an.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",an.NO_DOWNLOAD_URL="no-download-url",an.INVALID_ARGUMENT="invalid-argument",an.INVALID_ARGUMENT_COUNT="invalid-argument-count",an.APP_DELETED="app-deleted",an.INVALID_ROOT_OPERATION="invalid-root-operation",an.INVALID_FORMAT="invalid-format",an.INTERNAL_ERROR="internal-error",an.UNSUPPORTED_ENVIRONMENT="unsupported-environment",an))();function gN(i){return"storage/"+i}function _N(){return new Pr(an.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function YB(){return new Pr(an.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZB(){return new Pr(an.CANCELED,"User canceled the upload/download.")}function KB(){return new Pr(an.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Vb(i){return new Pr(an.INVALID_ARGUMENT,i)}function QB(){return new Pr(an.APP_DELETED,"The Firebase app was deleted.")}function XB(i){return new Pr(an.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function XE(i,n){return new Pr(an.INVALID_FORMAT,"String does not match format '"+i+"': "+n)}function JE(i){throw new Pr(an.INTERNAL_ERROR,"Internal error: "+i)}class Ps{constructor(n,e){this.bucket=n,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,e){let r;try{r=Ps.makeFromUrl(n,e)}catch{return new Ps(n,"")}if(""===r.path)return r;throw function $8(i){return new Pr(an.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}(n)}static makeFromUrl(n,e){let r=null;const o="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+o+"(/(.*))?$","i");function _(ke){ke.path_=decodeURIComponent(ke.path)}const I=e.replace(/[.]/g,"\\."),_e=[{regex:h,indices:{bucket:1,path:3},postModify:function s(ke){"/"===ke.path.charAt(ke.path.length-1)&&(ke.path_=ke.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${e===WB?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let ke=0;ke<_e.length;ke++){const ze=_e[ke],et=ze.regex.exec(n);if(et){let Ft=et[ze.indices.path];Ft||(Ft=""),r=new Ps(et[ze.indices.bucket],Ft),ze.postModify(r);break}}if(null==r)throw function j8(i){return new Pr(an.INVALID_URL,"Invalid URL '"+i+"'.")}(n);return r}}class Z8{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function VA(i){return"string"==typeof i||i instanceof String}function JB(i){return yN()&&i instanceof Blob}function yN(){return typeof Blob<"u"&&!(0,j.UG)()}function vN(i,n,e,r){if(r<n)throw Vb(`Invalid value for '${i}'. Expected ${n} or greater.`);if(r>e)throw Vb(`Invalid value for '${i}'. Expected ${e} or less.`)}function $h(i,n,e){let r=n;return null==e&&(r=`https://${n}`),`${e}://${r}/v0${i}`}function eV(i){const n=encodeURIComponent;let e="?";for(const r in i)i.hasOwnProperty(r)&&(e=e+(n(r)+"=")+n(i[r])+"&");return e=e.slice(0,-1),e}var wa=(()=>((wa=wa||{})[wa.NO_ERROR=0]="NO_ERROR",wa[wa.NETWORK_ERROR=1]="NETWORK_ERROR",wa[wa.ABORT=2]="ABORT",wa))();function tV(i,n){const e=i>=500&&i<600,o=-1!==[408,429].indexOf(i),s=-1!==n.indexOf(i);return e||o||s}class tG{constructor(n,e,r,o,s,c,h,p,_,w,I,A=!0){this.url_=n,this.method_=e,this.headers_=r,this.body_=o,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=w,this.connectionFactory_=I,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,B)=>{this.resolve_=P,this.reject_=B,this.start_()})}start_(){const e=(r,o)=>{const s=this.resolve_,c=this.reject_,h=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function X8(i){return void 0!==i}(p)?s():s(p)}catch(p){c(p)}else if(null!==h){const p=_N();p.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,p):p)}else c(o.canceled?this.appDelete_?QB():ZB():YB())};this.canceled_?e(0,new HA(!1,null,!0)):this.backoffId_=function K8(i,n,e){let r=1,o=null,s=null,c=!1,h=0;function p(){return 2===h}let _=!1;function w(...ee){_||(_=!0,n.apply(null,ee))}function I(ee){o=setTimeout(()=>{o=null,i(P,p())},ee)}function A(){s&&clearTimeout(s)}function P(ee,...ve){if(_)return void A();if(ee)return A(),void w.call(null,ee,...ve);if(p()||c)return A(),void w.call(null,ee,...ve);let _e;r<64&&(r*=2),1===h?(h=2,_e=0):_e=1e3*(r+Math.random()),I(_e)}let B=!1;function Y(ee){B||(B=!0,A(),!_&&(null!==o?(ee||(h=2),clearTimeout(o),I(0)):ee||(h=1)))}return I(0),s=setTimeout(()=>{c=!0,Y(!0)},e),Y}((r,o)=>{if(o)return void r(!1,new HA(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===wa.NO_ERROR,p=s.getStatus();if(!h||tV(p,this.additionalRetryCodes_)&&this.retry){const w=s.getErrorCode()===wa.ABORT;return void r(!1,new HA(!1,null,w))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new HA(_,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function Q8(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class HA{constructor(n,e,r){this.wasSuccessCode=n,this.connection=e,this.canceled=!!r}}function lG(...i){const n=function aG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==n){const e=new n;for(let r=0;r<i.length;r++)e.append(i[r]);return e.getBlob()}if(yN())return new Blob(i);throw new Pr(an.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const tl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bN{constructor(n,e){this.data=n,this.contentType=e||null}}function wN(i,n){switch(i){case tl.RAW:return new bN(nV(n));case tl.BASE64:case tl.BASE64URL:return new bN(iV(i,n));case tl.DATA_URL:return new bN(function hG(i){const n=new rV(i);return n.base64?iV(tl.BASE64,n.rest):function uG(i){let n;try{n=decodeURIComponent(i)}catch{throw XE(tl.DATA_URL,"Malformed data URL.")}return nV(n)}(n.rest)}(n),function fG(i){return new rV(i).contentType}(n))}throw _N()}function nV(i){const n=[];for(let e=0;e<i.length;e++){let r=i.charCodeAt(e);r<=127?n.push(r):r<=2047?n.push(192|r>>6,128|63&r):55296==(64512&r)?e<i.length-1&&56320==(64512&i.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&i.charCodeAt(++e),n.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):n.push(239,191,189):56320==(64512&r)?n.push(239,191,189):n.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(n)}function iV(i,n){switch(i){case tl.BASE64:{const o=-1!==n.indexOf("-"),s=-1!==n.indexOf("_");if(o||s)throw XE(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case tl.BASE64URL:{const o=-1!==n.indexOf("+"),s=-1!==n.indexOf("/");if(o||s)throw XE(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function dG(i){if(typeof atob>"u")throw function Y8(i){return new Pr(an.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(i)}(n)}catch(o){throw o.message.includes("polyfill")?o:XE(i,"Invalid character found")}const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r}class rV{constructor(n){this.base64=!1,this.contentType=null;const e=n.match(/^data:([^,]+)?,/);if(null===e)throw XE(tl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function mG(i,n){return i.length>=n.length&&i.substring(i.length-n.length)===n}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=n.substring(n.indexOf(",")+1)}}class eu{constructor(n,e){let r=0,o="";JB(n)?(this.data_=n,r=n.size,o=n.type):n instanceof ArrayBuffer?(e?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),r=this.data_.length):n instanceof Uint8Array&&(e?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),r=n.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(n,e){if(JB(this.data_)){const o=function cG(i,n,e){return i.webkitSlice?i.webkitSlice(n,e):i.mozSlice?i.mozSlice(n,e):i.slice?i.slice(n,e):null}(this.data_,n,e);return null===o?null:new eu(o)}{const r=new Uint8Array(this.data_.buffer,n,e-n);return new eu(r,!0)}}static getBlob(...n){if(yN()){const e=n.map(r=>r instanceof eu?r.data_:r);return new eu(lG.apply(null,e))}{const e=n.map(c=>VA(c)?wN(tl.RAW,c).data:c.data_);let r=0;e.forEach(c=>{r+=c.byteLength});const o=new Uint8Array(r);let s=0;return e.forEach(c=>{for(let h=0;h<c.length;h++)o[s++]=c[h]}),new eu(o,!0)}}uploadData(){return this.data_}}function xN(i){let n;try{n=JSON.parse(i)}catch{return null}return function eG(i){return"object"==typeof i&&!Array.isArray(i)}(n)?n:null}function oV(i){const n=i.lastIndexOf("/",i.length-2);return-1===n?i:i.slice(n+1)}function _G(i,n){return n}class Zs{constructor(n,e,r,o){this.server=n,this.local=e||n,this.writable=!!r,this.xform=o||_G}}let zA=null;function eC(){if(zA)return zA;const i=[];i.push(new Zs("bucket")),i.push(new Zs("generation")),i.push(new Zs("metageneration")),i.push(new Zs("name","fullPath",!0));const e=new Zs("name");e.xform=function n(s,c){return function yG(i){return!VA(i)||i.length<2?i:oV(i)}(c)},i.push(e);const o=new Zs("size");return o.xform=function r(s,c){return void 0!==c?Number(c):c},i.push(o),i.push(new Zs("timeCreated")),i.push(new Zs("updated")),i.push(new Zs("md5Hash",null,!0)),i.push(new Zs("cacheControl",null,!0)),i.push(new Zs("contentDisposition",null,!0)),i.push(new Zs("contentEncoding",null,!0)),i.push(new Zs("contentLanguage",null,!0)),i.push(new Zs("contentType",null,!0)),i.push(new Zs("metadata","customMetadata",!0)),zA=i,zA}function sV(i,n,e){const r=xN(n);return null===r?null:function bG(i,n,e){const r={type:"file"},o=e.length;for(let s=0;s<o;s++){const c=e[s];r[c.local]=c.xform(r,n[c.server])}return function vG(i,n){Object.defineProperty(i,"ref",{get:function e(){const s=new Ps(i.bucket,i.fullPath);return n._makeStorageReference(s)}})}(r,i),r}(i,r,e)}function EN(i,n){const e={},r=n.length;for(let o=0;o<r;o++){const s=n[o];s.writable&&(e[s.server]=i[s.local])}return JSON.stringify(e)}const aV="prefixes",lV="items";class tu{constructor(n,e,r,o){this.url=n,this.method=e,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function nu(i){if(!i)throw _N()}function jA(i,n){return function e(r,o){const s=sV(i,o,n);return nu(null!==s),s}}function Hb(i){return function n(e,r){let o;return o=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function H8(){return new Pr(an.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function V8(){return new Pr(an.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function B8(i){return new Pr(an.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===e.getStatus()?function z8(i){return new Pr(an.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}(i.path):r,o.status=e.getStatus(),o.serverResponse=r.serverResponse,o}}function tC(i){const n=Hb(i);return function e(r,o){let s=n(r,o);return 404===r.getStatus()&&(s=function U8(i){return new Pr(an.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}(i.path)),s.serverResponse=o.serverResponse,s}}function cV(i,n,e){const o=$h(n.fullServerUrl(),i.host,i._protocol),c=i.maxOperationRetryTime,h=new tu(o,"GET",jA(i,e),c);return h.errorHandler=tC(n),h}function IG(i,n,e,r,o){const s={};s.prefix=n.isRoot?"":n.path+"/",e&&e.length>0&&(s.delimiter=e),r&&(s.pageToken=r),o&&(s.maxResults=o);const h=$h(n.bucketOnlyServerUrl(),i.host,i._protocol),_=i.maxOperationRetryTime,w=new tu(h,"GET",function CG(i,n){return function e(r,o){const s=function EG(i,n,e){const r=xN(e);return null===r?null:function xG(i,n,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[aV])for(const o of e[aV]){const s=o.replace(/\/$/,""),c=i._makeStorageReference(new Ps(n,s));r.prefixes.push(c)}if(e[lV])for(const o of e[lV]){const s=i._makeStorageReference(new Ps(n,o.name));r.items.push(s)}return r}(i,n,r)}(i,n,o);return nu(null!==s),s}}(i,n.bucket),_);return w.urlParams=s,w.errorHandler=Hb(n),w}function uV(i,n,e){const r=Object.assign({},e);return r.fullPath=i.path,r.size=n.size(),r.contentType||(r.contentType=function MG(i,n){return i&&i.contentType||n&&n.type()||"application/octet-stream"}(null,n)),r}class $A{constructor(n,e,r,o){this.current=n,this.total=e,this.finalized=!!r,this.metadata=o||null}}function CN(i,n){let e=null;try{e=i.getResponseHeader("X-Goog-Upload-Status")}catch{nu(!1)}return nu(!!e&&-1!==(n||["active"]).indexOf(e)),e}const OG={STATE_CHANGED:"state_changed"},Ks={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function DN(i){switch(i){case"running":case"pausing":case"canceling":return Ks.RUNNING;case"paused":return Ks.PAUSED;case"success":return Ks.SUCCESS;case"canceled":return Ks.CANCELED;default:return Ks.ERROR}}class NG{constructor(n,e,r){if(function J8(i){return"function"==typeof i}(n)||null!=e||null!=r)this.next=n,this.error=e??void 0,this.complete=r??void 0;else{const s=n;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function zb(i){return(...n)=>{Promise.resolve().then(()=>i(...n))}}let mV=null;class FG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wa.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wa.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wa.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,e,r,o){if(this.sent_)throw JE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,n,!0),void 0!==o)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw JE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw JE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw JE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw JE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class LG extends FG{initXhr(){this.xhr_.responseType="text"}}function Uc(){return mV?mV():new LG}class pV{constructor(n,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=e,this._metadata=r,this._mappings=eC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(an.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(tV(o.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();o=YB()}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(an.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,s)=>{this._resolve=o,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const n=this._transferred;return e=>this._updateProgress(n+e)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":n(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,e)=>{const r=function kG(i,n,e,r,o){const s=n.bucketOnlyServerUrl(),c=uV(n,r,o),h={name:c.fullPath},p=$h(s,i.host,i._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},I=EN(c,e),B=new tu(p,"POST",function P(Y){let ee;CN(Y);try{ee=Y.getResponseHeader("X-Goog-Upload-URL")}catch{nu(!1)}return nu(VA(ee)),ee},i.maxUploadRetryTime);return B.urlParams=h,B.headers=w,B.body=I,B.errorHandler=Hb(n),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Uc,n,e);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((e,r)=>{const o=function RG(i,n,e,r){const p=new tu(e,"POST",function s(_){const w=CN(_,["active","final"]);let I=null;try{I=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{nu(!1)}I||nu(!1);const A=Number(I);return nu(!isNaN(A)),new $A(A,r.size(),"final"===w)},i.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Hb(n),p}(this._ref.storage,this._ref._location,n,this._blob),s=this._ref.storage._makeRequest(o,Uc,e,r);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,e=new $A(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,s)=>{let c;try{c=function PG(i,n,e,r,o,s,c,h){const p=new $A(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function W8(){return new Pr(an.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let w=_;o>0&&(w=Math.min(w,o));const I=p.current;let P="";P=0===w?"finalize":_===w?"upload, finalize":"upload";const B={"X-Goog-Upload-Command":P,"X-Goog-Upload-Offset":`${p.current}`},Y=r.slice(I,I+w);if(null===Y)throw KB();const _e=new tu(e,"POST",function ee(ke,ze){const et=CN(ke,["active","final"]),it=p.current+w,Ft=r.size();let bn;return bn="final"===et?jA(n,s)(ke,ze):null,new $A(it,Ft,"final"===et,bn)},n.maxUploadRetryTime);return _e.headers=B,_e.body=Y.uploadData(),_e.progressCallback=h||null,_e.errorHandler=Hb(i),_e}(this._ref._location,this._ref.storage,r,this._blob,n,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Uc,o,s,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,e)=>{const r=cV(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,Uc,n,e);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,e)=>{const r=function hV(i,n,e,r,o){const s=n.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let _e="";for(let ke=0;ke<2;ke++)_e+=Math.random().toString().slice(2);return _e}();c["Content-Type"]="multipart/related; boundary="+p;const _=uV(n,r,o),w=EN(_,e),P=eu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===P)throw KB();const B={name:_.fullPath},Y=$h(s,i.host,i._protocol),ve=i.maxUploadRetryTime,Ae=new tu(Y,"POST",jA(i,e),ve);return Ae.urlParams=B,Ae.headers=c,Ae.body=P.uploadData(),Ae.errorHandler=Hb(n),Ae}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Uc,n,e);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const e=this._transferred;this._transferred=n,this._transferred!==e&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=n,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=n,this._notifyObservers();break;case"canceled":this._error=ZB(),this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=DN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,e,r,o){const s=new NG(e||void 0,r||void 0,o||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(n,e){return this._promise.then(n,e)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const e=this._observers.indexOf(n);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(DN(this._state)){case Ks.SUCCESS:zb(this._resolve.bind(null,this.snapshot))();break;case Ks.CANCELED:case Ks.ERROR:zb(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(DN(this._state)){case Ks.RUNNING:case Ks.PAUSED:n.next&&zb(n.next.bind(n,this.snapshot))();break;case Ks.SUCCESS:n.complete&&zb(n.complete.bind(n))();break;default:n.error&&zb(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class R_{constructor(n,e){this._service=n,this._location=e instanceof Ps?e:Ps.makeFromUrl(e,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,e){return new R_(n,e)}get root(){const n=new Ps(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oV(this._location.path)}get storage(){return this._service}get parent(){const n=function pG(i){if(0===i.length)return null;const n=i.lastIndexOf("/");return-1===n?"":i.slice(0,n)}(this._location.path);if(null===n)return null;const e=new Ps(this._location.bucket,n);return new R_(this._service,e)}_throwIfRoot(n){if(""===this._location.path)throw XB(n)}}function _V(i,n,e){return IN.apply(this,arguments)}function IN(){return IN=(0,De.Z)(function*(i,n,e){const o=yield yV(i,{pageToken:e});n.prefixes.push(...o.prefixes),n.items.push(...o.items),null!=o.nextPageToken&&(yield _V(i,n,o.nextPageToken))}),IN.apply(this,arguments)}function yV(i,n){null!=n&&"number"==typeof n.maxResults&&vN("options.maxResults",1,1e3,n.maxResults);const e=n||{},r=IG(i.storage,i._location,"/",e.pageToken,e.maxResults);return i.storage.makeRequestWithTokens(r,Uc)}function ZG(i){i._throwIfRoot("getDownloadURL");const n=function TG(i,n,e){const o=$h(n.fullServerUrl(),i.host,i._protocol),c=i.maxOperationRetryTime,h=new tu(o,"GET",function DG(i,n){return function e(r,o){const s=sV(i,o,n);return nu(null!==s),function wG(i,n,e,r){const o=xN(n);if(null===o||!VA(o.downloadTokens))return null;const s=o.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(_=>{const I=i.fullPath;return $h("/b/"+c(i.bucket)+"/o/"+c(I),e,r)+eV({alt:"media",token:_})})[0]}(s,o,i.host,i._protocol)}}(i,e),c);return h.errorHandler=tC(n),h}(i.storage,i._location,eC());return i.storage.makeRequestWithTokens(n,Uc).then(e=>{if(null===e)throw function q8(){return new Pr(an.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function vV(i,n){const e=function gG(i,n){const e=n.split("/").filter(r=>r.length>0).join("/");return 0===i.length?e:i+"/"+e}(i._location.path,n),r=new Ps(i._location.bucket,e);return new R_(i.storage,r)}function bV(i,n){if(i instanceof TN){const e=i;if(null==e._bucket)throw function G8(){return new Pr(an.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qB+"' property when initializing the app?")}();const r=new R_(e,e._bucket);return null!=n?bV(r,n):r}return void 0!==n?vV(i,n):i}function JG(i,n){if(n&&function QG(i){return/^[A-Za-z]+:\/\//.test(i)}(n)){if(i instanceof TN)return function XG(i,n){return new R_(i,n)}(i,n);throw Vb("To use ref(service, url), the first argument must be a Storage instance.")}return bV(i,n)}function wV(i,n){const e=n?.[qB];return null==e?null:Ps.makeFromBucketSpec(e,i)}class TN{constructor(n,e,r,o,s){this.app=n,this._authProvider=e,this._appCheckProvider=r,this._url=o,this._firebaseVersion=s,this._bucket=null,this._host=WB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Ps.makeFromBucketSpec(o,this._host):wV(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?Ps.makeFromBucketSpec(this._url,n):wV(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){vN("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){vN("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,De.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const e=n._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,De.Z)(function*(){const e=n._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new R_(this,n)}_makeRequest(n,e,r,o,s=!0){if(this._deleted)return new Z8(QB());{const c=function sG(i,n,e,r,o,s,c=!0){const h=eV(i.urlParams),p=i.url+h,_=Object.assign({},i.headers);return function rG(i,n){n&&(i["X-Firebase-GMPID"]=n)}(_,n),function nG(i,n){null!==n&&n.length>0&&(i.Authorization="Firebase "+n)}(_,e),function iG(i,n){i["X-Firebase-Storage-Version"]="webjs/"+(n??"AppManager")}(_,s),function oG(i,n){null!==n&&(i["X-Firebase-AppCheck"]=n)}(_,r),new tG(p,i.method,_,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,c)}(n,this._appId,r,o,e,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(n,e){var r=this;return(0,De.Z)(function*(){const[o,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,e,o,s).getPromise()})()}}const xV="@firebase/storage";function DV(i,n){return JG(i=(0,j.m9)(i),n)}function cW(i,{instanceIdentifier:n}){const e=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new TN(e,r,o,n,vi.SDK_VERSION)}!function dW(){(0,vi._registerComponent)(new tr.wA("storage",cW,"PUBLIC").setMultipleInstances(!0)),(0,vi.registerVersion)(xV,"0.11.2",""),(0,vi.registerVersion)(xV,"0.11.2","esm2017")}();class GA{constructor(n,e,r){this._delegate=n,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class TV{constructor(n,e){this._delegate=n,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new GA(this._delegate.snapshot,this,this._ref)}then(n,e){return this._delegate.then(r=>{if(n)return n(new GA(r,this,this._ref))},e)}on(n,e,r,o){let s;return e&&(s="function"==typeof e?c=>e(new GA(c,this,this._ref)):{next:e.next?c=>e.next(new GA(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(n,s,r||void 0,o||void 0)}}class SV{constructor(n,e){this._delegate=n,this._service=e}get prefixes(){return this._delegate.prefixes.map(n=>new Gh(n,this._service))}get items(){return this._delegate.items.map(n=>new Gh(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Gh{constructor(n,e){this._delegate=n,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const e=function lW(i,n){return vV(i,n)}(this._delegate,n);return new Gh(e,this.storage)}get root(){return new Gh(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new Gh(n,this.storage)}put(n,e){return this._throwIfRoot("put"),new TV(function tW(i,n,e){return function $G(i,n,e){return i._throwIfRoot("uploadBytesResumable"),new pV(i,new eu(n),e)}(i=(0,j.m9)(i),n,e)}(this._delegate,n,e),this)}putString(n,e=tl.RAW,r){this._throwIfRoot("putString");const o=wN(e,n),s=Object.assign({},r);return null==s.contentType&&null!=o.contentType&&(s.contentType=o.contentType),new TV(new pV(this._delegate,new eu(o.data,!0),s),this)}listAll(){return function oW(i){return function WG(i){const n={prefixes:[],items:[]};return _V(i,n).then(()=>n)}(i=(0,j.m9)(i))}(this._delegate).then(n=>new SV(n,this.storage))}list(n){return function rW(i,n){return yV(i=(0,j.m9)(i),n)}(this._delegate,n||void 0).then(e=>new SV(e,this.storage))}getMetadata(){return function nW(i){return function qG(i){i._throwIfRoot("getMetadata");const n=cV(i.storage,i._location,eC());return i.storage.makeRequestWithTokens(n,Uc)}(i=(0,j.m9)(i))}(this._delegate)}updateMetadata(n){return function iW(i,n){return function YG(i,n){i._throwIfRoot("updateMetadata");const e=function SG(i,n,e,r){const s=$h(n.fullServerUrl(),i.host,i._protocol),h=EN(e,r),_=i.maxOperationRetryTime,w=new tu(s,"PATCH",jA(i,r),_);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=h,w.errorHandler=tC(n),w}(i.storage,i._location,n,eC());return i.storage.makeRequestWithTokens(e,Uc)}(i=(0,j.m9)(i),n)}(this._delegate,n)}getDownloadURL(){return function sW(i){return ZG(i=(0,j.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function aW(i){return function KG(i){i._throwIfRoot("deleteObject");const n=function AG(i,n){const r=$h(n.fullServerUrl(),i.host,i._protocol),h=new tu(r,"DELETE",function c(p,_){},i.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=tC(n),h}(i.storage,i._location);return i.storage.makeRequestWithTokens(n,Uc)}(i=(0,j.m9)(i))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw XB(n)}}class AV{constructor(n,e){this.app=n,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(MV(n))throw Vb("ref() expected a child path but got a URL, use refFromURL instead.");return new Gh(DV(this._delegate,n),this)}refFromURL(n){if(!MV(n))throw Vb("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ps.makeFromUrl(n,this._delegate.host)}catch{throw Vb("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gh(DV(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,e,r={}){!function IV(i,n,e,r={}){!function eW(i,n,e,r={}){i.host=`${n}:${e}`,i._protocol="http";const{mockUserToken:o}=r;o&&(i._overrideAuthToken="string"==typeof o?o:(0,j.Sg)(o,i.app.options.projectId))}(i,n,e,r)}(this._delegate,n,e,r)}}function MV(i){return/^[A-Za-z]+:\/\//.test(i)}function mW(i,{instanceIdentifier:n}){const e=i.getProvider("app-compat").getImmediate(),r=i.getProvider("storage").getImmediate({identifier:n});return new AV(e,r)}function kV(i){const n=function gW(i){return new Nn.y(n=>{const e=c=>n.next(c);e(i.snapshot);const s=i.on("state_changed",e);return i.then(c=>{e(c),n.complete()},c=>{e(i.snapshot),(c=>{n.error(c)})(c)}),function(){s()}}).pipe(QE(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,gt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function WA(i){return{getDownloadURL:()=>(0,It.of)(void 0).pipe(sn.fc,(0,ji.w)(()=>i.getDownloadURL()),sn.iC),getMetadata:()=>(0,It.of)(void 0).pipe(sn.fc,(0,ji.w)(()=>i.getMetadata()),sn.iC),delete:()=>(0,Hn.D)(i.delete()),child:n=>WA(i.child(n)),updateMetadata:n=>(0,Hn.D)(i.updateMetadata(n)),put:(n,e)=>kV(i.put(n,e)),putString:(n,e,r)=>kV(i.putString(n,e,r)),list:n=>(0,Hn.D)(i.list(n)),listAll:()=>(0,Hn.D)(i.listAll())}}!function pW(i){const n={TaskState:Ks,TaskEvent:OG,StringFormat:tl,Storage:AV,Reference:Gh};i.INTERNAL.registerComponent(new tr.wA("storage-compat",mW,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.3.2")}(A0.Z);const _W=new d.OlP("angularfire2.storageBucket"),yW=new d.OlP("angularfire2.storage.maxUploadRetryTime"),vW=new d.OlP("angularfire2.storage.maxOperationRetryTime"),bW=new d.OlP("angularfire2.storage.use-emulator");let wW=(()=>{class i{constructor(e,r,o,s,c,h,p,_,w,I){const A=(0,Vn.on)(e,c,r);this.storage=(0,Vn.cc)(`${A.name}.storage.${o}`,"AngularFireStorage",A.name,()=>{const P=c.runOutsideAngular(()=>A.storage(o||void 0)),B=w;return B&&P.useEmulator(...B),p&&P.setMaxUploadRetryTime(p),_&&P.setMaxOperationRetryTime(_),P},[p,_])}ref(e){return WA(this.storage.ref(e))}refFromURL(e){return WA(this.storage.refFromURL(e))}upload(e,r,o){return WA(this.storage.ref(e)).put(r,o)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Vn.Dh),d.LFG(Vn.xv,8),d.LFG(_W,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(sn.HU),d.LFG(yW,8),d.LFG(vW,8),d.LFG(bW,8),d.LFG(Lf,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),xW=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})(),EW=(()=>{class i{constructor(){uy.Z.registerVersion("angularfire",sn.q4.full,"gcs-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[wW],imports:[xW]}),i})();var CW=z(6878);class PV{constructor(){return(0,sn.vb)("auth")}}class MN{constructor(n){return n}}const OV="firestore",kN=new d.OlP("angularfire2.firestore-instances");function MW(i){return(n,e)=>{const r=n.runOutsideAngular(()=>i(e));return new MN(r)}}const kW={provide:class SW{constructor(){return(0,sn.vb)(OV)}},deps:[[new d.FiY,kN]]},RW={provide:MN,useFactory:function AW(i,n){const e=(0,sn.JM)(OV,i,n);return e&&new MN(e)},deps:[[new d.FiY,kN],yo]};let PW=(()=>{class i{constructor(){(0,bs.KN)("angularfire",sn.q4.full,"fst")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[RW,kW]}),i})();function OW(i,...n){return{ngModule:PW,providers:[{provide:kN,useFactory:MW(i),multi:!0,deps:[d.R0b,d.zs3,sn.HU,la,[new d.FiY,PV],[new d.FiY,Lf],...n]}]}}const NW=(0,sn.u3)(y$,!0),{isArray:FW}=Array,{getPrototypeOf:LW,prototype:UW,keys:BW}=Object;function NV(i){if(1===i.length){const n=i[0];if(FW(n))return{args:n,keys:null};if(function VW(i){return i&&"object"==typeof i&&LW(i)===UW}(n)){const e=BW(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:i,keys:null}}const{isArray:HW}=Array;function RN(i){return(0,gt.U)(n=>function zW(i,n){return HW(n)?i(...n):i(n)}(i,n))}function FV(i,n){return i.reduce((e,r,o)=>(e[r]=n[o],e),{})}function LV(...i){const n=(0,bc.jO)(i),{args:e,keys:r}=NV(i),o=new Nn.y(s=>{const{length:c}=e;if(!c)return void s.complete();const h=new Array(c);let p=c,_=c;for(let w=0;w<c;w++){let I=!1;(0,vc.Xf)(e[w]).subscribe((0,di.x)(s,A=>{I||(I=!0,_--),h[w]=A},()=>p--,void 0,()=>{(!p||!I)&&(_||s.next(r?FV(r,h):h),s.complete())}))}});return n?o.pipe(RN(n)):o}let UV=(()=>{class i{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Qsj),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i}),i})(),P_=(()=>{class i extends UV{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,features:[d.qOj]}),i})();const Wl=new d.OlP("NgValueAccessor"),$W={provide:Wl,useExisting:(0,d.Gpc)(()=>nC),multi:!0},WW=new d.OlP("CompositionEventMode");let nC=(()=>{class i extends UV{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function GW(){const i=L()?L().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(WW,8))},i.\u0275dir=d.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&d.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[d._Bn([$W]),d.qOj]}),i})();function rp(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function VV(i){return null!=i&&"number"==typeof i.length}const Os=new d.OlP("NgValidators"),op=new d.OlP("NgAsyncValidators"),qW=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class YW{static min(n){return function HV(i){return n=>{if(rp(n.value)||rp(i))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<i?{min:{min:i,actual:n.value}}:null}}(n)}static max(n){return function zV(i){return n=>{if(rp(n.value)||rp(i))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>i?{max:{max:i,actual:n.value}}:null}}(n)}static required(n){return function jV(i){return rp(i.value)?{required:!0}:null}(n)}static requiredTrue(n){return function $V(i){return!0===i.value?null:{required:!0}}(n)}static email(n){return function GV(i){return rp(i.value)||qW.test(i.value)?null:{email:!0}}(n)}static minLength(n){return function WV(i){return n=>rp(n.value)||!VV(n.value)?null:n.value.length<i?{minlength:{requiredLength:i,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function qV(i){return n=>VV(n.value)&&n.value.length>i?{maxlength:{requiredLength:i,actualLength:n.value.length}}:null}(n)}static pattern(n){return function YV(i){if(!i)return qA;let n,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),n=new RegExp(e)):(e=i.toString(),n=i),r=>{if(rp(r.value))return null;const o=r.value;return n.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(n)}static nullValidator(n){return null}static compose(n){return e3(n)}static composeAsync(n){return t3(n)}}function qA(i){return null}function ZV(i){return null!=i}function KV(i){return(0,d.QGY)(i)?(0,Hn.D)(i):i}function QV(i){let n={};return i.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function XV(i,n){return n.map(e=>e(i))}function JV(i){return i.map(n=>function ZW(i){return!i.validate}(n)?n:e=>n.validate(e))}function e3(i){if(!i)return null;const n=i.filter(ZV);return 0==n.length?null:function(e){return QV(XV(e,n))}}function PN(i){return null!=i?e3(JV(i)):null}function t3(i){if(!i)return null;const n=i.filter(ZV);return 0==n.length?null:function(e){return LV(XV(e,n).map(KV)).pipe((0,gt.U)(QV))}}function ON(i){return null!=i?t3(JV(i)):null}function n3(i,n){return null===i?[n]:Array.isArray(i)?[...i,n]:[i,n]}function r3(i){return i._rawValidators}function o3(i){return i._rawAsyncValidators}function NN(i){return i?Array.isArray(i)?i:[i]:[]}function YA(i,n){return Array.isArray(i)?i.includes(n):i===n}function s3(i,n){const e=NN(n);return NN(i).forEach(o=>{YA(e,o)||e.push(o)}),e}function a3(i,n){return NN(n).filter(e=>!YA(i,e))}class l3{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=PN(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=ON(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Qs extends l3{get formDirective(){return null}get path(){return null}}class Wh extends l3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class c3{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let FN=(()=>{class i extends c3{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Wh,2))},i.\u0275dir=d.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),i})();const iC="VALID",KA="INVALID",jb="PENDING",rC="DISABLED";function BN(i){return(QA(i)?i.validators:i)||null}function VN(i,n){return(QA(n)?n.asyncValidators:i)||null}function QA(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class f3{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===iC}get invalid(){return this.status===KA}get pending(){return this.status==jb}get disabled(){return this.status===rC}get enabled(){return this.status!==rC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(s3(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(s3(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(a3(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(a3(n,this._rawAsyncValidators))}hasValidator(n){return YA(this._rawValidators,n)}hasAsyncValidator(n){return YA(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=jb,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=rC,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=iC,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iC||this.status===jb)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rC:iC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=jb,this._hasOwnPendingAsyncValidator=!0;const e=KV(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(n,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?rC:this.errors?KA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jb)?jb:this._anyControlsHaveStatus(KA)?KA:iC}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){QA(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function e9(i){return Array.isArray(i)?PN(i):i||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function t9(i){return Array.isArray(i)?ON(i):i||null}(this._rawAsyncValidators)}}class HN extends f3{constructor(n,e,r){super(BN(e),VN(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function h3(i,n,e){i._forEachChild((r,o)=>{if(void 0===e[o])throw new d.vHH(1002,"")})})(this,0,n),Object.keys(n).forEach(r=>{(function u3(i,n,e){const r=i.controls;if(!(n?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(r=>{const o=this.controls[r];o&&o.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,o)=>{r.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((o,s)=>{r=e(r,o,s)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const $b=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>XA}),XA="always";function oC(i,n,e=XA){zN(i,n),n.valueAccessor.writeValue(i.value),(i.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(i.disabled),function r9(i,n){n.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&m3(i,n)})}(i,n),function s9(i,n){const e=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};i.registerOnChange(e),n._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,n),function o9(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&m3(i,n),"submit"!==i.updateOn&&i.markAsTouched()})}(i,n),function i9(i,n){if(n.valueAccessor.setDisabledState){const e=r=>{n.valueAccessor.setDisabledState(r)};i.registerOnDisabledChange(e),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,n)}function eM(i,n,e=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),nM(i,n),i&&(n._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function tM(i,n){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function zN(i,n){const e=r3(i);null!==n.validator?i.setValidators(n3(e,n.validator)):"function"==typeof e&&i.setValidators([e]);const r=o3(i);null!==n.asyncValidator?i.setAsyncValidators(n3(r,n.asyncValidator)):"function"==typeof r&&i.setAsyncValidators([r]);const o=()=>i.updateValueAndValidity();tM(n._rawValidators,o),tM(n._rawAsyncValidators,o)}function nM(i,n){let e=!1;if(null!==i){if(null!==n.validator){const o=r3(i);if(Array.isArray(o)&&o.length>0){const s=o.filter(c=>c!==n.validator);s.length!==o.length&&(e=!0,i.setValidators(s))}}if(null!==n.asyncValidator){const o=o3(i);if(Array.isArray(o)&&o.length>0){const s=o.filter(c=>c!==n.asyncValidator);s.length!==o.length&&(e=!0,i.setAsyncValidators(s))}}}const r=()=>{};return tM(n._rawValidators,r),tM(n._rawAsyncValidators,r),e}function m3(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function p3(i,n){zN(i,n)}function g3(i,n){i._syncPendingControls(),n.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const u9={provide:Qs,useExisting:(0,d.Gpc)(()=>iM)},sC=(()=>Promise.resolve())();let iM=(()=>{class i extends Qs{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new HN({},PN(e),ON(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){sC.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),oC(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){sC.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){sC.then(()=>{const r=this._findContainer(e.path),o=new HN({});p3(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){sC.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){sC.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,g3(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Os,10),d.Y36(op,10),d.Y36($b,8))},i.\u0275dir=d.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([u9]),d.qOj]}),i})();function _3(i,n){const e=i.indexOf(n);e>-1&&i.splice(e,1)}function y3(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const v3=class extends f3{constructor(n=null,e,r){super(BN(e),VN(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),QA(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=y3(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){_3(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){_3(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){y3(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},m9={provide:Wh,useExisting:(0,d.Gpc)(()=>rM)},x3=(()=>Promise.resolve())();let rM=(()=>{class i extends Wh{constructor(e,r,o,s,c,h){super(),this._changeDetectorRef=c,this.callSetDisabledState=h,this.control=new v3,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function GN(i,n){if(!n)return null;let e,r,o;return Array.isArray(n),n.forEach(s=>{s.constructor===nC?e=s:function c9(i){return Object.getPrototypeOf(i.constructor)===P_}(s)?r=s:o=s}),o||r||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function $N(i,n){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){oC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){x3.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,o=0!==r&&(0,d.VuI)(r);x3.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function JA(i,n){return[...n.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Qs,9),d.Y36(Os,10),d.Y36(op,10),d.Y36(Wl,10),d.Y36(d.sBO,8),d.Y36($b,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([m9]),d.qOj,d.TTD]}),i})(),C3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const w9={provide:Qs,useExisting:(0,d.Gpc)(()=>oM)};let QN,oM=(()=>{class i extends Qs{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(nM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return oC(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){eM(e.control||null,e,!1),function d9(i,n){const e=i.indexOf(n);e>-1&&i.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,g3(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,o=this.form.get(e.path);r!==o&&(eM(r||null,e),(i=>i instanceof v3)(o)&&(oC(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);p3(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function a9(i,n){return nM(i,n)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zN(this.form,this),this._oldForm&&nM(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Os,10),d.Y36(op,10),d.Y36($b,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([w9]),d.qOj,d.TTD]}),i})(),B9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[C3]}),i})(),H9=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:$b,useValue:e.callSetDisabledState??XA}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[B9]}),i})();try{QN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{QN=!1}let Gb,fo=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function $c(i){return i===ul}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!QN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.Lbi))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const z3=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function j3(){if(Gb)return Gb;if("object"!=typeof document||!document)return Gb=new Set(z3),Gb;let i=document.createElement("input");return Gb=new Set(z3.filter(n=>(i.setAttribute("type",n),i.type===n))),Gb}let aC,sM,N_,XN;function lC(i){return function z9(){if(null==aC&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>aC=!0}))}finally{aC=aC||!1}return aC}()?i:!!i.capture}function cC(){if("object"!=typeof document||!document)return 0;if(null==sM){const i=document.createElement("div"),n=i.style;i.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const e=document.createElement("div"),r=e.style;r.width="2px",r.height="1px",i.appendChild(e),document.body.appendChild(i),sM=0,0===i.scrollLeft&&(i.scrollLeft=1,sM=0===i.scrollLeft?1:2),i.remove()}return sM}function Wb(i){return i.composedPath?i.composedPath()[0]:i.target}var qh=z(7394),xa=z(5619);function aM(i,...n){return n.length?n.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}var Ao=z(9397);function q3(i){return Pn((n,e)=>i<=e)}function Or(i){return(0,br.e)((n,e)=>{(0,vc.Xf)(i).subscribe((0,di.x)(e,()=>e.complete(),zp.Z)),!e.closed&&n.subscribe(e)})}function Bn(i){return null!=i&&"false"!=`${i}`}function Y3(i){return Array.isArray(i)?i:[i]}function Yh(i){return i instanceof d.SBq?i.nativeElement:i}var fq=z(7103);function lM(...i){const n=(0,bc.yG)(i),e=(0,bc.jO)(i),{args:r,keys:o}=NV(i);if(0===r.length)return(0,Hn.D)([],n);const s=new Nn.y(function mq(i,n,e=ha.y){return r=>{Z3(n,()=>{const{length:o}=i,s=new Array(o);let c=o,h=o;for(let p=0;p<o;p++)Z3(n,()=>{const _=(0,Hn.D)(i[p],n);let w=!1;_.subscribe((0,di.x)(r,I=>{s[p]=I,w||(w=!0,h--),h||r.next(e(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,n,o?c=>FV(o,c):ha.y));return e?s.pipe(RN(e)):s}function Z3(i,n,e){i?(0,fq.f)(e,i,n):n()}const K3=new Set;let F_,pq=(()=>{class i{constructor(e,r){this._platform=e,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_q}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function gq(i,n){if(!K3.has(i))try{F_||(F_=document.createElement("style"),n&&(F_.nonce=n),F_.setAttribute("type","text/css"),document.head.appendChild(F_)),F_.sheet&&(F_.sheet.insertRule(`@media ${i} {body{ }}`,0),K3.add(i))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(fo),d.LFG(d.Ojb,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _q(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let yq=(()=>{class i{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new dn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Q3(Y3(e)).some(o=>this._registerQuery(o).mql.matches)}observe(e){let s=lM(Q3(Y3(e)).map(c=>this._registerQuery(c).observable));return s=xv(s.pipe(Hr(1)),s.pipe(q3(1),QE(0))),s.pipe((0,gt.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:_})=>{h.matches=h.matches||p,h.breakpoints[_]=p}),h}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),s={observable:new Nn.y(c=>{const h=p=>this._zone.run(()=>c.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(kc(r),(0,gt.U)(({matches:c})=>({query:e,matches:c})),Or(this._destroySubject)),mql:r};return this._queries.set(e,s),s}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(pq),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Q3(i){return i.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}class wq{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new dn.x,this._typeaheadSubscription=qh.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new dn.x,this.change=new dn.x,n instanceof d.n_E&&(this._itemChangesSubscription=n.changes.subscribe(e=>{if(this._activeItem){const o=e.toArray().indexOf(this._activeItem);o>-1&&o!==this._activeItemIndex&&(this._activeItemIndex=o)}}))}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Ao.b)(e=>this._pressedLetters.push(e)),QE(n),Pn(()=>this._pressedLetters.length>0),(0,gt.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const r=this._getItemsArray();for(let o=1;o<r.length+1;o++){const s=(this._activeItemIndex+o)%r.length,c=r[s];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){const e=this._activeItem;this.updateActiveItem(n),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){const e=n.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!n[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&o){this.setNextItemActive();break}return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&o){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&o){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&o){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&o){const s=this._activeItemIndex+this._pageUpAndDown.delta,c=this._getItemsArray().length;this._setActiveItemByIndex(s<c?s:c-1,-1);break}return;default:return void((o||aM(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const e=this._getItemsArray(),r="number"==typeof n?n:e.indexOf(n);this._activeItem=e[r]??null,this._activeItemIndex=r}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const e=this._getItemsArray();for(let r=1;r<=e.length;r++){const o=(this._activeItemIndex+n*r+e.length)%e.length;if(!this._skipPredicateFn(e[o]))return void this.setActiveItem(o)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){const r=this._getItemsArray();if(r[n]){for(;this._skipPredicateFn(r[n]);)if(!r[n+=e])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof d.n_E?this._items.toArray():this._items}}class e4 extends wq{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}}let t4=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Eq(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const r=function xq(i){try{return i.frameElement}catch{return null}}(function kq(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(r&&(-1===i4(r)||!this.isVisible(r)))return!1;let o=e.nodeName.toLowerCase(),s=i4(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function Aq(i){let n=i.nodeName.toLowerCase(),e="input"===n&&i.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===o?!!e.hasAttribute("controls")&&-1!==s:"video"===o?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,r){return function Mq(i){return!function Dq(i){return function Tq(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function Cq(i){let n=i.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(i)||function Iq(i){return function Sq(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||n4(i))}(e)&&!this.isDisabled(e)&&(r?.ignoreVisibility||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(fo))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function n4(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let n=i.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function i4(i){if(!n4(i))return null;const n=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class Rq{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,r,o,s=!1){this._element=n,this._checker=e,this._ngZone=r,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const r=this._getFirstTabbableElement(e);return r?.focus(n),!!r}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let r=0;r<e.length;r++){const o=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(o)return o}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let r=e.length-1;r>=0;r--){const o=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(o)return o}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(Hr(1)).subscribe(n)}}let Pq=(()=>{class i{constructor(e,r,o){this._checker=e,this._ngZone=r,this._document=o}create(e,r=!1){return new Rq(e,this._checker,this._ngZone,this._document,r)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(t4),d.LFG(d.R0b),d.LFG(pe))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function r4(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function o4(i){const n=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const Oq=new d.OlP("cdk-input-modality-detector-options"),Nq={ignoreKeys:[18,17,224,91,16]},qb=lC({passive:!0,capture:!0});let Fq=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,r,o,s){this._platform=e,this._mostRecentTarget=null,this._modality=new xa.X(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(h=>h===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Wb(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(r4(c)?"keyboard":"mouse"),this._mostRecentTarget=Wb(c))},this._onTouchstart=c=>{o4(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Wb(c))},this._options={...Nq,...s},this.modalityDetected=this._modality.pipe(q3(1)),this.modalityChanged=this.modalityDetected.pipe((0,Dd.x)()),e.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,qb),o.addEventListener("mousedown",this._onMousedown,qb),o.addEventListener("touchstart",this._onTouchstart,qb)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,qb),document.removeEventListener("mousedown",this._onMousedown,qb),document.removeEventListener("touchstart",this._onTouchstart,qb))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(fo),d.LFG(d.R0b),d.LFG(pe),d.LFG(Oq,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Uq=new d.OlP("cdk-focus-monitor-default-options"),cM=lC({passive:!0,capture:!0});let dM=(()=>{class i{constructor(e,r,o,s,c){this._ngZone=e,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new dn.x,this._rootNodeFocusAndBlurListener=h=>{for(let _=Wb(h);_;_=_.parentElement)"focus"===h.type?this._onFocus(h,_):this._onBlur(h,_)},this._document=s,this._detectionMode=c?.detectionMode||0}monitor(e,r=!1){const o=Yh(e);if(!this._platform.isBrowser||1!==o.nodeType)return(0,It.of)(null);const s=function G9(i){if(function $9(){if(null==XN){const i=typeof document<"u"?document.head:null;XN=!(!i||!i.createShadowRoot&&!i.attachShadow)}return XN}()){const n=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(o)||this._getDocument(),c=this._elementInfo.get(o);if(c)return r&&(c.checkChildren=!0),c.subject;const h={checkChildren:r,subject:new dn.x,rootNode:s};return this._elementInfo.set(o,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(e){const r=Yh(e),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(e,r,o){const s=Yh(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const o=this._elementInfo.get(r),s=Wb(e);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(e,r){const o=this._elementInfo.get(r);!o||o.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,cM),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,cM)}),this._rootNodeFocusListenerCount.set(r,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Or(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,cM),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,cM),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,o){this._setClasses(e,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((o,s)=>{(s===e||o.checkChildren&&s.contains(e))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!r||r===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let c=0;c<s.length;c++)if(s[c].contains(r))return!0;return!1}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.R0b),d.LFG(fo),d.LFG(Fq),d.LFG(pe,8),d.LFG(Uq,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const a4="cdk-high-contrast-black-on-white",l4="cdk-high-contrast-white-on-black",eF="cdk-high-contrast-active";let Bq=(()=>{class i{constructor(e,r){this._platform=e,this._document=r,this._breakpointSubscription=(0,d.f3M)(yq).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(e):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(eF,a4,l4),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?e.add(eF,a4):2===r&&e.add(eF,l4)}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(fo),d.LFG(pe))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Vq=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function Hq(){return(0,d.f3M)(pe)}}),zq=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let uM=(()=>{class i{constructor(e){this.value="ltr",this.change=new d.vpe,e&&(this.value=function jq(i){const n=i?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?zq.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Vq,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),hM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const Gq=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function $q(){return!0}});let Nr=(()=>{class i{constructor(e,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!function q9(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Bq),d.LFG(Gq,8),d.LFG(pe))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[hM,hM]}),i})();function Wq(i){return class extends i{get disabled(){return this._disabled}set disabled(n){this._disabled=Bn(n)}constructor(...n){super(...n),this._disabled=!1}}}function tF(i,n){return class extends i{get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...e){super(...e),this.defaultColor=n,this.color=n}}}function u4(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=Bn(n)}constructor(...n){super(...n),this._disableRipple=!1}}}function qq(i,n=0){return class extends i{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?function JN(i,n=0){return function hq(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):n}(e):this.defaultTabIndex}constructor(...e){super(...e),this._tabIndex=n,this.defaultTabIndex=n}}}function Yq(i){return class extends i{updateErrorState(){const n=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==n&&(this.errorState=s,this.stateChanges.next())}constructor(...n){super(...n),this.errorState=!1}}}let Kq=(()=>{class i{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Qq{constructor(n,e,r,o=!1){this._renderer=n,this.element=e,this.config=r,this._animationForciblyDisabledThroughCss=o,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const h4=lC({passive:!0,capture:!0});class Xq{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=Wb(n);e&&this._events.get(n.type)?.forEach((r,o)=>{(o===e||o.contains(e))&&r.forEach(s=>s.handleEvent(n))})}}addHandler(n,e,r,o){const s=this._events.get(e);if(s){const c=s.get(r);c?c.add(o):s.set(r,new Set([o]))}else this._events.set(e,new Map([[r,new Set([o])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,h4)})}removeHandler(n,e,r){const o=this._events.get(n);if(!o)return;const s=o.get(e);s&&(s.delete(r),0===s.size&&o.delete(e),0===o.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,h4)))}}const f4={enterDuration:225,exitDuration:150},m4=lC({passive:!0,capture:!0}),p4=["mousedown","touchstart"],g4=["mouseup","mouseleave","touchend","touchcancel"];class L_{constructor(n,e,r,o){this._target=n,this._ngZone=e,this._platform=o,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=Yh(r))}fadeInRipple(n,e,r={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...f4,...r.animation};r.centered&&(n=o.left+o.width/2,e=o.top+o.height/2);const c=r.radius||function e7(i,n,e){const r=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),o=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(r*r+o*o)}(n,e,o),h=n-o.left,p=e-o.top,_=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=h-c+"px",w.style.top=p-c+"px",w.style.height=2*c+"px",w.style.width=2*c+"px",null!=r.color&&(w.style.backgroundColor=r.color),w.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(w);const I=window.getComputedStyle(w),P=I.transitionDuration,B="none"===I.transitionProperty||"0s"===P||"0s, 0s"===P||0===o.width&&0===o.height,Y=new Qq(this,w,r,B);w.style.transform="scale3d(1, 1, 1)",Y.state=0,r.persistent||(this._mostRecentTransientRipple=Y);let ee=null;return!B&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ve=()=>this._finishRippleTransition(Y),Ae=()=>this._destroyRipple(Y);w.addEventListener("transitionend",ve),w.addEventListener("transitioncancel",Ae),ee={onTransitionEnd:ve,onTransitionCancel:Ae}}),this._activeRipples.set(Y,ee),(B||!_)&&this._finishRippleTransition(Y),Y}fadeOutRipple(n){if(2===n.state||3===n.state)return;const e=n.element,r={...f4,...n.config.animation};e.style.transitionDuration=`${r.exitDuration}ms`,e.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=Yh(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,p4.forEach(r=>{L_._eventManager.addHandler(this._ngZone,r,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{g4.forEach(e=>{this._triggerElement.addEventListener(e,this,m4)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:r}=n.config;n.state=1,!r&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel)),n.element.remove()}_onMousedown(n){const e=r4(n),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!o4(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(p4.forEach(e=>L_._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&g4.forEach(e=>n.removeEventListener(e,this,m4)))}}L_._eventManager=new Xq;const fM=new d.OlP("mat-ripple-global-options");let _4=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,r,o,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new L_(this,r,e,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,o){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,{...this.rippleConfig,...o}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(fo),d.Y36(fM,8),d.Y36(d.QbO,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),nF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr,Nr]}),i})(),t7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr]}),i})();const n7=["mat-button",""],y4=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],v4=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],b4=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}",r7=["mat-fab",""],o7=["mat-icon-button",""],s7=["*"],w4={capture:!0},x4=["focus","click","mouseenter","touchstart"],uC="mat-button-ripple-uninitialized";let a7=(()=>{class i{constructor(){this._document=(0,d.f3M)(pe,{optional:!0}),this._animationMode=(0,d.f3M)(d.QbO,{optional:!0}),this._globalRippleOptions=(0,d.f3M)(fM,{optional:!0}),this._platform=(0,d.f3M)(fo),this._ngZone=(0,d.f3M)(d.R0b),this._onInteraction=e=>{if(e.target===this._document)return;const o=e.target.closest(`[${uC}]`);o&&(o.removeAttribute(uC),this._appendRipple(o))},this._ngZone.runOutsideAngular(()=>{for(const e of x4)this._document?.addEventListener(e,this._onInteraction,w4)})}ngOnDestroy(){for(const e of x4)this._document?.removeEventListener(e,this._onInteraction,w4)}_appendRipple(e){if(!this._document)return;const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const o=new l7(e,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);o.rippleConfig.centered=e.hasAttribute("mat-icon-button"),new L_(o,this._ngZone,r,this._platform).setupTriggerEvents(e),e.append(r)}_createMatRipple(e){if(!this._document)return;e.querySelector(".mat-mdc-button-ripple")?.remove(),e.removeAttribute(uC);const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const o=new _4(new d.SBq(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=e,e.append(r),o}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class l7{constructor(n,e,r){this._button=n,this._globalRippleOptions=e,this._setRippleConfig(e,r)}_setRippleConfig(n,e){this.rippleConfig=n||{},"NoopAnimations"===e&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const c7=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],d7=tF(Wq(u4(class{constructor(i){this._elementRef=i}})));let iF=(()=>{class i extends d7{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(e){this._ripple=e}constructor(e,r,o,s){super(e),this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=(0,d.f3M)(dM),this._rippleLoader=(0,d.f3M)(a7),this._isFab=!1;const c=e.nativeElement.classList;for(const h of c7)this._hasHostAttributes(h.selector)&&h.mdcClasses.forEach(p=>{c.add(p)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",r){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...e){return e.some(r=>this._elementRef.nativeElement.hasAttribute(r))}}return i.\u0275fac=function(e){d.$Z()},i.\u0275dir=d.lG2({type:i,features:[d.qOj,d.TTD]}),i})(),h7=(()=>{class i extends iF{constructor(e,r,o,s){super(e,r,o,s),this._haltDisabledEvents=c=>{this.disabled&&(c.preventDefault(),c.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return i.\u0275fac=function(e){d.$Z()},i.\u0275dir=d.lG2({type:i,features:[d.qOj]}),i})(),f7=(()=>{class i extends h7{constructor(e,r,o,s){super(e,r,o,s)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(fo),d.Y36(d.R0b),d.Y36(d.QbO,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:9,hostBindings:function(e,r){2&e&&(d.uIk("disabled",r.disabled||null)("tabindex",r.disabled?-1:r.tabIndex)("aria-disabled",r.disabled.toString()),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[d.qOj],attrs:n7,ngContentSelectors:v4,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(d.F$t(y4),d._UZ(0,"span",0),d.Hsn(1),d.TgZ(2,"span",1),d.Hsn(3,1),d.qZA(),d.Hsn(4,2),d._UZ(5,"span",2)(6,"span",3)),2&e&&d.ekj("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',b4],encapsulation:2,changeDetection:0}),i})();const m7=new d.OlP("mat-mdc-fab-default-options",{providedIn:"root",factory:E4});function E4(){return{color:"accent"}}const C4=E4();let p7=(()=>{class i extends iF{get extended(){return this._extended}set extended(e){this._extended=Bn(e)}constructor(e,r,o,s,c){super(e,r,o,s),this._options=c,this._isFab=!0,this._options=this._options||C4,this.color=this.defaultColor=this._options.color||C4.color}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(fo),d.Y36(d.R0b),d.Y36(d.QbO,8),d.Y36(m7,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["button","mat-fab",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:11,hostBindings:function(e,r){2&e&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0)("mdc-fab--extended",r.extended)("mat-mdc-extended-fab",r.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[d.qOj],attrs:r7,ngContentSelectors:v4,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(d.F$t(y4),d._UZ(0,"span",0),d.Hsn(1),d.TgZ(2,"span",1),d.Hsn(3,1),d.qZA(),d.Hsn(4,2),d._UZ(5,"span",2)(6,"span",3)),2&e&&d.ekj("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),i})(),g7=(()=>{class i extends iF{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement),this._ripple.centered=!0),this._ripple}constructor(e,r,o,s){super(e,r,o,s)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(fo),d.Y36(d.R0b),d.Y36(d.QbO,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["button","mat-icon-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(e,r){2&e&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:o7,ngContentSelectors:s7,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(d.F$t(),d._UZ(0,"span",0),d.Hsn(1),d._UZ(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',b4],encapsulation:2,changeDetection:0}),i})(),_7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr,nF,Nr]}),i})();function rF(){return(0,br.e)((i,n)=>{let e=null;i._refCount++;const r=(0,di.x)(n,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const o=i._connection,s=e;e=null,o&&(!s||o===s)&&o.unsubscribe(),n.unsubscribe()});i.subscribe(r),r.closed||(e=i.connect())})}class oF extends Nn.y{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,br.A)(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new qh.w0;const e=this.getSubject();n.add(this.source.subscribe((0,di.x)(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=qh.w0.EMPTY)}return n}refCount(){return rF()(this)}}function sF(i){return i&&"function"==typeof i.connect&&!(i instanceof oF)}class D4{applyChanges(n,e,r,o,s){n.forEachOperation((c,h,p)=>{let _,w;if(null==c.previousIndex){const I=r(c,h,p);_=e.createEmbeddedView(I.templateRef,I.context,I.index),w=1}else null==p?(e.remove(h),w=3):(_=e.get(h),e.move(_,p),w=2);s&&s({context:_?.context,operation:w,record:c})})}detach(){}}class aF{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(n=!1,e,r=!0,o){this._multiple=n,this._emitChanges=r,this.compareWith=o,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new dn.x,e&&e.length&&(n?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(r=>this._markSelected(r));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(r=>this._unmarkSelected(r));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);const e=this.selected,r=new Set(n);n.forEach(s=>this._markSelected(s)),e.filter(s=>!r.has(s)).forEach(s=>this._unmarkSelected(s));const o=this._hasQueuedChanges();return this._emitChangeEvent(),o}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(n){if(this.compareWith){for(let e of this._selection)if(this.compareWith(n,e))return e;return n}return n}}let T4=(()=>{class i{constructor(){this._listeners=[]}notify(e,r){for(let o of this._listeners)o(e,r)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(r=>e!==r)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hC=new d.OlP("_ViewRepeater"),y7=["button"],v7=["*"],S4=new d.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),A4=new d.OlP("MatButtonToggleGroup"),b7={provide:Wl,useExisting:(0,d.Gpc)(()=>R4),multi:!0};let M4=0;class k4{constructor(n,e){this.source=n,this.value=e}}let R4=(()=>{class i{get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(e){this._vertical=Bn(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(r=>r.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=Bn(e),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=Bn(e),this._markButtonsForCheck()}constructor(e,r){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+M4++,this.valueChange=new d.vpe,this.change=new d.vpe,this.appearance=r&&r.appearance?r.appearance:"standard"}ngOnInit(){this._selectionModel=new aF(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(e){const r=new k4(e,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(e,r,o=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?r?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(e,o)):this._updateModelValue(e,o)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(r=>null!=e.value&&r===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(r=>this._selectValue(r))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const r=this._buttonToggles.find(o=>null!=o.value&&o.value===e);r&&(r.checked=!0,this._selectionModel.select(r))}_updateModelValue(e,r){r&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.sBO),d.Y36(S4,8))},i.\u0275dir=d.lG2({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,r,o){if(1&e&&d.Suo(o,P4,5),2&e){let s;d.iGM(s=d.CRH())&&(r._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,r){2&e&&(d.uIk("aria-disabled",r.disabled),d.ekj("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard","standard"===r.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[d._Bn([b7,{provide:A4,useExisting:i}])]}),i})();const w7=u4(class{});let P4=(()=>{class i extends w7{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const r=Bn(e);r!==this._checked&&(this._checked=r,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=Bn(e)}constructor(e,r,o,s,c,h){super(),this._changeDetectorRef=r,this._elementRef=o,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new d.vpe;const p=Number(c);this.tabIndex=p||0===p?p:null,this.buttonToggleGroup=e,this.appearance=h&&h.appearance?h.appearance:"standard"}ngOnInit(){const e=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+M4++,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector()||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new k4(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(A4,8),d.Y36(d.sBO),d.Y36(d.SBq),d.Y36(dM),d.$8M("tabindex"),d.Y36(S4,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(e,r){if(1&e&&d.Gf(y7,5),2&e){let o;d.iGM(o=d.CRH())&&(r._buttonElement=o.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,r){1&e&&d.NdJ("focus",function(){return r.focus()}),2&e&&(d.uIk("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),d.ekj("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-appearance-standard","standard"===r.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[d.qOj],ngContentSelectors:v7,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,r){if(1&e&&(d.F$t(),d.TgZ(0,"button",0,1),d.NdJ("click",function(){return r._onButtonClick()}),d.TgZ(2,"span",2),d.Hsn(3),d.qZA()(),d._UZ(4,"span",3)(5,"span",4)),2&e){const o=d.MAs(1);d.Q6J("id",r.buttonId)("disabled",r.disabled||null),d.uIk("tabindex",r.disabled?-1:r.tabIndex)("aria-pressed",r.checked)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),d.xp6(5),d.Q6J("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[_4],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),i})(),x7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr,nF,Nr]}),i})(),E7=0;const lF=new d.OlP("CdkAccordion");let C7=(()=>{class i{constructor(){this._stateChanges=new dn.x,this._openCloseAllActions=new dn.x,this.id="cdk-accordion-"+E7++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Bn(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[d._Bn([{provide:lF,useExisting:i}]),d.TTD]}),i})(),D7=0,I7=(()=>{class i{get expanded(){return this._expanded}set expanded(e){e=Bn(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Bn(e)}constructor(e,r,o){this.accordion=e,this._changeDetectorRef=r,this._expansionDispatcher=o,this._openCloseAllSubscription=qh.w0.EMPTY,this.closed=new d.vpe,this.opened=new d.vpe,this.destroyed=new d.vpe,this.expandedChange=new d.vpe,this.id="cdk-accordion-child-"+D7++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=o.listen((s,c)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===c&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(lF,12),d.Y36(d.sBO),d.Y36(T4))},i.\u0275dir=d.lG2({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[d._Bn([{provide:lF,useValue:void 0}])]}),i})(),T7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();class cF{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class S7 extends cF{constructor(n,e,r,o,s){super(),this.component=n,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=o,this.projectableNodes=s}}class O4 extends cF{constructor(n,e,r,o){super(),this.templateRef=n,this.viewContainerRef=e,this.context=r,this.injector=o}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class A7 extends cF{constructor(n){super(),this.element=n instanceof d.SBq?n.nativeElement:n}}class M7{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof S7?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof O4?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof A7?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}let k7=(()=>{class i extends M7{constructor(e,r,o){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new d.vpe,this.attachDomPortal=s=>{const c=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(h,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(c,h)})},this._document=o}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=r.createComponent(s,r.length,e.injector||r.injector,e.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36(pe))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[d.qOj]}),i})(),R7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();class N4{}class P7{}const Zh="*";function mM(i,n){return{type:7,name:i,definitions:n,options:{}}}function fC(i,n=null){return{type:4,styles:n,timings:i}}function F4(i,n=null){return{type:2,steps:i,options:n}}function iu(i){return{type:6,styles:i,offset:null}}function U_(i,n,e){return{type:0,name:i,styles:n,options:e}}function mC(i,n,e=null){return{type:1,expr:i,animation:n,options:e}}function L4(i){Promise.resolve().then(i)}class pC{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){L4(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class U4{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,r=0,o=0;const s=this.players.length;0==s?L4(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++r==s&&this._onDestroy()}),c.onStart(()=>{++o==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(o)})}getPosition(){const n=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const O7=["body"];function N7(i,n){}const F7=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],L7=["mat-expansion-panel-header","*","mat-action-row"];function U7(i,n){if(1&i&&d._UZ(0,"span",2),2&i){const e=d.oxw();d.Q6J("@indicatorRotate",e._getExpandedState())}}const B7=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],V7=["mat-panel-title","mat-panel-description","*"],uF=new d.OlP("MAT_ACCORDION"),B4="225ms cubic-bezier(0.4,0.0,0.2,1)",V4={indicatorRotate:mM("indicatorRotate",[U_("collapsed, void",iu({transform:"rotate(0deg)"})),U_("expanded",iu({transform:"rotate(180deg)"})),mC("expanded <=> collapsed, void => collapsed",fC(B4))]),bodyExpansion:mM("bodyExpansion",[U_("collapsed, void",iu({height:"0px",visibility:"hidden"})),U_("expanded",iu({height:"*",visibility:"visible"})),mC("expanded <=> collapsed, void => collapsed",fC(B4))])},H4=new d.OlP("MAT_EXPANSION_PANEL");let H7=(()=>{class i{constructor(e,r){this._template=e,this._expansionPanel=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(H4,8))},i.\u0275dir=d.lG2({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),z7=0;const z4=new d.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let j4=(()=>{class i extends I7{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Bn(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,r,o,s,c,h,p){super(e,r,o),this._viewContainerRef=s,this._animationMode=h,this._hideToggle=!1,this.afterExpand=new d.vpe,this.afterCollapse=new d.vpe,this._inputChanges=new dn.x,this._headerId="mat-expansion-panel-header-"+z7++,this._bodyAnimationDone=new dn.x,this.accordion=e,this._document=c,this._bodyAnimationDone.pipe((0,Dd.x)((_,w)=>_.fromState===w.fromState&&_.toState===w.toState)).subscribe(_=>{"void"!==_.fromState&&("expanded"===_.toState?this.afterExpand.emit():"collapsed"===_.toState&&this.afterCollapse.emit())}),p&&(this.hideToggle=p.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(kc(null),Pn(()=>this.expanded&&!this._portal),Hr(1)).subscribe(()=>{this._portal=new O4(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,r=this._body.nativeElement;return e===r||r.contains(e)}return!1}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(uF,12),d.Y36(d.sBO),d.Y36(T4),d.Y36(d.s_b),d.Y36(pe),d.Y36(d.QbO,8),d.Y36(z4,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(e,r,o){if(1&e&&d.Suo(o,H7,5),2&e){let s;d.iGM(s=d.CRH())&&(r._lazyContent=s.first)}},viewQuery:function(e,r){if(1&e&&d.Gf(O7,5),2&e){let o;d.iGM(o=d.CRH())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,r){2&e&&d.ekj("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[d._Bn([{provide:uF,useValue:void 0},{provide:H4,useExisting:i}]),d.qOj,d.TTD],ngContentSelectors:L7,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,r){1&e&&(d.F$t(F7),d.Hsn(0),d.TgZ(1,"div",0,1),d.NdJ("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),d.TgZ(3,"div",2),d.Hsn(4,1),d.YNc(5,N7,0,0,"ng-template",3),d.qZA(),d.Hsn(6,2),d.qZA()),2&e&&(d.xp6(1),d.Q6J("@bodyExpansion",r._getExpandedState())("id",r.id),d.uIk("aria-labelledby",r._headerId),d.xp6(4),d.Q6J("cdkPortalOutlet",r._portal))},dependencies:[k7],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[V4.bodyExpansion]},changeDetection:0}),i})();class j7{}const $7=qq(j7);let $4=(()=>{class i extends $7{constructor(e,r,o,s,c,h,p){super(),this.panel=e,this._element=r,this._focusMonitor=o,this._changeDetectorRef=s,this._animationMode=h,this._parentChangeSubscription=qh.w0.EMPTY;const _=e.accordion?e.accordion._stateChanges.pipe(Pn(w=>!(!w.hideToggle&&!w.togglePosition))):os.E;this.tabIndex=parseInt(p||"")||0,this._parentChangeSubscription=(0,rs.T)(e.opened,e.closed,_,e._inputChanges.pipe(Pn(w=>!!(w.hideToggle||w.disabled||w.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Pn(()=>e._containsFocus())).subscribe(()=>o.focusVia(r,"program")),c&&(this.expandedHeight=c.expandedHeight,this.collapsedHeight=c.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:aM(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,r){e?this._focusMonitor.focusVia(this._element,e,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(j4,1),d.Y36(d.SBq),d.Y36(dM),d.Y36(d.sBO),d.Y36(z4,8),d.Y36(d.QbO,8),d.$8M("tabindex"))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,r){1&e&&d.NdJ("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&e&&(d.uIk("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),d.Udp("height",r._getHeaderHeight()),d.ekj("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[d.qOj],ngContentSelectors:V7,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,r){1&e&&(d.F$t(B7),d.TgZ(0,"span",0),d.Hsn(1),d.Hsn(2,1),d.Hsn(3,2),d.qZA(),d.YNc(4,U7,1,1,"span",1)),2&e&&(d.ekj("mat-content-hide-toggle",!r._showToggle()),d.xp6(4),d.Q6J("ngIf",r._showToggle()))},dependencies:[ci],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[V4.indicatorRotate]},changeDetection:0}),i})(),G7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),W7=(()=>{class i extends C7{constructor(){super(...arguments),this._ownHeaders=new d.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=Bn(e)}ngAfterContentInit(){this._headers.changes.pipe(kc(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(r=>r.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new e4(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["mat-accordion"]],contentQueries:function(e,r,o){if(1&e&&d.Suo(o,$4,5),2&e){let s;d.iGM(s=d.CRH())&&(r._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mat-accordion-multi",r.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[d._Bn([{provide:uF,useExisting:i}]),d.qOj]}),i})(),q7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[oo,Nr,T7,R7]}),i})();class Y7{constructor(n){this._box=n,this._destroyed=new dn.x,this._resizeSubject=new dn.x,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new Nn.y(e=>{const r=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),r.unsubscribe(),this._elementObservables.delete(n)}}).pipe(Pn(e=>e.some(r=>r.target===n)),mc({bufferSize:1,refCount:!0}),Or(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Z7=(()=>{class i{constructor(){this._observers=new Map,this._ngZone=(0,d.f3M)(d.R0b)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,r){const o=r?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new Y7(o)),this._observers.get(o).observe(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),G4=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),W4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[G4]}),i})();const X7=["notch"],J7=["matFormFieldNotchedOutline",""],eY=["*"],tY=["textField"],nY=["iconPrefixContainer"],iY=["textPrefixContainer"];function rY(i,n){1&i&&d._UZ(0,"span",19)}function oY(i,n){if(1&i&&(d.TgZ(0,"label",17),d.Hsn(1,1),d.YNc(2,rY,1,0,"span",18),d.qZA()),2&i){const e=d.oxw(2);d.Q6J("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),d.uIk("for",e._control.id)("aria-owns",e._control.id),d.xp6(2),d.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required)}}function sY(i,n){if(1&i&&d.YNc(0,oY,3,6,"label",16),2&i){const e=d.oxw();d.Q6J("ngIf",e._hasFloatingLabel())}}function aY(i,n){1&i&&d._UZ(0,"div",20)}function lY(i,n){}function cY(i,n){if(1&i&&d.YNc(0,lY,0,0,"ng-template",22),2&i){d.oxw(2);const e=d.MAs(1);d.Q6J("ngTemplateOutlet",e)}}function dY(i,n){if(1&i&&(d.TgZ(0,"div",21),d.YNc(1,cY,1,1,"ng-template",9),d.qZA()),2&i){const e=d.oxw();d.Q6J("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),d.xp6(1),d.Q6J("ngIf",!e._forceDisplayInfixLabel())}}function uY(i,n){1&i&&(d.TgZ(0,"div",23,24),d.Hsn(2,2),d.qZA())}function hY(i,n){1&i&&(d.TgZ(0,"div",25,26),d.Hsn(2,3),d.qZA())}function fY(i,n){}function mY(i,n){if(1&i&&d.YNc(0,fY,0,0,"ng-template",22),2&i){d.oxw();const e=d.MAs(1);d.Q6J("ngTemplateOutlet",e)}}function pY(i,n){1&i&&(d.TgZ(0,"div",27),d.Hsn(1,4),d.qZA())}function gY(i,n){1&i&&(d.TgZ(0,"div",28),d.Hsn(1,5),d.qZA())}function _Y(i,n){1&i&&d._UZ(0,"div",29)}function yY(i,n){if(1&i&&(d.TgZ(0,"div",30),d.Hsn(1,6),d.qZA()),2&i){const e=d.oxw();d.Q6J("@transitionMessages",e._subscriptAnimationState)}}function vY(i,n){if(1&i&&(d.TgZ(0,"mat-hint",34),d._uU(1),d.qZA()),2&i){const e=d.oxw(2);d.Q6J("id",e._hintLabelId),d.xp6(1),d.Oqu(e.hintLabel)}}function bY(i,n){if(1&i&&(d.TgZ(0,"div",31),d.YNc(1,vY,2,2,"mat-hint",32),d.Hsn(2,7),d._UZ(3,"div",33),d.Hsn(4,8),d.qZA()),2&i){const e=d.oxw();d.Q6J("@transitionMessages",e._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",e.hintLabel)}}const wY=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],xY=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let pM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["mat-label"]]}),i})();const EY=new d.OlP("MatError");let CY=0,q4=(()=>{class i{constructor(){this.align="start",this.id="mat-mdc-hint-"+CY++}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,r){2&e&&(d.Ikx("id",r.id),d.uIk("align",null),d.ekj("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}}),i})();const DY=new d.OlP("MatPrefix"),Y4=new d.OlP("MatSuffix");let IY=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[d._Bn([{provide:Y4,useExisting:i}])]}),i})();const Z4=new d.OlP("FloatingLabelParent");let K4=(()=>{class i{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,d.f3M)(Z7),this._ngZone=(0,d.f3M)(d.R0b),this._parent=(0,d.f3M)(Z4),this._resizeSubscription=new qh.w0}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function TY(i){if(null!==i.offsetParent)return i.scrollWidth;const e=i.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const r=e.scrollWidth;return e.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}}),i})();const Q4="mdc-line-ripple--active",gM="mdc-line-ripple--deactivating";let X4=(()=>{class i{constructor(e,r){this._elementRef=e,this._handleTransitionEnd=o=>{const s=this._elementRef.nativeElement.classList,c=s.contains(gM);"opacity"===o.propertyName&&c&&s.remove(Q4,gM)},r.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(gM),e.add(Q4)}deactivate(){this._elementRef.nativeElement.classList.add(gM)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(d.R0b))},i.\u0275dir=d.lG2({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),i})(),J4=(()=>{class i{constructor(e,r){this._elementRef=e,this._ngZone=r,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(d.R0b))},i.\u0275cmp=d.Xpm({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(e,r){if(1&e&&d.Gf(X7,5),2&e){let o;d.iGM(o=d.CRH())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:J7,ngContentSelectors:eY,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(e,r){1&e&&(d.F$t(),d._UZ(0,"div",0),d.TgZ(1,"div",1,2),d.Hsn(3),d.qZA(),d._UZ(4,"div",3))},encapsulation:2,changeDetection:0}),i})();const SY={transitionMessages:mM("transitionMessages",[U_("enter",iu({opacity:1,transform:"translateY(0%)"})),mC("void => enter",[iu({opacity:0,transform:"translateY(-5px)"}),fC("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let e6=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i}),i})();const t6=new d.OlP("MatFormField"),AY=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let n6=0,o6=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Bn(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,r,o,s,c,h,p,_){this._elementRef=e,this._changeDetectorRef=r,this._ngZone=o,this._dir=s,this._platform=c,this._defaults=h,this._animationMode=p,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+n6++,this._hintLabelId="mat-mdc-hint-"+n6++,this._subscriptAnimationState="",this._destroyed=new dn.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,h&&(h.appearance&&(this.appearance=h.appearance),this._hideRequiredMarker=!!h?.hideRequiredMarker,h.color&&(this.color=h.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Or(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,rs.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Or(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Or(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,o=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),o&&e.push(o.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,s=r?.getBoundingClientRect().width??0,c=o?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+c}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(d.R0b),d.Y36(uM),d.Y36(fo),d.Y36(AY,8),d.Y36(d.QbO,8),d.Y36(pe))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-form-field"]],contentQueries:function(e,r,o){if(1&e&&(d.Suo(o,pM,5),d.Suo(o,pM,7),d.Suo(o,e6,5),d.Suo(o,DY,5),d.Suo(o,Y4,5),d.Suo(o,EY,5),d.Suo(o,q4,5)),2&e){let s;d.iGM(s=d.CRH())&&(r._labelChildNonStatic=s.first),d.iGM(s=d.CRH())&&(r._labelChildStatic=s.first),d.iGM(s=d.CRH())&&(r._formFieldControl=s.first),d.iGM(s=d.CRH())&&(r._prefixChildren=s),d.iGM(s=d.CRH())&&(r._suffixChildren=s),d.iGM(s=d.CRH())&&(r._errorChildren=s),d.iGM(s=d.CRH())&&(r._hintChildren=s)}},viewQuery:function(e,r){if(1&e&&(d.Gf(tY,5),d.Gf(nY,5),d.Gf(iY,5),d.Gf(K4,5),d.Gf(J4,5),d.Gf(X4,5)),2&e){let o;d.iGM(o=d.CRH())&&(r._textField=o.first),d.iGM(o=d.CRH())&&(r._iconPrefixContainer=o.first),d.iGM(o=d.CRH())&&(r._textPrefixContainer=o.first),d.iGM(o=d.CRH())&&(r._floatingLabel=o.first),d.iGM(o=d.CRH())&&(r._notchedOutline=o.first),d.iGM(o=d.CRH())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,r){2&e&&d.ekj("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:t6,useExisting:i},{provide:Z4,useExisting:i}])],ngContentSelectors:xY,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,r){1&e&&(d.F$t(wY),d.YNc(0,sY,1,1,"ng-template",null,0,d.W1O),d.TgZ(2,"div",1,2),d.NdJ("click",function(s){return r._control.onContainerClick(s)}),d.YNc(4,aY,1,0,"div",3),d.TgZ(5,"div",4),d.YNc(6,dY,2,2,"div",5),d.YNc(7,uY,3,0,"div",6),d.YNc(8,hY,3,0,"div",7),d.TgZ(9,"div",8),d.YNc(10,mY,1,1,"ng-template",9),d.Hsn(11),d.qZA(),d.YNc(12,pY,2,0,"div",10),d.YNc(13,gY,2,0,"div",11),d.qZA(),d.YNc(14,_Y,1,0,"div",12),d.qZA(),d.TgZ(15,"div",13),d.YNc(16,yY,2,1,"div",14),d.YNc(17,bY,5,2,"div",15),d.qZA()),2&e&&(d.xp6(2),d.ekj("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),d.xp6(2),d.Q6J("ngIf",!r._hasOutline()&&!r._control.disabled),d.xp6(2),d.Q6J("ngIf",r._hasOutline()),d.xp6(1),d.Q6J("ngIf",r._hasIconPrefix),d.xp6(1),d.Q6J("ngIf",r._hasTextPrefix),d.xp6(2),d.Q6J("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),d.xp6(2),d.Q6J("ngIf",r._hasTextSuffix),d.xp6(1),d.Q6J("ngIf",r._hasIconSuffix),d.xp6(1),d.Q6J("ngIf",!r._hasOutline()),d.xp6(1),d.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),d.Q6J("ngSwitch",r._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},dependencies:[ci,fs,Jo,Js,q4,K4,J4,X4],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[SY.transitionMessages]},changeDetection:0}),i})(),hF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr,oo,W4,Nr]}),i})();function Yb(i,n){const e=(0,Bo.m)(i)?i:()=>i,r=o=>o.error(e());return new Nn.y(n?o=>n.schedule(r,0,o):r)}function sp(i){return(0,br.e)((n,e)=>{let s,r=null,o=!1;r=n.subscribe((0,di.x)(e,void 0,void 0,c=>{s=(0,vc.Xf)(i(c,sp(i)(n))),r?(r.unsubscribe(),r=null,s.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,s.subscribe(e))})}function _M(i){return(0,br.e)((n,e)=>{try{n.subscribe(e)}finally{e.add(i)}})}var Mo=z(1631);function Zb(i,n){return(0,Bo.m)(n)?(0,Mo.z)(i,n,1):(0,Mo.z)(i,1)}class fF{}class Kh{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const o=e.slice(0,r),s=o.toLowerCase(),c=e.slice(r+1).trim();this.maybeSetNormalizedName(o,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Kh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Kh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Kh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,e);const o=("a"===n.op?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":const s=n.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const r=(Array.isArray(e)?e:[e]).map(s=>s.toString()),o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class RY{encodeKey(n){return s6(n)}encodeValue(n){return s6(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const OY=/%(\d[a-f0-9])/gi,NY={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function s6(i){return encodeURIComponent(i).replace(OY,(n,e)=>NY[e]??n)}function yM(i){return`${i}`}class ap{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new RY,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function PY(i,n){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(o=>{const s=o.indexOf("="),[c,h]=-1==s?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,s)),n.decodeValue(o.slice(s+1))],p=e.get(c)||[];p.push(h),e.set(c,p)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const r=n.fromObject[e],o=Array.isArray(r)?r.map(yM):[yM(r)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(r=>{const o=n[r];Array.isArray(o)?o.forEach(s=>{e.push({param:r,value:s,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new ap({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(yM(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const o=r.indexOf(yM(n.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class FY{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function a6(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function l6(i){return typeof Blob<"u"&&i instanceof Blob}function c6(i){return typeof FormData<"u"&&i instanceof FormData}class gC{constructor(n,e,r,o){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function LY(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,s=o):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Kh),this.context||(this.context=new FY),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const h=e.indexOf("?");this.urlWithParams=e+(-1===h?"?":h<e.length-1?"&":"")+c}}else this.params=new ap,this.urlWithParams=e}serializeBody(){return null===this.body?null:a6(this.body)||l6(this.body)||c6(this.body)||function UY(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ap?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||c6(this.body)?null:l6(this.body)?this.body.type||null:a6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ap?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,c=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,h=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let p=n.headers||this.headers,_=n.params||this.params;const w=n.context??this.context;return void 0!==n.setHeaders&&(p=Object.keys(n.setHeaders).reduce((I,A)=>I.set(A,n.setHeaders[A]),p)),n.setParams&&(_=Object.keys(n.setParams).reduce((I,A)=>I.set(A,n.setParams[A]),_)),new gC(e,r,s,{params:_,headers:p,context:w,reportProgress:h,responseType:o,withCredentials:c})}}var us=(()=>((us=us||{})[us.Sent=0]="Sent",us[us.UploadProgress=1]="UploadProgress",us[us.ResponseHeader=2]="ResponseHeader",us[us.DownloadProgress=3]="DownloadProgress",us[us.Response=4]="Response",us[us.User=5]="User",us))();class BY{constructor(n,e=200,r="OK"){this.headers=n.headers||new Kh,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class _C extends BY{constructor(n={}){super(n),this.type=us.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new _C({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}function pF(i,n){return{body:n,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let gF=(()=>{class i{constructor(e){this.handler=e}request(e,r,o={}){let s;if(e instanceof gC)s=e;else{let p,_;p=o.headers instanceof Kh?o.headers:new Kh(o.headers),o.params&&(_=o.params instanceof ap?o.params:new ap({fromObject:o.params})),s=new gC(e,r,void 0!==o.body?o.body:null,{headers:p,context:o.context,params:_,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const c=(0,It.of)(s).pipe(Zb(p=>this.handler.handle(p)));if(e instanceof gC||"events"===o.observe)return c;const h=c.pipe(Pn(p=>p instanceof _C));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,gt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,gt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,gt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,gt.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new ap).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,pF(o,r))}post(e,r,o={}){return this.request("POST",e,pF(o,r))}put(e,r,o={}){return this.request("PUT",e,pF(o,r))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(fF))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const oZ=["*"];let wM;function yC(i){return function sZ(){if(void 0===wM&&(wM=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(wM=i.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return wM}()?.createHTML(i)||i}function v6(i){return Error(`Unable to find icon with the name "${i}"`)}function b6(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function w6(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class H_{constructor(n,e,r){this.url=n,this.svgText=e,this.options=r}}let xM=(()=>{class i{constructor(e,r,o,s){this._httpClient=e,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(e,r,o){return this.addSvgIconInNamespace("",e,r,o)}addSvgIconLiteral(e,r,o){return this.addSvgIconLiteralInNamespace("",e,r,o)}addSvgIconInNamespace(e,r,o,s){return this._addSvgIconConfig(e,r,new H_(o,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,o,s){const c=this._sanitizer.sanitize(d.q3G.HTML,o);if(!c)throw w6(o);const h=yC(c);return this._addSvgIconConfig(e,r,new H_("",h,s))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,o){return this._addSvgIconSetConfig(e,new H_(r,null,o))}addSvgIconSetLiteralInNamespace(e,r,o){const s=this._sanitizer.sanitize(d.q3G.HTML,r);if(!s)throw w6(r);const c=yC(s);return this._addSvgIconSetConfig(e,new H_("",c,o))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,e);if(!r)throw b6(e);const o=this._cachedIconsByUrl.get(r);return o?(0,It.of)(EM(o)):this._loadSvgIconFromConfig(new H_(e,null)).pipe((0,Ao.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,gt.U)(s=>EM(s)))}getNamedSvgIcon(e,r=""){const o=x6(r,e);let s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,e),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(e,c):Yb(v6(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,It.of)(EM(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,gt.U)(r=>EM(r)))}_getSvgFromIconSetConfigs(e,r){const o=this._extractIconWithNameFromAnySet(e,r);return o?(0,It.of)(o):LV(r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(sp(h=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(d.q3G.RESOURCE_URL,c.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(_)),(0,It.of)(null)})))).pipe((0,gt.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,r);if(!c)throw v6(e);return c}))}_extractIconWithNameFromAnySet(e,r){for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(c,e,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,Ao.b)(r=>e.svgText=r),(0,gt.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,It.of)(null):this._fetchIcon(e).pipe((0,Ao.b)(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,o){const s=e.querySelector(`[id="${r}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,o);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),o);const h=this._svgElementFromString(yC("<svg></svg>"));return h.appendChild(c),this._setSvgAttributes(h,o)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(e){const r=this._svgElementFromString(yC("<svg></svg>")),o=e.attributes;for(let s=0;s<o.length;s++){const{name:c,value:h}=o[s];"id"!==c&&r.setAttribute(c,h)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){const{url:r,options:o}=e,s=o?.withCredentials??!1;if(!this._httpClient)throw function aZ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const c=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,r);if(!c)throw b6(r);const h=this._inProgressUrlFetches.get(c);if(h)return h;const p=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,gt.U)(_=>yC(_)),_M(()=>this._inProgressUrlFetches.delete(c)),(0,ua.B)());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(e,r,o){return this._svgIconConfigs.set(x6(e,r),o),this}_addSvgIconSetConfig(e,r){const o=this._iconSetConfigs.get(e);return o?o.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let o=0;o<this._resolvers.length;o++){const s=this._resolvers[o](r,e);if(s)return cZ(s)?new H_(s.url,null,s.options):new H_(s,null)}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(gF,8),d.LFG(bl),d.LFG(pe,8),d.LFG(d.qLn))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function EM(i){return i.cloneNode(!0)}function x6(i,n){return i+":"+n}function cZ(i){return!(!i.url||!i.options)}const dZ=tF(class{constructor(i){this._elementRef=i}}),uZ=new d.OlP("MAT_ICON_DEFAULT_OPTIONS"),hZ=new d.OlP("mat-icon-location",{providedIn:"root",factory:function fZ(){const i=(0,d.f3M)(pe),n=i?i.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),E6=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],mZ=E6.map(i=>`[${i}]`).join(", "),pZ=/^url\(['"]?#(.*?)['"]?\)$/;let CM=(()=>{class i extends dZ{get inline(){return this._inline}set inline(e){this._inline=Bn(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(e,r,o,s,c,h){super(e),this._iconRegistry=r,this._location=s,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=qh.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),o||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const o=e.childNodes[r];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>e.classList.remove(o)),r.forEach(o=>e.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(mZ),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)E6.forEach(c=>{const h=r[s],p=h.getAttribute(c),_=p?p.match(pZ):null;if(_){let w=o.get(h);w||(w=[],o.set(h,w)),w.push({name:c,value:_[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,o]=this._splitIconName(e);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(Hr(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${o}! ${s.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(xM),d.$8M("aria-hidden"),d.Y36(hZ),d.Y36(d.qLn),d.Y36(uZ,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,r){2&e&&(d.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),d.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[d.qOj],ngContentSelectors:oZ,decls:1,vars:0,template:function(e,r){1&e&&(d.F$t(),d.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),gZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr,Nr]}),i})();const C6=lC({passive:!0});let _Z=(()=>{class i{constructor(e,r){this._platform=e,this._ngZone=r,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return os.E;const r=Yh(e),o=this._monitoredElements.get(r);if(o)return o.subject;const s=new dn.x,c="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,C6),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,C6)}}),s}stopMonitoring(e){const r=Yh(e),o=this._monitoredElements.get(r);o&&(o.unlisten(),o.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((e,r)=>this.stopMonitoring(r))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(fo),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),yZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const vZ=new d.OlP("MAT_INPUT_VALUE_ACCESSOR"),bZ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let wZ=0;const xZ=Yq(class{constructor(i,n,e,r){this._defaultErrorStateMatcher=i,this._parentForm=n,this._parentFormGroup=e,this.ngControl=r,this.stateChanges=new dn.x}});let D6=(()=>{class i extends xZ{get disabled(){return this._disabled}set disabled(e){this._disabled=Bn(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(YW.required)??!1}set required(e){this._required=Bn(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&j3().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Bn(e)}constructor(e,r,o,s,c,h,p,_,w,I){super(h,s,c,o),this._elementRef=e,this._platform=r,this._autofillMonitor=_,this._formField=I,this._uid="mat-input-"+wZ++,this.focused=!1,this.stateChanges=new dn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>j3().has(B)),this._iOSKeyupListener=B=>{const Y=B.target;!Y.value&&0===Y.selectionStart&&0===Y.selectionEnd&&(Y.setSelectionRange(1,1),Y.setSelectionRange(0,0))};const A=this._elementRef.nativeElement,P=A.nodeName.toLowerCase();this._inputValueAccessor=p||A,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&w.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!I,this._isNativeSelect&&(this.controlType=A.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=e,e?r.setAttribute("placeholder",e):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){bZ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,r=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(fo),d.Y36(Wh,10),d.Y36(iM,8),d.Y36(oM,8),d.Y36(Kq),d.Y36(vZ,10),d.Y36(_Z),d.Y36(d.R0b),d.Y36(t6,8))},i.\u0275dir=d.lG2({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,r){1&e&&d.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&e&&(d.Ikx("id",r.id)("disabled",r.disabled)("required",r.required),d.uIk("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),d.ekj("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[d._Bn([{provide:e6,useExisting:i}]),d.qOj,d.TTD]}),i})(),EZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr,hF,hF,yZ,Nr]}),i})(),CZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr,Nr]}),i})(),eK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[W4,oo,Nr,nF,t7,CZ]}),i})();var tK=z(4266);const nK=["addListener","removeListener"],iK=["addEventListener","removeEventListener"],rK=["on","off"];function vC(i,n,e,r){if((0,Bo.m)(e)&&(r=e,e=void 0),r)return vC(i,n,e).pipe(RN(r));const[o,s]=function aK(i){return(0,Bo.m)(i.addEventListener)&&(0,Bo.m)(i.removeEventListener)}(i)?iK.map(c=>h=>i[c](n,h,e)):function oK(i){return(0,Bo.m)(i.addListener)&&(0,Bo.m)(i.removeListener)}(i)?nK.map(M6(i,n)):function sK(i){return(0,Bo.m)(i.on)&&(0,Bo.m)(i.off)}(i)?rK.map(M6(i,n)):[];if(!o&&(0,tK.z)(i))return(0,Mo.z)(c=>vC(c,n,e))((0,vc.Xf)(i));if(!o)throw new TypeError("Invalid event target");return new Nn.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return o(h),()=>s(h)})}function M6(i,n){return e=>r=>i[e](n,r)}var k6=z(1954);const bC={schedule(i){let n=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=bC;r&&(n=r.requestAnimationFrame,e=r.cancelAnimationFrame);const o=n(s=>{e=void 0,i(s)});return new qh.w0(()=>e?.(o))},requestAnimationFrame(...i){const{delegate:n}=bC;return(n?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:n}=bC;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0};var R6=z(2631);new class cK extends R6.v{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let o;n=n||r.shift();do{if(o=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===e&&r.shift());if(this._active=!1,o){for(;(n=r[0])&&n.id===e&&r.shift();)n.unsubscribe();throw o}}}(class lK extends k6.o{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,r=0){return null!==r&&r>0?super.requestAsyncId(n,e,r):(n.actions.push(this),n._scheduled||(n._scheduled=bC.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,e,r=0){var o;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,e,r);const{actions:s}=n;null!=e&&(null===(o=s[s.length-1])||void 0===o?void 0:o.id)!==e&&(bC.cancelAnimationFrame(e),n._scheduled=void 0)}});let vF,uK=1;const DM={};function P6(i){return i in DM&&(delete DM[i],!0)}const hK={setImmediate(i){const n=uK++;return DM[n]=!0,vF||(vF=Promise.resolve()),vF.then(()=>P6(n)&&i()),n},clearImmediate(i){P6(i)}},{setImmediate:fK,clearImmediate:mK}=hK,IM={setImmediate(...i){const{delegate:n}=IM;return(n?.setImmediate||fK)(...i)},clearImmediate(i){const{delegate:n}=IM;return(n?.clearImmediate||mK)(i)},delegate:void 0};new class gK extends R6.v{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let o;n=n||r.shift();do{if(o=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===e&&r.shift());if(this._active=!1,o){for(;(n=r[0])&&n.id===e&&r.shift();)n.unsubscribe();throw o}}}(class pK extends k6.o{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,r=0){return null!==r&&r>0?super.requestAsyncId(n,e,r):(n.actions.push(this),n._scheduled||(n._scheduled=IM.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,e,r=0){var o;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,e,r);const{actions:s}=n;null!=e&&(null===(o=s[s.length-1])||void 0===o?void 0:o.id)!==e&&(IM.clearImmediate(e),n._scheduled===e&&(n._scheduled=void 0))}});var vK=z(671);function O6(i=0,n,e=Uf.P){let r=-1;return null!=n&&((0,vK.K)(n)?e=n:r=n),new Nn.y(o=>{let s=function bK(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let c=0;return e.schedule(function(){o.closed||(o.next(c++),0<=r?this.schedule(void 0,r):o.complete())},s)})}function N6(i,n=Uf.z){return function yK(i){return(0,br.e)((n,e)=>{let r=!1,o=null,s=null,c=!1;const h=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const _=o;o=null,e.next(_)}c&&e.complete()},p=()=>{s=null,c&&e.complete()};n.subscribe((0,di.x)(e,_=>{r=!0,o=_,s||(0,vc.Xf)(i(_)).subscribe(s=(0,di.x)(e,h,p))},()=>{c=!0,(!r||!s||s.closed)&&e.complete()}))})}(()=>O6(i,n))}let F6=(()=>{class i{constructor(e,r,o){this._ngZone=e,this._platform=r,this._scrolled=new dn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Nn.y(r=>{this._globalSubscription||this._addGlobalListener();const o=e>0?this._scrolled.pipe(N6(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,It.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const o=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(Pn(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,e)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let o=Yh(r),s=e.getElementRef().nativeElement;do{if(o==s)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>vC(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.R0b),d.LFG(fo),d.LFG(pe,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),bF=(()=>{class i{constructor(e,r,o,s){this.elementRef=e,this.scrollDispatcher=r,this.ngZone=o,this.dir=s,this._destroyed=new dn.x,this._elementScrolled=new Nn.y(c=>this.ngZone.runOutsideAngular(()=>vC(this.elementRef.nativeElement,"scroll").pipe(Or(this._destroyed)).subscribe(c)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const r=this.elementRef.nativeElement,o=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=o?e.end:e.start),null==e.right&&(e.right=o?e.start:e.end),null!=e.bottom&&(e.top=r.scrollHeight-r.clientHeight-e.bottom),o&&0!=cC()?(null!=e.left&&(e.right=r.scrollWidth-r.clientWidth-e.left),2==cC()?e.left=e.right:1==cC()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=r.scrollWidth-r.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const r=this.elementRef.nativeElement;!function j9(){if(null==N_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return N_=!1,N_;if("scrollBehavior"in document.documentElement.style)N_=!0;else{const i=Element.prototype.scrollTo;N_=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return N_}()?(null!=e.top&&(r.scrollTop=e.top),null!=e.left&&(r.scrollLeft=e.left)):r.scrollTo(e)}measureScrollOffset(e){const r="left",o="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const c=this.dir&&"rtl"==this.dir.value;return"start"==e?e=c?o:r:"end"==e&&(e=c?r:o),c&&2==cC()?e==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:c&&1==cC()?e==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(F6),d.Y36(d.R0b),d.Y36(uM,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),i})(),L6=(()=>{class i{constructor(e,r,o){this._platform=e,this._change=new dn.x,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),o=e.documentElement,s=o.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||r.scrollY||o.scrollTop||0,left:-s.left||e.body.scrollLeft||r.scrollX||o.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(N6(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(fo),d.LFG(d.R0b),d.LFG(pe,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),TM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})(),EK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[hM,TM,hM,TM]}),i})();function wF(i){return(0,gt.U)(()=>i)}const U6=["*"],CK=["content"];function DK(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"div",2),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o._onBackdropClicked())}),d.qZA()}if(2&i){const e=d.oxw();d.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function IK(i,n){1&i&&(d.TgZ(0,"mat-drawer-content"),d.Hsn(1,2),d.qZA())}const TK=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],SK=["mat-drawer","mat-drawer-content","*"],AK={transformDrawer:mM("transform",[U_("open, open-instant",iu({transform:"none",visibility:"visible"})),U_("void",iu({"box-shadow":"none",visibility:"hidden"})),mC("void => open-instant",fC("0ms")),mC("void <=> open, open-instant => void",fC("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},MK=new d.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function kK(){return!1}}),B6=new d.OlP("MAT_DRAWER_CONTAINER");let SM=(()=>{class i extends bF{constructor(e,r,o,s,c){super(o,s,c),this._changeDetectorRef=e,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.sBO),d.Y36((0,d.Gpc)(()=>H6)),d.Y36(d.SBq),d.Y36(F6),d.Y36(d.R0b))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-drawer-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,r){2&e&&d.Udp("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[d._Bn([{provide:bF,useExisting:i}]),d.qOj],ngContentSelectors:U6,decls:1,vars:0,template:function(e,r){1&e&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),V6=(()=>{class i{get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=Bn(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=Bn(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(Bn(e))}constructor(e,r,o,s,c,h,p,_){this._elementRef=e,this._focusTrapFactory=r,this._focusMonitor=o,this._platform=s,this._ngZone=c,this._interactivityChecker=h,this._doc=p,this._container=_,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new dn.x,this._animationEnd=new dn.x,this._animationState="void",this.openedChange=new d.vpe(!0),this._openedStream=this.openedChange.pipe(Pn(w=>w),(0,gt.U)(()=>{})),this.openedStart=this._animationStarted.pipe(Pn(w=>w.fromState!==w.toState&&0===w.toState.indexOf("open")),wF(void 0)),this._closedStream=this.openedChange.pipe(Pn(w=>!w),(0,gt.U)(()=>{})),this.closedStart=this._animationStarted.pipe(Pn(w=>w.fromState!==w.toState&&"void"===w.toState),wF(void 0)),this._destroyed=new dn.x,this.onPositionChanged=new d.vpe,this._modeChanged=new dn.x,this.openedChange.subscribe(w=>{w?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{vC(this._elementRef.nativeElement,"keydown").pipe(Pn(w=>27===w.keyCode&&!this.disableClose&&!aM(w)),Or(this._destroyed)).subscribe(w=>this._ngZone.run(()=>{this.close(),w.stopPropagation(),w.preventDefault()}))}),this._animationEnd.pipe((0,Dd.x)((w,I)=>w.fromState===I.fromState&&w.toState===I.toState)).subscribe(w=>{const{fromState:I,toState:A}=w;(0===A.indexOf("open")&&"void"===I||"void"===A&&0===I.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{e.removeEventListener("blur",o),e.removeEventListener("mousedown",o),e.removeAttribute("tabindex")};e.addEventListener("blur",o),e.addEventListener("mousedown",o)})),e.focus(r)}_focusByCssSelector(e,r){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,r)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,r){e&&r&&(this._openedVia=r);const o=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),o}_setOpen(e,r,o){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(o)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Hr(1)).subscribe(c=>s(c?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const r=this._elementRef.nativeElement,o=r.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,r)),o.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(Pq),d.Y36(dM),d.Y36(fo),d.Y36(d.R0b),d.Y36(t4),d.Y36(pe,8),d.Y36(B6,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-drawer"]],viewQuery:function(e,r){if(1&e&&d.Gf(CK,5),2&e){let o;d.iGM(o=d.CRH())&&(r._content=o.first)}},hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer"],hostVars:12,hostBindings:function(e,r){1&e&&d.WFA("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),2&e&&(d.uIk("align",null),d.d8E("@transform",r._animationState),d.ekj("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:U6,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,r){1&e&&(d.F$t(),d.TgZ(0,"div",0,1),d.Hsn(2),d.qZA())},dependencies:[bF],encapsulation:2,data:{animation:[AK.transformDrawer]},changeDetection:0}),i})(),H6=(()=>{class i{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=Bn(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:Bn(e)}get scrollable(){return this._userContent||this._content}constructor(e,r,o,s,c,h=!1,p){this._dir=e,this._element=r,this._ngZone=o,this._changeDetectorRef=s,this._animationMode=p,this._drawers=new d.n_E,this.backdropClick=new d.vpe,this._destroyed=new dn.x,this._doCheckSubject=new dn.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new dn.x,e&&e.change.pipe(Or(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),c.change().pipe(Or(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}ngAfterContentInit(){this._allDrawers.changes.pipe(kc(this._allDrawers),Or(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(kc(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(QE(10),Or(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const o=this._left._getWidth();e+=o,r-=o}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const o=this._right._getWidth();r+=o,e-=o}e=e||null,r=r||null,(e!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:e,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(Pn(r=>r.fromState!==r.toState),Or(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(Or(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e&&e.onPositionChanged.pipe(Or(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Hr(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(Or((0,rs.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const r=this._element.nativeElement.classList,o="mat-drawer-container-has-open";e?r.add(o):r.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(uM,8),d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(d.sBO),d.Y36(L6),d.Y36(MK),d.Y36(d.QbO,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(e,r,o){if(1&e&&(d.Suo(o,SM,5),d.Suo(o,V6,5)),2&e){let s;d.iGM(s=d.CRH())&&(r._content=s.first),d.iGM(s=d.CRH())&&(r._allDrawers=s)}},viewQuery:function(e,r){if(1&e&&d.Gf(SM,5),2&e){let o;d.iGM(o=d.CRH())&&(r._userContent=o.first)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[d._Bn([{provide:B6,useExisting:i}])],ngContentSelectors:SK,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,r){1&e&&(d.F$t(TK),d.YNc(0,DK,1,2,"div",0),d.Hsn(1),d.Hsn(2,1),d.YNc(3,IK,2,0,"mat-drawer-content",1)),2&e&&(d.Q6J("ngIf",r.hasBackdrop),d.xp6(3),d.Q6J("ngIf",!r._content))},dependencies:[ci,SM],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),i})(),RK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[oo,Nr,TM,TM,Nr]}),i})();function z6(i){return!!i&&(i instanceof Nn.y||(0,Bo.m)(i.lift)&&(0,Bo.m)(i.subscribe))}const PK=[[["caption"]],[["colgroup"],["col"]]],OK=["caption","colgroup, col"];function xF(i){return class extends i{get sticky(){return this._sticky}set sticky(n){const e=this._sticky;this._sticky=Bn(n),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const n=this._hasStickyChanged;return this._hasStickyChanged=!1,n}resetStickyChanged(){this._hasStickyChanged=!1}constructor(...n){super(...n),this._sticky=!1,this._hasStickyChanged=!1}}}const Kb=new d.OlP("CDK_TABLE");let Qb=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkCellDef",""]]}),i})(),Xb=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkHeaderCellDef",""]]}),i})(),AM=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkFooterCellDef",""]]}),i})();class UK{}const BK=xF(UK);let Qh=(()=>{class i extends BK{get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const r=this._stickyEnd;this._stickyEnd=Bn(e),this._hasStickyChanged=r!==this._stickyEnd}constructor(e){super(),this._table=e,this._stickyEnd=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Kb,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,r,o){if(1&e&&(d.Suo(o,Qb,5),d.Suo(o,Xb,5),d.Suo(o,AM,5)),2&e){let s;d.iGM(s=d.CRH())&&(r.cell=s.first),d.iGM(s=d.CRH())&&(r.headerCell=s.first),d.iGM(s=d.CRH())&&(r.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[d._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),d.qOj]}),i})();class EF{constructor(n,e){e.nativeElement.classList.add(...n._columnCssClassName)}}let CF=(()=>{class i extends EF{constructor(e,r){super(e,r)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Qh),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[d.qOj]}),i})(),DF=(()=>{class i extends EF{constructor(e,r){if(super(e,r),1===e._table?._elementRef.nativeElement.nodeType){const o=e._table._elementRef.nativeElement.getAttribute("role");r.nativeElement.setAttribute("role","grid"===o||"treegrid"===o?"gridcell":"cell")}}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Qh),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[d.qOj]}),i})();class $6{constructor(){this.tasks=[],this.endTasks=[]}}const IF=new d.OlP("_COALESCED_STYLE_SCHEDULER");let G6=(()=>{class i{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new dn.x}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new $6,this._getScheduleObservable().pipe(Or(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new $6;for(const r of e.tasks)r();for(const r of e.endTasks)r()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,Hn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Hr(1))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),TF=(()=>{class i{constructor(e,r){this.template=e,this._differs=r}ngOnChanges(e){if(!this._columnsDiffer){const r=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof wC?e.headerCell.template:this instanceof xC?e.footerCell.template:e.cell.template}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(d.ZZ4))},i.\u0275dir=d.lG2({type:i,features:[d.TTD]}),i})();class VK extends TF{}const HK=xF(VK);let wC=(()=>{class i extends HK{constructor(e,r,o){super(e,r),this._table=o}ngOnChanges(e){super.ngOnChanges(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(d.ZZ4),d.Y36(Kb,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[d.qOj,d.TTD]}),i})();class zK extends TF{}const jK=xF(zK);let xC=(()=>{class i extends jK{constructor(e,r,o){super(e,r),this._table=o}ngOnChanges(e){super.ngOnChanges(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(d.ZZ4),d.Y36(Kb,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[d.qOj,d.TTD]}),i})(),MM=(()=>{class i extends TF{constructor(e,r,o){super(e,r),this._table=o}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc),d.Y36(d.ZZ4),d.Y36(Kb,8))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[d.qOj]}),i})(),Xh=(()=>{class i{constructor(e){this._viewContainer=e,i.mostRecentCellOutlet=this}ngOnDestroy(){i.mostRecentCellOutlet===this&&(i.mostRecentCellOutlet=null)}}return i.mostRecentCellOutlet=null,i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b))},i.\u0275dir=d.lG2({type:i,selectors:[["","cdkCellOutlet",""]]}),i})(),SF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&d.GkF(0,0)},dependencies:[Xh],encapsulation:2}),i})(),MF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&d.GkF(0,0)},dependencies:[Xh],encapsulation:2}),i})(),kM=(()=>{class i{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.Rgc))},i.\u0275dir=d.lG2({type:i,selectors:[["ng-template","cdkNoDataRow",""]]}),i})();const W6=["top","bottom","left","right"];class $K{constructor(n,e,r,o,s=!0,c=!0,h){this._isNativeHtmlTable=n,this._stickCellCss=e,this.direction=r,this._coalescedStyleScheduler=o,this._isBrowser=s,this._needsPositionStickyOnElement=c,this._positionListener=h,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(n,e){const r=[];for(const o of n)if(o.nodeType===o.ELEMENT_NODE){r.push(o);for(let s=0;s<o.children.length;s++)r.push(o.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const o of r)this._removeStickyStyle(o,e)})}updateStickyColumns(n,e,r,o=!0){if(!n.length||!this._isBrowser||!e.some(A=>A)&&!r.some(A=>A))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=n[0],c=s.children.length,h=this._getCellWidths(s,o),p=this._getStickyStartColumnPositions(h,e),_=this._getStickyEndColumnPositions(h,r),w=e.lastIndexOf(!0),I=r.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const A="rtl"===this.direction,P=A?"right":"left",B=A?"left":"right";for(const Y of n)for(let ee=0;ee<c;ee++){const ve=Y.children[ee];e[ee]&&this._addStickyStyle(ve,P,p[ee],ee===w),r[ee]&&this._addStickyStyle(ve,B,_[ee],ee===I)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===w?[]:h.slice(0,w+1).map((Y,ee)=>e[ee]?Y:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===I?[]:h.slice(I).map((Y,ee)=>r[ee+I]?Y:null).reverse()}))})}stickRows(n,e,r){if(!this._isBrowser)return;const o="bottom"===r?n.slice().reverse():n,s="bottom"===r?e.slice().reverse():e,c=[],h=[],p=[];for(let w=0,I=0;w<o.length;w++){if(!s[w])continue;c[w]=I;const A=o[w];p[w]=this._isNativeHtmlTable?Array.from(A.children):[A];const P=A.getBoundingClientRect().height;I+=P,h[w]=P}const _=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let w=0;w<o.length;w++){if(!s[w])continue;const I=c[w],A=w===_;for(const P of p[w])this._addStickyStyle(P,r,I,A)}"top"===r?this._positionListener?.stickyHeaderRowsUpdated({sizes:h,offsets:c,elements:p}):this._positionListener?.stickyFooterRowsUpdated({sizes:h,offsets:c,elements:p})})}updateStickyFooterContainer(n,e){if(!this._isNativeHtmlTable)return;const r=n.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(o=>!o)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1)})}_removeStickyStyle(n,e){for(const o of e)n.style[o]="",n.classList.remove(this._borderCellCss[o]);W6.some(o=>-1===e.indexOf(o)&&n.style[o])?n.style.zIndex=this._getCalculatedZIndex(n):(n.style.zIndex="",this._needsPositionStickyOnElement&&(n.style.position=""),n.classList.remove(this._stickCellCss))}_addStickyStyle(n,e,r,o){n.classList.add(this._stickCellCss),o&&n.classList.add(this._borderCellCss[e]),n.style[e]=`${r}px`,n.style.zIndex=this._getCalculatedZIndex(n),this._needsPositionStickyOnElement&&(n.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(n){const e={top:100,bottom:10,left:1,right:1};let r=0;for(const o of W6)n.style[o]&&(r+=e[o]);return r?`${r}`:""}_getCellWidths(n,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const r=[],o=n.children;for(let s=0;s<o.length;s++)r.push(o[s].getBoundingClientRect().width);return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(n,e){const r=[];let o=0;for(let s=0;s<n.length;s++)e[s]&&(r[s]=o,o+=n[s]);return r}_getStickyEndColumnPositions(n,e){const r=[];let o=0;for(let s=n.length;s>0;s--)e[s]&&(r[s]=o,o+=n[s]);return r}}const kF=new d.OlP("CDK_SPL");let RM=(()=>{class i{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["","rowOutlet",""]]}),i})(),PM=(()=>{class i{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["","headerRowOutlet",""]]}),i})(),OM=(()=>{class i{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["","footerRowOutlet",""]]}),i})(),NM=(()=>{class i{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.s_b),d.Y36(d.SBq))},i.\u0275dir=d.lG2({type:i,selectors:[["","noDataRowOutlet",""]]}),i})(),FM=(()=>{class i{get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=Bn(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=Bn(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,r,o,s,c,h,p,_,w,I,A,P){this._differs=e,this._changeDetectorRef=r,this._elementRef=o,this._dir=c,this._platform=p,this._viewRepeater=_,this._coalescedStyleScheduler=w,this._viewportRuler=I,this._stickyPositioningListener=A,this._ngZone=P,this._onDestroy=new dn.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new d.vpe,this.viewChange=new xa.X({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=h,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(Or(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),sF(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,r,(o,s,c)=>this._getEmbeddedViewArgs(o.item,c),o=>o.item.data,o=>{1===o.operation&&o.context&&this._renderCellTemplateForItem(o.record.item.rowDef,o.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(o=>{r.get(o.currentIndex).context.$implicit=o.item.data}),this._updateNoDataRow(),this._ngZone&&d.R0b.isInAngularZone()?this._ngZone.onStable.pipe(Hr(1),Or(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),o=this._elementRef.nativeElement.querySelector("thead");o&&(o.style.display=e.length?"":"none");const s=this._headerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),o=this._elementRef.nativeElement.querySelector("tfoot");o&&(o.style.display=e.length?"":"none");const s=this._footerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),o=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...r,...o],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,c)=>{this._addStickyColumnStyles([s],this._headerRowDefs[c])}),this._rowDefs.forEach(s=>{const c=[];for(let h=0;h<r.length;h++)this._renderRows[h].rowDef===s&&c.push(r[h]);this._addStickyColumnStyles(c,s)}),o.forEach((s,c)=>{this._addStickyColumnStyles([s],this._footerRowDefs[c])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let o=0;o<this._data.length;o++){let s=this._data[o];const c=this._getRenderRowsForData(s,o,r.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let h=0;h<c.length;h++){let p=c[h];const _=this._cachedRenderRowsMap.get(p.data);_.has(p.rowDef)?_.get(p.rowDef).push(p):_.set(p.rowDef,[p]),e.push(p)}}return e}_getRenderRowsForData(e,r,o){return this._getRowDefs(e,r).map(c=>{const h=o&&o.has(c)?o.get(c):[];if(h.length){const p=h.shift();return p.dataIndex=r,p}return{data:e,rowDef:c,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),LM(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=LM(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=LM(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=LM(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(r=>!r.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(c,h)=>c||!!h.getColumnsDiff(),r=this._rowDefs.reduce(e,!1);r&&this._forceRenderDataRows();const o=this._headerRowDefs.reduce(e,!1);o&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),r||o||s}_switchDataSource(e){this._data=[],sF(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;sF(this.dataSource)?e=this.dataSource.connect(this):z6(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=(0,It.of)(this.dataSource)),this._renderChangeSubscription=e.pipe(Or(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,r)=>this._renderRow(this._headerRowOutlet,e,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,r)=>this._renderRow(this._footerRowOutlet,e,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,r){const o=Array.from(r.columns||[]).map(h=>this._columnDefsByName.get(h)),s=o.map(h=>h.sticky),c=o.map(h=>h.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,c,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const r=[];for(let o=0;o<e.viewContainer.length;o++){const s=e.viewContainer.get(o);r.push(s.rootNodes[0])}return r}_getRowDefs(e,r){if(1==this._rowDefs.length)return[this._rowDefs[0]];let o=[];if(this.multiTemplateDataRows)o=this._rowDefs.filter(s=>!s.when||s.when(r,e));else{let s=this._rowDefs.find(c=>c.when&&c.when(r,e))||this._defaultRowDef;s&&o.push(s)}return o}_getEmbeddedViewArgs(e,r){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:r}}_renderRow(e,r,o,s={}){const c=e.viewContainer.createEmbeddedView(r.template,s,o);return this._renderCellTemplateForItem(r,s),c}_renderCellTemplateForItem(e,r){for(let o of this._getCellTemplates(e))Xh.mostRecentCellOutlet&&Xh.mostRecentCellOutlet._viewContainer.createEmbeddedView(o,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let r=0,o=e.length;r<o;r++){const c=e.get(r).context;c.count=o,c.first=0===r,c.last=r===o-1,c.even=r%2==0,c.odd=!c.even,this.multiTemplateDataRows?(c.dataIndex=this._renderRows[r].dataIndex,c.renderIndex=r):c.index=this._renderRows[r].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,r=>{const o=this._columnDefsByName.get(r);return e.extractCellTemplate(o)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),r=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const o of r){const s=this._document.createElement(o.tag);s.setAttribute("role","rowgroup");for(const c of o.outlets)s.appendChild(c.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(r,o)=>r||o.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new $K(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:(0,It.of)()).pipe(Or(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const r=0===this._rowOutlet.viewContainer.length;if(r===this._isShowingNoDataRow)return;const o=this._noDataRowOutlet.viewContainer;if(r){const s=o.createEmbeddedView(e.templateRef),c=s.rootNodes[0];1===s.rootNodes.length&&c?.nodeType===this._document.ELEMENT_NODE&&(c.setAttribute("role","row"),c.classList.add(e._contentClassName))}else o.clear();this._isShowingNoDataRow=r}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.ZZ4),d.Y36(d.sBO),d.Y36(d.SBq),d.$8M("role"),d.Y36(uM,8),d.Y36(pe),d.Y36(fo),d.Y36(hC),d.Y36(IF),d.Y36(L6),d.Y36(kF,12),d.Y36(d.R0b,8))},i.\u0275cmp=d.Xpm({type:i,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,r,o){if(1&e&&(d.Suo(o,kM,5),d.Suo(o,Qh,5),d.Suo(o,MM,5),d.Suo(o,wC,5),d.Suo(o,xC,5)),2&e){let s;d.iGM(s=d.CRH())&&(r._noDataRow=s.first),d.iGM(s=d.CRH())&&(r._contentColumnDefs=s),d.iGM(s=d.CRH())&&(r._contentRowDefs=s),d.iGM(s=d.CRH())&&(r._contentHeaderRowDefs=s),d.iGM(s=d.CRH())&&(r._contentFooterRowDefs=s)}},viewQuery:function(e,r){if(1&e&&(d.Gf(RM,7),d.Gf(PM,7),d.Gf(OM,7),d.Gf(NM,7)),2&e){let o;d.iGM(o=d.CRH())&&(r._rowOutlet=o.first),d.iGM(o=d.CRH())&&(r._headerRowOutlet=o.first),d.iGM(o=d.CRH())&&(r._footerRowOutlet=o.first),d.iGM(o=d.CRH())&&(r._noDataRowOutlet=o.first)}},hostAttrs:["ngSkipHydration","",1,"cdk-table"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[d._Bn([{provide:Kb,useExisting:i},{provide:hC,useClass:D4},{provide:IF,useClass:G6},{provide:kF,useValue:null}])],ngContentSelectors:OK,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,r){1&e&&(d.F$t(PK),d.Hsn(0),d.Hsn(1,1),d.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[RM,PM,OM,NM],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),i})();function LM(i,n){return i.concat(Array.from(n))}let WK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[EK]}),i})();const qK=[[["caption"]],[["colgroup"],["col"]]],YK=["caption","colgroup, col"];let Y6=(()=>{class i extends FM{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}ngOnInit(){super.ngOnInit(),this._isNativeHtmlTable&&this._elementRef.nativeElement.querySelector("tbody").classList.add("mdc-data-table__content")}}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:["ngSkipHydration","",1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(e,r){2&e&&d.ekj("mdc-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],features:[d._Bn([{provide:FM,useExisting:i},{provide:Kb,useExisting:i},{provide:IF,useClass:G6},{provide:hC,useClass:D4},{provide:kF,useValue:null}]),d.qOj],ngContentSelectors:YK,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,r){1&e&&(d.F$t(qK),d.Hsn(0),d.Hsn(1,1),d.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[RM,PM,OM,NM],styles:[".mdc-data-table{border-radius:var(--mdc-shape-medium, 4px);border-width:1px;border-style:solid}.mdc-data-table .mdc-data-table__header-cell:first-child{border-top-left-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table .mdc-data-table__header-cell:first-child,.mdc-data-table .mdc-data-table__header-cell:first-child[dir=rtl]{border-top-right-radius:var(--mdc-shape-medium, 4px);border-top-left-radius:0}.mdc-data-table .mdc-data-table__header-cell:last-child{border-top-right-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table .mdc-data-table__header-cell:last-child,.mdc-data-table .mdc-data-table__header-cell:last-child[dir=rtl]{border-top-left-radius:var(--mdc-shape-medium, 4px);border-top-right-radius:0}.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child{border-bottom-left-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child,.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child[dir=rtl]{border-bottom-right-radius:var(--mdc-shape-medium, 4px);border-bottom-left-radius:0}.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child{border-bottom-right-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child,.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child[dir=rtl]{border-bottom-left-radius:var(--mdc-shape-medium, 4px);border-bottom-right-radius:0}.mdc-data-table__cell,.mdc-data-table__header-cell{border-bottom-width:1px;border-bottom-style:solid}.mdc-data-table__pagination{border-top-width:1px;border-top-style:solid}.mdc-data-table__row:last-child .mdc-data-table__cell{border-bottom:none}.mdc-data-table__row{height:52px}.mdc-data-table__pagination{min-height:52px}.mdc-data-table__header-row{height:56px}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__cell--checkbox{width:1px}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__header-cell--checkbox{width:1px}.mdc-data-table__sort-icon-button{width:28px;height:28px;padding:2px;transform:rotate(0.0001deg);margin-left:4px;margin-right:0;opacity:0}.mdc-data-table__sort-icon-button .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:28px;height:28px;margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:28px;left:50%;width:28px;transform:translate(-50%, -50%)}[dir=rtl] .mdc-data-table__sort-icon-button,.mdc-data-table__sort-icon-button[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__header-cell--sorted-descending .mdc-data-table__sort-icon-button{transform:rotate(-180deg)}.mdc-data-table__sort-icon-button:focus,.mdc-data-table__header-cell:hover .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--sorted .mdc-data-table__sort-icon-button{opacity:1}.mdc-data-table__header-cell--with-sort{cursor:pointer}.mdc-data-table__sort-status-label{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.mdc-data-table--sticky-header .mdc-data-table__header-cell{position:sticky;top:0;z-index:1}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__pagination{box-sizing:border-box;display:flex;justify-content:flex-end}.mdc-data-table__pagination-trailing{margin-left:4px;margin-right:0;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-end}[dir=rtl] .mdc-data-table__pagination-trailing,.mdc-data-table__pagination-trailing[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__pagination-navigation{align-items:center;display:flex}.mdc-data-table__pagination-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__pagination-button .mdc-button__icon,.mdc-data-table__pagination-button .mdc-button__icon[dir=rtl]{transform:rotate(180deg)}[dir=rtl] .mdc-data-table__pagination-button,.mdc-data-table__pagination-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__pagination-total{margin-left:14px;margin-right:36px;white-space:nowrap}[dir=rtl] .mdc-data-table__pagination-total,.mdc-data-table__pagination-total[dir=rtl]{margin-left:36px;margin-right:14px}.mdc-data-table__pagination-rows-per-page{margin-left:0;margin-right:22px;align-items:center;display:inline-flex}[dir=rtl] .mdc-data-table__pagination-rows-per-page,.mdc-data-table__pagination-rows-per-page[dir=rtl]{margin-left:22px;margin-right:0}.mdc-data-table__pagination-rows-per-page-label{margin-left:0;margin-right:12px;white-space:nowrap}[dir=rtl] .mdc-data-table__pagination-rows-per-page-label,.mdc-data-table__pagination-rows-per-page-label[dir=rtl]{margin-left:12px;margin-right:0}.mdc-data-table__pagination-rows-per-page-select{min-width:var(--mdc-menu-min-width, 80px);margin:8px 0}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor{width:100%;min-width:80px}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor{height:36px}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-data-table__pagination-rows-per-page-select .mdc-select__dropdown-icon{width:20px;height:20px}.mdc-data-table__pagination-rows-per-page-select.mdc-select--outlined .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 56px)}.mdc-data-table__pagination-rows-per-page-select .mdc-list-item.mdc-list-item--with-one-line{height:36px}.mdc-data-table__progress-indicator{display:none;position:absolute;width:100%}.mdc-data-table--in-progress .mdc-data-table__progress-indicator{display:block}.mdc-data-table__scrim{background-color:var(--mdc-theme-surface, #fff);height:100%;opacity:.32;position:absolute;top:0;width:100%}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table-sticky{position:sticky !important}.mat-mdc-table{table-layout:auto;white-space:normal}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table .mat-mdc-row:hover,.mat-mdc-table .mat-mdc-footer-row:hover{background-color:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2}),i})(),RF=(()=>{class i extends Qb{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matCellDef",""]],features:[d._Bn([{provide:Qb,useExisting:i}]),d.qOj]}),i})(),PF=(()=>{class i extends Xb{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matHeaderCellDef",""]],features:[d._Bn([{provide:Xb,useExisting:i}]),d.qOj]}),i})(),OF=(()=>{class i extends Qh{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[d._Bn([{provide:Qh,useExisting:i},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),d.qOj]}),i})(),NF=(()=>{class i extends CF{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[d.qOj]}),i})(),FF=(()=>{class i extends DF{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[d.qOj]}),i})(),Z6=(()=>{class i extends wC{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[d._Bn([{provide:wC,useExisting:i}]),d.qOj]}),i})(),K6=(()=>{class i extends MM{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275dir=d.lG2({type:i,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[d._Bn([{provide:MM,useExisting:i}]),d.qOj]}),i})(),Q6=(()=>{class i extends SF{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[d._Bn([{provide:SF,useExisting:i}]),d.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&d.GkF(0,0)},dependencies:[Xh],encapsulation:2}),i})(),X6=(()=>{class i extends MF{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[d._Bn([{provide:MF,useExisting:i}]),d.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&d.GkF(0,0)},dependencies:[Xh],encapsulation:2}),i})(),nQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr,WK,Nr]}),i})();const rQ=["*",[["mat-toolbar-row"]]],oQ=["*","mat-toolbar-row"],sQ=tF(class{constructor(i){this._elementRef=i}});let J6=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),aQ=(()=>{class i extends sQ{constructor(e,r,o){super(e),this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(fo),d.Y36(pe))},i.\u0275cmp=d.Xpm({type:i,selectors:[["mat-toolbar"]],contentQueries:function(e,r,o){if(1&e&&d.Suo(o,J6,5),2&e){let s;d.iGM(s=d.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,r){2&e&&d.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[d.qOj],ngContentSelectors:oQ,decls:2,vars:0,template:function(e,r){1&e&&(d.F$t(rQ),d.Hsn(0),d.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),i})(),lQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Nr,Nr]}),i})();function eH(i){return new d.vHH(3e3,!1)}function lp(i){switch(i.length){case 0:return new pC;case 1:return i[0];default:return new U4(i)}}function tH(i,n,e=new Map,r=new Map){const o=[],s=[];let c=-1,h=null;if(n.forEach(p=>{const _=p.get("offset"),w=_==c,I=w&&h||new Map;p.forEach((A,P)=>{let B=P,Y=A;if("offset"!==P)switch(B=i.normalizePropertyName(B,o),Y){case"!":Y=e.get(P);break;case Zh:Y=r.get(P);break;default:Y=i.normalizeStyleValue(P,B,Y,o)}I.set(B,Y)}),w||s.push(I),h=I,c=_}),o.length)throw function kQ(i){return new d.vHH(3502,!1)}();return s}function LF(i,n,e,r){switch(n){case"start":i.onStart(()=>r(e&&UF(e,"start",i)));break;case"done":i.onDone(()=>r(e&&UF(e,"done",i)));break;case"destroy":i.onDestroy(()=>r(e&&UF(e,"destroy",i)))}}function UF(i,n,e){const s=BF(i.element,i.triggerName,i.fromState,i.toState,n||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),c=i._data;return null!=c&&(s._data=c),s}function BF(i,n,e,r,o="",s=0,c){return{element:i,triggerName:n,fromState:e,toState:r,phaseName:o,totalTime:s,disabled:!!c}}function nl(i,n,e){let r=i.get(n);return r||i.set(n,r=e),r}function nH(i){const n=i.indexOf(":");return[i.substring(1,n),i.slice(n+1)]}const jQ=(()=>typeof document>"u"?null:document.documentElement)();function VF(i){const n=i.parentNode||i.host||null;return n===jQ?null:n}let z_=null,iH=!1;function rH(i,n){for(;n;){if(n===i)return!0;n=VF(n)}return!1}function oH(i,n,e){if(e)return Array.from(i.querySelectorAll(n));const r=i.querySelector(n);return r?[r]:[]}let sH=(()=>{class i{validateStyleProperty(e){return function GQ(i){z_||(z_=function WQ(){return typeof document<"u"?document.body:null}()||{},iH=!!z_.style&&"WebkitAppearance"in z_.style);let n=!0;return z_.style&&!function $Q(i){return"ebkit"==i.substring(1,6)}(i)&&(n=i in z_.style,!n&&iH&&(n="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in z_.style)),n}(e)}matchesElement(e,r){return!1}containsElement(e,r){return rH(e,r)}getParentElement(e){return VF(e)}query(e,r,o){return oH(e,r,o)}computeStyle(e,r,o){return o||""}animate(e,r,o,s,c,h=[],p){return new pC(o,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),HF=(()=>{class i{}return i.NOOP=new sH,i})();const qQ=1e3,zF="ng-enter",UM="ng-leave",BM="ng-trigger",VM=".ng-trigger",lH="ng-animating",jF=".ng-animating";function Jh(i){if("number"==typeof i)return i;const n=i.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:$F(parseFloat(n[1]),n[2])}function $F(i,n){return"s"===n?i*qQ:i}function HM(i,n,e){return i.hasOwnProperty("duration")?i:function ZQ(i,n,e){let o,s=0,c="";if("string"==typeof i){const h=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return n.push(eH()),{duration:0,delay:0,easing:""};o=$F(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=$F(parseFloat(p),h[4]));const _=h[5];_&&(c=_)}else o=i;if(!e){let h=!1,p=n.length;o<0&&(n.push(function cQ(){return new d.vHH(3100,!1)}()),h=!0),s<0&&(n.push(function dQ(){return new d.vHH(3101,!1)}()),h=!0),h&&n.splice(p,0,eH())}return{duration:o,delay:s,easing:c}}(i,n,e)}function EC(i,n={}){return Object.keys(i).forEach(e=>{n[e]=i[e]}),n}function cH(i){const n=new Map;return Object.keys(i).forEach(e=>{n.set(e,i[e])}),n}function cp(i,n=new Map,e){if(e)for(let[r,o]of e)n.set(r,o);for(let[r,o]of i)n.set(r,o);return n}function ru(i,n,e){n.forEach((r,o)=>{const s=WF(o);e&&!e.has(o)&&e.set(o,i.style[s]),i.style[s]=r})}function j_(i,n){n.forEach((e,r)=>{const o=WF(r);i.style[o]=""})}function CC(i){return Array.isArray(i)?1==i.length?i[0]:F4(i):i}const GF=new RegExp("{{\\s*(.+?)\\s*}}","g");function uH(i){let n=[];if("string"==typeof i){let e;for(;e=GF.exec(i);)n.push(e[1]);GF.lastIndex=0}return n}function DC(i,n,e){const r=i.toString(),o=r.replace(GF,(s,c)=>{let h=n[c];return null==h&&(e.push(function hQ(i){return new d.vHH(3003,!1)}()),h=""),h.toString()});return o==r?i:o}function zM(i){const n=[];let e=i.next();for(;!e.done;)n.push(e.value),e=i.next();return n}const XQ=/-+([a-z0-9])/g;function WF(i){return i.replace(XQ,(...n)=>n[1].toUpperCase())}function il(i,n,e){switch(n.type){case 7:return i.visitTrigger(n,e);case 0:return i.visitState(n,e);case 1:return i.visitTransition(n,e);case 2:return i.visitSequence(n,e);case 3:return i.visitGroup(n,e);case 4:return i.visitAnimate(n,e);case 5:return i.visitKeyframes(n,e);case 6:return i.visitStyle(n,e);case 8:return i.visitReference(n,e);case 9:return i.visitAnimateChild(n,e);case 10:return i.visitAnimateRef(n,e);case 11:return i.visitQuery(n,e);case 12:return i.visitStagger(n,e);default:throw function fQ(i){return new d.vHH(3004,!1)}()}}function hH(i,n){return window.getComputedStyle(i)[n]}const jM="*";function tX(i,n){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(r=>function nX(i,n,e){if(":"==i[0]){const p=function iX(i,n){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return n.push(function TQ(i){return new d.vHH(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof p)return void n.push(p);i=p}const r=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function IQ(i){return new d.vHH(3015,!1)}()),n;const o=r[1],s=r[2],c=r[3];n.push(fH(o,c));"<"==s[0]&&!(o==jM&&c==jM)&&n.push(fH(c,o))}(r,e,n)):e.push(i),e}const $M=new Set(["true","1"]),GM=new Set(["false","0"]);function fH(i,n){const e=$M.has(i)||GM.has(i),r=$M.has(n)||GM.has(n);return(o,s)=>{let c=i==jM||i==o,h=n==jM||n==s;return!c&&e&&"boolean"==typeof o&&(c=o?$M.has(i):GM.has(i)),!h&&r&&"boolean"==typeof s&&(h=s?$M.has(n):GM.has(n)),c&&h}}const rX=new RegExp("s*:selfs*,?","g");function qF(i,n,e,r){return new oX(i).build(n,e,r)}class oX{constructor(n){this._driver=n}build(n,e,r){const o=new lX(e);return this._resetContextStyleTimingState(o),il(this,CC(n),o)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let r=e.queryCount=0,o=e.depCount=0;const s=[],c=[];return"@"==n.name.charAt(0)&&e.errors.push(function pQ(){return new d.vHH(3006,!1)}()),n.definitions.forEach(h=>{if(this._resetContextStyleTimingState(e),0==h.type){const p=h,_=p.name;_.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,s.push(this.visitState(p,e))}),p.name=_}else if(1==h.type){const p=this.visitTransition(h,e);r+=p.queryCount,o+=p.depCount,c.push(p)}else e.errors.push(function gQ(){return new d.vHH(3007,!1)}())}),{type:7,name:n.name,states:s,transitions:c,queryCount:r,depCount:o,options:null}}visitState(n,e){const r=this.visitStyle(n.styles,e),o=n.options&&n.options.params||null;if(r.containsDynamicStyles){const s=new Set,c=o||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{uH(p).forEach(_=>{c.hasOwnProperty(_)||s.add(_)})})}),s.size&&(zM(s.values()),e.errors.push(function _Q(i,n){return new d.vHH(3008,!1)}()))}return{type:0,name:n.name,style:r,options:o?{params:o}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const r=il(this,CC(n.animation),e);return{type:1,matchers:tX(n.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:$_(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(r=>il(this,r,e)),options:$_(n.options)}}visitGroup(n,e){const r=e.currentTime;let o=0;const s=n.steps.map(c=>{e.currentTime=r;const h=il(this,c,e);return o=Math.max(o,e.currentTime),h});return e.currentTime=o,{type:3,steps:s,options:$_(n.options)}}visitAnimate(n,e){const r=function dX(i,n){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return YF(HM(i,n).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=YF(0,0,"");return s.dynamic=!0,s.strValue=e,s}const o=HM(e,n);return YF(o.duration,o.delay,o.easing)}(n.timings,e.errors);e.currentAnimateTimings=r;let o,s=n.styles?n.styles:iu({});if(5==s.type)o=this.visitKeyframes(s,e);else{let c=n.styles,h=!1;if(!c){h=!0;const _={};r.easing&&(_.easing=r.easing),c=iu(_)}e.currentTime+=r.duration+r.delay;const p=this.visitStyle(c,e);p.isEmptyStep=h,o=p}return e.currentAnimateTimings=null,{type:4,timings:r,style:o,options:null}}visitStyle(n,e){const r=this._makeStyleAst(n,e);return this._validateStyleAst(r,e),r}_makeStyleAst(n,e){const r=[],o=Array.isArray(n.styles)?n.styles:[n.styles];for(let h of o)"string"==typeof h?h===Zh?r.push(h):e.errors.push(new d.vHH(3002,!1)):r.push(cH(h));let s=!1,c=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(c=h.get("easing"),h.delete("easing")),!s))for(let p of h.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:c,offset:n.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(n,e){const r=e.currentAnimateTimings;let o=e.currentTime,s=e.currentTime;r&&s>0&&(s-=r.duration+r.delay),n.styles.forEach(c=>{"string"!=typeof c&&c.forEach((h,p)=>{const _=e.collectedStyles.get(e.currentQuerySelector),w=_.get(p);let I=!0;w&&(s!=o&&s>=w.startTime&&o<=w.endTime&&(e.errors.push(function vQ(i,n,e,r,o){return new d.vHH(3010,!1)}()),I=!1),s=w.startTime),I&&_.set(p,{startTime:s,endTime:o}),e.options&&function QQ(i,n,e){const r=n.params||{},o=uH(i);o.length&&o.forEach(s=>{r.hasOwnProperty(s)||e.push(function uQ(i){return new d.vHH(3001,!1)}())})}(h,e.options,e.errors)})})}visitKeyframes(n,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function bQ(){return new d.vHH(3011,!1)}()),r;let s=0;const c=[];let h=!1,p=!1,_=0;const w=n.steps.map(ve=>{const Ae=this._makeStyleAst(ve,e);let _e=null!=Ae.offset?Ae.offset:function cX(i){if("string"==typeof i)return null;let n=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(Ae.styles),ke=0;return null!=_e&&(s++,ke=Ae.offset=_e),p=p||ke<0||ke>1,h=h||ke<_,_=ke,c.push(ke),Ae});p&&e.errors.push(function wQ(){return new d.vHH(3012,!1)}()),h&&e.errors.push(function xQ(){return new d.vHH(3200,!1)}());const I=n.steps.length;let A=0;s>0&&s<I?e.errors.push(function EQ(){return new d.vHH(3202,!1)}()):0==s&&(A=1/(I-1));const P=I-1,B=e.currentTime,Y=e.currentAnimateTimings,ee=Y.duration;return w.forEach((ve,Ae)=>{const _e=A>0?Ae==P?1:A*Ae:c[Ae],ke=_e*ee;e.currentTime=B+Y.delay+ke,Y.duration=ke,this._validateStyleAst(ve,e),ve.offset=_e,r.styles.push(ve)}),r}visitReference(n,e){return{type:8,animation:il(this,CC(n.animation),e),options:$_(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:$_(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:$_(n.options)}}visitQuery(n,e){const r=e.currentQuerySelector,o=n.options||{};e.queryCount++,e.currentQuery=n;const[s,c]=function sX(i){const n=!!i.split(/\s*,\s*/).find(e=>":self"==e);return n&&(i=i.replace(rX,"")),i=i.replace(/@\*/g,VM).replace(/@\w+/g,e=>VM+"-"+e.slice(1)).replace(/:animating/g,jF),[i,n]}(n.selector);e.currentQuerySelector=r.length?r+" "+s:s,nl(e.collectedStyles,e.currentQuerySelector,new Map);const h=il(this,CC(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:s,limit:o.limit||0,optional:!!o.optional,includeSelf:c,animation:h,originalSelector:n.selector,options:$_(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function CQ(){return new d.vHH(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:HM(n.timings,e.errors,!0);return{type:12,animation:il(this,CC(n.animation),e),timings:r,options:null}}}class lX{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function $_(i){return i?(i=EC(i)).params&&(i.params=function aX(i){return i?EC(i):null}(i.params)):i={},i}function YF(i,n,e){return{duration:i,delay:n,easing:e}}function ZF(i,n,e,r,o,s,c=null,h=!1){return{type:1,element:i,keyframes:n,preStyleProps:e,postStyleProps:r,duration:o,delay:s,totalTime:o+s,easing:c,subTimeline:h}}class WM{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const fX=new RegExp(":enter","g"),pX=new RegExp(":leave","g");function KF(i,n,e,r,o,s=new Map,c=new Map,h,p,_=[]){return(new gX).buildKeyframes(i,n,e,r,o,s,c,h,p,_)}class gX{buildKeyframes(n,e,r,o,s,c,h,p,_,w=[]){_=_||new WM;const I=new QF(n,e,_,o,s,w,[]);I.options=p;const A=p.delay?Jh(p.delay):0;I.currentTimeline.delayNextStep(A),I.currentTimeline.setStyles([c],null,I.errors,p),il(this,r,I);const P=I.timelines.filter(B=>B.containsAnimation());if(P.length&&h.size){let B;for(let Y=P.length-1;Y>=0;Y--){const ee=P[Y];if(ee.element===e){B=ee;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([h],null,I.errors,p)}return P.length?P.map(B=>B.buildKeyframes()):[ZF(e,[],[],[],0,A,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const r=e.subInstructions.get(e.element);if(r){const o=e.createSubContext(n.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(r,o,o.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=n}visitAnimateRef(n,e){const r=e.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,r),this.visitReference(n.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,r){for(const o of n){const s=o?.delay;if(s){const c="number"==typeof s?s:Jh(DC(s,o?.params??{},e.errors));r.delayNextStep(c)}}}_visitSubInstructions(n,e,r){let s=e.currentTimeline.currentTime;const c=null!=r.duration?Jh(r.duration):null,h=null!=r.delay?Jh(r.delay):null;return 0!==c&&n.forEach(p=>{const _=e.appendInstructionToTimeline(p,c,h);s=Math.max(s,_.duration+_.delay)}),s}visitReference(n,e){e.updateOptions(n.options,!0),il(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const r=e.subContextCount;let o=e;const s=n.options;if(s&&(s.params||s.delay)&&(o=e.createSubContext(s),o.transformIntoNewTimeline(),null!=s.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=qM);const c=Jh(s.delay);o.delayNextStep(c)}n.steps.length&&(n.steps.forEach(c=>il(this,c,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const r=[];let o=e.currentTimeline.currentTime;const s=n.options&&n.options.delay?Jh(n.options.delay):0;n.steps.forEach(c=>{const h=e.createSubContext(n.options);s&&h.delayNextStep(s),il(this,c,h),o=Math.max(o,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(o),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const r=n.strValue;return HM(e.params?DC(r,e.params,e.errors):r,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const r=e.currentAnimateTimings=this._visitTiming(n.timings,e),o=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),o.snapshotCurrentStyles());const s=n.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(r.duration),this.visitStyle(s,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const r=e.currentTimeline,o=e.currentAnimateTimings;!o&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=o&&o.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(s):r.setStyles(n.styles,s,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const r=e.currentAnimateTimings,o=e.currentTimeline.duration,s=r.duration,h=e.createSubContext().currentTimeline;h.easing=r.easing,n.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,e.errors,e.options),h.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(h),e.transformIntoNewTimeline(o+s),e.previousNode=n}visitQuery(n,e){const r=e.currentTimeline.currentTime,o=n.options||{},s=o.delay?Jh(o.delay):0;s&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=qM);let c=r;const h=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=h.length;let p=null;h.forEach((_,w)=>{e.currentQueryIndex=w;const I=e.createSubContext(n.options,_);s&&I.delayNextStep(s),_===e.element&&(p=I.currentTimeline),il(this,n.animation,I),I.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,I.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const r=e.parentContext,o=e.currentTimeline,s=n.timings,c=Math.abs(s.duration),h=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const w=e.currentTimeline;p&&w.delayNextStep(p);const I=w.currentTime;il(this,n.animation,e),e.previousNode=n,r.currentStaggerTime=o.currentTime-I+(o.startTime-r.currentTimeline.startTime)}}const qM={};class QF{constructor(n,e,r,o,s,c,h,p){this._driver=n,this.element=e,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=s,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new YM(this._driver,e,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const r=n;let o=this.options;null!=r.duration&&(o.duration=Jh(r.duration)),null!=r.delay&&(o.delay=Jh(r.delay));const s=r.params;if(s){let c=o.params;c||(c=this.options.params={}),Object.keys(s).forEach(h=>{(!e||!c.hasOwnProperty(h))&&(c[h]=DC(s[h],c,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const r=n.params={};Object.keys(e).forEach(o=>{r[o]=e[o]})}}return n}createSubContext(n=null,e,r){const o=e||this.element,s=new QF(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(n),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(n){return this.previousNode=qM,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,r){const o={duration:e??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},s=new _X(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(s),o}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,r,o,s,c){let h=[];if(o&&h.push(this.element),n.length>0){n=(n=n.replace(fX,"."+this._enterClassName)).replace(pX,"."+this._leaveClassName);let _=this._driver.query(this.element,n,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),h.push(..._)}return!s&&0==h.length&&c.push(function DQ(i){return new d.vHH(3014,!1)}()),h}}class YM{constructor(n,e,r,o){this._driver=n,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new YM(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Zh),this._currentKeyframe.set(e,Zh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,r,o){e&&this._previousKeyframe.set("easing",e);const s=o&&o.params||{},c=function yX(i,n){const e=new Map;let r;return i.forEach(o=>{if("*"===o){r=r||n.keys();for(let s of r)e.set(s,Zh)}else cp(o,e)}),e}(n,this._globalTimelineStyles);for(let[h,p]of c){const _=DC(p,s,r);this._pendingStyles.set(h,_),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Zh),this._updateStyle(h,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,r)=>{const o=this._styleSummary.get(r);(!o||e.time>o.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((h,p)=>{const _=cp(h,new Map,this._backFill);_.forEach((w,I)=>{"!"===w?n.add(I):w===Zh&&e.add(I)}),r||_.set("offset",p/this.duration),o.push(_)});const s=n.size?zM(n.values()):[],c=e.size?zM(e.values()):[];if(r){const h=o[0],p=new Map(h);h.set("offset",0),p.set("offset",1),o=[h,p]}return ZF(this.element,o,s,c,this.duration,this.startTime,this.easing,!1)}}class _X extends YM{constructor(n,e,r,o,s,c,h=!1){super(n,e,c.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=r+e,h=e/c,p=cp(n[0]);p.set("offset",0),s.push(p);const _=cp(n[0]);_.set("offset",gH(h)),s.push(_);const w=n.length-1;for(let I=1;I<=w;I++){let A=cp(n[I]);const P=A.get("offset");A.set("offset",gH((e+P*r)/c)),s.push(A)}r=c,e=0,o="",n=s}return ZF(this.element,n,this.preStyleProps,this.postStyleProps,r,e,o,!0)}}function gH(i,n=3){const e=Math.pow(10,n-1);return Math.round(i*e)/e}class XF{}const vX=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class bX extends XF{normalizePropertyName(n,e){return WF(n)}normalizeStyleValue(n,e,r,o){let s="";const c=r.toString().trim();if(vX.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&o.push(function mQ(i,n){return new d.vHH(3005,!1)}())}return c+s}}function _H(i,n,e,r,o,s,c,h,p,_,w,I,A){return{type:0,element:i,triggerName:n,isRemovalTransition:o,fromState:e,fromStyles:s,toState:r,toStyles:c,timelines:h,queriedElements:p,preStyleProps:_,postStyleProps:w,totalTime:I,errors:A}}const JF={};class yH{constructor(n,e,r){this._triggerName=n,this.ast=e,this._stateStyles=r}match(n,e,r,o){return function wX(i,n,e,r,o){return i.some(s=>s(n,e,r,o))}(this.ast.matchers,n,e,r,o)}buildStyles(n,e,r){let o=this._stateStyles.get("*");return void 0!==n&&(o=this._stateStyles.get(n?.toString())||o),o?o.buildStyles(e,r):new Map}build(n,e,r,o,s,c,h,p,_,w){const I=[],A=this.ast.options&&this.ast.options.params||JF,B=this.buildStyles(r,h&&h.params||JF,I),Y=p&&p.params||JF,ee=this.buildStyles(o,Y,I),ve=new Set,Ae=new Map,_e=new Map,ke="void"===o,ze={params:xX(Y,A),delay:this.ast.options?.delay},et=w?[]:KF(n,e,this.ast.animation,s,c,B,ee,ze,_,I);let it=0;if(et.forEach(bn=>{it=Math.max(bn.duration+bn.delay,it)}),I.length)return _H(e,this._triggerName,r,o,ke,B,ee,[],[],Ae,_e,it,I);et.forEach(bn=>{const Pi=bn.element,sl=nl(Ae,Pi,new Set);bn.preStyleProps.forEach(Ns=>sl.add(Ns));const Yo=nl(_e,Pi,new Set);bn.postStyleProps.forEach(Ns=>Yo.add(Ns)),Pi!==e&&ve.add(Pi)});const Ft=zM(ve.values());return _H(e,this._triggerName,r,o,ke,B,ee,et,Ft,Ae,_e,it)}}function xX(i,n){const e=EC(n);for(const r in i)i.hasOwnProperty(r)&&null!=i[r]&&(e[r]=i[r]);return e}class EX{constructor(n,e,r){this.styles=n,this.defaultParams=e,this.normalizer=r}buildStyles(n,e){const r=new Map,o=EC(this.defaultParams);return Object.keys(n).forEach(s=>{const c=n[s];null!==c&&(o[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,h)=>{c&&(c=DC(c,o,e));const p=this.normalizer.normalizePropertyName(h,e);c=this.normalizer.normalizeStyleValue(h,p,c,e),r.set(h,c)})}),r}}class DX{constructor(n,e,r){this.name=n,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(o=>{this.states.set(o.name,new EX(o.style,o.options&&o.options.params||{},r))}),vH(this.states,"true","1"),vH(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new yH(n,o,this.states))}),this.fallbackTransition=function IX(i,n,e){return new yH(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,r,o){return this.transitionFactories.find(c=>c.match(n,e,r,o))||null}matchStyles(n,e,r){return this.fallbackTransition.buildStyles(n,e,r)}}function vH(i,n,e){i.has(n)?i.has(e)||i.set(e,i.get(n)):i.has(e)&&i.set(n,i.get(e))}const TX=new WM;class SX{constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const r=[],s=qF(this._driver,e,r,[]);if(r.length)throw function RQ(i){return new d.vHH(3503,!1)}();this._animations.set(n,s)}_buildPlayer(n,e,r){const o=n.element,s=tH(this._normalizer,n.keyframes,e,r);return this._driver.animate(o,s,n.duration,n.delay,n.easing,[],!0)}create(n,e,r={}){const o=[],s=this._animations.get(n);let c;const h=new Map;if(s?(c=KF(this._driver,e,s,zF,UM,new Map,new Map,r,TX,o),c.forEach(w=>{const I=nl(h,w.element,new Map);w.postStyleProps.forEach(A=>I.set(A,null))})):(o.push(function PQ(){return new d.vHH(3300,!1)}()),c=[]),o.length)throw function OQ(i){return new d.vHH(3504,!1)}();h.forEach((w,I)=>{w.forEach((A,P)=>{w.set(P,this._driver.computeStyle(I,P,Zh))})});const _=lp(c.map(w=>{const I=h.get(w.element);return this._buildPlayer(w,new Map,I)}));return this._playersById.set(n,_),_.onDestroy(()=>this.destroy(n)),this.players.push(_),_}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function NQ(i){return new d.vHH(3301,!1)}();return e}listen(n,e,r,o){const s=BF(e,"","","");return LF(this._getPlayer(n),r,s,o),()=>{}}command(n,e,r,o){if("register"==r)return void this.register(n,o[0]);if("create"==r)return void this.create(n,e,o[0]||{});const s=this._getPlayer(n);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n)}}}const bH="ng-animate-queued",eL="ng-animate-disabled",PX=[],wH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},OX={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ql="__ng_removed";class tL{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const r=n&&n.hasOwnProperty("value");if(this.value=function UX(i){return i??null}(r?n.value:n),r){const s=EC(n);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const r=this.options.params;Object.keys(e).forEach(o=>{null==r[o]&&(r[o]=e[o])})}}}const IC="void",nL=new tL(IC);class NX{constructor(n,e,r){this.id=n,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Yl(e,this._hostClassName)}listen(n,e,r,o){if(!this._triggers.has(e))throw function FQ(i,n){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function LQ(i){return new d.vHH(3303,!1)}();if(!function BX(i){return"start"==i||"done"==i}(r))throw function UQ(i,n){return new d.vHH(3400,!1)}();const s=nl(this._elementListeners,n,[]),c={name:e,phase:r,callback:o};s.push(c);const h=nl(this._engine.statesByElement,n,new Map);return h.has(e)||(Yl(n,BM),Yl(n,BM+"-"+e),h.set(e,nL)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers.has(e)||h.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function BQ(i){return new d.vHH(3401,!1)}();return e}trigger(n,e,r,o=!0){const s=this._getTrigger(e),c=new iL(this.id,e,n);let h=this._engine.statesByElement.get(n);h||(Yl(n,BM),Yl(n,BM+"-"+e),this._engine.statesByElement.set(n,h=new Map));let p=h.get(e);const _=new tL(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),h.set(e,_),p||(p=nL),_.value!==IC&&p.value===_.value){if(!function zX(i,n){const e=Object.keys(i),r=Object.keys(n);if(e.length!=r.length)return!1;for(let o=0;o<e.length;o++){const s=e[o];if(!n.hasOwnProperty(s)||i[s]!==n[s])return!1}return!0}(p.params,_.params)){const Y=[],ee=s.matchStyles(p.value,p.params,Y),ve=s.matchStyles(_.value,_.params,Y);Y.length?this._engine.reportError(Y):this._engine.afterFlush(()=>{j_(n,ee),ru(n,ve)})}return}const A=nl(this._engine.playersByElement,n,[]);A.forEach(Y=>{Y.namespaceId==this.id&&Y.triggerName==e&&Y.queued&&Y.destroy()});let P=s.matchTransition(p.value,_.value,n,_.params),B=!1;if(!P){if(!o)return;P=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:P,fromState:p,toState:_,player:c,isFallbackTransition:B}),B||(Yl(n,bH),c.onStart(()=>{Jb(n,bH)})),c.onDone(()=>{let Y=this.players.indexOf(c);Y>=0&&this.players.splice(Y,1);const ee=this._engine.playersByElement.get(n);if(ee){let ve=ee.indexOf(c);ve>=0&&ee.splice(ve,1)}}),this.players.push(c),A.push(c),c}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(o=>o.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const r=this._engine.driver.query(n,VM,!0);r.forEach(o=>{if(o[ql])return;const s=this._engine.fetchNamespacesByElement(o);s.size?s.forEach(c=>c.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(n,e,r,o){const s=this._engine.statesByElement.get(n),c=new Map;if(s){const h=[];if(s.forEach((p,_)=>{if(c.set(_,p.value),this._triggers.has(_)){const w=this.trigger(n,_,IC,o);w&&h.push(w)}}),h.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,c),r&&lp(h).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(e&&r){const o=new Set;e.forEach(s=>{const c=s.name;if(o.has(c))return;o.add(c);const p=this._triggers.get(c).fallbackTransition,_=r.get(c)||nL,w=new tL(IC),I=new iL(this.id,c,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:c,transition:p,fromState:_,toState:w,player:I,isFallbackTransition:!0})})}}removeNode(n,e){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let o=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(n):[];if(s&&s.length)o=!0;else{let c=n;for(;c=c.parentNode;)if(r.statesByElement.get(c)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(n),o)r.markElementAsRemoved(this.id,n,!1,e);else{const s=n[ql];(!s||s===wH)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,e))}}insertNode(n,e){Yl(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const s=r.element,c=this._elementListeners.get(s);c&&c.forEach(h=>{if(h.name==r.triggerName){const p=BF(s,r.triggerName,r.fromState.value,r.toState.value);p._data=n,LF(r.player,h.phase,p,h.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(r)}),this._queue=[],e.sort((r,o)=>{const s=r.transition.ast.depCount,c=o.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let e=!1;return this._elementListeners.has(n)&&(e=!0),e=!!this._queue.find(r=>r.element===n)||e,e}}class FX{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,r){this.bodyNode=n,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,e){const r=new NX(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,e){const r=this._namespaceList,o=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,h=this.driver.getParentElement(e);for(;h;){const p=o.get(h);if(p){const _=r.indexOf(p);r.splice(_+1,0,n),c=!0;break}h=this.driver.getParentElement(h)}c||r.unshift(n)}else r.push(n);return o.set(e,n),n}register(n,e){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,e)),r}registerTrigger(n,e,r){let o=this._namespaceLookup[n];o&&o.register(e,r)&&this.totalAnimations++}destroy(n,e){if(!n)return;const r=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[n];const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,r=this.statesByElement.get(n);if(r)for(let o of r.values())if(o.namespaceId){const s=this._fetchNamespace(o.namespaceId);s&&e.add(s)}return e}trigger(n,e,r,o){if(ZM(e)){const s=this._fetchNamespace(n);if(s)return s.trigger(e,r,o),!0}return!1}insertNode(n,e,r,o){if(!ZM(e))return;const s=e[ql];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(n){const c=this._fetchNamespace(n);c&&c.insertNode(e,r)}o&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Yl(n,eL)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Jb(n,eL))}removeNode(n,e,r){if(ZM(e)){const o=n?this._fetchNamespace(n):null;o?o.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r);const s=this.namespacesByHostElement.get(e);s&&s.id!==n&&s.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,r,o,s){this.collectedLeaveElements.push(e),e[ql]={namespaceId:n,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(n,e,r,o,s){return ZM(e)?this._fetchNamespace(n).listen(e,r,o,s):()=>{}}_buildInstruction(n,e,r,o,s){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,o,n.fromState.options,n.toState.options,e,s)}destroyInnerAnimations(n){let e=this.driver.query(n,VM,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,jF,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return lp(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[ql];if(e&&e.setForRemoval){if(n[ql]=wH,e.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(eL)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Yl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,n)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?lp(e).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(n){throw function VQ(i){return new d.vHH(3402,!1)}()}_flushAnimations(n,e){const r=new WM,o=[],s=new Map,c=[],h=new Map,p=new Map,_=new Map,w=new Set;this.disabledNodes.forEach(Bt=>{w.add(Bt);const nn=this.driver.query(Bt,".ng-animate-queued",!0);for(let un=0;un<nn.length;un++)w.add(nn[un])});const I=this.bodyNode,A=Array.from(this.statesByElement.keys()),P=CH(A,this.collectedEnterElements),B=new Map;let Y=0;P.forEach((Bt,nn)=>{const un=zF+Y++;B.set(nn,un),Bt.forEach(ni=>Yl(ni,un))});const ee=[],ve=new Set,Ae=new Set;for(let Bt=0;Bt<this.collectedLeaveElements.length;Bt++){const nn=this.collectedLeaveElements[Bt],un=nn[ql];un&&un.setForRemoval&&(ee.push(nn),ve.add(nn),un.hasAnimation?this.driver.query(nn,".ng-star-inserted",!0).forEach(ni=>ve.add(ni)):Ae.add(nn))}const _e=new Map,ke=CH(A,Array.from(ve));ke.forEach((Bt,nn)=>{const un=UM+Y++;_e.set(nn,un),Bt.forEach(ni=>Yl(ni,un))}),n.push(()=>{P.forEach((Bt,nn)=>{const un=B.get(nn);Bt.forEach(ni=>Jb(ni,un))}),ke.forEach((Bt,nn)=>{const un=_e.get(nn);Bt.forEach(ni=>Jb(ni,un))}),ee.forEach(Bt=>{this.processLeaveNode(Bt)})});const ze=[],et=[];for(let Bt=this._namespaceList.length-1;Bt>=0;Bt--)this._namespaceList[Bt].drainQueuedTransitions(e).forEach(un=>{const ni=un.player,Zo=un.element;if(ze.push(ni),this.collectedEnterElements.length){const Fs=Zo[ql];if(Fs&&Fs.setForMove){if(Fs.previousTriggersValues&&Fs.previousTriggersValues.has(un.triggerName)){const Y_=Fs.previousTriggersValues.get(un.triggerName),Kl=this.statesByElement.get(un.element);if(Kl&&Kl.has(un.triggerName)){const vk=Kl.get(un.triggerName);vk.value=Y_,Kl.set(un.triggerName,vk)}}return void ni.destroy()}}const lu=!I||!this.driver.containsElement(I,Zo),al=_e.get(Zo),pp=B.get(Zo),Fr=this._buildInstruction(un,r,pp,al,lu);if(Fr.errors&&Fr.errors.length)return void et.push(Fr);if(lu)return ni.onStart(()=>j_(Zo,Fr.fromStyles)),ni.onDestroy(()=>ru(Zo,Fr.toStyles)),void o.push(ni);if(un.isFallbackTransition)return ni.onStart(()=>j_(Zo,Fr.fromStyles)),ni.onDestroy(()=>ru(Zo,Fr.toStyles)),void o.push(ni);const dj=[];Fr.timelines.forEach(Fs=>{Fs.stretchStartingKeyframe=!0,this.disabledNodes.has(Fs.element)||dj.push(Fs)}),Fr.timelines=dj,r.append(Zo,Fr.timelines),c.push({instruction:Fr,player:ni,element:Zo}),Fr.queriedElements.forEach(Fs=>nl(h,Fs,[]).push(ni)),Fr.preStyleProps.forEach((Fs,Y_)=>{if(Fs.size){let Kl=p.get(Y_);Kl||p.set(Y_,Kl=new Set),Fs.forEach((vk,kL)=>Kl.add(kL))}}),Fr.postStyleProps.forEach((Fs,Y_)=>{let Kl=_.get(Y_);Kl||_.set(Y_,Kl=new Set),Fs.forEach((vk,kL)=>Kl.add(kL))})});if(et.length){const Bt=[];et.forEach(nn=>{Bt.push(function HQ(i,n){return new d.vHH(3505,!1)}())}),ze.forEach(nn=>nn.destroy()),this.reportError(Bt)}const it=new Map,Ft=new Map;c.forEach(Bt=>{const nn=Bt.element;r.has(nn)&&(Ft.set(nn,nn),this._beforeAnimationBuild(Bt.player.namespaceId,Bt.instruction,it))}),o.forEach(Bt=>{const nn=Bt.element;this._getPreviousPlayers(nn,!1,Bt.namespaceId,Bt.triggerName,null).forEach(ni=>{nl(it,nn,[]).push(ni),ni.destroy()})});const bn=ee.filter(Bt=>IH(Bt,p,_)),Pi=new Map;EH(Pi,this.driver,Ae,_,Zh).forEach(Bt=>{IH(Bt,p,_)&&bn.push(Bt)});const Yo=new Map;P.forEach((Bt,nn)=>{EH(Yo,this.driver,new Set(Bt),p,"!")}),bn.forEach(Bt=>{const nn=Pi.get(Bt),un=Yo.get(Bt);Pi.set(Bt,new Map([...nn?.entries()??[],...un?.entries()??[]]))});const Ns=[],au=[],yk={};c.forEach(Bt=>{const{element:nn,player:un,instruction:ni}=Bt;if(r.has(nn)){if(w.has(nn))return un.onDestroy(()=>ru(nn,ni.toStyles)),un.disabled=!0,un.overrideTotalTime(ni.totalTime),void o.push(un);let Zo=yk;if(Ft.size>1){let al=nn;const pp=[];for(;al=al.parentNode;){const Fr=Ft.get(al);if(Fr){Zo=Fr;break}pp.push(al)}pp.forEach(Fr=>Ft.set(Fr,Zo))}const lu=this._buildAnimation(un.namespaceId,ni,it,s,Yo,Pi);if(un.setRealPlayer(lu),Zo===yk)Ns.push(un);else{const al=this.playersByElement.get(Zo);al&&al.length&&(un.parentPlayer=lp(al)),o.push(un)}}else j_(nn,ni.fromStyles),un.onDestroy(()=>ru(nn,ni.toStyles)),au.push(un),w.has(nn)&&o.push(un)}),au.forEach(Bt=>{const nn=s.get(Bt.element);if(nn&&nn.length){const un=lp(nn);Bt.setRealPlayer(un)}}),o.forEach(Bt=>{Bt.parentPlayer?Bt.syncPlayerEvents(Bt.parentPlayer):Bt.destroy()});for(let Bt=0;Bt<ee.length;Bt++){const nn=ee[Bt],un=nn[ql];if(Jb(nn,UM),un&&un.hasAnimation)continue;let ni=[];if(h.size){let lu=h.get(nn);lu&&lu.length&&ni.push(...lu);let al=this.driver.query(nn,jF,!0);for(let pp=0;pp<al.length;pp++){let Fr=h.get(al[pp]);Fr&&Fr.length&&ni.push(...Fr)}}const Zo=ni.filter(lu=>!lu.destroyed);Zo.length?VX(this,nn,Zo):this.processLeaveNode(nn)}return ee.length=0,Ns.forEach(Bt=>{this.players.push(Bt),Bt.onDone(()=>{Bt.destroy();const nn=this.players.indexOf(Bt);this.players.splice(nn,1)}),Bt.play()}),Ns}elementContainsData(n,e){let r=!1;const o=e[ql];return o&&o.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(n).elementContainsData(e)||r}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,r,o,s){let c=[];if(e){const h=this.playersByQueriedElement.get(n);h&&(c=h)}else{const h=this.playersByElement.get(n);if(h){const p=!s||s==IC;h.forEach(_=>{_.queued||!p&&_.triggerName!=o||c.push(_)})}}return(r||o)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||o&&o!=h.triggerName))),c}_beforeAnimationBuild(n,e,r){const s=e.element,c=e.isRemovalTransition?void 0:n,h=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const _=p.element,w=_!==s,I=nl(r,_,[]);this._getPreviousPlayers(_,w,c,h,e.toState).forEach(P=>{const B=P.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),P.destroy(),I.push(P)})}j_(s,e.fromStyles)}_buildAnimation(n,e,r,o,s,c){const h=e.triggerName,p=e.element,_=[],w=new Set,I=new Set,A=e.timelines.map(B=>{const Y=B.element;w.add(Y);const ee=Y[ql];if(ee&&ee.removedBeforeQueried)return new pC(B.duration,B.delay);const ve=Y!==p,Ae=function HX(i){const n=[];return DH(i,n),n}((r.get(Y)||PX).map(it=>it.getRealPlayer())).filter(it=>!!it.element&&it.element===Y),_e=s.get(Y),ke=c.get(Y),ze=tH(this._normalizer,B.keyframes,_e,ke),et=this._buildPlayer(B,ze,Ae);if(B.subTimeline&&o&&I.add(Y),ve){const it=new iL(n,h,Y);it.setRealPlayer(et),_.push(it)}return et});_.forEach(B=>{nl(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function LX(i,n,e){let r=i.get(n);if(r){if(r.length){const o=r.indexOf(e);r.splice(o,1)}0==r.length&&i.delete(n)}return r}(this.playersByQueriedElement,B.element,B))}),w.forEach(B=>Yl(B,lH));const P=lp(A);return P.onDestroy(()=>{w.forEach(B=>Jb(B,lH)),ru(p,e.toStyles)}),I.forEach(B=>{nl(o,B,[]).push(P)}),P}_buildPlayer(n,e,r){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,r):new pC(n.duration,n.delay)}}class iL{constructor(n,e,r){this.namespaceId=n,this.triggerName=e,this.element=r,this._player=new pC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,r)=>{e.forEach(o=>LF(n,r,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){nl(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function ZM(i){return i&&1===i.nodeType}function xH(i,n){const e=i.style.display;return i.style.display=n??"none",e}function EH(i,n,e,r,o){const s=[];e.forEach(p=>s.push(xH(p)));const c=[];r.forEach((p,_)=>{const w=new Map;p.forEach(I=>{const A=n.computeStyle(_,I,o);w.set(I,A),(!A||0==A.length)&&(_[ql]=OX,c.push(_))}),i.set(_,w)});let h=0;return e.forEach(p=>xH(p,s[h++])),c}function CH(i,n){const e=new Map;if(i.forEach(h=>e.set(h,[])),0==n.length)return e;const o=new Set(n),s=new Map;function c(h){if(!h)return 1;let p=s.get(h);if(p)return p;const _=h.parentNode;return p=e.has(_)?_:o.has(_)?1:c(_),s.set(h,p),p}return n.forEach(h=>{const p=c(h);1!==p&&e.get(p).push(h)}),e}function Yl(i,n){i.classList?.add(n)}function Jb(i,n){i.classList?.remove(n)}function VX(i,n,e){lp(e).onDone(()=>i.processLeaveNode(n))}function DH(i,n){for(let e=0;e<i.length;e++){const r=i[e];r instanceof U4?DH(r.players,n):n.push(r)}}function IH(i,n,e){const r=e.get(i);if(!r)return!1;let o=n.get(i);return o?r.forEach(s=>o.add(s)):n.set(i,r),e.delete(i),!0}class KM{constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new FX(n,e,r),this._timelineEngine=new SX(n,e,r),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(n,e,r,o,s){const c=n+"-"+o;let h=this._triggerCache[c];if(!h){const p=[],w=qF(this._driver,s,p,[]);if(p.length)throw function MQ(i,n){return new d.vHH(3404,!1)}();h=function CX(i,n,e){return new DX(i,n,e)}(o,w,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(e,o,h)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,r,o){this._transitionEngine.insertNode(n,e,r,o)}onRemove(n,e,r){this._transitionEngine.removeNode(n,e,r)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,r,o){if("@"==r.charAt(0)){const[s,c]=nH(r);this._timelineEngine.command(s,e,c,o)}else this._transitionEngine.trigger(n,e,r,o)}listen(n,e,r,o,s){if("@"==r.charAt(0)){const[c,h]=nH(r);return this._timelineEngine.listen(c,e,h,s)}return this._transitionEngine.listen(n,e,r,o,s)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $X=(()=>{class i{constructor(e,r,o){this._element=e,this._startStyles=r,this._endStyles=o,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ru(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ru(this._element,this._initialStyles),this._endStyles&&(ru(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(j_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(j_(this._element,this._endStyles),this._endStyles=null),ru(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function rL(i){let n=null;return i.forEach((e,r)=>{(function GX(i){return"display"===i||"position"===i})(r)&&(n=n||new Map,n.set(r,e))}),n}class TH{constructor(n,e,r,o){this.element=n,this.keyframes=e,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(n,e,r){return n.animate(this._convertKeyframesToObject(e),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,o)=>{"offset"!==o&&n.set(o,this._finished?r:hH(this.element,o))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class WX{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return rH(n,e)}getParentElement(n){return VF(n)}query(n,e,r){return oH(n,e,r)}computeStyle(n,e,r){return window.getComputedStyle(n)[e]}animate(n,e,r,o,s,c=[]){const p={duration:r,delay:o,fill:0==o?"both":"forwards"};s&&(p.easing=s);const _=new Map,w=c.filter(P=>P instanceof TH);(function JQ(i,n){return 0===i||0===n})(r,o)&&w.forEach(P=>{P.currentSnapshot.forEach((B,Y)=>_.set(Y,B))});let I=function KQ(i){return i.length?i[0]instanceof Map?i:i.map(n=>cH(n)):[]}(e).map(P=>cp(P));I=function eX(i,n,e){if(e.size&&n.length){let r=n[0],o=[];if(e.forEach((s,c)=>{r.has(c)||o.push(c),r.set(c,s)}),o.length)for(let s=1;s<n.length;s++){let c=n[s];o.forEach(h=>c.set(h,hH(i,h)))}}return n}(n,I,_);const A=function jX(i,n){let e=null,r=null;return Array.isArray(n)&&n.length?(e=rL(n[0]),n.length>1&&(r=rL(n[n.length-1]))):n instanceof Map&&(e=rL(n)),e||r?new $X(i,e,r):null}(n,I);return new TH(n,I,p,A)}}let qX=(()=>{class i extends N4{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(e)?F4(e):e;return SH(this._renderer,null,r,"register",[o]),new YX(r,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.FYo),d.LFG(pe))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class YX extends P7{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new ZX(this._id,n,e||{},this._renderer)}}class ZX{constructor(n,e,r,o){this.id=n,this.element=e,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return SH(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function SH(i,n,e,r,o){return i.setProperty(n,`@@${e}:${r}`,o)}const AH="@.disabled";let KX=(()=>{class i{constructor(e,r,o){this.delegate=e,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,c)=>{const h=c?.parentNode(s);h&&c.removeChild(h,s)}}createRenderer(e,r){const s=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(s);return w||(w=new MH("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,w)),w}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,e);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(c,h,e,w.name,w)};return r.data.animation.forEach(p),new QX(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,o){e>=0&&e<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,h]=s;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(d.FYo),d.LFG(KM),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();class MH{constructor(n,e,r,o){this.namespaceId=n,this.delegate=e,this.engine=r,this._onDestroy=o,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,r,o=!0){this.delegate.insertBefore(n,e,r),this.engine.onInsert(this.namespaceId,e,n,o)}removeChild(n,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,r,o){this.delegate.setAttribute(n,e,r,o)}removeAttribute(n,e,r){this.delegate.removeAttribute(n,e,r)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,r,o){this.delegate.setStyle(n,e,r,o)}removeStyle(n,e,r){this.delegate.removeStyle(n,e,r)}setProperty(n,e,r){"@"==e.charAt(0)&&e==AH?this.disableAnimations(n,!!r):this.delegate.setProperty(n,e,r)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,r){return this.delegate.listen(n,e,r)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class QX extends MH{constructor(n,e,r,o,s){super(e,r,o,s),this.factory=n,this.namespaceId=e}setProperty(n,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==AH?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,e.slice(1),r):this.delegate.setProperty(n,e,r)}listen(n,e,r){if("@"==e.charAt(0)){const o=function XX(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(n);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function JX(i){const n=i.indexOf(".");return[i.substring(0,n),i.slice(n+1)]}(s)),this.engine.listen(this.namespaceId,o,s,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(n,e,r)}}let eJ=(()=>{class i extends KM{constructor(e,r,o,s){super(e.body,r,o)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(pe),d.LFG(HF),d.LFG(XF),d.LFG(d.z2F))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();const kH=[{provide:N4,useClass:qX},{provide:XF,useFactory:function tJ(){return new bX}},{provide:KM,useClass:eJ},{provide:d.FYo,useFactory:function nJ(i,n,e){return new KX(i,n,e)},deps:[Lo,KM,d.R0b]}],oL=[{provide:HF,useFactory:()=>new WX},{provide:d.QbO,useValue:"BrowserAnimations"},...kH],RH=[{provide:HF,useClass:sH},{provide:d.QbO,useValue:"NoopAnimations"},...kH];let iJ=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?RH:oL}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:oL,imports:[od]}),i})(),xJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();const $H_firebase={apiKey:"AIzaSyC8Ps7XSWdjAhMLS5XylEVpNfkDJqyz4_A",authDomain:"knossos-dungeon-blocks.firebaseapp.com",projectId:"knossos-dungeon-blocks",storageBucket:"knossos-dungeon-blocks.appspot.com",messagingSenderId:"454936440721",appId:"1:454936440721:web:3717720b189ed9678cf430"};function GH(i){return new Nn.y(n=>{(0,vc.Xf)(i()).subscribe(n)})}var PJ=z(8407);function sL(i){return i<=0?()=>os.E:(0,br.e)((n,e)=>{let r=[];n.subscribe((0,di.x)(e,o=>{r.push(o),i<r.length&&r.shift()},()=>{for(const o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}const Tn="primary",TC=Symbol("RouteTitle");class NJ{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function e0(i){return new NJ(i)}function FJ(i,n,e){const r=e.path.split("/");if(r.length>i.length||"full"===e.pathMatch&&(n.hasChildren()||r.length<i.length))return null;const o={};for(let s=0;s<r.length;s++){const c=r[s],h=i[s];if(c.startsWith(":"))o[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:i.slice(0,r.length),posParams:o}}function ou(i,n){const e=i?Object.keys(i):void 0,r=n?Object.keys(n):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let s=0;s<e.length;s++)if(o=e[s],!WH(i[o],n[o]))return!1;return!0}function WH(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const e=[...i].sort(),r=[...n].sort();return e.every((o,s)=>r[s]===o)}return i===n}function qH(i){return i.length>0?i[i.length-1]:null}function dp(i){return z6(i)?i:(0,d.QGY)(i)?(0,Hn.D)(Promise.resolve(i)):(0,It.of)(i)}const UJ={exact:function KH(i,n,e){if(!G_(i.segments,n.segments)||!JM(i.segments,n.segments,e)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!i.children[r]||!KH(i.children[r],n.children[r],e))return!1;return!0},subset:QH},YH={exact:function BJ(i,n){return ou(i,n)},subset:function VJ(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(e=>WH(i[e],n[e]))},ignored:()=>!0};function ZH(i,n,e){return UJ[e.paths](i.root,n.root,e.matrixParams)&&YH[e.queryParams](i.queryParams,n.queryParams)&&!("exact"===e.fragment&&i.fragment!==n.fragment)}function QH(i,n,e){return XH(i,n,n.segments,e)}function XH(i,n,e,r){if(i.segments.length>e.length){const o=i.segments.slice(0,e.length);return!(!G_(o,e)||n.hasChildren()||!JM(o,e,r))}if(i.segments.length===e.length){if(!G_(i.segments,e)||!JM(i.segments,e,r))return!1;for(const o in n.children)if(!i.children[o]||!QH(i.children[o],n.children[o],r))return!1;return!0}{const o=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(G_(i.segments,o)&&JM(i.segments,o,r)&&i.children[Tn])&&XH(i.children[Tn],n,s,r)}}function JM(i,n,e){return n.every((r,o)=>YH[e](i[o].parameters,r.parameters))}class t0{constructor(n=new Ri([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=e0(this.queryParams)),this._queryParamMap}toString(){return jJ.serialize(this)}}class Ri{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ek(this)}}class SC{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=e0(this.parameters)),this._parameterMap}toString(){return tz(this)}}function G_(i,n){return i.length===n.length&&i.every((e,r)=>e.path===n[r].path)}let AC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return new aL},providedIn:"root"}),i})();class aL{parse(n){const e=new eee(n);return new t0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${MC(n.root,!0)}`,r=function WJ(i){const n=Object.keys(i).map(e=>{const r=i[e];return Array.isArray(r)?r.map(o=>`${tk(e)}=${tk(o)}`).join("&"):`${tk(e)}=${tk(r)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams),o="string"==typeof n.fragment?`#${function $J(i){return encodeURI(i)}(n.fragment)}`:"";return`${e}${r}${o}`}}const jJ=new aL;function ek(i){return i.segments.map(n=>tz(n)).join("/")}function MC(i,n){if(!i.hasChildren())return ek(i);if(n){const e=i.children[Tn]?MC(i.children[Tn],!1):"",r=[];return Object.entries(i.children).forEach(([o,s])=>{o!==Tn&&r.push(`${o}:${MC(s,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function zJ(i,n){let e=[];return Object.entries(i.children).forEach(([r,o])=>{r===Tn&&(e=e.concat(n(o,r)))}),Object.entries(i.children).forEach(([r,o])=>{r!==Tn&&(e=e.concat(n(o,r)))}),e}(i,(r,o)=>o===Tn?[MC(i.children[Tn],!1)]:[`${o}:${MC(r,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Tn]?`${ek(i)}/${e[0]}`:`${ek(i)}/(${e.join("//")})`}}function JH(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tk(i){return JH(i).replace(/%3B/gi,";")}function lL(i){return JH(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nk(i){return decodeURIComponent(i)}function ez(i){return nk(i.replace(/\+/g,"%20"))}function tz(i){return`${lL(i.path)}${function GJ(i){return Object.keys(i).map(n=>`;${lL(n)}=${lL(i[n])}`).join("")}(i.parameters)}`}const qJ=/^[^\/()?;#]+/;function cL(i){const n=i.match(qJ);return n?n[0]:""}const YJ=/^[^\/()?;=#]+/,KJ=/^[^=?&#]+/,XJ=/^[^&#]+/;class eee{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ri([],{}):new Ri([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[Tn]=new Ri(n,e)),r}parseSegment(){const n=cL(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(n),new SC(nk(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function ZJ(i){const n=i.match(YJ);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=cL(this.remaining);o&&(r=o,this.capture(r))}n[nk(e)]=nk(r)}parseQueryParam(n){const e=function QJ(i){const n=i.match(KJ);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const c=function JJ(i){const n=i.match(XJ);return n?n[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=ez(e),s=ez(r);if(n.hasOwnProperty(o)){let c=n[o];Array.isArray(c)||(c=[c],n[o]=c),c.push(s)}else n[o]=s}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cL(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new d.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=Tn);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[Tn]:new Ri([],c),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new d.vHH(4011,!1)}}function nz(i){return i.segments.length>0?new Ri([],{[Tn]:i}):i}function iz(i){const n={};for(const r of Object.keys(i.children)){const s=iz(i.children[r]);if(r===Tn&&0===s.segments.length&&s.hasChildren())for(const[c,h]of Object.entries(s.children))n[c]=h;else(s.segments.length>0||s.hasChildren())&&(n[r]=s)}return function tee(i){if(1===i.numberOfChildren&&i.children[Tn]){const n=i.children[Tn];return new Ri(i.segments.concat(n.segments),n.children)}return i}(new Ri(i.segments,n))}function W_(i){return i instanceof t0}function rz(i){let n;const o=nz(function e(s){const c={};for(const p of s.children){const _=e(p);c[p.outlet]=_}const h=new Ri(s.url,c);return s===i&&(n=h),h}(i.root));return n??o}function oz(i,n,e,r){let o=i;for(;o.parent;)o=o.parent;if(0===n.length)return dL(o,o,o,e,r);const s=function iee(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new az(!0,0,i);let n=0,e=!1;const r=i.reduce((o,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Object.entries(s.outlets).forEach(([p,_])=>{h[p]="string"==typeof _?_.split("/"):_}),[...o,{outlets:h}]}if(s.segmentPath)return[...o,s.segmentPath]}return"string"!=typeof s?[...o,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?e=!0:".."===h?n++:""!=h&&o.push(h))}),o):[...o,s]},[]);return new az(e,n,r)}(n);if(s.toRoot())return dL(o,o,new Ri([],{}),e,r);const c=function ree(i,n,e){if(i.isAbsolute)return new rk(n,!0,0);if(!e)return new rk(n,!1,NaN);if(null===e.parent)return new rk(e,!0,0);const r=ik(i.commands[0])?0:1;return function oee(i,n,e){let r=i,o=n,s=e;for(;s>o;){if(s-=o,r=r.parent,!r)throw new d.vHH(4005,!1);o=r.segments.length}return new rk(r,!1,o-s)}(e,e.segments.length-1+r,i.numberOfDoubleDots)}(s,o,i),h=c.processChildren?RC(c.segmentGroup,c.index,s.commands):lz(c.segmentGroup,c.index,s.commands);return dL(o,c.segmentGroup,h,e,r)}function ik(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function kC(i){return"object"==typeof i&&null!=i&&i.outlets}function dL(i,n,e,r,o){let c,s={};r&&Object.entries(r).forEach(([p,_])=>{s[p]=Array.isArray(_)?_.map(w=>`${w}`):`${_}`}),c=i===n?e:sz(i,n,e);const h=nz(iz(c));return new t0(h,s,o)}function sz(i,n,e){const r={};return Object.entries(i.children).forEach(([o,s])=>{r[o]=s===n?e:sz(s,n,e)}),new Ri(i.segments,r)}class az{constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&ik(r[0]))throw new d.vHH(4003,!1);const o=r.find(kC);if(o&&o!==qH(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rk{constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}}function lz(i,n,e){if(i||(i=new Ri([],{})),0===i.segments.length&&i.hasChildren())return RC(i,n,e);const r=function aee(i,n,e){let r=0,o=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;o<i.segments.length;){if(r>=e.length)return s;const c=i.segments[o],h=e[r];if(kC(h))break;const p=`${h}`,_=r<e.length-1?e[r+1]:null;if(o>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!dz(p,_,c))return s;r+=2}else{if(!dz(p,{},c))return s;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(i,n,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<i.segments.length){const s=new Ri(i.segments.slice(0,r.pathIndex),{});return s.children[Tn]=new Ri(i.segments.slice(r.pathIndex),i.children),RC(s,0,o)}return r.match&&0===o.length?new Ri(i.segments,{}):r.match&&!i.hasChildren()?uL(i,n,e):r.match?RC(i,0,o):uL(i,n,e)}function RC(i,n,e){if(0===e.length)return new Ri(i.segments,{});{const r=function see(i){return kC(i[0])?i[0].outlets:{[Tn]:i}}(e),o={};if(!r[Tn]&&i.children[Tn]&&1===i.numberOfChildren&&0===i.children[Tn].segments.length){const s=RC(i.children[Tn],n,e);return new Ri(i.segments,s.children)}return Object.entries(r).forEach(([s,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(o[s]=lz(i.children[s],n,c))}),Object.entries(i.children).forEach(([s,c])=>{void 0===r[s]&&(o[s]=c)}),new Ri(i.segments,o)}}function uL(i,n,e){const r=i.segments.slice(0,n);let o=0;for(;o<e.length;){const s=e[o];if(kC(s)){const p=lee(s.outlets);return new Ri(r,p)}if(0===o&&ik(e[0])){r.push(new SC(i.segments[n].path,cz(e[0]))),o++;continue}const c=kC(s)?s.outlets[Tn]:`${s}`,h=o<e.length-1?e[o+1]:null;c&&h&&ik(h)?(r.push(new SC(c,cz(h))),o+=2):(r.push(new SC(c,{})),o++)}return new Ri(r,{})}function lee(i){const n={};return Object.entries(i).forEach(([e,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(n[e]=uL(new Ri([],{}),0,r))}),n}function cz(i){const n={};return Object.entries(i).forEach(([e,r])=>n[e]=`${r}`),n}function dz(i,n,e){return i==e.path&&ou(n,e.parameters)}const PC="imperative";class su{constructor(n,e){this.id=n,this.url=e}}class hL extends su{constructor(n,e,r="imperative",o=null){super(n,e),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class q_ extends su{constructor(n,e,r){super(n,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ok extends su{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class OC extends su{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=16}}class fL extends su{constructor(n,e,r,o){super(n,e),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cee extends su{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dee extends su{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uee extends su{constructor(n,e,r,o,s){super(n,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hee extends su{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fee extends su{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mee{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pee{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gee{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _ee{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yee{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vee{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uz{constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bee{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new NC,this.attachRef=null}}let NC=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new bee,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class hz{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=mL(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){const e=mL(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=pL(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return pL(n,this._root).map(e=>e.value)}}function mL(i,n){if(i===n.value)return n;for(const e of n.children){const r=mL(i,e);if(r)return r}return null}function pL(i,n){if(i===n.value)return[n];for(const e of n.children){const r=pL(i,e);if(r.length)return r.unshift(n),r}return[]}class tf{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function n0(i){const n={};return i&&i.children.forEach(e=>n[e.value.outlet]=e),n}class fz extends hz{constructor(n,e){super(n),this.snapshot=e,gL(this,n)}toString(){return this.snapshot.toString()}}function mz(i,n){const e=function wee(i,n){const c=new sk([],{},{},"",{},Tn,n,null,{});return new gz("",new tf(c,[]))}(0,n),r=new xa.X([new SC("",{})]),o=new xa.X({}),s=new xa.X({}),c=new xa.X({}),h=new xa.X(""),p=new up(r,o,c,h,s,Tn,n,e.root);return p.snapshot=e.root,new fz(new tf(p,[]),e)}class up{constructor(n,e,r,o,s,c,h,p){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=s,this.outlet=c,this.component=h,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,gt.U)(_=>_[TC]))??(0,It.of)(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(n=>e0(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(n=>e0(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pz(i,n="emptyOnly"){const e=i.pathFromRoot;let r=0;if("always"!==n)for(r=e.length-1;r>=1;){const o=e[r],s=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(s.component)break;r--}}return function xee(i){return i.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class sk{get title(){return this.data?.[TC]}constructor(n,e,r,o,s,c,h,p,_){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=s,this.outlet=c,this.component=h,this.routeConfig=p,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=e0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=e0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gz extends hz{constructor(n,e){super(e),this.url=n,gL(this,e)}toString(){return _z(this._root)}}function gL(i,n){n.value._routerState=i,n.children.forEach(e=>gL(i,e))}function _z(i){const n=i.children.length>0?` { ${i.children.map(_z).join(", ")} } `:"";return`${i.value}${n}`}function _L(i){if(i.snapshot){const n=i.snapshot,e=i._futureSnapshot;i.snapshot=e,ou(n.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),ou(n.params,e.params)||i.paramsSubject.next(e.params),function LJ(i,n){if(i.length!==n.length)return!1;for(let e=0;e<i.length;++e)if(!ou(i[e],n[e]))return!1;return!0}(n.url,e.url)||i.urlSubject.next(e.url),ou(n.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function yL(i,n){const e=ou(i.params,n.params)&&function HJ(i,n){return G_(i,n)&&i.every((e,r)=>ou(e.parameters,n[r].parameters))}(i.url,n.url);return e&&!(!i.parent!=!n.parent)&&(!i.parent||yL(i.parent,n.parent))}let vL=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tn,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(NC),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(ak,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=e;const o=this.location,c=e.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new Eee(e,h,o.injector);this.activated=o.createComponent(c,{index:o.length,injector:p,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=d.lG2({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),i})();class Eee{constructor(n,e,r){this.route=n,this.childContexts=e,this.parent=r}get(n,e){return n===up?this.route:n===NC?this.childContexts:this.parent.get(n,e)}}const ak=new d.OlP("");let yz=(()=>{class i{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:r}=e,o=lM([r.queryParams,r.params,r.data]).pipe((0,ji.w)(([s,c,h],p)=>(h={...s,...c,...h},0===p?(0,It.of)(h):Promise.resolve(h)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(e);const c=(0,d.qFp)(r.component);if(c)for(const{templateName:h}of c.inputs)e.activatedComponentRef.setInput(h,s[h]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,o)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();function FC(i,n,e){if(e&&i.shouldReuseRoute(n.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=n.value;const o=function Dee(i,n,e){return n.children.map(r=>{for(const o of e.children)if(i.shouldReuseRoute(r.value,o.value.snapshot))return FC(i,r,o);return FC(i,r)})}(i,n,e);return new tf(r,o)}{if(i.shouldAttach(n.value)){const s=i.retrieve(n.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(h=>FC(i,h)),c}}const r=function Iee(i){return new up(new xa.X(i.url),new xa.X(i.params),new xa.X(i.queryParams),new xa.X(i.fragment),new xa.X(i.data),i.outlet,i.component,i)}(n.value),o=n.children.map(s=>FC(i,s));return new tf(r,o)}}const bL="ngNavigationCancelingError";function vz(i,n){const{redirectTo:e,navigationBehaviorOptions:r}=W_(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=bz(!1,0,n);return o.url=e,o.navigationBehaviorOptions=r,o}function bz(i,n,e){const r=new Error("NavigationCancelingError: "+(i||""));return r[bL]=!0,r.cancellationCode=n,e&&(r.url=e),r}function wz(i){return xz(i)&&W_(i.url)}function xz(i){return i&&i[bL]}let Ez=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(e,r){1&e&&d._UZ(0,"router-outlet")},dependencies:[vL],encapsulation:2}),i})();function wL(i){const n=i.children&&i.children.map(wL),e=n?{...i,children:n}:{...i};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Tn&&(e.component=Ez),e}function Bc(i){return i.outlet||Tn}function LC(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let n=i.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Pee{constructor(n,e,r,o,s){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=s}activate(n){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),_L(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){const o=n0(e);n.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,o[c],r),delete o[c]}),Object.values(o).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(n,e,r){const o=n.value,s=e?e.value:null;if(o===s)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(n,e,c.children)}else this.deactivateChildRoutes(n,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,s=n0(n);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],o);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:h})}}deactivateRouteAndOutlet(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,s=n0(n);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){const o=n0(e);n.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],r),this.forwardEvent(new vee(s.value.snapshot))}),n.children.length&&this.forwardEvent(new _ee(n.value.snapshot))}activateRoutes(n,e,r){const o=n.value,s=e?e.value:null;if(_L(o),o===s)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,c.children)}else this.activateChildRoutes(n,e,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const h=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),_L(h.route.value),this.activateChildRoutes(n,null,c.children)}else{const h=LC(o.snapshot);c.attachRef=null,c.route=o,c.injector=h,c.outlet&&c.outlet.activateWith(o,c.injector),this.activateChildRoutes(n,null,c.children)}}else this.activateChildRoutes(n,null,r)}}class Cz{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class lk{constructor(n,e){this.component=n,this.route=e}}function Oee(i,n,e){const r=i._root;return UC(r,n?n._root:null,e,[r.value])}function r0(i,n){const e=Symbol(),r=n.get(i,e);return r===e?"function"!=typeof i||(0,d.Z0I)(i)?n.get(i):i:r}function UC(i,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=n0(n);return i.children.forEach(c=>{(function Fee(i,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,c=n?n.value:null,h=e?e.getContext(i.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function Lee(i,n,e){if("function"==typeof e)return e(i,n);switch(e){case"pathParamsChange":return!G_(i.url,n.url);case"pathParamsOrQueryParamsChange":return!G_(i.url,n.url)||!ou(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yL(i,n)||!ou(i.queryParams,n.queryParams);default:return!yL(i,n)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?o.canActivateChecks.push(new Cz(r)):(s.data=c.data,s._resolvedData=c._resolvedData),UC(i,n,s.component?h?h.children:null:e,r,o),p&&h&&h.outlet&&h.outlet.isActivated&&o.canDeactivateChecks.push(new lk(h.outlet.component,c))}else c&&BC(n,h,o),o.canActivateChecks.push(new Cz(r)),UC(i,null,s.component?h?h.children:null:e,r,o)})(c,s[c.value.outlet],e,r.concat([c.value]),o),delete s[c.value.outlet]}),Object.entries(s).forEach(([c,h])=>BC(h,e.getContext(c),o)),o}function BC(i,n,e){const r=n0(i),o=i.value;Object.entries(r).forEach(([s,c])=>{BC(c,o.component?n?n.children.getContext(s):null:n,e)}),e.canDeactivateChecks.push(new lk(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function VC(i){return"function"==typeof i}function Dz(i){return i instanceof md||"EmptyError"===i?.name}const ck=Symbol("INITIAL_VALUE");function o0(){return(0,ji.w)(i=>lM(i.map(n=>n.pipe(Hr(1),kc(ck)))).pipe((0,gt.U)(n=>{for(const e of n)if(!0!==e){if(e===ck)return ck;if(!1===e||e instanceof t0)return e}return!0}),Pn(n=>n!==ck),Hr(1)))}function Iz(i){return(0,PJ.z)((0,Ao.b)(n=>{if(W_(n))throw vz(0,n)}),(0,gt.U)(n=>!0===n))}class dk{constructor(n){this.segmentGroup=n||null}}class Tz{constructor(n){this.urlTree=n}}function s0(i){return Yb(new dk(i))}function Sz(i){return Yb(new Tz(i))}class ite{constructor(n,e){this.urlSerializer=n,this.urlTree=e}noMatchError(n){return new d.vHH(4002,!1)}lineralizeSegments(n,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,It.of)(r);if(o.numberOfChildren>1||!o.children[Tn])return Yb(new d.vHH(4e3,!1));o=o.children[Tn]}}applyRedirectCommands(n,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r)}applyRedirectCreateUrlTree(n,e,r,o){const s=this.createSegmentGroup(n,e.root,r,o);return new t0(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const r={};return Object.entries(n).forEach(([o,s])=>{if("string"==typeof s&&s.startsWith(":")){const h=s.substring(1);r[o]=e[h]}else r[o]=s}),r}createSegmentGroup(n,e,r,o){const s=this.createSegments(n,e.segments,r,o);let c={};return Object.entries(e.children).forEach(([h,p])=>{c[h]=this.createSegmentGroup(n,p,r,o)}),new Ri(s,c)}createSegments(n,e,r,o){return e.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,o):this.findOrReturn(s,r))}findPosParam(n,e,r){const o=r[e.path.substring(1)];if(!o)throw new d.vHH(4001,!1);return o}findOrReturn(n,e){let r=0;for(const o of e){if(o.path===n.path)return e.splice(r),o;r++}return n}}const xL={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rte(i,n,e,r,o){const s=EL(i,n,e);return s.matched?(r=function Tee(i,n){return i.providers&&!i._injector&&(i._injector=(0,d.MMx)(i.providers,n,`Route: ${i.path}`)),i._injector??n}(n,r),function ete(i,n,e,r){const o=n.canMatch;if(!o||0===o.length)return(0,It.of)(!0);const s=o.map(c=>{const h=r0(c,i);return dp(function jee(i){return i&&VC(i.canMatch)}(h)?h.canMatch(n,e):i.runInContext(()=>h(n,e)))});return(0,It.of)(s).pipe(o0(),Iz())}(r,n,e).pipe((0,gt.U)(c=>!0===c?s:{...xL}))):(0,It.of)(s)}function EL(i,n,e){if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||e.length>0)?{...xL}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(n.matcher||FJ)(e,i,n);if(!o)return{...xL};const s={};Object.entries(o.posParams??{}).forEach(([h,p])=>{s[h]=p.path});const c=o.consumed.length>0?{...s,...o.consumed[o.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:c,positionalParamSegments:o.posParams??{}}}function Az(i,n,e,r){return e.length>0&&function ate(i,n,e){return e.some(r=>uk(i,n,r)&&Bc(r)!==Tn)}(i,e,r)?{segmentGroup:new Ri(n,ste(r,new Ri(e,i.children))),slicedSegments:[]}:0===e.length&&function lte(i,n,e){return e.some(r=>uk(i,n,r))}(i,e,r)?{segmentGroup:new Ri(i.segments,ote(i,0,e,r,i.children)),slicedSegments:e}:{segmentGroup:new Ri(i.segments,i.children),slicedSegments:e}}function ote(i,n,e,r,o){const s={};for(const c of r)if(uk(i,e,c)&&!o[Bc(c)]){const h=new Ri([],{});s[Bc(c)]=h}return{...o,...s}}function ste(i,n){const e={};e[Tn]=n;for(const r of i)if(""===r.path&&Bc(r)!==Tn){const o=new Ri([],{});e[Bc(r)]=o}return e}function uk(i,n,e){return(!(i.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class hte{constructor(n,e,r,o,s,c,h){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=o,this.urlTree=s,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new ite(this.urlSerializer,this.urlTree)}noMatchError(n){return new d.vHH(4002,!1)}recognize(){const n=Az(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,Tn).pipe(sp(e=>{if(e instanceof Tz)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof dk?this.noMatchError(e):e}),(0,gt.U)(e=>{const r=new sk([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tn,this.rootComponentType,null,{}),o=new tf(r,e),s=new gz("",o),c=function nee(i,n,e=null,r=null){return oz(rz(i),n,e,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(s._root),{state:s,tree:c}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,Tn).pipe(sp(r=>{throw r instanceof dk?this.noMatchError(r):r}))}inheritParamsAndData(n){const e=n.value,r=pz(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,e,r):this.processSegment(n,e,r,r.segments,o,!0)}processChildren(n,e,r){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return(0,Hn.D)(o).pipe(Zb(s=>{const c=r.children[s],h=function kee(i,n){const e=i.filter(r=>Bc(r)===n);return e.push(...i.filter(r=>Bc(r)!==n)),e}(e,s);return this.processSegmentGroup(n,h,c,s)}),Va((s,c)=>(s.push(...c),s)),Oa(null),function OJ(i,n){const e=arguments.length>=2;return r=>r.pipe(i?Pn((o,s)=>i(o,s,r)):ha.y,sL(1),e?Oa(n):Na(()=>new md))}(),(0,Mo.z)(s=>{if(null===s)return s0(r);const c=Mz(s);return function fte(i){i.sort((n,e)=>n.value.outlet===Tn?-1:e.value.outlet===Tn?1:n.value.outlet.localeCompare(e.value.outlet))}(c),(0,It.of)(c)}))}processSegment(n,e,r,o,s,c){return(0,Hn.D)(e).pipe(Zb(h=>this.processSegmentAgainstRoute(h._injector??n,e,h,r,o,s,c).pipe(sp(p=>{if(p instanceof dk)return(0,It.of)(null);throw p}))),ws(h=>!!h),sp(h=>{if(Dz(h))return function dte(i,n,e){return 0===n.length&&!i.children[e]}(r,o,s)?(0,It.of)([]):s0(r);throw h}))}processSegmentAgainstRoute(n,e,r,o,s,c,h){return function cte(i,n,e,r){return!!(Bc(i)===r||r!==Tn&&uk(n,e,i))&&("**"===i.path||EL(n,i,e).matched)}(r,o,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,o,r,s,c,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,o,e,r,s,c):s0(o):s0(o)}expandSegmentAgainstRouteUsingRedirect(n,e,r,o,s,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,r,o){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Sz(s):this.applyRedirects.lineralizeSegments(r,s).pipe((0,Mo.z)(c=>{const h=new Ri(c,{});return this.processSegment(n,e,h,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,s,c){const{matched:h,consumedSegments:p,remainingSegments:_,positionalParamSegments:w}=EL(e,o,s);if(!h)return s0(e);const I=this.applyRedirects.applyRedirectCommands(p,o.redirectTo,w);return o.redirectTo.startsWith("/")?Sz(I):this.applyRedirects.lineralizeSegments(o,I).pipe((0,Mo.z)(A=>this.processSegment(n,r,e,A.concat(_),c,!1)))}matchSegmentAgainstRoute(n,e,r,o,s,c){let h;if("**"===r.path){const p=o.length>0?qH(o).parameters:{},_=new sk(o,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kz(r),Bc(r),r.component??r._loadedComponent??null,r,Rz(r));h=(0,It.of)({snapshot:_,consumedSegments:[],remainingSegments:[]}),e.children={}}else h=rte(e,r,o,n).pipe((0,gt.U)(({matched:p,consumedSegments:_,remainingSegments:w,parameters:I})=>p?{snapshot:new sk(_,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kz(r),Bc(r),r.component??r._loadedComponent??null,r,Rz(r)),consumedSegments:_,remainingSegments:w}:null));return h.pipe((0,ji.w)(p=>null===p?s0(e):this.getChildConfig(n=r._injector??n,r,o).pipe((0,ji.w)(({routes:_})=>{const w=r._loadedInjector??n,{snapshot:I,consumedSegments:A,remainingSegments:P}=p,{segmentGroup:B,slicedSegments:Y}=Az(e,A,P,_);if(0===Y.length&&B.hasChildren())return this.processChildren(w,_,B).pipe((0,gt.U)(ve=>null===ve?null:[new tf(I,ve)]));if(0===_.length&&0===Y.length)return(0,It.of)([new tf(I,[])]);const ee=Bc(r)===s;return this.processSegment(w,_,B,Y,ee?Tn:s,!0).pipe((0,gt.U)(ve=>[new tf(I,ve)]))}))))}getChildConfig(n,e,r){return e.children?(0,It.of)({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?(0,It.of)({routes:e._loadedRoutes,injector:e._loadedInjector}):function Jee(i,n,e,r){const o=n.canLoad;if(void 0===o||0===o.length)return(0,It.of)(!0);const s=o.map(c=>{const h=r0(c,i);return dp(function Bee(i){return i&&VC(i.canLoad)}(h)?h.canLoad(n,e):i.runInContext(()=>h(n,e)))});return(0,It.of)(s).pipe(o0(),Iz())}(n,e,r).pipe((0,Mo.z)(o=>o?this.configLoader.loadChildren(n,e).pipe((0,Ao.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function nte(i){return Yb(bz(!1,3))}())):(0,It.of)({routes:[],injector:n})}}function mte(i){const n=i.value.routeConfig;return n&&""===n.path}function Mz(i){const n=[],e=new Set;for(const r of i){if(!mte(r)){n.push(r);continue}const o=n.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==o?(o.children.push(...r.children),e.add(o)):n.push(r)}for(const r of e){const o=Mz(r.children);n.push(new tf(r.value,o))}return n.filter(r=>!e.has(r))}function kz(i){return i.data||{}}function Rz(i){return i.resolve||{}}function Pz(i){return"string"==typeof i.title||null===i.title}function CL(i){return(0,ji.w)(n=>{const e=i(n);return e?(0,Hn.D)(e).pipe((0,gt.U)(()=>n)):(0,It.of)(n)})}const a0=new d.OlP("ROUTES");let DL=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return(0,It.of)(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=dp(e.loadComponent()).pipe((0,gt.U)(Oz),(0,Ao.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),_M(()=>{this.componentLoaders.delete(e)})),o=new oF(r,()=>new dn.x).pipe(rF());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,It.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,gt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,_;return Array.isArray(h)?_=h:(p=h.create(e).injector,_=p.get(a0,[],d.XFs.Self|d.XFs.Optional).flat()),{routes:_.map(wL),injector:p}}),_M(()=>{this.childrenLoaders.delete(r)})),c=new oF(s,()=>new dn.x).pipe(rF());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(e){return dp(e()).pipe((0,gt.U)(Oz),(0,Mo.z)(r=>r instanceof d.YKP||Array.isArray(r)?(0,It.of)(r):(0,Hn.D)(this.compiler.compileModuleAsync(r))))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Oz(i){return function wte(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let hk=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new dn.x,this.configLoader=(0,d.f3M)(DL),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(AC),this.rootContexts=(0,d.f3M)(NC),this.inputBindingEnabled=null!==(0,d.f3M)(ak,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,It.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new pee(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new mee(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new xa.X({id:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:PC,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pn(r=>0!==r.id),(0,gt.U)(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),(0,ji.w)(r=>{let o=!1,s=!1;return(0,It.of)(r).pipe((0,Ao.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ji.w)(c=>{const h=e.browserUrlTree.toString(),p=!e.navigated||c.extractedUrl.toString()!==h||h!==e.currentUrlTree.toString();if(!p&&"reload"!==(c.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const w="";return this.events.next(new OC(c.id,e.serializeUrl(r.rawUrl),w,0)),e.rawUrlTree=c.rawUrl,c.resolve(null),os.E}if(e.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Nz(c.source)&&(e.browserUrlTree=c.extractedUrl),(0,It.of)(c).pipe((0,ji.w)(w=>{const I=this.transitions?.getValue();return this.events.next(new hL(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),I!==this.transitions?.getValue()?os.E:Promise.resolve(w)}),function pte(i,n,e,r,o,s){return(0,Mo.z)(c=>function ute(i,n,e,r,o,s,c="emptyOnly"){return new hte(i,n,e,r,o,c,s).recognize()}(i,n,e,r,c.extractedUrl,o,s).pipe((0,gt.U)(({state:h,tree:p})=>({...c,targetSnapshot:h,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,Ao.b)(w=>{if(r.targetSnapshot=w.targetSnapshot,r.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},"eager"===e.urlUpdateStrategy){if(!w.extras.skipLocationChange){const A=e.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);e.setBrowserUrl(A,w)}e.browserUrlTree=w.urlAfterRedirects}const I=new cee(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(I)}));if(p&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:w,extractedUrl:I,source:A,restoredState:P,extras:B}=c,Y=new hL(w,this.urlSerializer.serialize(I),A,P);this.events.next(Y);const ee=mz(0,this.rootComponentType).snapshot;return r={...c,targetSnapshot:ee,urlAfterRedirects:I,extras:{...B,skipLocationChange:!1,replaceUrl:!1}},(0,It.of)(r)}{const w="";return this.events.next(new OC(c.id,e.serializeUrl(r.extractedUrl),w,1)),e.rawUrlTree=c.rawUrl,c.resolve(null),os.E}}),(0,Ao.b)(c=>{const h=new dee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),(0,gt.U)(c=>r={...c,guards:Oee(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function Gee(i,n){return(0,Mo.z)(e=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?(0,It.of)({...e,guardsResult:!0}):function Wee(i,n,e,r){return(0,Hn.D)(i).pipe((0,Mo.z)(o=>function Xee(i,n,e,r,o){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,It.of)(!0);const c=s.map(h=>{const p=LC(n)??o,_=r0(h,p);return dp(function zee(i){return i&&VC(i.canDeactivate)}(_)?_.canDeactivate(i,n,e,r):p.runInContext(()=>_(i,n,e,r))).pipe(ws())});return(0,It.of)(c).pipe(o0())}(o.component,o.route,e,n,r)),ws(o=>!0!==o,!0))}(c,r,o,i).pipe((0,Mo.z)(h=>h&&function Uee(i){return"boolean"==typeof i}(h)?function qee(i,n,e,r){return(0,Hn.D)(n).pipe(Zb(o=>xv(function Zee(i,n){return null!==i&&n&&n(new gee(i)),(0,It.of)(!0)}(o.route.parent,r),function Yee(i,n){return null!==i&&n&&n(new yee(i)),(0,It.of)(!0)}(o.route,r),function Qee(i,n,e){const r=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(c=>function Nee(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(c)).filter(c=>null!==c).map(c=>GH(()=>{const h=c.guards.map(p=>{const _=LC(c.node)??e,w=r0(p,_);return dp(function Hee(i){return i&&VC(i.canActivateChild)}(w)?w.canActivateChild(r,i):_.runInContext(()=>w(r,i))).pipe(ws())});return(0,It.of)(h).pipe(o0())}));return(0,It.of)(s).pipe(o0())}(i,o.path,e),function Kee(i,n,e){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return(0,It.of)(!0);const o=r.map(s=>GH(()=>{const c=LC(n)??e,h=r0(s,c);return dp(function Vee(i){return i&&VC(i.canActivate)}(h)?h.canActivate(n,i):c.runInContext(()=>h(n,i))).pipe(ws())}));return(0,It.of)(o).pipe(o0())}(i,o.route,e))),ws(o=>!0!==o,!0))}(r,s,i,n):(0,It.of)(h)),(0,gt.U)(h=>({...e,guardsResult:h})))})}(this.environmentInjector,c=>this.events.next(c)),(0,Ao.b)(c=>{if(r.guardsResult=c.guardsResult,W_(c.guardsResult))throw vz(0,c.guardsResult);const h=new uee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Pn(c=>!!c.guardsResult||(e.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),CL(c=>{if(c.guards.canActivateChecks.length)return(0,It.of)(c).pipe((0,Ao.b)(h=>{const p=new hee(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),(0,ji.w)(h=>{let p=!1;return(0,It.of)(h).pipe(function gte(i,n){return(0,Mo.z)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return(0,It.of)(e);let s=0;return(0,Hn.D)(o).pipe(Zb(c=>function _te(i,n,e,r){const o=i.routeConfig,s=i._resolve;return void 0!==o?.title&&!Pz(o)&&(s[TC]=o.title),function yte(i,n,e,r){const o=function vte(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===o.length)return(0,It.of)({});const s={};return(0,Hn.D)(o).pipe((0,Mo.z)(c=>function bte(i,n,e,r){const o=LC(n)??r,s=r0(i,o);return dp(s.resolve?s.resolve(n,e):o.runInContext(()=>s(n,e)))}(i[c],n,e,r).pipe(ws(),(0,Ao.b)(h=>{s[c]=h}))),sL(1),wF(s),sp(c=>Dz(c)?os.E:Yb(c)))}(s,i,n,r).pipe((0,gt.U)(c=>(i._resolvedData=c,i.data=pz(i,e).resolve,o&&Pz(o)&&(i.data[TC]=o.title),null)))}(c.route,r,i,n)),(0,Ao.b)(()=>s++),sL(1),(0,Mo.z)(c=>s===o.length?(0,It.of)(e):os.E))})}(e.paramsInheritanceStrategy,this.environmentInjector),(0,Ao.b)({next:()=>p=!0,complete:()=>{p||(e.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,Ao.b)(h=>{const p=new fee(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),CL(c=>{const h=p=>{const _=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(p.routeConfig).pipe((0,Ao.b)(w=>{p.component=w}),(0,gt.U)(()=>{})));for(const w of p.children)_.push(...h(w));return _};return lM(h(c.targetSnapshot.root)).pipe(Oa(),Hr(1))}),CL(()=>this.afterPreactivation()),(0,gt.U)(c=>{const h=function Cee(i,n,e){const r=FC(i,n._root,e?e._root:void 0);return new fz(r,n)}(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:h}}),(0,Ao.b)(c=>{e.currentUrlTree=c.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),e.routerState=c.targetRouterState,"deferred"===e.urlUpdateStrategy&&(c.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,c),e.browserUrlTree=c.urlAfterRedirects)}),((i,n,e,r)=>(0,gt.U)(o=>(new Pee(n,o.targetRouterState,o.currentRouterState,e,r).activate(i),o)))(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Hr(1),(0,Ao.b)({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new q_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),_M(()=>{o||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),sp(c=>{if(s=!0,xz(c)){wz(c)||(e.navigated=!0,e.restoreHistory(r,!0));const h=new ok(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(h),wz(c)){const p=e.urlHandlingStrategy.merge(c.url,e.rawUrlTree),_={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||Nz(r.source)};e.scheduleNavigation(p,PC,null,_,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const h=new fL(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(e.errorHandler(c))}catch(p){r.reject(p)}}return os.E}))}))}cancelNavigationTransition(e,r,o){const s=new ok(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(s),e.resolve(!1)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Nz(i){return i!==PC}let Fz=(()=>{class i{buildTitle(e){let r,o=e.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===Tn);return r}getResolvedTitleForRoute(e){return e.data[TC]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(xte)},providedIn:"root"}),i})(),xte=(()=>{class i extends Fz{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(ad))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ete=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(Dte)},providedIn:"root"}),i})();class Cte{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let Dte=(()=>{class i extends Cte{}return i.\u0275fac=function(){let n;return function(r){return(n||(n=d.n5z(i)))(r||i)}}(),i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const fk=new d.OlP("",{providedIn:"root",factory:()=>({})});let Ite=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:function(){return(0,d.f3M)(Tte)},providedIn:"root"}),i})(),Tte=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ol=(()=>((ol=ol||{})[ol.COMPLETE=0]="COMPLETE",ol[ol.FAILED=1]="FAILED",ol[ol.REDIRECTING=2]="REDIRECTING",ol))();function Lz(i,n){i.events.pipe(Pn(e=>e instanceof q_||e instanceof ok||e instanceof fL||e instanceof OC),(0,gt.U)(e=>e instanceof q_||e instanceof OC?ol.COMPLETE:e instanceof ok&&(0===e.code||1===e.code)?ol.REDIRECTING:ol.FAILED),Pn(e=>e!==ol.REDIRECTING),Hr(1)).subscribe(()=>{n()})}function Ste(i){throw i}function Ate(i,n,e){return n.parse("/")}const Mte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kte={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ea=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(fk,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||Ste,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ate,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(Ite),this.routeReuseStrategy=(0,d.f3M)(Ete),this.titleStrategy=(0,d.f3M)(Fz),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(a0,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(hk),this.urlSerializer=(0,d.f3M)(AC),this.location=(0,d.f3M)(st),this.componentInputBindingEnabled=!!(0,d.f3M)(ak,{optional:!0}),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new t0,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=mz(0,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),PC,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,o){const s={replaceUrl:!0},c=o?.navigationId?o:null;if(o){const p={...o};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(e);this.scheduleNavigation(h,r,c,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(wL),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:o,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,_=p?this.currentUrlTree.fragment:c;let I,w=null;switch(h){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}null!==w&&(w=this.removeEmptyProps(w));try{I=rz(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),I=this.currentUrlTree.root}return oz(I,e,w,_??null)}navigateByUrl(e,r={skipLocationChange:!1}){const o=W_(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,PC,null,r)}navigate(e,r={skipLocationChange:!1}){return function Rte(i){for(let n=0;n<i.length;n++)if(null==i[n])throw new d.vHH(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return r}isActive(e,r){let o;if(o=!0===r?{...Mte}:!1===r?{...kte}:r,W_(e))return ZH(this.currentUrlTree,e,o);const s=this.parseUrl(e);return ZH(this.currentUrlTree,s,o)}removeEmptyProps(e){return Object.keys(e).reduce((r,o)=>{const s=e[o];return null!=s&&(r[o]=s),r},{})}scheduleNavigation(e,r,o,s,c){if(this.disposed)return Promise.resolve(!1);let h,p,_;c?(h=c.resolve,p=c.reject,_=c.promise):_=new Promise((I,A)=>{h=I,p=A});const w=this.pendingTasks.add();return Lz(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:h,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(I=>Promise.reject(I))}setBrowserUrl(e,r){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",c)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(o,"",s)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),l0=(()=>{class i{constructor(e,r,o,s,c,h){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=c,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new dn.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const p=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=e.events.subscribe(_=>{_ instanceof q_&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,o,s,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||o||s||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const o=this.renderer,s=this.el.nativeElement;null!==r?o.setAttribute(s,e,r):o.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Ea),d.Y36(up),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Ge))},i.\u0275dir=d.lG2({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,r){1&e&&d.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]}),i})();class Uz{}let Nte=(()=>{class i{constructor(e,r,o,s,c){this.router=e,this.injector=o,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Pn(e=>e instanceof q_),Zb(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const o=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,d.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,h=s._loadedInjector??c;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(c,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,Hn.D)(o).pipe((0,Ag.J)())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):(0,It.of)(null);const s=o.pipe((0,Mo.z)(c=>null===c?(0,It.of)(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Hn.D)([s,c]).pipe((0,Ag.J)())}return s})}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Ea),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Uz),d.LFG(DL))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const IL=new d.OlP("");let Bz=(()=>{class i{constructor(e,r,o,s,c={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof hL?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof q_?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof OC&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof uz&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new uz(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return i.\u0275fac=function(e){d.$Z()},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})();function nf(i,n){return{\u0275kind:i,\u0275providers:n}}function Hz(){const i=(0,d.f3M)(d.zs3);return n=>{const e=i.get(d.z2F);if(n!==e.components[0])return;const r=i.get(Ea),o=i.get(zz);1===i.get(TL)&&r.initialNavigation(),i.get(jz,null,d.XFs.Optional)?.setUpPreloading(),i.get(IL,null,d.XFs.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const zz=new d.OlP("",{factory:()=>new dn.x}),TL=new d.OlP("",{providedIn:"root",factory:()=>1}),jz=new d.OlP("");function Bte(i){return nf(0,[{provide:jz,useExisting:Nte},{provide:Uz,useExisting:i}])}const $z=new d.OlP("ROUTER_FORROOT_GUARD"),Hte=[st,{provide:AC,useClass:aL},Ea,NC,{provide:up,useFactory:function Vz(i){return i.routerState.root},deps:[Ea]},DL,[]];function zte(){return new d.PXZ("Router",Ea)}let Gz=(()=>{class i{constructor(e){}static forRoot(e,r){return{ngModule:i,providers:[Hte,[],{provide:a0,multi:!0,useValue:e},{provide:$z,useFactory:Wte,deps:[[Ea,new d.FiY,new d.tp0]]},{provide:fk,useValue:r||{}},r?.useHash?{provide:Ge,useClass:Ne}:{provide:Ge,useClass:ot},{provide:IL,useFactory:()=>{const i=(0,d.f3M)(Ta),n=(0,d.f3M)(d.R0b),e=(0,d.f3M)(fk),r=(0,d.f3M)(hk),o=(0,d.f3M)(AC);return e.scrollOffset&&i.setOffset(e.scrollOffset),new Bz(o,r,i,n,e)}},r?.preloadingStrategy?Bte(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:zte},r?.initialNavigation?qte(r):[],r?.bindToComponentInputs?nf(8,[yz,{provide:ak,useExisting:yz}]).\u0275providers:[],[{provide:Wz,useFactory:Hz},{provide:d.tb,multi:!0,useExisting:Wz}]]}}static forChild(e){return{ngModule:i,providers:[{provide:a0,multi:!0,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(d.LFG($z,8))},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({}),i})();function Wte(i){return"guarded"}function qte(i){return["disabled"===i.initialNavigation?nf(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const n=(0,d.f3M)(Ea);return()=>{n.setUpLocationChangeListener()}}},{provide:TL,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?nf(2,[{provide:TL,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:n=>{const e=n.get(Ue,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=n.get(Ea),s=n.get(zz);Lz(o,()=>{r(!0)}),n.get(hk).afterPreactivation=()=>(r(!0),s.closed?(0,It.of)(void 0):s),o.initialNavigation()}))}}]).\u0275providers:[]]}const Wz=new d.OlP(""),qz={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let mk;const Zte=new Uint8Array(16);function Kte(){if(!mk&&(mk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mk(Zte)}const hs=[];for(let i=0;i<256;++i)hs.push((i+256).toString(16).slice(1));const Xte=function Qte(i,n,e){if(qz.randomUUID&&!n&&!i)return qz.randomUUID();const r=(i=i||{}).random||(i.rng||Kte)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(let o=0;o<16;++o)n[e+o]=r[o];return n}return function Yz(i,n=0){return(hs[i[n+0]]+hs[i[n+1]]+hs[i[n+2]]+hs[i[n+3]]+"-"+hs[i[n+4]]+hs[i[n+5]]+"-"+hs[i[n+6]]+hs[i[n+7]]+"-"+hs[i[n+8]]+hs[i[n+9]]+"-"+hs[i[n+10]]+hs[i[n+11]]+hs[i[n+12]]+hs[i[n+13]]+hs[i[n+14]]+hs[i[n+15]]).toLowerCase()}(r)};let Zz=(()=>{class i{constructor(e,r,o){this.angularFireAuth=e,this.router=r,this.ngZone=o,this.currentUserSubject=new xa.X(void 0),this.angularFireAuth.authState.subscribe(s=>this.setCurrentUserData(s))}getSignedInObservable(){return this.currentUserSubject.asObservable().pipe((0,gt.U)(e=>!!e))}getCurrentUserObservable(){return this.currentUserSubject.asObservable()}signIn(){return this.authLogin(new CW.V).then(e=>{})}authLogin(e){return this.angularFireAuth.signInWithPopup(e).then(r=>{this.setCurrentUserData(r.user)}).catch(r=>{window.alert(r)})}setCurrentUserData(e){if(!e)return localStorage.removeItem("user"),void this.currentUserSubject.next(void 0);const r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified};return localStorage.setItem("user",JSON.stringify(e)),this.currentUserSubject.next(r),r}signOut(){return this.angularFireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.currentUserSubject.next(void 0)})}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Hp),d.LFG(Ea),d.LFG(d.R0b))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const SL="designs";let Kz=(()=>{class i{constructor(e,r){this.authenticationService=e,this.firestore=r}_getDesigns(){return(0,It.of)([{id:"c69094c0-34c2-44a5-a30d-ccf15e017f2d",title:"Orientation Tester",description:"",levels:[{index:0,tiles:[{x:0,y:0,element:"UD-100",orientation:0},{x:3,y:0,element:"UD-100",orientation:0},{x:0,y:3,element:"UD-100",orientation:0},{x:3,y:3,element:"UD-100",orientation:0},{x:6,y:0,element:"UD-100",orientation:0},{x:6,y:3,element:"UD-100",orientation:0},{x:0,y:6,element:"UD-100",orientation:0},{x:3,y:6,element:"UD-100",orientation:0},{x:6,y:6,element:"UD-100",orientation:0},{x:9,y:0,element:"UD-100",orientation:0},{x:9,y:3,element:"UD-100",orientation:0}]},{index:1,tiles:[{x:0,y:0,element:"UD-016",orientation:0},{x:0,y:5,element:"UD-016",orientation:0},{x:0,y:1,element:"UD-027",orientation:0},{x:0,y:2,element:"UD-027",orientation:1},{x:1,y:4,element:"UD-027",orientation:2},{x:1,y:3,element:"UD-027",orientation:3},{x:2,y:1,element:"UD-080",orientation:0},{x:3,y:2,element:"UD-080",orientation:2},{x:3,y:3,element:"UD-080",orientation:1},{x:2,y:4,element:"UD-080",orientation:3},{x:1,y:5,element:"UD-016",orientation:0},{x:2,y:5,element:"UD-016",orientation:0},{x:3,y:5,element:"UD-016",orientation:0},{x:4,y:4,element:"UD-016",orientation:0},{x:5,y:3,element:"UD-016",orientation:0},{x:3,y:0,element:"UD-016",orientation:0},{x:2,y:0,element:"UD-016",orientation:0},{x:1,y:0,element:"UD-016",orientation:0},{x:5,y:0,element:"UD-016",orientation:0},{x:7,y:0,element:"UD-016",orientation:0},{x:8,y:1,element:"UD-016",orientation:0},{x:7,y:1,element:"UD-016",orientation:0},{x:5,y:1,element:"UD-016",orientation:0},{x:5,y:2,element:"UD-016",orientation:0},{x:7,y:2,element:"UD-016",orientation:0},{x:8,y:2,element:"UD-016",orientation:0},{x:8,y:3,element:"UD-016",orientation:0},{x:8,y:4,element:"UD-016",orientation:0},{x:7,y:3,element:"UD-016",orientation:0},{x:7,y:4,element:"UD-016",orientation:0},{x:5,y:4,element:"UD-016",orientation:0},{x:7,y:5,element:"UD-016",orientation:0},{x:4,y:0,element:"UD-023",orientation:0},{x:6,y:0,element:"UD-023",orientation:0},{x:4,y:1,element:"UD-023",orientation:0},{x:4,y:3,element:"UD-023",orientation:0},{x:6,y:2,element:"UD-023",orientation:0},{x:6,y:4,element:"UD-023",orientation:0},{x:6,y:5,element:"UD-023",orientation:0},{x:4,y:5,element:"UD-023",orientation:0},{x:6,y:3,element:"UD-016",orientation:0},{x:4,y:2,element:"UD-016",orientation:0},{x:5,y:5,element:"UD-016",orientation:0},{x:6,y:1,element:"UD-016",orientation:0},{x:0,y:8,element:"UD-016",orientation:0},{x:1,y:8,element:"UD-016",orientation:0},{x:2,y:8,element:"UD-016",orientation:0},{x:6,y:8,element:"UD-016",orientation:0},{x:7,y:8,element:"UD-016",orientation:0},{x:8,y:8,element:"UD-016",orientation:0},{x:8,y:7,element:"UD-016",orientation:0},{x:8,y:6,element:"UD-016",orientation:0},{x:7,y:6,element:"UD-016",orientation:0},{x:6,y:6,element:"UD-016",orientation:0},{x:6,y:7,element:"UD-016",orientation:0},{x:7,y:7,element:"UD-016",orientation:0},{x:5,y:6,element:"UD-016",orientation:0},{x:4,y:6,element:"UD-016",orientation:0},{x:3,y:6,element:"UD-016",orientation:0},{x:2,y:6,element:"UD-016",orientation:0},{x:2,y:7,element:"UD-016",orientation:0},{x:0,y:6,element:"UD-092",orientation:0},{x:1,y:7,element:"UD-092",orientation:0},{x:0,y:7,element:"UD-092",orientation:0},{x:1,y:6,element:"UD-092",orientation:0},{x:3,y:7,element:"UD-092",orientation:0},{x:3,y:8,element:"UD-092",orientation:0},{x:4,y:8,element:"UD-092",orientation:0},{x:4,y:7,element:"UD-092",orientation:0},{x:5,y:7,element:"UD-092",orientation:0},{x:5,y:8,element:"UD-092",orientation:0},{x:9,y:5,element:"UD-016",orientation:0},{x:11,y:5,element:"UD-016",orientation:0},{x:11,y:4,element:"UD-016",orientation:0},{x:9,y:4,element:"UD-016",orientation:0},{x:10,y:4,element:"UD-016",orientation:0},{x:9,y:3,element:"UD-016",orientation:0},{x:10,y:3,element:"UD-016",orientation:0},{x:11,y:3,element:"UD-016",orientation:0},{x:11,y:2,element:"UD-016",orientation:0},{x:10,y:2,element:"UD-016",orientation:0},{x:9,y:2,element:"UD-016",orientation:0},{x:9,y:1,element:"UD-016",orientation:0},{x:10,y:1,element:"UD-016",orientation:0},{x:11,y:1,element:"UD-016",orientation:0},{x:11,y:0,element:"UD-016",orientation:0},{x:9,y:0,element:"UD-016",orientation:0},{x:10,y:0,element:"UD-092",orientation:0},{x:8,y:0,element:"UD-092",orientation:0},{x:8,y:5,element:"UD-092",orientation:0},{x:10,y:5,element:"UD-092",orientation:0}]},{index:4,tiles:[{x:4,y:0,element:"UD-019",orientation:0},{x:4,y:1,element:"UD-019",orientation:1},{x:6,y:5,element:"UD-019",orientation:2},{x:6,y:4,element:"UD-019",orientation:3},{x:0,y:6,element:"UD-095",orientation:0},{x:5,y:7,element:"UD-096",orientation:1},{x:10,y:0,element:"UD-097",orientation:1}]}]},{id:"603ea2c3-cd81-4d94-9a4d-2c86effff92e",title:"Example Map",description:"",levels:[{index:0,tiles:[{x:0,y:0,element:"UD-100",orientation:0},{x:3,y:0,element:"UD-100",orientation:0},{x:0,y:3,element:"UD-100",orientation:0},{x:3,y:3,element:"UD-100",orientation:0},{x:0,y:6,element:"UD-100",orientation:0},{x:3,y:6,element:"UD-100",orientation:0},{x:0,y:9,element:"UD-100",orientation:0},{x:3,y:9,element:"UD-100",orientation:0}]},{index:1,tiles:[{x:0,y:0,element:"UD-014",orientation:1},{x:1,y:0,element:"UD-001",orientation:1},{x:1,y:0,element:"UD-007",orientation:1},{x:2,y:0,element:"UD-007",orientation:1},{x:3,y:0,element:"UD-034",orientation:1},{x:4,y:0,element:"UD-036",orientation:1},{x:5,y:0,element:"UD-013",orientation:2},{x:0,y:1,element:"UD-007",orientation:0},{x:2,y:1,element:"UD-016",orientation:0},{x:3,y:1,element:"UD-016",orientation:0},{x:4,y:1,element:"UD-016",orientation:0},{x:5,y:1,element:"UD-001",orientation:2},{x:5,y:2,element:"UD-014",orientation:2},{x:4,y:2,element:"UD-006",orientation:1},{x:3,y:2,element:"UD-014",orientation:1},{x:1,y:2,element:"UD-014",orientation:2},{x:0,y:3,element:"UD-002",orientation:0},{x:1,y:3,element:"UD-001",orientation:2},{x:2,y:3,element:"UD-016",orientation:0},{x:3,y:3,element:"UD-002",orientation:0},{x:5,y:3,element:"UD-036",orientation:2},{x:5,y:4,element:"UD-014",orientation:3},{x:4,y:4,element:"UD-011",orientation:3},{x:1,y:4,element:"UD-011",orientation:2},{x:4,y:6,element:"UD-011",orientation:1},{x:5,y:6,element:"UD-014",orientation:2},{x:5,y:5,element:"UD-001",orientation:2},{x:4,y:5,element:"UD-016",orientation:0},{x:3,y:5,element:"UD-016",orientation:0},{x:3,y:4,element:"UD-014",orientation:0},{x:1,y:5,element:"UD-014",orientation:3},{x:1,y:6,element:"UD-006",orientation:0},{x:0,y:6,element:"UD-014",orientation:0},{x:0,y:7,element:"UD-002",orientation:0},{x:0,y:5,element:"UD-002",orientation:0},{x:0,y:4,element:"UD-043",orientation:0},{x:0,y:2,element:"UD-060",orientation:0},{x:2,y:4,element:"UD-035",orientation:0},{x:4,y:3,element:"UD-064",orientation:1},{x:1,y:1,element:"UD-064",orientation:3},{x:2,y:5,element:"UD-016",orientation:2},{x:2,y:6,element:"UD-016",orientation:2},{x:2,y:7,element:"UD-063",orientation:0},{x:3,y:8,element:"UD-008",orientation:0},{x:3,y:6,element:"UD-014",orientation:1},{x:5,y:7,element:"UD-028",orientation:2},{x:5,y:8,element:"UD-005",orientation:2},{x:4,y:8,element:"UD-064",orientation:0},{x:4,y:7,element:"UD-016",orientation:0},{x:5,y:10,element:"UD-008",orientation:2},{x:5,y:11,element:"UD-014",orientation:3},{x:4,y:11,element:"UD-004",orientation:3},{x:0,y:11,element:"UD-014",orientation:0},{x:0,y:10,element:"UD-006",orientation:0},{x:0,y:9,element:"UD-006",orientation:0},{x:0,y:8,element:"UD-004",orientation:0},{x:1,y:11,element:"UD-001",orientation:3},{x:3,y:9,element:"UD-006",orientation:0},{x:3,y:10,element:"UD-010",orientation:0},{x:3,y:11,element:"UD-014",orientation:0},{x:2,y:11,element:"UD-001",orientation:3},{x:1,y:10,element:"UD-077",orientation:3},{x:2,y:9,element:"UD-007",orientation:0},{x:2,y:8,element:"UD-001",orientation:0},{x:1,y:7,element:"UD-002",orientation:1},{x:1,y:8,element:"UD-064",orientation:3},{x:1,y:9,element:"UD-016",orientation:0},{x:2,y:10,element:"UD-016",orientation:0},{x:4,y:10,element:"UD-016",orientation:0},{x:4,y:9,element:"UD-016",orientation:0},{x:3,y:7,element:"UD-040",orientation:0},{x:5,y:9,element:"UD-040",orientation:2},{x:2,y:2,element:"UD-065",orientation:2}]}]},{id:"806001be-07d4-4dde-b2bc-597f8b3ca32d",title:"Test",description:"",levels:[{index:0,tiles:[{x:0,y:0,element:"UD-100",orientation:0}]},{index:1,tiles:[{x:2,y:1,element:"UD-064",orientation:1},{x:1,y:2,element:"UD-064",orientation:1},{x:1,y:0,element:"UD-064",orientation:1},{x:0,y:1,element:"UD-064",orientation:1},{x:2,y:0,element:"UD-090",orientation:0},{x:1,y:1,element:"UD-064",orientation:0},{x:0,y:0,element:"UD-090",orientation:0},{x:0,y:2,element:"UD-090",orientation:0},{x:2,y:2,element:"UD-090",orientation:0}]},{index:10,tiles:[{x:0,y:0,element:"UD-094",orientation:0}]}]}])}create(){return this.authenticationService.getCurrentUserObservable().pipe((0,Mo.z)(e=>{if(!e)throw new Error;const r={id:Xte(),ownerId:e.uid,title:"New Map",description:"",levels:[]};return(0,Hn.D)(this.doc(r).set(r)).pipe((0,gt.U)(()=>r))}))}getDesignById(e){return this.queryById(e)}getDesigns(){return this.authenticationService.getCurrentUserObservable().pipe((0,Mo.z)(e=>e?this.firestore.collection(SL,r=>r.where("ownerId","==",e.uid)).valueChanges().pipe((0,gt.U)(r=>r)):(0,It.of)([])))}save(e){return(0,Hn.D)(this.doc(e).set(e)).pipe((0,gt.U)(()=>e))}doc(e){return this.firestore.collection(SL).doc(e.id)}queryById(e){return this.firestore.collection(SL).doc(e).get().pipe((0,gt.U)(r=>r.data()))}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(Zz),d.LFG(GB))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var He=(()=>((He=He||{}).LargeKey="LargeKey",He.LargeSlot="LargeSlot",He.SmallKey="SmallKey",He.SmallSlot="SmallSlot",He.Other="Other",He))();const c0=[{code:"colorized",name:"Colorized",color:"#ce196d",tileUnitWidth:218,tileUnitHeight:121,tileUnitDepth:31,tileUnitGridOffset:0}];let HC=(()=>{class i{getElementById(e){return this.getElements().pipe((0,gt.U)(r=>r.find(o=>o.id===e)))}getElements(){return(0,It.of)([{id:"48a24aad-410d-43d8-aa8e-d3e75cabc2c9",code:"UD-001",name:"Wall",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"e4827c63-be6a-4eed-bef4-955a163aa704",code:"UD-002",name:"Wall Skulls",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"2d541497-a58e-4684-adf3-6d779d583c6d",code:"UD-003",name:"Wall Skulls 2",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"ace4b25e-4282-452a-a027-4da730837216",code:"UD-004",name:"Wall Window",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"afb7e654-66c1-4707-bbe6-afe04286f9e3",code:"UD-005",name:"Wall Window Broken",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"04c628fd-15aa-4e75-9893-8a21d6a7594d",code:"UD-006",name:"Wall Wood",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"371e6003-9d30-4bde-a06b-34ee07a11387",code:"UD-007",name:"Wall Chains",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"12531234-7820-42a8-8a09-80755e98b9e2",code:"UD-008",name:"Wall Broken",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"939c4244-d0e2-4bda-ad08-4252bfed6202",code:"UD-009",name:"Wall Debris",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"23a7a99b-3090-4fe9-9808-f8f2b79ed8ad",code:"UD-010",name:"Door",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:5,footprint:[1,1],tags:[]},{id:"26779b37-5f57-4510-85b2-277dca85a445",code:"UD-011",name:"Door Bar",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:5,footprint:[1,1],tags:[]},{id:"9d19e3ff-b1dc-4954-9bf9-2fb2d73106ac",code:"UD-012",name:"Corridor",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"d35caeae-0d1a-4320-87c1-c2ee030bd672",code:"UD-013",name:"Angle Skulls",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"6c0ba872-f288-4f71-8119-0cb5075155a1",code:"UD-014",name:"Angle",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"4e244705-2f7f-47c5-8f02-c6089b97783b",code:"UD-015",name:"Well",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:2,footprint:[1,1],tags:[]},{id:"ec1c791b-6441-40bf-9bdc-7b921870714c",code:"UD-016",name:"Ground Stones 1",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"31f06e65-0f1b-4adc-9575-336290ce2b81",code:"UD-017",name:"Ground Stones 2",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"633de18c-6e3d-47cf-af65-1a5e07a6f61c",code:"UD-018",name:"Ground Hole",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"e68788c0-8c8d-48ec-a98a-0b53fb969f8c",code:"UD-019",name:"Bridge",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:2,footprint:[3,1],tags:[]},{id:"71ce3c62-38c1-434b-b63c-2a21c2a69193",code:"UD-021",name:"Stair 1",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"afea16a8-e1d8-4ecd-9798-ca1b60f27737",code:"UD-023",name:"Level",flat:!1,top:He.LargeSlot,bottom:He.LargeKey,orientable:!0,height:2,footprint:[1,1],tags:[]},{id:"28123147-7636-42f4-829c-1a5c15d80988",code:"UD-026",name:"Stair Down",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"6a85bccd-32b9-4267-943d-99387b2f3250",code:"UD-027",name:"Bed 1",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:0,footprint:[2,1],tags:[]},{id:"c6850714-f12c-4ce4-851a-4555e26200f8",code:"UD-028",name:"Wall Bags",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"524f6e6a-e2d9-4433-b0ab-eb30af7096d7",code:"UD-034",name:"Wall Barrel",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"dfe070fd-543a-4329-8fbf-c3e168de1477",code:"UD-035",name:"Ground Wood",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"3aa49dd0-f406-4951-93c6-1606710a0621",code:"UD-036",name:"Torch Basic",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"80fb8b51-c15d-44b4-abe2-f418d7ebe959",code:"UD-037",name:"Torch Lit",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"a9b11b84-1a9e-41d9-b936-430f4cc58919",code:"UD-038",name:"Torch Extinguished",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"040a3255-ff7a-4215-a84b-6cb612c5fe9e",code:"UD-039",name:"Brazier",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"f27cd0d1-9ccc-49ed-b3ba-549257334ca6",code:"UD-040",name:"Wall Wood Ground",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"d846d1e6-4c86-49a1-b1cc-3cc4cee2ebda",code:"UD-041",name:"Fountain Empty",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"dd6bcca4-8c84-48a5-8dad-3b3d2603a7a3",code:"UD-042",name:"Fountain Crystal",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"fe6748c1-716f-4865-a2be-7c86bc7e75fc",code:"UD-043",name:"Fountain Toxic Liquid",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"9ef36f22-9838-4c60-8ed3-0f44a61ee8eb",code:"UD-044",name:"Fountain Treasure",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"cd384197-667a-4a0b-b137-6a933bee42cc",code:"UD-060",name:"Torture Cage",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:5,footprint:[1,1],tags:[]},{id:"17609433-8834-4f8f-a259-9db824b64a72",code:"UD-063",name:"Wall Wooden Trap",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:3,footprint:[1,1],tags:[]},{id:"cd384197-667a-4a0b-b137-6a933bee42cc",code:"UD-064",name:"Ground Grid",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"cd384197-667a-4a0b-b137-6a933bee42cc",code:"UD-065",name:"Ground Toxic Poison",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"78534c3c-27da-4a51-958d-e28a1f5c4705",code:"UD-067",name:"Hole Trap",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"8cf5e94a-8224-4d79-9d71-5f1905fff266",code:"UD-077",name:"Well Water",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:1,footprint:[1,1],tags:[]},{id:"8d218ca1-8df4-4bef-81f8-f284f7120c5e",code:"UD-080",name:"Autel",flat:!1,top:He.Other,bottom:He.LargeKey,orientable:!0,height:2,footprint:[1,2],tags:["altar"]},{id:"f4b134a7-1520-4904-9a3b-a403dc960f10",code:"UD-090",name:"Column Square Key",flat:!1,top:He.SmallKey,bottom:He.LargeKey,orientable:!0,height:8,footprint:[1,1],tags:[]},{id:"9b8b3d92-08c0-494b-aaaa-f797da276d84",code:"UD-092",name:"Level Key",flat:!1,top:He.SmallKey,bottom:He.LargeKey,orientable:!0,height:2,footprint:[1,1],tags:[]},{id:"fef5cb38-f0d7-40cf-9038-a27eeb45c3b7",code:"UD-093",name:"Key",flat:!1,top:He.SmallKey,bottom:He.LargeKey,orientable:!0,height:0,footprint:[1,1],tags:[]},{id:"7532146b-87c6-4f47-8247-176fafb28c8a",code:"UD-094",name:"Level Grid 3X3",flat:!1,top:He.LargeSlot,bottom:He.SmallSlot,orientable:!0,height:2,footprint:[3,3],tags:[]},{id:"86d6a646-5f78-435f-8df5-f1b5c2567918",code:"UD-095",name:"Level Grid 2X2",flat:!1,top:He.LargeSlot,bottom:He.SmallSlot,orientable:!0,height:2,footprint:[2,2],tags:[]},{id:"9daeb116-68ae-4bc6-842f-873eb0c1fd87",code:"UD-096",name:"Level Grid 2X3",flat:!1,top:He.LargeSlot,bottom:He.SmallSlot,orientable:!0,height:2,footprint:[2,3],tags:[]},{id:"ce1540a0-61a6-4572-828d-8840266bc008",code:"UD-097",name:"Level Grid 3X6",flat:!1,top:He.LargeSlot,bottom:He.SmallSlot,orientable:!0,height:2,footprint:[6,3],tags:[]},{id:"95177f16-fc56-40d9-b813-d54d9ffd9680",code:"UD-100",name:"Grid 3X3",flat:!0,top:He.LargeSlot,bottom:He.Other,orientable:!0,height:0,footprint:[3,3],tags:[]}])}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const{abs:zC,cos:rf,sin:d0,acos:Jte,atan2:jC,sqrt:hp,pow:Zl}=Math;function $C(i){return i<0?-Zl(-i,1/3):Zl(i,1/3)}const Qz=Math.PI,pk=2*Qz,fp=Qz/2,AL=Number.MAX_SAFE_INTEGER||9007199254740991,ML=Number.MIN_SAFE_INTEGER||-9007199254740991,tne={x:0,y:0,z:0},ct={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(i,n){const e=n(i);let r=e.x*e.x+e.y*e.y;return typeof e.z<"u"&&(r+=e.z*e.z),hp(r)},compute:function(i,n,e){if(0===i)return n[0].t=0,n[0];const r=n.length-1;if(1===i)return n[r].t=1,n[r];const o=1-i;let s=n;if(0===r)return n[0].t=i,n[0];if(1===r){const h={x:o*s[0].x+i*s[1].x,y:o*s[0].y+i*s[1].y,t:i};return e&&(h.z=o*s[0].z+i*s[1].z),h}if(r<4){let _,w,I,h=o*o,p=i*i,A=0;2===r?(s=[s[0],s[1],s[2],tne],_=h,w=o*i*2,I=p):3===r&&(_=h*o,w=h*i*3,I=o*p*3,A=i*p);const P={x:_*s[0].x+w*s[1].x+I*s[2].x+A*s[3].x,y:_*s[0].y+w*s[1].y+I*s[2].y+A*s[3].y,t:i};return e&&(P.z=_*s[0].z+w*s[1].z+I*s[2].z+A*s[3].z),P}const c=JSON.parse(JSON.stringify(n));for(;c.length>1;){for(let h=0;h<c.length-1;h++)c[h]={x:c[h].x+(c[h+1].x-c[h].x)*i,y:c[h].y+(c[h+1].y-c[h].y)*i},typeof c[h].z<"u"&&(c[h]=c[h].z+(c[h+1].z-c[h].z)*i);c.splice(c.length-1,1)}return c[0].t=i,c[0]},computeWithRatios:function(i,n,e,r){const o=1-i;let I,h=e[0],p=e[1],_=e[2],w=e[3];return h*=o,p*=i,2===n.length?(I=h+p,{x:(h*n[0].x+p*n[1].x)/I,y:(h*n[0].y+p*n[1].y)/I,z:!!r&&(h*n[0].z+p*n[1].z)/I,t:i}):(h*=o,p*=2*o,_*=i*i,3===n.length?(I=h+p+_,{x:(h*n[0].x+p*n[1].x+_*n[2].x)/I,y:(h*n[0].y+p*n[1].y+_*n[2].y)/I,z:!!r&&(h*n[0].z+p*n[1].z+_*n[2].z)/I,t:i}):(h*=o,p*=1.5*o,_*=3*o,w*=i*i*i,4===n.length?(I=h+p+_+w,{x:(h*n[0].x+p*n[1].x+_*n[2].x+w*n[3].x)/I,y:(h*n[0].y+p*n[1].y+_*n[2].y+w*n[3].y)/I,z:!!r&&(h*n[0].z+p*n[1].z+_*n[2].z+w*n[3].z)/I,t:i}):void 0))},derive:function(i,n){const e=[];for(let r=i,o=r.length,s=o-1;o>1;o--,s--){const c=[];for(let p,h=0;h<s;h++)p={x:s*(r[h+1].x-r[h].x),y:s*(r[h+1].y-r[h].y)},n&&(p.z=s*(r[h+1].z-r[h].z)),c.push(p);e.push(c),r=c}return e},between:function(i,n,e){return n<=i&&i<=e||ct.approximately(i,n)||ct.approximately(i,e)},approximately:function(i,n,e){return zC(i-n)<=(e||1e-6)},length:function(i){const e=ct.Tvalues.length;let r=0;for(let s,o=0;o<e;o++)s=.5*ct.Tvalues[o]+.5,r+=ct.Cvalues[o]*ct.arcfn(s,i);return.5*r},map:function(i,n,e,r,o){return r+(i-n)/(e-n)*(o-r)},lerp:function(i,n,e){const r={x:n.x+i*(e.x-n.x),y:n.y+i*(e.y-n.y)};return void 0!==n.z&&void 0!==e.z&&(r.z=n.z+i*(e.z-n.z)),r},pointToString:function(i){let n=i.x+"/"+i.y;return typeof i.z<"u"&&(n+="/"+i.z),n},pointsToString:function(i){return"["+i.map(ct.pointToString).join(", ")+"]"},copy:function(i){return JSON.parse(JSON.stringify(i))},angle:function(i,n,e){const r=n.x-i.x,o=n.y-i.y,s=e.x-i.x,c=e.y-i.y;return jC(r*c-o*s,r*s+o*c)},round:function(i,n){const e=""+i,r=e.indexOf(".");return parseFloat(e.substring(0,r+1+n))},dist:function(i,n){const e=i.x-n.x,r=i.y-n.y;return hp(e*e+r*r)},closest:function(i,n){let r,o,e=Zl(2,63);return i.forEach(function(s,c){o=ct.dist(n,s),o<e&&(e=o,r=c)}),{mdist:e,mpos:r}},abcratio:function(i,n){if(2!==n&&3!==n)return!1;if(typeof i>"u")i=.5;else if(0===i||1===i)return i;const e=Zl(i,n)+Zl(1-i,n);return zC((e-1)/e)},projectionratio:function(i,n){if(2!==n&&3!==n)return!1;if(typeof i>"u")i=.5;else if(0===i||1===i)return i;const e=Zl(1-i,n);return e/(Zl(i,n)+e)},lli8:function(i,n,e,r,o,s,c,h){const w=(i-e)*(s-h)-(n-r)*(o-c);return 0!=w&&{x:((i*r-n*e)*(o-c)-(i-e)*(o*h-s*c))/w,y:((i*r-n*e)*(s-h)-(n-r)*(o*h-s*c))/w}},lli4:function(i,n,e,r){return ct.lli8(i.x,i.y,n.x,n.y,e.x,e.y,r.x,r.y)},lli:function(i,n){return ct.lli4(i,i.c,n,n.c)},makeline:function(i,n){return new Dr(i.x,i.y,(i.x+n.x)/2,(i.y+n.y)/2,n.x,n.y)},findbbox:function(i){let n=AL,e=AL,r=ML,o=ML;return i.forEach(function(s){const c=s.bbox();n>c.x.min&&(n=c.x.min),e>c.y.min&&(e=c.y.min),r<c.x.max&&(r=c.x.max),o<c.y.max&&(o=c.y.max)}),{x:{min:n,mid:(n+r)/2,max:r,size:r-n},y:{min:e,mid:(e+o)/2,max:o,size:o-e}}},shapeintersections:function(i,n,e,r,o){if(!ct.bboxoverlap(n,r))return[];const s=[],h=[e.startcap,e.forward,e.back,e.endcap];return[i.startcap,i.forward,i.back,i.endcap].forEach(function(p){p.virtual||h.forEach(function(_){if(_.virtual)return;const w=p.intersects(_,o);w.length>0&&(w.c1=p,w.c2=_,w.s1=i,w.s2=e,s.push(w))})}),s},makeshape:function(i,n,e){const o=i.points.length,s=ct.makeline(n.points[n.points.length-1],i.points[0]),c=ct.makeline(i.points[o-1],n.points[0]),h={startcap:s,forward:i,back:n,endcap:c,bbox:ct.findbbox([s,i,n,c]),intersections:function(p){return ct.shapeintersections(h,h.bbox,p,p.bbox,e)}};return h},getminmax:function(i,n,e){if(!e)return{min:0,max:0};let s,c,r=AL,o=ML;-1===e.indexOf(0)&&(e=[0].concat(e)),-1===e.indexOf(1)&&e.push(1);for(let h=0,p=e.length;h<p;h++)s=e[h],c=i.get(s),c[n]<r&&(r=c[n]),c[n]>o&&(o=c[n]);return{min:r,mid:(r+o)/2,max:o,size:o-r}},align:function(i,n){const e=n.p1.x,r=n.p1.y,o=-jC(n.p2.y-r,n.p2.x-e);return i.map(function(c){return{x:(c.x-e)*rf(o)-(c.y-r)*d0(o),y:(c.x-e)*d0(o)+(c.y-r)*rf(o)}})},roots:function(i,n){const e=i.length-1,r=ct.align(i,n=n||{p1:{x:0,y:0},p2:{x:1,y:0}}),o=function(it){return 0<=it&&it<=1};if(2===e){const it=r[0].y,Ft=r[1].y,bn=r[2].y,Pi=it-2*Ft+bn;if(0!==Pi){const sl=-hp(Ft*Ft-it*bn),Yo=-it+Ft;return[-(sl+Yo)/Pi,-(-sl+Yo)/Pi].filter(o)}return Ft!==bn&&0===Pi?[(2*Ft-bn)/(2*Ft-2*bn)].filter(o):[]}const s=r[0].y,c=r[1].y,h=r[2].y;let _=3*c-s-3*h+r[3].y,w=3*s-6*c+3*h,I=-3*s+3*c,A=s;if(ct.approximately(_,0)){if(ct.approximately(w,0))return ct.approximately(I,0)?[]:[-A/I].filter(o);const it=hp(I*I-4*w*A),Ft=2*w;return[(it-I)/Ft,(-I-it)/Ft].filter(o)}w/=_,I/=_,A/=_;const P=(3*I-w*w)/3,B=P/3,Y=(2*w*w*w-9*w*I+27*A)/27,ee=Y/2,ve=ee*ee+B*B*B;let Ae,_e,ke,ze,et;if(ve<0){const it=-P/3,bn=hp(it*it*it),Pi=-Y/(2*bn),Yo=Jte(Pi<-1?-1:Pi>1?1:Pi),au=2*$C(bn);return ke=au*rf(Yo/3)-w/3,ze=au*rf((Yo+pk)/3)-w/3,et=au*rf((Yo+2*pk)/3)-w/3,[ke,ze,et].filter(o)}if(0===ve)return Ae=ee<0?$C(-ee):-$C(ee),ke=2*Ae-w/3,ze=-Ae-w/3,[ke,ze].filter(o);{const it=hp(ve);return Ae=$C(-ee+it),_e=$C(ee+it),[Ae-_e-w/3].filter(o)}},droots:function(i){if(3===i.length){const n=i[0],e=i[1],r=i[2],o=n-2*e+r;if(0!==o){const s=-hp(e*e-n*r),c=-n+e;return[-(s+c)/o,-(-s+c)/o]}return e!==r&&0===o?[(2*e-r)/(2*(e-r))]:[]}if(2===i.length){const n=i[0],e=i[1];return n!==e?[n/(n-e)]:[]}return[]},curvature:function(i,n,e,r,o){let s,c,h,p,_=0,w=0;const I=ct.compute(i,n),A=ct.compute(i,e),P=I.x*I.x+I.y*I.y;if(r?(s=hp(Zl(I.y*A.z-A.y*I.z,2)+Zl(I.z*A.x-A.z*I.x,2)+Zl(I.x*A.y-A.x*I.y,2)),c=Zl(P+I.z*I.z,1.5)):(s=I.x*A.y-I.y*A.x,c=Zl(P,1.5)),0===s||0===c)return{k:0,r:0};if(_=s/c,w=c/s,!o){const B=ct.curvature(i-.001,n,e,r,!0).k,Y=ct.curvature(i+.001,n,e,r,!0).k;p=(Y-_+(_-B))/2,h=(zC(Y-_)+zC(_-B))/2}return{k:_,r:w,dk:p,adk:h}},inflections:function(i){if(i.length<4)return[];const n=ct.align(i,{p1:i[0],p2:i.slice(-1)[0]}),e=n[2].x*n[1].y,r=n[3].x*n[1].y,o=n[1].x*n[2].y,c=18*(-3*e+2*r+3*o-n[3].x*n[2].y),h=18*(3*e-r-3*o),p=18*(o-e);if(ct.approximately(c,0)){if(!ct.approximately(h,0)){let A=-p/h;if(0<=A&&A<=1)return[A]}return[]}const _=2*c;if(ct.approximately(_,0))return[];const w=h*h-4*c*p;if(w<0)return[];const I=Math.sqrt(w);return[(I-h)/_,-(h+I)/_].filter(function(A){return 0<=A&&A<=1})},bboxoverlap:function(i,n){const e=["x","y"],r=e.length;for(let s,c,h,p,o=0;o<r;o++)if(s=e[o],c=i[s].mid,h=n[s].mid,p=(i[s].size+n[s].size)/2,zC(c-h)>=p)return!1;return!0},expandbox:function(i,n){n.x.min<i.x.min&&(i.x.min=n.x.min),n.y.min<i.y.min&&(i.y.min=n.y.min),n.z&&n.z.min<i.z.min&&(i.z.min=n.z.min),n.x.max>i.x.max&&(i.x.max=n.x.max),n.y.max>i.y.max&&(i.y.max=n.y.max),n.z&&n.z.max>i.z.max&&(i.z.max=n.z.max),i.x.mid=(i.x.min+i.x.max)/2,i.y.mid=(i.y.min+i.y.max)/2,i.z&&(i.z.mid=(i.z.min+i.z.max)/2),i.x.size=i.x.max-i.x.min,i.y.size=i.y.max-i.y.min,i.z&&(i.z.size=i.z.max-i.z.min)},pairiteration:function(i,n,e){const r=i.bbox(),o=n.bbox(),s=1e5,c=e||.5;if(r.x.size+r.y.size<c&&o.x.size+o.y.size<c)return[(s*(i._t1+i._t2)/2|0)/s+"/"+(s*(n._t1+n._t2)/2|0)/s];let h=i.split(.5),p=n.split(.5),_=[{left:h.left,right:p.left},{left:h.left,right:p.right},{left:h.right,right:p.right},{left:h.right,right:p.left}];_=_.filter(function(I){return ct.bboxoverlap(I.left.bbox(),I.right.bbox())});let w=[];return 0===_.length||(_.forEach(function(I){w=w.concat(ct.pairiteration(I.left,I.right,c))}),w=w.filter(function(I,A){return w.indexOf(I)===A})),w},getccenter:function(i,n,e){const r=n.x-i.x,o=n.y-i.y,s=e.x-n.x,c=e.y-n.y,h=r*rf(fp)-o*d0(fp),p=r*d0(fp)+o*rf(fp),_=s*rf(fp)-c*d0(fp),w=s*d0(fp)+c*rf(fp),I=(i.x+n.x)/2,A=(i.y+n.y)/2,P=(n.x+e.x)/2,B=(n.y+e.y)/2,_e=ct.lli8(I,A,I+h,A+p,P,B,P+_,B+w),ke=ct.dist(_e,i);let Ft,ze=jC(i.y-_e.y,i.x-_e.x),et=jC(n.y-_e.y,n.x-_e.x),it=jC(e.y-_e.y,e.x-_e.x);return ze<it?((ze>et||et>it)&&(ze+=pk),ze>it&&(Ft=it,it=ze,ze=Ft)):it<et&&et<ze?(Ft=it,it=ze,ze=Ft):it+=pk,_e.s=ze,_e.e=it,_e.r=ke,_e},numberSort:function(i,n){return i-n}};class GC{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return ct.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,e){return n+e})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var e=n[0].bbox(),r=1;r<n.length;r++)ct.expandbox(e,n[r].bbox());return e}offset(n){const e=[];return this.curves.forEach(function(r){e.push(...r.offset(n))}),new GC(e)}}const{abs:WC,min:Xz,max:Jz,cos:nne,sin:ine,acos:rne,sqrt:qC}=Math,one=Math.PI;class Dr{constructor(n){let e=n&&n.forEach?n:Array.from(arguments).slice(),r=!1;if("object"==typeof e[0]){r=e.length;const P=[];e.forEach(function(B){["x","y","z"].forEach(function(Y){typeof B[Y]<"u"&&P.push(B[Y])})}),e=P}let o=!1;const s=e.length;if(r){if(r>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const c=this._3d=!o&&(9===s||12===s)||n&&n[0]&&typeof n[0].z<"u",h=this.points=[];for(let P=0,B=c?3:2;P<s;P+=B){var p={x:e[P],y:e[P+1]};c&&(p.z=e[P+2]),h.push(p)}const _=this.order=h.length-1,w=this.dims=["x","y"];c&&w.push("z"),this.dimlen=w.length;const I=ct.align(h,{p1:h[0],p2:h[_]}),A=ct.dist(h[0],h[_]);this._linear=I.reduce((P,B)=>P+WC(B.y),0)<A/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,e,r,o){if(typeof o>"u"&&(o=.5),0===o)return new Dr(e,e,r);if(1===o)return new Dr(n,e,e);const s=Dr.getABC(2,n,e,r,o);return new Dr(n,s.A,r)}static cubicFromPoints(n,e,r,o,s){typeof o>"u"&&(o=.5);const c=Dr.getABC(3,n,e,r,o);typeof s>"u"&&(s=ct.dist(e,c.C));const h=s*(1-o)/o,p=ct.dist(n,r),_=(r.x-n.x)/p,w=(r.y-n.y)/p,ve=c.A;return new Dr(n,{x:n.x+(ve.x+(e.x-s*_-ve.x)/(1-o)-n.x)/o,y:n.y+(ve.y+(e.y-s*w-ve.y)/(1-o)-n.y)/o},{x:r.x+(ve.x+(e.x+h*_-ve.x)/o-r.x)/(1-o),y:r.y+(ve.y+(e.y+h*w-ve.y)/o-r.y)/(1-o)},r)}static getUtils(){return ct}getUtils(){return Dr.getUtils()}static get PolyBezier(){return GC}valueOf(){return this.toString()}toString(){return ct.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,o=["M",n[0].x,n[0].y,2===this.order?"Q":"C"];for(let s=1,c=n.length;s<c;s++)o.push(n[s].x),o.push(n[s].y);return o.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,e){return""+e+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=ct.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,e=ct.angle(n[0],n[this.order],n[1]);this.clockwise=e>0}length(){return ct.length(this.derivative.bind(this))}static getABC(n=2,e,r,o,s=.5){const c=ct.projectionratio(s,n),h=1-c,p={x:c*e.x+h*o.x,y:c*e.y+h*o.y},_=ct.abcratio(s,n);return{A:{x:r.x+(r.x-p.x)/_,y:r.y+(r.y-p.y)/_},B:r,C:p,S:e,E:o}}getABC(n,e){return e=e||this.get(n),Dr.getABC(this.order,this.points[0],e,this.points[this.order],n)}getLUT(n){if(this.verify(),this._lut.length===(n=n||100)+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r,o,e=0;e<n;e++)o=e/(n-1),r=this.compute(o),r.t=o,this._lut.push(r);return this._lut}on(n,e){e=e||5;const r=this.getLUT(),o=[];for(let c,s=0,h=0;s<r.length;s++)c=r[s],ct.dist(c,n)<e&&(o.push(c),h+=s/r.length);return!!o.length&&(t/=o.length)}project(n){const e=this.getLUT(),r=e.length-1,o=ct.closest(e,n),s=o.mpos,h=(s+1)/r,p=.1/r;let A,_=o.mdist,w=(s-1)/r,I=w;_+=1;for(let P;w<h+p;w+=p)A=this.compute(w),P=ct.dist(n,A),P<_&&(_=P,I=w);return I=I<0?0:I>1?1:I,A=this.compute(I),A.t=I,A.d=_,A}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?ct.computeWithRatios(n,this.points,this.ratios,this._3d):ct.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,e=[n[0]],r=n.length;for(let s,c,o=1;o<r;o++)s=n[o],c=n[o-1],e[o]={x:(r-o)/r*s.x+o/r*c.x,y:(r-o)/r*s.y+o/r*c.y};return e[r]=n[r-1],new Dr(e)}derivative(n){return ct.compute(n,this.dpoints[0],this._3d)}dderivative(n){return ct.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new Dr(ct.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return ct.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return ct.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const e=this.derivative(n),r=qC(e.x*e.x+e.y*e.y);return{t:n,x:-e.y/r,y:e.x/r}}__normal3(n){const e=this.derivative(n),r=this.derivative(n+.01),o=qC(e.x*e.x+e.y*e.y+e.z*e.z),s=qC(r.x*r.x+r.y*r.y+r.z*r.z);e.x/=o,e.y/=o,e.z/=o,r.x/=s,r.y/=s,r.z/=s;const c={x:r.y*e.z-r.z*e.y,y:r.z*e.x-r.x*e.z,z:r.x*e.y-r.y*e.x},h=qC(c.x*c.x+c.y*c.y+c.z*c.z);c.x/=h,c.y/=h,c.z/=h;const p=[c.x*c.x,c.x*c.y-c.z,c.x*c.z+c.y,c.x*c.y+c.z,c.y*c.y,c.y*c.z-c.x,c.x*c.z-c.y,c.y*c.z+c.x,c.z*c.z];return{t:n,x:p[0]*e.x+p[1]*e.y+p[2]*e.z,y:p[3]*e.x+p[4]*e.y+p[5]*e.z,z:p[6]*e.x+p[7]*e.y+p[8]*e.z}}hull(n){let e=this.points,r=[],o=[],s=0;for(o[s++]=e[0],o[s++]=e[1],o[s++]=e[2],3===this.order&&(o[s++]=e[3]);e.length>1;){r=[];for(let h,c=0,p=e.length-1;c<p;c++)h=ct.lerp(n,e[c],e[c+1]),o[s++]=h,r.push(h);e=r}return o}split(n,e){if(0===n&&e)return this.split(e).left;if(1===e)return this.split(n).right;const r=this.hull(n),o={left:new Dr(2===this.order?[r[0],r[3],r[5]]:[r[0],r[4],r[7],r[9]]),right:new Dr(2===this.order?[r[5],r[4],r[2]]:[r[9],r[8],r[6],r[3]]),span:r};return o.left._t1=ct.map(0,0,1,this._t1,this._t2),o.left._t2=ct.map(n,0,1,this._t1,this._t2),o.right._t1=ct.map(n,0,1,this._t1,this._t2),o.right._t2=ct.map(1,0,1,this._t1,this._t2),e?(e=ct.map(e,n,1,0,1),o.right.split(e).left):o}extrema(){const n={};let e=[];return this.dims.forEach(function(r){let o=function(c){return c[r]},s=this.dpoints[0].map(o);n[r]=ct.droots(s),3===this.order&&(s=this.dpoints[1].map(o),n[r]=n[r].concat(ct.droots(s))),n[r]=n[r].filter(function(c){return c>=0&&c<=1}),e=e.concat(n[r].sort(ct.numberSort))}.bind(this)),n.values=e.sort(ct.numberSort).filter(function(r,o){return e.indexOf(r)===o}),n}bbox(){const n=this.extrema(),e={};return this.dims.forEach(function(r){e[r]=ct.getminmax(this,r,n[r])}.bind(this)),e}overlaps(n){const e=this.bbox(),r=n.bbox();return ct.bboxoverlap(e,r)}offset(n,e){if(typeof e<"u"){const r=this.get(n),o=this.normal(n),s={c:r,n:o,x:r.x+o.x*e,y:r.y+o.y*e};return this._3d&&(s.z=r.z+o.z*e),s}if(this._linear){const r=this.normal(0),o=this.points.map(function(s){const c={x:s.x+n*r.x,y:s.y+n*r.y};return s.z&&r.z&&(c.z=s.z+n*r.z),c});return[new Dr(o)]}return this.reduce().map(function(r){return r._linear?r.offset(n)[0]:r.scale(n)})}simple(){if(3===this.order){const o=ct.angle(this.points[0],this.points[3],this.points[1]),s=ct.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&s<0||o<0&&s>0)return!1}const n=this.normal(0),e=this.normal(1);let r=n.x*e.x+n.y*e.y;return this._3d&&(r+=n.z*e.z),WC(rne(r))<one/3}reduce(){let n,s,e=0,r=0,o=.01,c=[],h=[],p=this.extrema().values;for(-1===p.indexOf(0)&&(p=[0].concat(p)),-1===p.indexOf(1)&&p.push(1),e=p[0],n=1;n<p.length;n++)r=p[n],s=this.split(e,r),s._t1=e,s._t2=r,c.push(s),e=r;return c.forEach(function(_){for(e=0,r=0;r<=1;)for(r=e+o;r<=1+o;r+=o)if(s=_.split(e,r),!s.simple()){if(r-=o,WC(e-r)<o)return[];s=_.split(e,r),s._t1=ct.map(e,0,1,_._t1,_._t2),s._t2=ct.map(r,0,1,_._t1,_._t2),h.push(s),e=r;break}e<1&&(s=_.split(e,1),s._t1=ct.map(e,0,1,_._t1,_._t2),s._t2=_._t2,h.push(s))}),h}translate(n,e,r){r="number"==typeof r?r:e;const o=this.order;let s=this.points.map((c,h)=>(1-h/o)*e+h/o*r);return new Dr(this.points.map((c,h)=>({x:c.x+n.x*s[h],y:c.y+n.y*s[h]})))}scale(n){const e=this.order;let r=!1;if("function"==typeof n&&(r=n),r&&2===e)return this.raise().scale(r);const o=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):n,r?r(1):n);const c=r?r(0):n,h=r?r(1):n,p=[this.offset(0,10),this.offset(1,10)],_=[],w=ct.lli4(p[0],p[0].c,p[1],p[1].c);if(!w)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(I){const A=_[I*e]=ct.copy(s[I*e]);A.x+=(I?h:c)*p[I].n.x,A.y+=(I?h:c)*p[I].n.y}),r?([0,1].forEach(function(I){if(2!==e||!I){var A=s[I+1],P={x:A.x-w.x,y:A.y-w.y},B=r?r((I+1)/e):n;r&&!o&&(B=-B);var Y=qC(P.x*P.x+P.y*P.y);P.x/=Y,P.y/=Y,_[I+1]={x:A.x+B*P.x,y:A.y+B*P.y}}}),new Dr(_)):([0,1].forEach(I=>{if(2===e&&I)return;const A=_[I*e],P=this.derivative(I);_[I+1]=ct.lli4(A,{x:A.x+P.x,y:A.y+P.y},w,s[I+1])}),new Dr(_))}outline(n,e,r,o){if(e=void 0===e?n:e,this._linear){const ze=this.normal(0),et=this.points[0],it=this.points[this.points.length-1];let Ft,bn,Pi;void 0===r&&(r=n,o=e),Ft={x:et.x+ze.x*n,y:et.y+ze.y*n},Pi={x:it.x+ze.x*r,y:it.y+ze.y*r},bn={x:(Ft.x+Pi.x)/2,y:(Ft.y+Pi.y)/2};const sl=[Ft,bn,Pi];Ft={x:et.x-ze.x*e,y:et.y-ze.y*e},Pi={x:it.x-ze.x*o,y:it.y-ze.y*o},bn={x:(Ft.x+Pi.x)/2,y:(Ft.y+Pi.y)/2};const Yo=[Pi,bn,Ft],Ns=ct.makeline(Yo[2],sl[0]),au=ct.makeline(sl[2],Yo[0]),yk=[Ns,new Dr(sl),au,new Dr(Yo)];return new GC(yk)}const s=this.reduce(),c=s.length,h=[];let _,p=[],w=0,I=this.length();const A=typeof r<"u"&&typeof o<"u";function P(ze,et,it,Ft,bn){return function(Pi){const Ns=et-ze;return ct.map(Pi,0,1,ze+Ft/it*Ns,ze+(Ft+bn)/it*Ns)}}s.forEach(function(ze){const et=ze.length();A?(h.push(ze.scale(P(n,r,I,w,et))),p.push(ze.scale(P(-e,-o,I,w,et)))):(h.push(ze.scale(n)),p.push(ze.scale(-e))),w+=et}),p=p.map(function(ze){return _=ze.points,ze.points=_[3]?[_[3],_[2],_[1],_[0]]:[_[2],_[1],_[0]],ze}).reverse();const Y=h[c-1].points[h[c-1].points.length-1],ve=p[0].points[0],Ae=ct.makeline(p[c-1].points[p[c-1].points.length-1],h[0].points[0]),_e=ct.makeline(Y,ve),ke=[Ae].concat(h).concat([_e]).concat(p);return new GC(ke)}outlineshapes(n,e,r){const o=this.outline(n,e=e||n).curves,s=[];for(let c=1,h=o.length;c<h/2;c++){const p=ct.makeshape(o[c],o[h-c],r);p.startcap.virtual=c>1,p.endcap.virtual=c<h/2-1,s.push(p)}return s}intersects(n,e){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof Dr&&(n=n.reduce()),this.curveintersects(this.reduce(),n,e)):this.selfintersects(e)}lineIntersects(n){const e=Xz(n.p1.x,n.p2.x),r=Xz(n.p1.y,n.p2.y),o=Jz(n.p1.x,n.p2.x),s=Jz(n.p1.y,n.p2.y);return ct.roots(this.points,n).filter(c=>{var h=this.get(c);return ct.between(h.x,e,o)&&ct.between(h.y,r,s)})}selfintersects(n){const e=this.reduce(),r=e.length-2,o=[];for(let c,h,p,s=0;s<r;s++)h=e.slice(s,s+1),p=e.slice(s+2),c=this.curveintersects(h,p,n),o.push(...c);return o}curveintersects(n,e,r){const o=[];n.forEach(function(c){e.forEach(function(h){c.overlaps(h)&&o.push({left:c,right:h})})});let s=[];return o.forEach(function(c){const h=ct.pairiteration(c.left,c.right,r);h.length>0&&(s=s.concat(h))}),s}arcs(n){return this._iterate(n=n||.5,[])}_error(n,e,r,o){const s=(o-r)/4,c=this.get(r+s),h=this.get(o-s),p=ct.dist(n,e),_=ct.dist(n,c),w=ct.dist(n,h);return WC(_-p)+WC(w-p)}_iterate(n,e){let s,r=0,o=1;do{s=0,o=1;let h,p,_,w,P,c=this.get(r),I=!1,A=!1,B=o,Y=1,ee=0;do{if(A=I,w=_,B=(r+o)/2,ee++,h=this.get(B),p=this.get(o),_=ct.getccenter(c,h,p),_.interval={start:r,end:o},I=this._error(_,c,r,o)<=n,P=A&&!I,P||(Y=o),I){if(o>=1){if(_.interval.end=Y=1,w=_,o>1){let Ae={x:_.x+_.r*nne(_.e),y:_.y+_.r*ine(_.e)};_.e+=ct.angle({x:_.x,y:_.y},Ae,this.get(1))}break}o+=(o-r)/2}else o=B}while(!P&&s++<100);if(s>=100)break;w=w||_,e.push(w),r=Y}while(o<1);return e}}const{cos:ej,sin:tj,round:nj,PI:sne}=Math;let ij=(()=>{class i{bounds({x:e,y:r},[o,s],c){switch(c%4){case 0:return{x1:e,y1:r,x2:e+o,y2:r+s};case 1:return{x1:e-s+1,y1:r,x2:e+1,y2:r+o};case 2:return{x1:e-o+1,y1:r-s+1,x2:e+1,y2:r+1};case 3:return{x1:e,y1:r-o+1,x2:e+s,y2:r+1};default:throw new Error}}clamp(e,r,o){return e<r?r:e>o?o:e}overlap(e,r){return e.x1<r.x2&&e.y1<r.y2&&r.x1<e.x2&&r.y1<e.y2}rotate({x:e,y:r},o){if(0===o)return{x:e,y:r};const s=o*sne/2;return{x:nj(e*ej(s)-r*tj(s)),y:nj(e*tj(s)+r*ej(s))}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),gk=(()=>{class i{transform(e,r,o){return`assets/sprites/${r.code}/${e}_${o}.png`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=d.Yjl({name:"assetUrl",type:i,pure:!0}),i})(),ane=(()=>{class i{transform(e){return`translate(${e[0]}, ${e[1]})`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=d.Yjl({name:"cssTranslate",type:i,pure:!0}),i})();const lne=["svg"];function cne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d._UZ(1,"rect",5),d.BQk()),2&i){const e=d.oxw(4);d.xp6(1),d.uIk("height",e.cellSize)("width",e.cellSize)("x",0)("y",0)}}const mp=function(i,n){return[i,n]};function dne(i,n){if(1&i&&(d.O4$(),d.TgZ(0,"g"),d.ALo(1,"cssTranslate"),d._UZ(2,"image"),d.YNc(3,cne,2,4,"ng-container",3),d.qZA()),2&i){const e=n.$implicit,r=d.oxw().$implicit,o=d.oxw(2);d.uIk("transform",d.lcZ(1,5,d.WLB(7,mp,e.x,e.y))),d.xp6(2),d.uIk("height",o.cellSize)("href","assets/sprites/"+o.spriteSet.code+"/"+r.asset+".png")("width",o.cellSize),d.xp6(1),d.Q6J("ngIf",o.debug)}}function une(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.TgZ(1,"g"),d.ALo(2,"cssTranslate"),d.YNc(3,dne,4,10,"g",3),d.qZA(),d.BQk()),2&i){const e=n.$implicit,r=d.oxw(2);d.xp6(1),d.uIk("transform",d.lcZ(2,2,d.WLB(4,mp,r.svgWidth/2-r.zoom*r.focus.x+e.x,r.svgHeight/2-r.zoom*r.focus.y+e.y))),d.xp6(2),d.Q6J("ngIf",r.getSpriteOffset(r.elementsBycode[e.tile.element],e.tile.orientation+r.orientation))}}function hne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d._UZ(1,"rect",6),d.BQk()),2&i){const e=n.$implicit;d.xp6(1),d.uIk("height",e.y2-e.y1)("width",e.x2-e.x1)("x",e.x1)("y",e.y1)}}function fne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,hne,2,4,"ng-container",3),d.BQk()),2&i){const e=n.$implicit,r=d.oxw(2).$implicit,o=d.oxw(2);d.xp6(1),d.Q6J("ngIf",o.projectBox(e,r.layer))}}function mne(i,n){if(1&i&&(d.O4$(),d.TgZ(0,"g"),d.ALo(1,"cssTranslate"),d.YNc(2,fne,2,1,"ng-container",3),d.qZA()),2&i){const e=d.oxw().$implicit,r=d.oxw(2);d.uIk("transform",d.lcZ(1,2,d.WLB(4,mp,r.svgWidth/2-r.zoom*r.focus.x,r.svgHeight/2-r.zoom*r.focus.y))),d.xp6(2),d.Q6J("ngIf",r.utilService.bounds(e.tile,r.elementsBycode[e.tile.element].footprint,e.tile.orientation))}}function pne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.TgZ(1,"g"),d.ALo(2,"cssTranslate"),d._UZ(3,"circle",7),d.TgZ(4,"text",8),d._uU(5),d.qZA()(),d.BQk()),2&i){const e=d.oxw(),r=e.$implicit,o=e.index,s=d.oxw(2);d.xp6(1),d.uIk("transform",d.lcZ(2,2,d.WLB(4,mp,s.svgWidth/2-s.zoom*s.focus.x+r.x,s.svgHeight/2-s.zoom*s.focus.y+r.y))),d.xp6(4),d.Oqu(o)}}function gne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.TgZ(1,"g"),d.ALo(2,"cssTranslate"),d._UZ(3,"circle",9),d.qZA(),d.BQk()),2&i){const e=d.oxw().$implicit,r=d.oxw(2);d.xp6(1),d.uIk("transform",d.lcZ(2,3,d.WLB(5,mp,r.svgWidth/2-r.zoom*r.focus.x+e.x,r.svgHeight/2-r.zoom*r.focus.y+e.y))),d.xp6(2),d.Udp("fill",r.layerColors[e.layer])}}function _ne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,mne,3,7,"g",3),d.YNc(2,pne,6,7,"ng-container",3),d.YNc(3,gne,4,8,"ng-container",3),d.BQk()),2&i){const e=d.oxw(2);d.xp6(1),d.Q6J("ngIf",!1),d.xp6(1),d.Q6J("ngIf",!1),d.xp6(1),d.Q6J("ngIf",e.debug)}}function yne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d._UZ(1,"image",10),d.ALo(2,"assetUrl"),d.ALo(3,"cssTranslate"),d.BQk()),2&i){const e=n.$implicit,r=d.oxw().$implicit,o=d.oxw(4);d.xp6(1),d.Udp("opacity",.7+.15*o.sin(4.5*o.time)),d.uIk("height",o.cellSize)("href",d.Dn7(2,6,o.cursor.element.code,o.spriteSet,o.cursor.orientation))("transform",d.lcZ(3,10,d.WLB(12,mp,o.svgWidth/2-o.zoom*o.focus.x+r.x+e.x,o.svgHeight/2-o.zoom*o.focus.y+r.y+e.y)))("width",o.cellSize)}}function vne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,yne,4,15,"ng-container",3),d.BQk()),2&i){const e=d.oxw(4);d.xp6(1),d.Q6J("ngIf",e.cursor.element&&e.getSpriteOffset(e.cursor.element,e.cursor.orientation))}}function bne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,vne,2,1,"ng-container",3),d.BQk()),2&i){const e=d.oxw(3);d.xp6(1),d.Q6J("ngIf",e.project(e.cursorHardpoint.original.x,e.cursorHardpoint.original.y,e.cursorHardpoint.original.z+1))}}function wne(i,n){if(1&i&&(d.O4$(),d._UZ(0,"circle",13),d.ALo(1,"cssTranslate")),2&i){const e=d.oxw().$implicit,r=d.oxw(3);d.uIk("transform",d.lcZ(1,1,d.WLB(3,mp,r.svgWidth/2-r.zoom*r.focus.x+e.x,r.svgHeight/2-r.zoom*r.focus.y+e.y)))}}function xne(i,n){if(1&i){const e=d.EpF();d.O4$(),d.ynx(0),d.TgZ(1,"path",11),d.NdJ("click",function(){const s=d.CHM(e).$implicit,c=d.oxw(3);return d.KtG(c.onClickCursor(s))})("mouseover",function(){const s=d.CHM(e).$implicit,c=d.oxw(3);return d.KtG(c.onHoverCursor(s))}),d.ALo(2,"cssTranslate"),d.qZA(),d.YNc(3,wne,2,6,"circle",12),d.BQk()}if(2&i){const e=n.$implicit,r=d.oxw(3);d.xp6(1),d.Udp("fill",r.cursor.color)("stroke",r.cursor.color),d.uIk("d",r.shapes[e.original.type])("transform",d.lcZ(2,7,d.WLB(9,mp,r.svgWidth/2-r.zoom*r.focus.x+e.x,r.svgHeight/2-r.zoom*r.focus.y+e.y))),d.xp6(2),d.Q6J("ngIf",r.debug)}}function Ene(i,n){if(1&i&&(d.O4$(),d.ynx(0),d.YNc(1,bne,2,1,"ng-container",3),d.YNc(2,xne,4,12,"ng-container",4),d.BQk()),2&i){const e=d.oxw(2);d.xp6(1),d.Q6J("ngIf",e.cursorHardpoint),d.xp6(1),d.Q6J("ngForOf",e.projectedHardpoints)}}function Cne(i,n){if(1&i&&(d.O4$(),d.ynx(0),d._UZ(1,"line",14)(2,"line",14),d.BQk()),2&i){const e=d.oxw(2);d.xp6(1),d.uIk("x1",0)("x2",e.svgWidth)("y1",e.svgHeight/2)("y2",e.svgHeight/2),d.xp6(1),d.uIk("x1",e.svgWidth/2)("x2",e.svgWidth/2)("y1",0)("y2",e.svgHeight)}}function Dne(i,n){if(1&i&&(d.O4$(),d.TgZ(0,"g")(1,"g"),d.YNc(2,une,4,7,"ng-container",4),d.YNc(3,_ne,4,3,"ng-container",4),d.qZA(),d.TgZ(4,"g"),d.YNc(5,Ene,3,2,"ng-container",3),d.qZA(),d.YNc(6,Cne,3,8,"ng-container",3),d.qZA()),2&i){const e=d.oxw();d.xp6(2),d.Q6J("ngForOf",e.projectedTiles),d.xp6(1),d.Q6J("ngForOf",e.projectedTiles),d.xp6(2),d.Q6J("ngIf",e.cursor),d.xp6(1),d.Q6J("ngIf",e.debug)}}const Ine=function(i){return{editable:i}},{sin:Tne,min:rj,max:oj}=Math;let sj=(()=>{class i{constructor(e,r,o){this.host=e,this.utilService=r,this.zone=o,this.spriteSet=c0[0],this.editable=!1,this.elements=[],this.hardpoints=[],this.zoom=1,this.focus={x:0,y:0},this.orientation=0,this.clickCursor=new d.vpe,this.timerId=void 0,this.startTime=0,this.time=0,this.elementsBycode={},this.projectedTiles=[],this.projectedHardpoints=[],this.svgWidth=0,this.svgHeight=0,this.cellSize=0,this.tileWidth=1e3,this.tileHeight=1e3,this.unitX=0,this.unitY=0,this.unitZ=0,this.unitFactor=0,this.shapes={Cell:"",ArrowLeft:"",ArrowRight:""},this.sin=Tne,this.layerColors=["purple","green"],this.debug=!1,this.startTime=(new Date).getTime(),this.timerId=setInterval(()=>this.time=((new Date).getTime()-this.startTime)/1e3,50),this.calculateFactors()}calculateFactors(){const{spriteSet:e,zoom:r,tileWidth:o}=this,s=r*e.tileUnitWidth,c=r*e.tileUnitHeight,h=r*e.tileUnitDepth;this.unitX=s,this.unitY=c,this.unitZ=h,this.unitFactor=e.tileUnitWidth/o,this.cellSize=r*o;const _=.05*s,w=.05*c;function I(B){const Y=B[B.length-1],ve=new Dr(B).outline(.02*s),Ae=[];return ve.curves.forEach((ke,ze)=>{const et=ke.points;if(0===ze&&Ae.push(`M ${et[0].x}, ${et[0].y}`),3===et.length&&Ae.push(`Q ${et[1].x}, ${et[1].y} ${et[2].x}, ${et[2].y}`),4===et.length&&Ae.push(`C ${et[1].x}, ${et[1].y} ${et[2].x}, ${et[2].y} ${et[3].x}, ${et[3].y}`),4===ze){const it=ke.normal(1),Ft={x:it.y,y:-1*it.x},bn=.06*s;Ae.push(`L ${Y.x+it.x*bn}, ${Y.y+it.y*bn}`),Ae.push(`L ${Y.x+Ft.x*bn}, ${Y.y+Ft.y*bn}`),Ae.push(`L ${Y.x-it.x*bn}, ${Y.y-it.y*bn}`)}}),Ae.join(" ")}this.shapes.Cell=[`M ${s/-2+_},0`,`L 0,${c/-2+w}`,`L ${s/2-_},0`,"L 0,"+(c/2-w),"Z"].join(" ");const P=[{x:.1,y:0},{x:-.3,y:-.1},{x:-.3,y:-.3},{x:0,y:-.45}].map(B=>({x:B.x*s,y:B.y*c}));this.shapes.ArrowLeft=I(P.map(B=>({x:-B.x,y:B.y}))),this.shapes.ArrowRight=I(P)}getSpriteOffset(e,r){r%=4;const{tileWidth:o,tileHeight:s,unitX:c,unitY:h,zoom:_}=this,w=_*o*-.5;let I=0;I=-.5*(_*s+h);const[A,P]=e.footprint,Y=[[0,1,1,0,2],[0,1,2,-1,3],[0,1,3,-2,4],[0,2,1,1,3],[0,2,2,0,4],[0,2,3,-1,5],[0,3,1,2,4],[0,3,3,0,6],[0,6,3,3,9],[1,1,1,0,2],[1,1,2,-1,1],[1,2,1,-1,3],[1,2,2,-2,2],[1,2,3,-3,1],[1,3,1,-2,4],[1,3,3,-4,2],[1,6,3,-7,5],[2,1,1,0,2],[2,1,2,1,1],[2,2,1,-1,1],[2,2,2,0,0],[2,2,3,1,-1],[2,3,1,-2,0],[2,3,3,0,-2],[2,6,3,-3,-5],[3,1,1,0,2],[3,1,2,1,3],[3,2,1,1,1],[3,2,2,2,2],[3,2,3,3,3],[3,3,1,2,0],[3,3,3,4,2],[3,6,3,7,-1]].find(Ae=>Ae[0]===r&&Ae[1]===A&&Ae[2]===P);let ee=0,ve=0;return Y?(ee=Y[3]*c/4,ve=Y[4]*h/4):console.log("missing",r,A,P),{x:w+ee,y:I+ve}}ngOnChanges(e){if(("zoom"in e||"spriteSet"in e)&&(this.calculateFactors(),this.projectTiles(),this.projectHardpoints()),"elements"in e){const r={};this.elements.forEach(o=>r[o.code]=o),this.elementsBycode=r}"cursor"in e&&(this.cursor||(this.cursorHardpoint=void 0)),"orientation"in e&&(this.projectTiles(),this.projectHardpoints(),this.centerFocus()),"design"in e&&(this.projectTiles(),e.design.previousValue||this.centerFocus()),"hardpoints"in e&&(0===this.hardpoints.length&&(this.cursorHardpoint=void 0),this.projectHardpoints())}ngOnDestroy(){clearInterval(this.timerId),this.timerId=void 0}ngOnInit(){const e=new ResizeObserver(o=>{this.zone.run(()=>{const s=o[0].contentRect;this.svgWidth=s.width,this.svgHeight=s.height})}),{svg:r}=this;r&&e.observe(r.nativeElement)}onClickCursor(e){const{cursor:r}=this;r&&(this.clickCursor.emit({cursor:r,hardpoint:e.original}),this.cursorHardpoint=void 0)}onDrag(e){this.editable&&!this.hardpoints.length&&1===e.buttons&&this.moveFocus(e.movementX,e.movementY)}onHoverCursor(e){this.cursorHardpoint=e}onPanMove(e){this.moveFocus(10*e.velocityX,10*e.velocityY)}project(e,r,o){const{orientation:s,unitX:c,unitY:h,unitZ:p}=this;if(s){const I=this.utilService.rotate({x:e,y:r},this.orientation);e=I.x,r=I.y}return{x:(e-r)*c/2,y:(e+r)*h/2-o*p}}projectBox(e,r){const o=[this.project(e.x1-.5,e.y1-.5,r),this.project(e.x1-.5,e.y2+.5,r),this.project(e.x2+.5,e.y1-.5,r),this.project(e.x2+.5,e.y2+.5,r)],s=o.map(h=>h.x),c=o.map(h=>h.y);return{x1:s.reduce((h,p)=>rj(h,p)),y1:c.reduce((h,p)=>rj(h,p)),x2:s.reduce((h,p)=>oj(h,p)),y2:c.reduce((h,p)=>oj(h,p))}}centerFocus(){const{projectedTiles:e,zoom:r}=this;if(!e.length)return;const o=(s,c)=>s+c;this.focus={x:e.map(s=>s.x).reduce(o,0)/e.length/r,y:e.map(s=>s.y).reduce(o,0)/e.length/r}}moveFocus(e,r){const{zoom:o}=this;this.focus.x-=e/o,this.focus.y-=r/o}projectHardpoints(){this.projectedHardpoints=this.hardpoints.map(e=>({...this.project(e.x,e.y,e.z),original:e}))}projectTiles(){const{design:e,orientation:r,utilService:c,elementsBycode:h}=this;if(!e)return void(this.projectedTiles=[]);const p=[];e.levels.forEach(P=>P.tiles.forEach(B=>{const Y=B.x,ee=B.y,ve=P.index,{x:Ae,y:_e}=this.project(Y,ee,ve);p.push({x:Ae,y:_e,layer:ve,tile:B,asset:`${B.element}_${(B.orientation+r)%4}`})}));const _=p.map(P=>{const B=h[P.tile.element],Y=B?.footprint||[1,1],ee=B?.height||0;return{projected:P,...c.bounds(c.rotate(P.tile,r),Y,r+P.tile.orientation),z1:P.layer,z2:P.layer+ee+1,depth:0,visited:!1,background:[]}}),w=_.length;for(let P=0;P<w;++P){const B=_[P];for(let Y=0;Y<w;++Y)if(P!=Y){const ee=_[Y];ee.x1<B.x2&&ee.y1<B.y2&&ee.z1<B.z2&&B.background.push(ee)}}let I=0;_.forEach(function A(P){if(!P.visited){P.visited=!0;const B=P.background.length;for(let Y=0;Y<B&&null!=P.background[Y];++Y)A(P.background[Y]),P.background[Y]=void 0;P.depth=I++}}),_.sort((P,B)=>Math.sign(P.depth-B.depth)),this.projectedTiles=_.map(P=>P.projected)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(d.SBq),d.Y36(ij),d.Y36(d.R0b))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-design-viewer"]],viewQuery:function(e,r){if(1&e&&d.Gf(lne,7),2&e){let o;d.iGM(o=d.CRH())&&(r.svg=o.first)}},inputs:{spriteSet:"spriteSet",editable:"editable",design:"design",elements:"elements",hardpoints:"hardpoints",zoom:"zoom",focus:"focus",orientation:"orientation",cursor:"cursor"},outputs:{clickCursor:"clickCursor"},features:[d.TTD],decls:4,vars:4,consts:[[1,"design-viewer-container"],[1,"svg-container",3,"ngClass","mousemove","pan"],["svg",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"fill","none","stroke","red"],[2,"stroke","fuchsia","fill","none"],["cx","0","cy","0","r","16",2,"fill","white","fill-opacity","0.6","stroke","steelblue"],["x","0","y","0",2,"fill","blue","stroke","none","text-anchor","middle","alignment-baseline","middle"],["cx","0","cy","0","r","8",2,"stroke","cyan"],[2,"filter","drop-shadow(0 0 8px cyan)"],[1,"hardpoint",3,"click","mouseover"],["cx","0","cy","0","r","8","style","fill: orange; stroke: cyan;",4,"ngIf"],["cx","0","cy","0","r","8",2,"fill","orange","stroke","cyan"],[2,"stroke","blueviolet","stroke-width","1"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0),d.O4$(),d.TgZ(1,"svg",1,2),d.NdJ("mousemove",function(s){return r.onDrag(s)})("pan",function(s){return r.onPanMove(s)}),d.YNc(3,Dne,7,4,"g",3),d.qZA()()),2&e&&(d.xp6(1),d.Q6J("ngClass",d.VKq(2,Ine,r.editable)),d.xp6(2),d.Q6J("ngIf",r.design&&r.elements.length>0))},dependencies:[oi,Po,ci,gk,ane],styles:[".design-viewer-container[_ngcontent-%COMP%]{width:100%;height:100%}.design-viewer-container[_ngcontent-%COMP%]   svg.svg-container[_ngcontent-%COMP%]{display:block;width:100%;height:100%;background-color:silver}.design-viewer-container[_ngcontent-%COMP%]   svg.svg-container.editable[_ngcontent-%COMP%]{cursor:move}.hardpoint[_ngcontent-%COMP%]{cursor:pointer;fill-opacity:.25;stroke-width:3;stroke-opacity:.85;transition-property:fill-opacity;transition-duration:.25s;transition-timing-function:ease-in-out}.hardpoint[_ngcontent-%COMP%]:hover{fill-opacity:.5}"]}),i})(),_k=(()=>{class i{transform(e){return e||(e="warning"),e=e.toLowerCase(),i.TABLE[e]||e}}return i.TABLE={clear:"close",collection:"apps",create:"add",design:"castle",element:"view_in_ar",materials:"inventory",menu:"menu",properties:"description","tile-add":"brush","tile-copy":"colorize","tile-move":"control_camera","tile-remove":"clear","tile-rotate-left":"rotate_90_degrees_ccw","tile-rotate-right":"rotate_90_degrees_cw","tile-view":"visibility",view:"visibility","zoom-in":"zoom_in","zoom-out":"zoom_out"},i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=d.Yjl({name:"symbol",type:i,pure:!0}),i})();const Sne=function(){return[]};function Ane(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"div",5)(2,"h2"),d._uU(3),d.qZA(),d._UZ(4,"kn-design-viewer",6),d.ALo(5,"async"),d.qZA(),d.BQk()),2&i){const e=n.$implicit,r=d.oxw();d.xp6(1),d.Q6J("routerLink",e.id),d.xp6(2),d.Oqu(e.title),d.xp6(1),d.Q6J("design",e)("elements",d.lcZ(5,5,r.elements$)||d.DdM(7,Sne))("zoom",r.defaultZoom)}}let Mne=(()=>{class i{constructor(e,r,o){this.designService=e,this.elementService=r,this.router=o,this.designs$=new Nn.y,this.elements$=new Nn.y,this.defaultZoom=.2,this.designs$=this.designService.getDesigns(),this.elements$=this.elementService.getElements()}onCreateDesign(){this.designService.create().subscribe(e=>this.router.navigate(["designs",e.id]))}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Kz),d.Y36(HC),d.Y36(Ea))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-design-list-page"]],decls:11,vars:6,consts:[[1,"page-layout"],[1,"design-list-container"],[1,"design-container",2,"align-content","center","align-items","center","justify-content","center"],["color","primary","mat-fab","",3,"click"],[4,"ngFor","ngForOf"],[1,"design-container",3,"routerLink"],[3,"design","elements","zoom"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0)(1,"h1"),d._uU(2,"My Designs"),d.qZA(),d.TgZ(3,"div",1)(4,"div",2)(5,"button",3),d.NdJ("click",function(){return r.onCreateDesign()}),d.TgZ(6,"mat-icon"),d._uU(7),d.ALo(8,"symbol"),d.qZA()()(),d.YNc(9,Ane,6,8,"ng-container",4),d.ALo(10,"async"),d.qZA()()),2&e&&(d.xp6(7),d.Oqu(d.lcZ(8,2,"create")),d.xp6(2),d.Q6J("ngForOf",d.lcZ(10,4,r.designs$)))},dependencies:[l0,Po,p7,CM,sj,Ze,_k],styles:[".design-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:20px}.design-list-container[_ngcontent-%COMP%]   .design-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:450px;height:360px;cursor:pointer;border:1px solid darkgray;padding:12px;justify-content:start;align-items:stretch;align-content:stretch}.design-list-container[_ngcontent-%COMP%]   .design-container[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 4px #e3b2564d}.design-list-container[_ngcontent-%COMP%]   .design-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex-basis:auto;flex-grow:0;flex-shrink:0}.design-list-container[_ngcontent-%COMP%]   .design-container[_ngcontent-%COMP%]   kn-design-viewer[_ngcontent-%COMP%]{display:block;flex-basis:auto;flex-grow:1;flex-shrink:1}"]}),i})();function Rne(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"button",6),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o.onFilterElements(""))}),d.TgZ(1,"mat-icon"),d._uU(2),d.ALo(3,"symbol"),d.qZA()()}2&i&&(d.xp6(2),d.Oqu(d.lcZ(3,1,"clear")))}const Pne=function(i){return{selected:i}};function One(i,n){if(1&i){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",7),d.NdJ("click",function(){const s=d.CHM(e).$implicit,c=d.oxw();return d.KtG(c.onSelectElement(s))}),d.TgZ(2,"div",8),d._UZ(3,"img"),d.ALo(4,"assetUrl"),d.qZA(),d.TgZ(5,"span"),d._uU(6),d.qZA()(),d.BQk()}if(2&i){const e=n.$implicit,r=d.oxw();d.xp6(1),d.Q6J("ngClass",d.VKq(7,Pne,r.selected===e)),d.xp6(2),d.uIk("src",d.Dn7(4,3,e.code,r.spriteSet,"thumbnail"),d.LSH),d.xp6(3),d.Oqu(e.name)}}let Nne=(()=>{class i{constructor(e){this.elementService=e,this.spriteSet=c0[0],this.selectedChanged=new d.vpe,this.elements=[],this.filter="",this.filteredElements=[]}ngOnInit(){this.elementService.getElements().subscribe(e=>{this.elements=e,this.filteredElements=e})}onFilterElements(e){const{elements:r}=this;if(this.filter=e,e){const o=e.toLowerCase().split(" ");this.filteredElements=r.filter(s=>o.find(c=>s.code.toLowerCase().includes(c)||s.name.toLowerCase().includes(c)||s.tags.find(h=>h.toLowerCase().includes(c))))}else this.filteredElements=r}onSelectElement(e){this.selected=e===this.selected?void 0:e,this.selectedChanged.emit(this.selected)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(HC))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-element-finder"]],inputs:{spriteSet:"spriteSet",selected:"selected"},outputs:{selectedChanged:"selectedChanged"},decls:8,vars:3,consts:[[2,"display","flex","flex-direction","column","gap","0"],[1,"example-form-field"],["matInput","","type","text",3,"ngModel","ngModelChange"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],[1,"element-finder"],[4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix","",3,"click"],[1,"element-finder-item",3,"ngClass","click"],[1,"thumbnail-wrapper"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),d._uU(3,"Search for element"),d.qZA(),d.TgZ(4,"input",2),d.NdJ("ngModelChange",function(s){return r.onFilterElements(s)}),d.qZA(),d.YNc(5,Rne,4,3,"button",3),d.qZA(),d.TgZ(6,"div",4),d.YNc(7,One,7,9,"ng-container",5),d.qZA()()),2&e&&(d.xp6(4),d.Q6J("ngModel",r.filter),d.xp6(1),d.Q6J("ngIf",r.filter),d.xp6(2),d.Q6J("ngForOf",r.filteredElements))},dependencies:[oi,Po,ci,nC,FN,rM,g7,o6,pM,IY,CM,D6,gk,_k],styles:[".element-finder[_ngcontent-%COMP%]{display:flex;gap:8px;flex-direction:row;flex-wrap:wrap;align-items:stretch;overflow-y:auto;min-height:362px;max-height:520px;padding:8px}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]{cursor:pointer;width:140px;height:150px;padding:8px;display:flex;gap:4px;flex-direction:column;border:1px solid silver;justify-content:end;align-items:stretch}.element-finder[_ngcontent-%COMP%]   .element-finder-item.selected[_ngcontent-%COMP%]{border-color:gold}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 4px #fff6}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:stretch;position:relative;flex-basis:0;flex-grow:1;flex-shrink:1;min-width:0;min-height:0}.element-finder[_ngcontent-%COMP%]   .element-finder-item[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex-basis:0;flex-grow:1;object-fit:contain;max-width:100%;max-height:100%}"]}),i})();function Fne(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"mat-button-toggle",28),d._uU(2),d.qZA(),d.BQk()),2&i){const e=n.$implicit;d.xp6(1),d.Q6J("value",e),d.xp6(1),d.hij(" ",90*e,"\xb0 ")}}function Lne(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"mat-button-toggle",29),d._UZ(2,"div",30),d._uU(3),d.qZA(),d.BQk()),2&i){const e=n.$implicit;d.xp6(1),d.Q6J("value",e),d.xp6(1),d.Udp("background-color",e.color),d.xp6(1),d.hij(" ",e.name," ")}}function Une(i,n){1&i&&(d.TgZ(0,"th",31),d._uU(1,"Code"),d.qZA())}function Bne(i,n){if(1&i&&(d.TgZ(0,"td",32),d._uU(1),d.qZA()),2&i){const e=n.$implicit;d.xp6(1),d.Oqu(e.element.code)}}function Vne(i,n){1&i&&(d.TgZ(0,"th",33),d._uU(1,"Name"),d.qZA())}function Hne(i,n){if(1&i&&(d.TgZ(0,"td",34),d._uU(1),d.qZA()),2&i){const e=n.$implicit;d.xp6(1),d.Oqu(e.element.name)}}function zne(i,n){1&i&&(d.TgZ(0,"th",35),d._uU(1,"Quantity"),d.qZA())}function jne(i,n){if(1&i&&(d.TgZ(0,"td",36),d._uU(1),d.qZA()),2&i){const e=n.$implicit;d.xp6(1),d.hij("",e.quantity," ")}}function $ne(i,n){1&i&&d._UZ(0,"tr",37)}function Gne(i,n){1&i&&d._UZ(0,"tr",38)}function Wne(i,n){if(1&i){const e=d.EpF();d.ynx(0),d.TgZ(1,"mat-button-toggle",39),d.NdJ("click",function(){const s=d.CHM(e).$implicit,c=d.oxw(2);return d.KtG(c.onSelectMode(s))}),d.TgZ(2,"mat-icon"),d._uU(3),d.ALo(4,"symbol"),d.qZA()(),d.BQk()}if(2&i){const e=n.$implicit;d.xp6(1),d.Q6J("value",e),d.xp6(2),d.Oqu(d.lcZ(4,2,"tile-"+e))}}const qne=function(){return[0,1,2,3]},aj=function(){return["code","name","quantity"]},Yne=function(){return["view","add","remove","move","copy","rotate-left","rotate-right"]},Zne=function(i,n,e,r){return{mode:i,color:n,element:e,orientation:r}};function Kne(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"mat-drawer-container",1)(1,"mat-drawer",2,3)(3,"mat-accordion",4)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"mat-icon"),d._uU(8),d.ALo(9,"symbol"),d.qZA(),d._uU(10," View "),d.qZA()(),d.TgZ(11,"div",5)(12,"mat-button-toggle-group",6),d.NdJ("ngModelChange",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.viewOrientation=o)}),d.YNc(13,Fne,3,2,"ng-container",7),d.qZA(),d.TgZ(14,"mat-button-toggle-group",6),d.NdJ("ngModelChange",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.viewSpriteSet=o)}),d.YNc(15,Lne,4,4,"ng-container",7),d.qZA()()(),d.TgZ(16,"mat-expansion-panel")(17,"mat-expansion-panel-header")(18,"mat-panel-title")(19,"mat-icon"),d._uU(20),d.ALo(21,"symbol"),d.qZA(),d._uU(22," Properties "),d.qZA()(),d.TgZ(23,"mat-form-field",8)(24,"mat-label"),d._uU(25,"Title"),d.qZA(),d.TgZ(26,"input",9),d.NdJ("ngModelChange",function(o){d.CHM(e);const s=d.oxw();return s.design.title=o,d.KtG(s.save())}),d.qZA()(),d.TgZ(27,"mat-form-field",8)(28,"mat-label"),d._uU(29,"Description"),d.qZA(),d.TgZ(30,"textarea",10),d.NdJ("ngModelChange",function(o){d.CHM(e);const s=d.oxw();return s.design.description=o,d.KtG(s.save())}),d.qZA()()(),d.TgZ(31,"mat-expansion-panel")(32,"mat-expansion-panel-header")(33,"mat-panel-title")(34,"mat-icon"),d._uU(35),d.ALo(36,"symbol"),d.qZA(),d._uU(37," Materials "),d.qZA()(),d.TgZ(38,"table",11),d.ynx(39,12),d.YNc(40,Une,2,0,"th",13),d.YNc(41,Bne,2,1,"td",14),d.BQk(),d.ynx(42,15),d.YNc(43,Vne,2,0,"th",16),d.YNc(44,Hne,2,1,"td",17),d.BQk(),d.ynx(45,18),d.YNc(46,zne,2,0,"th",19),d.YNc(47,jne,2,1,"td",20),d.BQk(),d.YNc(48,$ne,1,0,"tr",21),d.YNc(49,Gne,1,0,"tr",22),d.qZA()(),d.TgZ(50,"mat-expansion-panel")(51,"mat-expansion-panel-header")(52,"mat-panel-title")(53,"mat-icon"),d._uU(54),d.ALo(55,"symbol"),d.qZA(),d._uU(56," Elements "),d.qZA()(),d.TgZ(57,"mat-button-toggle-group",23),d.YNc(58,Wne,5,4,"ng-container",7),d.qZA(),d.TgZ(59,"kn-element-finder",24),d.NdJ("selectedChanged",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.onSelectElement(o))}),d.qZA()()()(),d.TgZ(60,"mat-drawer-content"),d.ynx(61),d.TgZ(62,"kn-design-viewer",25),d.NdJ("clickCursor",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.onClickCursor(o.cursor,o.hardpoint))})("wheel",function(o){d.CHM(e);const s=d.oxw();return d.KtG(s.onWheel(o))}),d.qZA(),d.BQk(),d.TgZ(63,"div",26)(64,"button",27),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o.onZoomIn())}),d.TgZ(65,"mat-icon"),d._uU(66),d.ALo(67,"symbol"),d.qZA()(),d.TgZ(68,"button",27),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o.onZoomOut())}),d.TgZ(69,"mat-icon"),d._uU(70),d.ALo(71,"symbol"),d.qZA()(),d.TgZ(72,"button",27),d.NdJ("click",function(){d.CHM(e);const o=d.MAs(2);return d.KtG(o.toggle())}),d.TgZ(73,"mat-icon"),d._uU(74),d.ALo(75,"symbol"),d.qZA()()()()()}if(2&i){const e=d.oxw();d.xp6(8),d.Oqu(d.lcZ(9,28,"view")),d.xp6(4),d.Q6J("ngModel",e.viewOrientation),d.xp6(1),d.Q6J("ngForOf",d.DdM(42,qne)),d.xp6(1),d.Q6J("ngModel",e.viewSpriteSet),d.xp6(1),d.Q6J("ngForOf",e.SPRITE_SETS),d.xp6(5),d.Oqu(d.lcZ(21,30,"properties")),d.xp6(6),d.Q6J("ngModel",e.design.title),d.xp6(4),d.Q6J("ngModel",e.design.description),d.xp6(5),d.Oqu(d.lcZ(36,32,"materials")),d.xp6(3),d.Q6J("dataSource",e.materials),d.xp6(10),d.Q6J("matHeaderRowDef",d.DdM(43,aj)),d.xp6(1),d.Q6J("matRowDefColumns",d.DdM(44,aj)),d.xp6(5),d.Oqu(d.lcZ(55,34,"element")),d.xp6(3),d.Q6J("value",e.selectedMode),d.xp6(1),d.Q6J("ngForOf",d.DdM(45,Yne)),d.xp6(1),d.Q6J("selected",e.selectedElement)("spriteSet",e.viewSpriteSet),d.xp6(3),d.Q6J("cursor",d.l5B(46,Zne,e.selectedMode,e.modeColors[e.selectedMode],e.selectedElement,e.selectedOrientation))("design",e.design)("editable",!0)("elements",e.elements)("hardpoints",e.validHardpoints)("orientation",e.viewOrientation)("spriteSet",e.viewSpriteSet)("zoom",e.viewZoom),d.xp6(4),d.Oqu(d.lcZ(67,36,"zoom-in")),d.xp6(4),d.Oqu(d.lcZ(71,38,"zoom-out")),d.xp6(4),d.Oqu(d.lcZ(75,40,"menu"))}}const{min:lj,max:cj}=Math;let Qne=(()=>{class i{constructor(e,r,o,s){this.designService=e,this.elementService=r,this.route=o,this.utilService=s,this.selectedOrientation=0,this.elements=[],this.validHardpoints=[],this.selectedMode="view",this.viewOrientation=0,this.viewSpriteSet=c0[0],this.viewZoom=.7,this.materials=[],this.saveTrigger=new dn.x,this.modeColors={add:"#37b5cb",remove:"#ea5126",move:"#4aea26",copy:"#4aea26","rotate-left":"#e57bf5","rotate-right":"#e57bf5"},this.SPRITE_SETS=c0,this.saveTrigger.pipe(function kne(i){return(0,br.e)((n,e)=>{let r=!1,o=null,s=null;const c=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const h=o;o=null,e.next(h)}};n.subscribe((0,di.x)(e,h=>{s?.unsubscribe(),r=!0,o=h,s=(0,di.x)(e,c,zp.Z),(0,vc.Xf)(i(h)).subscribe(s)},()=>{c(),e.complete()},void 0,()=>{o=s=null}))})}(()=>O6(500)),(0,gt.U)(()=>this.design),Pn(h=>!!h),(0,Mo.z)(h=>this.designService.save(h))).subscribe()}handleKeyboardEvent(e){"r"===e.key&&this.rotateSelectedElement(1),"R"===e.key&&this.rotateSelectedElement(-1)}ngOnInit(){this.elementService.getElements().subscribe(e=>{this.elements=e,console.log(e)}),this.route.paramMap.subscribe(e=>{const r=e.get("id");return"sample"===r&&(this.design={title:"Another Test Map",levels:[{tiles:[{x:0,orientation:0,y:0,element:"UD-100"},{orientation:0,y:0,x:3,element:"UD-100"},{element:"UD-100",x:0,y:3,orientation:0},{y:3,element:"UD-100",orientation:0,x:3}],index:0},{tiles:[{element:"UD-014",y:0,x:0,orientation:1},{orientation:1,y:2,element:"UD-015",x:2},{y:1,element:"UD-016",x:2,orientation:1},{element:"UD-039",y:4,x:2,orientation:0},{orientation:0,element:"UD-041",x:0,y:4},{orientation:0,element:"UD-028",x:0,y:5},{y:3,orientation:0,element:"UD-001",x:0},{element:"UD-016",x:2,orientation:0,y:3},{x:2,element:"UD-017",orientation:0,y:5},{orientation:0,element:"UD-011",x:3,y:1},{y:0,element:"UD-002",orientation:1,x:2},{orientation:1,x:3,element:"UD-014",y:0},{x:3,element:"UD-014",orientation:0,y:2},{element:"UD-013",orientation:2,x:5,y:0},{x:4,y:0,orientation:1,element:"UD-006"},{y:1,orientation:2,x:5,element:"UD-002"},{orientation:2,y:1,element:"UD-064",x:4},{x:4,orientation:3,element:"UD-042",y:2},{orientation:3,y:2,x:5,element:"UD-014"},{x:1,element:"UD-003",orientation:1,y:0},{orientation:3,element:"UD-009",x:1,y:5},{x:1,element:"UD-017",orientation:3,y:4},{orientation:0,element:"UD-001",x:1,y:3},{orientation:3,x:3,element:"UD-007",y:5},{element:"UD-007",y:5,orientation:0,x:4},{x:0,element:"UD-006",orientation:0,y:1},{element:"UD-006",orientation:0,y:2,x:0},{y:1,x:1,element:"UD-006",orientation:2},{x:3,orientation:1,y:3,element:"UD-027"},{y:4,element:"UD-065",orientation:0,x:5},{orientation:1,x:5,element:"UD-063",y:3},{y:3,x:4,element:"UD-017",orientation:1},{y:4,x:4,element:"UD-017",orientation:1},{orientation:1,element:"UD-017",x:5,y:5},{y:2,x:1,element:"UD-017",orientation:1}],index:1}],id:"sample",description:"",ownerId:"CuxMRi40ate5ExvUqMhVdBQpFGp2"},this.calculateHardpoints(),this.calculateMaterials()),this.designService.getDesignById(r).subscribe(o=>{this.design=o,this.calculateHardpoints(),this.calculateMaterials()})})}onClickCursor(e,r){const{design:o,viewOrientation:s,elements:c}=this;if(o){switch(e.mode){case"add":{const h=r.z+1;let p=o.levels.find(_=>_.index===h);p||(p={index:h,tiles:[]},o.levels.push(p)),p.tiles=[...p.tiles,{x:r.x,y:r.y,element:e.element.code,orientation:(e.orientation-s+4)%4}];break}case"remove":{const h=o.levels.find(p=>p.index===r.z);h&&(h.tiles=h.tiles.filter(p=>p.x!==r.x||p.y!==r.y));break}case"move":case"copy":{const h=o.levels.find(p=>p.index===r.z);if(h){const p=h.tiles.find(_=>_.x===r.x&&_.y===r.y);p&&("move"===e.mode&&(h.tiles=h.tiles.filter(_=>_!==p)),this.selectedElement=c.find(_=>_.code===p.element),this.selectedOrientation=p.orientation,this.selectedMode="add",this.calculateHardpoints())}break}case"rotate-left":case"rotate-right":{const h="rotate-right"===e.mode?1:-1,p=o.levels.find(_=>_.index===r.z);if(p){const _=p.tiles.find(w=>w.x===r.x&&w.y===r.y);_&&(_.orientation=(_.orientation+4+h)%4)}break}}this.design={...o},this.save(),this.calculateHardpoints(),this.calculateMaterials()}}onSelectElement(e){this.selectedElement=e,this.onSelectMode("add")}onSelectMode(e){this.selectedMode=e,"add"!==e&&(this.selectedElement=void 0),this.calculateHardpoints()}onWheel(e){const{selectedElement:r}=this;r?this.rotateSelectedElement(-Math.sign(e.deltaY)):this.updateZoom(1-.0015*e.deltaY)}updateZoom(e){const{utilService:r}=this;this.viewZoom=r.clamp(this.viewZoom*e,.2,2.5)}onZoomIn(){this.updateZoom(1.1)}onZoomOut(){this.updateZoom(1/1.1)}save(){this.saveTrigger.next()}calculateHardpoints(){const{elements:e,design:r,selectedMode:o,selectedElement:s,selectedOrientation:c,utilService:h}=this,p=[];if(e.length&&r){const _=this.getElementsMap();switch(o){case"add":if(s)if(s.flat){const w=r.levels.find(I=>0===I.index);if(w&&w.tiles.length>0){const A=w.tiles.map(_e=>{const ke=[],[ze,et]=_[_e.element].footprint;for(let it=0;it<ze;++it)for(let Ft=0;Ft<et;++Ft)ke.push(h.rotate({x:_e.x+it,y:_e.y+Ft},_e.orientation));return ke}).reduce((_e,ke)=>[..._e,...ke]),P=A.map(_e=>_e.x).reduce((_e,ke)=>lj(_e,ke)),B=A.map(_e=>_e.y).reduce((_e,ke)=>lj(_e,ke)),Y=A.map(_e=>_e.x).reduce((_e,ke)=>cj(_e,ke)),ee=A.map(_e=>_e.y).reduce((_e,ke)=>cj(_e,ke));let ve=0,Ae=0;0===c||2===c?[ve,Ae]=s?.footprint:[Ae,ve]=s?.footprint;for(let _e=P-ve;_e<=Y+ve;++_e)for(let ke=B-Ae;ke<=ee+Ae;++ke){let ze=!0;for(let et=_e;et<_e+ve;++et)for(let it=ke;it<ke+Ae;++it)if(A.find(Ft=>Ft.x===et&&Ft.y===it)){ze=!1;break}ze&&p.push({type:"Cell",x:_e,y:ke,z:-1})}}else p.push({type:"Cell",x:0,y:0,z:-1})}else r.levels.forEach(w=>{w.tiles.forEach(I=>{const A=_[I.element];if(A&&this.checkConnector(s.bottom,A.top)){const P=w.index+A.height,B=h.bounds(I,A.footprint,I.orientation),Y=r.levels.filter(ee=>ee.index===P+1);for(let ee=B.x1;ee<B.x2;++ee)for(let ve=B.y1;ve<B.y2;++ve){const Ae=h.bounds({x:ee,y:ve},s.footprint,c);let _e=!0;for(let ke=Ae.x1;ke<Ae.x2;++ke){for(let ze=Ae.y1;ze<Ae.y2;++ze){if(ke<B.x1||ze<B.y1||ke>=B.x2||ze>=B.y2){_e=!1;break}if(Y.find(et=>!!et.tiles.find(it=>{const Ft=_[it.element]?.footprint;if(!Ft)return!1;const bn=h.bounds(it,Ft,it.orientation);return ke>=bn.x1&&ke<bn.x2&&ze>=bn.y1&&ze<bn.y2}))){_e=!1;break}}if(!_e)break}_e&&p.push({type:"Cell",x:ee,y:ve,z:P})}}})});break;case"remove":case"move":r.levels.forEach(w=>w.tiles.forEach(I=>{const A=_[I.element];if(!A)return;const P=h.bounds(I,A.footprint,I.orientation);A.top!==He.Other&&r.levels.find(Y=>Y.index>w.index&&Y.tiles.find(ee=>{const ve=_[ee.element];return!ve||h.overlap(P,h.bounds(ee,ve.footprint,ee.orientation))}))||p.push({type:"Cell",x:I.x,y:I.y,z:w.index})}));break;case"copy":r.levels.forEach(w=>w.tiles.forEach(I=>{const A=_[I.element];A&&(A.flat||p.push({type:"Cell",x:I.x,y:I.y,z:w.index}))}));break;case"rotate-left":case"rotate-right":{const w="rotate-right"===o?"ArrowRight":"ArrowLeft";r.levels.forEach(I=>I.tiles.forEach(A=>{const P=_[A.element];P&&1===P.footprint[0]&&1===P.footprint[1]&&p.push({type:w,x:A.x,y:A.y,z:I.index})}));break}}}this.validHardpoints=p}calculateMaterials(){const{design:e}=this,r=[];if(e){const o=this.getElementsMap();e.levels.forEach(s=>s.tiles.forEach(c=>{const h=o[c.element];if(!h)return;const p=r.find(_=>_.element===h);p?p.quantity++:r.push({element:h,quantity:1})}))}r.sort((o,s)=>o.quantity>s.quantity?-1:o.quantity<s.quantity?1:o.element.code.localeCompare(s.element.code)),this.materials=r}checkConnector(e,r){return e===He.LargeKey&&r===He.LargeSlot||e===He.LargeSlot&&r===He.LargeKey||e===He.SmallKey&&r===He.SmallSlot||e===He.SmallSlot&&r===He.SmallKey}getElementsMap(){const{elements:e}=this,r={};return e.forEach(o=>r[o.code]=o),r}rotateSelectedElement(e){const{selectedElement:r}=this;this.selectedOrientation=r&&r.orientable?(this.selectedOrientation+e+4)%4:0,this.calculateHardpoints()}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Kz),d.Y36(HC),d.Y36(up),d.Y36(ij))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-design-view-page"]],hostBindings:function(e,r){1&e&&d.NdJ("keypress",function(s){return r.handleKeyboardEvent(s)},!1,d.evT)},decls:1,vars:1,consts:[["class","design-view-container","hasBackdrop","false",4,"ngIf"],["hasBackdrop","false",1,"design-view-container"],["disableClose","true","mode","push","opened","true","position","end",1,"editor-container"],["drawer",""],["multi","false"],[2,"display","flex","flex-direction","column","align-items","start","align-content","start","gap","12px"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["appearance","fill",1,"wide"],["matInput","","placeholder","Your map design's title",3,"ngModel","ngModelChange"],["matInput","","placeholder","Your map design's description","rows","6",3,"ngModel","ngModelChange"],["mat-table","",1,"wide",3,"dataSource"],["matColumnDef","code"],["class","narrow text-nowrap text-left","mat-header-cell","",4,"matHeaderCellDef"],["class","narrow text-nowrap text-left","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["class","wide text-left","mat-header-cell","",4,"matHeaderCellDef"],["class","wide text-left","mat-cell","",4,"matCellDef"],["matColumnDef","quantity"],["class","narrow text-right","mat-header-cell","",4,"matHeaderCellDef"],["class","narrow text-nowrap text-right","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"margin-bottom","22px",3,"value"],[3,"selected","spriteSet","selectedChanged"],[3,"cursor","design","editable","elements","hardpoints","orientation","spriteSet","zoom","clickCursor","wheel"],[2,"position","absolute","right","8px","top","8px","display","flex","flex-direction","row","gap","4px"],["mat-raised-icon-button","",3,"click"],[2,"width","50px",3,"value"],[2,"width","110px",3,"value"],[2,"display","inline-block","width","12px","height","16px","margin-right","4px","border-radius","4px"],["mat-header-cell","",1,"narrow","text-nowrap","text-left"],["mat-cell","",1,"narrow","text-nowrap","text-left"],["mat-header-cell","",1,"wide","text-left"],["mat-cell","",1,"wide","text-left"],["mat-header-cell","",1,"narrow","text-right"],["mat-cell","",1,"narrow","text-nowrap","text-right"],["mat-header-row",""],["mat-row",""],[3,"value","click"]],template:function(e,r){1&e&&d.YNc(0,Kne,76,51,"mat-drawer-container",0),2&e&&d.Q6J("ngIf",r.design&&r.elements)},dependencies:[Po,ci,nC,FN,rM,R4,P4,W7,j4,$4,G7,o6,pM,CM,D6,V6,H6,SM,Y6,PF,Z6,OF,RF,K6,NF,FF,Q6,X6,sj,Nne,_k],styles:["[_nghost-%COMP%]{height:100%}.design-view-container[_ngcontent-%COMP%]{height:calc(100vh - 64px)}.design-view-container[_ngcontent-%COMP%]   .editor-container[_ngcontent-%COMP%]{width:30vw;min-width:300px;max-width:500px}"]}),i})();function Xne(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"div",3)(2,"h3"),d._uU(3),d.qZA(),d._UZ(4,"img"),d.ALo(5,"assetUrl"),d.qZA(),d.BQk()),2&i){const e=n.$implicit,r=d.oxw();d.xp6(1),d.Q6J("routerLink",e.id),d.xp6(2),d.AsE("",e.code," \u2014 ",e.name,""),d.xp6(1),d.uIk("src",d.Dn7(5,4,e.code,r.spriteSet,"thumbnail"),d.LSH)}}let Jne=(()=>{class i{constructor(e){this.elementService=e,this.elements=[],this.spriteSet=c0[0]}ngOnInit(){this.elementService.getElements().subscribe(e=>this.elements=e)}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(HC))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-element-list-page"]],decls:5,vars:1,consts:[[1,"page-layout"],[1,"element-list-container"],[4,"ngFor","ngForOf"],[1,"element-container",3,"routerLink"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0)(1,"h1"),d._uU(2,"Elements"),d.qZA(),d.TgZ(3,"div",1),d.YNc(4,Xne,6,8,"ng-container",2),d.qZA()()),2&e&&(d.xp6(4),d.Q6J("ngForOf",r.elements))},dependencies:[l0,Po,gk],styles:[".element-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:20px}.element-list-container[_ngcontent-%COMP%]   .element-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;width:450px;height:360px;cursor:pointer;border:1px solid darkgray;padding:12px;justify-content:start;align-items:stretch;align-content:stretch}.element-list-container[_ngcontent-%COMP%]   .element-container[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 4px #e3b2564d}.element-list-container[_ngcontent-%COMP%]   .element-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex-basis:auto;flex-grow:0;flex-shrink:0}.element-list-container[_ngcontent-%COMP%]   .element-container[_ngcontent-%COMP%]   kn-element-viewer[_ngcontent-%COMP%]{display:block;flex-basis:auto;flex-grow:1;flex-shrink:1}"]}),i})();function eie(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"h1"),d._uU(2),d.qZA(),d._UZ(3,"img"),d.ALo(4,"assetUrl"),d.BQk()),2&i){const e=d.oxw();d.xp6(2),d.AsE("",e.element.code," \u2014 ",e.element.name,""),d.xp6(1),d.uIk("src",d.Dn7(4,3,e.element.code,e.spriteSet,"thumbnail"),d.LSH)}}const tie=[{path:"designs",component:Mne},{path:"designs/:id",component:Qne},{path:"elements",component:Jne},{path:"elements/:id",component:(()=>{class i{constructor(e,r){this.elementService=e,this.route=r,this.spriteSet=c0[0]}ngOnInit(){this.route.paramMap.subscribe(e=>this.elementService.getElementById(e.get("id")).subscribe(r=>this.element=r))}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(HC),d.Y36(up))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-element-view-page"]],decls:2,vars:1,consts:[[1,"page-layout"],[4,"ngIf"]],template:function(e,r){1&e&&(d.TgZ(0,"div",0),d.YNc(1,eie,5,7,"ng-container",1),d.qZA()),2&e&&(d.xp6(1),d.Q6J("ngIf",r.element))},dependencies:[ci,gk]}),i})()}];let nie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[Gz.forRoot(tie),Gz]}),i})();function iie(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"a",6)(2,"mat-icon"),d._uU(3),d.ALo(4,"symbol"),d.qZA(),d.TgZ(5,"span"),d._uU(6),d.qZA()(),d.BQk()),2&i){const e=n.$implicit;d.xp6(1),d.Q6J("routerLink",e.link),d.xp6(2),d.Oqu(d.lcZ(4,3,e.icon)),d.xp6(3),d.Oqu(e.label)}}function rie(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"a",7),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o.onLogin())}),d.TgZ(1,"mat-icon"),d._uU(2),d.ALo(3,"symbol"),d.qZA(),d.TgZ(4,"span"),d._uU(5,"Sign In"),d.qZA()()}2&i&&(d.xp6(2),d.Oqu(d.lcZ(3,1,"login")))}function oie(i,n){if(1&i){const e=d.EpF();d.TgZ(0,"a",7),d.NdJ("click",function(){d.CHM(e);const o=d.oxw();return d.KtG(o.onLogout())}),d.TgZ(1,"mat-icon"),d._uU(2),d.ALo(3,"symbol"),d.qZA(),d.TgZ(4,"span"),d._uU(5,"Sign Out"),d.qZA()()}2&i&&(d.xp6(2),d.Oqu(d.lcZ(3,1,"logout")))}function sie(i,n){if(1&i&&(d.ynx(0),d.TgZ(1,"span",8),d._uU(2),d.qZA(),d._UZ(3,"img",9),d.BQk()),2&i){const e=n.$implicit;d.xp6(2),d.Oqu(e.displayName),d.xp6(1),d.uIk("src",e.photoURL,d.LSH)}}let aie=(()=>{class i{constructor(e){this.authenticationService=e,this.menu=[{icon:"design",label:"Designs",link:"designs"},{icon:"collection",label:"Collections",link:"collections"},{icon:"element",label:"Elements",link:"elements"}],this.currentUser$=e.getCurrentUserObservable()}onLogin(){this.authenticationService.signIn()}onLogout(){this.authenticationService.signOut()}}return i.\u0275fac=function(e){return new(e||i)(d.Y36(Zz))},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-top-bar"]],decls:11,vars:10,consts:[["color","primary"],["src","assets/logo.png",1,"logo","media-hide-sm"],[4,"ngFor","ngForOf"],[2,"flex-grow","1"],["class","media-icon-button-sm","mat-button","",3,"click",4,"ngIf"],[4,"ngIf"],["mat-button","",1,"media-icon-button-sm",3,"routerLink"],["mat-button","",1,"media-icon-button-sm",3,"click"],[1,"media-hide-sm",2,"margin-right","8px","padding-left","8px","border-left","1px solid white"],[1,"user-profile-image"]],template:function(e,r){1&e&&(d.TgZ(0,"mat-toolbar",0)(1,"mat-toolbar-row"),d._UZ(2,"img",1),d.YNc(3,iie,7,5,"ng-container",2),d._UZ(4,"div",3),d.YNc(5,rie,6,3,"a",4),d.ALo(6,"async"),d.YNc(7,oie,6,3,"a",4),d.ALo(8,"async"),d.YNc(9,sie,4,2,"ng-container",5),d.ALo(10,"async"),d.qZA()()),2&e&&(d.xp6(3),d.Q6J("ngForOf",r.menu),d.xp6(2),d.Q6J("ngIf",!d.lcZ(6,4,r.currentUser$)),d.xp6(2),d.Q6J("ngIf",d.lcZ(8,6,r.currentUser$)),d.xp6(2),d.Q6J("ngIf",d.lcZ(10,8,r.currentUser$)))},dependencies:[l0,Po,ci,f7,CM,aQ,J6,Ze,_k],styles:[".user-profile-image[_ngcontent-%COMP%]{height:40px;border-radius:20px;margin:0;padding:0;border:1px solid black;vertical-align:center}mat-toolbar-row[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:inline-block;position:relative;top:3px;width:90px;vertical-align:center;margin-right:16px}mat-toolbar-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}"]}),i})(),lie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=d.Xpm({type:i,selectors:[["kn-root"]],decls:2,vars:0,template:function(e,r){1&e&&d._UZ(0,"kn-top-bar")(1,"router-outlet")},dependencies:[vL,aie],styles:[".page-container[_ngcontent-%COMP%]{width:100%;height:100%}.page-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.page-sidenav[_ngcontent-%COMP%]{padding:20px}"]}),i})(),cie=(()=>{class i extends ei{constructor(){super()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})(),die=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i,bootstrap:[lie]}),i.\u0275inj=d.cJS({providers:[{provide:vr,useClass:cie}],imports:[JC,mR,Vn.hO.initializeApp($H_firebase),EW,O8,nie,iJ,od,H9,Df,_7,x7,q7,hF,gZ,EZ,eK,RK,nQ,lQ,xJ,ca(()=>hc($H_firebase)),OW(()=>NW())]}),i})();rd().bootstrapModule(die).catch(i=>console.error(i))},7271:(Tt,Pe,z)=>{var d;!function(q,L,ae,le){"use strict";var Ne,pe=["","webkit","Moz","MS","ms","o"],Me=L.createElement("div"),Ue="function",xe=Math.round,K=Math.abs,J=Date.now;function ue(N,H,Q){return setTimeout(Ct(N,Q),H)}function Ge(N,H,Q){return!!Array.isArray(N)&&(Oe(N,Q[H],Q),!0)}function Oe(N,H,Q){var me;if(N)if(N.forEach)N.forEach(H,Q);else if(N.length!==le)for(me=0;me<N.length;)H.call(Q,N[me],me,N),me++;else for(me in N)N.hasOwnProperty(me)&&H.call(Q,N[me],me,N)}function ot(N,H,Q){var me="DEPRECATED METHOD: "+H+"\n"+Q+" AT \n";return function(){var Ze=new Error("get-stack-trace"),yt=Ze&&Ze.stack?Ze.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",cn=q.console&&(q.console.warn||q.console.log);return cn&&cn.call(q.console,me,yt),N.apply(this,arguments)}}Ne="function"!=typeof Object.assign?function(H){if(H===le||null===H)throw new TypeError("Cannot convert undefined or null to object");for(var Q=Object(H),me=1;me<arguments.length;me++){var Ze=arguments[me];if(Ze!==le&&null!==Ze)for(var yt in Ze)Ze.hasOwnProperty(yt)&&(Q[yt]=Ze[yt])}return Q}:Object.assign;var st=ot(function(H,Q,me){for(var Ze=Object.keys(Q),yt=0;yt<Ze.length;)(!me||me&&H[Ze[yt]]===le)&&(H[Ze[yt]]=Q[Ze[yt]]),yt++;return H},"extend","Use `assign`."),Ye=ot(function(H,Q){return st(H,Q,!0)},"merge","Use `assign`.");function Et(N,H,Q){var Ze,me=H.prototype;(Ze=N.prototype=Object.create(me)).constructor=N,Ze._super=me,Q&&Ne(Ze,Q)}function Ct(N,H){return function(){return N.apply(H,arguments)}}function ce(N,H){return typeof N==Ue?N.apply(H&&H[0]||le,H):N}function Re(N,H){return N===le?H:N}function fe(N,H,Q){Oe(ht(H),function(me){N.addEventListener(me,Q,!1)})}function Ee(N,H,Q){Oe(ht(H),function(me){N.removeEventListener(me,Q,!1)})}function $e(N,H){for(;N;){if(N==H)return!0;N=N.parentNode}return!1}function oe(N,H){return N.indexOf(H)>-1}function ht(N){return N.trim().split(/\s+/g)}function Xe(N,H,Q){if(N.indexOf&&!Q)return N.indexOf(H);for(var me=0;me<N.length;){if(Q&&N[me][Q]==H||!Q&&N[me]===H)return me;me++}return-1}function mn(N){return Array.prototype.slice.call(N,0)}function Oi(N,H,Q){for(var me=[],Ze=[],yt=0;yt<N.length;){var cn=H?N[yt][H]:N[yt];Xe(Ze,cn)<0&&me.push(N[yt]),Ze[yt]=cn,yt++}return Q&&(me=H?me.sort(function(er,xn){return er[H]>xn[H]}):me.sort()),me}function qi(N,H){for(var Q,me,Ze=H[0].toUpperCase()+H.slice(1),yt=0;yt<pe.length;){if((me=(Q=pe[yt])?Q+Ze:H)in N)return me;yt++}return le}var Ko=1;function Se(N){var H=N.ownerDocument||N;return H.defaultView||H.parentWindow||q}var qe="ontouchstart"in q,tt=qi(q,"PointerEvent")!==le,Je=qe&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),dt="touch",$n="mouse",Rt=25,Gt=1,ln=4,Wt=8,hi=1,ii=2,Zn=4,Gn=8,or=16,gr=ii|Zn,Yi=Gn|or,Zi=gr|Yi,li=["x","y"],Ki=["clientX","clientY"];function Ei(N,H){var Q=this;this.manager=N,this.callback=H,this.element=N.element,this.target=N.options.inputTarget,this.domHandler=function(me){ce(N.options.enable,[N])&&Q.handler(me)},this.init()}function At(N,H,Q){var me=Q.pointers.length,Ze=Q.changedPointers.length,yt=H&Gt&&me-Ze==0,cn=H&(ln|Wt)&&me-Ze==0;Q.isFirst=!!yt,Q.isFinal=!!cn,yt&&(N.session={}),Q.eventType=H,function Lt(N,H){var Q=N.session,me=H.pointers,Ze=me.length;Q.firstInput||(Q.firstInput=Ir(H)),Ze>1&&!Q.firstMultiple?Q.firstMultiple=Ir(H):1===Ze&&(Q.firstMultiple=!1);var yt=Q.firstInput,cn=Q.firstMultiple,gi=cn?cn.center:yt.center,er=H.center=hn(me);H.timeStamp=J(),H.deltaTime=H.timeStamp-yt.timeStamp,H.angle=Qi(gi,er),H.distance=Sn(gi,er),function gn(N,H){var Q=H.center,me=N.offsetDelta||{},Ze=N.prevDelta||{},yt=N.prevInput||{};(H.eventType===Gt||yt.eventType===ln)&&(Ze=N.prevDelta={x:yt.deltaX||0,y:yt.deltaY||0},me=N.offsetDelta={x:Q.x,y:Q.y}),H.deltaX=Ze.x+(Q.x-me.x),H.deltaY=Ze.y+(Q.y-me.y)}(Q,H),H.offsetDirection=no(H.deltaX,H.deltaY);var xn=fi(H.deltaTime,H.deltaX,H.deltaY);H.overallVelocityX=xn.x,H.overallVelocityY=xn.y,H.overallVelocity=K(xn.x)>K(xn.y)?xn.x:xn.y,H.scale=cn?function ri(N,H){return Sn(H[0],H[1],Ki)/Sn(N[0],N[1],Ki)}(cn.pointers,me):1,H.rotation=cn?function Kt(N,H){return Qi(H[1],H[0],Ki)+Qi(N[1],N[0],Ki)}(cn.pointers,me):0,H.maxPointers=Q.prevInput?H.pointers.length>Q.prevInput.maxPointers?H.pointers.length:Q.prevInput.maxPointers:H.pointers.length,function Ni(N,H){var Ze,yt,cn,gi,Q=N.lastInterval||H,me=H.timeStamp-Q.timeStamp;if(H.eventType!=Wt&&(me>Rt||Q.velocity===le)){var er=H.deltaX-Q.deltaX,xn=H.deltaY-Q.deltaY,at=fi(me,er,xn);yt=at.x,cn=at.y,Ze=K(at.x)>K(at.y)?at.x:at.y,gi=no(er,xn),N.lastInterval=H}else Ze=Q.velocity,yt=Q.velocityX,cn=Q.velocityY,gi=Q.direction;H.velocity=Ze,H.velocityX=yt,H.velocityY=cn,H.direction=gi}(Q,H);var at=N.element;$e(H.srcEvent.target,at)&&(at=H.srcEvent.target),H.target=at}(N,Q),N.emit("hammer.input",Q),N.recognize(Q),N.session.prevInput=Q}function Ir(N){for(var H=[],Q=0;Q<N.pointers.length;)H[Q]={clientX:xe(N.pointers[Q].clientX),clientY:xe(N.pointers[Q].clientY)},Q++;return{timeStamp:J(),pointers:H,center:hn(H),deltaX:N.deltaX,deltaY:N.deltaY}}function hn(N){var H=N.length;if(1===H)return{x:xe(N[0].clientX),y:xe(N[0].clientY)};for(var Q=0,me=0,Ze=0;Ze<H;)Q+=N[Ze].clientX,me+=N[Ze].clientY,Ze++;return{x:xe(Q/H),y:xe(me/H)}}function fi(N,H,Q){return{x:H/N||0,y:Q/N||0}}function no(N,H){return N===H?hi:K(N)>=K(H)?N<0?ii:Zn:H<0?Gn:or}function Sn(N,H,Q){Q||(Q=li);var me=H[Q[0]]-N[Q[0]],Ze=H[Q[1]]-N[Q[1]];return Math.sqrt(me*me+Ze*Ze)}function Qi(N,H,Q){return Q||(Q=li),180*Math.atan2(H[Q[1]]-N[Q[1]],H[Q[0]]-N[Q[0]])/Math.PI}Ei.prototype={handler:function(){},init:function(){this.evEl&&fe(this.element,this.evEl,this.domHandler),this.evTarget&&fe(this.target,this.evTarget,this.domHandler),this.evWin&&fe(Se(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ee(this.element,this.evEl,this.domHandler),this.evTarget&&Ee(this.target,this.evTarget,this.domHandler),this.evWin&&Ee(Se(this.element),this.evWin,this.domHandler)}};var io={mousedown:Gt,mousemove:2,mouseup:ln},ko="mousedown",sr="mousemove mouseup";function Kn(){this.evEl=ko,this.evWin=sr,this.pressed=!1,Ei.apply(this,arguments)}Et(Kn,Ei,{handler:function(H){var Q=io[H.type];Q&Gt&&0===H.button&&(this.pressed=!0),2&Q&&1!==H.which&&(Q=ln),this.pressed&&(Q&ln&&(this.pressed=!1),this.callback(this.manager,Q,{pointers:[H],changedPointers:[H],pointerType:$n,srcEvent:H}))}});var Wn={pointerdown:Gt,pointermove:2,pointerup:ln,pointercancel:Wt,pointerout:Wt},Ci={2:dt,3:"pen",4:$n,5:"kinect"},Qn="pointerdown",Di="pointermove pointerup pointercancel";function qn(){this.evEl=Qn,this.evWin=Di,Ei.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}q.MSPointerEvent&&!q.PointerEvent&&(Qn="MSPointerDown",Di="MSPointerMove MSPointerUp MSPointerCancel"),Et(qn,Ei,{handler:function(H){var Q=this.store,me=!1,Ze=H.type.toLowerCase().replace("ms",""),yt=Wn[Ze],cn=Ci[H.pointerType]||H.pointerType,gi=cn==dt,er=Xe(Q,H.pointerId,"pointerId");yt&Gt&&(0===H.button||gi)?er<0&&(Q.push(H),er=Q.length-1):yt&(ln|Wt)&&(me=!0),!(er<0)&&(Q[er]=H,this.callback(this.manager,yt,{pointers:Q,changedPointers:[H],pointerType:cn,srcEvent:H}),me&&Q.splice(er,1))}});var Tr={touchstart:Gt,touchmove:2,touchend:ln,touchcancel:Wt};function Z(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Ei.apply(this,arguments)}function V(N,H){var Q=mn(N.touches),me=mn(N.changedTouches);return H&(ln|Wt)&&(Q=Oi(Q.concat(me),"identifier",!0)),[Q,me]}Et(Z,Ei,{handler:function(H){var Q=Tr[H.type];if(Q===Gt&&(this.started=!0),this.started){var me=V.call(this,H,Q);Q&(ln|Wt)&&me[0].length-me[1].length==0&&(this.started=!1),this.callback(this.manager,Q,{pointers:me[0],changedPointers:me[1],pointerType:dt,srcEvent:H})}}});var $={touchstart:Gt,touchmove:2,touchend:ln,touchcancel:Wt},F="touchstart touchmove touchend touchcancel";function re(){this.evTarget=F,this.targetIds={},Ei.apply(this,arguments)}function Te(N,H){var Q=mn(N.touches),me=this.targetIds;if(H&(2|Gt)&&1===Q.length)return me[Q[0].identifier]=!0,[Q,Q];var Ze,yt,cn=mn(N.changedTouches),gi=[],er=this.target;if(yt=Q.filter(function(xn){return $e(xn.target,er)}),H===Gt)for(Ze=0;Ze<yt.length;)me[yt[Ze].identifier]=!0,Ze++;for(Ze=0;Ze<cn.length;)me[cn[Ze].identifier]&&gi.push(cn[Ze]),H&(ln|Wt)&&delete me[cn[Ze].identifier],Ze++;return gi.length?[Oi(yt.concat(gi),"identifier",!0),gi]:void 0}Et(re,Ei,{handler:function(H){var Q=$[H.type],me=Te.call(this,H,Q);me&&this.callback(this.manager,Q,{pointers:me[0],changedPointers:me[1],pointerType:dt,srcEvent:H})}});var rt=2500;function Pt(){Ei.apply(this,arguments);var N=Ct(this.handler,this);this.touch=new re(this.manager,N),this.mouse=new Kn(this.manager,N),this.primaryTouch=null,this.lastTouches=[]}function Mt(N,H){N&Gt?(this.primaryTouch=H.changedPointers[0].identifier,$t.call(this,H)):N&(ln|Wt)&&$t.call(this,H)}function $t(N){var H=N.changedPointers[0];if(H.identifier===this.primaryTouch){var Q={x:H.clientX,y:H.clientY};this.lastTouches.push(Q);var me=this.lastTouches;setTimeout(function(){var yt=me.indexOf(Q);yt>-1&&me.splice(yt,1)},rt)}}function Fn(N){for(var H=N.srcEvent.clientX,Q=N.srcEvent.clientY,me=0;me<this.lastTouches.length;me++){var Ze=this.lastTouches[me],yt=Math.abs(H-Ze.x),cn=Math.abs(Q-Ze.y);if(yt<=25&&cn<=25)return!0}return!1}Et(Pt,Ei,{handler:function(H,Q,me){var yt=me.pointerType==$n;if(!(yt&&me.sourceCapabilities&&me.sourceCapabilities.firesTouchEvents)){if(me.pointerType==dt)Mt.call(this,Q,me);else if(yt&&Fn.call(this,me))return;this.callback(H,Q,me)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Jt=qi(Me.style,"touchAction"),zi=Jt!==le,Xi="compute",he="manipulation",We="none",Dt="pan-x",Ht="pan-y",en=function mi(){if(!zi)return!1;var N={},H=q.CSS&&q.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Q){N[Q]=!H||q.CSS.supports("touch-action",Q)}),N}();function yn(N,H){this.manager=N,this.set(H)}yn.prototype={set:function(N){N==Xi&&(N=this.compute()),zi&&this.manager.element.style&&en[N]&&(this.manager.element.style[Jt]=N),this.actions=N.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var N=[];return Oe(this.manager.recognizers,function(H){ce(H.options.enable,[H])&&(N=N.concat(H.getTouchAction()))}),function Ji(N){if(oe(N,We))return We;var H=oe(N,Dt),Q=oe(N,Ht);return H&&Q?We:H||Q?H?Dt:Ht:oe(N,he)?he:"auto"}(N.join(" "))},preventDefaults:function(N){var H=N.srcEvent,Q=N.offsetDirection;if(!this.manager.session.prevented){var me=this.actions,Ze=oe(me,We)&&!en[We],yt=oe(me,Ht)&&!en[Ht],cn=oe(me,Dt)&&!en[Dt];if(Ze&&1===N.pointers.length&&N.distance<2&&N.deltaTime<250)return;return cn&&yt||!(Ze||yt&&Q&gr||cn&&Q&Yi)?void 0:this.preventSrc(H)}H.preventDefault()},preventSrc:function(N){this.manager.session.prevented=!0,N.preventDefault()}};var mo=1;function Xo(N){this.options=Ne({},this.defaults,N||{}),this.id=function ye(){return Ko++}(),this.manager=null,this.options.enable=Re(this.options.enable,!0),this.state=mo,this.simultaneous={},this.requireFail=[]}function Po(N){return 16&N?"cancel":8&N?"end":4&N?"move":2&N?"start":""}function pi(N){return N==or?"down":N==Gn?"up":N==ii?"left":N==Zn?"right":""}function Ql(N,H){var Q=H.manager;return Q?Q.get(N):N}function ci(){Xo.apply(this,arguments)}function Xl(){ci.apply(this,arguments),this.pX=null,this.pY=null}function ll(){ci.apply(this,arguments)}function Xs(){Xo.apply(this,arguments),this._timer=null,this._input=null}function Jo(){ci.apply(this,arguments)}function Js(){ci.apply(this,arguments)}function cl(){Xo.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function po(N,H){return(H=H||{}).recognizers=Re(H.recognizers,po.defaults.preset),new Ls(N,H)}function Ls(N,H){this.options=Ne({},po.defaults,H||{}),this.options.inputTarget=this.options.inputTarget||N,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=N,this.input=function ut(N){return new(N.options.inputClass||(tt?qn:Je?re:qe?Pt:Kn))(N,At)}(this),this.touchAction=new yn(this,this.options.touchAction),fs(this,!0),Oe(this.options.recognizers,function(Q){var me=this.add(new Q[0](Q[1]));Q[2]&&me.recognizeWith(Q[2]),Q[3]&&me.requireFailure(Q[3])},this)}function fs(N,H){var me,Q=N.element;Q.style&&(Oe(N.options.cssProps,function(Ze,yt){me=qi(Q.style,yt),H?(N.oldCssProps[me]=Q.style[me],Q.style[me]=Ze):Q.style[me]=N.oldCssProps[me]||""}),H||(N.oldCssProps={}))}Xo.prototype={defaults:{},set:function(N){return Ne(this.options,N),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(N){if(Ge(N,"recognizeWith",this))return this;var H=this.simultaneous;return H[(N=Ql(N,this)).id]||(H[N.id]=N,N.recognizeWith(this)),this},dropRecognizeWith:function(N){return Ge(N,"dropRecognizeWith",this)||(N=Ql(N,this),delete this.simultaneous[N.id]),this},requireFailure:function(N){if(Ge(N,"requireFailure",this))return this;var H=this.requireFail;return-1===Xe(H,N=Ql(N,this))&&(H.push(N),N.requireFailure(this)),this},dropRequireFailure:function(N){if(Ge(N,"dropRequireFailure",this))return this;N=Ql(N,this);var H=Xe(this.requireFail,N);return H>-1&&this.requireFail.splice(H,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(N){return!!this.simultaneous[N.id]},emit:function(N){var H=this,Q=this.state;function me(Ze){H.manager.emit(Ze,N)}Q<8&&me(H.options.event+Po(Q)),me(H.options.event),N.additionalEvent&&me(N.additionalEvent),Q>=8&&me(H.options.event+Po(Q))},tryEmit:function(N){if(this.canEmit())return this.emit(N);this.state=32},canEmit:function(){for(var N=0;N<this.requireFail.length;){if(!(this.requireFail[N].state&(32|mo)))return!1;N++}return!0},recognize:function(N){var H=Ne({},N);if(!ce(this.options.enable,[this,H]))return this.reset(),void(this.state=32);56&this.state&&(this.state=mo),this.state=this.process(H),30&this.state&&this.tryEmit(H)},process:function(N){},getTouchAction:function(){},reset:function(){}},Et(ci,Xo,{defaults:{pointers:1},attrTest:function(N){var H=this.options.pointers;return 0===H||N.pointers.length===H},process:function(N){var H=this.state,Q=N.eventType,me=6&H,Ze=this.attrTest(N);return me&&(Q&Wt||!Ze)?16|H:me||Ze?Q&ln?8|H:2&H?4|H:2:32}}),Et(Xl,ci,{defaults:{event:"pan",threshold:10,pointers:1,direction:Zi},getTouchAction:function(){var N=this.options.direction,H=[];return N&gr&&H.push(Ht),N&Yi&&H.push(Dt),H},directionTest:function(N){var H=this.options,Q=!0,me=N.distance,Ze=N.direction,yt=N.deltaX,cn=N.deltaY;return Ze&H.direction||(H.direction&gr?(Ze=0===yt?hi:yt<0?ii:Zn,Q=yt!=this.pX,me=Math.abs(N.deltaX)):(Ze=0===cn?hi:cn<0?Gn:or,Q=cn!=this.pY,me=Math.abs(N.deltaY))),N.direction=Ze,Q&&me>H.threshold&&Ze&H.direction},attrTest:function(N){return ci.prototype.attrTest.call(this,N)&&(2&this.state||!(2&this.state)&&this.directionTest(N))},emit:function(N){this.pX=N.deltaX,this.pY=N.deltaY;var H=pi(N.direction);H&&(N.additionalEvent=this.options.event+H),this._super.emit.call(this,N)}}),Et(ll,ci,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[We]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.scale-1)>this.options.threshold||2&this.state)},emit:function(N){1!==N.scale&&(N.additionalEvent=this.options.event+(N.scale<1?"in":"out")),this._super.emit.call(this,N)}}),Et(Xs,Xo,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(N){var H=this.options,Q=N.pointers.length===H.pointers,me=N.distance<H.threshold,Ze=N.deltaTime>H.time;if(this._input=N,!me||!Q||N.eventType&(ln|Wt)&&!Ze)this.reset();else if(N.eventType&Gt)this.reset(),this._timer=ue(function(){this.state=8,this.tryEmit()},H.time,this);else if(N.eventType&ln)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(N){8===this.state&&(N&&N.eventType&ln?this.manager.emit(this.options.event+"up",N):(this._input.timeStamp=J(),this.manager.emit(this.options.event,this._input)))}}),Et(Jo,ci,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[We]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.rotation)>this.options.threshold||2&this.state)}}),Et(Js,ci,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:gr|Yi,pointers:1},getTouchAction:function(){return Xl.prototype.getTouchAction.call(this)},attrTest:function(N){var Q,H=this.options.direction;return H&(gr|Yi)?Q=N.overallVelocity:H&gr?Q=N.overallVelocityX:H&Yi&&(Q=N.overallVelocityY),this._super.attrTest.call(this,N)&&H&N.offsetDirection&&N.distance>this.options.threshold&&N.maxPointers==this.options.pointers&&K(Q)>this.options.velocity&&N.eventType&ln},emit:function(N){var H=pi(N.offsetDirection);H&&this.manager.emit(this.options.event+H,N),this.manager.emit(this.options.event,N)}}),Et(cl,Xo,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[he]},process:function(N){var H=this.options,Q=N.pointers.length===H.pointers,me=N.distance<H.threshold,Ze=N.deltaTime<H.time;if(this.reset(),N.eventType&Gt&&0===this.count)return this.failTimeout();if(me&&Ze&&Q){if(N.eventType!=ln)return this.failTimeout();var yt=!this.pTime||N.timeStamp-this.pTime<H.interval,cn=!this.pCenter||Sn(this.pCenter,N.center)<H.posThreshold;if(this.pTime=N.timeStamp,this.pCenter=N.center,cn&&yt?this.count+=1:this.count=1,this._input=N,0==this.count%H.taps)return this.hasRequireFailures()?(this._timer=ue(function(){this.state=8,this.tryEmit()},H.interval,this),2):8}return 32},failTimeout:function(){return this._timer=ue(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),po.VERSION="2.0.7",po.defaults={domEvents:!1,touchAction:Xi,enable:!0,inputTarget:null,inputClass:null,preset:[[Jo,{enable:!1}],[ll,{enable:!1},["rotate"]],[Js,{direction:gr}],[Xl,{direction:gr},["swipe"]],[cl],[cl,{event:"doubletap",taps:2},["tap"]],[Xs]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ls.prototype={set:function(N){return Ne(this.options,N),N.touchAction&&this.touchAction.update(),N.inputTarget&&(this.input.destroy(),this.input.target=N.inputTarget,this.input.init()),this},stop:function(N){this.session.stopped=N?2:1},recognize:function(N){var H=this.session;if(!H.stopped){this.touchAction.preventDefaults(N);var Q,me=this.recognizers,Ze=H.curRecognizer;(!Ze||Ze&&8&Ze.state)&&(Ze=H.curRecognizer=null);for(var yt=0;yt<me.length;)Q=me[yt],2===H.stopped||Ze&&Q!=Ze&&!Q.canRecognizeWith(Ze)?Q.reset():Q.recognize(N),!Ze&&14&Q.state&&(Ze=H.curRecognizer=Q),yt++}},get:function(N){if(N instanceof Xo)return N;for(var H=this.recognizers,Q=0;Q<H.length;Q++)if(H[Q].options.event==N)return H[Q];return null},add:function(N){if(Ge(N,"add",this))return this;var H=this.get(N.options.event);return H&&this.remove(H),this.recognizers.push(N),N.manager=this,this.touchAction.update(),N},remove:function(N){if(Ge(N,"remove",this))return this;if(N=this.get(N)){var H=this.recognizers,Q=Xe(H,N);-1!==Q&&(H.splice(Q,1),this.touchAction.update())}return this},on:function(N,H){if(N!==le&&H!==le){var Q=this.handlers;return Oe(ht(N),function(me){Q[me]=Q[me]||[],Q[me].push(H)}),this}},off:function(N,H){if(N!==le){var Q=this.handlers;return Oe(ht(N),function(me){H?Q[me]&&Q[me].splice(Xe(Q[me],H),1):delete Q[me]}),this}},emit:function(N,H){this.options.domEvents&&function cu(N,H){var Q=L.createEvent("Event");Q.initEvent(N,!0,!0),Q.gesture=H,H.target.dispatchEvent(Q)}(N,H);var Q=this.handlers[N]&&this.handlers[N].slice();if(Q&&Q.length){H.type=N,H.preventDefault=function(){H.srcEvent.preventDefault()};for(var me=0;me<Q.length;)Q[me](H),me++}},destroy:function(){this.element&&fs(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Ne(po,{INPUT_START:Gt,INPUT_MOVE:2,INPUT_END:ln,INPUT_CANCEL:Wt,STATE_POSSIBLE:mo,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:hi,DIRECTION_LEFT:ii,DIRECTION_RIGHT:Zn,DIRECTION_UP:Gn,DIRECTION_DOWN:or,DIRECTION_HORIZONTAL:gr,DIRECTION_VERTICAL:Yi,DIRECTION_ALL:Zi,Manager:Ls,Input:Ei,TouchAction:yn,TouchInput:re,MouseInput:Kn,PointerEventInput:qn,TouchMouseInput:Pt,SingleTouchInput:Z,Recognizer:Xo,AttrRecognizer:ci,Tap:cl,Pan:Xl,Swipe:Js,Pinch:ll,Rotate:Jo,Press:Xs,on:fe,off:Ee,each:Oe,merge:Ye,extend:st,assign:Ne,inherit:Et,bindFn:Ct,prefixed:qi}),(typeof q<"u"?q:typeof self<"u"?self:{}).Hammer=po,(d=function(){return po}.call(Pe,z,Pe,Tt))!==le&&(Tt.exports=d)}(window,document)},5619:(Tt,Pe,z)=>{"use strict";z.d(Pe,{X:()=>q});var d=z(8645);class q extends d.x{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const le=super._subscribe(ae);return!le.closed&&ae.next(this._value),le}getValue(){const{hasError:ae,thrownError:le,_value:pe}=this;if(ae)throw le;return this._throwIfClosed(),pe}next(ae){super.next(this._value=ae)}}},5592:(Tt,Pe,z)=>{"use strict";z.d(Pe,{y:()=>Ue});var d=z(305),q=z(7394),L=z(4850),ae=z(8407),le=z(2653),pe=z(4674),Me=z(1441);let Ue=(()=>{class ue{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const ot=new ue;return ot.source=this,ot.operator=Oe,ot}subscribe(Oe,ot,Ne){const st=function J(ue){return ue&&ue instanceof d.Lv||function K(ue){return ue&&(0,pe.m)(ue.next)&&(0,pe.m)(ue.error)&&(0,pe.m)(ue.complete)}(ue)&&(0,q.Nn)(ue)}(Oe)?Oe:new d.Hp(Oe,ot,Ne);return(0,Me.x)(()=>{const{operator:Ye,source:Et}=this;st.add(Ye?Ye.call(st,Et):Et?this._subscribe(st):this._trySubscribe(st))}),st}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(ot){Oe.error(ot)}}forEach(Oe,ot){return new(ot=xe(ot))((Ne,st)=>{const Ye=new d.Hp({next:Et=>{try{Oe(Et)}catch(Ct){st(Ct),Ye.unsubscribe()}},error:st,complete:Ne});this.subscribe(Ye)})}_subscribe(Oe){var ot;return null===(ot=this.source)||void 0===ot?void 0:ot.subscribe(Oe)}[L.L](){return this}pipe(...Oe){return(0,ae.U)(Oe)(this)}toPromise(Oe){return new(Oe=xe(Oe))((ot,Ne)=>{let st;this.subscribe(Ye=>st=Ye,Ye=>Ne(Ye),()=>ot(st))})}}return ue.create=Ge=>new ue(Ge),ue})();function xe(ue){var Ge;return null!==(Ge=ue??le.config.Promise)&&void 0!==Ge?Ge:Promise}},8645:(Tt,Pe,z)=>{"use strict";z.d(Pe,{x:()=>Me});var d=z(5592),q=z(7394);const ae=(0,z(2306).d)(xe=>function(){xe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=z(9039),pe=z(1441);let Me=(()=>{class xe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(J){const ue=new Ue(this,this);return ue.operator=J,ue}_throwIfClosed(){if(this.closed)throw new ae}next(J){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ue of this.currentObservers)ue.next(J)}})}error(J){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=J;const{observers:ue}=this;for(;ue.length;)ue.shift().error(J)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:J}=this;for(;J.length;)J.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var J;return(null===(J=this.observers)||void 0===J?void 0:J.length)>0}_trySubscribe(J){return this._throwIfClosed(),super._trySubscribe(J)}_subscribe(J){return this._throwIfClosed(),this._checkFinalizedStatuses(J),this._innerSubscribe(J)}_innerSubscribe(J){const{hasError:ue,isStopped:Ge,observers:Oe}=this;return ue||Ge?q.Lc:(this.currentObservers=null,Oe.push(J),new q.w0(()=>{this.currentObservers=null,(0,le.P)(Oe,J)}))}_checkFinalizedStatuses(J){const{hasError:ue,thrownError:Ge,isStopped:Oe}=this;ue?J.error(Ge):Oe&&J.complete()}asObservable(){const J=new d.y;return J.source=this,J}}return xe.create=(K,J)=>new Ue(K,J),xe})();class Ue extends Me{constructor(K,J){super(),this.destination=K,this.source=J}next(K){var J,ue;null===(ue=null===(J=this.destination)||void 0===J?void 0:J.next)||void 0===ue||ue.call(J,K)}error(K){var J,ue;null===(ue=null===(J=this.destination)||void 0===J?void 0:J.error)||void 0===ue||ue.call(J,K)}complete(){var K,J;null===(J=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===J||J.call(K)}_subscribe(K){var J,ue;return null!==(ue=null===(J=this.source)||void 0===J?void 0:J.subscribe(K))&&void 0!==ue?ue:q.Lc}}},305:(Tt,Pe,z)=>{"use strict";z.d(Pe,{Hp:()=>Ne,Lv:()=>ue});var d=z(4674),q=z(7394),L=z(2653),ae=z(3894),le=z(2420);const pe=xe("C",void 0,void 0);function xe(ce,Re,fe){return{kind:ce,value:Re,error:fe}}var K=z(7599),J=z(1441);class ue extends q.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,q.Nn)(Re)&&Re.add(this)):this.destination=Ct}static create(Re,fe,Ee){return new Ne(Re,fe,Ee)}next(Re){this.isStopped?Et(function Ue(ce){return xe("N",ce,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?Et(function Me(ce){return xe("E",void 0,ce)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?Et(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Oe(ce,Re){return Ge.call(ce,Re)}class ot{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:fe}=this;if(fe.next)try{fe.next(Re)}catch(Ee){st(Ee)}}error(Re){const{partialObserver:fe}=this;if(fe.error)try{fe.error(Re)}catch(Ee){st(Ee)}else st(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(fe){st(fe)}}}class Ne extends ue{constructor(Re,fe,Ee){let $e;if(super(),(0,d.m)(Re)||!Re)$e={next:Re??void 0,error:fe??void 0,complete:Ee??void 0};else{let oe;this&&L.config.useDeprecatedNextContext?(oe=Object.create(Re),oe.unsubscribe=()=>this.unsubscribe(),$e={next:Re.next&&Oe(Re.next,oe),error:Re.error&&Oe(Re.error,oe),complete:Re.complete&&Oe(Re.complete,oe)}):$e=Re}this.destination=new ot($e)}}function st(ce){L.config.useDeprecatedSynchronousErrorHandling?(0,J.O)(ce):(0,ae.h)(ce)}function Et(ce,Re){const{onStoppedNotification:fe}=L.config;fe&&K.z.setTimeout(()=>fe(ce,Re))}const Ct={closed:!0,next:le.Z,error:function Ye(ce){throw ce},complete:le.Z}},7394:(Tt,Pe,z)=>{"use strict";z.d(Pe,{Lc:()=>pe,w0:()=>le,Nn:()=>Me});var d=z(4674);const L=(0,z(2306).d)(xe=>function(J){xe(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((ue,Ge)=>`${Ge+1}) ${ue.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J});var ae=z(9039);class le{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:J}=this;if(J)if(this._parentage=null,Array.isArray(J))for(const Oe of J)Oe.remove(this);else J.remove(this);const{initialTeardown:ue}=this;if((0,d.m)(ue))try{ue()}catch(Oe){K=Oe instanceof L?Oe.errors:[Oe]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Oe of Ge)try{Ue(Oe)}catch(ot){K=K??[],ot instanceof L?K=[...K,...ot.errors]:K.push(ot)}}if(K)throw new L(K)}}add(K){var J;if(K&&K!==this)if(this.closed)Ue(K);else{if(K instanceof le){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(J=this._finalizers)&&void 0!==J?J:[]).push(K)}}_hasParent(K){const{_parentage:J}=this;return J===K||Array.isArray(J)&&J.includes(K)}_addParent(K){const{_parentage:J}=this;this._parentage=Array.isArray(J)?(J.push(K),J):J?[J,K]:K}_removeParent(K){const{_parentage:J}=this;J===K?this._parentage=null:Array.isArray(J)&&(0,ae.P)(J,K)}remove(K){const{_finalizers:J}=this;J&&(0,ae.P)(J,K),K instanceof le&&K._removeParent(this)}}le.EMPTY=(()=>{const xe=new le;return xe.closed=!0,xe})();const pe=le.EMPTY;function Me(xe){return xe instanceof le||xe&&"closed"in xe&&(0,d.m)(xe.remove)&&(0,d.m)(xe.add)&&(0,d.m)(xe.unsubscribe)}function Ue(xe){(0,d.m)(xe)?xe():xe.unsubscribe()}},2653:(Tt,Pe,z)=>{"use strict";z.d(Pe,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(Tt,Pe,z)=>{"use strict";z.d(Pe,{E:()=>q});const q=new(z(5592).y)(le=>le.complete())},2459:(Tt,Pe,z)=>{"use strict";z.d(Pe,{D:()=>Re});var d=z(4829),q=z(3093),L=z(5137),pe=z(5592),Ue=z(4971),xe=z(4674),K=z(7103);function ue(fe,Ee){if(!fe)throw new Error("Iterable cannot be null");return new pe.y($e=>{(0,K.f)($e,Ee,()=>{const oe=fe[Symbol.asyncIterator]();(0,K.f)($e,Ee,()=>{oe.next().then(ht=>{ht.done?$e.complete():$e.next(ht.value)})},0,!0)})})}var Ge=z(8382),Oe=z(4026),ot=z(4266),Ne=z(3664),st=z(5726),Ye=z(9853),Et=z(541);function Re(fe,Ee){return Ee?function ce(fe,Ee){if(null!=fe){if((0,Ge.c)(fe))return function ae(fe,Ee){return(0,d.Xf)(fe).pipe((0,L.R)(Ee),(0,q.Q)(Ee))}(fe,Ee);if((0,ot.z)(fe))return function Me(fe,Ee){return new pe.y($e=>{let oe=0;return Ee.schedule(function(){oe===fe.length?$e.complete():($e.next(fe[oe++]),$e.closed||this.schedule())})})}(fe,Ee);if((0,Oe.t)(fe))return function le(fe,Ee){return(0,d.Xf)(fe).pipe((0,L.R)(Ee),(0,q.Q)(Ee))}(fe,Ee);if((0,st.D)(fe))return ue(fe,Ee);if((0,Ne.T)(fe))return function J(fe,Ee){return new pe.y($e=>{let oe;return(0,K.f)($e,Ee,()=>{oe=fe[Ue.h](),(0,K.f)($e,Ee,()=>{let ht,Xe;try{({value:ht,done:Xe}=oe.next())}catch(mn){return void $e.error(mn)}Xe?$e.complete():$e.next(ht)},0,!0)}),()=>(0,xe.m)(oe?.return)&&oe.return()})}(fe,Ee);if((0,Et.L)(fe))return function Ct(fe,Ee){return ue((0,Et.Q)(fe),Ee)}(fe,Ee)}throw(0,Ye.z)(fe)}(fe,Ee):(0,d.Xf)(fe)}},4829:(Tt,Pe,z)=>{"use strict";z.d(Pe,{Xf:()=>Ge});var d=z(7582),q=z(4266),L=z(4026),ae=z(5592),le=z(8382),pe=z(5726),Me=z(9853),Ue=z(3664),xe=z(541),K=z(4674),J=z(3894),ue=z(4850);function Ge(ce){if(ce instanceof ae.y)return ce;if(null!=ce){if((0,le.c)(ce))return function Oe(ce){return new ae.y(Re=>{const fe=ce[ue.L]();if((0,K.m)(fe.subscribe))return fe.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,q.z)(ce))return function ot(ce){return new ae.y(Re=>{for(let fe=0;fe<ce.length&&!Re.closed;fe++)Re.next(ce[fe]);Re.complete()})}(ce);if((0,L.t)(ce))return function Ne(ce){return new ae.y(Re=>{ce.then(fe=>{Re.closed||(Re.next(fe),Re.complete())},fe=>Re.error(fe)).then(null,J.h)})}(ce);if((0,pe.D)(ce))return Ye(ce);if((0,Ue.T)(ce))return function st(ce){return new ae.y(Re=>{for(const fe of ce)if(Re.next(fe),Re.closed)return;Re.complete()})}(ce);if((0,xe.L)(ce))return function Et(ce){return Ye((0,xe.Q)(ce))}(ce)}throw(0,Me.z)(ce)}function Ye(ce){return new ae.y(Re=>{(function Ct(ce,Re){var fe,Ee,$e,oe;return(0,d.mG)(this,void 0,void 0,function*(){try{for(fe=(0,d.KL)(ce);!(Ee=yield fe.next()).done;)if(Re.next(Ee.value),Re.closed)return}catch(ht){$e={error:ht}}finally{try{Ee&&!Ee.done&&(oe=fe.return)&&(yield oe.call(fe))}finally{if($e)throw $e.error}}Re.complete()})})(ce,Re).catch(fe=>Re.error(fe))})}},3019:(Tt,Pe,z)=>{"use strict";z.d(Pe,{T:()=>pe});var d=z(7537),q=z(4829),L=z(6232),ae=z(9940),le=z(2459);function pe(...Me){const Ue=(0,ae.yG)(Me),xe=(0,ae._6)(Me,1/0),K=Me;return K.length?1===K.length?(0,q.Xf)(K[0]):(0,d.J)(xe)((0,le.D)(K,Ue)):L.E}},2096:(Tt,Pe,z)=>{"use strict";z.d(Pe,{of:()=>L});var d=z(9940),q=z(2459);function L(...ae){const le=(0,d.yG)(ae);return(0,q.D)(ae,le)}},8251:(Tt,Pe,z)=>{"use strict";z.d(Pe,{x:()=>q});var d=z(305);function q(ae,le,pe,Me,Ue){return new L(ae,le,pe,Me,Ue)}class L extends d.Lv{constructor(le,pe,Me,Ue,xe,K){super(le),this.onFinalize=xe,this.shouldUnsubscribe=K,this._next=pe?function(J){try{pe(J)}catch(ue){le.error(ue)}}:super._next,this._error=Ue?function(J){try{Ue(J)}catch(ue){le.error(ue)}finally{this.unsubscribe()}}:super._error,this._complete=Me?function(){try{Me()}catch(J){le.error(J)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},3997:(Tt,Pe,z)=>{"use strict";z.d(Pe,{x:()=>ae});var d=z(2737),q=z(9360),L=z(8251);function ae(pe,Me=d.y){return pe=pe??le,(0,q.e)((Ue,xe)=>{let K,J=!0;Ue.subscribe((0,L.x)(xe,ue=>{const Ge=Me(ue);(J||!pe(K,Ge))&&(J=!1,K=Ge,xe.next(ue))}))})}function le(pe,Me){return pe===Me}},7398:(Tt,Pe,z)=>{"use strict";z.d(Pe,{U:()=>L});var d=z(9360),q=z(8251);function L(ae,le){return(0,d.e)((pe,Me)=>{let Ue=0;pe.subscribe((0,q.x)(Me,xe=>{Me.next(ae.call(le,xe,Ue++))}))})}},7537:(Tt,Pe,z)=>{"use strict";z.d(Pe,{J:()=>L});var d=z(1631),q=z(2737);function L(ae=1/0){return(0,d.z)(q.y,ae)}},1631:(Tt,Pe,z)=>{"use strict";z.d(Pe,{z:()=>Ue});var d=z(7398),q=z(4829),L=z(9360),ae=z(7103),le=z(8251),Me=z(4674);function Ue(xe,K,J=1/0){return(0,Me.m)(K)?Ue((ue,Ge)=>(0,d.U)((Oe,ot)=>K(ue,Oe,Ge,ot))((0,q.Xf)(xe(ue,Ge))),J):("number"==typeof K&&(J=K),(0,L.e)((ue,Ge)=>function pe(xe,K,J,ue,Ge,Oe,ot,Ne){const st=[];let Ye=0,Et=0,Ct=!1;const ce=()=>{Ct&&!st.length&&!Ye&&K.complete()},Re=Ee=>Ye<ue?fe(Ee):st.push(Ee),fe=Ee=>{Oe&&K.next(Ee),Ye++;let $e=!1;(0,q.Xf)(J(Ee,Et++)).subscribe((0,le.x)(K,oe=>{Ge?.(oe),Oe?Re(oe):K.next(oe)},()=>{$e=!0},void 0,()=>{if($e)try{for(Ye--;st.length&&Ye<ue;){const oe=st.shift();ot?(0,ae.f)(K,ot,()=>fe(oe)):fe(oe)}ce()}catch(oe){K.error(oe)}}))};return xe.subscribe((0,le.x)(K,Re,()=>{Ct=!0,ce()})),()=>{Ne?.()}}(ue,Ge,xe,J)))}},3093:(Tt,Pe,z)=>{"use strict";z.d(Pe,{Q:()=>ae});var d=z(7103),q=z(9360),L=z(8251);function ae(le,pe=0){return(0,q.e)((Me,Ue)=>{Me.subscribe((0,L.x)(Ue,xe=>(0,d.f)(Ue,le,()=>Ue.next(xe),pe),()=>(0,d.f)(Ue,le,()=>Ue.complete(),pe),xe=>(0,d.f)(Ue,le,()=>Ue.error(xe),pe)))})}},3020:(Tt,Pe,z)=>{"use strict";z.d(Pe,{B:()=>le});var d=z(4829),q=z(8645),L=z(305),ae=z(9360);function le(Me={}){const{connector:Ue=(()=>new q.x),resetOnError:xe=!0,resetOnComplete:K=!0,resetOnRefCountZero:J=!0}=Me;return ue=>{let Ge,Oe,ot,Ne=0,st=!1,Ye=!1;const Et=()=>{Oe?.unsubscribe(),Oe=void 0},Ct=()=>{Et(),Ge=ot=void 0,st=Ye=!1},ce=()=>{const Re=Ge;Ct(),Re?.unsubscribe()};return(0,ae.e)((Re,fe)=>{Ne++,!Ye&&!st&&Et();const Ee=ot=ot??Ue();fe.add(()=>{Ne--,0===Ne&&!Ye&&!st&&(Oe=pe(ce,J))}),Ee.subscribe(fe),!Ge&&Ne>0&&(Ge=new L.Hp({next:$e=>Ee.next($e),error:$e=>{Ye=!0,Et(),Oe=pe(Ct,xe,$e),Ee.error($e)},complete:()=>{st=!0,Et(),Oe=pe(Ct,K),Ee.complete()}}),(0,d.Xf)(Re).subscribe(Ge))})(ue)}}function pe(Me,Ue,...xe){if(!0===Ue)return void Me();if(!1===Ue)return;const K=new L.Hp({next:()=>{K.unsubscribe(),Me()}});return(0,d.Xf)(Ue(...xe)).subscribe(K)}},5137:(Tt,Pe,z)=>{"use strict";z.d(Pe,{R:()=>q});var d=z(9360);function q(L,ae=0){return(0,d.e)((le,pe)=>{pe.add(L.schedule(()=>le.subscribe(pe),ae))})}},4664:(Tt,Pe,z)=>{"use strict";z.d(Pe,{w:()=>ae});var d=z(4829),q=z(9360),L=z(8251);function ae(le,pe){return(0,q.e)((Me,Ue)=>{let xe=null,K=0,J=!1;const ue=()=>J&&!xe&&Ue.complete();Me.subscribe((0,L.x)(Ue,Ge=>{xe?.unsubscribe();let Oe=0;const ot=K++;(0,d.Xf)(le(Ge,ot)).subscribe(xe=(0,L.x)(Ue,Ne=>Ue.next(pe?pe(Ge,Ne,ot,Oe++):Ne),()=>{xe=null,ue()}))},()=>{J=!0,ue()}))})}},9397:(Tt,Pe,z)=>{"use strict";z.d(Pe,{b:()=>le});var d=z(4674),q=z(9360),L=z(8251),ae=z(2737);function le(pe,Me,Ue){const xe=(0,d.m)(pe)||Me||Ue?{next:pe,error:Me,complete:Ue}:pe;return xe?(0,q.e)((K,J)=>{var ue;null===(ue=xe.subscribe)||void 0===ue||ue.call(xe);let Ge=!0;K.subscribe((0,L.x)(J,Oe=>{var ot;null===(ot=xe.next)||void 0===ot||ot.call(xe,Oe),J.next(Oe)},()=>{var Oe;Ge=!1,null===(Oe=xe.complete)||void 0===Oe||Oe.call(xe),J.complete()},Oe=>{var ot;Ge=!1,null===(ot=xe.error)||void 0===ot||ot.call(xe,Oe),J.error(Oe)},()=>{var Oe,ot;Ge&&(null===(Oe=xe.unsubscribe)||void 0===Oe||Oe.call(xe)),null===(ot=xe.finalize)||void 0===ot||ot.call(xe)}))}):ae.y}},1954:(Tt,Pe,z)=>{"use strict";z.d(Pe,{o:()=>le});var d=z(7394);class q extends d.w0{constructor(Me,Ue){super()}schedule(Me,Ue=0){return this}}const L={setInterval(pe,Me,...Ue){const{delegate:xe}=L;return xe?.setInterval?xe.setInterval(pe,Me,...Ue):setInterval(pe,Me,...Ue)},clearInterval(pe){const{delegate:Me}=L;return(Me?.clearInterval||clearInterval)(pe)},delegate:void 0};var ae=z(9039);class le extends q{constructor(Me,Ue){super(Me,Ue),this.scheduler=Me,this.work=Ue,this.pending=!1}schedule(Me,Ue=0){var xe;if(this.closed)return this;this.state=Me;const K=this.id,J=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(J,K,Ue)),this.pending=!0,this.delay=Ue,this.id=null!==(xe=this.id)&&void 0!==xe?xe:this.requestAsyncId(J,this.id,Ue),this}requestAsyncId(Me,Ue,xe=0){return L.setInterval(Me.flush.bind(Me,this),xe)}recycleAsyncId(Me,Ue,xe=0){if(null!=xe&&this.delay===xe&&!1===this.pending)return Ue;null!=Ue&&L.clearInterval(Ue)}execute(Me,Ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const xe=this._execute(Me,Ue);if(xe)return xe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Me,Ue){let K,xe=!1;try{this.work(Me)}catch(J){xe=!0,K=J||new Error("Scheduled action threw falsy error")}if(xe)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:Me,scheduler:Ue}=this,{actions:xe}=Ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(xe,this),null!=Me&&(this.id=this.recycleAsyncId(Ue,Me,null)),this.delay=null,super.unsubscribe()}}}},2631:(Tt,Pe,z)=>{"use strict";z.d(Pe,{v:()=>L});var d=z(4552);class q{constructor(le,pe=q.now){this.schedulerActionCtor=le,this.now=pe}schedule(le,pe=0,Me){return new this.schedulerActionCtor(this,le).schedule(Me,pe)}}q.now=d.l.now;class L extends q{constructor(le,pe=q.now){super(le,pe),this.actions=[],this._active=!1}flush(le){const{actions:pe}=this;if(this._active)return void pe.push(le);let Me;this._active=!0;do{if(Me=le.execute(le.state,le.delay))break}while(le=pe.shift());if(this._active=!1,Me){for(;le=pe.shift();)le.unsubscribe();throw Me}}}},6321:(Tt,Pe,z)=>{"use strict";z.d(Pe,{P:()=>ae,z:()=>L});var d=z(1954);const L=new(z(2631).v)(d.o),ae=L},4552:(Tt,Pe,z)=>{"use strict";z.d(Pe,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},7599:(Tt,Pe,z)=>{"use strict";z.d(Pe,{z:()=>d});const d={setTimeout(q,L,...ae){const{delegate:le}=d;return le?.setTimeout?le.setTimeout(q,L,...ae):setTimeout(q,L,...ae)},clearTimeout(q){const{delegate:L}=d;return(L?.clearTimeout||clearTimeout)(q)},delegate:void 0}},4971:(Tt,Pe,z)=>{"use strict";z.d(Pe,{h:()=>q});const q=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Tt,Pe,z)=>{"use strict";z.d(Pe,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(Tt,Pe,z)=>{"use strict";z.d(Pe,{_6:()=>pe,jO:()=>ae,yG:()=>le});var d=z(4674),q=z(671);function L(Me){return Me[Me.length-1]}function ae(Me){return(0,d.m)(L(Me))?Me.pop():void 0}function le(Me){return(0,q.K)(L(Me))?Me.pop():void 0}function pe(Me,Ue){return"number"==typeof L(Me)?Me.pop():Ue}},9039:(Tt,Pe,z)=>{"use strict";function d(q,L){if(q){const ae=q.indexOf(L);0<=ae&&q.splice(ae,1)}}z.d(Pe,{P:()=>d})},2306:(Tt,Pe,z)=>{"use strict";function d(q){const ae=q(le=>{Error.call(le),le.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}z.d(Pe,{d:()=>d})},1441:(Tt,Pe,z)=>{"use strict";z.d(Pe,{O:()=>ae,x:()=>L});var d=z(2653);let q=null;function L(le){if(d.config.useDeprecatedSynchronousErrorHandling){const pe=!q;if(pe&&(q={errorThrown:!1,error:null}),le(),pe){const{errorThrown:Me,error:Ue}=q;if(q=null,Me)throw Ue}}else le()}function ae(le){d.config.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=le)}},7103:(Tt,Pe,z)=>{"use strict";function d(q,L,ae,le=0,pe=!1){const Me=L.schedule(function(){ae(),pe?q.add(this.schedule(null,le)):this.unsubscribe()},le);if(q.add(Me),!pe)return Me}z.d(Pe,{f:()=>d})},2737:(Tt,Pe,z)=>{"use strict";function d(q){return q}z.d(Pe,{y:()=>d})},4266:(Tt,Pe,z)=>{"use strict";z.d(Pe,{z:()=>d});const d=q=>q&&"number"==typeof q.length&&"function"!=typeof q},5726:(Tt,Pe,z)=>{"use strict";z.d(Pe,{D:()=>q});var d=z(4674);function q(L){return Symbol.asyncIterator&&(0,d.m)(L?.[Symbol.asyncIterator])}},4674:(Tt,Pe,z)=>{"use strict";function d(q){return"function"==typeof q}z.d(Pe,{m:()=>d})},8382:(Tt,Pe,z)=>{"use strict";z.d(Pe,{c:()=>L});var d=z(4850),q=z(4674);function L(ae){return(0,q.m)(ae[d.L])}},3664:(Tt,Pe,z)=>{"use strict";z.d(Pe,{T:()=>L});var d=z(4971),q=z(4674);function L(ae){return(0,q.m)(ae?.[d.h])}},4026:(Tt,Pe,z)=>{"use strict";z.d(Pe,{t:()=>q});var d=z(4674);function q(L){return(0,d.m)(L?.then)}},541:(Tt,Pe,z)=>{"use strict";z.d(Pe,{L:()=>ae,Q:()=>L});var d=z(7582),q=z(4674);function L(le){return(0,d.FC)(this,arguments,function*(){const Me=le.getReader();try{for(;;){const{value:Ue,done:xe}=yield(0,d.qq)(Me.read());if(xe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Ue)}}finally{Me.releaseLock()}})}function ae(le){return(0,q.m)(le?.getReader)}},671:(Tt,Pe,z)=>{"use strict";z.d(Pe,{K:()=>q});var d=z(4674);function q(L){return L&&(0,d.m)(L.schedule)}},9360:(Tt,Pe,z)=>{"use strict";z.d(Pe,{A:()=>q,e:()=>L});var d=z(4674);function q(ae){return(0,d.m)(ae?.lift)}function L(ae){return le=>{if(q(le))return le.lift(function(pe){try{return ae(pe,this)}catch(Me){this.error(Me)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(Tt,Pe,z)=>{"use strict";function d(){}z.d(Pe,{Z:()=>d})},8407:(Tt,Pe,z)=>{"use strict";z.d(Pe,{U:()=>L,z:()=>q});var d=z(2737);function q(...ae){return L(ae)}function L(ae){return 0===ae.length?d.y:1===ae.length?ae[0]:function(pe){return ae.reduce((Me,Ue)=>Ue(Me),pe)}}},3894:(Tt,Pe,z)=>{"use strict";z.d(Pe,{h:()=>L});var d=z(2653),q=z(7599);function L(ae){q.z.setTimeout(()=>{const{onUnhandledError:le}=d.config;if(!le)throw ae;le(ae)})}},9853:(Tt,Pe,z)=>{"use strict";function d(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}z.d(Pe,{z:()=>d})},5879:(Tt,Pe,z)=>{"use strict";z.d(Pe,{$8M:()=>pc,$WT:()=>Q,$Z:()=>WD,AFp:()=>Kp,ALo:()=>Kg,AaK:()=>ue,AsE:()=>wv,BQk:()=>pv,CHM:()=>Pu,CRH:()=>Kv,DdM:()=>Mx,Dn7:()=>Mm,EJc:()=>TS,EiD:()=>yD,EpF:()=>Tg,F$t:()=>PI,F4k:()=>gv,FYo:()=>rg,FiY:()=>Cs,Gf:()=>ai,GfV:()=>UD,GkF:()=>Bw,Gpc:()=>ot,HDt:()=>Zx,Hsn:()=>OI,Ikx:()=>Ul,JOm:()=>ma,JVY:()=>B0,JZr:()=>Ct,KtG:()=>nd,L6k:()=>V0,LAX:()=>Pk,LFG:()=>qn,LSH:()=>wy,Lbi:()=>qf,Lck:()=>Ch,MAs:()=>Cg,MMx:()=>VT,NdJ:()=>_v,O4$:()=>dd,Ojb:()=>Is,OlP:()=>Ln,Oqu:()=>Jw,P3R:()=>DD,PXZ:()=>XR,Q6J:()=>Nl,QGY:()=>_h,QbO:()=>Yk,Qsj:()=>FD,R0b:()=>Ai,RDi:()=>Wp,Rgc:()=>km,SBq:()=>ch,Sil:()=>Kx,Suo:()=>hS,TTD:()=>Qc,TgZ:()=>Fl,Udp:()=>Zw,VKq:()=>Th,VuI:()=>vE,W1O:()=>jx,WFA:()=>yv,WLB:()=>WT,X6Q:()=>Fc,XFs:()=>ut,Xpm:()=>Jo,Xq5:()=>am,Xts:()=>$f,Y36:()=>im,YKP:()=>Tm,YNc:()=>AI,Yjl:()=>cu,Yz7:()=>Wt,Z0I:()=>Gn,ZZ4:()=>h_,_Bn:()=>Dx,_UZ:()=>mv,_Vd:()=>ig,_c5:()=>aP,_uU:()=>Xw,aQg:()=>f_,c2e:()=>IS,cJS:()=>ii,cg1:()=>vh,d8E:()=>ox,dDg:()=>YR,dqk:()=>hn,eBb:()=>H0,eFA:()=>US,eJc:()=>tb,ekj:()=>Kw,eoX:()=>OS,evT:()=>Jf,f3M:()=>_n,g9A:()=>ja,h0i:()=>Rc,hGG:()=>lP,hij:()=>bv,iGM:()=>Zv,ifc:()=>Nt,ip1:()=>DS,jDz:()=>Bl,kL8:()=>Ka,kcU:()=>bl,l5B:()=>kx,lG2:()=>fs,lcZ:()=>Vv,lqb:()=>Cc,lri:()=>RS,mCW:()=>Yp,n5z:()=>ha,n_E:()=>Jg,oAB:()=>Ca,oxw:()=>zw,pB0:()=>Ok,q3G:()=>ur,q4F:()=>og,qFp:()=>JS,qLn:()=>uh,qOj:()=>nv,qZA:()=>Dg,qzn:()=>rh,rWj:()=>PS,rg0:()=>Q_,sBO:()=>Wd,s_b:()=>$v,soG:()=>l_,tb:()=>iE,tp0:()=>Vs,uIk:()=>lv,vHH:()=>ce,vpe:()=>Vl,wAp:()=>Qt,xp6:()=>tm,ynx:()=>fm,z2F:()=>Ph,z3N:()=>xc,zSh:()=>Z0,zs3:()=>Nd});var d=z(8645),q=z(7394),L=z(5619),ae=z(5592),le=z(3019),pe=z(2096),Me=z(3020),Ue=z(4664),xe=z(3997);function K(a){for(let l in a)if(a[l]===K)return l;throw Error("Could not find renamed property on target object.")}function J(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ue(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ue).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function Ge(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const Oe=K({__forward_ref__:K});function ot(a){return a.__forward_ref__=ot,a.toString=function(){return ue(this())},a}function Ne(a){return st(a)?a():a}function st(a){return"function"==typeof a&&a.hasOwnProperty(Oe)&&a.__forward_ref__===ot}function Ye(a){return a&&!!a.\u0275providers}const Ct="https://g.co/ng/security#xss";class ce extends Error{constructor(l,u){super(function Re(a,l){return`NG0${Math.abs(a)}${l?": "+l:""}`}(l,u)),this.code=l}}function fe(a){return"string"==typeof a?a:null==a?"":String(a)}function Xe(a,l){throw new ce(-201,!1)}function pt(a,l){null==a&&function Rt(a,l,u,f){throw new Error(`ASSERTION ERROR: ${a}`+(null==f?"":` [Expected=> ${u} ${f} ${l} <=Actual]`))}(l,a,null,"!=")}function Wt(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function ii(a){return{providers:a.providers||[],imports:a.imports||[]}}function Zn(a){return or(a,Zi)||or(a,Ki)}function Gn(a){return null!==Zn(a)}function or(a,l){return a.hasOwnProperty(l)?a[l]:null}function Yi(a){return a&&(a.hasOwnProperty(li)||a.hasOwnProperty(Ei))?a[li]:null}const Zi=K({\u0275prov:K}),li=K({\u0275inj:K}),Ki=K({ngInjectableDef:K}),Ei=K({ngInjectorDef:K});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let At;function gn(a){const l=At;return At=a,l}function Ni(a,l,u){const f=Zn(a);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:u&ut.Optional?null:void 0!==l?l:void Xe(ue(a))}const hn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qi={},Kt="__NG_DI_FLAG__",ri="ngTempTokenPath",ko=/\n/gm,Kn="__source";let Wn;function Qn(a){const l=Wn;return Wn=a,l}function Di(a,l=ut.Default){if(void 0===Wn)throw new ce(-203,!1);return null===Wn?Ni(a,void 0,l):Wn.get(a,l&ut.Optional?null:void 0,l)}function qn(a,l=ut.Default){return(function Lt(){return At}()||Di)(Ne(a),l)}function _n(a,l=ut.Default){return qn(a,X(l))}function X(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function Z(a){const l=[];for(let u=0;u<a.length;u++){const f=Ne(a[u]);if(Array.isArray(f)){if(0===f.length)throw new ce(900,!1);let m,g=ut.Default;for(let b=0;b<f.length;b++){const E=f[b],T=$(E);"number"==typeof T?-1===T?m=E.token:g|=T:m=E}l.push(qn(m,g))}else l.push(qn(f))}return l}function V(a,l){return a[Kt]=l,a.prototype[Kt]=l,a}function $(a){return a[Kt]}function Te(a){return{toString:a}.toString()}var rt=(()=>((rt=rt||{})[rt.OnPush=0]="OnPush",rt[rt.Default=1]="Default",rt))(),Nt=(()=>{return(a=Nt||(Nt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Nt;var a})();const Pt={},Mt=[],$t=K({\u0275cmp:K}),Fn=K({\u0275dir:K}),Jt=K({\u0275pipe:K}),zi=K({\u0275mod:K}),Xi=K({\u0275fac:K}),Ce=K({__NG_ELEMENT_ID__:K}),he=K({__NG_ENV_ID__:K});function We(a,l,u){let f=a.length;for(;;){const m=a.indexOf(l,u);if(-1===m)return m;if(0===m||a.charCodeAt(m-1)<=32){const g=l.length;if(m+g===f||a.charCodeAt(m+g)<=32)return m}u=m+1}}function Dt(a,l,u){let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const g=u[f++],b=u[f++],E=u[f++];a.setAttribute(l,b,E,g)}else{const g=m,b=u[++f];en(g)?a.setProperty(l,g,b):a.setAttribute(l,g,b),f++}}return f}function Ht(a){return 3===a||4===a||6===a}function en(a){return 64===a.charCodeAt(0)}function yn(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let f=0;f<l.length;f++){const m=l[f];"number"==typeof m?u=m:0===u||Ji(a,u,m,null,-1===u||2===u?l[++f]:null)}}return a}function Ji(a,l,u,f,m){let g=0,b=a.length;if(-1===l)b=-1;else for(;g<a.length;){const E=a[g++];if("number"==typeof E){if(E===l){b=-1;break}if(E>l){b=g-1;break}}}for(;g<a.length;){const E=a[g];if("number"==typeof E)break;if(E===u){if(null===f)return void(null!==m&&(a[g+1]=m));if(f===a[g+1])return void(a[g+2]=m)}g++,null!==f&&g++,null!==m&&g++}-1!==b&&(a.splice(b,0,l),g=b+1),a.splice(g++,0,u),null!==f&&a.splice(g++,0,f),null!==m&&a.splice(g++,0,m)}const mi="ng-template";function mo(a,l,u){let f=0,m=!0;for(;f<a.length;){let g=a[f++];if("string"==typeof g&&m){const b=a[f++];if(u&&"class"===g&&-1!==We(b.toLowerCase(),l,0))return!0}else{if(1===g){for(;f<a.length&&"string"==typeof(g=a[f++]);)if(g.toLowerCase()===l)return!0;return!1}"number"==typeof g&&(m=!1)}}return!1}function ar(a){return 4===a.type&&a.value!==mi}function Ro(a,l,u){return l===(4!==a.type||u?a.value:mi)}function Qo(a,l,u){let f=4;const m=a.attrs||[],g=function Po(a){for(let l=0;l<a.length;l++)if(Ht(a[l]))return l;return a.length}(m);let b=!1;for(let E=0;E<l.length;E++){const T=l[E];if("number"!=typeof T){if(!b)if(4&f){if(f=2|1&f,""!==T&&!Ro(a,T,u)||""===T&&1===l.length){if(oi(f))return!1;b=!0}}else{const M=8&f?T:l[++E];if(8&f&&null!==a.attrs){if(!mo(a.attrs,M,u)){if(oi(f))return!1;b=!0}continue}const W=ro(8&f?"class":T,m,ar(a),u);if(-1===W){if(oi(f))return!1;b=!0;continue}if(""!==M){let ne;ne=W>g?"":m[W+1].toLowerCase();const de=8&f?ne:null;if(de&&-1!==We(de,M,0)||2&f&&M!==ne){if(oi(f))return!1;b=!0}}}}else{if(!b&&!oi(f)&&!oi(T))return!1;if(b&&oi(T))continue;b=!1,f=T|1&f}}return oi(f)||b}function oi(a){return 0==(1&a)}function ro(a,l,u,f){if(null===l)return-1;let m=0;if(f||!u){let g=!1;for(;m<l.length;){const b=l[m];if(b===a)return m;if(3===b||6===b)g=!0;else{if(1===b||2===b){let E=l[++m];for(;"string"==typeof E;)E=l[++m];continue}if(4===b)break;if(0===b){m+=4;continue}}m+=g?1:2}return-1}return function pi(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const f=a[u];if("number"==typeof f)return-1;if(f===l)return u;u++}return-1}(l,a)}function _r(a,l,u=!1){for(let f=0;f<l.length;f++)if(Qo(a,l[f],u))return!0;return!1}function Ql(a,l){e:for(let u=0;u<l.length;u++){const f=l[u];if(a.length===f.length){for(let m=0;m<a.length;m++)if(a[m]!==f[m])continue e;return!0}}return!1}function ci(a,l){return a?":not("+l.trim()+")":l}function Xl(a){let l=a[0],u=1,f=2,m="",g=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&f){const E=a[++u];m+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&f?m+="."+b:4&f&&(m+=" "+b);else""!==m&&!oi(b)&&(l+=ci(g,m),m=""),f=b,g=g||!oi(f);u++}return""!==m&&(l+=ci(g,m)),l}function Jo(a){return Te(()=>{const l=Ze(a),u={...l,decls:a.decls,vars:a.vars,template:a.template,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,onPush:a.changeDetection===rt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&a.dependencies||null,getStandaloneInjector:null,signals:a.signals??!1,data:a.data||{},encapsulation:a.encapsulation||Nt.Emulated,styles:a.styles||Mt,_:null,schemas:a.schemas||null,tView:null,id:""};yt(u);const f=a.dependencies;return u.directiveDefs=cn(f,!1),u.pipeDefs=cn(f,!0),u.id=function er(a){let l=0;const u=[a.selectors,a.ngContentSelectors,a.hostVars,a.hostAttrs,a.consts,a.vars,a.decls,a.encapsulation,a.standalone,a.signals,a.exportAs,JSON.stringify(a.inputs),JSON.stringify(a.outputs),Object.getOwnPropertyNames(a.type.prototype),!!a.contentQueries,!!a.viewQuery].join("|");for(const m of u)l=Math.imul(31,l)+m.charCodeAt(0)<<0;return l+=2147483648,"c"+l}(u),u})}function cl(a){return rn(a)||N(a)}function po(a){return null!==a}function Ca(a){return Te(()=>({type:a.type,bootstrap:a.bootstrap||Mt,declarations:a.declarations||Mt,imports:a.imports||Mt,exports:a.exports||Mt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Ls(a,l){if(null==a)return Pt;const u={};for(const f in a)if(a.hasOwnProperty(f)){let m=a[f],g=m;Array.isArray(m)&&(g=m[1],m=m[0]),u[m]=f,l&&(l[m]=g)}return u}function fs(a){return Te(()=>{const l=Ze(a);return yt(l),l})}function cu(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function rn(a){return a[$t]||null}function N(a){return a[Fn]||null}function H(a){return a[Jt]||null}function Q(a){const l=rn(a)||N(a)||H(a);return null!==l&&l.standalone}function me(a,l){const u=a[zi]||null;if(!u&&!0===l)throw new Error(`Type ${ue(a)} does not have '\u0275mod' property.`);return u}function Ze(a){const l={};return{type:a.type,providersResolver:null,factory:null,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:l,inputTransforms:null,inputConfig:a.inputs||Pt,exportAs:a.exportAs||null,standalone:!0===a.standalone,signals:!0===a.signals,selectors:a.selectors||Mt,viewQuery:a.viewQuery||null,features:a.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ls(a.inputs,l),outputs:Ls(a.outputs)}}function yt(a){a.features?.forEach(l=>l(a))}function cn(a,l){if(!a)return null;const u=l?H:cl;return()=>("function"==typeof a?a():a).map(f=>u(f)).filter(po)}const xn=0,at=1,on=2,Ii=3,Gr=4,Vc=5,Sr=6,Us=7,Xn=8,es=9,Da=10,jt=11,Jl=12,Hc=13,ea=14,_i=15,zc=16,Ia=17,oo=18,ul=19,jc=20,Ar=21,Wr=22,$c=23,ts=24,An=25,ms=1,Ta=2,go=7,hl=9,Lr=11;function Ur(a){return Array.isArray(a)&&"object"==typeof a[ms]}function Br(a){return Array.isArray(a)&&!0===a[ms]}function du(a){return 0!=(4&a.flags)}function ns(a){return a.componentOffset>-1}function ta(a){return 1==(1&a.flags)}function si(a){return!!a.template}function ml(a){return 0!=(512&a[on])}function na(a,l){return a.hasOwnProperty(Xi)?a[Xi]:null}let nc=hn.WeakRef??class tc{constructor(l){this.ref=l}deref(){return this.ref}},qc=0,Oo=null,Yc=!1;function Li(a){const l=Oo;return Oo=a,l}class _o{constructor(){this.id=qc++,this.ref=function bp(a){return new nc(a)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[l,u]of this.producers){const f=u.producerNode.deref();if(void 0!==f&&u.atTrackingVersion===this.trackingVersion){if(f.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(l),f?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const l=Yc;Yc=!0;try{for(const[u,f]of this.consumers){const m=f.consumerNode.deref();void 0!==m&&m.trackingVersion===f.atTrackingVersion?m.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),m?.producers.delete(this.id))}}finally{Yc=l}}producerAccessed(){if(Yc)throw new Error("");if(null===Oo)return;let l=Oo.producers.get(this.id);void 0===l?(l={consumerNode:Oo.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Oo.trackingVersion},Oo.producers.set(this.id,l),this.consumers.set(Oo.id,l)):(l.seenValueVersion=this.valueVersion,l.atTrackingVersion=Oo.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Oo?.consumerAllowSignalWrites}producerPollStatus(l){return this.valueVersion!==l||(this.onProducerUpdateValueVersion(),this.valueVersion!==l)}}let hf=null;function Q_(a){const l=Li(null);try{return a()}finally{Li(l)}}const ic=()=>{};class Ep extends _o{constructor(l,u,f){super(),this.watch=l,this.schedule=u,this.dirty=!1,this.cleanupFn=ic,this.registerOnCleanup=m=>{this.cleanupFn=m},this.consumerAllowSignalWrites=f}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const l=Li(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ic,this.watch(this.registerOnCleanup)}finally{Li(l)}}cleanup(){this.cleanupFn()}}class rc{constructor(l,u,f){this.previousValue=l,this.currentValue=u,this.firstChange=f}isFirstChange(){return this.firstChange}}function Qc(){return pl}function pl(a){return a.type.prototype.ngOnChanges&&(a.setInput=Eu),xu}function xu(){const a=Cu(this),l=a?.current;if(l){const u=a.previous;if(u===Pt)a.previous=l;else for(let f in l)u[f]=l[f];a.current=null,this.ngOnChanges(l)}}function Eu(a,l,u,f){const m=this.declaredInputs[u],g=Cu(a)||function mf(a,l){return a[Cp]=l}(a,{previous:Pt,current:null}),b=g.current||(g.current={}),E=g.previous,T=E[m];b[m]=new rc(T&&T.currentValue,l,E===Pt),a[f]=l}Qc.ngInherit=!0;const Cp="__ngSimpleChanges__";function Cu(a){return a[Cp]||null}const is=function(a,l,u){},Tu="svg";function Jn(a){for(;Array.isArray(a);)a=a[xn];return a}function gl(a,l){return Jn(l[a])}function Vr(a,l){return Jn(l[a.index])}function pf(a,l){return a.data[l]}function oa(a,l){return a[l]}function No(a,l){const u=l[a];return Ur(u)?u:u[xn]}function gs(a,l){return null==l?null:a[l]}function Au(a){a[Ia]=0}function Mu(a){1024&a[on]||(a[on]|=1024,yl(a,1))}function Jc(a){1024&a[on]&&(a[on]&=-1025,yl(a,-1))}function yl(a,l){let u=a[Ii];if(null===u)return;u[Vc]+=l;let f=u;for(u=u[Ii];null!==u&&(1===l&&1===f[Vc]||-1===l&&0===f[Vc]);)u[Vc]+=l,f=u,u=u[Ii]}const Yt={lFrame:Nu(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function oc(){return Yt.bindingsEnabled}function Lo(){return null!==Yt.skipHydrationRootTNode}function Ve(){return Yt.lFrame.lView}function Cn(){return Yt.lFrame.tView}function Pu(a){return Yt.lFrame.contextLView=a,a[Xn]}function nd(a){return Yt.lFrame.contextLView=null,a}function lr(){let a=Ap();for(;null!==a&&64===a.type;)a=a.parent;return a}function Ap(){return Yt.lFrame.currentTNode}function qr(a,l){const u=Yt.lFrame;u.currentTNode=a,u.isParent=l}function Mp(){return Yt.lFrame.isParent}function Ui(){Yt.lFrame.isParent=!1}function Mr(){const a=Yt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function yi(){return Yt.lFrame.bindingIndex++}function ys(a){const l=Yt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function ac(a,l){const u=Yt.lFrame;u.bindingIndex=u.bindingRootIndex=a,wf(l)}function wf(a){Yt.lFrame.currentDirectiveIndex=a}function lc(a){const l=Yt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function ad(){return Yt.lFrame.currentQueryIndex}function sa(a){Yt.lFrame.currentQueryIndex=a}function aa(a){const l=a[at];return 2===l.type?l.declTNode:1===l.type?a[Sr]:null}function vl(a,l,u){if(u&ut.SkipSelf){let m=l,g=a;for(;!(m=m.parent,null!==m||u&ut.Host||(m=aa(g),null===m||(g=g[ea],10&m.type))););if(null===m)return!1;l=m,a=g}const f=Yt.lFrame=cd();return f.currentTNode=l,f.lView=a,!0}function ld(a){const l=cd(),u=a[at];Yt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function cd(){const a=Yt.lFrame,l=null===a?null:a.child;return null===l?Nu(a):l}function Nu(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function J_(){const a=Yt.lFrame;return Yt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const xf=J_;function Ef(){const a=J_();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function vr(){return Yt.lFrame.selectedIndex}function vs(a){Yt.lFrame.selectedIndex=a}function ei(){const a=Yt.lFrame;return pf(a.tView,a.selectedIndex)}function dd(){Yt.lFrame.currentNamespace=Tu}function bl(){!function Fu(){Yt.lFrame.currentNamespace=null}()}let Uu=!0;function cc(){return Uu}function Ra(a){Uu=a}function ud(a,l){for(let u=l.directiveStart,f=l.directiveEnd;u<f;u++){const g=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:M,ngOnDestroy:O}=g;b&&(a.contentHooks??=[]).push(-u,b),E&&((a.contentHooks??=[]).push(u,E),(a.contentCheckHooks??=[]).push(u,E)),T&&(a.viewHooks??=[]).push(-u,T),M&&((a.viewHooks??=[]).push(u,M),(a.viewCheckHooks??=[]).push(u,M)),null!=O&&(a.destroyHooks??=[]).push(u,O)}}function dc(a,l,u){Vu(a,l,3,u)}function Bu(a,l,u,f){(3&a[on])===u&&Vu(a,l,u,f)}function hd(a,l){let u=a[on];(3&u)===l&&(u&=8191,u+=1,a[on]=u)}function Vu(a,l,u,f){const g=f??-1,b=l.length-1;let E=0;for(let T=void 0!==f?65535&a[Ia]:0;T<b;T++)if("number"==typeof l[T+1]){if(E=l[T],null!=f&&E>=f)break}else l[T]<0&&(a[Ia]+=65536),(E<g||-1==g)&&(sn(a,u,l,T),a[Ia]=(4294901760&a[Ia])+T+2),T++}function bs(a,l){is(4,a,l);const u=Li(null);try{l.call(a)}finally{Li(u),is(5,a,l)}}function sn(a,l,u,f){const m=u[f]<0,g=u[f+1],E=a[m?-u[f]:u[f]];m?a[on]>>13<a[Ia]>>16&&(3&a[on])===l&&(a[on]+=8192,bs(E,g)):bs(E,g)}const yo=-1;class la{constructor(l,u,f){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=f}}function zu(a){return a!==yo}function Uo(a){return 32767&a}function hc(a,l){let u=function Pp(a){return a>>16}(a),f=l;for(;u>0;)f=f[ea],u--;return f}let Pa=!0;function fc(a){const l=Pa;return Pa=a,l}const Vn=255,dn=5;let It=0;const Nn={};function rs(a,l){const u=ji(a,l);if(-1!==u)return u;const f=l[at];f.firstCreatePass&&(a.injectorIndex=l.length,da(f.data,a),da(l,null),da(f.blueprint,null));const m=gt(a,l),g=a.injectorIndex;if(zu(m)){const b=Uo(m),E=hc(m,l),T=E[at].data;for(let M=0;M<8;M++)l[g+M]=E[b+M]|T[b+M]}return l[g+8]=m,g}function da(a,l){a.push(0,0,0,0,0,0,0,0,l)}function ji(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function gt(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,f=null,m=l;for(;null!==m;){if(f=pd(m),null===f)return yo;if(u++,m=m[ea],-1!==f.injectorIndex)return f.injectorIndex|u<<16}return yo}function Sf(a,l,u){!function Hn(a,l,u){let f;"string"==typeof u?f=u.charCodeAt(0)||0:u.hasOwnProperty(Ce)&&(f=u[Ce]),null==f&&(f=u[Ce]=It++);const m=f&Vn;l.data[a+(m>>dn)]|=1<<m}(a,l,u)}function ua(a,l,u){if(u&ut.Optional||void 0!==a)return a;Xe()}function mc(a,l,u,f){if(u&ut.Optional&&void 0===f&&(f=null),!(u&(ut.Self|ut.Host))){const m=a[es],g=gn(void 0);try{return m?m.get(l,f,u&ut.Optional):Ni(l,f,u&ut.Optional)}finally{gn(g)}}return ua(f,0,u)}function ju(a,l,u,f=ut.Default,m){if(null!==a){if(2048&l[on]&&!(f&ut.Self)){const b=function Bo(a,l,u,f,m){let g=a,b=l;for(;null!==g&&null!==b&&2048&b[on]&&!(512&b[on]);){const E=md(g,b,u,f|ut.Self,Nn);if(E!==Nn)return E;let T=g.parent;if(!T){const M=b[jc];if(M){const O=M.get(u,Nn,f);if(O!==Nn)return O}T=pd(b),b=b[ea]}g=T}return m}(a,l,u,f,Nn);if(b!==Nn)return b}const g=md(a,l,u,f,Nn);if(g!==Nn)return g}return mc(l,u,f,m)}function md(a,l,u,f,m){const g=function os(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Ce)?a[Ce]:void 0;return"number"==typeof l?l>=0?l&Vn:Op:l}(u);if("function"==typeof g){if(!vl(l,a,f))return f&ut.Host?ua(m,0,f):mc(l,u,f,m);try{const b=g(f);if(null!=b||f&ut.Optional)return b;Xe()}finally{xf()}}else if("number"==typeof g){let b=null,E=ji(a,l),T=yo,M=f&ut.Host?l[_i][Sr]:null;for((-1===E||f&ut.SkipSelf)&&(T=-1===E?gt(a,l):l[E+8],T!==yo&&Oa(f,!1)?(b=l[at],E=Uo(T),l=hc(T,l)):E=-1);-1!==E;){const O=l[at];if(Hr(g,E,O.data)){const W=br(E,l,u,b,f,M);if(W!==Nn)return W}T=l[E+8],T!==yo&&Oa(f,l[at].data[E+8]===M)&&Hr(g,E,l)?(b=O,E=Uo(T),l=hc(T,l)):E=-1}}return m}function br(a,l,u,f,m,g){const b=l[at],E=b.data[a+8],O=di(E,b,u,null==f?ns(E)&&Pa:f!=b&&0!=(3&E.type),m&ut.Host&&g===E);return null!==O?Pn(l,b,O,E):Nn}function di(a,l,u,f,m){const g=a.providerIndexes,b=l.data,E=1048575&g,T=a.directiveStart,O=g>>20,ne=m?E+O:a.directiveEnd;for(let de=f?E:E+O;de<ne;de++){const Fe=b[de];if(de<T&&u===Fe||de>=T&&Fe.type===u)return de}if(m){const de=b[T];if(de&&si(de)&&de.type===u)return T}return null}function Pn(a,l,u,f){let m=a[u];const g=l.data;if(function Tf(a){return a instanceof la}(m)){const b=m;b.resolving&&function $e(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new ce(-200,`Circular dependency in DI detected for ${a}${u}`)}(function Ee(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():fe(a)}(g[u]));const E=fc(b.canSeeViewProviders);b.resolving=!0;const T=b.injectImpl?gn(b.injectImpl):null;vl(a,f,ut.Default);try{m=a[u]=b.factory(void 0,g,a,f),l.firstCreatePass&&u>=f.directiveStart&&function If(a,l,u){const{ngOnChanges:f,ngOnInit:m,ngDoCheck:g}=l.type.prototype;if(f){const b=pl(l);(u.preOrderHooks??=[]).push(a,b),(u.preOrderCheckHooks??=[]).push(a,b)}m&&(u.preOrderHooks??=[]).push(0-a,m),g&&((u.preOrderHooks??=[]).push(a,g),(u.preOrderCheckHooks??=[]).push(a,g))}(u,g[u],l)}finally{null!==T&&gn(T),fc(E),b.resolving=!1,xf()}}return m}function Hr(a,l,u){return!!(u[l+(a>>dn)]&1<<a)}function Oa(a,l){return!(a&ut.Self||a&ut.Host&&l)}class Na{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,f){return ju(this._tNode,this._lView,l,X(f),u)}}function Op(){return new Na(lr(),Ve())}function ha(a){return Te(()=>{const l=a.prototype.constructor,u=l[Xi]||ws(l),f=Object.prototype;let m=Object.getPrototypeOf(a.prototype).constructor;for(;m&&m!==f;){const g=m[Xi]||ws(m);if(g&&g!==u)return g;m=Object.getPrototypeOf(m)}return g=>new g})}function ws(a){return st(a)?()=>{const l=ws(Ne(a));return l&&l()}:na(a)}function pd(a){const l=a[at],u=l.type;return 2===u?l.declTNode:1===u?a[Sr]:null}function pc(a){return function ny(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const f=u.length;let m=0;for(;m<f;){const g=u[m];if(Ht(g))break;if(0===g)m+=2;else if("number"==typeof g)for(m++;m<f&&"string"==typeof u[m];)m++;else{if(g===l)return u[m+1];m+=2}}}return null}(lr(),a)}const vi="__parameters__";function xs(a,l,u){return Te(()=>{const f=function Yr(a){return function(...u){if(a){const f=a(...u);for(const m in f)this[m]=f[m]}}}(l);function m(...g){if(this instanceof m)return f.apply(this,g),this;const b=new m(...g);return E.annotation=b,E;function E(T,M,O){const W=T.hasOwnProperty(vi)?T[vi]:Object.defineProperty(T,vi,{value:[]})[vi];for(;W.length<=O;)W.push(null);return(W[O]=W[O]||[]).push(b),T}}return u&&(m.prototype=Object.create(u.prototype)),m.prototype.ngMetadataName=a,m.annotationCls=m,m})}function Fa(a,l){a.forEach(u=>Array.isArray(u)?Fa(u,l):l(u))}function Es(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function La(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Ua(a,l){const u=[];for(let f=0;f<a;f++)u.push(l);return u}function C(a,l,u){let f=k(a,l);return f>=0?a[1|f]=u:(f=~f,function Np(a,l,u,f){let m=a.length;if(m==l)a.push(u,f);else if(1===m)a.push(f,a[0]),a[0]=u;else{for(m--,a.push(a[m-1],a[m]);m>l;)a[m]=a[m-2],m--;a[l]=u,a[l+1]=f}}(a,f,l,u)),f}function S(a,l){const u=k(a,l);if(u>=0)return a[1|u]}function k(a,l){return function te(a,l,u){let f=0,m=a.length>>u;for(;m!==f;){const g=f+(m-f>>1),b=a[g<<u];if(l===b)return g<<u;b>l?m=g:f=g+1}return~(m<<u)}(a,l,1)}const Cs=V(xs("Optional"),8),Vs=V(xs("SkipSelf"),4);function y0(a){return 128==(128&a.flags)}var ma=(()=>((ma=ma||{})[ma.Important=1]="Important",ma[ma.DashCase=2]="DashCase",ma))();const RL=/^>|^->|<!--|-->|--!>|<!-$/g,PL=/(<|>)/,bk="\u200b$1\u200b";const w0=new Map;let YC=0;const C0="__ngContext__";function ss(a,l){Ur(l)?(a[C0]=l[ul],function Lf(a){w0.set(a[ul],a)}(l)):a[C0]=l}let Bp;function Vp(a,l){return Bp(a,l)}function Ku(a){const l=a[Ii];return Br(l)?l[Ii]:l}function JC(a){return eD(a[Jl])}function Uf(a){return eD(a[Gr])}function eD(a){for(;null!==a&&!Br(a);)a=a[Gr];return a}function Va(a,l,u,f,m){if(null!=f){let g,b=!1;Br(f)?g=f:Ur(f)&&(b=!0,f=f[xn]);const E=Jn(f);0===a&&null!==u?null==m?k0(l,u,E):Id(l,u,E,m||null,!0):1===a&&null!==u?Id(l,u,E,m||null,!0):2===a?function El(a,l,u){const f=$p(a,l);f&&function Ju(a,l,u,f){a.removeChild(l,u,f)}(a,f,l,u)}(l,E,b):3===a&&l.destroyNode(E),null!=g&&function lD(a,l,u,f,m){const g=u[go];g!==Jn(u)&&Va(l,a,f,g,m);for(let E=Lr;E<u.length;E++){const T=u[E];nh(T[at],T,a,l,f,g)}}(l,a,g,u,m)}}function zp(a,l){return a.createComment(function b0(a){return a.replace(RL,l=>l.replace(PL,bk))}(l))}function bc(a,l,u){return a.createElement(l,u)}function hy(a,l){const u=a[hl],f=u.indexOf(l);Jc(l),u.splice(f,1)}function fy(a,l){if(a.length<=Lr)return;const u=Lr+l,f=a[u];if(f){const m=f[zc];null!==m&&m!==a&&hy(m,f),l>0&&(a[u-1][Gr]=f[Gr]);const g=La(a,Lr+l);!function Dk(a,l){nh(a,l,l[jt],2,null,null),l[xn]=null,l[Sr]=null}(f[at],f);const b=g[oo];null!==b&&b.detachView(g[at]),f[Ii]=null,f[Gr]=null,f[on]&=-129}return f}function iD(a,l){if(!(256&l[on])){const u=l[jt];l[$c]?.destroy(),l[ts]?.destroy(),u.destroyNode&&nh(a,l,u,3,null,null),function A0(a){let l=a[Jl];if(!l)return M0(a[at],a);for(;l;){let u=null;if(Ur(l))u=l[Jl];else{const f=l[Lr];f&&(u=f)}if(!u){for(;l&&!l[Gr]&&l!==a;)Ur(l)&&M0(l[at],l),l=l[Ii];null===l&&(l=a),Ur(l)&&M0(l[at],l),u=l&&l[Gr]}l=u}}(l)}}function M0(a,l){if(!(256&l[on])){l[on]&=-129,l[on]|=256,function Qu(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let f=0;f<u.length;f+=2){const m=l[u[f]];if(!(m instanceof la)){const g=u[f+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const E=m[g[b]],T=g[b+1];is(4,E,T);try{T.call(E)}finally{is(5,E,T)}}else{is(4,m,g);try{g.call(m)}finally{is(5,m,g)}}}}}(a,l),function rD(a,l){const u=a.cleanup,f=l[Us];if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const b=u[g+3];b>=0?f[b]():f[-b].unsubscribe(),g+=2}else u[g].call(f[u[g+1]]);null!==f&&(l[Us]=null);const m=l[Ar];if(null!==m){l[Ar]=null;for(let g=0;g<m.length;g++)(0,m[g])()}}(a,l),1===l[at].type&&l[jt].destroy();const u=l[zc];if(null!==u&&Br(l[Ii])){u!==l[Ii]&&hy(u,l);const f=l[oo];null!==f&&f.detachView(a)}!function E0(a){w0.delete(a[ul])}(l)}}function jp(a,l,u){return function Xu(a,l,u){let f=l;for(;null!==f&&40&f.type;)f=(l=f).parent;if(null===f)return u[xn];{const{componentOffset:m}=f;if(m>-1){const{encapsulation:g}=a.data[f.directiveStart+m];if(g===Nt.None||g===Nt.Emulated)return null}return Vr(f,u)}}(a,l.parent,u)}function Id(a,l,u,f,m){a.insertBefore(l,u,f,m)}function k0(a,l,u){a.appendChild(l,u)}function Bf(a,l,u,f,m){null!==f?Id(a,l,u,f,m):k0(a,l,u)}function $p(a,l){return a.parentNode(l)}function Vf(a,l,u){return Ha(a,l,u)}let co,py,P0,qp,Ha=function my(a,l,u){return 40&a.type?Vr(a,u):null};function eh(a,l,u,f){const m=jp(a,f,l),g=l[jt],E=Vf(f.parent||l[Sr],f,l);if(null!=m)if(Array.isArray(u))for(let T=0;T<u.length;T++)Bf(g,m,u[T],E,!1);else Bf(g,m,u,E,!1);void 0!==co&&co(g,f,l,u,m)}function Gp(a,l){if(null!==l){const u=l.type;if(3&u)return Vr(l,a);if(4&u)return za(-1,a[l.index]);if(8&u){const f=l.child;if(null!==f)return Gp(a,f);{const m=a[l.index];return Br(m)?za(-1,m):Jn(m)}}if(32&u)return Vp(l,a)()||Jn(a[l.index]);{const f=wc(a,l);return null!==f?Array.isArray(f)?f[0]:Gp(Ku(a[_i]),f):Gp(a,l.next)}}return null}function wc(a,l){return null!==l?a[_i][Sr].projection[l.projection]:null}function za(a,l){const u=Lr+a+1;if(u<l.length){const f=l[u],m=f[at].firstChild;if(null!==m)return Gp(f,m)}return l[go]}function th(a,l,u,f,m,g,b){for(;null!=u;){const E=f[u.index],T=u.type;if(b&&0===l&&(E&&ss(Jn(E),f),u.flags|=2),32!=(32&u.flags))if(8&T)th(a,l,u.child,f,m,g,!1),Va(l,a,m,E,g);else if(32&T){const M=Vp(u,f);let O;for(;O=M();)Va(l,a,m,O,g);Va(l,a,m,E,g)}else 16&T?Zr(a,l,f,u,m,g):Va(l,a,m,E,g);u=b?u.projectionNext:u.next}}function nh(a,l,u,f,m,g){th(u,f,a.firstChild,l,m,g,!1)}function Zr(a,l,u,f,m,g){const b=u[_i],T=b[Sr].projection[f.projection];if(Array.isArray(T))for(let M=0;M<T.length;M++)Va(l,a,m,T[M],g);else{let M=T;const O=b[Ii];y0(f)&&(M.flags|=128),th(a,l,M,O,m,g,!0)}}function cD(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function dD(a,l,u){const{mergedAttrs:f,classes:m,styles:g}=u;null!==f&&Dt(a,l,f),null!==m&&cD(a,l,m),null!==g&&function Ak(a,l,u){a.setAttribute(l,"style",u)}(a,l,g)}function ih(a){return function R0(){if(void 0===py&&(py=null,hn.trustedTypes))try{py=hn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return py}()?.createHTML(a)||a}function Wp(a){P0=a}function F0(a){return function _y(){if(void 0===qp&&(qp=null,hn.trustedTypes))try{qp=hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return qp}()?.createScriptURL(a)||a}class Sd{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ct})`}}class uD extends Sd{getTypeName(){return"HTML"}}class L0 extends Sd{getTypeName(){return"Style"}}class hD extends Sd{getTypeName(){return"Script"}}class fD extends Sd{getTypeName(){return"URL"}}class U0 extends Sd{getTypeName(){return"ResourceURL"}}function xc(a){return a instanceof Sd?a.changingThisBreaksApplicationSecurity:a}function rh(a,l){const u=function Rk(a){return a instanceof Sd&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see ${Ct})`)}return u===l}function B0(a){return new uD(a)}function V0(a){return new L0(a)}function H0(a){return new hD(a)}function Pk(a){return new fD(a)}function Ok(a){return new U0(a)}class Nk{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(ih(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class Fk{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const u=this.inertDocument.createElement("template");return u.innerHTML=ih(l),u}}const mD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Yp(a){return(a=String(a)).match(mD)?a:"unsafe:"+a}function Cl(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function Zp(...a){const l={};for(const u of a)for(const f in u)u.hasOwnProperty(f)&&(l[f]=!0);return l}const pD=Cl("area,br,col,hr,img,wbr"),gD=Cl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_D=Cl("rp,rt"),j0=Zp(pD,Zp(gD,Cl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zp(_D,Cl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zp(_D,gD)),$0=Cl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yy=Zp($0,Cl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Cl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vk=Cl("script,style,template");class Hk{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,f=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?f=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,f&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let m=this.checkClobberedElement(u,u.nextSibling);if(m){u=m;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!j0.hasOwnProperty(u))return this.sanitizedSomething=!0,!Vk.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const f=l.attributes;for(let m=0;m<f.length;m++){const g=f.item(m),b=g.name,E=b.toLowerCase();if(!yy.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let T=g.value;$0[E]&&(T=Yp(T)),this.buf.push(" ",b,'="',G0(T),'"')}return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();j0.hasOwnProperty(u)&&!pD.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(G0(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const vy=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zf=/([^\#-~ |!])/g;function G0(a){return a.replace(/&/g,"&amp;").replace(vy,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(zf,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let by;function yD(a,l){let u=null;try{by=by||function z0(a){const l=new Fk(a);return function Lk(){try{return!!(new window.DOMParser).parseFromString(ih(""),"text/html")}catch{return!1}}()?new Nk(l):l}(a);let f=l?String(l):"";u=by.getInertBodyElement(f);let m=5,g=f;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,f=g,g=u.innerHTML,u=by.getInertBodyElement(f)}while(f!==g);return ih((new Hk).sanitizeChildren(W0(u)||u))}finally{if(u){const f=W0(u)||u;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function W0(a){return"content"in a&&function zk(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var ur=(()=>((ur=ur||{})[ur.NONE=0]="NONE",ur[ur.HTML=1]="HTML",ur[ur.STYLE=2]="STYLE",ur[ur.SCRIPT=3]="SCRIPT",ur[ur.URL=4]="URL",ur[ur.RESOURCE_URL=5]="RESOURCE_URL",ur))();function wy(a){const l=jf();return l?l.sanitize(ur.URL,a)||"":rh(a,"URL")?xc(a):Yp(fe(a))}function bD(a){const l=jf();if(l)return F0(l.sanitize(ur.RESOURCE_URL,a)||"");if(rh(a,"ResourceURL"))return F0(xc(a));throw new ce(904,!1)}function DD(a,l,u){return function CD(a,l){return"src"===l&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===l&&("base"===a||"link"===a)?bD:wy}(l,u)(a)}function jf(){const a=Ve();return a&&a[Da].sanitizer}class Ln{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Wt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const $f=new Ln("ENVIRONMENT_INITIALIZER"),q0=new Ln("INJECTOR",-1),ti=new Ln("INJECTOR_DEF_TYPES");class zn{get(l,u=Qi){if(u===Qi){const f=new Error(`NullInjectorError: No provider for ${ue(l)}!`);throw f.name="NullInjectorError",f}return u}}function Ad(...a){return{\u0275providers:xi(0,a),\u0275fromNgModule:!0}}function xi(a,...l){const u=[],f=new Set;let m;return Fa(l,g=>{const b=g;Y0(b,u,[],f)&&(m||=[],m.push(b))}),void 0!==m&&xy(m,u),u}function xy(a,l){for(let u=0;u<a.length;u++){const{providers:m}=a[u];Cy(m,g=>{l.push(g)})}}function Y0(a,l,u,f){if(!(a=Ne(a)))return!1;let m=null,g=Yi(a);const b=!g&&rn(a);if(g||b){if(b&&!b.standalone)return!1;m=a}else{const T=a.ngModule;if(g=Yi(T),!g)return!1;m=T}const E=f.has(m);if(b){if(E)return!1;if(f.add(m),b.dependencies){const T="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const M of T)Y0(M,l,u,f)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let M;f.add(m);try{Fa(g.imports,O=>{Y0(O,l,u,f)&&(M||=[],M.push(O))})}finally{}void 0!==M&&xy(M,l)}if(!E){const M=na(m)||(()=>new m);l.push({provide:m,useFactory:M,deps:Mt},{provide:ti,useValue:m,multi:!0},{provide:$f,useValue:()=>qn(m),multi:!0})}const T=g.providers;null==T||E||Cy(T,O=>{l.push(O)})}}return m!==a&&void 0!==a.providers}function Cy(a,l){for(let u of a)Ye(u)&&(u=u.\u0275providers),Array.isArray(u)?Cy(u,l):l(u)}const ir=K({provide:String,useValue:K});function En(a){return null!==a&&"object"==typeof a&&ir in a}function Ec(a){return"function"==typeof a}const Z0=new Ln("Set Injector scope."),Dy={},Wk={};let Iy;function Dl(){return void 0===Iy&&(Iy=new zn),Iy}class Cc{}class sh extends Cc{get destroyed(){return this._destroyed}constructor(l,u,f,m){super(),this.parent=u,this.source=f,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wf(l,b=>this.processProvider(b)),this.records.set(q0,Gf(void 0,this)),m.has("environment")&&this.records.set(Cc,Gf(void 0,this));const g=this.records.get(Z0);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(ti.multi,Mt,ut.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const l=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of l)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(l){return this.assertNotDestroyed(),this._onDestroyHooks.push(l),()=>this.removeOnDestroy(l)}runInContext(l){this.assertNotDestroyed();const u=Qn(this),f=gn(void 0);try{return l()}finally{Qn(u),gn(f)}}get(l,u=Qi,f=ut.Default){if(this.assertNotDestroyed(),l.hasOwnProperty(he))return l[he](this);f=X(f);const m=Qn(this),g=gn(void 0);try{if(!(f&ut.SkipSelf)){let E=this.records.get(l);if(void 0===E){const T=function kn(a){return"function"==typeof a||"object"==typeof a&&a instanceof Ln}(l)&&Zn(l);E=T&&this.injectableDefInScope(T)?Gf(K0(l),Dy):null,this.records.set(l,E)}if(null!=E)return this.hydrate(l,E)}return(f&ut.Self?Dl():this.parent).get(l,u=f&ut.Optional&&u===Qi?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[ri]=b[ri]||[]).unshift(ue(l)),m)throw b;return function F(a,l,u,f){const m=a[ri];throw l[Kn]&&m.unshift(l[Kn]),a.message=function re(a,l,u,f=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let m=ue(l);if(Array.isArray(l))m=l.map(ue).join(" -> ");else if("object"==typeof l){let g=[];for(let b in l)if(l.hasOwnProperty(b)){let E=l[b];g.push(b+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}m=`{${g.join(", ")}}`}return`${u}${f?"("+f+")":""}[${m}]: ${a.replace(ko,"\n  ")}`}("\n"+a.message,m,u,f),a.ngTokenPath=m,a[ri]=null,a}(b,l,"R3InjectorError",this.source)}throw b}finally{gn(g),Qn(m)}}resolveInjectorInitializers(){const l=Qn(this),u=gn(void 0);try{const f=this.get($f.multi,Mt,ut.Self);for(const m of f)m()}finally{Qn(l),gn(u)}}toString(){const l=[],u=this.records;for(const f of u.keys())l.push(ue(f));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(l){let u=Ec(l=Ne(l))?l:Ne(l&&l.provide);const f=function qk(a){return En(a)?Gf(void 0,a.useValue):Gf(SD(a),Dy)}(l);if(Ec(l)||!0!==l.multi)this.records.get(u);else{let m=this.records.get(u);m||(m=Gf(void 0,Dy,!0),m.factory=()=>Z(m.multi),this.records.set(u,m)),u=l,m.multi.push(l)}this.records.set(u,f)}hydrate(l,u){return u.value===Dy&&(u.value=Wk,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ah(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=Ne(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(l){const u=this._onDestroyHooks.indexOf(l);-1!==u&&this._onDestroyHooks.splice(u,1)}}function K0(a){const l=Zn(a),u=null!==l?l.factory:na(a);if(null!==u)return u;if(a instanceof Ln)throw new ce(204,!1);if(a instanceof Function)return function TD(a){const l=a.length;if(l>0)throw Ua(l,"?"),new ce(204,!1);const u=function gr(a){return a&&(a[Zi]||a[Ki])||null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new ce(204,!1)}function SD(a,l,u){let f;if(Ec(a)){const m=Ne(a);return na(m)||K0(m)}if(En(a))f=()=>Ne(a.useValue);else if(function ID(a){return!(!a||!a.useFactory)}(a))f=()=>a.useFactory(...Z(a.deps||[]));else if(function Vo(a){return!(!a||!a.useExisting)}(a))f=()=>qn(Ne(a.useExisting));else{const m=Ne(a&&(a.useClass||a.provide));if(!function AD(a){return!!a.deps}(a))return na(m)||K0(m);f=()=>new m(...Z(a.deps))}return f}function Gf(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function Wf(a,l){for(const u of a)Array.isArray(u)?Wf(u,l):u&&Ye(u)?Wf(u.\u0275providers,l):l(u)}const Kp=new Ln("AppId",{providedIn:"root",factory:()=>MD}),MD="ng",ja=new Ln("Platform Initializer"),qf=new Ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Yk=new Ln("AnimationModuleType"),Is=new Ln("CSP nonce",{providedIn:"root",factory:()=>function Td(){if(void 0!==P0)return P0;if(typeof document<"u")return document;throw new ce(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Sl=(a,l)=>null;function OD(a,l){return Sl(a,l)}class J0{}class Qf{}class Jk{resolveComponentFactory(l){throw function Xk(a){const l=Error(`No component factory found for ${ue(a)}.`);return l.ngComponent=a,l}(l)}}let ig=(()=>{class a{}return a.NULL=new Jk,a})();function ew(){return Xf(lr(),Ve())}function Xf(a,l){return new ch(Vr(a,l))}let ch=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=ew,a})();function e1(a){return a instanceof ch?a.nativeElement:a}class rg{}let FD=(()=>{class a{constructor(){this.destroyNode=null}}return a.__NG_ELEMENT_ID__=()=>function LD(){const a=Ve(),u=No(lr().index,a);return(Ur(u)?u:a)[jt]}(),a})(),Fy=(()=>{class a{}return a.\u0275prov=Wt({token:a,providedIn:"root",factory:()=>null}),a})();class UD{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const og=new UD("16.1.1"),kd={};function dh(a){for(;a;){a[on]|=64;const l=Ku(a);if(ml(a)&&!l)return a;a=l}return null}function tw(a){return a.ngOriginalError}class uh{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&tw(l);for(;u&&tw(u);)u=tw(u);return u||null}}const VD=new Ln("",{providedIn:"root",factory:()=>!1});function Jf(a){return a.ownerDocument}function Ho(a){return a instanceof Function?a():a}class lg extends _o{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(l){this._lView=l}onConsumerDependencyMayHaveChanged(){dh(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(l,u,f){const m=Li(this);this.trackingVersion++;try{l(u,f)}finally{Li(m)}}destroy(){this.trackingVersion++}}let Al=null;function Vy(){return Al??=new lg,Al}function zD(a,l){return a[l]??Vy()}function Si(a,l){const u=Vy();u.hasReadASignal&&(a[l]=Al,u.lView=a,Al=new lg)}const Zt={};function tm(a){Hy(Cn(),Ve(),vr()+a,!1)}function Hy(a,l,u,f){if(!f)if(3==(3&l[on])){const g=a.preOrderCheckHooks;null!==g&&dc(l,g,u)}else{const g=a.preOrderHooks;null!==g&&Bu(l,g,0,u)}vs(u)}function $D(a,l=null,u=null,f){const m=GD(a,l,u,f);return m.resolveInjectorInitializers(),m}function GD(a,l=null,u=null,f,m=new Set){const g=[u||Mt,Ad(a)];return f=f||("object"==typeof a?void 0:ue(a)),new sh(g,l||Dl(),f||null,m)}let Nd=(()=>{class a{static create(u,f){if(Array.isArray(u))return $D({name:""},f,u,"");{const m=u.name??"";return $D({name:m},u.parent,u.providers,m)}}}return a.THROW_IF_NOT_FOUND=Qi,a.NULL=new zn,a.\u0275prov=Wt({token:a,providedIn:"any",factory:()=>qn(q0)}),a.__NG_ELEMENT_ID__=-1,a})();function im(a,l=ut.Default){const u=Ve();return null===u?qn(a,l):ju(lr(),u,Ne(a),l)}function WD(){throw new Error("invalid")}function cg(a,l,u,f,m,g,b,E,T,M,O){const W=l.blueprint.slice();return W[xn]=m,W[on]=140|f,(null!==M||a&&2048&a[on])&&(W[on]|=2048),Au(W),W[Ii]=W[ea]=a,W[Xn]=u,W[Da]=b||a&&a[Da],W[jt]=E||a&&a[jt],W[es]=T||a&&a[es]||null,W[Sr]=g,W[ul]=function x0(){return YC++}(),W[Wr]=O,W[jc]=M,W[_i]=2==l.type?a[_i]:W,W}function rm(a,l,u,f,m){let g=a.data[l];if(null===g)g=function aw(a,l,u,f,m){const g=Ap(),b=Mp(),T=a.data[l]=function KD(a,l,u,f,m,g){let b=l?l.injectorIndex:-1,E=0;return Lo()&&(E|=128),{type:u,index:f,insertBeforeIndex:null,injectorIndex:b,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:m,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,u,l,f,m);return null===a.firstChild&&(a.firstChild=T),null!==g&&(b?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T,T.prev=g)),T}(a,l,u,f,m),function cr(){return Yt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=f,g.attrs=m;const b=function id(){const a=Yt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return qr(g,!0),g}function dg(a,l,u,f){if(0===u)return-1;const m=l.length;for(let g=0;g<u;g++)l.push(f),a.blueprint.push(f),a.data.push(null);return m}function YD(a,l,u,f,m){const g=zD(l,$c),b=vr(),E=2&f;try{if(vs(-1),E&&l.length>An&&Hy(a,l,An,!1),is(E?2:0,m),E)g.runInContext(u,f,m);else{const M=Li(null);try{u(f,m)}finally{Li(M)}}}finally{E&&null===l[$c]&&Si(l,$c),vs(b),is(E?3:1,m)}}function lw(a,l,u){if(du(l)){const f=Li(null);try{const g=l.directiveEnd;for(let b=l.directiveStart;b<g;b++){const E=a.data[b];E.contentQueries&&E.contentQueries(1,u[b],b)}}finally{Li(f)}}}function cw(a,l,u){oc()&&(function d1(a,l,u,f){const m=u.directiveStart,g=u.directiveEnd;ns(u)&&function rI(a,l,u){const f=Vr(l,a),m=$y(u);let b=16;u.signals?b=4096:u.onPush&&(b=64);const E=Ky(a,cg(a,m,null,b,f,l,null,a[Da].rendererFactory.createRenderer(f,u),null,null,null));a[l.index]=E}(l,u,a.data[m+u.componentOffset]),a.firstCreatePass||rs(u,l),ss(f,l);const b=u.initialInputs;for(let E=m;E<g;E++){const T=a.data[E],M=Pn(l,a,E,u);ss(M,l),null!==b&&oI(0,E-m,M,T,0,b),si(T)&&(No(u.index,l)[Xn]=Pn(l,a,E,u))}}(a,l,u,Vr(u,l)),64==(64&u.flags)&&nI(a,l,u))}function om(a,l,u=Vr){const f=l.localNames;if(null!==f){let m=l.index+1;for(let g=0;g<f.length;g+=2){const b=f[g+1],E=-1===b?u(l,a):a[b];a[m++]=E}}}function $y(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Gy(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts,a.id):l}function Gy(a,l,u,f,m,g,b,E,T,M,O){const W=An+f,ne=W+m,de=function Wy(a,l){const u=[];for(let f=0;f<l;f++)u.push(f<a?null:Zt);return u}(W,ne),Fe="function"==typeof M?M():M;return de[at]={type:a,blueprint:de,template:u,queries:null,viewQuery:E,declTNode:l,data:de.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:T,consts:Fe,incompleteFirstPass:!1,ssrId:O}}let uw=a=>null;function qy(a,l,u,f){for(let m in a)if(a.hasOwnProperty(m)){u=null===u?{}:u;const g=a[m];null===f?QD(u,l,m,g):f.hasOwnProperty(m)&&QD(u,l,f[m],g)}return u}function QD(a,l,u,f){a.hasOwnProperty(u)?a[u].push(l,f):a[u]=[l,f]}function Hs(a,l,u,f,m,g,b,E){const T=Vr(l,u);let O,M=l.inputs;!E&&null!=M&&(O=M[f])?(Qy(a,u,O,f,m),ns(l)&&function XD(a,l){const u=No(l,a);16&u[on]||(u[on]|=64)}(u,l.index)):3&l.type&&(f=function c1(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(f),m=null!=b?b(m,l.value||"",f):m,g.setProperty(T,f,m))}function Zy(a,l,u,f){if(oc()){const m=null===f?null:{"":-1},g=function h1(a,l){const u=a.directiveRegistry;let f=null,m=null;if(u)for(let g=0;g<u.length;g++){const b=u[g];if(_r(l,b.selectors,!1))if(f||(f=[]),si(b))if(null!==b.findHostDirectiveDefs){const E=[];m=m||new Map,b.findHostDirectiveDefs(b,E,m),f.unshift(...E,b),fw(a,l,E.length)}else f.unshift(b),fw(a,l,0);else m=m||new Map,b.findHostDirectiveDefs?.(b,f,m),f.push(b)}return null===f?null:[f,m]}(a,u);let b,E;null===g?b=E=null:[b,E]=g,null!==b&&eI(a,l,u,b,m,E),m&&function f1(a,l,u){if(l){const f=a.localNames=[];for(let m=0;m<l.length;m+=2){const g=u[l[m+1]];if(null==g)throw new ce(-301,!1);f.push(l[m],g)}}}(u,f,m)}u.mergedAttrs=yn(u.mergedAttrs,u.attrs)}function eI(a,l,u,f,m,g){for(let M=0;M<f.length;M++)Sf(rs(u,l),a,f[M].type);!function iI(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}(u,a.data.length,f.length);for(let M=0;M<f.length;M++){const O=f[M];O.providersResolver&&O.providersResolver(O)}let b=!1,E=!1,T=dg(a,l,f.length,null);for(let M=0;M<f.length;M++){const O=f[M];u.mergedAttrs=yn(u.mergedAttrs,O.hostAttrs),p1(a,u,l,T,O),m1(T,O,m),null!==O.contentQueries&&(u.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(u.flags|=64);const W=O.type.prototype;!b&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((a.preOrderHooks??=[]).push(u.index),b=!0),!E&&(W.ngOnChanges||W.ngDoCheck)&&((a.preOrderCheckHooks??=[]).push(u.index),E=!0),T++}!function l1(a,l,u){const m=l.directiveEnd,g=a.data,b=l.attrs,E=[];let T=null,M=null;for(let O=l.directiveStart;O<m;O++){const W=g[O],ne=u?u.get(W):null,Fe=ne?ne.outputs:null;T=qy(W.inputs,O,T,ne?ne.inputs:null),M=qy(W.outputs,O,M,Fe);const Ke=null===T||null===b||ar(l)?null:sI(T,O,b);E.push(Ke)}null!==T&&(T.hasOwnProperty("class")&&(l.flags|=8),T.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=E,l.inputs=T,l.outputs=M}(a,u,g)}function nI(a,l,u){const f=u.directiveStart,m=u.directiveEnd,g=u.index,b=function sd(){return Yt.lFrame.currentDirectiveIndex}();try{vs(g);for(let E=f;E<m;E++){const T=a.data[E],M=l[E];wf(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&u1(T,M)}}finally{vs(-1),wf(b)}}function u1(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function fw(a,l,u){l.componentOffset=u,(a.components??=[]).push(l.index)}function m1(a,l,u){if(u){if(l.exportAs)for(let f=0;f<l.exportAs.length;f++)u[l.exportAs[f]]=a;si(l)&&(u[""]=a)}}function p1(a,l,u,f,m){a.data[f]=m;const g=m.factory||(m.factory=na(m.type)),b=new la(g,si(m),im);a.blueprint[f]=b,u[f]=b,function tI(a,l,u,f,m){const g=m.hostBindings;if(g){let b=a.hostBindingOpCodes;null===b&&(b=a.hostBindingOpCodes=[]);const E=~l.index;(function hw(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(b)!=E&&b.push(E),b.push(u,f,g)}}(a,l,f,dg(a,u,m.hostVars,Zt),m)}function Ga(a,l,u,f,m,g){const b=Vr(a,l);!function mw(a,l,u,f,m,g,b){if(null==g)a.removeAttribute(l,m,u);else{const E=null==b?fe(g):b(g,f||"",m);a.setAttribute(l,m,E,u)}}(l[jt],b,g,a.value,u,f,m)}function oI(a,l,u,f,m,g){const b=g[l];if(null!==b)for(let E=0;E<b.length;)ug(f,u,b[E++],b[E++],b[E++])}function ug(a,l,u,f,m){const g=Li(null);try{const b=a.inputTransforms;null!==b&&b.hasOwnProperty(f)&&(m=b[f].call(l,m)),null!==a.setInput?a.setInput(l,m,u,f):l[f]=m}finally{Li(g)}}function sI(a,l,u){let f=null,m=0;for(;m<u.length;){const g=u[m];if(0!==g)if(5!==g){if("number"==typeof g)break;if(a.hasOwnProperty(g)){null===f&&(f=[]);const b=a[g];for(let E=0;E<b.length;E+=2)if(b[E]===l){f.push(g,b[E+1],u[m+1]);break}}m+=2}else m+=2;else m+=4}return f}function aI(a,l,u,f){return[a,!0,!1,l,null,0,f,u,null,null,null]}function lI(a,l){const u=a.contentQueries;if(null!==u)for(let f=0;f<u.length;f+=2){const g=u[f+1];if(-1!==g){const b=a.data[g];sa(u[f]),b.contentQueries(2,l[g],g)}}}function Ky(a,l){return a[Jl]?a[Hc][Gr]=l:a[Jl]=l,a[Hc]=l,l}function hg(a,l,u){sa(0);const f=Li(null);try{l(a,u)}finally{Li(f)}}function cI(a){return a[Us]||(a[Us]=[])}function dI(a){return a.cleanup||(a.cleanup=[])}function pw(a,l,u){return(null===a||si(a))&&(u=function Xc(a){for(;Array.isArray(a);){if("object"==typeof a[ms])return a;a=a[xn]}return null}(u[l.index])),u[jt]}function Dc(a,l){const u=a[es],f=u?u.get(uh,null):null;f&&f.handleError(l)}function Qy(a,l,u,f,m){for(let g=0;g<u.length;){const b=u[g++],E=u[g++];ug(a.data[b],l[b],f,E,m)}}function Ml(a,l,u){const f=gl(l,a);!function vc(a,l,u){a.setValue(l,u)}(a[jt],f,u)}function Fd(a,l){const u=No(l,a),f=u[at];!function Xy(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])}(f,u);const m=u[xn];null!==m&&null===u[Wr]&&(u[Wr]=OD(m,u[es])),sm(f,u,u[Xn])}function sm(a,l,u){ld(l);try{const f=a.viewQuery;null!==f&&hg(1,f,u);const m=a.template;null!==m&&YD(a,l,m,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&lI(a,l),a.staticViewQueries&&hg(2,a.viewQuery,u);const g=a.components;null!==g&&function _1(a,l){for(let u=0;u<l.length;u++)Fd(a,l[u])}(l,g)}catch(f){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),f}finally{l[on]&=-5,Ef()}}let Jy=(()=>{class a{constructor(){this.all=new Set,this.queue=new Map}create(u,f,m){const g=typeof Zone>"u"?null:Zone.current,b=new Ep(u,M=>{this.all.has(M)&&this.queue.set(M,g)},m);let E;this.all.add(b),b.notify();const T=()=>{b.cleanup(),E?.(),this.all.delete(b),this.queue.delete(b)};return E=f?.onDestroy(T),{destroy:T}}flush(){if(0!==this.queue.size)for(const[u,f]of this.queue)this.queue.delete(u),f?f.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return a.\u0275prov=Wt({token:a,providedIn:"root",factory:()=>new a}),a})();function Wa(a,l,u){let f=u?a.styles:null,m=u?a.classes:null,g=0;if(null!==l)for(let b=0;b<l.length;b++){const E=l[b];"number"==typeof E?g=E:1==g?m=Ge(m,E):2==g&&(f=Ge(f,E+": "+l[++b]+";"))}u?a.styles=f:a.stylesWithoutHost=f,u?a.classes=m:a.classesWithoutHost=m}function Ic(a,l,u,f,m=!1){for(;null!==u;){const g=l[u.index];if(null!==g&&f.push(Jn(g)),Br(g)){for(let E=Lr;E<g.length;E++){const T=g[E],M=T[at].firstChild;null!==M&&Ic(T[at],T,M,f)}g[go]!==g[xn]&&f.push(g[go])}const b=u.type;if(8&b)Ic(a,l,u.child,f);else if(32&b){const E=Vp(u,l);let T;for(;T=E();)f.push(T)}else if(16&b){const E=wc(l,u);if(Array.isArray(E))f.push(...E);else{const T=Ku(l[_i]);Ic(T[at],T,E,f,!0)}}u=m?u.projectionNext:u.next}return f}function ev(a,l,u,f=!0){const m=l[Da].rendererFactory;m.begin&&m.begin();try{fg(a,l,a.template,u)}catch(b){throw f&&Dc(l,b),b}finally{m.end&&m.end(),l[Da].effectManager?.flush()}}function fg(a,l,u,f){const m=l[on];if(256!=(256&m)){l[Da].effectManager?.flush(),ld(l);try{Au(l),function rd(a){return Yt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&YD(a,l,u,2,f);const b=3==(3&m);if(b){const M=a.preOrderCheckHooks;null!==M&&dc(l,M,null)}else{const M=a.preOrderHooks;null!==M&&Bu(l,M,0,null),hd(l,0)}if(function E1(a){for(let l=JC(a);null!==l;l=Uf(l)){if(!l[Ta])continue;const u=l[hl];for(let f=0;f<u.length;f++){Mu(u[f])}}}(l),gw(l,2),null!==a.contentQueries&&lI(a,l),b){const M=a.contentCheckHooks;null!==M&&dc(l,M)}else{const M=a.contentHooks;null!==M&&Bu(l,M,1),hd(l,1)}!function qD(a,l){const u=a.hostBindingOpCodes;if(null===u)return;const f=zD(l,ts);try{for(let m=0;m<u.length;m++){const g=u[m];if(g<0)vs(~g);else{const b=g,E=u[++m],T=u[++m];ac(E,b),f.runInContext(T,2,l[b])}}}finally{null===l[ts]&&Si(l,ts),vs(-1)}}(a,l);const E=a.components;null!==E&&uI(l,E,0);const T=a.viewQuery;if(null!==T&&hg(2,T,f),b){const M=a.viewCheckHooks;null!==M&&dc(l,M)}else{const M=a.viewHooks;null!==M&&Bu(l,M,2),hd(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[on]&=-73,Jc(l)}finally{Ef()}}}function gw(a,l){for(let u=JC(a);null!==u;u=Uf(u))for(let f=Lr;f<u.length;f++)mg(u[f],l)}function _w(a,l,u){mg(No(l,a),u)}function mg(a,l){if(!function gf(a){return 128==(128&a[on])}(a))return;const u=a[at];if(80&a[on]&&0===l||1024&a[on]||2===l)fg(u,a,u.template,a[Xn]);else if(a[Vc]>0){gw(a,1);const m=a[at].components;null!==m&&uI(a,m,1)}}function uI(a,l,u){for(let f=0;f<l.length;f++)_w(a,l[f],u)}class kl{get rootNodes(){const l=this._lView,u=l[at];return Ic(u,l,u.firstChild,[])}constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xn]}set context(l){this._lView[Xn]=l}get destroyed(){return 256==(256&this._lView[on])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[Ii];if(Br(l)){const u=l[8],f=u?u.indexOf(this):-1;f>-1&&(fy(l,f),La(u,f))}this._attachedToViewContainer=!1}iD(this._lView[at],this._lView)}onDestroy(l){!function Fo(a,l){if(256==(256&a[on]))throw new ce(911,!1);null===a[Ar]&&(a[Ar]=[]),a[Ar].push(l)}(this._lView,l)}markForCheck(){dh(this._cdRefInjectingView||this._lView)}detach(){this._lView[on]&=-129}reattach(){this._lView[on]|=128}detectChanges(){ev(this._lView[at],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function LL(a,l){nh(a,l,l[jt],2,null,null)}(this._lView[at],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=l}}class hI extends kl{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;ev(l[at],l,l[Xn],!1)}checkNoChanges(){}get context(){return null}}class yw extends ig{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=rn(l);return new hh(u,this.ngModule)}}function vw(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class tv{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,f){f=X(f);const m=this.injector.get(l,kd,f);return m!==kd||u===kd?m:this.parentInjector.get(l,u,f)}}class hh extends Qf{get inputs(){return vw(this.componentDef.inputs)}get outputs(){return vw(this.componentDef.outputs)}constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function ll(a){return a.map(Xl).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}create(l,u,f,m){let g=(m=m||this.ngModule)instanceof Cc?m:m?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new tv(l,g):l,E=b.get(rg,null);if(null===E)throw new ce(407,!1);const O={rendererFactory:E,sanitizer:b.get(Fy,null),effectManager:b.get(Jy,null)},W=E.createRenderer(null,this.componentDef),ne=this.componentDef.selectors[0][0]||"div",de=f?function o1(a,l,u,f){const g=f.get(VD,!1)||u===Nt.ShadowDom,b=a.selectRootElement(l,g);return function dw(a){uw(a)}(b),b}(W,f,this.componentDef.encapsulation,b):bc(W,ne,function pg(a){const l=a.toLowerCase();return"svg"===l?Tu:"math"===l?"math":null}(ne)),mt=this.componentDef.signals?4608:this.componentDef.onPush?576:528,kt=Gy(0,null,null,1,0,null,null,null,null,null,null),Be=cg(null,kt,null,mt,null,null,O,W,b,null,null);let Xt,Rn;ld(Be);try{const In=this.componentDef;let So,g_=null;In.findHostDirectiveDefs?(So=[],g_=new Map,In.findHostDirectiveDefs(In,So,g_),So.push(In)):So=[In];const __=function C1(a,l){const u=a[at],f=An;return a[f]=l,rm(u,f,2,"#host",null)}(Be,de),fP=function gg(a,l,u,f,m,g,b){const E=m[at];!function D1(a,l,u,f){for(const m of a)l.mergedAttrs=yn(l.mergedAttrs,m.hostAttrs);null!==l.mergedAttrs&&(Wa(l,l.mergedAttrs,!0),null!==u&&dD(f,u,l))}(f,a,l,b);let T=null;null!==l&&(T=OD(l,m[es]));const M=g.rendererFactory.createRenderer(l,u);let O=16;u.signals?O=4096:u.onPush&&(O=64);const W=cg(m,$y(u),null,O,m[a.index],a,g,M,null,null,T);return E.firstCreatePass&&fw(E,a,f.length-1),Ky(m,W),m[a.index]=W}(__,de,In,So,Be,O,W);Rn=pf(kt,An),de&&function T1(a,l,u,f){if(f)Dt(a,u,["ng-version",og.full]);else{const{attrs:m,classes:g}=function Xs(a){const l=[],u=[];let f=1,m=2;for(;f<a.length;){let g=a[f];if("string"==typeof g)2===m?""!==g&&l.push(g,a[++f]):8===m&&u.push(g);else{if(!oi(m))break;m=g}f++}return{attrs:l,classes:u}}(l.selectors[0]);m&&Dt(a,u,m),g&&g.length>0&&cD(a,u,g.join(" "))}}(W,In,de,f),void 0!==u&&function ww(a,l,u){const f=a.projection=[];for(let m=0;m<l.length;m++){const g=u[m];f.push(null!=g?Array.from(g):null)}}(Rn,this.ngContentSelectors,u),Xt=function I1(a,l,u,f,m,g){const b=lr(),E=m[at],T=Vr(b,m);eI(E,m,b,u,null,f);for(let O=0;O<u.length;O++)ss(Pn(m,E,b.directiveStart+O,b),m);nI(E,m,b),T&&ss(T,m);const M=Pn(m,E,b.directiveStart+b.componentOffset,b);if(a[Xn]=m[Xn]=M,null!==g)for(const O of g)O(M,l);return lw(E,b,a),M}(fP,In,So,g_,Be,[xw]),sm(kt,Be,null)}finally{Ef()}return new bw(this.componentType,Xt,Xf(Rn,Be),Be,Rn)}}class bw extends J0{constructor(l,u,f,m,g){super(),this.location=f,this._rootLView=m,this._tNode=g,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new hI(m),this.componentType=l}setInput(l,u){const f=this._tNode.inputs;let m;if(null!==f&&(m=f[l])){if(this.previousInputValues??=new Map,this.previousInputValues.has(l)&&Object.is(this.previousInputValues.get(l),u))return;const g=this._rootLView;Qy(g[at],g,m,l,u),this.previousInputValues.set(l,u),dh(No(this._tNode.index,g))}}get injector(){return new Na(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function xw(){const a=lr();ud(Ve()[at],a)}function nv(a){let l=function mI(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const f=[a];for(;l;){let m;if(si(a))m=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new ce(903,!1);m=l.\u0275dir}if(m){if(u){f.push(m);const b=a;b.inputs=iv(a.inputs),b.inputTransforms=iv(a.inputTransforms),b.declaredInputs=iv(a.declaredInputs),b.outputs=iv(a.outputs);const E=m.hostBindings;E&&Cw(a,E);const T=m.viewQuery,M=m.contentQueries;if(T&&pI(a,T),M&&Ew(a,M),J(a.inputs,m.inputs),J(a.declaredInputs,m.declaredInputs),J(a.outputs,m.outputs),null!==m.inputTransforms&&(null===b.inputTransforms&&(b.inputTransforms={}),J(b.inputTransforms,m.inputTransforms)),si(m)&&m.data.animation){const O=a.data;O.animation=(O.animation||[]).concat(m.data.animation)}}const g=m.features;if(g)for(let b=0;b<g.length;b++){const E=g[b];E&&E.ngInherit&&E(a),E===nv&&(u=!1)}}l=Object.getPrototypeOf(l)}!function S1(a){let l=0,u=null;for(let f=a.length-1;f>=0;f--){const m=a[f];m.hostVars=l+=m.hostVars,m.hostAttrs=yn(m.hostAttrs,u=yn(u,m.hostAttrs))}}(f)}function iv(a){return a===Pt?{}:a===Mt?[]:a}function pI(a,l){const u=a.viewQuery;a.viewQuery=u?(f,m)=>{l(f,m),u(f,m)}:l}function Ew(a,l){const u=a.contentQueries;a.contentQueries=u?(f,m,g)=>{l(f,m,g),u(f,m,g)}:l}function Cw(a,l){const u=a.hostBindings;a.hostBindings=u?(f,m)=>{l(f,m),u(f,m)}:l}function am(a){const l=a.inputConfig,u={};for(const f in l)if(l.hasOwnProperty(f)){const m=l[f];Array.isArray(m)&&m[2]&&(u[f]=m[2])}a.inputTransforms=u}function sv(a){return!!_g(a)&&(Array.isArray(a)||!(a instanceof Map)&&Symbol.iterator in a)}function _g(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function qa(a,l,u){return a[l]=u}function jr(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function zo(a,l,u,f){const m=jr(a,l,u);return jr(a,l+1,f)||m}function lv(a,l,u,f){const m=Ve();return jr(m,yi(),l)&&(Cn(),Ga(ei(),m,a,l,u,f)),lv}function Pl(a,l,u,f,m,g){const E=zo(a,function _s(){return Yt.lFrame.bindingIndex}(),u,m);return ys(2),E?l+fe(u)+f+fe(m)+g:Zt}function AI(a,l,u,f,m,g,b,E){const T=Ve(),M=Cn(),O=a+An,W=M.firstCreatePass?function SI(a,l,u,f,m,g,b,E,T){const M=l.consts,O=rm(l,a,4,b||null,gs(M,E));Zy(l,u,O,gs(M,T)),ud(l,O);const W=O.tView=Gy(2,O,f,m,g,l.directiveRegistry,l.pipeRegistry,null,l.schemas,M,null);return null!==l.queries&&(l.queries.template(l,O),W.queries=l.queries.embeddedTView(O)),O}(O,M,T,l,u,f,m,g,b):M.data[O];qr(W,!1);const ne=Fw(M,T,W,a);cc()&&eh(M,T,ne,W),ss(ne,T),Ky(T,T[O]=aI(ne,T,ne,W)),ta(W)&&cw(M,T,W),null!=b&&om(T,W,E)}let Fw=function Lw(a,l,u,f){return Ra(!0),l[jt].createComment("")};function Cg(a){return oa(function Ou(){return Yt.lFrame.contextLView}(),An+a)}function Nl(a,l,u){const f=Ve();return jr(f,yi(),l)&&Hs(Cn(),ei(),f,a,l,f[jt],u,!1),Nl}function hm(a,l,u,f,m){const b=m?"class":"style";Qy(a,u,l.inputs[b],b,f)}function Fl(a,l,u,f){const m=Ve(),g=Cn(),b=An+a,E=m[jt],T=g.firstCreatePass?function _a(a,l,u,f,m,g){const b=l.consts,T=rm(l,a,2,f,gs(b,m));return Zy(l,u,T,gs(b,g)),null!==T.attrs&&Wa(T,T.attrs,!1),null!==T.mergedAttrs&&Wa(T,T.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,T),T}(b,g,m,l,u,f):g.data[b],M=Bd(g,m,T,E,l,a);m[b]=M;const O=ta(T);return qr(T,!0),dD(E,M,T),32!=(32&T.flags)&&cc()&&eh(g,m,M,T),0===function X_(){return Yt.lFrame.elementDepthCount}()&&ss(M,m),function Ru(){Yt.lFrame.elementDepthCount++}(),O&&(cw(g,m,T),lw(g,T,m)),null!==f&&om(m,T),Fl}function Dg(){let a=lr();Mp()?Ui():(a=a.parent,qr(a,!1));const l=a;(function td(a){return Yt.skipHydrationRootTNode===a})(l)&&function Sp(){Yt.skipHydrationRootTNode=null}(),function Ip(){Yt.lFrame.elementDepthCount--}();const u=Cn();return u.firstCreatePass&&(ud(u,a),du(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Rp(a){return 0!=(8&a.flags)}(l)&&hm(u,l,Ve(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function uc(a){return 0!=(16&a.flags)}(l)&&hm(u,l,Ve(),l.stylesWithoutHost,!1),Dg}function mv(a,l,u,f){return Fl(a,l,u,f),Dg(),mv}let Bd=(a,l,u,f,m,g)=>(Ra(!0),bc(f,m,function Lu(){return Yt.lFrame.currentNamespace}()));function fm(a,l,u){const f=Ve(),m=Cn(),g=a+An,b=m.firstCreatePass?function z1(a,l,u,f,m){const g=l.consts,b=gs(g,f),E=rm(l,a,8,"ng-container",b);return null!==b&&Wa(E,b,!0),Zy(l,u,E,gs(g,m)),null!==l.queries&&l.queries.elementStart(l,E),E}(g,m,f,l,u):m.data[g];qr(b,!0);const E=kI(m,f,b,a);return f[g]=E,cc()&&eh(m,f,E,b),ss(E,f),ta(b)&&(cw(m,f,b),lw(m,b,f)),null!=u&&om(f,b),fm}function pv(){let a=lr();const l=Cn();return Mp()?Ui():(a=a.parent,qr(a,!1)),l.firstCreatePass&&(ud(l,a),du(a)&&l.queries.elementEnd(a)),pv}function Bw(a,l,u){return fm(a,l,u),pv(),Bw}let kI=(a,l,u,f)=>(Ra(!0),zp(l[jt],""));function Tg(){return Ve()}function _h(a){return!!a&&"function"==typeof a.then}function gv(a){return!!a&&"function"==typeof a.subscribe}function _v(a,l,u,f){const m=Ve(),g=Cn(),b=lr();return Vw(g,m,m[jt],b,a,l,f),_v}function yv(a,l){const u=lr(),f=Ve(),m=Cn();return Vw(m,f,pw(lc(m.data),u,f),u,a,l),yv}function Vw(a,l,u,f,m,g,b){const E=ta(f),M=a.firstCreatePass&&dI(a),O=l[Xn],W=cI(l);let ne=!0;if(3&f.type||b){const Ke=Vr(f,l),mt=b?b(Ke):Ke,kt=W.length,Be=b?Rn=>b(Jn(Rn[f.index])):f.index;let Xt=null;if(!b&&E&&(Xt=function RI(a,l,u,f){const m=a.cleanup;if(null!=m)for(let g=0;g<m.length-1;g+=2){const b=m[g];if(b===u&&m[g+1]===f){const E=l[Us],T=m[g+2];return E.length>T?E[T]:null}"string"==typeof b&&(g+=2)}return null}(a,l,m,f.index)),null!==Xt)(Xt.__ngLastListenerFn__||Xt).__ngNextListenerFn__=g,Xt.__ngLastListenerFn__=g,ne=!1;else{g=ya(f,l,O,g,!1);const Rn=u.listen(mt,m,g);W.push(g,Rn),M&&M.push(m,Be,kt,kt+1)}}else g=ya(f,l,O,g,!1);const de=f.outputs;let Fe;if(ne&&null!==de&&(Fe=de[m])){const Ke=Fe.length;if(Ke)for(let mt=0;mt<Ke;mt+=2){const In=l[Fe[mt]][Fe[mt+1]].subscribe(g),So=W.length;W.push(g,In),M&&M.push(m,f.index,So,-(So+1))}}}function Hw(a,l,u,f){try{return is(6,l,u),!1!==u(f)}catch(m){return Dc(a,m),!1}finally{is(7,l,u)}}function ya(a,l,u,f,m){return function g(b){if(b===Function)return f;dh(a.componentOffset>-1?No(a.index,l):l);let T=Hw(l,u,f,b),M=g.__ngNextListenerFn__;for(;M;)T=Hw(l,u,M,b)&&T,M=M.__ngNextListenerFn__;return m&&!1===T&&b.preventDefault(),T}}function zw(a=1){return function Cf(a){return(Yt.lFrame.contextLView=function kp(a,l){for(;a>0;)l=l[ea],a--;return l}(a,Yt.lFrame.contextLView))[Xn]}(a)}function $1(a,l){let u=null;const f=function Xo(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(!(1&u))return l[u+1]}return null}(a);for(let m=0;m<l.length;m++){const g=l[m];if("*"!==g){if(null===f?_r(a,g,!0):Ql(f,g))return m}else u=m}return u}function PI(a){const l=Ve()[_i][Sr];if(!l.projection){const f=l.projection=Ua(a?a.length:1,null),m=f.slice();let g=l.child;for(;null!==g;){const b=a?$1(g,a):0;null!==b&&(m[b]?m[b].projectionNext=g:f[b]=g,m[b]=g),g=g.next}}}function OI(a,l=0,u){const f=Ve(),m=Cn(),g=rm(m,An+a,16,null,u||null);null===g.projection&&(g.projection=l),Ui(),(!f[Wr]||Lo())&&32!=(32&g.flags)&&function aD(a,l,u){Zr(l[jt],0,l,u,jp(a,u,l),Vf(u.parent||l[Sr],u,l))}(m,f,g)}function vv(a,l){return a<<17|l<<2}function Vd(a){return a>>17&32767}function Gw(a){return 2|a}function yh(a){return(131068&a)>>2}function Ww(a,l){return-131069&a|l<<2}function zs(a){return 1|a}function qw(a,l,u,f,m){const g=a[u+1],b=null===l;let E=f?Vd(g):yh(g),T=!1;for(;0!==E&&(!1===T||b);){const O=a[E+1];Z1(a[E],l)&&(T=!0,a[E+1]=f?zs(O):Gw(O)),E=f?Vd(O):yh(O)}T&&(a[u+1]=f?Gw(g):zs(g))}function Z1(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&k(a,l)>=0}function Zw(a,l,u){return Ya(a,l,u,!1),Zw}function Kw(a,l){return Ya(a,l,null,!0),Kw}function Ya(a,l,u,f){const m=Ve(),g=Cn(),b=ys(2);g.firstUpdatePass&&function QI(a,l,u,f){const m=a.data;if(null===m[u+1]){const g=m[vr()],b=function KI(a,l){return l>=a.expandoStartIndex}(a,u);(function Qw(a,l){return 0!=(a.flags&(l?8:16))})(g,f)&&null===l&&!b&&(l=!1),l=function iR(a,l,u,f){const m=lc(a);let g=f?l.residualClasses:l.residualStyles;if(null===m)0===(f?l.classBindings:l.styleBindings)&&(u=Mc(u=as(null,a,l,u,f),l.attrs,f),g=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==m)if(u=as(m,a,l,u,f),null===g){let T=function rR(a,l,u){const f=u?l.classBindings:l.styleBindings;if(0!==yh(f))return a[Vd(f)]}(a,l,f);void 0!==T&&Array.isArray(T)&&(T=as(null,a,l,T[1],f),T=Mc(T,l.attrs,f),function Hd(a,l,u,f){a[Vd(u?l.classBindings:l.styleBindings)]=f}(a,l,f,T))}else g=function xo(a,l,u){let f;const m=l.directiveEnd;for(let g=1+l.directiveStylingLast;g<m;g++)f=Mc(f,a[g].hostAttrs,u);return Mc(f,l.attrs,u)}(a,l,f)}return void 0!==g&&(f?l.residualClasses=g:l.residualStyles=g),u}(m,g,l,f),function $I(a,l,u,f,m,g){let b=g?l.classBindings:l.styleBindings,E=Vd(b),T=yh(b);a[f]=u;let O,M=!1;if(Array.isArray(u)?(O=u[1],(null===O||k(u,O)>0)&&(M=!0)):O=u,m)if(0!==T){const ne=Vd(a[E+1]);a[f+1]=vv(ne,E),0!==ne&&(a[ne+1]=Ww(a[ne+1],f)),a[E+1]=function W1(a,l){return 131071&a|l<<17}(a[E+1],f)}else a[f+1]=vv(E,0),0!==E&&(a[E+1]=Ww(a[E+1],f)),E=f;else a[f+1]=vv(T,0),0===E?E=f:a[T+1]=Ww(a[T+1],f),T=f;M&&(a[f+1]=Gw(a[f+1])),qw(a,O,f,!0),qw(a,O,f,!1),function Y1(a,l,u,f,m){const g=m?a.residualClasses:a.residualStyles;null!=g&&"string"==typeof l&&k(g,l)>=0&&(u[f+1]=zs(u[f+1]))}(l,O,a,f,g),b=vv(E,T),g?l.classBindings=b:l.styleBindings=b}(m,g,l,u,b,f)}}(g,a,b,f),l!==Zt&&jr(m,b,l)&&function JI(a,l,u,f,m,g,b,E){if(!(3&l.type))return;const T=a.data,M=T[E+1],O=function q1(a){return 1==(1&a)}(M)?eT(T,l,u,m,yh(M),b):void 0;Sg(O)||(Sg(g)||function G1(a){return 2==(2&a)}(M)&&(g=eT(T,null,u,m,E,b)),function Sk(a,l,u,f,m){if(l)m?a.addClass(u,f):a.removeClass(u,f);else{let g=-1===f.indexOf("-")?void 0:ma.DashCase;null==m?a.removeStyle(u,f,g):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),g|=ma.Important),a.setStyle(u,f,m,g))}}(f,b,gl(vr(),u),m,g))}(g,g.data[vr()],m,m[jt],a,m[b+1]=function tT(a,l){return null==a||""===a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ue(xc(a)))),a}(l,u),f,b)}function as(a,l,u,f,m){let g=null;const b=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<b&&(g=l[E],f=Mc(f,g.hostAttrs,m),g!==a);)E++;return null!==a&&(u.directiveStylingLast=E),f}function Mc(a,l,u){const f=u?1:2;let m=-1;if(null!==l)for(let g=0;g<l.length;g++){const b=l[g];"number"==typeof b?m=b:m===f&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),C(a,b,!!u||l[++g]))}return void 0===a?null:a}function eT(a,l,u,f,m,g){const b=null===l;let E;for(;m>0;){const T=a[m],M=Array.isArray(T),O=M?T[1]:T,W=null===O;let ne=u[m+1];ne===Zt&&(ne=W?Mt:void 0);let de=W?S(ne,f):O===f?ne:void 0;if(M&&!Sg(de)&&(de=S(T,f)),Sg(de)&&(E=de,b))return E;const Fe=a[m+1];m=b?Vd(Fe):yh(Fe)}if(null!==l){let T=g?l.residualClasses:l.residualStyles;null!=T&&(E=S(T,f))}return E}function Sg(a){return void 0!==a}function Xw(a,l=""){const u=Ve(),f=Cn(),m=a+An,g=f.firstCreatePass?rm(f,m,1,l,null):f.data[m],b=pm(f,u,g,l,a);u[m]=b,cc()&&eh(f,u,b,g),qr(g,!1)}let pm=(a,l,u,f,m)=>(Ra(!0),function Dd(a,l){return a.createText(l)}(l[jt],f));function Jw(a){return bv("",a,""),Jw}function bv(a,l,u){const f=Ve(),m=function Rl(a,l,u,f){return jr(a,yi(),u)?l+fe(u)+f:Zt}(f,a,l,u);return m!==Zt&&Ml(f,vr(),m),bv}function wv(a,l,u,f,m){const g=Ve(),b=Pl(g,a,l,u,f,m);return b!==Zt&&Ml(g,vr(),b),wv}function Ul(a,l,u){const f=Ve();return jr(f,yi(),l)&&Hs(Cn(),ei(),f,a,l,f[jt],u,!0),Ul}function ox(a,l,u){const f=Ve();if(jr(f,yi(),l)){const g=Cn(),b=ei();Hs(g,b,f,a,l,pw(lc(g.data),b,f),u,!0)}return ox}const zd=void 0;var hT=["en",[["a","p"],["AM","PM"],zd],[["AM","PM"],zd,zd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zd,"{1} 'at' {0}",zd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function sx(a){const u=Math.floor(Math.abs(a)),f=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===f?1:5}];let kr={};function vh(a){const l=function _m(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=Dv(l);if(u)return u;const f=l.split("-")[0];if(u=Dv(f),u)return u;if("en"===f)return hT;throw new ce(701,!1)}function Ka(a){return vh(a)[Qt.PluralCase]}function Dv(a){return a in kr||(kr[a]=hn.ng&&hn.ng.common&&hn.ng.common.locales&&hn.ng.common.locales[a]),kr[a]}var Qt=(()=>((Qt=Qt||{})[Qt.LocaleId=0]="LocaleId",Qt[Qt.DayPeriodsFormat=1]="DayPeriodsFormat",Qt[Qt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qt[Qt.DaysFormat=3]="DaysFormat",Qt[Qt.DaysStandalone=4]="DaysStandalone",Qt[Qt.MonthsFormat=5]="MonthsFormat",Qt[Qt.MonthsStandalone=6]="MonthsStandalone",Qt[Qt.Eras=7]="Eras",Qt[Qt.FirstDayOfWeek=8]="FirstDayOfWeek",Qt[Qt.WeekendRange=9]="WeekendRange",Qt[Qt.DateFormat=10]="DateFormat",Qt[Qt.TimeFormat=11]="TimeFormat",Qt[Qt.DateTimeFormat=12]="DateTimeFormat",Qt[Qt.NumberSymbols=13]="NumberSymbols",Qt[Qt.NumberFormats=14]="NumberFormats",Qt[Qt.CurrencyCode=15]="CurrencyCode",Qt[Qt.CurrencySymbol=16]="CurrencySymbol",Qt[Qt.CurrencyName=17]="CurrencyName",Qt[Qt.Currencies=18]="Currencies",Qt[Qt.Directionality=19]="Directionality",Qt[Qt.PluralCase=20]="PluralCase",Qt[Qt.ExtraData=21]="ExtraData",Qt))();const bh="en-US";let Iv=bh;function jg(a,l,u,f,m){if(a=Ne(a),Array.isArray(a))for(let g=0;g<a.length;g++)jg(a[g],l,u,f,m);else{const g=Cn(),b=Ve();let E=Ec(a)?a:Ne(a.provide),T=SD(a);const M=lr(),O=1048575&M.providerIndexes,W=M.directiveStart,ne=M.providerIndexes>>20;if(Ec(a)||!a.multi){const de=new la(T,m,im),Fe=Bv(E,l,m?O:O+ne,W);-1===Fe?(Sf(rs(M,b),g,E),Im(g,a,l.length),l.push(E),M.directiveStart++,M.directiveEnd++,m&&(M.providerIndexes+=1048576),u.push(de),b.push(de)):(u[Fe]=de,b[Fe]=de)}else{const de=Bv(E,l,O+ne,W),Fe=Bv(E,l,O,O+ne),mt=Fe>=0&&u[Fe];if(m&&!mt||!m&&!(de>=0&&u[de])){Sf(rs(M,b),g,E);const kt=function $g(a,l,u,f,m){const g=new la(a,u,im);return g.multi=[],g.index=l,g.componentProviders=0,Uv(g,m,f&&!u),g}(m?LT:FT,u.length,m,f,T);!m&&mt&&(u[Fe].providerFactory=kt),Im(g,a,l.length,0),l.push(E),M.directiveStart++,M.directiveEnd++,m&&(M.providerIndexes+=1048576),u.push(kt),b.push(kt)}else Im(g,a,de>-1?de:Fe,Uv(u[m?Fe:de],T,!m&&f));!m&&f&&mt&&u[Fe].componentProviders++}}}function Im(a,l,u,f){const m=Ec(l),g=function pa(a){return!!a.useClass}(l);if(m||g){const T=(g?Ne(l.useClass):l).prototype.ngOnDestroy;if(T){const M=a.destroyHooks||(a.destroyHooks=[]);if(!m&&l.multi){const O=M.indexOf(u);-1===O?M.push(u,[f,T]):M[O+1].push(f,T)}else M.push(u,T)}}}function Uv(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function Bv(a,l,u,f){for(let m=u;m<f;m++)if(l[m]===a)return m;return-1}function FT(a,l,u,f){return Cx(this.multi,[])}function LT(a,l,u,f){const m=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=Pn(u,u[at],this.providerFactory.index,f);g=E.slice(0,b),Cx(m,g);for(let T=b;T<E.length;T++)g.push(E[T])}else g=[],Cx(m,g);return g}function Cx(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function Dx(a,l=[]){return u=>{u.providersResolver=(f,m)=>function AR(a,l,u){const f=Cn();if(f.firstCreatePass){const m=si(a);jg(u,f.data,f.blueprint,m,!0),jg(l,f.data,f.blueprint,m,!1)}}(f,m?m(a):a,l)}}class Rc{}class Tm{}function Ch(a,l){return new Ix(a,l??null,[])}class Ix extends Rc{constructor(l,u,f){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yw(this);const m=me(l);this._bootstrapComponents=Ho(m.bootstrap),this._r3Injector=GD(l,u,[{provide:Rc,useValue:this},{provide:ig,useValue:this.componentFactoryResolver},...f],ue(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class Tx extends Tm{constructor(l){super(),this.moduleType=l}create(l){return new Ix(this.moduleType,l,[])}}class Sx extends Rc{constructor(l){super(),this.componentFactoryResolver=new yw(this),this.instance=null;const u=new sh([...l.providers,{provide:Rc,useValue:this},{provide:ig,useValue:this.componentFactoryResolver}],l.parent||Dl(),l.debugName,new Set(["environment"]));this.injector=u,l.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function VT(a,l,u=null){return new Sx({providers:a,parent:l,debugName:u,runEnvironmentInitializers:!0}).injector}let Dh=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const f=xi(0,u.type),m=f.length>0?VT([f],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,m)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=Wt({token:a,providedIn:"environment",factory:()=>new a(qn(Cc))}),a})();function Bl(a){a.getStandaloneInjector=l=>l.get(Dh).getOrCreateStandaloneInjector(a)}function Mx(a,l,u){const f=Mr()+a,m=Ve();return m[f]===Zt?qa(m,f,u?l.call(u):l()):function yg(a,l){return a[l]}(m,f)}function Th(a,l,u,f){return Ox(Ve(),Mr(),a,l,u,f)}function WT(a,l,u,f,m){return function ZT(a,l,u,f,m,g,b){const E=l+u;return zo(a,E,m,g)?qa(a,E+2,b?f.call(b,m,g):f(m,g)):Am(a,E+2)}(Ve(),Mr(),a,l,u,f,m)}function kx(a,l,u,f,m,g,b){return function QT(a,l,u,f,m,g,b,E,T){const M=l+u;return function ga(a,l,u,f,m,g){const b=zo(a,l,u,f);return zo(a,l+2,m,g)||b}(a,M,m,g,b,E)?qa(a,M+4,T?f.call(T,m,g,b,E):f(m,g,b,E)):Am(a,M+4)}(Ve(),Mr(),a,l,u,f,m,g,b)}function Am(a,l){const u=a[l];return u===Zt?void 0:u}function Ox(a,l,u,f,m,g){const b=l+u;return jr(a,b,m)?qa(a,b+1,g?f.call(g,m):f(m)):Am(a,b+1)}function KT(a,l,u,f,m,g,b,E){const T=l+u;return function Ld(a,l,u,f,m){const g=zo(a,l,u,f);return jr(a,l+2,m)||g}(a,T,m,g,b)?qa(a,T+3,E?f.call(E,m,g,b):f(m,g,b)):Am(a,T+3)}function Kg(a,l){const u=Cn();let f;const m=a+An;u.firstCreatePass?(f=function Qg(a,l){if(l)for(let u=l.length-1;u>=0;u--){const f=l[u];if(a===f.name)return f}}(l,u.pipeRegistry),u.data[m]=f,f.onDestroy&&(u.destroyHooks??=[]).push(m,f.onDestroy)):f=u.data[m];const g=f.factory||(f.factory=na(f.type)),b=gn(im);try{const E=fc(!1),T=g();return fc(E),function Ss(a,l,u,f){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=f}(u,Ve(),m,T),T}finally{gn(b)}}function Vv(a,l,u){const f=a+An,m=Ve(),g=oa(m,f);return Vi(m,f)?Ox(m,Mr(),l,g.transform,u,g):g.transform(u)}function Mm(a,l,u,f,m){const g=a+An,b=Ve(),E=oa(b,g);return Vi(b,g)?KT(b,Mr(),l,E.transform,u,f,m,E):E.transform(u,f,m)}function Vi(a,l){return a[at].data[l].pure}function Fx(a){return l=>{setTimeout(a,void 0,l)}}const Vl=class eS extends d.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,f){let m=l,g=u||(()=>null),b=f;if(l&&"object"==typeof l){const T=l;m=T.next?.bind(T),g=T.error?.bind(T),b=T.complete?.bind(T)}this.__isAsync&&(g=Fx(g),m&&(m=Fx(m)),b&&(b=Fx(b)));const E=super.subscribe({next:m,error:g,complete:b});return l instanceof q.w0&&l.add(E),E}};function NR(){return this._results[Symbol.iterator]()}class Jg{get changes(){return this._changes||(this._changes=new Vl)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Jg.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=NR)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const f=this;f.dirty=!1;const m=function $i(a){return a.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function nr(a,l,u){if(a.length!==l.length)return!1;for(let f=0;f<a.length;f++){let m=a[f],g=l[f];if(u&&(m=u(m),g=u(g)),g!==m)return!1}return!0}(f._results,m,u))&&(f._results=m,f.length=m.length,f.last=m[this.length-1],f.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let km=(()=>{class a{}return a.__NG_ELEMENT_ID__=nS,a})();const tS=km,Hv=class extends tS{constructor(l,u,f){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=f}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(l,u){return this.createEmbeddedViewImpl(l,u,null)}createEmbeddedViewImpl(l,u,f){const b=this._declarationTContainer.tView,E=cg(this._declarationLView,b,l,4096&this._declarationLView[on]?4096:16,null,b.declTNode,null,null,null,u||null,f||null);E[zc]=this._declarationLView[this._declarationTContainer.index];const M=this._declarationLView[oo];return null!==M&&(E[oo]=M.createEmbeddedView(b)),sm(b,E,l),new kl(E)}};function nS(){return js(lr(),Ve())}function js(a,l){return 4&a.type?new Hv(l,a,Xf(a,l)):null}let $v=(()=>{class a{}return a.__NG_ELEMENT_ID__=sS,a})();function sS(){return Gv(lr(),Ve())}const i_=$v,Ux=class extends i_{constructor(l,u,f){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=f}get element(){return Xf(this._hostTNode,this._hostLView)}get injector(){return new Na(this._hostTNode,this._hostLView)}get parentInjector(){const l=gt(this._hostTNode,this._hostLView);if(zu(l)){const u=hc(l,this._hostLView),f=Uo(l);return new Na(u[at].data[f+8],u)}return new Na(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=Bx(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-Lr}createEmbeddedView(l,u,f){let m,g;"number"==typeof f?m=f:null!=f&&(m=f.index,g=f.injector);const E=l.createEmbeddedViewImpl(u||{},g,null);return this.insertImpl(E,m,false),E}createComponent(l,u,f,m,g){const b=l&&!function gc(a){return"function"==typeof a}(l);let E;if(b)E=u;else{const Ke=u||{};E=Ke.index,f=Ke.injector,m=Ke.projectableNodes,g=Ke.environmentInjector||Ke.ngModuleRef}const T=b?l:new hh(rn(l)),M=f||this.parentInjector;if(!g&&null==T.ngModule){const mt=(b?M:this.parentInjector).get(Cc,null);mt&&(g=mt)}rn(T.componentType??{});const de=T.create(M,m,null,g);return this.insertImpl(de.hostView,E,false),de}insert(l,u){return this.insertImpl(l,u,!1)}insertImpl(l,u,f){const m=l._lView,g=m[at];if(function Su(a){return Br(a[Ii])}(m)){const T=this.indexOf(l);if(-1!==T)this.detach(T);else{const M=m[Ii],O=new Ux(M,M[Sr],M[Ii]);O.detach(O.indexOf(l))}}const b=this._adjustIndex(u),E=this._lContainer;if(function tD(a,l,u,f){const m=Lr+f,g=u.length;f>0&&(u[m-1][Gr]=l),f<g-Lr?(l[Gr]=u[m],Es(u,Lr+f,l)):(u.push(l),l[Gr]=null),l[Ii]=u;const b=l[zc];null!==b&&u!==b&&function nD(a,l){const u=a[hl];l[_i]!==l[Ii][Ii][_i]&&(a[Ta]=!0),null===u?a[hl]=[l]:u.push(l)}(b,l);const E=l[oo];null!==E&&E.insertView(a),l[on]|=128}(g,m,E,b),!f){const T=za(b,E),M=m[jt],O=$p(M,E[go]);null!==O&&function Ik(a,l,u,f,m,g){f[xn]=m,f[Sr]=l,nh(a,f,u,1,m,g)}(g,E[Sr],M,m,O,T)}return l.attachToViewContainerRef(),Es(r_(E),b,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=Bx(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),f=fy(this._lContainer,u);f&&(La(r_(this._lContainer),u),iD(f[at],f))}detach(l){const u=this._adjustIndex(l,-1),f=fy(this._lContainer,u);return f&&null!=La(r_(this._lContainer),u)?new kl(f):null}_adjustIndex(l,u=0){return l??this.length+u}};function Bx(a){return a[8]}function r_(a){return a[8]||(a[8]=[])}function Gv(a,l){let u;const f=l[a.index];return Br(f)?u=f:(u=aI(f,l,null,a),l[a.index]=u,Ky(l,u)),o_(u,l,a,f),new Ux(u,a,l)}let o_=function Vx(a,l,u,f){if(a[go])return;let m;m=8&u.type?Jn(f):function aS(a,l){const u=a[jt],f=u.createComment(""),m=Vr(l,a);return Id(u,$p(u,m),f,function lo(a,l){return a.nextSibling(l)}(u,m),!1),f}(l,u),a[go]=m};class Wv{constructor(l){this.queryList=l,this.matches=null}clone(){return new Wv(this.queryList)}setDirty(){this.queryList.setDirty()}}class qv{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const f=null!==l.contentQueries?l.contentQueries[0]:u.length,m=[];for(let g=0;g<f;g++){const b=u.getByIndex(g);m.push(this.queries[b.indexInDeclarationView].clone())}return new qv(m)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==Xv(l,u).matches&&this.queries[u].setDirty()}}class Hx{constructor(l,u,f=null){this.predicate=l,this.flags=u,this.read=f}}class Yv{constructor(l=[]){this.queries=l}elementStart(l,u){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let f=0;f<this.length;f++){const m=null!==u?u.length:0,g=this.getByIndex(f).embeddedTView(l,m);g&&(g.indexInDeclarationView=f,null!==u?u.push(g):u=[g])}return null!==u?new Yv(u):null}template(l,u){for(let f=0;f<this.queries.length;f++)this.queries[f].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Rm{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Rm(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let f=l.parent;for(;null!==f&&8&f.type&&f.index!==u;)f=f.parent;return u===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const f=this.metadata.predicate;if(Array.isArray(f))for(let m=0;m<f.length;m++){const g=f[m];this.matchTNodeWithReadOption(l,u,$s(u,g)),this.matchTNodeWithReadOption(l,u,di(u,l,g,!1,!1))}else f===km?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,di(u,l,f,!1,!1))}matchTNodeWithReadOption(l,u,f){if(null!==f){const m=this.metadata.read;if(null!==m)if(m===ch||m===$v||m===km&&4&u.type)this.addMatch(u.index,-2);else{const g=di(u,l,m,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,f)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function $s(a,l){const u=a.localNames;if(null!==u)for(let f=0;f<u.length;f+=2)if(u[f]===l)return u[f+1];return null}function dS(a,l,u,f){return-1===u?function cS(a,l){return 11&a.type?Xf(a,l):4&a.type?js(a,l):null}(l,a):-2===u?function Pm(a,l,u){return u===ch?Xf(l,a):u===km?js(l,a):u===$v?Gv(l,a):void 0}(a,l,f):Pn(a,a[at],u,l)}function uS(a,l,u,f){const m=l[oo].queries[f];if(null===m.matches){const g=a.data,b=u.matches,E=[];for(let T=0;T<b.length;T+=2){const M=b[T];E.push(M<0?null:dS(l,g[M],b[T+1],u.metadata.read))}m.matches=E}return m.matches}function Gs(a,l,u,f){const m=a.queries.getByIndex(u),g=m.matches;if(null!==g){const b=uS(a,l,m,u);for(let E=0;E<g.length;E+=2){const T=g[E];if(T>0)f.push(b[E/2]);else{const M=g[E+1],O=l[-T];for(let W=Lr;W<O.length;W++){const ne=O[W];ne[zc]===ne[Ii]&&Gs(ne[at],ne,M,f)}if(null!==O[hl]){const W=O[hl];for(let ne=0;ne<W.length;ne++){const de=W[ne];Gs(de[at],de,M,f)}}}}}return f}function Zv(a){const l=Ve(),u=Cn(),f=ad();sa(f+1);const m=Xv(u,f);if(a.dirty&&function Dp(a){return 4==(4&a[on])}(l)===(2==(2&m.metadata.flags))){if(null===m.matches)a.reset([]);else{const g=m.crossesNgTemplate?Gs(u,l,f,[]):uS(u,l,m,f);a.reset(g,e1),a.notifyOnChanges()}return!0}return!1}function ai(a,l,u){const f=Cn();f.firstCreatePass&&(Qv(f,new Hx(a,l,u),-1),2==(2&l)&&(f.staticViewQueries=!0)),zx(f,Ve(),l)}function hS(a,l,u,f){const m=Cn();if(m.firstCreatePass){const g=lr();Qv(m,new Hx(l,u,f),g.index),function Om(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(m,a),2==(2&u)&&(m.staticContentQueries=!0)}zx(m,Ve(),u)}function Kv(){return function Hl(a,l){return a[oo].queries[l].queryList}(Ve(),ad())}function zx(a,l,u){const f=new Jg(4==(4&u));(function a1(a,l,u,f){const m=cI(l);m.push(u),a.firstCreatePass&&dI(a).push(f,m.length-1)})(a,l,f,f.destroy),null===l[oo]&&(l[oo]=new qv),l[oo].queries.push(new Wv(f))}function Qv(a,l,u){null===a.queries&&(a.queries=new Yv),a.queries.track(new Rm(l,u))}function Xv(a,l){return a.queries.getByIndex(l)}function jx(a,l){return js(a,l)}function tb(a){return!!me(a)}const DS=new Ln("Application Initializer");let Bm=(()=>{class a{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f}),this.appInits=_n(DS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const m of this.appInits){const g=m();if(_h(g))u.push(g);else if(gv(g)){const b=new Promise((E,T)=>{g.subscribe({complete:E,error:T})});u.push(b)}}const f=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{f()}).catch(m=>{this.reject(m)}),0===u.length&&f(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Wt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),IS=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Wt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const l_=new Ln("LocaleId",{providedIn:"root",factory:()=>_n(l_,ut.Optional|ut.SkipSelf)||function a_(){return typeof $localize<"u"&&$localize.locale||bh}()}),TS=new Ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Zx=(()=>{class a{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new L.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Wt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();class $d{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let Kx=(()=>{class a{compileModuleSync(u){return new Tx(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const f=this.compileModuleSync(u),g=Ho(me(u).declarations).reduce((b,E)=>{const T=rn(E);return T&&b.push(new hh(T)),b},[]);return new $d(f,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Wt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const kh=(()=>Promise.resolve(0))();function ob(a){typeof Zone>"u"?kh.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}function sb(...a){}class Ai{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vl(!1),this.onMicrotaskEmpty=new Vl(!1),this.onStable=new Vl(!1),this.onError=new Vl(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!f&&u,m.shouldCoalesceRunChangeDetection=f,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function qR(){let a=hn.requestAnimationFrame,l=hn.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const f=l[Zone.__symbol__("OriginalDelegate")];f&&(l=f)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function $o(a){const l=()=>{!function MS(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(hn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Xx(a),a.isCheckStableRunning=!0,Rh(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Xx(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,f,m,g,b,E)=>{try{return Jx(a),u.invokeTask(m,g,b,E)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||a.shouldCoalesceRunChangeDetection)&&l(),Ja(a)}},onInvoke:(u,f,m,g,b,E,T)=>{try{return Jx(a),u.invoke(m,g,b,E,T)}finally{a.shouldCoalesceRunChangeDetection&&l(),Ja(a)}},onHasTask:(u,f,m,g)=>{u.hasTask(m,g),f===m&&("microTask"==g.change?(a._hasPendingMicrotasks=g.microTask,Xx(a),Rh(a)):"macroTask"==g.change&&(a.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,f,m,g)=>(u.handleError(m,g),a.runOutsideAngular(()=>a.onError.emit(g)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ai.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(Ai.isInAngularZone())throw new ce(909,!1)}run(l,u,f){return this._inner.run(l,u,f)}runTask(l,u,f,m){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+m,l,c_,sb,sb);try{return g.runTask(b,u,f)}finally{g.cancelTask(b)}}runGuarded(l,u,f){return this._inner.runGuarded(l,u,f)}runOutsideAngular(l){return this._outer.run(l)}}const c_={};function Rh(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Xx(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Jx(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Ja(a){a._nesting--,Rh(a)}class kS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vl,this.onMicrotaskEmpty=new Vl,this.onStable=new Vl,this.onError=new Vl}run(l,u,f){return l.apply(u,f)}runGuarded(l,u,f){return l.apply(u,f)}runOutsideAngular(l){return l()}runTask(l,u,f,m){return l.apply(u,f)}}const d_=new Ln("",{providedIn:"root",factory:eE});function eE(){const a=_n(Ai);let l=!0;const u=new ae.y(m=>{l=a.isStable&&!a.hasPendingMacrotasks&&!a.hasPendingMicrotasks,a.runOutsideAngular(()=>{m.next(l),m.complete()})}),f=new ae.y(m=>{let g;a.runOutsideAngular(()=>{g=a.onStable.subscribe(()=>{Ai.assertNotInAngularZone(),ob(()=>{!l&&!a.hasPendingMacrotasks&&!a.hasPendingMicrotasks&&(l=!0,m.next(!0))})})});const b=a.onUnstable.subscribe(()=>{Ai.assertInAngularZone(),l&&(l=!1,a.runOutsideAngular(()=>{m.next(!1)}))});return()=>{g.unsubscribe(),b.unsubscribe()}});return(0,le.T)(u,f.pipe((0,Me.B)()))}const RS=new Ln(""),PS=new Ln("");let tE,YR=(()=>{class a{constructor(u,f,m){this._ngZone=u,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tE||(function ZR(a){tE=a}(m),m.addToWindow(f)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ai.assertNotInAngularZone(),ob(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ob(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(u)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,f,m){let g=-1;f&&f>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),u(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:m})}whenStable(u,f,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,f,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,f,m){return[]}}return a.\u0275fac=function(u){return new(u||a)(qn(Ai),qn(OS),qn(PS))},a.\u0275prov=Wt({token:a,factory:a.\u0275fac}),a})(),OS=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,f){this._applications.set(u,f)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,f=!0){return tE?.findTestabilityInTree(this,u,f)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Wt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),Gd=null;const NS=new Ln("AllowMultipleToken"),nE=new Ln("PlatformDestroyListeners"),iE=new Ln("appBootstrapListener");class XR{constructor(l,u){this.name=l,this.token=u}}function US(a,l,u=[]){const f=`Platform: ${l}`,m=new Ln(f);return(g=[])=>{let b=jl();if(!b||b.injector.get(NS,!1)){const E=[...u,...g,{provide:m,useValue:!0}];a?a(E):function LS(a){if(Gd&&!Gd.get(NS,!1))throw new ce(400,!1);(function FS(){!function ff(a){hf=a}(()=>{throw new ce(600,!1)})})(),Gd=a;const l=a.get(sE);(function rE(a){a.get(ja,null)?.forEach(u=>u())})(a)}(function Xr(a=[],l){return Nd.create({name:l,providers:[{provide:Z0,useValue:"platform"},{provide:nE,useValue:new Set([()=>Gd=null])},...a]})}(E,f))}return function oE(a){const l=jl();if(!l)throw new ce(401,!1);return l}()}}function jl(){return Gd?.get(sE)??null}let sE=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,f){const m=function ab(a="zone.js",l){return"noop"===a?new kS:"zone.js"===a?new Ai(l):a}(f?.ngZone,function Mi(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:a?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:a?.runCoalescing??!1}}({eventCoalescing:f?.ngZoneEventCoalescing,runCoalescing:f?.ngZoneRunCoalescing}));return m.run(()=>{const g=function BT(a,l,u){return new Ix(a,l,u)}(u.moduleType,this.injector,function Nc(a){return[{provide:Ai,useFactory:a},{provide:$f,multi:!0,useFactory:()=>{const l=_n(Jr,{optional:!0});return()=>l.initialize()}},{provide:aE,useFactory:nP},{provide:d_,useFactory:eE}]}(()=>m)),b=g.injector.get(uh,null);return m.runOutsideAngular(()=>{const E=m.onError.subscribe({next:T=>{b.handleError(T)}});g.onDestroy(()=>{Oc(this._modules,g),E.unsubscribe()})}),function uo(a,l,u){try{const f=u();return _h(f)?f.catch(m=>{throw l.runOutsideAngular(()=>a.handleError(m)),m}):f}catch(f){throw l.runOutsideAngular(()=>a.handleError(f)),f}}(b,m,()=>{const E=g.injector.get(Bm);return E.runInitializers(),E.donePromise.then(()=>(function Tv(a){pt(a,"Expected localeId to be defined"),"string"==typeof a&&(Iv=a.toLowerCase().replace(/_/g,"-"))}(g.injector.get(l_,bh)||bh),this._moduleDoBootstrap(g),g))})})}bootstrapModule(u,f=[]){const m=Hi({},f);return function KR(a,l,u){const f=new Tx(u);return Promise.resolve(f)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,m))}_moduleDoBootstrap(u){const f=u.injector.get(Ph);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(m=>f.bootstrap(m));else{if(!u.instance.ngDoBootstrap)throw new ce(-403,!1);u.instance.ngDoBootstrap(f)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const u=this._injector.get(nE,null);u&&(u.forEach(f=>f()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(qn(Nd))},a.\u0275prov=Wt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function Hi(a,l){return Array.isArray(l)?l.reduce(Hi,a):{...a,...l}}let Ph=(()=>{class a{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_n(aE),this.zoneIsStable=_n(d_),this.componentTypes=[],this.components=[],this.isStable=_n(Zx).hasPendingTasks.pipe((0,Ue.w)(u=>u?(0,pe.of)(!1):this.zoneIsStable),(0,xe.x)(),(0,Me.B)()),this._injector=_n(Cc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,f){const m=u instanceof Qf;if(!this._injector.get(Bm).done)throw!m&&Q(u),new ce(405,!1);let b;b=m?u:this._injector.get(ig).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const E=function QR(a){return a.isBoundToModule}(b)?void 0:this._injector.get(Rc),M=b.create(Nd.NULL,[],f||b.selector,E),O=M.location.nativeElement,W=M.injector.get(RS,null);return W?.registerApplication(O),M.onDestroy(()=>{this.detachView(M.hostView),Oc(this.components,M),W?.unregisterApplication(O)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const f=u;this._views.push(f),f.attachToAppRef(this)}detachView(u){const f=u;Oc(this._views,f),f.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const f=this._injector.get(iE,[]);f.push(...this._bootstrapListeners),f.forEach(m=>m(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Oc(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ce(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Wt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Oc(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}const aE=new Ln("",{providedIn:"root",factory:()=>_n(uh).handleError.bind(void 0)});function nP(){const a=_n(Ai),l=_n(uh);return u=>a.runOutsideAngular(()=>l.handleError(u))}let Jr=(()=>{class a{constructor(){this.zone=_n(Ai),this.applicationRef=_n(Ph)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Wt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Fc(){return!1}let Wd=(()=>{class a{}return a.__NG_ELEMENT_ID__=qd,a})();function qd(a){return function cb(a,l,u){if(ns(a)&&!u){const f=No(a.index,l);return new kl(f,f)}return 47&a.type?new kl(l[_i],l):null}(lr(),Ve(),16==(16&a))}class hE{constructor(){}supports(l){return sv(l)}create(l){return new Yd(l)}}const Wi=(a,l)=>l;class Yd{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Wi}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,f=this._removalsHead,m=0,g=null;for(;u||f;){const b=!f||u&&u.currentIndex<zS(f,m,g)?u:f,E=zS(b,m,g),T=b.currentIndex;if(b===f)m--,f=f._nextRemoved;else if(u=u._next,null==b.previousIndex)m++;else{g||(g=[]);const M=E-m,O=T-m;if(M!=O){for(let ne=0;ne<M;ne++){const de=ne<g.length?g[ne]:g[ne]=0,Fe=de+ne;O<=Fe&&Fe<M&&(g[ne]=de+1)}g[b.previousIndex]=O-M}}E!==T&&l(b,E,T)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!sv(l))throw new ce(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let m,g,b,u=this._itHead,f=!1;if(Array.isArray(l)){this.length=l.length;for(let E=0;E<this.length;E++)g=l[E],b=this._trackByFn(E,g),null!==u&&Object.is(u.trackById,b)?(f&&(u=this._verifyReinsertion(u,g,b,E)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,b,E),f=!0),u=u._next}else m=0,function k1(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Symbol.iterator]();let f;for(;!(f=u.next()).done;)l(f.value)}}(l,E=>{b=this._trackByFn(m,E),null!==u&&Object.is(u.trackById,b)?(f&&(u=this._verifyReinsertion(u,E,b,m)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,b,m),f=!0),u=u._next,m++}),this.length=m;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,f,m){let g;return null===l?g=this._itTail:(g=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,g,m)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(f,m))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,g,m)):l=this._addAfter(new VS(u,f),g,m),l}_verifyReinsertion(l,u,f,m){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==g?l=this._reinsertAfter(g,l._prev,m):l.currentIndex!=m&&(l.currentIndex=m,this._addToMoves(l,m)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const m=l._prevRemoved,g=l._nextRemoved;return null===m?this._removalsHead=g:m._nextRemoved=g,null===g?this._removalsTail=m:g._prevRemoved=m,this._insertAfter(l,u,f),this._addToMoves(l,f),l}_moveAfter(l,u,f){return this._unlink(l),this._insertAfter(l,u,f),this._addToMoves(l,f),l}_addAfter(l,u,f){return this._insertAfter(l,u,f),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,f){const m=null===u?this._itHead:u._next;return l._next=m,l._prev=u,null===m?this._itTail=l:m._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new Lh),this._linkedRecords.put(l),l.currentIndex=f,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,f=l._next;return null===u?this._itHead=f:u._next=f,null===f?this._itTail=u:f._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Lh),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class VS{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class HS{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===u||u<=f.currentIndex)&&Object.is(f.trackById,l))return f;return null}remove(l){const u=l._prevDup,f=l._nextDup;return null===u?this._head=f:u._nextDup=f,null===f?this._tail=u:f._prevDup=u,null===this._head}}class Lh{constructor(){this.map=new Map}put(l){const u=l.trackById;let f=this.map.get(u);f||(f=new HS,this.map.set(u,f)),f.add(l)}get(l,u){const m=this.map.get(l);return m?m.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zS(a,l,u){const f=a.previousIndex;if(null===f)return f;let m=0;return u&&f<u.length&&(m=u[f]),f+l+m}class fE{constructor(){}supports(l){return l instanceof Map||_g(l)}create(){return new On}}class On{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||_g(l)))throw new ce(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(f,m)=>{if(u&&u.key===m)this._maybeAddToChanges(u,f),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(m,f);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let f=u;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const f=l._prev;return u._next=l,u._prev=f,l._prev=u,f&&(f._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const m=this._records.get(l);this._maybeAddToChanges(m,u);const g=m._prev,b=m._next;return g&&(g._next=b),b&&(b._prev=g),m._next=null,m._prev=null,m}const f=new ui(l);return this._records.set(l,f),f.currentValue=u,this._addToAdditions(f),f}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(f=>u(l[f],f))}}class ui{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Uh(){return new h_([new hE])}let h_=(()=>{class a{constructor(u){this.factories=u}static create(u,f){if(null!=f){const m=f.factories.slice();u=u.concat(m)}return new a(u)}static extend(u){return{provide:a,useFactory:f=>a.create(u,f||Uh()),deps:[[a,new Vs,new Cs]]}}find(u){const f=this.factories.find(m=>m.supports(u));if(null!=f)return f;throw new ce(901,!1)}}return a.\u0275prov=Wt({token:a,providedIn:"root",factory:Uh}),a})();function mE(){return new f_([new fE])}let f_=(()=>{class a{constructor(u){this.factories=u}static create(u,f){if(f){const m=f.factories.slice();u=u.concat(m)}return new a(u)}static extend(u){return{provide:a,useFactory:f=>a.create(u,f||mE()),deps:[[a,new Vs,new Cs]]}}find(u){const f=this.factories.find(m=>m.supports(u));if(f)return f;throw new ce(901,!1)}}return a.\u0275prov=Wt({token:a,providedIn:"root",factory:mE}),a})();const aP=US(null,"core",[]);let lP=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(qn(Ph))},a.\u0275mod=Ca({type:a}),a.\u0275inj=ii({}),a})();function vE(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function JS(a){const l=rn(a);if(!l)return null;const u=new hh(l);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return l.standalone},get isSignal(){return l.signals}}}},3106:(Tt,Pe,z)=>{"use strict";z.d(Pe,{Z:()=>ot});var d=z(9058),q=z(4537),L=z(534),ae=z(7879);class le{constructor(st,Ye){this._delegate=st,this.firebase=Ye,(0,L._addComponent)(st,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=st.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(st){this._delegate.automaticDataCollectionEnabled=st}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(st=>{this._delegate.checkDestroyed(),st()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(st,Ye=L._DEFAULT_ENTRY_NAME){var Et;this._delegate.checkDestroyed();const Ct=this._delegate.container.getProvider(st);return!Ct.isInitialized()&&"EXPLICIT"===(null===(Et=Ct.getComponent())||void 0===Et?void 0:Et.instantiationMode)&&Ct.initialize(),Ct.getImmediate({identifier:Ye})}_removeServiceInstance(st,Ye=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(st).clearInstance(Ye)}_addComponent(st){(0,L._addComponent)(this._delegate,st)}_addOrOverwriteComponent(st){(0,L._addOrOverwriteComponent)(this._delegate,st)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Me=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function xe(){const Ne=function Ue(Ne){const st={},Ye={__esModule:!0,initializeApp:function ce($e,oe={}){const ht=L.initializeApp($e,oe);if((0,d.r3)(st,ht.name))return st[ht.name];const Xe=new Ne(ht,Ye);return st[ht.name]=Xe,Xe},app:Ct,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function fe($e){const oe=$e.name,ht=oe.replace("-compat","");if(L._registerComponent($e)&&"PUBLIC"===$e.type){const Xe=(mn=Ct())=>{if("function"!=typeof mn[ht])throw Me.create("invalid-app-argument",{appName:oe});return mn[ht]()};void 0!==$e.serviceProps&&(0,d.ZB)(Xe,$e.serviceProps),Ye[ht]=Xe,Ne.prototype[ht]=function(...mn){return this._getService.bind(this,oe).apply(this,$e.multipleInstances?mn:[])}}return"PUBLIC"===$e.type?Ye[ht]:null},removeApp:function Et($e){delete st[$e]},useAsService:function Ee($e,oe){return"serverAuth"===oe?null:oe},modularAPIs:L}};function Ct($e){if(!(0,d.r3)(st,$e=$e||L._DEFAULT_ENTRY_NAME))throw Me.create("no-app",{appName:$e});return st[$e]}return Ye.default=Ye,Object.defineProperty(Ye,"apps",{get:function Re(){return Object.keys(st).map($e=>st[$e])}}),Ct.App=Ne,Ye}(le);return Ne.INTERNAL=Object.assign(Object.assign({},Ne.INTERNAL),{createFirebaseNamespace:xe,extendNamespace:function st(Ye){(0,d.ZB)(Ne,Ye)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ne}(),J=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ne=self.firebase.SDK_VERSION;Ne&&Ne.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ot=K;!function Oe(Ne){(0,L.registerVersion)("@firebase/app-compat","0.2.13",Ne)}()},534:(Tt,Pe,z)=>{"use strict";z.r(Pe),z.d(Pe,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>io,_DEFAULT_ENTRY_NAME:()=>ut,_addComponent:()=>Ni,_addOrOverwriteComponent:()=>Ir,_apps:()=>Lt,_clearComponents:()=>Sn,_components:()=>gn,_getProvider:()=>fi,_registerComponent:()=>hn,_removeServiceInstance:()=>no,deleteApp:()=>Wn,getApp:()=>sr,getApps:()=>Kn,initializeApp:()=>ko,onLog:()=>Di,registerVersion:()=>Qn,setLogLevel:()=>qn});var d=z(5861),q=z(4537),L=z(7879),ae=z(9058);const le=(Ce,he)=>he.some(We=>Ce instanceof We);let pe,Me;const K=new WeakMap,J=new WeakMap,ue=new WeakMap,Ge=new WeakMap,Oe=new WeakMap;let st={get(Ce,he,We){if(Ce instanceof IDBTransaction){if("done"===he)return J.get(Ce);if("objectStoreNames"===he)return Ce.objectStoreNames||ue.get(Ce);if("store"===he)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return ce(Ce[he])},set:(Ce,he,We)=>(Ce[he]=We,!0),has:(Ce,he)=>Ce instanceof IDBTransaction&&("done"===he||"store"===he)||he in Ce};function Ct(Ce){return"function"==typeof Ce?function Et(Ce){return Ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return Me||(Me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ce)?function(...he){return Ce.apply(Re(this),he),ce(K.get(this))}:function(...he){return ce(Ce.apply(Re(this),he))}:function(he,...We){const Dt=Ce.call(Re(this),he,...We);return ue.set(Dt,he.sort?he.sort():[he]),ce(Dt)}}(Ce):(Ce instanceof IDBTransaction&&function Ne(Ce){if(J.has(Ce))return;const he=new Promise((We,Dt)=>{const Ht=()=>{Ce.removeEventListener("complete",en),Ce.removeEventListener("error",yn),Ce.removeEventListener("abort",yn)},en=()=>{We(),Ht()},yn=()=>{Dt(Ce.error||new DOMException("AbortError","AbortError")),Ht()};Ce.addEventListener("complete",en),Ce.addEventListener("error",yn),Ce.addEventListener("abort",yn)});J.set(Ce,he)}(Ce),le(Ce,function Ue(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ce,st):Ce)}function ce(Ce){if(Ce instanceof IDBRequest)return function ot(Ce){const he=new Promise((We,Dt)=>{const Ht=()=>{Ce.removeEventListener("success",en),Ce.removeEventListener("error",yn)},en=()=>{We(ce(Ce.result)),Ht()},yn=()=>{Dt(Ce.error),Ht()};Ce.addEventListener("success",en),Ce.addEventListener("error",yn)});return he.then(We=>{We instanceof IDBCursor&&K.set(We,Ce)}).catch(()=>{}),Oe.set(he,Ce),he}(Ce);if(Ge.has(Ce))return Ge.get(Ce);const he=Ct(Ce);return he!==Ce&&(Ge.set(Ce,he),Oe.set(he,Ce)),he}const Re=Ce=>Oe.get(Ce),$e=["get","getKey","getAll","getAllKeys","count"],oe=["put","add","delete","clear"],ht=new Map;function Xe(Ce,he){if(!(Ce instanceof IDBDatabase)||he in Ce||"string"!=typeof he)return;if(ht.get(he))return ht.get(he);const We=he.replace(/FromIndex$/,""),Dt=he!==We,Ht=oe.includes(We);if(!(We in(Dt?IDBIndex:IDBObjectStore).prototype)||!Ht&&!$e.includes(We))return;const en=function(){var yn=(0,d.Z)(function*(Ji,...mi){const mo=this.transaction(Ji,Ht?"readwrite":"readonly");let ar=mo.store;return Dt&&(ar=ar.index(mi.shift())),(yield Promise.all([ar[We](...mi),Ht&&mo.done]))[0]});return function(mi){return yn.apply(this,arguments)}}();return ht.set(he,en),en}!function Ye(Ce){st=Ce(st)}(Ce=>({...Ce,get:(he,We,Dt)=>Xe(he,We)||Ce.get(he,We,Dt),has:(he,We)=>!!Xe(he,We)||Ce.has(he,We)}));class mn{constructor(he){this.container=he}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function Oi(Ce){const he=Ce.getComponent();return"VERSION"===he?.type}(We)){const Dt=We.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(We=>We).join(" ")}}const qi="@firebase/app",ye=new L.Yd("@firebase/app"),ut="[DEFAULT]",At={[qi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Lt=new Map,gn=new Map;function Ni(Ce,he){try{Ce.container.addComponent(he)}catch(We){ye.debug(`Component ${he.name} failed to register with FirebaseApp ${Ce.name}`,We)}}function Ir(Ce,he){Ce.container.addOrOverwriteComponent(he)}function hn(Ce){const he=Ce.name;if(gn.has(he))return ye.debug(`There were multiple attempts to register component ${he}.`),!1;gn.set(he,Ce);for(const We of Lt.values())Ni(We,Ce);return!0}function fi(Ce,he){const We=Ce.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),Ce.container.getProvider(he)}function no(Ce,he,We=ut){fi(Ce,he).clearInstance(We)}function Sn(){gn.clear()}const Kt=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ri{constructor(he,We,Dt){this._isDeleted=!1,this._options=Object.assign({},he),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this.checkDestroyed(),this._automaticDataCollectionEnabled=he}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(he){this._isDeleted=he}checkDestroyed(){if(this.isDeleted)throw Kt.create("app-deleted",{appName:this._name})}}const io="9.23.0";function ko(Ce,he={}){let We=Ce;"object"!=typeof he&&(he={name:he});const Dt=Object.assign({name:ut,automaticDataCollectionEnabled:!1},he),Ht=Dt.name;if("string"!=typeof Ht||!Ht)throw Kt.create("bad-app-name",{appName:String(Ht)});if(We||(We=(0,ae.aH)()),!We)throw Kt.create("no-options");const en=Lt.get(Ht);if(en){if((0,ae.vZ)(We,en.options)&&(0,ae.vZ)(Dt,en.config))return en;throw Kt.create("duplicate-app",{appName:Ht})}const yn=new q.H0(Ht);for(const mi of gn.values())yn.addComponent(mi);const Ji=new ri(We,Dt,yn);return Lt.set(Ht,Ji),Ji}function sr(Ce=ut){const he=Lt.get(Ce);if(!he&&Ce===ut&&(0,ae.aH)())return ko();if(!he)throw Kt.create("no-app",{appName:Ce});return he}function Kn(){return Array.from(Lt.values())}function Wn(Ce){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,d.Z)(function*(Ce){const he=Ce.name;Lt.has(he)&&(Lt.delete(he),yield Promise.all(Ce.container.getProviders().map(We=>We.delete())),Ce.isDeleted=!0)})).apply(this,arguments)}function Qn(Ce,he,We){var Dt;let Ht=null!==(Dt=At[Ce])&&void 0!==Dt?Dt:Ce;We&&(Ht+=`-${We}`);const en=Ht.match(/\s|\//),yn=he.match(/\s|\//);if(en||yn){const Ji=[`Unable to register library "${Ht}" with version "${he}":`];return en&&Ji.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),en&&yn&&Ji.push("and"),yn&&Ji.push(`version name "${he}" contains illegal characters (whitespace or "/")`),void ye.warn(Ji.join(" "))}hn(new q.wA(`${Ht}-version`,()=>({library:Ht,version:he}),"VERSION"))}function Di(Ce,he){if(null!==Ce&&"function"!=typeof Ce)throw Kt.create("invalid-log-argument");(0,L.Am)(Ce,he)}function qn(Ce){(0,L.Ub)(Ce)}const Tr="firebase-heartbeat-database",_n=1,X="firebase-heartbeat-store";let Z=null;function V(){return Z||(Z=function fe(Ce,he,{blocked:We,upgrade:Dt,blocking:Ht,terminated:en}={}){const yn=indexedDB.open(Ce,he),Ji=ce(yn);return Dt&&yn.addEventListener("upgradeneeded",mi=>{Dt(ce(yn.result),mi.oldVersion,mi.newVersion,ce(yn.transaction),mi)}),We&&yn.addEventListener("blocked",mi=>We(mi.oldVersion,mi.newVersion,mi)),Ji.then(mi=>{en&&mi.addEventListener("close",()=>en()),Ht&&mi.addEventListener("versionchange",mo=>Ht(mo.oldVersion,mo.newVersion,mo))}).catch(()=>{}),Ji}(Tr,_n,{upgrade:(Ce,he)=>{0===he&&Ce.createObjectStore(X)}}).catch(Ce=>{throw Kt.create("idb-open",{originalErrorMessage:Ce.message})})),Z}function F(){return(F=(0,d.Z)(function*(Ce){try{return yield(yield V()).transaction(X).objectStore(X).get(rt(Ce))}catch(he){if(he instanceof ae.ZR)ye.warn(he.message);else{const We=Kt.create("idb-get",{originalErrorMessage:he?.message});ye.warn(We.message)}}})).apply(this,arguments)}function re(Ce,he){return Te.apply(this,arguments)}function Te(){return(Te=(0,d.Z)(function*(Ce,he){try{const Dt=(yield V()).transaction(X,"readwrite");yield Dt.objectStore(X).put(he,rt(Ce)),yield Dt.done}catch(We){if(We instanceof ae.ZR)ye.warn(We.message);else{const Dt=Kt.create("idb-set",{originalErrorMessage:We?.message});ye.warn(Dt.message)}}})).apply(this,arguments)}function rt(Ce){return`${Ce.name}!${Ce.options.appId}`}class Mt{constructor(he){this.container=he,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new Jt(We),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var he=this;return(0,d.Z)(function*(){const Dt=he.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ht=$t();if(null===he._heartbeatsCache&&(he._heartbeatsCache=yield he._heartbeatsCachePromise),he._heartbeatsCache.lastSentHeartbeatDate!==Ht&&!he._heartbeatsCache.heartbeats.some(en=>en.date===Ht))return he._heartbeatsCache.heartbeats.push({date:Ht,agent:Dt}),he._heartbeatsCache.heartbeats=he._heartbeatsCache.heartbeats.filter(en=>{const yn=new Date(en.date).valueOf();return Date.now()-yn<=2592e6}),he._storage.overwrite(he._heartbeatsCache)})()}getHeartbeatsHeader(){var he=this;return(0,d.Z)(function*(){if(null===he._heartbeatsCache&&(yield he._heartbeatsCachePromise),null===he._heartbeatsCache||0===he._heartbeatsCache.heartbeats.length)return"";const We=$t(),{heartbeatsToSend:Dt,unsentEntries:Ht}=function Fn(Ce,he=1024){const We=[];let Dt=Ce.slice();for(const Ht of Ce){const en=We.find(yn=>yn.agent===Ht.agent);if(en){if(en.dates.push(Ht.date),zi(We)>he){en.dates.pop();break}}else if(We.push({agent:Ht.agent,dates:[Ht.date]}),zi(We)>he){We.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:We,unsentEntries:Dt}}(he._heartbeatsCache.heartbeats),en=(0,ae.L)(JSON.stringify({version:2,heartbeats:Dt}));return he._heartbeatsCache.lastSentHeartbeatDate=We,Ht.length>0?(he._heartbeatsCache.heartbeats=Ht,yield he._storage.overwrite(he._heartbeatsCache)):(he._heartbeatsCache.heartbeats=[],he._storage.overwrite(he._heartbeatsCache)),en})()}}function $t(){return(new Date).toISOString().substring(0,10)}class Jt{constructor(he){this.app=he,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var he=this;return(0,d.Z)(function*(){return(yield he._canUseIndexedDBPromise)&&(yield function $(Ce){return F.apply(this,arguments)}(he.app))||{heartbeats:[]}})()}overwrite(he){var We=this;return(0,d.Z)(function*(){var Dt;if(yield We._canUseIndexedDBPromise){const en=yield We.read();return re(We.app,{lastSentHeartbeatDate:null!==(Dt=he.lastSentHeartbeatDate)&&void 0!==Dt?Dt:en.lastSentHeartbeatDate,heartbeats:he.heartbeats})}})()}add(he){var We=this;return(0,d.Z)(function*(){var Dt;if(yield We._canUseIndexedDBPromise){const en=yield We.read();return re(We.app,{lastSentHeartbeatDate:null!==(Dt=he.lastSentHeartbeatDate)&&void 0!==Dt?Dt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...he.heartbeats]})}})()}}function zi(Ce){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ce})).length}!function Xi(Ce){hn(new q.wA("platform-logger",he=>new mn(he),"PRIVATE")),hn(new q.wA("heartbeat",he=>new Mt(he),"PRIVATE")),Qn(qi,"0.9.13",Ce),Qn(qi,"0.9.13","esm2017"),Qn("fire-js","")}("")},4537:(Tt,Pe,z)=>{"use strict";z.d(Pe,{H0:()=>Ue,wA:()=>L,zt:()=>le});var d=z(5861),q=z(9058);class L{constructor(K,J,ue){this.name=K,this.instanceFactory=J,this.type=ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ae="[DEFAULT]";class le{constructor(K,J){this.name=K,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const J=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(J)){const ue=new q.BH;if(this.instancesDeferred.set(J,ue),this.isInitialized(J)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:J});Ge&&ue.resolve(Ge)}catch{}}return this.instancesDeferred.get(J).promise}getImmediate(K){var J;const ue=this.normalizeInstanceIdentifier(K?.identifier),Ge=null!==(J=K?.optional)&&void 0!==J&&J;if(!this.isInitialized(ue)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ue})}catch(Oe){if(Ge)return null;throw Oe}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function Me(xe){return"EAGER"===xe.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[J,ue]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(J);try{const Oe=this.getOrInitializeService({instanceIdentifier:Ge});ue.resolve(Oe)}catch{}}}}clearInstance(K=ae){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,d.Z)(function*(){const J=Array.from(K.instances.values());yield Promise.all([...J.filter(ue=>"INTERNAL"in ue).map(ue=>ue.INTERNAL.delete()),...J.filter(ue=>"_delete"in ue).map(ue=>ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ae){return this.instances.has(K)}getOptions(K=ae){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:J={}}=K,ue=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(ue))throw Error(`${this.name}(${ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ue,options:J});for(const[Oe,ot]of this.instancesDeferred.entries())ue===this.normalizeInstanceIdentifier(Oe)&&ot.resolve(Ge);return Ge}onInit(K,J){var ue;const Ge=this.normalizeInstanceIdentifier(J),Oe=null!==(ue=this.onInitCallbacks.get(Ge))&&void 0!==ue?ue:new Set;Oe.add(K),this.onInitCallbacks.set(Ge,Oe);const ot=this.instances.get(Ge);return ot&&K(ot,Ge),()=>{Oe.delete(K)}}invokeOnInitCallbacks(K,J){const ue=this.onInitCallbacks.get(J);if(ue)for(const Ge of ue)try{Ge(K,J)}catch{}}getOrInitializeService({instanceIdentifier:K,options:J={}}){let ue=this.instances.get(K);if(!ue&&this.component&&(ue=this.component.instanceFactory(this.container,{instanceIdentifier:(xe=K,xe===ae?void 0:xe),options:J}),this.instances.set(K,ue),this.instancesOptions.set(K,J),this.invokeOnInitCallbacks(ue,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,ue)}catch{}var xe;return ue||null}normalizeInstanceIdentifier(K=ae){return this.component?this.component.multipleInstances?K:ae:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ue{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const J=this.getProvider(K.name);if(J.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);J.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const J=new le(K,this);return this.providers.set(K,J),J}getProviders(){return Array.from(this.providers.values())}}},7879:(Tt,Pe,z)=>{"use strict";z.d(Pe,{Am:()=>xe,Ub:()=>Ue,Yd:()=>Me,in:()=>q});const d=[];var q=(()=>((q=q||{})[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",q))();const L={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},ae=q.INFO,le={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},pe=(K,J,...ue)=>{if(J<K.logLevel)return;const Ge=(new Date).toISOString(),Oe=le[J];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);console[Oe](`[${Ge}]  ${K.name}:`,...ue)};class Me{constructor(J){this.name=J,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in q))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"==typeof J?L[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(...J){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...J),this._logHandler(this,q.DEBUG,...J)}log(...J){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...J),this._logHandler(this,q.VERBOSE,...J)}info(...J){this._userLogHandler&&this._userLogHandler(this,q.INFO,...J),this._logHandler(this,q.INFO,...J)}warn(...J){this._userLogHandler&&this._userLogHandler(this,q.WARN,...J),this._logHandler(this,q.WARN,...J)}error(...J){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...J),this._logHandler(this,q.ERROR,...J)}}function Ue(K){d.forEach(J=>{J.setLogLevel(K)})}function xe(K,J){for(const ue of d){let Ge=null;J&&J.level&&(Ge=L[J.level]),ue.userLogHandler=null===K?null:(Oe,ot,...Ne)=>{const st=Ne.map(Ye=>{if(null==Ye)return null;if("string"==typeof Ye)return Ye;if("number"==typeof Ye||"boolean"==typeof Ye)return Ye.toString();if(Ye instanceof Error)return Ye.message;try{return JSON.stringify(Ye)}catch{return null}}).filter(Ye=>Ye).join(" ");ot>=(Ge??Oe.logLevel)&&K({level:q[ot].toLowerCase(),message:st,args:Ne,type:Oe.name})}}}},3182:(Tt,Pe,z)=>{"use strict";z.d(Pe,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=z(534);(0,d.registerVersion)("firebase","9.23.0","app")},7142:(Tt,Pe,z)=>{"use strict";z.d(Pe,{Z:()=>d.Z});var d=z(3106);d.Z.registerVersion("firebase","9.23.0","app-compat")},6365:(Tt,Pe,z)=>{"use strict";z.r(Pe);var d=z(5861),q=z(3106),L=z(6878),ae=z(9058),Me=(z(534),z(7879),z(4537));function Ue(){return window}function J(){return J=(0,d.Z)(function*(V,$,F){var re;const{BuildInfo:Te}=Ue();(0,L.as)($.sessionId,"AuthEvent did not contain a session ID");const rt=yield function Ye(V){return Et.apply(this,arguments)}($.sessionId),Nt={};return(0,L.at)()?Nt.ibi=Te.packageName:(0,L.au)()?Nt.apn=Te.packageName:(0,L.av)(V,"operation-not-supported-in-this-environment"),Te.displayName&&(Nt.appDisplayName=Te.displayName),Nt.sessionId=rt,(0,L.aw)(V,F,$.type,void 0,null!==(re=$.eventId)&&void 0!==re?re:void 0,Nt)}),J.apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(V){const{BuildInfo:$}=Ue(),F={};(0,L.at)()?F.iosBundleId=$.packageName:(0,L.au)()?F.androidPackageName=$.packageName:(0,L.av)(V,"operation-not-supported-in-this-environment"),yield(0,L.ax)(V,F)})).apply(this,arguments)}function Ne(){return(Ne=(0,d.Z)(function*(V,$,F){const{cordova:re}=Ue();let Te=()=>{};try{yield new Promise((rt,Nt)=>{let Pt=null;function Mt(){var Jt;rt();const zi=null===(Jt=re.plugins.browsertab)||void 0===Jt?void 0:Jt.close;"function"==typeof zi&&zi(),"function"==typeof F?.close&&F.close()}function $t(){Pt||(Pt=window.setTimeout(()=>{Nt((0,L.az)(V,"redirect-cancelled-by-user"))},2e3))}function Fn(){"visible"===document?.visibilityState&&$t()}$.addPassiveListener(Mt),document.addEventListener("resume",$t,!1),(0,L.au)()&&document.addEventListener("visibilitychange",Fn,!1),Te=()=>{$.removePassiveListener(Mt),document.removeEventListener("resume",$t,!1),document.removeEventListener("visibilitychange",Fn,!1),Pt&&window.clearTimeout(Pt)}})}finally{Te()}})).apply(this,arguments)}function Et(){return(Et=(0,d.Z)(function*(V){const $=function Ct(V){if((0,L.as)(/[0-9a-zA-Z]+/.test(V),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(V);const $=new ArrayBuffer(V.length),F=new Uint8Array($);for(let re=0;re<V.length;re++)F[re]=V.charCodeAt(re);return F}(V),F=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(F)).map(Te=>Te.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Re extends L.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(F=>F($)),super.onEvent($)}initialized(){var $=this;return(0,d.Z)(function*(){yield $.initPromise})()}}function $e(V){return oe.apply(this,arguments)}function oe(){return(oe=(0,d.Z)(function*(V){const $=yield mn()._get(Oi(V));return $&&(yield mn()._remove(Oi(V))),$})).apply(this,arguments)}function Xe(){const V=[];for(let F=0;F<20;F++){const re=Math.floor(62*Math.random());V.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(re))}return V.join("")}function mn(){return(0,L.aC)(L.b)}function Oi(V){return(0,L.aD)("authEvent",V.config.apiKey,V.name)}function ye(V){if(!V?.includes("?"))return{};const[$,...F]=V.split("?");return(0,ae.zd)(F.join("?"))}const qe=class Le{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize($){var F=this;return(0,d.Z)(function*(){const re=$._key();let Te=F.eventManagers.get(re);return Te||(Te=new Re($),F.eventManagers.set(re,Te),F.attachCallbackListeners($,Te)),Te})()}_openPopup($){(0,L.av)($,"operation-not-supported-in-this-environment")}_openRedirect($,F,re,Te){var rt=this;return(0,d.Z)(function*(){!function st(V){var $,F,re,Te,rt,Nt,Pt,Mt,$t,Fn;const Jt=Ue();(0,L.aA)("function"==typeof(null===($=Jt?.universalLinks)||void 0===$?void 0:$.subscribe),V,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aA)(typeof(null===(F=Jt?.BuildInfo)||void 0===F?void 0:F.packageName)<"u",V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aA)("function"==typeof(null===(rt=null===(Te=null===(re=Jt?.cordova)||void 0===re?void 0:re.plugins)||void 0===Te?void 0:Te.browsertab)||void 0===rt?void 0:rt.openUrl),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(Mt=null===(Pt=null===(Nt=Jt?.cordova)||void 0===Nt?void 0:Nt.plugins)||void 0===Pt?void 0:Pt.browsertab)||void 0===Mt?void 0:Mt.isAvailable),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(Fn=null===($t=Jt?.cordova)||void 0===$t?void 0:$t.InAppBrowser)||void 0===Fn?void 0:Fn.open),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const Nt=yield rt._initialize($);yield Nt.initialized(),Nt.resetRedirect(),(0,L.aG)(),yield rt._originValidation($);const Pt=function fe(V,$,F=null){return{type:$,eventId:F,urlResponse:null,sessionId:Xe(),postBody:null,tenantId:V.tenantId,error:(0,L.az)(V,"no-auth-event")}}($,re,Te);yield function Ee(V,$){return mn()._set(Oi(V),$)}($,Pt);const Mt=yield function K(V,$,F){return J.apply(this,arguments)}($,Pt,F),$t=yield function Oe(V){const{cordova:$}=Ue();return new Promise(F=>{$.plugins.browsertab.isAvailable(re=>{let Te=null;re?$.plugins.browsertab.openUrl(V):Te=$.InAppBrowser.open(V,(0,L.ay)()?"_blank":"_system","location=yes"),F(Te)})})}(Mt);return function ot(V,$,F){return Ne.apply(this,arguments)}($,Nt,$t)})()}_isIframeWebStorageSupported($,F){throw new Error("Method not implemented.")}_originValidation($){const F=$._key();return this.originValidationPromises[F]||(this.originValidationPromises[F]=function ue(V){return Ge.apply(this,arguments)}($)),this.originValidationPromises[F]}attachCallbackListeners($,F){const{universalLinks:re,handleOpenURL:Te,BuildInfo:rt}=Ue(),Nt=setTimeout((0,d.Z)(function*(){yield $e($),F.onEvent(tt())}),500),Pt=function(){var Fn=(0,d.Z)(function*(Jt){clearTimeout(Nt);const zi=yield $e($);let Xi=null;zi&&Jt?.url&&(Xi=function ht(V,$){var F,re;const Te=function Ko(V){const $=ye(V),F=$.link?decodeURIComponent($.link):void 0,re=ye(F).link,Te=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return ye(Te).link||Te||re||F||V}($);if(Te.includes("/__/auth/callback")){const rt=ye(Te),Nt=rt.firebaseError?function qi(V){try{return JSON.parse(V)}catch{return null}}(decodeURIComponent(rt.firebaseError)):null,Pt=null===(re=null===(F=Nt?.code)||void 0===F?void 0:F.split("auth/"))||void 0===re?void 0:re[1],Mt=Pt?(0,L.az)(Pt):null;return Mt?{type:V.type,eventId:V.eventId,tenantId:V.tenantId,error:Mt,urlResponse:null,sessionId:null,postBody:null}:{type:V.type,eventId:V.eventId,tenantId:V.tenantId,sessionId:V.sessionId,urlResponse:Te,postBody:null}}return null}(zi,Jt.url)),F.onEvent(Xi||tt())});return function(zi){return Fn.apply(this,arguments)}}();typeof re<"u"&&"function"==typeof re.subscribe&&re.subscribe(null,Pt);const Mt=Te,$t=`${rt.packageName.toLowerCase()}://`;Ue().handleOpenURL=function(){var Fn=(0,d.Z)(function*(Jt){if(Jt.toLowerCase().startsWith($t)&&Pt({url:Jt}),"function"==typeof Mt)try{Mt(Jt)}catch(zi){console.error(zi)}});return function(Jt){return Fn.apply(this,arguments)}}()}};function tt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.az)("no-auth-event")}}function pt(){var V;return(null===(V=self?.location)||void 0===V?void 0:V.protocol)||null}function Gt(V=(0,ae.z$)()){return!("file:"!==pt()&&"ionic:"!==pt()&&"capacitor:"!==pt()||!V.toLowerCase().match(/iphone|ipad|ipod|android/))}function ii(){try{const V=self.localStorage,$=L.aL();if(V)return V.setItem($,"1"),V.removeItem($),!function hi(V=(0,ae.z$)()){return function ln(){return(0,ae.w1)()&&11===document?.documentMode}()||function Wt(V=(0,ae.z$)()){return/Edge\/\d+/.test(V)}(V)}()||(0,ae.hl)()}catch{return Zn()&&(0,ae.hl)()}return!1}function Zn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gn(){return(function Rt(){return"http:"===pt()||"https:"===pt()}()||(0,ae.ru)()||Gt())&&!function wn(){return(0,ae.b$)()||(0,ae.UG)()}()&&ii()&&!Zn()}function or(){return Gt()&&typeof document<"u"}function Yi(){return(Yi=(0,d.Z)(function*(){return!!or()&&new Promise(V=>{const $=setTimeout(()=>{V(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),V(!0)})})})).apply(this,arguments)}const li={LOCAL:"local",NONE:"none",SESSION:"session"},Ki=L.aA,Ei="persistence";function At(V){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,d.Z)(function*(V){yield V._initializationPromise;const $=Ni(),F=L.aD(Ei,V.config.apiKey,V.name);$&&$.setItem(F,V._getPersistence())})).apply(this,arguments)}function Ni(){var V;try{return(null===(V=function Zi(){return typeof window<"u"?window:null}())||void 0===V?void 0:V.sessionStorage)||null}catch{return null}}const Ir=L.aA;class hn{constructor(){this.browserResolver=L.aC(L.k),this.cordovaResolver=L.aC(qe),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize($){var F=this;return(0,d.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._initialize($)})()}_openPopup($,F,re,Te){var rt=this;return(0,d.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openPopup($,F,re,Te)})()}_openRedirect($,F,re,Te){var rt=this;return(0,d.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openRedirect($,F,re,Te)})()}_isIframeWebStorageSupported($,F){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,F)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return or()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ir(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,d.Z)(function*(){if($.underlyingResolver)return;const F=yield function gr(){return Yi.apply(this,arguments)}();$.underlyingResolver=F?$.cordovaResolver:$.browserResolver})()}}function fi(V){return V.unwrap()}function Sn(V){return Kt(V)}function Kt(V){const{_tokenResponse:$}=V instanceof ae.ZR?V.customData:V;if(!$)return null;if(!(V instanceof ae.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return L.P.credentialFromResult(V);const F=$.providerId;if(!F||F===L.p.PASSWORD)return null;let re;switch(F){case L.p.GOOGLE:re=L.V;break;case L.p.FACEBOOK:re=L.U;break;case L.p.GITHUB:re=L.W;break;case L.p.TWITTER:re=L.Z;break;default:const{oauthIdToken:Te,oauthAccessToken:rt,oauthTokenSecret:Nt,pendingToken:Pt,nonce:Mt}=$;return rt||Nt||Te||Pt?Pt?F.startsWith("saml.")?L.aO._create(F,Pt):L.L._fromParams({providerId:F,signInMethod:F,pendingToken:Pt,idToken:Te,accessToken:rt}):new L.X(F).credential({idToken:Te,accessToken:rt,rawNonce:Mt}):null}return V instanceof ae.ZR?re.credentialFromError(V):re.credentialFromResult(V)}function ri(V,$){return $.catch(F=>{throw F instanceof ae.ZR&&function Qi(V,$){var F;const re=null===(F=$.customData)||void 0===F?void 0:F._tokenResponse;if("auth/multi-factor-auth-required"===$?.code)$.resolver=new sr(V,L.aq(V,$));else if(re){const Te=Kt($),rt=$;Te&&(rt.credential=Te,rt.tenantId=re.tenantId||void 0,rt.email=re.email||void 0,rt.phoneNumber=re.phoneNumber||void 0)}}(V,F),F}).then(F=>{const Te=F.user;return{operationType:F.operationType,credential:Sn(F),additionalUserInfo:L.ao(F),user:Kn.getOrCreate(Te)}})}function io(V,$){return ko.apply(this,arguments)}function ko(){return(ko=(0,d.Z)(function*(V,$){const F=yield $;return{verificationId:F.verificationId,confirm:re=>ri(V,F.confirm(re))}})).apply(this,arguments)}class sr{constructor($,F){this.resolver=F,this.auth=function no(V){return V.wrapped()}($)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return ri(fi(this.auth),this.resolver.resolveSignIn($))}}class Kn{constructor($){this._delegate=$,this.multiFactor=L.ar($)}static getOrCreate($){return Kn.USER_MAP.has($)||Kn.USER_MAP.set($,new Kn($)),Kn.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var F=this;return(0,d.Z)(function*(){return ri(F.auth,L.a0(F._delegate,$))})()}linkWithPhoneNumber($,F){var re=this;return(0,d.Z)(function*(){return io(re.auth,L.l(re._delegate,$,F))})()}linkWithPopup($){var F=this;return(0,d.Z)(function*(){return ri(F.auth,L.d(F._delegate,$,hn))})()}linkWithRedirect($){var F=this;return(0,d.Z)(function*(){return yield At(L.aH(F.auth)),L.g(F._delegate,$,hn)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var F=this;return(0,d.Z)(function*(){return ri(F.auth,L.a1(F._delegate,$))})()}reauthenticateWithPhoneNumber($,F){return io(this.auth,L.r(this._delegate,$,F))}reauthenticateWithPopup($){return ri(this.auth,L.e(this._delegate,$,hn))}reauthenticateWithRedirect($){var F=this;return(0,d.Z)(function*(){return yield At(L.aH(F.auth)),L.h(F._delegate,$,hn)})()}sendEmailVerification($){return L.ae(this._delegate,$)}unlink($){var F=this;return(0,d.Z)(function*(){return yield L.an(F._delegate,$),F})()}updateEmail($){return L.aj(this._delegate,$)}updatePassword($){return L.ak(this._delegate,$)}updatePhoneNumber($){return L.u(this._delegate,$)}updateProfile($){return L.ai(this._delegate,$)}verifyBeforeUpdateEmail($,F){return L.af(this._delegate,$,F)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Kn.USER_MAP=new WeakMap;const Wn=L.aA;let Ci=(()=>{class V{constructor(F,re){if(this.app=F,re.isInitialized())return this._delegate=re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Te}=F.options;Wn(Te,"invalid-api-key",{appName:F.name}),Wn(Te,"invalid-api-key",{appName:F.name});const rt=typeof window<"u"?hn:void 0;this._delegate=re.initialize({options:{persistence:Di(Te,F.name),popupRedirectResolver:rt}}),this._delegate._updateErrorMap(L.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Kn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(F){this._delegate.languageCode=F}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(F){this._delegate.tenantId=F}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(F,re){L.I(this._delegate,F,re)}applyActionCode(F){return L.a5(this._delegate,F)}checkActionCode(F){return L.a6(this._delegate,F)}confirmPasswordReset(F,re){return L.a4(this._delegate,F,re)}createUserWithEmailAndPassword(F,re){var Te=this;return(0,d.Z)(function*(){return ri(Te._delegate,L.a8(Te._delegate,F,re))})()}fetchProvidersForEmail(F){return this.fetchSignInMethodsForEmail(F)}fetchSignInMethodsForEmail(F){return L.ad(this._delegate,F)}isSignInWithEmailLink(F){return L.ab(this._delegate,F)}getRedirectResult(){var F=this;return(0,d.Z)(function*(){Wn(Gn(),F._delegate,"operation-not-supported-in-this-environment");const re=yield L.j(F._delegate,hn);return re?ri(F._delegate,Promise.resolve(re)):{credential:null,user:null}})()}addFrameworkForLogging(F){!function Je(V,$){(0,L.aH)(V)._logFramework($)}(this._delegate,F)}onAuthStateChanged(F,re,Te){const{next:rt,error:Nt,complete:Pt}=Qn(F,re,Te);return this._delegate.onAuthStateChanged(rt,Nt,Pt)}onIdTokenChanged(F,re,Te){const{next:rt,error:Nt,complete:Pt}=Qn(F,re,Te);return this._delegate.onIdTokenChanged(rt,Nt,Pt)}sendSignInLinkToEmail(F,re){return L.aa(this._delegate,F,re)}sendPasswordResetEmail(F,re){return L.a3(this._delegate,F,re||void 0)}setPersistence(F){var re=this;return(0,d.Z)(function*(){let Te;switch(function ut(V,$){Ki(Object.values(li).includes($),V,"invalid-persistence-type"),(0,ae.b$)()?Ki($!==li.SESSION,V,"unsupported-persistence-type"):(0,ae.UG)()?Ki($===li.NONE,V,"unsupported-persistence-type"):Zn()?Ki($===li.NONE||$===li.LOCAL&&(0,ae.hl)(),V,"unsupported-persistence-type"):Ki($===li.NONE||ii(),V,"unsupported-persistence-type")}(re._delegate,F),F){case li.SESSION:Te=L.a;break;case li.LOCAL:Te=(yield L.aC(L.i)._isAvailable())?L.i:L.b;break;case li.NONE:Te=L.N;break;default:return L.av("argument-error",{appName:re._delegate.name})}return re._delegate.setPersistence(Te)})()}signInAndRetrieveDataWithCredential(F){return this.signInWithCredential(F)}signInAnonymously(){return ri(this._delegate,L._(this._delegate))}signInWithCredential(F){return ri(this._delegate,L.$(this._delegate,F))}signInWithCustomToken(F){return ri(this._delegate,L.a2(this._delegate,F))}signInWithEmailAndPassword(F,re){return ri(this._delegate,L.a9(this._delegate,F,re))}signInWithEmailLink(F,re){return ri(this._delegate,L.ac(this._delegate,F,re))}signInWithPhoneNumber(F,re){return io(this._delegate,L.s(this._delegate,F,re))}signInWithPopup(F){var re=this;return(0,d.Z)(function*(){return Wn(Gn(),re._delegate,"operation-not-supported-in-this-environment"),ri(re._delegate,L.c(re._delegate,F,hn))})()}signInWithRedirect(F){var re=this;return(0,d.Z)(function*(){return Wn(Gn(),re._delegate,"operation-not-supported-in-this-environment"),yield At(re._delegate),L.f(re._delegate,F,hn)})()}updateCurrentUser(F){return this._delegate.updateCurrentUser(F)}verifyPasswordResetCode(F){return L.a7(this._delegate,F)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return V.Persistence=li,V})();function Qn(V,$,F){let re=V;"function"!=typeof V&&({next:re,error:$,complete:F}=V);const Te=re;return{next:Nt=>Te(Nt&&Kn.getOrCreate(Nt)),error:$,complete:F}}function Di(V,$){const F=function gn(V,$){const F=Ni();if(!F)return[];const re=L.aD(Ei,V,$);switch(F.getItem(re)){case li.NONE:return[L.N];case li.LOCAL:return[L.i,L.a];case li.SESSION:return[L.a];default:return[]}}(V,$);if(typeof self<"u"&&!F.includes(L.i)&&F.push(L.i),typeof window<"u")for(const re of[L.b,L.a])F.includes(re)||F.push(re);return F.includes(L.N)||F.push(L.N),F}class qn{constructor(){this.providerId="phone",this._delegate=new L.P(fi(q.Z.auth()))}static credential($,F){return L.P.credential($,F)}verifyPhoneNumber($,F){return this._delegate.verifyPhoneNumber($,F)}unwrap(){return this._delegate}}qn.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,qn.PROVIDER_ID=L.P.PROVIDER_ID;const Tr=L.aA;class _n{constructor($,F,re=q.Z.app()){var Te;Tr(null===(Te=re.options)||void 0===Te?void 0:Te.apiKey,"invalid-api-key",{appName:re.name}),this._delegate=new L.R($,F,re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Z(V){V.INTERNAL.registerComponent(new Me.wA("auth-compat",$=>{const F=$.getProvider("app-compat").getImmediate(),re=$.getProvider("auth");return new Ci(F,re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.Q,FacebookAuthProvider:L.U,GithubAuthProvider:L.W,GoogleAuthProvider:L.V,OAuthProvider:L.X,SAMLAuthProvider:L.Y,PhoneAuthProvider:qn,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:_n,TwitterAuthProvider:L.Z,Auth:Ci,AuthCredential:L.J,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),V.registerVersion("@firebase/auth-compat","0.4.2")}(q.Z)},5861:(Tt,Pe,z)=>{"use strict";function d(L,ae,le,pe,Me,Ue,xe){try{var K=L[Ue](xe),J=K.value}catch(ue){return void le(ue)}K.done?ae(J):Promise.resolve(J).then(pe,Me)}function q(L){return function(){var ae=this,le=arguments;return new Promise(function(pe,Me){var Ue=L.apply(ae,le);function xe(J){d(Ue,pe,Me,xe,K,"next",J)}function K(J){d(Ue,pe,Me,xe,K,"throw",J)}xe(void 0)})}}z.d(Pe,{Z:()=>q})},7582:(Tt,Pe,z)=>{"use strict";function ae(ye,Se){var Le={};for(var qe in ye)Object.prototype.hasOwnProperty.call(ye,qe)&&Se.indexOf(qe)<0&&(Le[qe]=ye[qe]);if(null!=ye&&"function"==typeof Object.getOwnPropertySymbols){var tt=0;for(qe=Object.getOwnPropertySymbols(ye);tt<qe.length;tt++)Se.indexOf(qe[tt])<0&&Object.prototype.propertyIsEnumerable.call(ye,qe[tt])&&(Le[qe[tt]]=ye[qe[tt]])}return Le}function ue(ye,Se,Le,qe){return new(Le||(Le=Promise))(function(Je,dt){function bt(Rt){try{pt(qe.next(Rt))}catch(Gt){dt(Gt)}}function $n(Rt){try{pt(qe.throw(Rt))}catch(Gt){dt(Gt)}}function pt(Rt){Rt.done?Je(Rt.value):function tt(Je){return Je instanceof Le?Je:new Le(function(dt){dt(Je)})}(Rt.value).then(bt,$n)}pt((qe=qe.apply(ye,Se||[])).next())})}function ce(ye){return this instanceof ce?(this.v=ye,this):new ce(ye)}function Re(ye,Se,Le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,qe=Le.apply(ye,Se||[]),Je=[];return tt={},dt("next"),dt("throw"),dt("return"),tt[Symbol.asyncIterator]=function(){return this},tt;function dt(wn){qe[wn]&&(tt[wn]=function(ln){return new Promise(function(Wt,hi){Je.push([wn,ln,Wt,hi])>1||bt(wn,ln)})})}function bt(wn,ln){try{!function $n(wn){wn.value instanceof ce?Promise.resolve(wn.value.v).then(pt,Rt):Gt(Je[0][2],wn)}(qe[wn](ln))}catch(Wt){Gt(Je[0][3],Wt)}}function pt(wn){bt("next",wn)}function Rt(wn){bt("throw",wn)}function Gt(wn,ln){wn(ln),Je.shift(),Je.length&&bt(Je[0][0],Je[0][1])}}function Ee(ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,Se=ye[Symbol.asyncIterator];return Se?Se.call(ye):(ye=function Ne(ye){var Se="function"==typeof Symbol&&Symbol.iterator,Le=Se&&ye[Se],qe=0;if(Le)return Le.call(ye);if(ye&&"number"==typeof ye.length)return{next:function(){return ye&&qe>=ye.length&&(ye=void 0),{value:ye&&ye[qe++],done:!ye}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}(ye),Le={},qe("next"),qe("throw"),qe("return"),Le[Symbol.asyncIterator]=function(){return this},Le);function qe(Je){Le[Je]=ye[Je]&&function(dt){return new Promise(function(bt,$n){!function tt(Je,dt,bt,$n){Promise.resolve($n).then(function(pt){Je({value:pt,done:bt})},dt)}(bt,$n,(dt=ye[Je](dt)).done,dt.value)})}}}z.d(Pe,{FC:()=>Re,KL:()=>Ee,_T:()=>ae,mG:()=>ue,qq:()=>ce})}},Tt=>{Tt(Tt.s=4081)}]);